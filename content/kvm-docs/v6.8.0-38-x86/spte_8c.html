<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KVM: arch/x86/kvm/mmu/spte.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KVM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_ea9599923402ca8ab47fc3e495999dea.html">arch</a></li><li class="navelem"><a class="el" href="dir_c21774f8bc9f0de15163573e5f5fa2b5.html">x86</a></li><li class="navelem"><a class="el" href="dir_fde450fd4b58e2560c53a1e73bfa4d6d.html">kvm</a></li><li class="navelem"><a class="el" href="dir_5b5419bab78eb3e26ed0c43edf6fed27.html">mmu</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">spte.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/kvm_host.h&gt;</code><br />
<code>#include &quot;<a class="el" href="mmu_8h_source.html">mmu.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="x86_8h_source.html">x86.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="spte_8h_source.html">spte.h</a>&quot;</code><br />
<code>#include &lt;asm/e820/api.h&gt;</code><br />
<code>#include &lt;asm/memtype.h&gt;</code><br />
<code>#include &lt;asm/vmx.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for spte.c:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c__incl.png" border="0" usemap="#aarch_2x86_2kvm_2mmu_2spte_8c" alt=""/></div>
<map name="aarch_2x86_2kvm_2mmu_2spte_8c" id="aarch_2x86_2kvm_2mmu_2spte_8c">
<area shape="rect" title=" " alt="" coords="1392,5,1584,32"/>
<area shape="rect" title=" " alt="" coords="1161,453,1296,480"/>
<area shape="rect" href="mmu_8h.html" title=" " alt="" coords="1144,155,1212,181"/>
<area shape="rect" href="x86_8h.html" title=" " alt="" coords="1519,304,1578,331"/>
<area shape="rect" href="mmu__internal_8h.html" title=" " alt="" coords="1275,155,1400,181"/>
<area shape="rect" href="spte_8h.html" title=" " alt="" coords="1306,80,1369,107"/>
<area shape="rect" title=" " alt="" coords="1579,80,1702,107"/>
<area shape="rect" title=" " alt="" coords="1726,80,1856,107"/>
<area shape="rect" title=" " alt="" coords="1880,80,1974,107"/>
<area shape="rect" href="kvm__cache__regs_8h.html" title=" " alt="" coords="1266,379,1409,405"/>
<area shape="rect" href="cpuid_8h.html" title=" " alt="" coords="908,229,978,256"/>
<area shape="rect" href="reverse__cpuid_8h.html" title=" " alt="" coords="244,304,370,331"/>
<area shape="rect" title=" " alt="" coords="898,304,988,331"/>
<area shape="rect" title=" " alt="" coords="1012,304,1140,331"/>
<area shape="rect" title=" " alt="" coords="531,304,694,331"/>
<area shape="rect" href="governed__features_8h.html" title=" " alt="" coords="718,304,874,331"/>
<area shape="rect" title=" " alt="" coords="1892,379,2024,405"/>
<area shape="rect" title=" " alt="" coords="1485,379,1580,405"/>
<area shape="rect" title=" " alt="" coords="1604,379,1720,405"/>
<area shape="rect" href="kvm__emulate_8h.html" title=" " alt="" coords="1744,379,1868,405"/>
<area shape="rect" title=" " alt="" coords="1799,453,1930,480"/>
<area shape="rect" href="fpu_8h.html" title=" " alt="" coords="1720,453,1774,480"/>
<area shape="rect" title=" " alt="" coords="1692,528,1802,555"/>
<area shape="rect" title=" " alt="" coords="45,379,172,405"/>
<area shape="rect" title=" " alt="" coords="196,379,332,405"/>
<area shape="rect" title=" " alt="" coords="357,379,500,405"/>
<area shape="rect" title=" " alt="" coords="1420,229,1527,256"/>
<area shape="rect" title=" " alt="" coords="1266,229,1396,256"/>
</map>
</div>
</div>
<p><a href="spte_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1f8c165bf4196327bc3abff648276d92"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a1f8c165bf4196327bc3abff648276d92">pr_fmt</a>(fmt)&#160;&#160;&#160;KBUILD_MODNAME &quot;: &quot; fmt</td></tr>
<tr class="separator:a1f8c165bf4196327bc3abff648276d92"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aeb873ac8a7702d1dcdf1e8d5e94c1487"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#aeb873ac8a7702d1dcdf1e8d5e94c1487">module_param_named</a> (mmio_caching, <a class="el" href="mmu_8h.html#ad1f35c581f53d7ebf9ada1be6d5531ad">enable_mmio_caching</a>, bool, 0444)</td></tr>
<tr class="separator:aeb873ac8a7702d1dcdf1e8d5e94c1487"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c7fb06cec630924fb964c2ee4c9cd20"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a2c7fb06cec630924fb964c2ee4c9cd20">EXPORT_SYMBOL_GPL</a> (<a class="el" href="mmu_8h.html#ad1f35c581f53d7ebf9ada1be6d5531ad">enable_mmio_caching</a>)</td></tr>
<tr class="separator:a2c7fb06cec630924fb964c2ee4c9cd20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f20fa4bc6f979446977550bec7251ab"><td class="memItemLeft" align="right" valign="top">void __init&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a9f20fa4bc6f979446977550bec7251ab">kvm_mmu_spte_module_init</a> (void)</td></tr>
<tr class="separator:a9f20fa4bc6f979446977550bec7251ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a941485cd3f9578fdfff7474df672b8e4"><td class="memItemLeft" align="right" valign="top">static u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a941485cd3f9578fdfff7474df672b8e4">generation_mmio_spte_mask</a> (u64 gen)</td></tr>
<tr class="separator:a941485cd3f9578fdfff7474df672b8e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae55574ff3b0384504236d8fb85a3a6d0"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#ae55574ff3b0384504236d8fb85a3a6d0">make_mmio_spte</a> (struct kvm_vcpu *vcpu, u64 gfn, unsigned int access)</td></tr>
<tr class="separator:ae55574ff3b0384504236d8fb85a3a6d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab239f729574ce926da684e16e1c739fc"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#ab239f729574ce926da684e16e1c739fc">kvm_is_mmio_pfn</a> (kvm_pfn_t pfn)</td></tr>
<tr class="separator:ab239f729574ce926da684e16e1c739fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11de60840b247621debae854aea928db"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a11de60840b247621debae854aea928db">spte_has_volatile_bits</a> (u64 spte)</td></tr>
<tr class="separator:a11de60840b247621debae854aea928db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8dba69ef9f5267d41ba061dbe101ded"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#ab8dba69ef9f5267d41ba061dbe101ded">make_spte</a> (struct kvm_vcpu *vcpu, struct <a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a> *sp, const struct kvm_memory_slot *slot, unsigned int pte_access, gfn_t gfn, kvm_pfn_t pfn, u64 old_spte, bool prefetch, bool can_unsync, bool host_writable, u64 *new_spte)</td></tr>
<tr class="separator:ab8dba69ef9f5267d41ba061dbe101ded"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0162f8b29f82f308036271f93880cd7"><td class="memItemLeft" align="right" valign="top">static u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#ac0162f8b29f82f308036271f93880cd7">make_spte_executable</a> (u64 spte)</td></tr>
<tr class="separator:ac0162f8b29f82f308036271f93880cd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc3a08f029fff6aaf2bf687edf69410f"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#adc3a08f029fff6aaf2bf687edf69410f">make_huge_page_split_spte</a> (struct kvm *kvm, u64 huge_spte, union kvm_mmu_page_role role, int index)</td></tr>
<tr class="separator:adc3a08f029fff6aaf2bf687edf69410f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98038e4116bcdef6f9e1e335eefc29c9"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a98038e4116bcdef6f9e1e335eefc29c9">make_nonleaf_spte</a> (u64 *child_pt, bool ad_disabled)</td></tr>
<tr class="separator:a98038e4116bcdef6f9e1e335eefc29c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acde6f5a6ce759cab5d21b74658796860"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#acde6f5a6ce759cab5d21b74658796860">kvm_mmu_changed_pte_notifier_make_spte</a> (u64 old_spte, kvm_pfn_t new_pfn)</td></tr>
<tr class="separator:acde6f5a6ce759cab5d21b74658796860"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8885614ad1f7e35c498eb228826d1909"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a8885614ad1f7e35c498eb228826d1909">mark_spte_for_access_track</a> (u64 spte)</td></tr>
<tr class="separator:a8885614ad1f7e35c498eb228826d1909"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80f2cd338ffdc70a83e10eda040387a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a80f2cd338ffdc70a83e10eda040387a5">kvm_mmu_set_mmio_spte_mask</a> (u64 mmio_value, u64 mmio_mask, u64 access_mask)</td></tr>
<tr class="separator:a80f2cd338ffdc70a83e10eda040387a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6133db0cec99aeae1b9901711863f1e2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a6133db0cec99aeae1b9901711863f1e2">EXPORT_SYMBOL_GPL</a> (<a class="el" href="mmu_8h.html#a80f2cd338ffdc70a83e10eda040387a5">kvm_mmu_set_mmio_spte_mask</a>)</td></tr>
<tr class="separator:a6133db0cec99aeae1b9901711863f1e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24f526505004d8f749e0e069c2efd17a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a24f526505004d8f749e0e069c2efd17a">kvm_mmu_set_me_spte_mask</a> (u64 me_value, u64 me_mask)</td></tr>
<tr class="separator:a24f526505004d8f749e0e069c2efd17a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3e12657958cfaec57cbc414b654483e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#ac3e12657958cfaec57cbc414b654483e">EXPORT_SYMBOL_GPL</a> (<a class="el" href="mmu_8h.html#a24f526505004d8f749e0e069c2efd17a">kvm_mmu_set_me_spte_mask</a>)</td></tr>
<tr class="separator:ac3e12657958cfaec57cbc414b654483e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cb3688f8c5783569f001a056f7d93d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a5cb3688f8c5783569f001a056f7d93d0">kvm_mmu_set_ept_masks</a> (bool has_ad_bits, bool has_exec_only)</td></tr>
<tr class="separator:a5cb3688f8c5783569f001a056f7d93d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18f0d0f24b1e241fda51789ef187d4d9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a18f0d0f24b1e241fda51789ef187d4d9">EXPORT_SYMBOL_GPL</a> (<a class="el" href="mmu_8h.html#a5cb3688f8c5783569f001a056f7d93d0">kvm_mmu_set_ept_masks</a>)</td></tr>
<tr class="separator:a18f0d0f24b1e241fda51789ef187d4d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad87f402ab1a9a0340b4e280deb05dd7c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#ad87f402ab1a9a0340b4e280deb05dd7c">kvm_mmu_reset_all_pte_masks</a> (void)</td></tr>
<tr class="separator:ad87f402ab1a9a0340b4e280deb05dd7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad1f35c581f53d7ebf9ada1be6d5531ad"><td class="memItemLeft" align="right" valign="top">bool <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#ad1f35c581f53d7ebf9ada1be6d5531ad">enable_mmio_caching</a> = true</td></tr>
<tr class="separator:ad1f35c581f53d7ebf9ada1be6d5531ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a329e4ae6a29cf76c6524ccc85279b8d6"><td class="memItemLeft" align="right" valign="top">static bool <a class="el" href="vmx_8c.html#ab6223492e3b36a6075f580b1f43056d2">__ro_after_init</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a329e4ae6a29cf76c6524ccc85279b8d6">allow_mmio_caching</a></td></tr>
<tr class="separator:a329e4ae6a29cf76c6524ccc85279b8d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2539eaf9e6c788f2fa877c7e9e1c29a8"><td class="memItemLeft" align="right" valign="top">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a2539eaf9e6c788f2fa877c7e9e1c29a8">shadow_host_writable_mask</a></td></tr>
<tr class="separator:a2539eaf9e6c788f2fa877c7e9e1c29a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af450287cc0d83434644a34a9b938a250"><td class="memItemLeft" align="right" valign="top">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#af450287cc0d83434644a34a9b938a250">shadow_mmu_writable_mask</a></td></tr>
<tr class="separator:af450287cc0d83434644a34a9b938a250"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac345c70889ab98d540472296de75aaa9"><td class="memItemLeft" align="right" valign="top">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#ac345c70889ab98d540472296de75aaa9">shadow_nx_mask</a></td></tr>
<tr class="separator:ac345c70889ab98d540472296de75aaa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4b595f87e310029f3011955be43dc6d"><td class="memItemLeft" align="right" valign="top">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#ae4b595f87e310029f3011955be43dc6d">shadow_x_mask</a></td></tr>
<tr class="separator:ae4b595f87e310029f3011955be43dc6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88422204fa87484ebb6b1afe5657293e"><td class="memItemLeft" align="right" valign="top">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a88422204fa87484ebb6b1afe5657293e">shadow_user_mask</a></td></tr>
<tr class="separator:a88422204fa87484ebb6b1afe5657293e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1037a592d9e03bab1ce70a6e471901ae"><td class="memItemLeft" align="right" valign="top">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a1037a592d9e03bab1ce70a6e471901ae">shadow_accessed_mask</a></td></tr>
<tr class="separator:a1037a592d9e03bab1ce70a6e471901ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4da775a32ca03cd42a18da1e1aac568e"><td class="memItemLeft" align="right" valign="top">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a4da775a32ca03cd42a18da1e1aac568e">shadow_dirty_mask</a></td></tr>
<tr class="separator:a4da775a32ca03cd42a18da1e1aac568e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff0e78f9604a10796d208995c28b1371"><td class="memItemLeft" align="right" valign="top">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#aff0e78f9604a10796d208995c28b1371">shadow_mmio_value</a></td></tr>
<tr class="separator:aff0e78f9604a10796d208995c28b1371"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59be1c97d42d1a20cd3341c0133674f7"><td class="memItemLeft" align="right" valign="top">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a59be1c97d42d1a20cd3341c0133674f7">shadow_mmio_mask</a></td></tr>
<tr class="separator:a59be1c97d42d1a20cd3341c0133674f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a598921f5a19013886e32dec8999ab00e"><td class="memItemLeft" align="right" valign="top">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a598921f5a19013886e32dec8999ab00e">shadow_mmio_access_mask</a></td></tr>
<tr class="separator:a598921f5a19013886e32dec8999ab00e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8d723b5e0ffd2c2927bc5ab2ea5219e"><td class="memItemLeft" align="right" valign="top">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#af8d723b5e0ffd2c2927bc5ab2ea5219e">shadow_present_mask</a></td></tr>
<tr class="separator:af8d723b5e0ffd2c2927bc5ab2ea5219e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61bd7ce98c04ee184b3e600f8bbe1712"><td class="memItemLeft" align="right" valign="top">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a61bd7ce98c04ee184b3e600f8bbe1712">shadow_memtype_mask</a></td></tr>
<tr class="separator:a61bd7ce98c04ee184b3e600f8bbe1712"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aea0c6f6f3fb8ec2b27d22b737e462c"><td class="memItemLeft" align="right" valign="top">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a1aea0c6f6f3fb8ec2b27d22b737e462c">shadow_me_value</a></td></tr>
<tr class="separator:a1aea0c6f6f3fb8ec2b27d22b737e462c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a880496effc639a427674eacc301593f3"><td class="memItemLeft" align="right" valign="top">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a880496effc639a427674eacc301593f3">shadow_me_mask</a></td></tr>
<tr class="separator:a880496effc639a427674eacc301593f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1db70b0d38cd86029fc77525fa53d96a"><td class="memItemLeft" align="right" valign="top">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a1db70b0d38cd86029fc77525fa53d96a">shadow_acc_track_mask</a></td></tr>
<tr class="separator:a1db70b0d38cd86029fc77525fa53d96a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d00cde16d32442591f9b96abcaadf94"><td class="memItemLeft" align="right" valign="top">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a2d00cde16d32442591f9b96abcaadf94">shadow_nonpresent_or_rsvd_mask</a></td></tr>
<tr class="separator:a2d00cde16d32442591f9b96abcaadf94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad79ebd99e580b4e6fe8338ad43f3e6b0"><td class="memItemLeft" align="right" valign="top">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#ad79ebd99e580b4e6fe8338ad43f3e6b0">shadow_nonpresent_or_rsvd_lower_gfn_mask</a></td></tr>
<tr class="separator:ad79ebd99e580b4e6fe8338ad43f3e6b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43d89b28f6285b7b34c137f70723565b"><td class="memItemLeft" align="right" valign="top">u8 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spte_8c.html#a43d89b28f6285b7b34c137f70723565b">shadow_phys_bits</a></td></tr>
<tr class="separator:a43d89b28f6285b7b34c137f70723565b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a1f8c165bf4196327bc3abff648276d92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f8c165bf4196327bc3abff648276d92">&#9670;&nbsp;</a></span>pr_fmt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define pr_fmt</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fmt</td><td>)</td>
          <td>&#160;&#160;&#160;KBUILD_MODNAME &quot;: &quot; fmt</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00010">10</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2c7fb06cec630924fb964c2ee4c9cd20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c7fb06cec630924fb964c2ee4c9cd20">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mmu_8h.html#ad1f35c581f53d7ebf9ada1be6d5531ad">enable_mmio_caching</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a18f0d0f24b1e241fda51789ef187d4d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18f0d0f24b1e241fda51789ef187d4d9">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mmu_8h.html#a5cb3688f8c5783569f001a056f7d93d0">kvm_mmu_set_ept_masks</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac3e12657958cfaec57cbc414b654483e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3e12657958cfaec57cbc414b654483e">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mmu_8h.html#a24f526505004d8f749e0e069c2efd17a">kvm_mmu_set_me_spte_mask</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6133db0cec99aeae1b9901711863f1e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6133db0cec99aeae1b9901711863f1e2">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mmu_8h.html#a80f2cd338ffdc70a83e10eda040387a5">kvm_mmu_set_mmio_spte_mask</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a941485cd3f9578fdfff7474df672b8e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a941485cd3f9578fdfff7474df672b8e4">&#9670;&nbsp;</a></span>generation_mmio_spte_mask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u64 generation_mmio_spte_mask </td>
          <td>(</td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>gen</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00060">60</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;{</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    u64 mask;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    WARN_ON_ONCE(gen &amp; ~<a class="code" href="spte_8h.html#ae05bdd6942922f77eda117f3a2bf075b">MMIO_SPTE_GEN_MASK</a>);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    mask = (gen &lt;&lt; <a class="code" href="spte_8h.html#ab7b14b2f6ebc2fb4f29afff4888a4156">MMIO_SPTE_GEN_LOW_SHIFT</a>) &amp; <a class="code" href="spte_8h.html#ac042a2dfde6e81dc97139bde6cc905a6">MMIO_SPTE_GEN_LOW_MASK</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    mask |= (gen &lt;&lt; <a class="code" href="spte_8h.html#a48b40c9883fec6097f663bd5f6a7e6d7">MMIO_SPTE_GEN_HIGH_SHIFT</a>) &amp; <a class="code" href="spte_8h.html#a496289faf862b568c00af2acbe865587">MMIO_SPTE_GEN_HIGH_MASK</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">return</span> mask;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;}</div>
<div class="ttc" id="aspte_8h_html_a48b40c9883fec6097f663bd5f6a7e6d7"><div class="ttname"><a href="spte_8h.html#a48b40c9883fec6097f663bd5f6a7e6d7">MMIO_SPTE_GEN_HIGH_SHIFT</a></div><div class="ttdeci">#define MMIO_SPTE_GEN_HIGH_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00148">spte.h:148</a></div></div>
<div class="ttc" id="aspte_8h_html_a496289faf862b568c00af2acbe865587"><div class="ttname"><a href="spte_8h.html#a496289faf862b568c00af2acbe865587">MMIO_SPTE_GEN_HIGH_MASK</a></div><div class="ttdeci">#define MMIO_SPTE_GEN_HIGH_MASK</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00122">spte.h:122</a></div></div>
<div class="ttc" id="aspte_8h_html_ab7b14b2f6ebc2fb4f29afff4888a4156"><div class="ttname"><a href="spte_8h.html#ab7b14b2f6ebc2fb4f29afff4888a4156">MMIO_SPTE_GEN_LOW_SHIFT</a></div><div class="ttdeci">#define MMIO_SPTE_GEN_LOW_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00147">spte.h:147</a></div></div>
<div class="ttc" id="aspte_8h_html_ac042a2dfde6e81dc97139bde6cc905a6"><div class="ttname"><a href="spte_8h.html#ac042a2dfde6e81dc97139bde6cc905a6">MMIO_SPTE_GEN_LOW_MASK</a></div><div class="ttdeci">#define MMIO_SPTE_GEN_LOW_MASK</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00120">spte.h:120</a></div></div>
<div class="ttc" id="aspte_8h_html_ae05bdd6942922f77eda117f3a2bf075b"><div class="ttname"><a href="spte_8h.html#ae05bdd6942922f77eda117f3a2bf075b">MMIO_SPTE_GEN_MASK</a></div><div class="ttdeci">#define MMIO_SPTE_GEN_MASK</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00150">spte.h:150</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_a941485cd3f9578fdfff7474df672b8e4_icgraph.png" border="0" usemap="#aspte_8c_a941485cd3f9578fdfff7474df672b8e4_icgraph" alt=""/></div>
<map name="aspte_8c_a941485cd3f9578fdfff7474df672b8e4_icgraph" id="aspte_8c_a941485cd3f9578fdfff7474df672b8e4_icgraph">
<area shape="rect" title=" " alt="" coords="3253,451,3468,478"/>
<area shape="rect" href="spte_8c.html#ae55574ff3b0384504236d8fb85a3a6d0" title=" " alt="" coords="3067,451,3205,478"/>
<area shape="rect" href="mmu_8c.html#ab2e71dba35d97a82223c04486a9258aa" title=" " alt="" coords="2865,422,3001,449"/>
<area shape="rect" href="tdp__mmu_8c.html#aa98226578ebe207e97e262a86bbd5427" title=" " alt="" coords="2848,473,3019,515"/>
<area shape="rect" href="mmu_8c.html#a8fc6edfe7bd2a5a7d47952232ea5b8a1" title=" " alt="" coords="2663,426,2781,453"/>
<area shape="rect" href="mmu_8c.html#a342a9f81546640ced3244cb4a04d0834" title=" " alt="" coords="2656,350,2788,377"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="1855,401,1949,427"/>
<area shape="rect" href="mmu_8c.html#aab93e6e4502a54b3d61492f0e052e358" title=" " alt="" coords="2404,426,2596,453"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="1875,502,1929,529"/>
<area shape="rect" href="paging__tmpl_8h.html#ac251b8f404f8fa0840ec5f4db44a6480" title=" " alt="" coords="2219,477,2331,503"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1672,401,1807,427"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="1463,375,1618,402"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="1457,426,1624,453"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="1240,375,1388,402"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="1219,147,1409,174"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="1012,375,1132,402"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="253,401,425,427"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="729,619,917,646"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="503,898,643,925"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="741,274,904,301"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="741,325,905,351"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="5,401,205,427"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="523,594,622,621"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="519,645,626,671"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="291,771,387,798"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="473,695,672,722"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="503,847,643,874"/>
<area shape="rect" href="smm_8c.html#a5382946234c910e05c6e2c09aff15713" title=" " alt="" coords="496,797,649,823"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="508,426,637,453"/>
<area shape="rect" href="vmx_2nested_8c.html#a001f930db9a867e828cf01b48d3e4e25" title=" " alt="" coords="495,477,650,519"/>
<area shape="rect" href="x86_8c.html#a420caf80521ab8d6ef7218d5dd26d47f" title=" " alt="" coords="535,543,610,570"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="306,847,373,874"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="287,898,392,925"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="987,31,1157,72"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="988,147,1156,174"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="742,5,903,47"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="741,71,905,98"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="743,122,902,149"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="733,173,912,199"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="759,223,887,250"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="1227,586,1401,613"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="973,721,1171,747"/>
<area shape="rect" href="mmu_8c.html#a3e794d802eeb843cd6d7b699b74d8bf3" title=" " alt="" coords="734,721,911,747"/>
<area shape="rect" href="mmu_8c.html#a00f26353045c597f6a49cdd4f239f548" title=" " alt="" coords="720,771,925,798"/>
<area shape="rect" href="mmu_8c.html#a269190dc46a1af3d04b9e039944d85b9" title=" " alt="" coords="2193,426,2356,453"/>
<area shape="rect" href="mmu_8c.html#a5a96624b696225b4bc6c90caea946cb0" title=" " alt="" coords="1997,426,2145,453"/>
<area shape="rect" href="paging__tmpl_8h.html#a53f0634ff017bc46ff621fdad18cdcd4" title=" " alt="" coords="2019,477,2123,503"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1694,502,1785,529"/>
<area shape="rect" href="paging__tmpl_8h.html#a189517b8079c307a0aef9f58dc8c7a25" title=" " alt="" coords="2457,325,2543,351"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="2644,481,2800,507"/>
</map>
</div>

</div>
</div>
<a id="ab239f729574ce926da684e16e1c739fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab239f729574ce926da684e16e1c739fc">&#9670;&nbsp;</a></span>kvm_is_mmio_pfn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_is_mmio_pfn </td>
          <td>(</td>
          <td class="paramtype">kvm_pfn_t&#160;</td>
          <td class="paramname"><em>pfn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00088">88</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;{</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span> (pfn_valid(pfn))</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">return</span> !is_zero_pfn(pfn) &amp;&amp; PageReserved(pfn_to_page(pfn)) &amp;&amp;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">             * Some reserved pages, such as those from NVDIMM</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">             * DAX devices, are not for MMIO, and can be mapped</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">             * with cached memory type for better performance.</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">             * However, the above check misconceives those pages</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">             * as MMIO, and results in KVM mapping them with UC</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">             * memory type, which would hurt the performance.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">             * Therefore, we check the host memory type in addition</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">             * and only treat UC/UC-/WC pages as MMIO.</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            (!pat_enabled() || pat_pfn_immune_to_uc_mtrr(pfn));</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">return</span> !e820__mapped_raw_any(pfn_to_hpa(pfn),</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                     pfn_to_hpa(pfn + 1) - 1,</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                     E820_TYPE_RAM);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_ab239f729574ce926da684e16e1c739fc_icgraph.png" border="0" usemap="#aspte_8c_ab239f729574ce926da684e16e1c739fc_icgraph" alt=""/></div>
<map name="aspte_8c_ab239f729574ce926da684e16e1c739fc_icgraph" id="aspte_8c_ab239f729574ce926da684e16e1c739fc_icgraph">
<area shape="rect" title=" " alt="" coords="3004,523,3147,550"/>
<area shape="rect" href="spte_8c.html#ab8dba69ef9f5267d41ba061dbe101ded" title=" " alt="" coords="2863,523,2956,550"/>
<area shape="rect" href="mmu_8c.html#a8fc6edfe7bd2a5a7d47952232ea5b8a1" title=" " alt="" coords="2670,473,2789,499"/>
<area shape="rect" href="paging__tmpl_8h.html#a189517b8079c307a0aef9f58dc8c7a25" title=" " alt="" coords="2686,523,2773,550"/>
<area shape="rect" href="tdp__mmu_8c.html#aa98226578ebe207e97e262a86bbd5427" title=" " alt="" coords="2644,575,2815,616"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="1855,401,1949,427"/>
<area shape="rect" href="mmu_8c.html#aab93e6e4502a54b3d61492f0e052e358" title=" " alt="" coords="2404,426,2596,453"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="1875,502,1929,529"/>
<area shape="rect" href="paging__tmpl_8h.html#ac251b8f404f8fa0840ec5f4db44a6480" title=" " alt="" coords="2219,477,2331,503"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1672,401,1807,427"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="1463,375,1618,402"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="1457,426,1624,453"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="1240,375,1388,402"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="1219,147,1409,174"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="1012,375,1132,402"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="253,401,425,427"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="729,619,917,646"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="503,898,643,925"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="741,274,904,301"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="741,325,905,351"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="5,401,205,427"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="523,594,622,621"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="519,645,626,671"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="291,771,387,798"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="473,695,672,722"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="503,847,643,874"/>
<area shape="rect" href="smm_8c.html#a5382946234c910e05c6e2c09aff15713" title=" " alt="" coords="496,797,649,823"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="508,426,637,453"/>
<area shape="rect" href="vmx_2nested_8c.html#a001f930db9a867e828cf01b48d3e4e25" title=" " alt="" coords="495,477,650,519"/>
<area shape="rect" href="x86_8c.html#a420caf80521ab8d6ef7218d5dd26d47f" title=" " alt="" coords="535,543,610,570"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="306,847,373,874"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="287,898,392,925"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="483,299,662,326"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="495,249,650,275"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="987,31,1157,72"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="988,147,1156,174"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="742,5,903,47"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="741,71,905,98"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="743,122,902,149"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="733,173,912,199"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="759,223,887,250"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="1227,561,1401,587"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="973,721,1171,747"/>
<area shape="rect" href="mmu_8c.html#a3e794d802eeb843cd6d7b699b74d8bf3" title=" " alt="" coords="734,721,911,747"/>
<area shape="rect" href="mmu_8c.html#a00f26353045c597f6a49cdd4f239f548" title=" " alt="" coords="720,771,925,798"/>
<area shape="rect" href="mmu_8c.html#a269190dc46a1af3d04b9e039944d85b9" title=" " alt="" coords="2193,426,2356,453"/>
<area shape="rect" href="mmu_8c.html#a5a96624b696225b4bc6c90caea946cb0" title=" " alt="" coords="1997,426,2145,453"/>
<area shape="rect" href="paging__tmpl_8h.html#a53f0634ff017bc46ff621fdad18cdcd4" title=" " alt="" coords="2019,477,2123,503"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1694,502,1785,529"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="2422,582,2578,609"/>
</map>
</div>

</div>
</div>
<a id="acde6f5a6ce759cab5d21b74658796860"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acde6f5a6ce759cab5d21b74658796860">&#9670;&nbsp;</a></span>kvm_mmu_changed_pte_notifier_make_spte()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 kvm_mmu_changed_pte_notifier_make_spte </td>
          <td>(</td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>old_spte</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kvm_pfn_t&#160;</td>
          <td class="paramname"><em>new_pfn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00325">325</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;{</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    u64 new_spte;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    new_spte = old_spte &amp; ~<a class="code" href="spte_8h.html#a9c2a7197922649a9b5f00d875c70b7fe">SPTE_BASE_ADDR_MASK</a>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    new_spte |= (u64)new_pfn &lt;&lt; PAGE_SHIFT;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    new_spte &amp;= ~<a class="code" href="mmu_8h.html#a8738f5e32b741b402eeb723accb071ed">PT_WRITABLE_MASK</a>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    new_spte &amp;= ~<a class="code" href="spte_8c.html#a2539eaf9e6c788f2fa877c7e9e1c29a8">shadow_host_writable_mask</a>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    new_spte &amp;= ~<a class="code" href="spte_8c.html#af450287cc0d83434644a34a9b938a250">shadow_mmu_writable_mask</a>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    new_spte = <a class="code" href="spte_8c.html#a8885614ad1f7e35c498eb228826d1909">mark_spte_for_access_track</a>(new_spte);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">return</span> new_spte;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;}</div>
<div class="ttc" id="ammu_8h_html_a8738f5e32b741b402eeb723accb071ed"><div class="ttname"><a href="mmu_8h.html#a8738f5e32b741b402eeb723accb071ed">PT_WRITABLE_MASK</a></div><div class="ttdeci">#define PT_WRITABLE_MASK</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00015">mmu.h:15</a></div></div>
<div class="ttc" id="aspte_8c_html_a2539eaf9e6c788f2fa877c7e9e1c29a8"><div class="ttname"><a href="spte_8c.html#a2539eaf9e6c788f2fa877c7e9e1c29a8">shadow_host_writable_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_host_writable_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00027">spte.c:27</a></div></div>
<div class="ttc" id="aspte_8c_html_a8885614ad1f7e35c498eb228826d1909"><div class="ttname"><a href="spte_8c.html#a8885614ad1f7e35c498eb228826d1909">mark_spte_for_access_track</a></div><div class="ttdeci">u64 mark_spte_for_access_track(u64 spte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00341">spte.c:341</a></div></div>
<div class="ttc" id="aspte_8c_html_af450287cc0d83434644a34a9b938a250"><div class="ttname"><a href="spte_8c.html#af450287cc0d83434644a34a9b938a250">shadow_mmu_writable_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_mmu_writable_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00028">spte.c:28</a></div></div>
<div class="ttc" id="aspte_8h_html_a9c2a7197922649a9b5f00d875c70b7fe"><div class="ttname"><a href="spte_8h.html#a9c2a7197922649a9b5f00d875c70b7fe">SPTE_BASE_ADDR_MASK</a></div><div class="ttdeci">#define SPTE_BASE_ADDR_MASK</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00040">spte.h:40</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_acde6f5a6ce759cab5d21b74658796860_cgraph.png" border="0" usemap="#aspte_8c_acde6f5a6ce759cab5d21b74658796860_cgraph" alt=""/></div>
<map name="aspte_8c_acde6f5a6ce759cab5d21b74658796860_cgraph" id="aspte_8c_acde6f5a6ce759cab5d21b74658796860_cgraph">
<area shape="rect" title=" " alt="" coords="5,64,188,105"/>
<area shape="rect" href="spte_8c.html#a8885614ad1f7e35c498eb228826d1909" title=" " alt="" coords="236,64,403,105"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="453,5,607,47"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="451,71,609,98"/>
<area shape="rect" href="spte_8h.html#a976cddc84d935189584bdce94d4805fd" title=" " alt="" coords="657,97,789,123"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="663,13,784,39"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="837,97,1012,123"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_acde6f5a6ce759cab5d21b74658796860_icgraph.png" border="0" usemap="#aspte_8c_acde6f5a6ce759cab5d21b74658796860_icgraph" alt=""/></div>
<map name="aspte_8c_acde6f5a6ce759cab5d21b74658796860_icgraph" id="aspte_8c_acde6f5a6ce759cab5d21b74658796860_icgraph">
<area shape="rect" title=" " alt="" coords="607,23,789,65"/>
<area shape="rect" href="mmu_8c.html#a896287d2c20890911385b8c4e905f803" title=" " alt="" coords="227,5,373,32"/>
<area shape="rect" href="tdp__mmu_8c.html#a01bf8752c61ddeae2878ef46d312e00c" title=" " alt="" coords="453,56,559,83"/>
<area shape="rect" href="mmu_8c.html#a978186d69e4a1b753b9650294d80ca7d" title=" " alt="" coords="5,31,147,57"/>
<area shape="rect" href="tdp__mmu_8c.html#aa53a75612d7b32153949be34f4055144" title=" " alt="" coords="195,56,405,83"/>
</map>
</div>

</div>
</div>
<a id="ad87f402ab1a9a0340b4e280deb05dd7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad87f402ab1a9a0340b4e280deb05dd7c">&#9670;&nbsp;</a></span>kvm_mmu_reset_all_pte_masks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_mmu_reset_all_pte_masks </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00453">453</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;{</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    u8 low_phys_bits;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    u64 mask;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <a class="code" href="spte_8c.html#a43d89b28f6285b7b34c137f70723565b">shadow_phys_bits</a> = <a class="code" href="mmu_8h.html#ab4a3e49f63d0517b2694a9d8f72cb79a">kvm_get_shadow_phys_bits</a>();</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">     * If the CPU has 46 or less physical address bits, then set an</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">     * appropriate mask to guard against L1TF attacks. Otherwise, it is</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">     * assumed that the CPU is not vulnerable to L1TF.</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">     * Some Intel CPUs address the L1 cache using more PA bits than are</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">     * reported by CPUID. Use the PA width of the L1 cache when possible</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">     * to achieve more effective mitigation, e.g. if system RAM overlaps</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">     * the most significant bits of legal physical address space.</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="spte_8c.html#a2d00cde16d32442591f9b96abcaadf94">shadow_nonpresent_or_rsvd_mask</a> = 0;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    low_phys_bits = boot_cpu_data.x86_phys_bits;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">if</span> (boot_cpu_has_bug(X86_BUG_L1TF) &amp;&amp;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        !WARN_ON_ONCE(boot_cpu_data.x86_cache_bits &gt;=</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;              52 - <a class="code" href="spte_8h.html#a1a17a48568e4885c2681903b021d5002">SHADOW_NONPRESENT_OR_RSVD_MASK_LEN</a>)) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        low_phys_bits = boot_cpu_data.x86_cache_bits</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            - <a class="code" href="spte_8h.html#a1a17a48568e4885c2681903b021d5002">SHADOW_NONPRESENT_OR_RSVD_MASK_LEN</a>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <a class="code" href="spte_8c.html#a2d00cde16d32442591f9b96abcaadf94">shadow_nonpresent_or_rsvd_mask</a> =</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <a class="code" href="mmu_8h.html#a20a41b0166b13eb22b15786964f5de9d">rsvd_bits</a>(low_phys_bits, boot_cpu_data.x86_cache_bits - 1);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="spte_8c.html#ad79ebd99e580b4e6fe8338ad43f3e6b0">shadow_nonpresent_or_rsvd_lower_gfn_mask</a> =</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        GENMASK_ULL(low_phys_bits - 1, PAGE_SHIFT);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="spte_8c.html#a88422204fa87484ebb6b1afe5657293e">shadow_user_mask</a>    = <a class="code" href="mmu_8h.html#aefe2df12a6601495d0fcf57568247dd2">PT_USER_MASK</a>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <a class="code" href="spte_8c.html#a1037a592d9e03bab1ce70a6e471901ae">shadow_accessed_mask</a>    = <a class="code" href="mmu_8h.html#a8d41edb9ba8b401a27f501baadc888f4">PT_ACCESSED_MASK</a>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <a class="code" href="spte_8c.html#a4da775a32ca03cd42a18da1e1aac568e">shadow_dirty_mask</a>   = <a class="code" href="mmu_8h.html#a89aea6a28aa3f8c00475ef4863213092">PT_DIRTY_MASK</a>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="spte_8c.html#ac345c70889ab98d540472296de75aaa9">shadow_nx_mask</a>      = <a class="code" href="mmu_8h.html#ac65ee46fa9c336ebff6fd0ca5dbe6683">PT64_NX_MASK</a>;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <a class="code" href="spte_8c.html#ae4b595f87e310029f3011955be43dc6d">shadow_x_mask</a>       = 0;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <a class="code" href="spte_8c.html#af8d723b5e0ffd2c2927bc5ab2ea5219e">shadow_present_mask</a> = <a class="code" href="mmu_8h.html#a6a3dca6eee809f72f4c5af9b1adfca58">PT_PRESENT_MASK</a>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">     * For shadow paging and NPT, KVM uses PAT entry &#39;0&#39; to encode WB</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">     * memtype in the SPTEs, i.e. relies on host MTRRs to provide the</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">     * correct memtype (WB is the &quot;weakest&quot; memtype).</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="spte_8c.html#a61bd7ce98c04ee184b3e600f8bbe1712">shadow_memtype_mask</a> = 0;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="spte_8c.html#a1db70b0d38cd86029fc77525fa53d96a">shadow_acc_track_mask</a>   = 0;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="spte_8c.html#a880496effc639a427674eacc301593f3">shadow_me_mask</a>      = 0;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <a class="code" href="spte_8c.html#a1aea0c6f6f3fb8ec2b27d22b737e462c">shadow_me_value</a>     = 0;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <a class="code" href="spte_8c.html#a2539eaf9e6c788f2fa877c7e9e1c29a8">shadow_host_writable_mask</a> = <a class="code" href="spte_8h.html#a970b489574d4c9497534c4aec8bc3ac2">DEFAULT_SPTE_HOST_WRITABLE</a>;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="spte_8c.html#af450287cc0d83434644a34a9b938a250">shadow_mmu_writable_mask</a>  = <a class="code" href="spte_8h.html#aa43708a6979d5b9e953e47077d45ff12">DEFAULT_SPTE_MMU_WRITABLE</a>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">     * Set a reserved PA bit in MMIO SPTEs to generate page faults with</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">     * PFEC.RSVD=1 on MMIO accesses.  64-bit PTEs (PAE, x86-64, and EPT</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">     * paging) support a maximum of 52 bits of PA, i.e. if the CPU supports</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">     * 52-bit physical addresses then there are no reserved PA bits in the</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">     * PTEs and so the reserved PA approach must be disabled.</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="spte_8c.html#a43d89b28f6285b7b34c137f70723565b">shadow_phys_bits</a> &lt; 52)</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        mask = BIT_ULL(51) | <a class="code" href="mmu_8h.html#a6a3dca6eee809f72f4c5af9b1adfca58">PT_PRESENT_MASK</a>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        mask = 0;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <a class="code" href="spte_8c.html#a80f2cd338ffdc70a83e10eda040387a5">kvm_mmu_set_mmio_spte_mask</a>(mask, mask, <a class="code" href="spte_8h.html#a1fcc0967bcae997263f8cd868873d3a1">ACC_WRITE_MASK</a> | <a class="code" href="spte_8h.html#a0051a82230a5fea5e6e2db17109c841b">ACC_USER_MASK</a>);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;}</div>
<div class="ttc" id="ammu_8h_html_a20a41b0166b13eb22b15786964f5de9d"><div class="ttname"><a href="mmu_8h.html#a20a41b0166b13eb22b15786964f5de9d">rsvd_bits</a></div><div class="ttdeci">static __always_inline u64 rsvd_bits(int s, int e)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00045">mmu.h:45</a></div></div>
<div class="ttc" id="ammu_8h_html_a6a3dca6eee809f72f4c5af9b1adfca58"><div class="ttname"><a href="mmu_8h.html#a6a3dca6eee809f72f4c5af9b1adfca58">PT_PRESENT_MASK</a></div><div class="ttdeci">#define PT_PRESENT_MASK</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00014">mmu.h:14</a></div></div>
<div class="ttc" id="ammu_8h_html_a89aea6a28aa3f8c00475ef4863213092"><div class="ttname"><a href="mmu_8h.html#a89aea6a28aa3f8c00475ef4863213092">PT_DIRTY_MASK</a></div><div class="ttdeci">#define PT_DIRTY_MASK</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00022">mmu.h:22</a></div></div>
<div class="ttc" id="ammu_8h_html_a8d41edb9ba8b401a27f501baadc888f4"><div class="ttname"><a href="mmu_8h.html#a8d41edb9ba8b401a27f501baadc888f4">PT_ACCESSED_MASK</a></div><div class="ttdeci">#define PT_ACCESSED_MASK</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00020">mmu.h:20</a></div></div>
<div class="ttc" id="ammu_8h_html_ab4a3e49f63d0517b2694a9d8f72cb79a"><div class="ttname"><a href="mmu_8h.html#ab4a3e49f63d0517b2694a9d8f72cb79a">kvm_get_shadow_phys_bits</a></div><div class="ttdeci">static u8 kvm_get_shadow_phys_bits(void)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00084">mmu.h:84</a></div></div>
<div class="ttc" id="ammu_8h_html_ac65ee46fa9c336ebff6fd0ca5dbe6683"><div class="ttname"><a href="mmu_8h.html#ac65ee46fa9c336ebff6fd0ca5dbe6683">PT64_NX_MASK</a></div><div class="ttdeci">#define PT64_NX_MASK</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00028">mmu.h:28</a></div></div>
<div class="ttc" id="ammu_8h_html_aefe2df12a6601495d0fcf57568247dd2"><div class="ttname"><a href="mmu_8h.html#aefe2df12a6601495d0fcf57568247dd2">PT_USER_MASK</a></div><div class="ttdeci">#define PT_USER_MASK</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00016">mmu.h:16</a></div></div>
<div class="ttc" id="aspte_8c_html_a1037a592d9e03bab1ce70a6e471901ae"><div class="ttname"><a href="spte_8c.html#a1037a592d9e03bab1ce70a6e471901ae">shadow_accessed_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_accessed_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00032">spte.c:32</a></div></div>
<div class="ttc" id="aspte_8c_html_a1aea0c6f6f3fb8ec2b27d22b737e462c"><div class="ttname"><a href="spte_8c.html#a1aea0c6f6f3fb8ec2b27d22b737e462c">shadow_me_value</a></div><div class="ttdeci">u64 __read_mostly shadow_me_value</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00039">spte.c:39</a></div></div>
<div class="ttc" id="aspte_8c_html_a1db70b0d38cd86029fc77525fa53d96a"><div class="ttname"><a href="spte_8c.html#a1db70b0d38cd86029fc77525fa53d96a">shadow_acc_track_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_acc_track_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00041">spte.c:41</a></div></div>
<div class="ttc" id="aspte_8c_html_a2d00cde16d32442591f9b96abcaadf94"><div class="ttname"><a href="spte_8c.html#a2d00cde16d32442591f9b96abcaadf94">shadow_nonpresent_or_rsvd_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_nonpresent_or_rsvd_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00043">spte.c:43</a></div></div>
<div class="ttc" id="aspte_8c_html_a43d89b28f6285b7b34c137f70723565b"><div class="ttname"><a href="spte_8c.html#a43d89b28f6285b7b34c137f70723565b">shadow_phys_bits</a></div><div class="ttdeci">u8 __read_mostly shadow_phys_bits</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00046">spte.c:46</a></div></div>
<div class="ttc" id="aspte_8c_html_a4da775a32ca03cd42a18da1e1aac568e"><div class="ttname"><a href="spte_8c.html#a4da775a32ca03cd42a18da1e1aac568e">shadow_dirty_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_dirty_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00033">spte.c:33</a></div></div>
<div class="ttc" id="aspte_8c_html_a61bd7ce98c04ee184b3e600f8bbe1712"><div class="ttname"><a href="spte_8c.html#a61bd7ce98c04ee184b3e600f8bbe1712">shadow_memtype_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_memtype_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00038">spte.c:38</a></div></div>
<div class="ttc" id="aspte_8c_html_a80f2cd338ffdc70a83e10eda040387a5"><div class="ttname"><a href="spte_8c.html#a80f2cd338ffdc70a83e10eda040387a5">kvm_mmu_set_mmio_spte_mask</a></div><div class="ttdeci">void kvm_mmu_set_mmio_spte_mask(u64 mmio_value, u64 mmio_mask, u64 access_mask)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00362">spte.c:362</a></div></div>
<div class="ttc" id="aspte_8c_html_a880496effc639a427674eacc301593f3"><div class="ttname"><a href="spte_8c.html#a880496effc639a427674eacc301593f3">shadow_me_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_me_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00040">spte.c:40</a></div></div>
<div class="ttc" id="aspte_8c_html_a88422204fa87484ebb6b1afe5657293e"><div class="ttname"><a href="spte_8c.html#a88422204fa87484ebb6b1afe5657293e">shadow_user_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_user_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00031">spte.c:31</a></div></div>
<div class="ttc" id="aspte_8c_html_ac345c70889ab98d540472296de75aaa9"><div class="ttname"><a href="spte_8c.html#ac345c70889ab98d540472296de75aaa9">shadow_nx_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_nx_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00029">spte.c:29</a></div></div>
<div class="ttc" id="aspte_8c_html_ad79ebd99e580b4e6fe8338ad43f3e6b0"><div class="ttname"><a href="spte_8c.html#ad79ebd99e580b4e6fe8338ad43f3e6b0">shadow_nonpresent_or_rsvd_lower_gfn_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_nonpresent_or_rsvd_lower_gfn_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00044">spte.c:44</a></div></div>
<div class="ttc" id="aspte_8c_html_ae4b595f87e310029f3011955be43dc6d"><div class="ttname"><a href="spte_8c.html#ae4b595f87e310029f3011955be43dc6d">shadow_x_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_x_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00030">spte.c:30</a></div></div>
<div class="ttc" id="aspte_8c_html_af8d723b5e0ffd2c2927bc5ab2ea5219e"><div class="ttname"><a href="spte_8c.html#af8d723b5e0ffd2c2927bc5ab2ea5219e">shadow_present_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_present_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00037">spte.c:37</a></div></div>
<div class="ttc" id="aspte_8h_html_a0051a82230a5fea5e6e2db17109c841b"><div class="ttname"><a href="spte_8h.html#a0051a82230a5fea5e6e2db17109c841b">ACC_USER_MASK</a></div><div class="ttdeci">#define ACC_USER_MASK</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00048">spte.h:48</a></div></div>
<div class="ttc" id="aspte_8h_html_a1a17a48568e4885c2681903b021d5002"><div class="ttname"><a href="spte_8h.html#a1a17a48568e4885c2681903b021d5002">SHADOW_NONPRESENT_OR_RSVD_MASK_LEN</a></div><div class="ttdeci">#define SHADOW_NONPRESENT_OR_RSVD_MASK_LEN</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00183">spte.h:183</a></div></div>
<div class="ttc" id="aspte_8h_html_a1fcc0967bcae997263f8cd868873d3a1"><div class="ttname"><a href="spte_8h.html#a1fcc0967bcae997263f8cd868873d3a1">ACC_WRITE_MASK</a></div><div class="ttdeci">#define ACC_WRITE_MASK</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00047">spte.h:47</a></div></div>
<div class="ttc" id="aspte_8h_html_a970b489574d4c9497534c4aec8bc3ac2"><div class="ttname"><a href="spte_8h.html#a970b489574d4c9497534c4aec8bc3ac2">DEFAULT_SPTE_HOST_WRITABLE</a></div><div class="ttdeci">#define DEFAULT_SPTE_HOST_WRITABLE</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00080">spte.h:80</a></div></div>
<div class="ttc" id="aspte_8h_html_aa43708a6979d5b9e953e47077d45ff12"><div class="ttname"><a href="spte_8h.html#aa43708a6979d5b9e953e47077d45ff12">DEFAULT_SPTE_MMU_WRITABLE</a></div><div class="ttdeci">#define DEFAULT_SPTE_MMU_WRITABLE</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00081">spte.h:81</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_ad87f402ab1a9a0340b4e280deb05dd7c_cgraph.png" border="0" usemap="#aspte_8c_ad87f402ab1a9a0340b4e280deb05dd7c_cgraph" alt=""/></div>
<map name="aspte_8c_ad87f402ab1a9a0340b4e280deb05dd7c_cgraph" id="aspte_8c_ad87f402ab1a9a0340b4e280deb05dd7c_cgraph">
<area shape="rect" title=" " alt="" coords="5,49,188,90"/>
<area shape="rect" href="mmu_8h.html#ab4a3e49f63d0517b2694a9d8f72cb79a" title=" " alt="" coords="255,5,460,32"/>
<area shape="rect" href="spte_8c.html#a80f2cd338ffdc70a83e10eda040387a5" title=" " alt="" coords="236,56,479,83"/>
<area shape="rect" href="mmu_8h.html#a20a41b0166b13eb22b15786964f5de9d" title=" " alt="" coords="317,107,398,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_ad87f402ab1a9a0340b4e280deb05dd7c_icgraph.png" border="0" usemap="#aspte_8c_ad87f402ab1a9a0340b4e280deb05dd7c_icgraph" alt=""/></div>
<map name="aspte_8c_ad87f402ab1a9a0340b4e280deb05dd7c_icgraph" id="aspte_8c_ad87f402ab1a9a0340b4e280deb05dd7c_icgraph">
<area shape="rect" title=" " alt="" coords="843,23,1025,65"/>
<area shape="rect" href="mmu_8c.html#ac1e20896385a0e158bf217a24a6d6234" title=" " alt="" coords="567,31,795,57"/>
<area shape="rect" href="x86_8c.html#a0ad8fc4784d6d316f3d9f5afe640af81" title=" " alt="" coords="343,31,519,57"/>
<area shape="rect" href="x86_8c.html#ae295ff45fc91a432658e57dda4dfea68" title=" " alt="" coords="132,31,295,57"/>
<area shape="rect" href="svm_8c.html#aa667b0a0f202f83aa1533825aeecb402" title=" " alt="" coords="5,5,84,32"/>
<area shape="rect" href="vmx_8c.html#aa8f62a8c3a5a5da29c69565d2645a371" title=" " alt="" coords="5,56,84,83"/>
</map>
</div>

</div>
</div>
<a id="a5cb3688f8c5783569f001a056f7d93d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cb3688f8c5783569f001a056f7d93d0">&#9670;&nbsp;</a></span>kvm_mmu_set_ept_masks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_mmu_set_ept_masks </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>has_ad_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>has_exec_only</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00425">425</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;{</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <a class="code" href="spte_8c.html#a88422204fa87484ebb6b1afe5657293e">shadow_user_mask</a>    = VMX_EPT_READABLE_MASK;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="spte_8c.html#a1037a592d9e03bab1ce70a6e471901ae">shadow_accessed_mask</a>    = has_ad_bits ? VMX_EPT_ACCESS_BIT : 0ull;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="spte_8c.html#a4da775a32ca03cd42a18da1e1aac568e">shadow_dirty_mask</a>   = has_ad_bits ? VMX_EPT_DIRTY_BIT : 0ull;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <a class="code" href="spte_8c.html#ac345c70889ab98d540472296de75aaa9">shadow_nx_mask</a>      = 0ull;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <a class="code" href="spte_8c.html#ae4b595f87e310029f3011955be43dc6d">shadow_x_mask</a>       = VMX_EPT_EXECUTABLE_MASK;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="spte_8c.html#af8d723b5e0ffd2c2927bc5ab2ea5219e">shadow_present_mask</a> = has_exec_only ? 0ull : VMX_EPT_READABLE_MASK;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">     * EPT overrides the host MTRRs, and so KVM must program the desired</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">     * memtype directly into the SPTEs.  Note, this mask is just the mask</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">     * of all bits that factor into the memtype, the actual memtype must be</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">     * dynamically calculated, e.g. to ensure host MMIO is mapped UC.</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="spte_8c.html#a61bd7ce98c04ee184b3e600f8bbe1712">shadow_memtype_mask</a> = VMX_EPT_MT_MASK | VMX_EPT_IPAT_BIT;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="spte_8c.html#a1db70b0d38cd86029fc77525fa53d96a">shadow_acc_track_mask</a>   = VMX_EPT_RWX_MASK;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="spte_8c.html#a2539eaf9e6c788f2fa877c7e9e1c29a8">shadow_host_writable_mask</a> = <a class="code" href="spte_8h.html#a1cd8c056889ac6f05f7bccdc2de7ce41">EPT_SPTE_HOST_WRITABLE</a>;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="spte_8c.html#af450287cc0d83434644a34a9b938a250">shadow_mmu_writable_mask</a>  = <a class="code" href="spte_8h.html#a0690b9baddd97e241f0c99894024c19e">EPT_SPTE_MMU_WRITABLE</a>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">     * EPT Misconfigurations are generated if the value of bits 2:0</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">     * of an EPT paging-structure entry is 110b (write/execute).</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="spte_8c.html#a80f2cd338ffdc70a83e10eda040387a5">kvm_mmu_set_mmio_spte_mask</a>(VMX_EPT_MISCONFIG_WX_VALUE,</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                   VMX_EPT_RWX_MASK, 0);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;}</div>
<div class="ttc" id="aspte_8h_html_a0690b9baddd97e241f0c99894024c19e"><div class="ttname"><a href="spte_8h.html#a0690b9baddd97e241f0c99894024c19e">EPT_SPTE_MMU_WRITABLE</a></div><div class="ttdeci">#define EPT_SPTE_MMU_WRITABLE</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00089">spte.h:89</a></div></div>
<div class="ttc" id="aspte_8h_html_a1cd8c056889ac6f05f7bccdc2de7ce41"><div class="ttname"><a href="spte_8h.html#a1cd8c056889ac6f05f7bccdc2de7ce41">EPT_SPTE_HOST_WRITABLE</a></div><div class="ttdeci">#define EPT_SPTE_HOST_WRITABLE</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00088">spte.h:88</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_a5cb3688f8c5783569f001a056f7d93d0_cgraph.png" border="0" usemap="#aspte_8c_a5cb3688f8c5783569f001a056f7d93d0_cgraph" alt=""/></div>
<map name="aspte_8c_a5cb3688f8c5783569f001a056f7d93d0_cgraph" id="aspte_8c_a5cb3688f8c5783569f001a056f7d93d0_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,203,32"/>
<area shape="rect" href="spte_8c.html#a80f2cd338ffdc70a83e10eda040387a5" title=" " alt="" coords="251,5,493,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_a5cb3688f8c5783569f001a056f7d93d0_icgraph.png" border="0" usemap="#aspte_8c_a5cb3688f8c5783569f001a056f7d93d0_icgraph" alt=""/></div>
<map name="aspte_8c_a5cb3688f8c5783569f001a056f7d93d0_icgraph" id="aspte_8c_a5cb3688f8c5783569f001a056f7d93d0_icgraph">
<area shape="rect" title=" " alt="" coords="180,5,377,32"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="5,5,132,32"/>
</map>
</div>

</div>
</div>
<a id="a24f526505004d8f749e0e069c2efd17a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24f526505004d8f749e0e069c2efd17a">&#9670;&nbsp;</a></span>kvm_mmu_set_me_spte_mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_mmu_set_me_spte_mask </td>
          <td>(</td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>me_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>me_mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00414">414</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;{</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">/* shadow_me_value must be a subset of shadow_me_mask */</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span> (WARN_ON(me_value &amp; ~me_mask))</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        me_value = me_mask = 0;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="spte_8c.html#a1aea0c6f6f3fb8ec2b27d22b737e462c">shadow_me_value</a> = me_value;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="spte_8c.html#a880496effc639a427674eacc301593f3">shadow_me_mask</a> = me_mask;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_a24f526505004d8f749e0e069c2efd17a_icgraph.png" border="0" usemap="#aspte_8c_a24f526505004d8f749e0e069c2efd17a_icgraph" alt=""/></div>
<map name="aspte_8c_a24f526505004d8f749e0e069c2efd17a_icgraph" id="aspte_8c_a24f526505004d8f749e0e069c2efd17a_icgraph">
<area shape="rect" title=" " alt="" coords="428,31,653,57"/>
<area shape="rect" href="svm_8c.html#aa4cdf4791105d54ebcadfeafdcdf01ac" title=" " alt="" coords="199,5,361,32"/>
<area shape="rect" href="vmx_8c.html#a3e17271461560cfca4cc0f4deccd430f" title=" " alt="" coords="180,56,380,83"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="5,56,132,83"/>
</map>
</div>

</div>
</div>
<a id="a80f2cd338ffdc70a83e10eda040387a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80f2cd338ffdc70a83e10eda040387a5">&#9670;&nbsp;</a></span>kvm_mmu_set_mmio_spte_mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_mmu_set_mmio_spte_mask </td>
          <td>(</td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>mmio_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>mmio_mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>access_mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00362">362</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;{</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    BUG_ON((u64)(<span class="keywordtype">unsigned</span>)access_mask != access_mask);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    WARN_ON(mmio_value &amp; <a class="code" href="spte_8c.html#ad79ebd99e580b4e6fe8338ad43f3e6b0">shadow_nonpresent_or_rsvd_lower_gfn_mask</a>);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">     * Reset to the original module param value to honor userspace&#39;s desire</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">     * to (dis)allow MMIO caching.  Update the param itself so that</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">     * userspace can see whether or not KVM is actually using MMIO caching.</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="spte_8c.html#ad1f35c581f53d7ebf9ada1be6d5531ad">enable_mmio_caching</a> = <a class="code" href="spte_8c.html#a329e4ae6a29cf76c6524ccc85279b8d6">allow_mmio_caching</a>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="spte_8c.html#ad1f35c581f53d7ebf9ada1be6d5531ad">enable_mmio_caching</a>)</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        mmio_value = 0;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">     * The mask must contain only bits that are carved out specifically for</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">     * the MMIO SPTE mask, e.g. to ensure there&#39;s no overlap with the MMIO</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">     * generation.</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">if</span> (WARN_ON(mmio_mask &amp; ~<a class="code" href="spte_8h.html#a0c54fb4a604513fdd19019c4e60b7fde">SPTE_MMIO_ALLOWED_MASK</a>))</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        mmio_value = 0;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">     * Disable MMIO caching if the MMIO value collides with the bits that</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">     * are used to hold the relocated GFN when the L1TF mitigation is</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">     * enabled.  This should never fire as there is no known hardware that</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">     * can trigger this condition, e.g. SME/SEV CPUs that require a custom</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">     * MMIO value are not susceptible to L1TF.</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">if</span> (WARN_ON(mmio_value &amp; (<a class="code" href="spte_8c.html#a2d00cde16d32442591f9b96abcaadf94">shadow_nonpresent_or_rsvd_mask</a> &lt;&lt;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                  <a class="code" href="spte_8h.html#a1a17a48568e4885c2681903b021d5002">SHADOW_NONPRESENT_OR_RSVD_MASK_LEN</a>)))</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        mmio_value = 0;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">     * The masked MMIO value must obviously match itself and a removed SPTE</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">     * must not get a false positive.  Removed SPTEs and MMIO SPTEs should</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">     * never collide as MMIO must set some RWX bits, and removed SPTEs must</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">     * not set any RWX bits.</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">if</span> (WARN_ON((mmio_value &amp; mmio_mask) != mmio_value) ||</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        WARN_ON(mmio_value &amp;&amp; (<a class="code" href="spte_8h.html#a9e3b5ea0bcca48866f5fb2e94ae03826">REMOVED_SPTE</a> &amp; mmio_mask) == mmio_value))</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        mmio_value = 0;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">if</span> (!mmio_value)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <a class="code" href="spte_8c.html#ad1f35c581f53d7ebf9ada1be6d5531ad">enable_mmio_caching</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <a class="code" href="spte_8c.html#aff0e78f9604a10796d208995c28b1371">shadow_mmio_value</a> = mmio_value;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <a class="code" href="spte_8c.html#a59be1c97d42d1a20cd3341c0133674f7">shadow_mmio_mask</a>  = mmio_mask;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <a class="code" href="spte_8c.html#a598921f5a19013886e32dec8999ab00e">shadow_mmio_access_mask</a> = access_mask;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;}</div>
<div class="ttc" id="aspte_8c_html_a329e4ae6a29cf76c6524ccc85279b8d6"><div class="ttname"><a href="spte_8c.html#a329e4ae6a29cf76c6524ccc85279b8d6">allow_mmio_caching</a></div><div class="ttdeci">static bool __ro_after_init allow_mmio_caching</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00023">spte.c:23</a></div></div>
<div class="ttc" id="aspte_8c_html_a598921f5a19013886e32dec8999ab00e"><div class="ttname"><a href="spte_8c.html#a598921f5a19013886e32dec8999ab00e">shadow_mmio_access_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_mmio_access_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00036">spte.c:36</a></div></div>
<div class="ttc" id="aspte_8c_html_a59be1c97d42d1a20cd3341c0133674f7"><div class="ttname"><a href="spte_8c.html#a59be1c97d42d1a20cd3341c0133674f7">shadow_mmio_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_mmio_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00035">spte.c:35</a></div></div>
<div class="ttc" id="aspte_8c_html_ad1f35c581f53d7ebf9ada1be6d5531ad"><div class="ttname"><a href="spte_8c.html#ad1f35c581f53d7ebf9ada1be6d5531ad">enable_mmio_caching</a></div><div class="ttdeci">bool __read_mostly enable_mmio_caching</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00022">spte.c:22</a></div></div>
<div class="ttc" id="aspte_8c_html_aff0e78f9604a10796d208995c28b1371"><div class="ttname"><a href="spte_8c.html#aff0e78f9604a10796d208995c28b1371">shadow_mmio_value</a></div><div class="ttdeci">u64 __read_mostly shadow_mmio_value</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00034">spte.c:34</a></div></div>
<div class="ttc" id="aspte_8h_html_a0c54fb4a604513fdd19019c4e60b7fde"><div class="ttname"><a href="spte_8h.html#a0c54fb4a604513fdd19019c4e60b7fde">SPTE_MMIO_ALLOWED_MASK</a></div><div class="ttdeci">#define SPTE_MMIO_ALLOWED_MASK</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00137">spte.h:137</a></div></div>
<div class="ttc" id="aspte_8h_html_a9e3b5ea0bcca48866f5fb2e94ae03826"><div class="ttname"><a href="spte_8h.html#a9e3b5ea0bcca48866f5fb2e94ae03826">REMOVED_SPTE</a></div><div class="ttdeci">#define REMOVED_SPTE</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00197">spte.h:197</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_a80f2cd338ffdc70a83e10eda040387a5_icgraph.png" border="0" usemap="#aspte_8c_a80f2cd338ffdc70a83e10eda040387a5_icgraph" alt=""/></div>
<map name="aspte_8c_a80f2cd338ffdc70a83e10eda040387a5_icgraph" id="aspte_8c_a80f2cd338ffdc70a83e10eda040387a5_icgraph">
<area shape="rect" title=" " alt="" coords="1088,89,1331,116"/>
<area shape="rect" href="spte_8c.html#ad87f402ab1a9a0340b4e280deb05dd7c" title=" " alt="" coords="850,23,1033,65"/>
<area shape="rect" href="spte_8c.html#a5cb3688f8c5783569f001a056f7d93d0" title=" " alt="" coords="843,89,1040,116"/>
<area shape="rect" href="svm_8c.html#ae9ce56e3c8875ba1d607bb1be8ed420f" title=" " alt="" coords="849,140,1034,167"/>
<area shape="rect" href="mmu_8c.html#ac1e20896385a0e158bf217a24a6d6234" title=" " alt="" coords="567,31,795,57"/>
<area shape="rect" href="x86_8c.html#a0ad8fc4784d6d316f3d9f5afe640af81" title=" " alt="" coords="343,31,519,57"/>
<area shape="rect" href="x86_8c.html#ae295ff45fc91a432658e57dda4dfea68" title=" " alt="" coords="132,31,295,57"/>
<area shape="rect" href="svm_8c.html#aa667b0a0f202f83aa1533825aeecb402" title=" " alt="" coords="5,5,84,32"/>
<area shape="rect" href="vmx_8c.html#aa8f62a8c3a5a5da29c69565d2645a371" title=" " alt="" coords="5,56,84,83"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="617,89,744,116"/>
<area shape="rect" href="svm_8c.html#aa4cdf4791105d54ebcadfeafdcdf01ac" title=" " alt="" coords="600,140,761,167"/>
</map>
</div>

</div>
</div>
<a id="a9f20fa4bc6f979446977550bec7251ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f20fa4bc6f979446977550bec7251ab">&#9670;&nbsp;</a></span>kvm_mmu_spte_module_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __init kvm_mmu_spte_module_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00048">48</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;{</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">     * Snapshot userspace&#39;s desire to allow MMIO caching.  Whether or not</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">     * KVM can actually enable MMIO caching depends on vendor-specific</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">     * hardware capabilities and other module params that can&#39;t be resolved</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">     * until the vendor module is loaded, i.e. enable_mmio_caching can and</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">     * will change when the vendor module is (re)loaded.</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="spte_8c.html#a329e4ae6a29cf76c6524ccc85279b8d6">allow_mmio_caching</a> = <a class="code" href="spte_8c.html#ad1f35c581f53d7ebf9ada1be6d5531ad">enable_mmio_caching</a>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_a9f20fa4bc6f979446977550bec7251ab_icgraph.png" border="0" usemap="#aspte_8c_a9f20fa4bc6f979446977550bec7251ab_icgraph" alt=""/></div>
<map name="aspte_8c_a9f20fa4bc6f979446977550bec7251ab_icgraph" id="aspte_8c_a9f20fa4bc6f979446977550bec7251ab_icgraph">
<area shape="rect" title=" " alt="" coords="419,5,629,32"/>
<area shape="rect" href="mmu_8c.html#a3ede679ddcb08e7bdef5395883b2ac3a" title=" " alt="" coords="164,5,371,32"/>
<area shape="rect" href="x86_8c.html#a0b93655fbb369d29812719ba8e3cc281" title=" " alt="" coords="5,5,116,32"/>
</map>
</div>

</div>
</div>
<a id="adc3a08f029fff6aaf2bf687edf69410f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc3a08f029fff6aaf2bf687edf69410f">&#9670;&nbsp;</a></span>make_huge_page_split_spte()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 make_huge_page_split_spte </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>huge_spte</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union kvm_mmu_page_role&#160;</td>
          <td class="paramname"><em>role</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00274">274</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;{</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    u64 child_spte;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">if</span> (WARN_ON_ONCE(!<a class="code" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686">is_shadow_present_pte</a>(huge_spte)))</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span> (WARN_ON_ONCE(!<a class="code" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729">is_large_pte</a>(huge_spte)))</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    child_spte = huge_spte;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">     * The child_spte already has the base address of the huge page being</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">     * split. So we just have to OR in the offset to the page at the next</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">     * lower level for the given index.</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    child_spte |= (index * KVM_PAGES_PER_HPAGE(role.level)) &lt;&lt; PAGE_SHIFT;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">if</span> (role.level == PG_LEVEL_4K) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        child_spte &amp;= ~<a class="code" href="mmu_8h.html#abc8b55babfd3481f98a80a94ac99d0d8">PT_PAGE_SIZE_MASK</a>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">         * When splitting to a 4K page where execution is allowed, mark</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">         * the page executable as the NX hugepage mitigation no longer</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">         * applies.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">if</span> ((role.access &amp; <a class="code" href="spte_8h.html#a97338f16c0803a95f9a6e239e3384668">ACC_EXEC_MASK</a>) &amp;&amp; <a class="code" href="mmu__internal_8h.html#a8a367cbfff40c5c72d6f19049da9fc51">is_nx_huge_page_enabled</a>(kvm))</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            child_spte = <a class="code" href="spte_8c.html#ac0162f8b29f82f308036271f93880cd7">make_spte_executable</a>(child_spte);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">return</span> child_spte;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;}</div>
<div class="ttc" id="ammu_8h_html_abc8b55babfd3481f98a80a94ac99d0d8"><div class="ttname"><a href="mmu_8h.html#abc8b55babfd3481f98a80a94ac99d0d8">PT_PAGE_SIZE_MASK</a></div><div class="ttdeci">#define PT_PAGE_SIZE_MASK</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00024">mmu.h:24</a></div></div>
<div class="ttc" id="ammu__internal_8h_html_a8a367cbfff40c5c72d6f19049da9fc51"><div class="ttname"><a href="mmu__internal_8h.html#a8a367cbfff40c5c72d6f19049da9fc51">is_nx_huge_page_enabled</a></div><div class="ttdeci">static bool is_nx_huge_page_enabled(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00185">mmu_internal.h:185</a></div></div>
<div class="ttc" id="aspte_8c_html_ac0162f8b29f82f308036271f93880cd7"><div class="ttname"><a href="spte_8c.html#ac0162f8b29f82f308036271f93880cd7">make_spte_executable</a></div><div class="ttdeci">static u64 make_spte_executable(u64 spte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00251">spte.c:251</a></div></div>
<div class="ttc" id="aspte_8h_html_a7d73c1cb0114320b9dab8ba78033c686"><div class="ttname"><a href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686">is_shadow_present_pte</a></div><div class="ttdeci">static bool is_shadow_present_pte(u64 pte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00258">spte.h:258</a></div></div>
<div class="ttc" id="aspte_8h_html_a97338f16c0803a95f9a6e239e3384668"><div class="ttname"><a href="spte_8h.html#a97338f16c0803a95f9a6e239e3384668">ACC_EXEC_MASK</a></div><div class="ttdeci">#define ACC_EXEC_MASK</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00046">spte.h:46</a></div></div>
<div class="ttc" id="aspte_8h_html_ae9b1a94fccf74f0837e1a775bc57d729"><div class="ttname"><a href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729">is_large_pte</a></div><div class="ttdeci">static bool is_large_pte(u64 pte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00313">spte.h:313</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_adc3a08f029fff6aaf2bf687edf69410f_cgraph.png" border="0" usemap="#aspte_8c_adc3a08f029fff6aaf2bf687edf69410f_cgraph" alt=""/></div>
<map name="aspte_8c_adc3a08f029fff6aaf2bf687edf69410f_cgraph" id="aspte_8c_adc3a08f029fff6aaf2bf687edf69410f_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,212,108"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="306,5,407,32"/>
<area shape="rect" href="mmu__internal_8h.html#a8a367cbfff40c5c72d6f19049da9fc51" title=" " alt="" coords="260,56,453,83"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="1108,132,1283,159"/>
<area shape="rect" href="spte_8c.html#ac0162f8b29f82f308036271f93880cd7" title=" " alt="" coords="271,187,442,213"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="721,157,880,184"/>
<area shape="rect" href="spte_8c.html#a8885614ad1f7e35c498eb228826d1909" title=" " alt="" coords="504,209,671,250"/>
<area shape="rect" href="spte_8h.html#abc2b9043d48550e741fda1e2ad36a652" title=" " alt="" coords="501,275,673,301"/>
<area shape="rect" href="spte_8h.html#a976cddc84d935189584bdce94d4805fd" title=" " alt="" coords="928,157,1060,184"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="723,259,878,301"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="933,267,1055,293"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_adc3a08f029fff6aaf2bf687edf69410f_icgraph.png" border="0" usemap="#aspte_8c_adc3a08f029fff6aaf2bf687edf69410f_icgraph" alt=""/></div>
<map name="aspte_8c_adc3a08f029fff6aaf2bf687edf69410f_icgraph" id="aspte_8c_adc3a08f029fff6aaf2bf687edf69410f_icgraph">
<area shape="rect" title=" " alt="" coords="3893,560,4100,587"/>
<area shape="rect" href="mmu_8c.html#abe6e7771da6f6df50052156316535466" title=" " alt="" coords="3619,533,3845,560"/>
<area shape="rect" href="tdp__mmu_8c.html#acf7d062eca8e6190d76f4934c290be61" title=" " alt="" coords="3373,589,3571,616"/>
<area shape="rect" href="mmu_8c.html#a03732600ed110f429f4a2d526a303bcb" title=" " alt="" coords="3385,523,3559,565"/>
<area shape="rect" href="mmu_8c.html#a2e109b8775cdfe9924c3d331ac5f332f" title=" " alt="" coords="3152,523,3325,565"/>
<area shape="rect" href="mmu_8c.html#adfe576663ff84a7b51773d87e91dd28a" title=" " alt="" coords="2927,550,3101,591"/>
<area shape="rect" href="mmu_8c.html#a073d9b7de8eaf977452c1eb7395a78d6" title=" " alt="" coords="2689,550,2872,591"/>
<area shape="rect" href="mmu_8c.html#a6abdd1728810c3f3ab8c2e1e6d2d37f0" title=" " alt="" coords="2685,615,2876,657"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="2465,550,2631,591"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="2205,550,2411,591"/>
<area shape="rect" href="kvm__main_8c.html#a05eed662dd45e4e4f7485e3158d95a3b" title=" " alt="" coords="1939,557,2157,584"/>
<area shape="rect" href="kvm__main_8c.html#ac81a7d714d0668ccea6d0c2ddfd0fed5" title=" " alt="" coords="1742,557,1885,584"/>
<area shape="rect" href="kvm__main_8c.html#ac76f506181e49aa4800bb202e11cb2b3" title=" " alt="" coords="1485,557,1688,584"/>
<area shape="rect" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9" title=" " alt="" coords="1240,503,1437,529"/>
<area shape="rect" href="kvm__main_8c.html#a1a839781d3be88d418abfb2b456663ab" title=" " alt="" coords="1245,583,1433,609"/>
<area shape="rect" href="vmx_8c.html#acc48d0f16e027c2bad1268d02a2eaa68" title=" " alt="" coords="988,528,1173,555"/>
<area shape="rect" href="lapic_8c.html#a8c6616d2cbae35632aa5debb15b552ec" title=" " alt="" coords="974,579,1187,605"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="995,216,1166,243"/>
<area shape="rect" href="lapic_8c.html#a017e57adbc721d98d26099f1a431a22c" title=" " alt="" coords="969,427,1192,453"/>
<area shape="rect" href="vmx_8c.html#a15d61630d8c4e3f7aea16d3b0164a799" title=" " alt="" coords="1011,477,1151,504"/>
<area shape="rect" href="vmx_8c.html#a426fe0cb3c7fd73b276f6815b6ab9ddc" title=" " alt="" coords="761,528,899,555"/>
<area shape="rect" href="avic_8c.html#aefc63eafb35c1efd94f6d53e7d0b20d5" title=" " alt="" coords="743,579,917,605"/>
<area shape="rect" href="avic_8c.html#a8e0a22138080054f4ac064064402f74a" title=" " alt="" coords="565,579,679,605"/>
<area shape="rect" href="svm_8c.html#a2af2f754ca7838a0253d54c33aae7d1e" title=" " alt="" coords="332,579,468,605"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="559,85,685,112"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="763,216,897,243"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="303,5,497,32"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="565,216,679,243"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="325,427,475,453"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="317,56,483,83"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="323,107,477,133"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="295,157,505,184"/>
<area shape="rect" href="debugfs_8c.html#af0427db3ec1a8c38ea51591abbefde57" title=" " alt="" coords="314,209,486,250"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="333,275,467,301"/>
<area shape="rect" href="sev_8c.html#ad28fd793149997c912b52490f6ca139a" title=" " alt="" coords="329,325,471,352"/>
<area shape="rect" href="sev_8c.html#af1eb77eac84f085b0a943b87f783e30d" title=" " alt="" coords="335,376,465,403"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="47,427,205,453"/>
<area shape="rect" href="sev_8c.html#abe3c569b297da3b78824074b8c08f9a7" title=" " alt="" coords="5,325,247,352"/>
<area shape="rect" href="svm_8c.html#a0e69cefce46e7b11e1e8e056ea5b6561" title=" " alt="" coords="59,376,193,403"/>
<area shape="rect" href="x86_8c.html#a384702aafa8cdbab3cf92b3d576bb6fb" title=" " alt="" coords="739,439,921,465"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="553,452,691,479"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="359,477,441,504"/>
<area shape="rect" href="kvm__main_8c.html#a4c8ff5a794a6a2e77e0cfc224568ef70" title=" " alt="" coords="979,630,1182,671"/>
<area shape="rect" href="mmu_8c.html#a035ec39ab60e2a3d382c272b15fc83a6" title=" " alt="" coords="2459,615,2637,657"/>
<area shape="rect" href="dirty__ring_8c.html#a68052369106191fbc506fdf4d64be449" title=" " alt="" coords="2230,623,2386,649"/>
<area shape="rect" href="dirty__ring_8c.html#a33f93cefad4ed59214fb8dbf36de7dd1" title=" " alt="" coords="1968,623,2128,649"/>
<area shape="rect" href="kvm__main_8c.html#a91e959c20554917ba05e7feea69acc7c" title=" " alt="" coords="1736,615,1891,657"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="3161,589,3317,616"/>
<area shape="rect" href="tdp__mmu_8c.html#afa070d8c089f8547cfc2dbafa856e99c" title=" " alt="" coords="3159,641,3318,682"/>
<area shape="rect" href="tdp__mmu_8c.html#a57310f6ad7e70c13dadcfd30aa71af6d" title=" " alt="" coords="2924,615,3104,657"/>
</map>
</div>

</div>
</div>
<a id="ae55574ff3b0384504236d8fb85a3a6d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae55574ff3b0384504236d8fb85a3a6d0">&#9670;&nbsp;</a></span>make_mmio_spte()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 make_mmio_spte </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>gfn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>access</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00071">71</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;{</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    u64 gen = kvm_vcpu_memslots(vcpu)-&gt;generation &amp; <a class="code" href="spte_8h.html#ae05bdd6942922f77eda117f3a2bf075b">MMIO_SPTE_GEN_MASK</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    u64 spte = <a class="code" href="spte_8c.html#a941485cd3f9578fdfff7474df672b8e4">generation_mmio_spte_mask</a>(gen);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    u64 gpa = gfn &lt;&lt; PAGE_SHIFT;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    WARN_ON_ONCE(!<a class="code" href="spte_8c.html#aff0e78f9604a10796d208995c28b1371">shadow_mmio_value</a>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    access &amp;= <a class="code" href="spte_8c.html#a598921f5a19013886e32dec8999ab00e">shadow_mmio_access_mask</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    spte |= <a class="code" href="spte_8c.html#aff0e78f9604a10796d208995c28b1371">shadow_mmio_value</a> | access;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    spte |= gpa | <a class="code" href="spte_8c.html#a2d00cde16d32442591f9b96abcaadf94">shadow_nonpresent_or_rsvd_mask</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    spte |= (gpa &amp; <a class="code" href="spte_8c.html#a2d00cde16d32442591f9b96abcaadf94">shadow_nonpresent_or_rsvd_mask</a>)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        &lt;&lt; <a class="code" href="spte_8h.html#a1a17a48568e4885c2681903b021d5002">SHADOW_NONPRESENT_OR_RSVD_MASK_LEN</a>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">return</span> spte;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div>
<div class="ttc" id="aspte_8c_html_a941485cd3f9578fdfff7474df672b8e4"><div class="ttname"><a href="spte_8c.html#a941485cd3f9578fdfff7474df672b8e4">generation_mmio_spte_mask</a></div><div class="ttdeci">static u64 generation_mmio_spte_mask(u64 gen)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00060">spte.c:60</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_ae55574ff3b0384504236d8fb85a3a6d0_cgraph.png" border="0" usemap="#aspte_8c_ae55574ff3b0384504236d8fb85a3a6d0_cgraph" alt=""/></div>
<map name="aspte_8c_ae55574ff3b0384504236d8fb85a3a6d0_cgraph" id="aspte_8c_ae55574ff3b0384504236d8fb85a3a6d0_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,144,32"/>
<area shape="rect" href="spte_8c.html#a941485cd3f9578fdfff7474df672b8e4" title=" " alt="" coords="192,5,407,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_ae55574ff3b0384504236d8fb85a3a6d0_icgraph.png" border="0" usemap="#aspte_8c_ae55574ff3b0384504236d8fb85a3a6d0_icgraph" alt=""/></div>
<map name="aspte_8c_ae55574ff3b0384504236d8fb85a3a6d0_icgraph" id="aspte_8c_ae55574ff3b0384504236d8fb85a3a6d0_icgraph">
<area shape="rect" title=" " alt="" coords="3067,451,3205,478"/>
<area shape="rect" href="mmu_8c.html#ab2e71dba35d97a82223c04486a9258aa" title=" " alt="" coords="2865,422,3001,449"/>
<area shape="rect" href="tdp__mmu_8c.html#aa98226578ebe207e97e262a86bbd5427" title=" " alt="" coords="2848,473,3019,515"/>
<area shape="rect" href="mmu_8c.html#a8fc6edfe7bd2a5a7d47952232ea5b8a1" title=" " alt="" coords="2663,426,2781,453"/>
<area shape="rect" href="mmu_8c.html#a342a9f81546640ced3244cb4a04d0834" title=" " alt="" coords="2656,350,2788,377"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="1855,401,1949,427"/>
<area shape="rect" href="mmu_8c.html#aab93e6e4502a54b3d61492f0e052e358" title=" " alt="" coords="2404,426,2596,453"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="1875,502,1929,529"/>
<area shape="rect" href="paging__tmpl_8h.html#ac251b8f404f8fa0840ec5f4db44a6480" title=" " alt="" coords="2219,477,2331,503"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1672,401,1807,427"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="1463,375,1618,402"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="1457,426,1624,453"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="1240,375,1388,402"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="1219,147,1409,174"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="1012,375,1132,402"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="253,510,425,537"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="729,619,917,646"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="503,898,643,925"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="741,274,904,301"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="741,325,905,351"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="5,510,205,537"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="523,543,622,570"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="519,594,626,621"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="291,771,387,798"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="473,695,672,722"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="503,847,643,874"/>
<area shape="rect" href="smm_8c.html#a5382946234c910e05c6e2c09aff15713" title=" " alt="" coords="496,746,649,773"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="508,645,637,671"/>
<area shape="rect" href="vmx_2nested_8c.html#a001f930db9a867e828cf01b48d3e4e25" title=" " alt="" coords="495,427,650,468"/>
<area shape="rect" href="x86_8c.html#a420caf80521ab8d6ef7218d5dd26d47f" title=" " alt="" coords="535,493,610,519"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="306,847,373,874"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="287,898,392,925"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="483,274,662,301"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="987,31,1157,72"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="988,147,1156,174"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="742,5,903,47"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="741,71,905,98"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="743,122,902,149"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="733,173,912,199"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="759,223,887,250"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="1227,561,1401,587"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="973,721,1171,747"/>
<area shape="rect" href="mmu_8c.html#a3e794d802eeb843cd6d7b699b74d8bf3" title=" " alt="" coords="734,721,911,747"/>
<area shape="rect" href="mmu_8c.html#a00f26353045c597f6a49cdd4f239f548" title=" " alt="" coords="720,771,925,798"/>
<area shape="rect" href="mmu_8c.html#a269190dc46a1af3d04b9e039944d85b9" title=" " alt="" coords="2193,426,2356,453"/>
<area shape="rect" href="mmu_8c.html#a5a96624b696225b4bc6c90caea946cb0" title=" " alt="" coords="1997,426,2145,453"/>
<area shape="rect" href="paging__tmpl_8h.html#a53f0634ff017bc46ff621fdad18cdcd4" title=" " alt="" coords="2019,477,2123,503"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1694,502,1785,529"/>
<area shape="rect" href="paging__tmpl_8h.html#a189517b8079c307a0aef9f58dc8c7a25" title=" " alt="" coords="2457,325,2543,351"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="2644,481,2800,507"/>
</map>
</div>

</div>
</div>
<a id="a98038e4116bcdef6f9e1e335eefc29c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98038e4116bcdef6f9e1e335eefc29c9">&#9670;&nbsp;</a></span>make_nonleaf_spte()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 make_nonleaf_spte </td>
          <td>(</td>
          <td class="paramtype">u64 *&#160;</td>
          <td class="paramname"><em>child_pt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ad_disabled</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00310">310</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;{</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    u64 spte = <a class="code" href="spte_8h.html#a09fe41a9f7651a7164d8fb83d42f71c9">SPTE_MMU_PRESENT_MASK</a>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    spte |= __pa(child_pt) | <a class="code" href="spte_8c.html#af8d723b5e0ffd2c2927bc5ab2ea5219e">shadow_present_mask</a> | <a class="code" href="mmu_8h.html#a8738f5e32b741b402eeb723accb071ed">PT_WRITABLE_MASK</a> |</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <a class="code" href="spte_8c.html#a88422204fa87484ebb6b1afe5657293e">shadow_user_mask</a> | <a class="code" href="spte_8c.html#ae4b595f87e310029f3011955be43dc6d">shadow_x_mask</a> | <a class="code" href="spte_8c.html#a1aea0c6f6f3fb8ec2b27d22b737e462c">shadow_me_value</a>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">if</span> (ad_disabled)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        spte |= <a class="code" href="spte_8h.html#a269e158ed2caf5c8610f6dd1caf473c4">SPTE_TDP_AD_DISABLED</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        spte |= <a class="code" href="spte_8c.html#a1037a592d9e03bab1ce70a6e471901ae">shadow_accessed_mask</a>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">return</span> spte;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;}</div>
<div class="ttc" id="aspte_8h_html_a09fe41a9f7651a7164d8fb83d42f71c9"><div class="ttname"><a href="spte_8h.html#a09fe41a9f7651a7164d8fb83d42f71c9">SPTE_MMU_PRESENT_MASK</a></div><div class="ttdeci">#define SPTE_MMU_PRESENT_MASK</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00016">spte.h:16</a></div></div>
<div class="ttc" id="aspte_8h_html_a269e158ed2caf5c8610f6dd1caf473c4"><div class="ttname"><a href="spte_8h.html#a269e158ed2caf5c8610f6dd1caf473c4">SPTE_TDP_AD_DISABLED</a></div><div class="ttdeci">#define SPTE_TDP_AD_DISABLED</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00033">spte.h:33</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_a98038e4116bcdef6f9e1e335eefc29c9_icgraph.png" border="0" usemap="#aspte_8c_a98038e4116bcdef6f9e1e335eefc29c9_icgraph" alt=""/></div>
<map name="aspte_8c_a98038e4116bcdef6f9e1e335eefc29c9_icgraph" id="aspte_8c_a98038e4116bcdef6f9e1e335eefc29c9_icgraph">
<area shape="rect" title=" " alt="" coords="2183,665,2332,692"/>
<area shape="rect" href="mmu_8c.html#a4a92071a0225bffad8c0336453d7433d" title=" " alt="" coords="1979,633,2135,660"/>
<area shape="rect" href="tdp__mmu_8c.html#a6588b054500f580603f94c0555fe3c06" title=" " alt="" coords="1749,703,1886,729"/>
<area shape="rect" href="mmu_8c.html#a66e1553cd71750b6b4d9e4b6e7764a2b" title=" " alt="" coords="1746,361,1889,388"/>
<area shape="rect" href="mmu_8c.html#abe6e7771da6f6df50052156316535466" title=" " alt="" coords="1704,633,1931,660"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="1510,361,1605,388"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="1530,311,1585,337"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1257,361,1391,388"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="1022,361,1177,388"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="1016,179,1183,205"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="792,428,940,455"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="771,317,961,344"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="564,461,684,488"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="289,579,461,605"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="281,376,469,403"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="45,452,185,479"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="293,477,456,504"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="293,528,457,555"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="15,579,215,605"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="65,351,164,377"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="61,401,168,428"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="67,249,163,276"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="15,300,214,327"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="539,310,709,351"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="540,208,708,235"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="294,310,455,351"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="293,107,457,133"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="295,157,454,184"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="285,208,464,235"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="311,259,439,285"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="779,161,953,188"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="525,56,723,83"/>
<area shape="rect" href="mmu_8c.html#a3e794d802eeb843cd6d7b699b74d8bf3" title=" " alt="" coords="286,5,463,32"/>
<area shape="rect" href="mmu_8c.html#a00f26353045c597f6a49cdd4f239f548" title=" " alt="" coords="272,56,477,83"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1279,311,1369,337"/>
<area shape="rect" href="mmu_8c.html#a03732600ed110f429f4a2d526a303bcb" title=" " alt="" coords="1471,626,1644,667"/>
<area shape="rect" href="mmu_8c.html#a2e109b8775cdfe9924c3d331ac5f332f" title=" " alt="" coords="1237,626,1411,667"/>
<area shape="rect" href="mmu_8c.html#adfe576663ff84a7b51773d87e91dd28a" title=" " alt="" coords="1012,626,1187,667"/>
<area shape="rect" href="mmu_8c.html#a073d9b7de8eaf977452c1eb7395a78d6" title=" " alt="" coords="775,626,957,667"/>
<area shape="rect" href="mmu_8c.html#a6abdd1728810c3f3ab8c2e1e6d2d37f0" title=" " alt="" coords="771,691,961,733"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="541,626,707,667"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="272,630,477,671"/>
<area shape="rect" href="kvm__main_8c.html#a05eed662dd45e4e4f7485e3158d95a3b" title=" " alt="" coords="5,637,224,664"/>
<area shape="rect" href="mmu_8c.html#a035ec39ab60e2a3d382c272b15fc83a6" title=" " alt="" coords="535,691,713,733"/>
<area shape="rect" href="dirty__ring_8c.html#a68052369106191fbc506fdf4d64be449" title=" " alt="" coords="297,699,453,725"/>
<area shape="rect" href="dirty__ring_8c.html#a33f93cefad4ed59214fb8dbf36de7dd1" title=" " alt="" coords="35,699,195,725"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="1246,757,1402,784"/>
<area shape="rect" href="tdp__mmu_8c.html#acf7d062eca8e6190d76f4934c290be61" title=" " alt="" coords="1459,703,1656,729"/>
<area shape="rect" href="tdp__mmu_8c.html#afa070d8c089f8547cfc2dbafa856e99c" title=" " alt="" coords="1245,691,1403,733"/>
<area shape="rect" href="tdp__mmu_8c.html#a57310f6ad7e70c13dadcfd30aa71af6d" title=" " alt="" coords="1009,691,1189,733"/>
</map>
</div>

</div>
</div>
<a id="ab8dba69ef9f5267d41ba061dbe101ded"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8dba69ef9f5267d41ba061dbe101ded">&#9670;&nbsp;</a></span>make_spte()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool make_spte </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a> *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct kvm_memory_slot *&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>pte_access</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfn_t&#160;</td>
          <td class="paramname"><em>gfn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kvm_pfn_t&#160;</td>
          <td class="paramname"><em>pfn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>old_spte</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>prefetch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>can_unsync</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>host_writable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64 *&#160;</td>
          <td class="paramname"><em>new_spte</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00137">137</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;{</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordtype">int</span> level = sp-&gt;<a class="code" href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">role</a>.level;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    u64 spte = <a class="code" href="spte_8h.html#a09fe41a9f7651a7164d8fb83d42f71c9">SPTE_MMU_PRESENT_MASK</a>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordtype">bool</span> wrprot = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    WARN_ON_ONCE(!pte_access &amp;&amp; !<a class="code" href="spte_8c.html#af8d723b5e0ffd2c2927bc5ab2ea5219e">shadow_present_mask</a>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> (sp-&gt;<a class="code" href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">role</a>.ad_disabled)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        spte |= <a class="code" href="spte_8h.html#a269e158ed2caf5c8610f6dd1caf473c4">SPTE_TDP_AD_DISABLED</a>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="mmu__internal_8h.html#a32da0c4cb2494f355e66aabe82bc1bb5">kvm_mmu_page_ad_need_write_protect</a>(sp))</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        spte |= <a class="code" href="spte_8h.html#a123d60fa58cc9e6f4fef483447d6b434">SPTE_TDP_AD_WRPROT_ONLY</a>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">     * For the EPT case, shadow_present_mask is 0 if hardware</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">     * supports exec-only page table entries.  In that case,</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">     * ACC_USER_MASK and shadow_user_mask are used to represent</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">     * read access.  See FNAME(gpte_access) in paging_tmpl.h.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    spte |= <a class="code" href="spte_8c.html#af8d723b5e0ffd2c2927bc5ab2ea5219e">shadow_present_mask</a>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">if</span> (!prefetch)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        spte |= <a class="code" href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8">spte_shadow_accessed_mask</a>(spte);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">     * For simplicity, enforce the NX huge page mitigation even if not</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">     * strictly necessary.  KVM could ignore the mitigation if paging is</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">     * disabled in the guest, as the guest doesn&#39;t have any page tables to</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">     * abuse.  But to safely ignore the mitigation, KVM would have to</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">     * ensure a new MMU is loaded (or all shadow pages zapped) when CR0.PG</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">     * is toggled on, and that&#39;s a net negative for performance when TDP is</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">     * enabled.  When TDP is disabled, KVM will always switch to a new MMU</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">     * when CR0.PG is toggled, but leveraging that to ignore the mitigation</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">     * would tie make_spte() further to vCPU/MMU state, and add complexity</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">     * just to optimize a mode that is anything but performance critical.</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">if</span> (level &gt; PG_LEVEL_4K &amp;&amp; (pte_access &amp; <a class="code" href="spte_8h.html#a97338f16c0803a95f9a6e239e3384668">ACC_EXEC_MASK</a>) &amp;&amp;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <a class="code" href="mmu__internal_8h.html#a8a367cbfff40c5c72d6f19049da9fc51">is_nx_huge_page_enabled</a>(vcpu-&gt;kvm)) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        pte_access &amp;= ~<a class="code" href="spte_8h.html#a97338f16c0803a95f9a6e239e3384668">ACC_EXEC_MASK</a>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">if</span> (pte_access &amp; <a class="code" href="spte_8h.html#a97338f16c0803a95f9a6e239e3384668">ACC_EXEC_MASK</a>)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        spte |= <a class="code" href="spte_8c.html#ae4b595f87e310029f3011955be43dc6d">shadow_x_mask</a>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        spte |= <a class="code" href="spte_8c.html#ac345c70889ab98d540472296de75aaa9">shadow_nx_mask</a>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">if</span> (pte_access &amp; <a class="code" href="spte_8h.html#a0051a82230a5fea5e6e2db17109c841b">ACC_USER_MASK</a>)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        spte |= <a class="code" href="spte_8c.html#a88422204fa87484ebb6b1afe5657293e">shadow_user_mask</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span> (level &gt; PG_LEVEL_4K)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        spte |= <a class="code" href="mmu_8h.html#abc8b55babfd3481f98a80a94ac99d0d8">PT_PAGE_SIZE_MASK</a>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="spte_8c.html#a61bd7ce98c04ee184b3e600f8bbe1712">shadow_memtype_mask</a>)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        spte |= static_call(kvm_x86_get_mt_mask)(vcpu, gfn,</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                             <a class="code" href="spte_8c.html#ab239f729574ce926da684e16e1c739fc">kvm_is_mmio_pfn</a>(pfn));</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">if</span> (host_writable)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        spte |= <a class="code" href="spte_8c.html#a2539eaf9e6c788f2fa877c7e9e1c29a8">shadow_host_writable_mask</a>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        pte_access &amp;= ~<a class="code" href="spte_8h.html#a1fcc0967bcae997263f8cd868873d3a1">ACC_WRITE_MASK</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="spte_8c.html#a1aea0c6f6f3fb8ec2b27d22b737e462c">shadow_me_value</a> &amp;&amp; !<a class="code" href="spte_8c.html#ab239f729574ce926da684e16e1c739fc">kvm_is_mmio_pfn</a>(pfn))</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        spte |= <a class="code" href="spte_8c.html#a1aea0c6f6f3fb8ec2b27d22b737e462c">shadow_me_value</a>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    spte |= (u64)pfn &lt;&lt; PAGE_SHIFT;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">if</span> (pte_access &amp; <a class="code" href="spte_8h.html#a1fcc0967bcae997263f8cd868873d3a1">ACC_WRITE_MASK</a>) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        spte |= <a class="code" href="mmu_8h.html#a8738f5e32b741b402eeb723accb071ed">PT_WRITABLE_MASK</a> | <a class="code" href="spte_8c.html#af450287cc0d83434644a34a9b938a250">shadow_mmu_writable_mask</a>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">         * Optimization: for pte sync, if spte was writable the hash</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">         * lookup is unnecessary (and expensive). Write protection</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">         * is responsibility of kvm_mmu_get_page / kvm_mmu_sync_roots.</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">         * Same reasoning can be applied to dirty page accounting.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49">is_writable_pte</a>(old_spte))</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">         * Unsync shadow pages that are reachable by the new, writable</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">         * SPTE.  Write-protect the SPTE if the page can&#39;t be unsync&#39;d,</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">         * e.g. it&#39;s write-tracked (upper-level SPs) or has one or more</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">         * shadow pages and unsync&#39;ing pages is not allowed.</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mmu_8c.html#af8846daf6e76a8d619fba16ff979245b">mmu_try_to_unsync_pages</a>(vcpu-&gt;kvm, slot, gfn, can_unsync, prefetch)) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            wrprot = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            pte_access &amp;= ~<a class="code" href="spte_8h.html#a1fcc0967bcae997263f8cd868873d3a1">ACC_WRITE_MASK</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            spte &amp;= ~(<a class="code" href="mmu_8h.html#a8738f5e32b741b402eeb723accb071ed">PT_WRITABLE_MASK</a> | <a class="code" href="spte_8c.html#af450287cc0d83434644a34a9b938a250">shadow_mmu_writable_mask</a>);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">if</span> (pte_access &amp; <a class="code" href="spte_8h.html#a1fcc0967bcae997263f8cd868873d3a1">ACC_WRITE_MASK</a>)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        spte |= <a class="code" href="spte_8h.html#ad4cab344dce7557c80f815d4dc072deb">spte_shadow_dirty_mask</a>(spte);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;out:</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">if</span> (prefetch)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        spte = <a class="code" href="spte_8c.html#a8885614ad1f7e35c498eb228826d1909">mark_spte_for_access_track</a>(spte);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    WARN_ONCE(<a class="code" href="spte_8h.html#a331291ac914d7a45322fae31df1f5e64">is_rsvd_spte</a>(&amp;vcpu-&gt;arch.mmu-&gt;shadow_zero_check, spte, level),</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;          <span class="stringliteral">&quot;spte = 0x%llx, level = %d, rsvd bits = 0x%llx&quot;</span>, spte, level,</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;          <a class="code" href="spte_8h.html#aca7067bb9ce45d32003771bcdb7f902b">get_rsvd_bits</a>(&amp;vcpu-&gt;arch.mmu-&gt;shadow_zero_check, spte, level));</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">if</span> ((spte &amp; <a class="code" href="mmu_8h.html#a8738f5e32b741b402eeb723accb071ed">PT_WRITABLE_MASK</a>) &amp;&amp; kvm_slot_dirty_track_enabled(slot)) {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="comment">/* Enforced by kvm_mmu_hugepage_adjust. */</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        WARN_ON_ONCE(level &gt; PG_LEVEL_4K);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <a class="code" href="kvm__main_8c.html#ae4806d9a69b751639c175cb98e468f15">mark_page_dirty_in_slot</a>(vcpu-&gt;kvm, slot, gfn);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    *new_spte = spte;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">return</span> wrprot;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_ae4806d9a69b751639c175cb98e468f15"><div class="ttname"><a href="kvm__main_8c.html#ae4806d9a69b751639c175cb98e468f15">mark_page_dirty_in_slot</a></div><div class="ttdeci">void mark_page_dirty_in_slot(struct kvm *kvm, const struct kvm_memory_slot *memslot, gfn_t gfn)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l03635">kvm_main.c:3635</a></div></div>
<div class="ttc" id="ammu_8c_html_af8846daf6e76a8d619fba16ff979245b"><div class="ttname"><a href="mmu_8c.html#af8846daf6e76a8d619fba16ff979245b">mmu_try_to_unsync_pages</a></div><div class="ttdeci">int mmu_try_to_unsync_pages(struct kvm *kvm, const struct kvm_memory_slot *slot, gfn_t gfn, bool can_unsync, bool prefetch)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l02805">mmu.c:2805</a></div></div>
<div class="ttc" id="ammu__internal_8h_html_a32da0c4cb2494f355e66aabe82bc1bb5"><div class="ttname"><a href="mmu__internal_8h.html#a32da0c4cb2494f355e66aabe82bc1bb5">kvm_mmu_page_ad_need_write_protect</a></div><div class="ttdeci">static bool kvm_mmu_page_ad_need_write_protect(struct kvm_mmu_page *sp)</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00148">mmu_internal.h:148</a></div></div>
<div class="ttc" id="aspte_8c_html_ab239f729574ce926da684e16e1c739fc"><div class="ttname"><a href="spte_8c.html#ab239f729574ce926da684e16e1c739fc">kvm_is_mmio_pfn</a></div><div class="ttdeci">static bool kvm_is_mmio_pfn(kvm_pfn_t pfn)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00088">spte.c:88</a></div></div>
<div class="ttc" id="aspte_8h_html_a123d60fa58cc9e6f4fef483447d6b434"><div class="ttname"><a href="spte_8h.html#a123d60fa58cc9e6f4fef483447d6b434">SPTE_TDP_AD_WRPROT_ONLY</a></div><div class="ttdeci">#define SPTE_TDP_AD_WRPROT_ONLY</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00034">spte.h:34</a></div></div>
<div class="ttc" id="aspte_8h_html_a331291ac914d7a45322fae31df1f5e64"><div class="ttname"><a href="spte_8h.html#a331291ac914d7a45322fae31df1f5e64">is_rsvd_spte</a></div><div class="ttdeci">static __always_inline bool is_rsvd_spte(struct rsvd_bits_validate *rsvd_check, u64 spte, int level)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00368">spte.h:368</a></div></div>
<div class="ttc" id="aspte_8h_html_a4d0035385de92ed42a75324a2fb96d49"><div class="ttname"><a href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49">is_writable_pte</a></div><div class="ttdeci">static bool is_writable_pte(unsigned long pte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00441">spte.h:441</a></div></div>
<div class="ttc" id="aspte_8h_html_a98cf368e8afe70efc381135f55a982c8"><div class="ttname"><a href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8">spte_shadow_accessed_mask</a></div><div class="ttdeci">static u64 spte_shadow_accessed_mask(u64 spte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00296">spte.h:296</a></div></div>
<div class="ttc" id="aspte_8h_html_aca7067bb9ce45d32003771bcdb7f902b"><div class="ttname"><a href="spte_8h.html#aca7067bb9ce45d32003771bcdb7f902b">get_rsvd_bits</a></div><div class="ttdeci">static u64 get_rsvd_bits(struct rsvd_bits_validate *rsvd_check, u64 pte, int level)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00348">spte.h:348</a></div></div>
<div class="ttc" id="aspte_8h_html_ad4cab344dce7557c80f815d4dc072deb"><div class="ttname"><a href="spte_8h.html#ad4cab344dce7557c80f815d4dc072deb">spte_shadow_dirty_mask</a></div><div class="ttdeci">static u64 spte_shadow_dirty_mask(u64 spte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00302">spte.h:302</a></div></div>
<div class="ttc" id="astructkvm__mmu__page_html_a9a054096d38bb2789139b0ef5aa8fec3"><div class="ttname"><a href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">kvm_mmu_page::role</a></div><div class="ttdeci">union kvm_mmu_page_role role</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00074">mmu_internal.h:80</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_ab8dba69ef9f5267d41ba061dbe101ded_cgraph.png" border="0" usemap="#aspte_8c_ab8dba69ef9f5267d41ba061dbe101ded_cgraph" alt=""/></div>
<map name="aspte_8c_ab8dba69ef9f5267d41ba061dbe101ded_cgraph" id="aspte_8c_ab8dba69ef9f5267d41ba061dbe101ded_cgraph">
<area shape="rect" title=" " alt="" coords="5,350,99,376"/>
<area shape="rect" href="spte_8h.html#aca7067bb9ce45d32003771bcdb7f902b" title=" " alt="" coords="701,63,811,90"/>
<area shape="rect" href="mmu__internal_8h.html#a8a367cbfff40c5c72d6f19049da9fc51" title=" " alt="" coords="150,139,343,166"/>
<area shape="rect" href="spte_8h.html#a331291ac914d7a45322fae31df1f5e64" title=" " alt="" coords="195,88,298,115"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="695,219,817,246"/>
<area shape="rect" href="spte_8c.html#ab239f729574ce926da684e16e1c739fc" title=" " alt="" coords="175,451,318,478"/>
<area shape="rect" href="mmu__internal_8h.html#a32da0c4cb2494f355e66aabe82bc1bb5" title=" " alt="" coords="150,502,343,544"/>
<area shape="rect" href="kvm__main_8c.html#ae4806d9a69b751639c175cb98e468f15" title=" " alt="" coords="155,568,338,595"/>
<area shape="rect" href="spte_8c.html#a8885614ad1f7e35c498eb228826d1909" title=" " alt="" coords="163,284,330,325"/>
<area shape="rect" href="mmu_8c.html#af8846daf6e76a8d619fba16ff979245b" title=" " alt="" coords="147,722,347,748"/>
<area shape="rect" href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8" title=" " alt="" coords="395,408,612,435"/>
<area shape="rect" href="spte_8h.html#ad4cab344dce7557c80f815d4dc072deb" title=" " alt="" coords="410,459,597,486"/>
<area shape="rect" href="spte_8h.html#a5bbdbb975f397f372a8240c35c3556d0" title=" " alt="" coords="436,139,571,166"/>
<area shape="rect" href="spte_8h.html#a2c32e50904a7680b61afa512022cffa3" title=" " alt="" coords="433,88,573,115"/>
<area shape="rect" href="dirty__ring_8c.html#ac1878b63f1f337e93cf186ebd4fffcc4" title=" " alt="" coords="417,561,589,602"/>
<area shape="rect" href="dirty__ring_8c.html#a81ebbf462440ed5392d6d3412a859ae7" title=" " alt="" coords="424,627,583,654"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="417,510,590,536"/>
<area shape="rect" href="dirty__ring_8c.html#ad6e626257c739b2ac3d397119a7cf798" title=" " alt="" coords="660,602,852,628"/>
<area shape="rect" href="dirty__ring_8c.html#a6fe5cd75b9bac6497e1ae7340f2a5f7b" title=" " alt="" coords="682,652,830,679"/>
<area shape="rect" href="dirty__ring_8c.html#a22c9a239acf3463a8599a21c0a756538" title=" " alt="" coords="667,551,845,578"/>
<area shape="rect" href="dirty__ring_8c.html#acd0a1e586324b4c49b429c7a392db73f" title=" " alt="" coords="925,602,1083,628"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="426,241,581,282"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="424,358,583,384"/>
<area shape="rect" href="spte_8h.html#a976cddc84d935189584bdce94d4805fd" title=" " alt="" coords="690,358,822,384"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="917,408,1091,435"/>
<area shape="rect" href="page__track_8c.html#a73235ad2d0552c7e4b6b69d729fa79b1" title=" " alt="" coords="407,722,599,748"/>
<area shape="rect" href="mmu_8c.html#a01f2e3d13500ebb1caa2021001ba4026" title=" " alt="" coords="432,808,575,835"/>
<area shape="rect" href="mmu_8h.html#a41b79b63cae220349d8eb5a54f047939" title=" " alt="" coords="703,703,809,730"/>
<area shape="rect" href="page__track_8c.html#acdd8bb0c7c8b588137d126d56d20d7fa" title=" " alt="" coords="671,754,841,796"/>
<area shape="rect" href="mmu_8h.html#a89c85e383e0f6dfe6f91f5c1dd25e522" title=" " alt="" coords="900,762,1108,788"/>
<area shape="rect" href="mmu_8c.html#a5acf1a996848fd3a4b7d2792d90a4c60" title=" " alt="" coords="661,820,851,861"/>
<area shape="rect" href="mmu_8c.html#ae9f0b7a623073572585a81a32b104eb3" title=" " alt="" coords="949,827,1059,854"/>
<area shape="rect" href="spte_8h.html#afa67b29261e5d58fdf1f7f694e99a053" title=" " alt="" coords="1159,802,1253,828"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="1156,852,1256,879"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="1304,852,1435,879"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_ab8dba69ef9f5267d41ba061dbe101ded_icgraph.png" border="0" usemap="#aspte_8c_ab8dba69ef9f5267d41ba061dbe101ded_icgraph" alt=""/></div>
<map name="aspte_8c_ab8dba69ef9f5267d41ba061dbe101ded_icgraph" id="aspte_8c_ab8dba69ef9f5267d41ba061dbe101ded_icgraph">
<area shape="rect" title=" " alt="" coords="2863,523,2956,550"/>
<area shape="rect" href="mmu_8c.html#a8fc6edfe7bd2a5a7d47952232ea5b8a1" title=" " alt="" coords="2670,473,2789,499"/>
<area shape="rect" href="paging__tmpl_8h.html#a189517b8079c307a0aef9f58dc8c7a25" title=" " alt="" coords="2686,523,2773,550"/>
<area shape="rect" href="tdp__mmu_8c.html#aa98226578ebe207e97e262a86bbd5427" title=" " alt="" coords="2644,575,2815,616"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="1855,401,1949,427"/>
<area shape="rect" href="mmu_8c.html#aab93e6e4502a54b3d61492f0e052e358" title=" " alt="" coords="2404,426,2596,453"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="1875,502,1929,529"/>
<area shape="rect" href="paging__tmpl_8h.html#ac251b8f404f8fa0840ec5f4db44a6480" title=" " alt="" coords="2219,477,2331,503"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1672,401,1807,427"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="1463,375,1618,402"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="1457,426,1624,453"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="1240,375,1388,402"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="1219,147,1409,174"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="1012,375,1132,402"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="253,510,425,537"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="729,619,917,646"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="503,898,643,925"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="741,274,904,301"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="741,325,905,351"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="5,510,205,537"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="523,543,622,570"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="519,594,626,621"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="291,771,387,798"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="473,695,672,722"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="503,847,643,874"/>
<area shape="rect" href="smm_8c.html#a5382946234c910e05c6e2c09aff15713" title=" " alt="" coords="496,746,649,773"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="508,645,637,671"/>
<area shape="rect" href="vmx_2nested_8c.html#a001f930db9a867e828cf01b48d3e4e25" title=" " alt="" coords="495,427,650,468"/>
<area shape="rect" href="x86_8c.html#a420caf80521ab8d6ef7218d5dd26d47f" title=" " alt="" coords="535,493,610,519"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="306,847,373,874"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="287,898,392,925"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="483,325,662,351"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="495,223,650,250"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="489,274,657,301"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="987,31,1157,72"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="988,147,1156,174"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="742,5,903,47"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="741,71,905,98"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="743,122,902,149"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="733,173,912,199"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="759,223,887,250"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="1227,561,1401,587"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="973,721,1171,747"/>
<area shape="rect" href="mmu_8c.html#a3e794d802eeb843cd6d7b699b74d8bf3" title=" " alt="" coords="734,721,911,747"/>
<area shape="rect" href="mmu_8c.html#a00f26353045c597f6a49cdd4f239f548" title=" " alt="" coords="720,771,925,798"/>
<area shape="rect" href="mmu_8c.html#a269190dc46a1af3d04b9e039944d85b9" title=" " alt="" coords="2193,426,2356,453"/>
<area shape="rect" href="mmu_8c.html#a5a96624b696225b4bc6c90caea946cb0" title=" " alt="" coords="1997,426,2145,453"/>
<area shape="rect" href="paging__tmpl_8h.html#a53f0634ff017bc46ff621fdad18cdcd4" title=" " alt="" coords="2019,477,2123,503"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1694,502,1785,529"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="2422,582,2578,609"/>
</map>
</div>

</div>
</div>
<a id="ac0162f8b29f82f308036271f93880cd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0162f8b29f82f308036271f93880cd7">&#9670;&nbsp;</a></span>make_spte_executable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u64 make_spte_executable </td>
          <td>(</td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>spte</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00251">251</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;{</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordtype">bool</span> is_access_track = <a class="code" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192">is_access_track_spte</a>(spte);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span> (is_access_track)</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        spte = <a class="code" href="spte_8h.html#abc2b9043d48550e741fda1e2ad36a652">restore_acc_track_spte</a>(spte);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    spte &amp;= ~<a class="code" href="spte_8c.html#ac345c70889ab98d540472296de75aaa9">shadow_nx_mask</a>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    spte |= <a class="code" href="spte_8c.html#ae4b595f87e310029f3011955be43dc6d">shadow_x_mask</a>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span> (is_access_track)</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        spte = <a class="code" href="spte_8c.html#a8885614ad1f7e35c498eb228826d1909">mark_spte_for_access_track</a>(spte);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">return</span> spte;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div>
<div class="ttc" id="aspte_8h_html_a30b8d20964e90337ab8eaeddca1ba192"><div class="ttname"><a href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192">is_access_track_spte</a></div><div class="ttdeci">static bool is_access_track_spte(u64 spte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00308">spte.h:308</a></div></div>
<div class="ttc" id="aspte_8h_html_abc2b9043d48550e741fda1e2ad36a652"><div class="ttname"><a href="spte_8h.html#abc2b9043d48550e741fda1e2ad36a652">restore_acc_track_spte</a></div><div class="ttdeci">static u64 restore_acc_track_spte(u64 spte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00486">spte.h:486</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_ac0162f8b29f82f308036271f93880cd7_cgraph.png" border="0" usemap="#aspte_8c_ac0162f8b29f82f308036271f93880cd7_cgraph" alt=""/></div>
<map name="aspte_8c_ac0162f8b29f82f308036271f93880cd7_cgraph" id="aspte_8c_ac0162f8b29f82f308036271f93880cd7_cgraph">
<area shape="rect" title=" " alt="" coords="5,60,176,87"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="444,5,603,32"/>
<area shape="rect" href="spte_8c.html#a8885614ad1f7e35c498eb228826d1909" title=" " alt="" coords="227,53,393,94"/>
<area shape="rect" href="spte_8h.html#abc2b9043d48550e741fda1e2ad36a652" title=" " alt="" coords="224,119,396,145"/>
<area shape="rect" href="spte_8h.html#a976cddc84d935189584bdce94d4805fd" title=" " alt="" coords="651,31,783,57"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="831,31,1005,57"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="446,107,601,149"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="656,115,777,141"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_ac0162f8b29f82f308036271f93880cd7_icgraph.png" border="0" usemap="#aspte_8c_ac0162f8b29f82f308036271f93880cd7_icgraph" alt=""/></div>
<map name="aspte_8c_ac0162f8b29f82f308036271f93880cd7_icgraph" id="aspte_8c_ac0162f8b29f82f308036271f93880cd7_icgraph">
<area shape="rect" title=" " alt="" coords="4148,560,4319,587"/>
<area shape="rect" href="spte_8c.html#adc3a08f029fff6aaf2bf687edf69410f" title=" " alt="" coords="3893,560,4100,587"/>
<area shape="rect" href="mmu_8c.html#abe6e7771da6f6df50052156316535466" title=" " alt="" coords="3619,533,3845,560"/>
<area shape="rect" href="tdp__mmu_8c.html#acf7d062eca8e6190d76f4934c290be61" title=" " alt="" coords="3373,589,3571,616"/>
<area shape="rect" href="mmu_8c.html#a03732600ed110f429f4a2d526a303bcb" title=" " alt="" coords="3385,523,3559,565"/>
<area shape="rect" href="mmu_8c.html#a2e109b8775cdfe9924c3d331ac5f332f" title=" " alt="" coords="3152,523,3325,565"/>
<area shape="rect" href="mmu_8c.html#adfe576663ff84a7b51773d87e91dd28a" title=" " alt="" coords="2927,550,3101,591"/>
<area shape="rect" href="mmu_8c.html#a073d9b7de8eaf977452c1eb7395a78d6" title=" " alt="" coords="2689,550,2872,591"/>
<area shape="rect" href="mmu_8c.html#a6abdd1728810c3f3ab8c2e1e6d2d37f0" title=" " alt="" coords="2685,615,2876,657"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="2465,550,2631,591"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="2205,550,2411,591"/>
<area shape="rect" href="kvm__main_8c.html#a05eed662dd45e4e4f7485e3158d95a3b" title=" " alt="" coords="1939,557,2157,584"/>
<area shape="rect" href="kvm__main_8c.html#ac81a7d714d0668ccea6d0c2ddfd0fed5" title=" " alt="" coords="1742,557,1885,584"/>
<area shape="rect" href="kvm__main_8c.html#ac76f506181e49aa4800bb202e11cb2b3" title=" " alt="" coords="1485,557,1688,584"/>
<area shape="rect" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9" title=" " alt="" coords="1240,503,1437,529"/>
<area shape="rect" href="kvm__main_8c.html#a1a839781d3be88d418abfb2b456663ab" title=" " alt="" coords="1245,583,1433,609"/>
<area shape="rect" href="vmx_8c.html#acc48d0f16e027c2bad1268d02a2eaa68" title=" " alt="" coords="988,528,1173,555"/>
<area shape="rect" href="lapic_8c.html#a8c6616d2cbae35632aa5debb15b552ec" title=" " alt="" coords="974,579,1187,605"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="995,216,1166,243"/>
<area shape="rect" href="lapic_8c.html#a017e57adbc721d98d26099f1a431a22c" title=" " alt="" coords="969,427,1192,453"/>
<area shape="rect" href="vmx_8c.html#a15d61630d8c4e3f7aea16d3b0164a799" title=" " alt="" coords="1011,477,1151,504"/>
<area shape="rect" href="vmx_8c.html#a426fe0cb3c7fd73b276f6815b6ab9ddc" title=" " alt="" coords="761,528,899,555"/>
<area shape="rect" href="avic_8c.html#aefc63eafb35c1efd94f6d53e7d0b20d5" title=" " alt="" coords="743,579,917,605"/>
<area shape="rect" href="avic_8c.html#a8e0a22138080054f4ac064064402f74a" title=" " alt="" coords="565,579,679,605"/>
<area shape="rect" href="svm_8c.html#a2af2f754ca7838a0253d54c33aae7d1e" title=" " alt="" coords="332,579,468,605"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="559,85,685,112"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="763,216,897,243"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="303,5,497,32"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="565,216,679,243"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="325,427,475,453"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="317,56,483,83"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="323,107,477,133"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="295,157,505,184"/>
<area shape="rect" href="debugfs_8c.html#af0427db3ec1a8c38ea51591abbefde57" title=" " alt="" coords="314,209,486,250"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="333,275,467,301"/>
<area shape="rect" href="sev_8c.html#ad28fd793149997c912b52490f6ca139a" title=" " alt="" coords="329,325,471,352"/>
<area shape="rect" href="sev_8c.html#af1eb77eac84f085b0a943b87f783e30d" title=" " alt="" coords="335,376,465,403"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="47,427,205,453"/>
<area shape="rect" href="sev_8c.html#abe3c569b297da3b78824074b8c08f9a7" title=" " alt="" coords="5,325,247,352"/>
<area shape="rect" href="x86_8c.html#a384702aafa8cdbab3cf92b3d576bb6fb" title=" " alt="" coords="739,439,921,465"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="553,452,691,479"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="359,477,441,504"/>
<area shape="rect" href="kvm__main_8c.html#a4c8ff5a794a6a2e77e0cfc224568ef70" title=" " alt="" coords="979,630,1182,671"/>
<area shape="rect" href="mmu_8c.html#a035ec39ab60e2a3d382c272b15fc83a6" title=" " alt="" coords="2459,615,2637,657"/>
<area shape="rect" href="dirty__ring_8c.html#a68052369106191fbc506fdf4d64be449" title=" " alt="" coords="2230,623,2386,649"/>
<area shape="rect" href="dirty__ring_8c.html#a33f93cefad4ed59214fb8dbf36de7dd1" title=" " alt="" coords="1968,623,2128,649"/>
<area shape="rect" href="kvm__main_8c.html#a91e959c20554917ba05e7feea69acc7c" title=" " alt="" coords="1736,615,1891,657"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="3161,589,3317,616"/>
<area shape="rect" href="tdp__mmu_8c.html#afa070d8c089f8547cfc2dbafa856e99c" title=" " alt="" coords="3159,641,3318,682"/>
<area shape="rect" href="tdp__mmu_8c.html#a57310f6ad7e70c13dadcfd30aa71af6d" title=" " alt="" coords="2924,615,3104,657"/>
</map>
</div>

</div>
</div>
<a id="a8885614ad1f7e35c498eb228826d1909"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8885614ad1f7e35c498eb228826d1909">&#9670;&nbsp;</a></span>mark_spte_for_access_track()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 mark_spte_for_access_track </td>
          <td>(</td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>spte</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00341">341</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;{</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="spte_8h.html#a976cddc84d935189584bdce94d4805fd">spte_ad_enabled</a>(spte))</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">return</span> spte &amp; ~<a class="code" href="spte_8c.html#a1037a592d9e03bab1ce70a6e471901ae">shadow_accessed_mask</a>;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192">is_access_track_spte</a>(spte))</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="keywordflow">return</span> spte;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4">check_spte_writable_invariants</a>(spte);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    WARN_ONCE(spte &amp; (<a class="code" href="spte_8h.html#a7946bf0c365161548fd52d549f7cb3cf">SHADOW_ACC_TRACK_SAVED_BITS_MASK</a> &lt;&lt;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;              <a class="code" href="spte_8h.html#a0d8e6834be789af801a2b0dbafd06448">SHADOW_ACC_TRACK_SAVED_BITS_SHIFT</a>),</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;          <span class="stringliteral">&quot;Access Tracking saved bit locations are not zero\n&quot;</span>);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    spte |= (spte &amp; <a class="code" href="spte_8h.html#a7946bf0c365161548fd52d549f7cb3cf">SHADOW_ACC_TRACK_SAVED_BITS_MASK</a>) &lt;&lt;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <a class="code" href="spte_8h.html#a0d8e6834be789af801a2b0dbafd06448">SHADOW_ACC_TRACK_SAVED_BITS_SHIFT</a>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    spte &amp;= ~<a class="code" href="spte_8c.html#a1db70b0d38cd86029fc77525fa53d96a">shadow_acc_track_mask</a>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">return</span> spte;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div>
<div class="ttc" id="aspte_8h_html_a0d8e6834be789af801a2b0dbafd06448"><div class="ttname"><a href="spte_8h.html#a0d8e6834be789af801a2b0dbafd06448">SHADOW_ACC_TRACK_SAVED_BITS_SHIFT</a></div><div class="ttdeci">#define SHADOW_ACC_TRACK_SAVED_BITS_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00069">spte.h:69</a></div></div>
<div class="ttc" id="aspte_8h_html_a2946d25249b11a82d33e9ad9dca73ec4"><div class="ttname"><a href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4">check_spte_writable_invariants</a></div><div class="ttdeci">static void check_spte_writable_invariants(u64 spte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00447">spte.h:447</a></div></div>
<div class="ttc" id="aspte_8h_html_a7946bf0c365161548fd52d549f7cb3cf"><div class="ttname"><a href="spte_8h.html#a7946bf0c365161548fd52d549f7cb3cf">SHADOW_ACC_TRACK_SAVED_BITS_MASK</a></div><div class="ttdeci">#define SHADOW_ACC_TRACK_SAVED_BITS_MASK</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00067">spte.h:67</a></div></div>
<div class="ttc" id="aspte_8h_html_a976cddc84d935189584bdce94d4805fd"><div class="ttname"><a href="spte_8h.html#a976cddc84d935189584bdce94d4805fd">spte_ad_enabled</a></div><div class="ttdeci">static bool spte_ad_enabled(u64 spte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00279">spte.h:279</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_a8885614ad1f7e35c498eb228826d1909_cgraph.png" border="0" usemap="#aspte_8c_a8885614ad1f7e35c498eb228826d1909_cgraph" alt=""/></div>
<map name="aspte_8c_a8885614ad1f7e35c498eb228826d1909_cgraph" id="aspte_8c_a8885614ad1f7e35c498eb228826d1909_cgraph">
<area shape="rect" title=" " alt="" coords="5,64,172,105"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="222,5,377,47"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="220,71,379,98"/>
<area shape="rect" href="spte_8h.html#a976cddc84d935189584bdce94d4805fd" title=" " alt="" coords="427,97,559,123"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="432,13,553,39"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="607,97,781,123"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_a8885614ad1f7e35c498eb228826d1909_icgraph.png" border="0" usemap="#aspte_8c_a8885614ad1f7e35c498eb228826d1909_icgraph" alt=""/></div>
<map name="aspte_8c_a8885614ad1f7e35c498eb228826d1909_icgraph" id="aspte_8c_a8885614ad1f7e35c498eb228826d1909_icgraph">
<area shape="rect" title=" " alt="" coords="2809,159,2976,200"/>
<area shape="rect" href="tdp__mmu_8c.html#a30ae563747c16580e9c760ea701eec6d" title=" " alt="" coords="2611,21,2729,47"/>
<area shape="rect" href="spte_8c.html#acde6f5a6ce759cab5d21b74658796860" title=" " alt="" coords="2579,159,2761,200"/>
<area shape="rect" href="spte_8c.html#ab8dba69ef9f5267d41ba061dbe101ded" title=" " alt="" coords="2623,246,2717,273"/>
<area shape="rect" href="spte_8c.html#ac0162f8b29f82f308036271f93880cd7" title=" " alt="" coords="2585,365,2755,391"/>
<area shape="rect" href="mmu_8c.html#a74bc4174b611178092a856873c918a0e" title=" " alt="" coords="2609,86,2731,113"/>
<area shape="rect" href="tdp__mmu_8c.html#a0a5c7f827057100e08b2f45da804fa30" title=" " alt="" coords="2338,5,2517,47"/>
<area shape="rect" href="mmu_8c.html#a39977aaa99a2eb423e12429a5deb15dc" title=" " alt="" coords="2107,18,2218,45"/>
<area shape="rect" href="mmu_8c.html#a896287d2c20890911385b8c4e905f803" title=" " alt="" coords="2089,73,2236,99"/>
<area shape="rect" href="tdp__mmu_8c.html#a01bf8752c61ddeae2878ef46d312e00c" title=" " alt="" coords="2375,173,2480,199"/>
<area shape="rect" href="mmu_8c.html#a978186d69e4a1b753b9650294d80ca7d" title=" " alt="" coords="1844,98,1985,125"/>
<area shape="rect" href="tdp__mmu_8c.html#aa53a75612d7b32153949be34f4055144" title=" " alt="" coords="2057,123,2268,150"/>
<area shape="rect" href="mmu_8c.html#a8fc6edfe7bd2a5a7d47952232ea5b8a1" title=" " alt="" coords="2368,231,2487,258"/>
<area shape="rect" href="paging__tmpl_8h.html#a189517b8079c307a0aef9f58dc8c7a25" title=" " alt="" coords="2384,282,2471,309"/>
<area shape="rect" href="tdp__mmu_8c.html#aa98226578ebe207e97e262a86bbd5427" title=" " alt="" coords="2342,348,2513,389"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="1421,289,1516,315"/>
<area shape="rect" href="mmu_8c.html#aab93e6e4502a54b3d61492f0e052e358" title=" " alt="" coords="2067,275,2259,302"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="1441,213,1496,239"/>
<area shape="rect" href="paging__tmpl_8h.html#ac251b8f404f8fa0840ec5f4db44a6480" title=" " alt="" coords="1859,225,1971,251"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1168,289,1303,315"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="925,263,1080,290"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="919,314,1086,341"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="696,263,844,290"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="675,205,865,231"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="468,263,588,290"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="201,213,373,239"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="193,263,381,290"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="5,289,145,315"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="443,197,613,239"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="444,146,612,173"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="683,314,857,341"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="429,314,627,341"/>
<area shape="rect" href="mmu_8c.html#a269190dc46a1af3d04b9e039944d85b9" title=" " alt="" coords="1833,275,1996,302"/>
<area shape="rect" href="mmu_8c.html#a5a96624b696225b4bc6c90caea946cb0" title=" " alt="" coords="1619,275,1767,302"/>
<area shape="rect" href="paging__tmpl_8h.html#a53f0634ff017bc46ff621fdad18cdcd4" title=" " alt="" coords="1641,225,1745,251"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1190,213,1281,239"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="1837,377,1993,403"/>
<area shape="rect" href="spte_8c.html#adc3a08f029fff6aaf2bf687edf69410f" title=" " alt="" coords="2324,427,2531,454"/>
<area shape="rect" href="mmu_8c.html#abe6e7771da6f6df50052156316535466" title=" " alt="" coords="2049,482,2276,509"/>
<area shape="rect" href="tdp__mmu_8c.html#acf7d062eca8e6190d76f4934c290be61" title=" " alt="" coords="2064,427,2261,454"/>
<area shape="rect" href="mmu_8c.html#a03732600ed110f429f4a2d526a303bcb" title=" " alt="" coords="1828,480,2001,521"/>
<area shape="rect" href="mmu_8c.html#a2e109b8775cdfe9924c3d331ac5f332f" title=" " alt="" coords="1607,483,1780,524"/>
<area shape="rect" href="mmu_8c.html#adfe576663ff84a7b51773d87e91dd28a" title=" " alt="" coords="1381,483,1556,524"/>
<area shape="rect" href="mmu_8c.html#a073d9b7de8eaf977452c1eb7395a78d6" title=" " alt="" coords="1144,417,1327,459"/>
<area shape="rect" href="mmu_8c.html#a6abdd1728810c3f3ab8c2e1e6d2d37f0" title=" " alt="" coords="1140,483,1331,524"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="919,417,1086,459"/>
<area shape="rect" href="mmu_8c.html#a035ec39ab60e2a3d382c272b15fc83a6" title=" " alt="" coords="913,483,1092,524"/>
<area shape="rect" href="tdp__mmu_8c.html#afa070d8c089f8547cfc2dbafa856e99c" title=" " alt="" coords="1614,417,1773,459"/>
<area shape="rect" href="tdp__mmu_8c.html#a57310f6ad7e70c13dadcfd30aa71af6d" title=" " alt="" coords="1379,417,1559,459"/>
<area shape="rect" href="mmu_8c.html#a8fb95365b232d52b71de1489dd80d462" title=" " alt="" coords="2366,71,2489,98"/>
</map>
</div>

</div>
</div>
<a id="aeb873ac8a7702d1dcdf1e8d5e94c1487"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb873ac8a7702d1dcdf1e8d5e94c1487">&#9670;&nbsp;</a></span>module_param_named()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_param_named </td>
          <td>(</td>
          <td class="paramtype">mmio_caching&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mmu_8h.html#ad1f35c581f53d7ebf9ada1be6d5531ad">enable_mmio_caching</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0444&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a11de60840b247621debae854aea928db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11de60840b247621debae854aea928db">&#9670;&nbsp;</a></span>spte_has_volatile_bits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spte_has_volatile_bits </td>
          <td>(</td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>spte</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00114">114</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;{</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">     * Always atomically update spte if it can be updated</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">     * out of mmu-lock, it can ensure dirty bit is not lost,</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">     * also, it can help us to get a stable is_writable_pte()</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">     * to ensure tlb flush is not missed.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49">is_writable_pte</a>(spte) &amp;&amp; <a class="code" href="spte_8h.html#aeb796217990be75433fd1430d5958184">is_mmu_writable_spte</a>(spte))</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192">is_access_track_spte</a>(spte))</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="spte_8h.html#a976cddc84d935189584bdce94d4805fd">spte_ad_enabled</a>(spte)) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">if</span> (!(spte &amp; <a class="code" href="spte_8c.html#a1037a592d9e03bab1ce70a6e471901ae">shadow_accessed_mask</a>) ||</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            (<a class="code" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49">is_writable_pte</a>(spte) &amp;&amp; !(spte &amp; <a class="code" href="spte_8c.html#a4da775a32ca03cd42a18da1e1aac568e">shadow_dirty_mask</a>)))</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div>
<div class="ttc" id="aspte_8h_html_aeb796217990be75433fd1430d5958184"><div class="ttname"><a href="spte_8h.html#aeb796217990be75433fd1430d5958184">is_mmu_writable_spte</a></div><div class="ttdeci">static bool is_mmu_writable_spte(u64 spte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00458">spte.h:458</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_a11de60840b247621debae854aea928db_cgraph.png" border="0" usemap="#aspte_8c_a11de60840b247621debae854aea928db_cgraph" alt=""/></div>
<map name="aspte_8c_a11de60840b247621debae854aea928db_cgraph" id="aspte_8c_a11de60840b247621debae854aea928db_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,172,108"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="225,5,384,32"/>
<area shape="rect" href="spte_8h.html#a976cddc84d935189584bdce94d4805fd" title=" " alt="" coords="437,31,569,57"/>
<area shape="rect" href="spte_8h.html#aeb796217990be75433fd1430d5958184" title=" " alt="" coords="220,107,389,133"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="244,157,365,184"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="617,31,792,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spte_8c_a11de60840b247621debae854aea928db_icgraph.png" border="0" usemap="#aspte_8c_a11de60840b247621debae854aea928db_icgraph" alt=""/></div>
<map name="aspte_8c_a11de60840b247621debae854aea928db_icgraph" id="aspte_8c_a11de60840b247621debae854aea928db_icgraph">
<area shape="rect" title=" " alt="" coords="1557,302,1724,329"/>
<area shape="rect" href="tdp__iter_8h.html#ae00f2a54e0e899c2f169396a9c10d223" title=" " alt="" coords="1311,140,1506,181"/>
<area shape="rect" href="mmu_8c.html#a63ad2b3c2d88537186f5732c6d26793e" title=" " alt="" coords="1308,878,1509,905"/>
<area shape="rect" href="mmu_8c.html#aa9f7f9c3b251235e8e59c6e0c07c5fab" title=" " alt="" coords="1079,295,1246,336"/>
<area shape="rect" href="tdp__iter_8h.html#a74cc1f032b50c7c6c64ded8866deb4a4" title=" " alt="" coords="1065,147,1260,174"/>
<area shape="rect" href="tdp__iter_8h.html#a06888df6894eef0e93f82c77b99110b2" title=" " alt="" coords="1068,97,1257,123"/>
<area shape="rect" href="tdp__mmu_8c.html#a30ae563747c16580e9c760ea701eec6d" title=" " alt="" coords="841,173,959,199"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="825,122,975,149"/>
<area shape="rect" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a" title=" " alt="" coords="285,71,432,98"/>
<area shape="rect" href="tdp__mmu_8c.html#a0a5c7f827057100e08b2f45da804fa30" title=" " alt="" coords="538,173,717,215"/>
<area shape="rect" href="mmu_8c.html#a39977aaa99a2eb423e12429a5deb15dc" title=" " alt="" coords="303,210,414,237"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="546,122,709,149"/>
<area shape="rect" href="tdp__mmu_8c.html#a692eb9d20075258e5d4a0e4289a7c9b6" title=" " alt="" coords="259,122,458,149"/>
<area shape="rect" href="tdp__mmu_8c.html#a381e22ee819864cf1fd726479a76b6c7" title=" " alt="" coords="15,46,187,73"/>
<area shape="rect" href="tdp__mmu_8c.html#af6444812b70d9509539a3fa478cde14d" title=" " alt="" coords="14,97,189,123"/>
<area shape="rect" href="tdp__mmu_8c.html#a302b8c57cfb6b9bc82a2f68047477145" title=" " alt="" coords="815,17,985,43"/>
<area shape="rect" href="tdp__mmu_8c.html#ad1753c27bb053bc6ac3a3893e10b49f6" title=" " alt="" coords="529,5,725,47"/>
<area shape="rect" href="mmu_8c.html#a3ee167c290bf125621f455ec5af142a2" title=" " alt="" coords="1119,671,1206,698"/>
<area shape="rect" href="mmu_8c.html#a896287d2c20890911385b8c4e905f803" title=" " alt="" coords="827,979,973,1006"/>
<area shape="rect" href="mmu_8c.html#aee3bce967ca931b9d1b1766632f0561e" title=" " alt="" coords="1069,878,1256,905"/>
<area shape="rect" href="mmu_8c.html#a8ee87ecd6aa56f9798fd4dc3f4dfefe5" title=" " alt="" coords="1069,979,1257,1006"/>
<area shape="rect" href="mmu_8c.html#a4634f2893dd92f1cca61da172add4618" title=" " alt="" coords="837,787,963,814"/>
<area shape="rect" href="mmu_8c.html#a5d549ae5b6c13e9b87ccc13127ddf86a" title=" " alt="" coords="823,631,977,658"/>
<area shape="rect" href="mmu_8c.html#a8fc6edfe7bd2a5a7d47952232ea5b8a1" title=" " alt="" coords="299,682,418,709"/>
<area shape="rect" href="paging__tmpl_8h.html#aeeae3a937efef7a41df33c3ca002d32c" title=" " alt="" coords="819,493,981,519"/>
<area shape="rect" href="paging__tmpl_8h.html#a189517b8079c307a0aef9f58dc8c7a25" title=" " alt="" coords="584,442,671,469"/>
<area shape="rect" href="mmu_8c.html#a4a92071a0225bffad8c0336453d7433d" title=" " alt="" coords="549,813,705,839"/>
<area shape="rect" href="mmu_8c.html#abe6e7771da6f6df50052156316535466" title=" " alt="" coords="245,838,472,865"/>
<area shape="rect" href="mmu_8c.html#a182d50b0d6d7be3301d249ba97a8152f" title=" " alt="" coords="520,543,735,570"/>
<area shape="rect" href="mmu_8c.html#abab2bb5454cc72ba2e4913a87e5800fe" title=" " alt="" coords="538,595,717,636"/>
<area shape="rect" href="mmu_8c.html#ad8f7c681ee8bd25bb3fcb5b3ff39f4e8" title=" " alt="" coords="541,661,713,687"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="54,631,149,658"/>
<area shape="rect" href="mmu_8c.html#aab93e6e4502a54b3d61492f0e052e358" title=" " alt="" coords="5,682,197,709"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="74,733,129,759"/>
<area shape="rect" href="paging__tmpl_8h.html#ac251b8f404f8fa0840ec5f4db44a6480" title=" " alt="" coords="45,551,157,578"/>
<area shape="rect" href="mmu_8c.html#a978186d69e4a1b753b9650294d80ca7d" title=" " alt="" coords="557,1015,698,1042"/>
<area shape="rect" href="mmu_8c.html#a51e0b9f12c2d968627ad2c32cc8b2b12" title=" " alt="" coords="832,914,968,941"/>
<area shape="rect" href="mmu_8c.html#ab5f27c8f9a6f98a60c79163bf82f3c35" title=" " alt="" coords="849,863,951,890"/>
<area shape="rect" href="mmu_8c.html#aafdb4964a081741c295ad440ae9ff0f4" title=" " alt="" coords="530,914,725,941"/>
<area shape="rect" href="mmu_8c.html#ae8b1e71ffe7346b11b2dbf0a7b0af897" title=" " alt="" coords="566,965,689,991"/>
<area shape="rect" href="mmu_8c.html#a99dcfa860adefe29091d745ea78fc065" title=" " alt="" coords="584,762,671,789"/>
<area shape="rect" href="mmu_8c.html#a9894c31f8b002070c4d2e81846bed206" title=" " alt="" coords="783,1059,1017,1086"/>
<area shape="rect" href="mmu_8c.html#a5df94d1035651e654323995253a32292" title=" " alt="" coords="528,1067,727,1108"/>
<area shape="rect" href="mmu_8c.html#a74bc4174b611178092a856873c918a0e" title=" " alt="" coords="839,265,961,291"/>
<area shape="rect" href="mmu_8c.html#a5b9a8fea2e61370d22c2d256b5bc33da" title=" " alt="" coords="829,341,971,367"/>
<area shape="rect" href="mmu_8c.html#a8fb95365b232d52b71de1489dd80d462" title=" " alt="" coords="566,239,689,266"/>
<area shape="rect" href="mmu_8c.html#a5d411471ef3bfa5ce2c02452b7875e91" title=" " alt="" coords="564,290,691,317"/>
<area shape="rect" href="mmu_8c.html#afac424a6a4cdd467fc2d6ba22b88d08f" title=" " alt="" coords="556,341,699,367"/>
<area shape="rect" href="mmu_8c.html#a3261d19e2a9e33fb5ac32241ef5fe71f" title=" " alt="" coords="285,290,432,317"/>
<area shape="rect" href="mmu_8c.html#a3e1cbf10ba62d93c99dffc655ec0282a" title=" " alt="" coords="284,341,433,367"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a329e4ae6a29cf76c6524ccc85279b8d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a329e4ae6a29cf76c6524ccc85279b8d6">&#9670;&nbsp;</a></span>allow_mmio_caching</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="vmx_8c.html#ab6223492e3b36a6075f580b1f43056d2">__ro_after_init</a> allow_mmio_caching</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00023">23</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="ad1f35c581f53d7ebf9ada1be6d5531ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1f35c581f53d7ebf9ada1be6d5531ad">&#9670;&nbsp;</a></span>enable_mmio_caching</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> enable_mmio_caching = true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00022">22</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="a1db70b0d38cd86029fc77525fa53d96a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1db70b0d38cd86029fc77525fa53d96a">&#9670;&nbsp;</a></span>shadow_acc_track_mask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_acc_track_mask</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00041">41</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="a1037a592d9e03bab1ce70a6e471901ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1037a592d9e03bab1ce70a6e471901ae">&#9670;&nbsp;</a></span>shadow_accessed_mask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_accessed_mask</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00032">32</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="a4da775a32ca03cd42a18da1e1aac568e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4da775a32ca03cd42a18da1e1aac568e">&#9670;&nbsp;</a></span>shadow_dirty_mask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_dirty_mask</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00033">33</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="a2539eaf9e6c788f2fa877c7e9e1c29a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2539eaf9e6c788f2fa877c7e9e1c29a8">&#9670;&nbsp;</a></span>shadow_host_writable_mask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_host_writable_mask</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00027">27</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="a880496effc639a427674eacc301593f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a880496effc639a427674eacc301593f3">&#9670;&nbsp;</a></span>shadow_me_mask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_me_mask</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00040">40</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="a1aea0c6f6f3fb8ec2b27d22b737e462c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1aea0c6f6f3fb8ec2b27d22b737e462c">&#9670;&nbsp;</a></span>shadow_me_value</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_me_value</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00039">39</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="a61bd7ce98c04ee184b3e600f8bbe1712"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61bd7ce98c04ee184b3e600f8bbe1712">&#9670;&nbsp;</a></span>shadow_memtype_mask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_memtype_mask</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00038">38</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="a598921f5a19013886e32dec8999ab00e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a598921f5a19013886e32dec8999ab00e">&#9670;&nbsp;</a></span>shadow_mmio_access_mask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_mmio_access_mask</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00036">36</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="a59be1c97d42d1a20cd3341c0133674f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59be1c97d42d1a20cd3341c0133674f7">&#9670;&nbsp;</a></span>shadow_mmio_mask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_mmio_mask</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00035">35</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="aff0e78f9604a10796d208995c28b1371"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff0e78f9604a10796d208995c28b1371">&#9670;&nbsp;</a></span>shadow_mmio_value</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_mmio_value</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00034">34</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="af450287cc0d83434644a34a9b938a250"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af450287cc0d83434644a34a9b938a250">&#9670;&nbsp;</a></span>shadow_mmu_writable_mask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_mmu_writable_mask</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00028">28</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="ad79ebd99e580b4e6fe8338ad43f3e6b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad79ebd99e580b4e6fe8338ad43f3e6b0">&#9670;&nbsp;</a></span>shadow_nonpresent_or_rsvd_lower_gfn_mask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_nonpresent_or_rsvd_lower_gfn_mask</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00044">44</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="a2d00cde16d32442591f9b96abcaadf94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d00cde16d32442591f9b96abcaadf94">&#9670;&nbsp;</a></span>shadow_nonpresent_or_rsvd_mask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_nonpresent_or_rsvd_mask</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00043">43</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="ac345c70889ab98d540472296de75aaa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac345c70889ab98d540472296de75aaa9">&#9670;&nbsp;</a></span>shadow_nx_mask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_nx_mask</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00029">29</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="a43d89b28f6285b7b34c137f70723565b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43d89b28f6285b7b34c137f70723565b">&#9670;&nbsp;</a></span>shadow_phys_bits</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_phys_bits</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00046">46</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="af8d723b5e0ffd2c2927bc5ab2ea5219e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8d723b5e0ffd2c2927bc5ab2ea5219e">&#9670;&nbsp;</a></span>shadow_present_mask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_present_mask</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00037">37</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="a88422204fa87484ebb6b1afe5657293e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88422204fa87484ebb6b1afe5657293e">&#9670;&nbsp;</a></span>shadow_user_mask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_user_mask</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00031">31</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="ae4b595f87e310029f3011955be43dc6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4b595f87e310029f3011955be43dc6d">&#9670;&nbsp;</a></span>shadow_x_mask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_x_mask</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00030">30</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
