<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KVM: arch/x86/kvm/mmu/mmu_internal.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KVM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_ea9599923402ca8ab47fc3e495999dea.html">arch</a></li><li class="navelem"><a class="el" href="dir_c21774f8bc9f0de15163573e5f5fa2b5.html">x86</a></li><li class="navelem"><a class="el" href="dir_fde450fd4b58e2560c53a1e73bfa4d6d.html">kvm</a></li><li class="navelem"><a class="el" href="dir_5b5419bab78eb3e26ed0c43edf6fed27.html">mmu</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">mmu_internal.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/types.h&gt;</code><br />
<code>#include &lt;linux/kvm_host.h&gt;</code><br />
<code>#include &lt;asm/kvm_host.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for mmu_internal.h:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h__incl.png" border="0" usemap="#aarch_2x86_2kvm_2mmu_2mmu__internal_8h" alt=""/></div>
<map name="aarch_2x86_2kvm_2mmu_2mmu__internal_8h" id="aarch_2x86_2kvm_2mmu_2mmu__internal_8h">
<area shape="rect" title=" " alt="" coords="111,5,297,47"/>
<area shape="rect" title=" " alt="" coords="5,95,112,121"/>
<area shape="rect" title=" " alt="" coords="137,95,271,121"/>
<area shape="rect" title=" " alt="" coords="296,95,427,121"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h__dep__incl.png" border="0" usemap="#aarch_2x86_2kvm_2mmu_2mmu__internal_8hdep" alt=""/></div>
<map name="aarch_2x86_2kvm_2mmu_2mmu__internal_8hdep" id="aarch_2x86_2kvm_2mmu_2mmu__internal_8hdep">
<area shape="rect" title=" " alt="" coords="471,5,658,47"/>
<area shape="rect" href="page__track_8c.html" title=" " alt="" coords="5,95,191,136"/>
<area shape="rect" href="debugfs_8c.html" title=" " alt="" coords="215,102,394,129"/>
<area shape="rect" href="spte_8c.html" title=" " alt="" coords="469,191,661,218"/>
<area shape="rect" href="spte_8h.html" title=" " alt="" coords="727,102,920,129"/>
<area shape="rect" href="tdp__iter_8c.html" title=" " alt="" coords="611,273,785,315"/>
<area shape="rect" href="tdp__mmu_8c.html" title=" " alt="" coords="907,273,1081,315"/>
<area shape="rect" href="mmu_8c.html" title=" " alt="" coords="1151,281,1349,307"/>
<area shape="rect" href="tdp__iter_8h.html" title=" " alt="" coords="736,184,911,225"/>
<area shape="rect" href="tdp__mmu_8h.html" title=" " alt="" coords="987,184,1161,225"/>
</map>
</div>
</div>
<p><a href="mmu__internal_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkvm__page__fault.html">kvm_page_fault</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a687a3432a6f9b4c6f600cb8b945ff3af"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a687a3432a6f9b4c6f600cb8b945ff3af">KVM_MMU_WARN_ON</a>(x)&#160;&#160;&#160;BUILD_BUG_ON_INVALID(x)</td></tr>
<tr class="separator:a687a3432a6f9b4c6f600cb8b945ff3af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b6970d6633932672fc70d928d33caf7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a4b6970d6633932672fc70d928d33caf7">__PT_BASE_ADDR_MASK</a>&#160;&#160;&#160;GENMASK_ULL(51, 12)</td></tr>
<tr class="separator:a4b6970d6633932672fc70d928d33caf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04121414999dc564561467fb67c56e20"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a04121414999dc564561467fb67c56e20">__PT_LEVEL_SHIFT</a>(level,  bits_per_level)&#160;&#160;&#160;	(PAGE_SHIFT + ((level) - 1) * (bits_per_level))</td></tr>
<tr class="separator:a04121414999dc564561467fb67c56e20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae517cada2296a9b8146861ea38acb20f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#ae517cada2296a9b8146861ea38acb20f">__PT_INDEX</a>(address,  level,  bits_per_level)&#160;&#160;&#160;	(((address) &gt;&gt; <a class="el" href="mmu__internal_8h.html#a04121414999dc564561467fb67c56e20">__PT_LEVEL_SHIFT</a>(level, bits_per_level)) &amp; ((1 &lt;&lt; (bits_per_level)) - 1))</td></tr>
<tr class="separator:ae517cada2296a9b8146861ea38acb20f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7834b038f6e9c92ecb58615b0dde56cb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a7834b038f6e9c92ecb58615b0dde56cb">__PT_LVL_ADDR_MASK</a>(base_addr_mask,  level,  bits_per_level)&#160;&#160;&#160;	((base_addr_mask) &amp; ~((1ULL &lt;&lt; (PAGE_SHIFT + (((level) - 1) * (bits_per_level)))) - 1))</td></tr>
<tr class="separator:a7834b038f6e9c92ecb58615b0dde56cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6693d6a5ca8c28c635e8e64d200ecd1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#ad6693d6a5ca8c28c635e8e64d200ecd1">__PT_LVL_OFFSET_MASK</a>(base_addr_mask,  level,  bits_per_level)&#160;&#160;&#160;	((base_addr_mask) &amp; ((1ULL &lt;&lt; (PAGE_SHIFT + (((level) - 1) * (bits_per_level)))) - 1))</td></tr>
<tr class="separator:ad6693d6a5ca8c28c635e8e64d200ecd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a199e92057728f48c65a7f4a50f20837c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a199e92057728f48c65a7f4a50f20837c">__PT_ENT_PER_PAGE</a>(bits_per_level)&#160;&#160;&#160;(1 &lt;&lt; (bits_per_level))</td></tr>
<tr class="separator:a199e92057728f48c65a7f4a50f20837c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f1ae2be3c5d65c1cf9f7e05a1b1865f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a8f1ae2be3c5d65c1cf9f7e05a1b1865f">INVALID_PAE_ROOT</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a8f1ae2be3c5d65c1cf9f7e05a1b1865f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14bc6bffc6f94f99aefd177e15fb6d90"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a14bc6bffc6f94f99aefd177e15fb6d90">IS_VALID_PAE_ROOT</a>(x)&#160;&#160;&#160;(!!(x))</td></tr>
<tr class="separator:a14bc6bffc6f94f99aefd177e15fb6d90"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a6798167b4e223d54b53a69a2c3c892c3"><td class="memItemLeft" align="right" valign="top">typedef u64 __rcu *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a6798167b4e223d54b53a69a2c3c892c3">tdp_ptep_t</a></td></tr>
<tr class="separator:a6798167b4e223d54b53a69a2c3c892c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ab04a0655cd1e3bcac5e8f48c18df1a57"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57ae095ef51afca86f2bdb6c756039c88fb">RET_PF_CONTINUE</a> = 0
, <a class="el" href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5f8c25625c45554fecc5a5b95e63a2e5">RET_PF_RETRY</a>
, <a class="el" href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57ad03187d2c9f578d70424cf6ecd860cc8">RET_PF_EMULATE</a>
, <a class="el" href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57a848d76ce4cf848d7b559313511e95513">RET_PF_INVALID</a>
, <br />
&#160;&#160;<a class="el" href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57abfabef9865271880389a5b0a0e3dbd60">RET_PF_FIXED</a>
, <a class="el" href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57adacf3084387ea47f12bc11e866c6ec99">RET_PF_SPURIOUS</a>
<br />
 }</td></tr>
<tr class="separator:ab04a0655cd1e3bcac5e8f48c18df1a57"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0eb4da3250f15ed351ae2f0acc485870"><td class="memItemLeft" align="right" valign="top">static hpa_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a0eb4da3250f15ed351ae2f0acc485870">kvm_mmu_get_dummy_root</a> (void)</td></tr>
<tr class="separator:a0eb4da3250f15ed351ae2f0acc485870"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6491934fd3538f608b4b91245943b6fc"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a6491934fd3538f608b4b91245943b6fc">kvm_mmu_is_dummy_root</a> (hpa_t shadow_page)</td></tr>
<tr class="separator:a6491934fd3538f608b4b91245943b6fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5334557775f77a151865c95f1cd224ac"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac">kvm_mmu_role_as_id</a> (union kvm_mmu_page_role role)</td></tr>
<tr class="separator:a5334557775f77a151865c95f1cd224ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a993d31328977f0bf21610ad74fa55a79"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a993d31328977f0bf21610ad74fa55a79">kvm_mmu_page_as_id</a> (struct <a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a> *sp)</td></tr>
<tr class="separator:a993d31328977f0bf21610ad74fa55a79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32da0c4cb2494f355e66aabe82bc1bb5"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a32da0c4cb2494f355e66aabe82bc1bb5">kvm_mmu_page_ad_need_write_protect</a> (struct <a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a> *sp)</td></tr>
<tr class="separator:a32da0c4cb2494f355e66aabe82bc1bb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8805295a6f11129455d5b87a86fd3db5"><td class="memItemLeft" align="right" valign="top">static gfn_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a8805295a6f11129455d5b87a86fd3db5">gfn_round_for_level</a> (gfn_t gfn, int level)</td></tr>
<tr class="separator:a8805295a6f11129455d5b87a86fd3db5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8846daf6e76a8d619fba16ff979245b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#af8846daf6e76a8d619fba16ff979245b">mmu_try_to_unsync_pages</a> (struct kvm *kvm, const struct kvm_memory_slot *slot, gfn_t gfn, bool can_unsync, bool prefetch)</td></tr>
<tr class="separator:af8846daf6e76a8d619fba16ff979245b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0ba561823d6dcc90bc489e0a51867a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#ae0ba561823d6dcc90bc489e0a51867a7">kvm_mmu_gfn_disallow_lpage</a> (const struct kvm_memory_slot *slot, gfn_t gfn)</td></tr>
<tr class="separator:ae0ba561823d6dcc90bc489e0a51867a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8726aec6b800501379c831dad5432043"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a8726aec6b800501379c831dad5432043">kvm_mmu_gfn_allow_lpage</a> (const struct kvm_memory_slot *slot, gfn_t gfn)</td></tr>
<tr class="separator:a8726aec6b800501379c831dad5432043"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f49638b71a482e4b0c3a6af10d0711e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a1f49638b71a482e4b0c3a6af10d0711e">kvm_mmu_slot_gfn_write_protect</a> (struct kvm *kvm, struct kvm_memory_slot *slot, u64 gfn, int min_level)</td></tr>
<tr class="separator:a1f49638b71a482e4b0c3a6af10d0711e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae152dfa402f5fe629bd4b1f4f931de1e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#ae152dfa402f5fe629bd4b1f4f931de1e">kvm_flush_remote_tlbs_gfn</a> (struct kvm *kvm, gfn_t gfn, int level)</td></tr>
<tr class="separator:ae152dfa402f5fe629bd4b1f4f931de1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dc99f06253cd18d05d8260cc30447ea"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a4dc99f06253cd18d05d8260cc30447ea">pte_list_count</a> (struct kvm_rmap_head *rmap_head)</td></tr>
<tr class="separator:a4dc99f06253cd18d05d8260cc30447ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a367cbfff40c5c72d6f19049da9fc51"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a8a367cbfff40c5c72d6f19049da9fc51">is_nx_huge_page_enabled</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a8a367cbfff40c5c72d6f19049da9fc51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bd7a8fd81e65c4e06e025d92c5787d9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a4bd7a8fd81e65c4e06e025d92c5787d9">kvm_tdp_page_fault</a> (struct kvm_vcpu *vcpu, struct <a class="el" href="structkvm__page__fault.html">kvm_page_fault</a> *fault)</td></tr>
<tr class="separator:a4bd7a8fd81e65c4e06e025d92c5787d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3c71be306692107b4d90bfb8d24d7f5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5">kvm_mmu_do_page_fault</a> (struct kvm_vcpu *vcpu, gpa_t cr2_or_gpa, u32 err, bool prefetch, int *emulation_type)</td></tr>
<tr class="separator:ae3c71be306692107b4d90bfb8d24d7f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a514b4601388e83cb56ffe210d5123b50"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a514b4601388e83cb56ffe210d5123b50">kvm_mmu_max_mapping_level</a> (struct kvm *kvm, const struct kvm_memory_slot *slot, gfn_t gfn, int max_level)</td></tr>
<tr class="separator:a514b4601388e83cb56ffe210d5123b50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3ace8d82fe9d5e1653277159c5ad4df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#ab3ace8d82fe9d5e1653277159c5ad4df">kvm_mmu_hugepage_adjust</a> (struct kvm_vcpu *vcpu, struct <a class="el" href="structkvm__page__fault.html">kvm_page_fault</a> *fault)</td></tr>
<tr class="separator:ab3ace8d82fe9d5e1653277159c5ad4df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae810dbeb6cd413090f54ca0cf864fe49"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#ae810dbeb6cd413090f54ca0cf864fe49">disallowed_hugepage_adjust</a> (struct <a class="el" href="structkvm__page__fault.html">kvm_page_fault</a> *fault, u64 spte, int cur_level)</td></tr>
<tr class="separator:ae810dbeb6cd413090f54ca0cf864fe49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2af71cd012ce4f9032d1fdab87110cca"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a2af71cd012ce4f9032d1fdab87110cca">mmu_memory_cache_alloc</a> (struct kvm_mmu_memory_cache *mc)</td></tr>
<tr class="separator:a2af71cd012ce4f9032d1fdab87110cca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3e86bf491c8c2726e3bc6702166cfdf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#ad3e86bf491c8c2726e3bc6702166cfdf">track_possible_nx_huge_page</a> (struct kvm *kvm, struct <a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a> *sp)</td></tr>
<tr class="separator:ad3e86bf491c8c2726e3bc6702166cfdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fba0b2dd67723bfbc4349ea7c8e019a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a2fba0b2dd67723bfbc4349ea7c8e019a">untrack_possible_nx_huge_page</a> (struct kvm *kvm, struct <a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a> *sp)</td></tr>
<tr class="separator:a2fba0b2dd67723bfbc4349ea7c8e019a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a3634b84158ea95896b7dcbbb228c309c"><td class="memItemLeft" align="right" valign="top">struct kmem_cache *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a3634b84158ea95896b7dcbbb228c309c">mmu_page_header_cache</a></td></tr>
<tr class="separator:a3634b84158ea95896b7dcbbb228c309c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44e186baf100df677a2d62072a7959ad"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu__internal_8h.html#a44e186baf100df677a2d62072a7959ad">nx_huge_pages</a></td></tr>
<tr class="separator:a44e186baf100df677a2d62072a7959ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a4b6970d6633932672fc70d928d33caf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b6970d6633932672fc70d928d33caf7">&#9670;&nbsp;</a></span>__PT_BASE_ADDR_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __PT_BASE_ADDR_MASK&#160;&#160;&#160;GENMASK_ULL(51, 12)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00016">16</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>

</div>
</div>
<a id="a199e92057728f48c65a7f4a50f20837c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a199e92057728f48c65a7f4a50f20837c">&#9670;&nbsp;</a></span>__PT_ENT_PER_PAGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __PT_ENT_PER_PAGE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bits_per_level</td><td>)</td>
          <td>&#160;&#160;&#160;(1 &lt;&lt; (bits_per_level))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00028">28</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>

</div>
</div>
<a id="ae517cada2296a9b8146861ea38acb20f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae517cada2296a9b8146861ea38acb20f">&#9670;&nbsp;</a></span>__PT_INDEX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __PT_INDEX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">address, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">level, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bits_per_level&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;	(((address) &gt;&gt; <a class="el" href="mmu__internal_8h.html#a04121414999dc564561467fb67c56e20">__PT_LEVEL_SHIFT</a>(level, bits_per_level)) &amp; ((1 &lt;&lt; (bits_per_level)) - 1))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00019">19</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>

</div>
</div>
<a id="a04121414999dc564561467fb67c56e20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04121414999dc564561467fb67c56e20">&#9670;&nbsp;</a></span>__PT_LEVEL_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __PT_LEVEL_SHIFT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">level, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bits_per_level&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;	(PAGE_SHIFT + ((level) - 1) * (bits_per_level))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00017">17</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>

</div>
</div>
<a id="a7834b038f6e9c92ecb58615b0dde56cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7834b038f6e9c92ecb58615b0dde56cb">&#9670;&nbsp;</a></span>__PT_LVL_ADDR_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __PT_LVL_ADDR_MASK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">base_addr_mask, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">level, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bits_per_level&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;	((base_addr_mask) &amp; ~((1ULL &lt;&lt; (PAGE_SHIFT + (((level) - 1) * (bits_per_level)))) - 1))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00022">22</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>

</div>
</div>
<a id="ad6693d6a5ca8c28c635e8e64d200ecd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6693d6a5ca8c28c635e8e64d200ecd1">&#9670;&nbsp;</a></span>__PT_LVL_OFFSET_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __PT_LVL_OFFSET_MASK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">base_addr_mask, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">level, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bits_per_level&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;	((base_addr_mask) &amp; ((1ULL &lt;&lt; (PAGE_SHIFT + (((level) - 1) * (bits_per_level)))) - 1))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00025">25</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>

</div>
</div>
<a id="a8f1ae2be3c5d65c1cf9f7e05a1b1865f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f1ae2be3c5d65c1cf9f7e05a1b1865f">&#9670;&nbsp;</a></span>INVALID_PAE_ROOT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INVALID_PAE_ROOT&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00037">37</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>

</div>
</div>
<a id="a14bc6bffc6f94f99aefd177e15fb6d90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14bc6bffc6f94f99aefd177e15fb6d90">&#9670;&nbsp;</a></span>IS_VALID_PAE_ROOT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IS_VALID_PAE_ROOT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;(!!(x))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00038">38</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>

</div>
</div>
<a id="a687a3432a6f9b4c6f600cb8b945ff3af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a687a3432a6f9b4c6f600cb8b945ff3af">&#9670;&nbsp;</a></span>KVM_MMU_WARN_ON</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_MMU_WARN_ON</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;BUILD_BUG_ON_INVALID(x)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00012">12</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a6798167b4e223d54b53a69a2c3c892c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6798167b4e223d54b53a69a2c3c892c3">&#9670;&nbsp;</a></span>tdp_ptep_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef u64 __rcu* <a class="el" href="mmu__internal_8h.html#a6798167b4e223d54b53a69a2c3c892c3">tdp_ptep_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00050">50</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ab04a0655cd1e3bcac5e8f48c18df1a57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab04a0655cd1e3bcac5e8f48c18df1a57">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ab04a0655cd1e3bcac5e8f48c18df1a57ae095ef51afca86f2bdb6c756039c88fb"></a>RET_PF_CONTINUE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab04a0655cd1e3bcac5e8f48c18df1a57a5f8c25625c45554fecc5a5b95e63a2e5"></a>RET_PF_RETRY&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab04a0655cd1e3bcac5e8f48c18df1a57ad03187d2c9f578d70424cf6ecd860cc8"></a>RET_PF_EMULATE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab04a0655cd1e3bcac5e8f48c18df1a57a848d76ce4cf848d7b559313511e95513"></a>RET_PF_INVALID&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab04a0655cd1e3bcac5e8f48c18df1a57abfabef9865271880389a5b0a0e3dbd60"></a>RET_PF_FIXED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab04a0655cd1e3bcac5e8f48c18df1a57adacf3084387ea47f12bc11e866c6ec99"></a>RET_PF_SPURIOUS&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00273">273</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;     {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57ae095ef51afca86f2bdb6c756039c88fb">RET_PF_CONTINUE</a> = 0,</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5f8c25625c45554fecc5a5b95e63a2e5">RET_PF_RETRY</a>,</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <a class="code" href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57ad03187d2c9f578d70424cf6ecd860cc8">RET_PF_EMULATE</a>,</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57a848d76ce4cf848d7b559313511e95513">RET_PF_INVALID</a>,</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57abfabef9865271880389a5b0a0e3dbd60">RET_PF_FIXED</a>,</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57adacf3084387ea47f12bc11e866c6ec99">RET_PF_SPURIOUS</a>,</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;};</div>
<div class="ttc" id="ammu__internal_8h_html_ab04a0655cd1e3bcac5e8f48c18df1a57a5f8c25625c45554fecc5a5b95e63a2e5"><div class="ttname"><a href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5f8c25625c45554fecc5a5b95e63a2e5">RET_PF_RETRY</a></div><div class="ttdeci">@ RET_PF_RETRY</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00275">mmu_internal.h:275</a></div></div>
<div class="ttc" id="ammu__internal_8h_html_ab04a0655cd1e3bcac5e8f48c18df1a57a848d76ce4cf848d7b559313511e95513"><div class="ttname"><a href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57a848d76ce4cf848d7b559313511e95513">RET_PF_INVALID</a></div><div class="ttdeci">@ RET_PF_INVALID</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00277">mmu_internal.h:277</a></div></div>
<div class="ttc" id="ammu__internal_8h_html_ab04a0655cd1e3bcac5e8f48c18df1a57abfabef9865271880389a5b0a0e3dbd60"><div class="ttname"><a href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57abfabef9865271880389a5b0a0e3dbd60">RET_PF_FIXED</a></div><div class="ttdeci">@ RET_PF_FIXED</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00278">mmu_internal.h:278</a></div></div>
<div class="ttc" id="ammu__internal_8h_html_ab04a0655cd1e3bcac5e8f48c18df1a57ad03187d2c9f578d70424cf6ecd860cc8"><div class="ttname"><a href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57ad03187d2c9f578d70424cf6ecd860cc8">RET_PF_EMULATE</a></div><div class="ttdeci">@ RET_PF_EMULATE</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00276">mmu_internal.h:276</a></div></div>
<div class="ttc" id="ammu__internal_8h_html_ab04a0655cd1e3bcac5e8f48c18df1a57adacf3084387ea47f12bc11e866c6ec99"><div class="ttname"><a href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57adacf3084387ea47f12bc11e866c6ec99">RET_PF_SPURIOUS</a></div><div class="ttdeci">@ RET_PF_SPURIOUS</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00279">mmu_internal.h:279</a></div></div>
<div class="ttc" id="ammu__internal_8h_html_ab04a0655cd1e3bcac5e8f48c18df1a57ae095ef51afca86f2bdb6c756039c88fb"><div class="ttname"><a href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57ae095ef51afca86f2bdb6c756039c88fb">RET_PF_CONTINUE</a></div><div class="ttdeci">@ RET_PF_CONTINUE</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00274">mmu_internal.h:274</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae810dbeb6cd413090f54ca0cf864fe49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae810dbeb6cd413090f54ca0cf864fe49">&#9670;&nbsp;</a></span>disallowed_hugepage_adjust()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void disallowed_hugepage_adjust </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__page__fault.html">kvm_page_fault</a> *&#160;</td>
          <td class="paramname"><em>fault</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>spte</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cur_level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l03216">3216</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;{</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    <span class="keywordflow">if</span> (cur_level &gt; PG_LEVEL_4K &amp;&amp;</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;        cur_level == fault-&gt;<a class="code" href="structkvm__page__fault.html#ad6705ad5f00efe4e9e47328860e9634a">goal_level</a> &amp;&amp;</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;        <a class="code" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686">is_shadow_present_pte</a>(spte) &amp;&amp;</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;        !<a class="code" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729">is_large_pte</a>(spte) &amp;&amp;</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;        <a class="code" href="spte_8h.html#af8791b1ec453ef3bce3c87ea28744692">spte_to_child_sp</a>(spte)-&gt;nx_huge_page_disallowed) {</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;<span class="comment">         * A small SPTE exists for this pfn, but FNAME(fetch),</span></div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;<span class="comment">         * direct_map(), or kvm_tdp_mmu_map() would like to create a</span></div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;<span class="comment">         * large PTE instead: just force them to go down another level,</span></div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;<span class="comment">         * patching back for them into pfn the next 9 bits of the</span></div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;<span class="comment">         * address.</span></div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;        u64 page_mask = KVM_PAGES_PER_HPAGE(cur_level) -</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;                KVM_PAGES_PER_HPAGE(cur_level - 1);</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;        fault-&gt;<a class="code" href="structkvm__page__fault.html#a784cc6d936bf4aa03731c0620e334553">pfn</a> |= fault-&gt;<a class="code" href="structkvm__page__fault.html#a27031ff0dd2c0b28283774456a29f066">gfn</a> &amp; page_mask;</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;        fault-&gt;<a class="code" href="structkvm__page__fault.html#ad6705ad5f00efe4e9e47328860e9634a">goal_level</a>--;</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;    }</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;}</div>
<div class="ttc" id="aspte_8h_html_a7d73c1cb0114320b9dab8ba78033c686"><div class="ttname"><a href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686">is_shadow_present_pte</a></div><div class="ttdeci">static bool is_shadow_present_pte(u64 pte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00258">spte.h:258</a></div></div>
<div class="ttc" id="aspte_8h_html_ae9b1a94fccf74f0837e1a775bc57d729"><div class="ttname"><a href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729">is_large_pte</a></div><div class="ttdeci">static bool is_large_pte(u64 pte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00313">spte.h:313</a></div></div>
<div class="ttc" id="aspte_8h_html_af8791b1ec453ef3bce3c87ea28744692"><div class="ttname"><a href="spte_8h.html#af8791b1ec453ef3bce3c87ea28744692">spte_to_child_sp</a></div><div class="ttdeci">static struct kvm_mmu_page * spte_to_child_sp(u64 spte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00230">spte.h:230</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_a27031ff0dd2c0b28283774456a29f066"><div class="ttname"><a href="structkvm__page__fault.html#a27031ff0dd2c0b28283774456a29f066">kvm_page_fault::gfn</a></div><div class="ttdeci">gfn_t gfn</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00233">mmu_internal.h:233</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_a784cc6d936bf4aa03731c0620e334553"><div class="ttname"><a href="structkvm__page__fault.html#a784cc6d936bf4aa03731c0620e334553">kvm_page_fault::pfn</a></div><div class="ttdeci">kvm_pfn_t pfn</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00240">mmu_internal.h:240</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_ad6705ad5f00efe4e9e47328860e9634a"><div class="ttname"><a href="structkvm__page__fault.html#ad6705ad5f00efe4e9e47328860e9634a">kvm_page_fault::goal_level</a></div><div class="ttdeci">u8 goal_level</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00230">mmu_internal.h:230</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_ae810dbeb6cd413090f54ca0cf864fe49_cgraph.png" border="0" usemap="#ammu__internal_8h_ae810dbeb6cd413090f54ca0cf864fe49_cgraph" alt=""/></div>
<map name="ammu__internal_8h_ae810dbeb6cd413090f54ca0cf864fe49_cgraph" id="ammu__internal_8h_ae810dbeb6cd413090f54ca0cf864fe49_cgraph">
<area shape="rect" title=" " alt="" coords="5,49,168,90"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="253,5,354,32"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="216,56,391,83"/>
<area shape="rect" href="spte_8h.html#af8791b1ec453ef3bce3c87ea28744692" title=" " alt="" coords="238,107,369,133"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="439,107,569,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_ae810dbeb6cd413090f54ca0cf864fe49_icgraph.png" border="0" usemap="#ammu__internal_8h_ae810dbeb6cd413090f54ca0cf864fe49_icgraph" alt=""/></div>
<map name="ammu__internal_8h_ae810dbeb6cd413090f54ca0cf864fe49_icgraph" id="ammu__internal_8h_ae810dbeb6cd413090f54ca0cf864fe49_icgraph">
<area shape="rect" title=" " alt="" coords="2061,682,2224,723"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="1888,639,1983,665"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="1908,689,1963,716"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="1857,740,2013,767"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1675,639,1809,665"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="1466,613,1621,640"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="1460,664,1627,691"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="1243,613,1391,640"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="1221,237,1412,264"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="1015,613,1135,640"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="255,1060,427,1087"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="731,765,919,792"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="505,613,645,640"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="744,487,907,513"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="743,360,907,387"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="5,1060,205,1087"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="526,933,625,960"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="522,984,629,1011"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="293,740,389,767"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="476,816,675,843"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="505,664,645,691"/>
<area shape="rect" href="smm_8c.html#a5382946234c910e05c6e2c09aff15713" title=" " alt="" coords="499,765,652,792"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="511,1035,640,1061"/>
<area shape="rect" href="vmx_2nested_8c.html#a001f930db9a867e828cf01b48d3e4e25" title=" " alt="" coords="498,867,653,909"/>
<area shape="rect" href="x86_8c.html#a420caf80521ab8d6ef7218d5dd26d47f" title=" " alt="" coords="538,563,613,589"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="307,664,374,691"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="288,613,393,640"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="253,385,428,412"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="486,411,665,437"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="498,461,653,488"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="491,512,659,539"/>
<area shape="rect" href="vmx_2nested_8c.html#a06a397c328d1656bb4d3ab073878e6f0" title=" " alt="" coords="484,309,667,336"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="510,360,641,387"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="989,230,1160,271"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="991,107,1159,133"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="745,230,906,271"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="507,259,644,285"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="743,157,907,184"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="746,5,905,32"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="736,56,915,83"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="761,107,889,133"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="501,157,649,184"/>
<area shape="rect" href="vmx_8c.html#a7a38ddbd01bec99bf94ab4868ad4c6ea" title=" " alt="" coords="491,5,660,32"/>
<area shape="rect" href="svm_8c.html#a589e870c8a06d1ba26f24da299e47b95" title=" " alt="" coords="515,56,635,83"/>
<area shape="rect" href="svm_8c.html#a8afafecae406016532810194f187fe2c" title=" " alt="" coords="481,107,669,133"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="1229,900,1404,927"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="976,1136,1173,1163"/>
<area shape="rect" href="mmu_8c.html#a3e794d802eeb843cd6d7b699b74d8bf3" title=" " alt="" coords="737,1136,914,1163"/>
<area shape="rect" href="mmu_8c.html#a00f26353045c597f6a49cdd4f239f548" title=" " alt="" coords="723,1187,928,1213"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1697,689,1787,716"/>
</map>
</div>

</div>
</div>
<a id="a8805295a6f11129455d5b87a86fd3db5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8805295a6f11129455d5b87a86fd3db5">&#9670;&nbsp;</a></span>gfn_round_for_level()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static gfn_t gfn_round_for_level </td>
          <td>(</td>
          <td class="paramtype">gfn_t&#160;</td>
          <td class="paramname"><em>gfn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00161">161</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;{</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">return</span> gfn &amp; -KVM_PAGES_PER_HPAGE(level);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_a8805295a6f11129455d5b87a86fd3db5_icgraph.png" border="0" usemap="#ammu__internal_8h_a8805295a6f11129455d5b87a86fd3db5_icgraph" alt=""/></div>
<map name="ammu__internal_8h_a8805295a6f11129455d5b87a86fd3db5_icgraph" id="ammu__internal_8h_a8805295a6f11129455d5b87a86fd3db5_icgraph">
<area shape="rect" title=" " alt="" coords="2659,460,2809,487"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="1389,191,1483,217"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="893,140,1047,167"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="716,419,771,445"/>
<area shape="rect" href="mmu__internal_8h.html#ae152dfa402f5fe629bd4b1f4f931de1e" title=" " alt="" coords="2408,460,2611,487"/>
<area shape="rect" href="tdp__iter_8c.html#af4b66dc30c8f261c500b78382bd3c73f" title=" " alt="" coords="2448,692,2571,719"/>
<area shape="rect" href="tdp__iter_8c.html#ac33361f92b725eb2260a76750b57e820" title=" " alt="" coords="2451,527,2568,553"/>
<area shape="rect" href="tdp__iter_8c.html#a2c7652570e5b5290b9ad645630208b4f" title=" " alt="" coords="2460,611,2559,637"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1121,191,1255,217"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="887,191,1053,217"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="669,85,817,112"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="648,140,839,167"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="455,81,575,108"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="201,5,373,32"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="193,107,381,133"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="5,81,145,108"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="206,157,369,184"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="429,133,600,174"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="431,199,599,225"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="656,191,831,217"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="469,419,560,445"/>
<area shape="rect" href="mmu_8c.html#ab5f27c8f9a6f98a60c79163bf82f3c35" title=" " alt="" coords="2209,511,2310,537"/>
<area shape="rect" href="mmu_8c.html#a8fc6edfe7bd2a5a7d47952232ea5b8a1" title=" " alt="" coords="1653,444,1772,471"/>
<area shape="rect" href="mmu_8c.html#aec5cf4265713109c5e2ea673c610cd03" title=" " alt="" coords="2186,409,2333,436"/>
<area shape="rect" href="mmu_8c.html#a67c0ad9273ae2d50d1dde3ace9bbd647" title=" " alt="" coords="2172,575,2347,617"/>
<area shape="rect" href="mmu_8c.html#a896287d2c20890911385b8c4e905f803" title=" " alt="" coords="2186,292,2333,319"/>
<area shape="rect" href="tdp__mmu_8c.html#aa98226578ebe207e97e262a86bbd5427" title=" " alt="" coords="2174,343,2345,385"/>
<area shape="rect" href="tdp__mmu_8c.html#ab901a77cd00a4e809baa9a25e289b59d" title=" " alt="" coords="2159,641,2360,668"/>
<area shape="rect" href="mmu_8c.html#a99dcfa860adefe29091d745ea78fc065" title=" " alt="" coords="1950,495,2037,521"/>
<area shape="rect" href="mmu_8c.html#abe6e7771da6f6df50052156316535466" title=" " alt="" coords="1323,589,1549,616"/>
<area shape="rect" href="mmu_8c.html#aab93e6e4502a54b3d61492f0e052e358" title=" " alt="" coords="1340,444,1532,471"/>
<area shape="rect" href="paging__tmpl_8h.html#ac251b8f404f8fa0840ec5f4db44a6480" title=" " alt="" coords="1380,495,1492,521"/>
<area shape="rect" href="mmu_8c.html#a269190dc46a1af3d04b9e039944d85b9" title=" " alt="" coords="1107,444,1269,471"/>
<area shape="rect" href="paging__tmpl_8h.html#a53f0634ff017bc46ff621fdad18cdcd4" title=" " alt="" coords="918,444,1022,471"/>
<area shape="rect" href="mmu_8c.html#a03732600ed110f429f4a2d526a303bcb" title=" " alt="" coords="1101,582,1275,623"/>
<area shape="rect" href="mmu_8c.html#a6f305a17525ee7345f0f852070869e4c" title=" " alt="" coords="1880,393,2107,420"/>
<area shape="rect" href="mmu_8c.html#a1ade612e5d4a58575df9428f6ad72bb9" title=" " alt="" coords="1597,393,1828,420"/>
<area shape="rect" href="mmu_8c.html#a182d50b0d6d7be3301d249ba97a8152f" title=" " alt="" coords="1886,648,2101,675"/>
<area shape="rect" href="mmu_8c.html#a4634f2893dd92f1cca61da172add4618" title=" " alt="" coords="1930,703,2057,729"/>
<area shape="rect" href="mmu_8c.html#a9894c31f8b002070c4d2e81846bed206" title=" " alt="" coords="1876,596,2111,623"/>
<area shape="rect" href="mmu_8c.html#a1a568d3fb7f4f72773dd93def94c6de5" title=" " alt="" coords="1111,720,1265,747"/>
<area shape="rect" href="mmu_8c.html#a728d88795e69d91605885d769ebc7959" title=" " alt="" coords="1613,653,1813,680"/>
<area shape="rect" href="mmu_8c.html#a4a92071a0225bffad8c0336453d7433d" title=" " alt="" coords="1635,704,1791,731"/>
<area shape="rect" href="mmu_8c.html#a5df94d1035651e654323995253a32292" title=" " alt="" coords="1613,587,1812,629"/>
<area shape="rect" href="mmu_8c.html#a978186d69e4a1b753b9650294d80ca7d" title=" " alt="" coords="1923,292,2064,319"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="1915,343,2071,369"/>
<area shape="rect" href="tdp__mmu_8c.html#ac72a38de4d0b8a5cfeace82f10cc4caf" title=" " alt="" coords="1915,806,2072,847"/>
<area shape="rect" href="tdp__mmu_8c.html#a3a86994ba17144f60df37ea7682d650b" title=" " alt="" coords="1599,806,1826,847"/>
<area shape="rect" href="tdp__iter_8c.html#a8acf7109400135dbba38aced135d44d8" title=" " alt="" coords="2205,692,2313,719"/>
<area shape="rect" href="tdp__iter_8c.html#ab290f5fe97e3911e3861f3c6035279b9" title=" " alt="" coords="2205,743,2314,769"/>
</map>
</div>

</div>
</div>
<a id="a8a367cbfff40c5c72d6f19049da9fc51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a367cbfff40c5c72d6f19049da9fc51">&#9670;&nbsp;</a></span>is_nx_huge_page_enabled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool is_nx_huge_page_enabled </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00185">185</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;{</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">return</span> READ_ONCE(<a class="code" href="mmu__internal_8h.html#a44e186baf100df677a2d62072a7959ad">nx_huge_pages</a>) &amp;&amp; !kvm-&gt;arch.disable_nx_huge_pages;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div>
<div class="ttc" id="ammu__internal_8h_html_a44e186baf100df677a2d62072a7959ad"><div class="ttname"><a href="mmu__internal_8h.html#a44e186baf100df677a2d62072a7959ad">nx_huge_pages</a></div><div class="ttdeci">int nx_huge_pages</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l00064">mmu.c:64</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_a8a367cbfff40c5c72d6f19049da9fc51_icgraph.png" border="0" usemap="#ammu__internal_8h_a8a367cbfff40c5c72d6f19049da9fc51_icgraph" alt=""/></div>
<map name="ammu__internal_8h_a8a367cbfff40c5c72d6f19049da9fc51_icgraph" id="ammu__internal_8h_a8a367cbfff40c5c72d6f19049da9fc51_icgraph">
<area shape="rect" title=" " alt="" coords="3220,391,3413,417"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="1127,221,1317,248"/>
<area shape="rect" href="spte_8c.html#adc3a08f029fff6aaf2bf687edf69410f" title=" " alt="" coords="2965,508,3172,535"/>
<area shape="rect" href="spte_8c.html#ab8dba69ef9f5267d41ba061dbe101ded" title=" " alt="" coords="3022,391,3115,417"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="908,159,1079,201"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="909,251,1077,277"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="690,134,851,175"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="452,81,627,108"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="471,145,608,172"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="278,5,359,32"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="264,56,373,83"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="263,107,374,133"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="278,157,359,184"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="5,157,192,184"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="689,353,853,380"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="691,200,850,227"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="681,251,860,277"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="707,301,835,328"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="465,356,613,383"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="251,376,386,403"/>
<area shape="rect" href="vmx_8c.html#a7a38ddbd01bec99bf94ab4868ad4c6ea" title=" " alt="" coords="455,251,624,277"/>
<area shape="rect" href="svm_8c.html#a589e870c8a06d1ba26f24da299e47b95" title=" " alt="" coords="479,200,599,227"/>
<area shape="rect" href="svm_8c.html#a8afafecae406016532810194f187fe2c" title=" " alt="" coords="445,301,633,328"/>
<area shape="rect" href="sev_8c.html#aac550422551b71c0afe8efe176e0b55d" title=" " alt="" coords="20,237,177,264"/>
<area shape="rect" href="sev_8c.html#ae483e70b55c68f5a2405263543ce3737" title=" " alt="" coords="240,259,397,301"/>
<area shape="rect" href="svm_8c.html#a3f8983432f4aae138a6f4d167c561132" title=" " alt="" coords="252,325,385,352"/>
<area shape="rect" href="mmu_8c.html#abe6e7771da6f6df50052156316535466" title=" " alt="" coords="2691,565,2917,592"/>
<area shape="rect" href="tdp__mmu_8c.html#acf7d062eca8e6190d76f4934c290be61" title=" " alt="" coords="2705,508,2903,535"/>
<area shape="rect" href="mmu_8c.html#a03732600ed110f429f4a2d526a303bcb" title=" " alt="" coords="2460,566,2633,607"/>
<area shape="rect" href="mmu_8c.html#a2e109b8775cdfe9924c3d331ac5f332f" title=" " alt="" coords="2229,566,2403,607"/>
<area shape="rect" href="mmu_8c.html#adfe576663ff84a7b51773d87e91dd28a" title=" " alt="" coords="2004,566,2179,607"/>
<area shape="rect" href="mmu_8c.html#a073d9b7de8eaf977452c1eb7395a78d6" title=" " alt="" coords="1767,566,1949,607"/>
<area shape="rect" href="mmu_8c.html#a6abdd1728810c3f3ab8c2e1e6d2d37f0" title=" " alt="" coords="1763,501,1953,542"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="2469,449,2625,476"/>
<area shape="rect" href="tdp__mmu_8c.html#afa070d8c089f8547cfc2dbafa856e99c" title=" " alt="" coords="2467,501,2626,542"/>
<area shape="rect" href="tdp__mmu_8c.html#a57310f6ad7e70c13dadcfd30aa71af6d" title=" " alt="" coords="2001,501,2181,542"/>
<area shape="rect" href="mmu_8c.html#a8fc6edfe7bd2a5a7d47952232ea5b8a1" title=" " alt="" coords="2745,340,2863,367"/>
<area shape="rect" href="paging__tmpl_8h.html#a189517b8079c307a0aef9f58dc8c7a25" title=" " alt="" coords="2761,391,2847,417"/>
<area shape="rect" href="tdp__mmu_8c.html#aa98226578ebe207e97e262a86bbd5427" title=" " alt="" coords="2719,442,2889,483"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="1811,272,1905,299"/>
<area shape="rect" href="mmu_8c.html#aab93e6e4502a54b3d61492f0e052e358" title=" " alt="" coords="2451,297,2643,324"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="1831,373,1885,400"/>
<area shape="rect" href="paging__tmpl_8h.html#ac251b8f404f8fa0840ec5f4db44a6480" title=" " alt="" coords="2260,348,2372,375"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1580,272,1715,299"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="1371,247,1526,273"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="1365,297,1532,324"/>
<area shape="rect" href="mmu_8c.html#a269190dc46a1af3d04b9e039944d85b9" title=" " alt="" coords="2235,297,2397,324"/>
<area shape="rect" href="mmu_8c.html#a5a96624b696225b4bc6c90caea946cb0" title=" " alt="" coords="2017,297,2165,324"/>
<area shape="rect" href="paging__tmpl_8h.html#a53f0634ff017bc46ff621fdad18cdcd4" title=" " alt="" coords="2039,348,2143,375"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1602,373,1693,400"/>
</map>
</div>

</div>
</div>
<a id="ae152dfa402f5fe629bd4b1f4f931de1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae152dfa402f5fe629bd4b1f4f931de1e">&#9670;&nbsp;</a></span>kvm_flush_remote_tlbs_gfn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_flush_remote_tlbs_gfn </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfn_t&#160;</td>
          <td class="paramname"><em>gfn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00176">176</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;{</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="kvm__main_8c.html#a523d3c698dd532d3fbc1bb046246ea5f">kvm_flush_remote_tlbs_range</a>(kvm, <a class="code" href="mmu__internal_8h.html#a8805295a6f11129455d5b87a86fd3db5">gfn_round_for_level</a>(gfn, level),</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                    KVM_PAGES_PER_HPAGE(level));</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_a523d3c698dd532d3fbc1bb046246ea5f"><div class="ttname"><a href="kvm__main_8c.html#a523d3c698dd532d3fbc1bb046246ea5f">kvm_flush_remote_tlbs_range</a></div><div class="ttdeci">void kvm_flush_remote_tlbs_range(struct kvm *kvm, gfn_t gfn, u64 nr_pages)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l00367">kvm_main.c:367</a></div></div>
<div class="ttc" id="ammu__internal_8h_html_a8805295a6f11129455d5b87a86fd3db5"><div class="ttname"><a href="mmu__internal_8h.html#a8805295a6f11129455d5b87a86fd3db5">gfn_round_for_level</a></div><div class="ttdeci">static gfn_t gfn_round_for_level(gfn_t gfn, int level)</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00161">mmu_internal.h:161</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_ae152dfa402f5fe629bd4b1f4f931de1e_cgraph.png" border="0" usemap="#ammu__internal_8h_ae152dfa402f5fe629bd4b1f4f931de1e_cgraph" alt=""/></div>
<map name="ammu__internal_8h_ae152dfa402f5fe629bd4b1f4f931de1e_cgraph" id="ammu__internal_8h_ae152dfa402f5fe629bd4b1f4f931de1e_cgraph">
<area shape="rect" title=" " alt="" coords="5,35,208,61"/>
<area shape="rect" href="mmu__internal_8h.html#a8805295a6f11129455d5b87a86fd3db5" title=" " alt="" coords="268,5,419,32"/>
<area shape="rect" href="kvm__main_8c.html#a523d3c698dd532d3fbc1bb046246ea5f" title=" " alt="" coords="256,57,431,98"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="479,64,653,91"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="701,64,912,91"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="960,57,1171,98"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="1229,39,1396,65"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="1219,89,1407,116"/>
<area shape="rect" href="kvm__main_8c.html#a7682302871243c20a5dd16214655db15" title=" " alt="" coords="1503,39,1582,65"/>
<area shape="rect" href="kvm__main_8c.html#a9316cc70360fb39d920d5c76a2e41f35" title=" " alt="" coords="1455,89,1631,116"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1466,140,1619,167"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_ae152dfa402f5fe629bd4b1f4f931de1e_icgraph.png" border="0" usemap="#ammu__internal_8h_ae152dfa402f5fe629bd4b1f4f931de1e_icgraph" alt=""/></div>
<map name="ammu__internal_8h_ae152dfa402f5fe629bd4b1f4f931de1e_icgraph" id="ammu__internal_8h_ae152dfa402f5fe629bd4b1f4f931de1e_icgraph">
<area shape="rect" title=" " alt="" coords="2319,327,2521,354"/>
<area shape="rect" href="mmu_8c.html#ab5f27c8f9a6f98a60c79163bf82f3c35" title=" " alt="" coords="2119,226,2221,252"/>
<area shape="rect" href="mmu_8c.html#a8fc6edfe7bd2a5a7d47952232ea5b8a1" title=" " alt="" coords="1572,251,1691,278"/>
<area shape="rect" href="mmu_8c.html#aec5cf4265713109c5e2ea673c610cd03" title=" " alt="" coords="2097,124,2243,151"/>
<area shape="rect" href="mmu_8c.html#a67c0ad9273ae2d50d1dde3ace9bbd647" title=" " alt="" coords="1544,421,1719,462"/>
<area shape="rect" href="mmu_8c.html#a896287d2c20890911385b8c4e905f803" title=" " alt="" coords="2097,428,2243,455"/>
<area shape="rect" href="tdp__mmu_8c.html#aa98226578ebe207e97e262a86bbd5427" title=" " alt="" coords="2085,480,2255,521"/>
<area shape="rect" href="tdp__mmu_8c.html#ab901a77cd00a4e809baa9a25e289b59d" title=" " alt="" coords="2069,378,2271,404"/>
<area shape="rect" href="mmu_8c.html#a99dcfa860adefe29091d745ea78fc065" title=" " alt="" coords="1865,226,1951,252"/>
<area shape="rect" href="mmu_8c.html#abe6e7771da6f6df50052156316535466" title=" " alt="" coords="711,74,937,100"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="509,200,603,227"/>
<area shape="rect" href="mmu_8c.html#aab93e6e4502a54b3d61492f0e052e358" title=" " alt="" coords="1255,226,1447,252"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="529,352,583,379"/>
<area shape="rect" href="paging__tmpl_8h.html#ac251b8f404f8fa0840ec5f4db44a6480" title=" " alt="" coords="1295,276,1407,303"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="247,200,382,227"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="15,226,170,252"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="9,175,176,202"/>
<area shape="rect" href="mmu_8c.html#a269190dc46a1af3d04b9e039944d85b9" title=" " alt="" coords="1004,276,1167,303"/>
<area shape="rect" href="mmu_8c.html#a5a96624b696225b4bc6c90caea946cb0" title=" " alt="" coords="750,276,898,303"/>
<area shape="rect" href="paging__tmpl_8h.html#a53f0634ff017bc46ff621fdad18cdcd4" title=" " alt="" coords="772,327,876,354"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="269,392,360,419"/>
<area shape="rect" href="mmu_8c.html#a03732600ed110f429f4a2d526a303bcb" title=" " alt="" coords="469,66,643,108"/>
<area shape="rect" href="mmu_8c.html#a2e109b8775cdfe9924c3d331ac5f332f" title=" " alt="" coords="228,66,401,108"/>
<area shape="rect" href="mmu_8c.html#adfe576663ff84a7b51773d87e91dd28a" title=" " alt="" coords="5,66,180,108"/>
<area shape="rect" href="mmu_8c.html#a6f305a17525ee7345f0f852070869e4c" title=" " alt="" coords="1795,23,2021,50"/>
<area shape="rect" href="mmu_8c.html#a1ade612e5d4a58575df9428f6ad72bb9" title=" " alt="" coords="1516,23,1747,50"/>
<area shape="rect" href="mmu_8c.html#a0afaf010cb78207cd01091773878f1f2" title=" " alt="" coords="1269,23,1432,50"/>
<area shape="rect" href="mmu_8c.html#a0ebfdae56a33b8ca22e8fa22268fe033" title=" " alt="" coords="991,8,1179,49"/>
<area shape="rect" href="mmu_8c.html#aa0069ee555cb7a0001ed142edc326369" title=" " alt="" coords="734,175,914,202"/>
<area shape="rect" href="mmu_8c.html#a182d50b0d6d7be3301d249ba97a8152f" title=" " alt="" coords="1243,491,1458,518"/>
<area shape="rect" href="mmu_8c.html#a4634f2893dd92f1cca61da172add4618" title=" " alt="" coords="1287,327,1414,354"/>
<area shape="rect" href="mmu_8c.html#a9894c31f8b002070c4d2e81846bed206" title=" " alt="" coords="1233,567,1468,594"/>
<area shape="rect" href="mmu_8c.html#a1a568d3fb7f4f72773dd93def94c6de5" title=" " alt="" coords="1008,428,1163,455"/>
<area shape="rect" href="mmu_8c.html#a728d88795e69d91605885d769ebc7959" title=" " alt="" coords="985,530,1185,556"/>
<area shape="rect" href="x86_8c.html#a8bbfd08c002f2e09b42bb56cd8f52653" title=" " alt="" coords="743,632,905,673"/>
<area shape="rect" href="mmu_8c.html#a3d158ec2a822d6af200cd30ed59b4ef6" title=" " alt="" coords="755,530,893,556"/>
<area shape="rect" href="mmu_8c.html#a3b8a9cd97346da0584f14387a0f7828e" title=" " alt="" coords="735,580,913,607"/>
<area shape="rect" href="vmx_2nested_8c.html#a926cef8fbad0065f5ec5c487001ccb63" title=" " alt="" coords="723,479,925,506"/>
<area shape="rect" href="sgx_8c.html#a64209d7a6548174cb6fae30a7a26a194" title=" " alt="" coords="233,690,396,716"/>
<area shape="rect" href="x86_8c.html#a031a116c2f53928292fd79cb4405352e" title=" " alt="" coords="457,563,655,590"/>
<area shape="rect" href="x86_8c.html#a918fccc2a3b0a8c2fe80ed713b144e36" title=" " alt="" coords="449,614,663,640"/>
<area shape="rect" href="sgx_8c.html#a5895e54d2dd1cff9e25347a1331ff19b" title=" " alt="" coords="493,715,619,742"/>
<area shape="rect" href="mmu_8c.html#a4a92071a0225bffad8c0336453d7433d" title=" " alt="" coords="1007,226,1163,252"/>
<area shape="rect" href="mmu_8c.html#a66e1553cd71750b6b4d9e4b6e7764a2b" title=" " alt="" coords="753,226,895,252"/>
<area shape="rect" href="mmu_8c.html#a5df94d1035651e654323995253a32292" title=" " alt="" coords="986,596,1185,637"/>
<area shape="rect" href="mmu_8c.html#a35da5538a61de05522efdad8f615df4f" title=" " alt="" coords="725,697,923,738"/>
<area shape="rect" href="mmu_8c.html#a978186d69e4a1b753b9650294d80ca7d" title=" " alt="" coords="1837,428,1979,455"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="1830,487,1986,514"/>
<area shape="rect" href="tdp__mmu_8c.html#ac72a38de4d0b8a5cfeace82f10cc4caf" title=" " alt="" coords="1553,622,1710,664"/>
<area shape="rect" href="tdp__mmu_8c.html#a3a86994ba17144f60df37ea7682d650b" title=" " alt="" coords="1237,669,1464,710"/>
</map>
</div>

</div>
</div>
<a id="ae3c71be306692107b4d90bfb8d24d7f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3c71be306692107b4d90bfb8d24d7f5">&#9670;&nbsp;</a></span>kvm_mmu_do_page_fault()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kvm_mmu_do_page_fault </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpa_t&#160;</td>
          <td class="paramname"><em>cr2_or_gpa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>err</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>prefetch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>emulation_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00282">282</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;{</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__page__fault.html">kvm_page_fault</a> fault = {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        .<a class="code" href="structkvm__page__fault.html#ad365933476cc66359bfc9233440ddab0">addr</a> = cr2_or_gpa,</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        .error_code = err,</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        .exec = err &amp; PFERR_FETCH_MASK,</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        .write = err &amp; PFERR_WRITE_MASK,</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        .present = err &amp; PFERR_PRESENT_MASK,</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        .rsvd = err &amp; PFERR_RSVD_MASK,</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        .user = err &amp; PFERR_USER_MASK,</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        .prefetch = <a class="code" href="structkvm__page__fault.html#a2226254b058797ac61a2b5347d1877bd">prefetch</a>,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        .is_tdp = likely(vcpu-&gt;arch.mmu-&gt;page_fault == <a class="code" href="mmu__internal_8h.html#a4bd7a8fd81e65c4e06e025d92c5787d9">kvm_tdp_page_fault</a>),</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        .nx_huge_page_workaround_enabled =</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <a class="code" href="mmu__internal_8h.html#a8a367cbfff40c5c72d6f19049da9fc51">is_nx_huge_page_enabled</a>(vcpu-&gt;kvm),</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        .max_level = KVM_MAX_HUGEPAGE_LEVEL,</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        .req_level = PG_LEVEL_4K,</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        .goal_level = PG_LEVEL_4K,</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        .is_private = kvm_mem_is_private(vcpu-&gt;kvm, cr2_or_gpa &gt;&gt; PAGE_SHIFT),</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    };</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">if</span> (vcpu-&gt;arch.mmu-&gt;root_role.direct) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        fault.<a class="code" href="structkvm__page__fault.html#a27031ff0dd2c0b28283774456a29f066">gfn</a> = fault.<a class="code" href="structkvm__page__fault.html#ad365933476cc66359bfc9233440ddab0">addr</a> &gt;&gt; PAGE_SHIFT;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        fault.<a class="code" href="structkvm__page__fault.html#a94ca2315c94da3e5ab0273b78ff6da3a">slot</a> = <a class="code" href="kvm__main_8c.html#ac4b56de4919be80c9cd4289f20437c64">kvm_vcpu_gfn_to_memslot</a>(vcpu, fault.<a class="code" href="structkvm__page__fault.html#a27031ff0dd2c0b28283774456a29f066">gfn</a>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">     * Async #PF &quot;faults&quot;, a.k.a. prefetch faults, are not faults from the</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">     * guest perspective and have already been counted at the time of the</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">     * original fault.</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structkvm__page__fault.html#a2226254b058797ac61a2b5347d1877bd">prefetch</a>)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        vcpu-&gt;stat.pf_taken++;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">if</span> (IS_ENABLED(CONFIG_RETPOLINE) &amp;&amp; fault.<a class="code" href="structkvm__page__fault.html#a76a59490f94982c504342f55b98fa989">is_tdp</a>)</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        r = <a class="code" href="mmu__internal_8h.html#a4bd7a8fd81e65c4e06e025d92c5787d9">kvm_tdp_page_fault</a>(vcpu, &amp;fault);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        r = vcpu-&gt;arch.mmu-&gt;page_fault(vcpu, &amp;fault);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">if</span> (fault.<a class="code" href="structkvm__page__fault.html#a126cca48df9411a45bb88d3c1a74d95c">write_fault_to_shadow_pgtable</a> &amp;&amp; emulation_type)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        *emulation_type |= EMULTYPE_WRITE_PF_TO_SP;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">     * Similar to above, prefetch faults aren&#39;t truly spurious, and the</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">     * async #PF path doesn&#39;t do emulation.  Do count faults that are fixed</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">     * by the async #PF handler though, otherwise they&#39;ll never be counted.</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">if</span> (r == <a class="code" href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57abfabef9865271880389a5b0a0e3dbd60">RET_PF_FIXED</a>)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        vcpu-&gt;stat.pf_fixed++;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structkvm__page__fault.html#a2226254b058797ac61a2b5347d1877bd">prefetch</a>)</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        ;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r == <a class="code" href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57ad03187d2c9f578d70424cf6ecd860cc8">RET_PF_EMULATE</a>)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        vcpu-&gt;stat.pf_emulate++;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r == <a class="code" href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57adacf3084387ea47f12bc11e866c6ec99">RET_PF_SPURIOUS</a>)</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        vcpu-&gt;stat.pf_spurious++;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_ac4b56de4919be80c9cd4289f20437c64"><div class="ttname"><a href="kvm__main_8c.html#ac4b56de4919be80c9cd4289f20437c64">kvm_vcpu_gfn_to_memslot</a></div><div class="ttdeci">struct kvm_memory_slot * kvm_vcpu_gfn_to_memslot(struct kvm_vcpu *vcpu, gfn_t gfn)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l02636">kvm_main.c:2636</a></div></div>
<div class="ttc" id="ammu__internal_8h_html_a4bd7a8fd81e65c4e06e025d92c5787d9"><div class="ttname"><a href="mmu__internal_8h.html#a4bd7a8fd81e65c4e06e025d92c5787d9">kvm_tdp_page_fault</a></div><div class="ttdeci">int kvm_tdp_page_fault(struct kvm_vcpu *vcpu, struct kvm_page_fault *fault)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l04623">mmu.c:4623</a></div></div>
<div class="ttc" id="ammu__internal_8h_html_a8a367cbfff40c5c72d6f19049da9fc51"><div class="ttname"><a href="mmu__internal_8h.html#a8a367cbfff40c5c72d6f19049da9fc51">is_nx_huge_page_enabled</a></div><div class="ttdeci">static bool is_nx_huge_page_enabled(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00185">mmu_internal.h:185</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html"><div class="ttname"><a href="structkvm__page__fault.html">kvm_page_fault</a></div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00190">mmu_internal.h:190</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_a126cca48df9411a45bb88d3c1a74d95c"><div class="ttname"><a href="structkvm__page__fault.html#a126cca48df9411a45bb88d3c1a74d95c">kvm_page_fault::write_fault_to_shadow_pgtable</a></div><div class="ttdeci">bool write_fault_to_shadow_pgtable</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00249">mmu_internal.h:249</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_a2226254b058797ac61a2b5347d1877bd"><div class="ttname"><a href="structkvm__page__fault.html#a2226254b058797ac61a2b5347d1877bd">kvm_page_fault::prefetch</a></div><div class="ttdeci">const bool prefetch</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00194">mmu_internal.h:194</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_a76a59490f94982c504342f55b98fa989"><div class="ttname"><a href="structkvm__page__fault.html#a76a59490f94982c504342f55b98fa989">kvm_page_fault::is_tdp</a></div><div class="ttdeci">const bool is_tdp</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00204">mmu_internal.h:204</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_a94ca2315c94da3e5ab0273b78ff6da3a"><div class="ttname"><a href="structkvm__page__fault.html#a94ca2315c94da3e5ab0273b78ff6da3a">kvm_page_fault::slot</a></div><div class="ttdeci">struct kvm_memory_slot * slot</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00236">mmu_internal.h:236</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_ad365933476cc66359bfc9233440ddab0"><div class="ttname"><a href="structkvm__page__fault.html#ad365933476cc66359bfc9233440ddab0">kvm_page_fault::addr</a></div><div class="ttdeci">const gpa_t addr</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00192">mmu_internal.h:192</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_ae3c71be306692107b4d90bfb8d24d7f5_cgraph.png" border="0" usemap="#ammu__internal_8h_ae3c71be306692107b4d90bfb8d24d7f5_cgraph" alt=""/></div>
<map name="ammu__internal_8h_ae3c71be306692107b4d90bfb8d24d7f5_cgraph" id="ammu__internal_8h_ae3c71be306692107b4d90bfb8d24d7f5_cgraph">
<area shape="rect" title=" " alt="" coords="5,885,196,912"/>
<area shape="rect" href="mmu__internal_8h.html#a8a367cbfff40c5c72d6f19049da9fc51" title=" " alt="" coords="249,835,442,861"/>
<area shape="rect" href="mmu__internal_8h.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="268,885,423,912"/>
<area shape="rect" href="kvm__main_8c.html#ac4b56de4919be80c9cd4289f20437c64" title=" " alt="" coords="244,936,447,963"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="521,747,655,773"/>
<area shape="rect" href="mmu__internal_8h.html#a8805295a6f11129455d5b87a86fd3db5" title=" " alt="" coords="1047,477,1198,504"/>
<area shape="rect" href="mmu_8h.html#a11c275bc8cfad409c0681f0c953ebcae" title=" " alt="" coords="495,990,681,1031"/>
<area shape="rect" href="mtrr_8c.html#ae3f4e197f50db225e34de21d65633fcb" title=" " alt="" coords="509,1077,667,1118"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="802,224,897,251"/>
<area shape="rect" href="mmu_8c.html#a19bf28eb1ca5198dc125fd42f26c789e" title=" " alt="" coords="1061,411,1184,437"/>
<area shape="rect" href="mmu_8c.html#ad6d58376bff6747099d7b2a652b0af17" title=" " alt="" coords="775,595,923,621"/>
<area shape="rect" href="mmu__internal_8h.html#a6491934fd3538f608b4b91245943b6fc" title=" " alt="" coords="1296,797,1496,824"/>
<area shape="rect" href="mmu_8c.html#a62cf3d1ba1f946897f545d9a93db988f" title=" " alt="" coords="785,721,913,748"/>
<area shape="rect" href="kvm__main_8c.html#af83e69473e2fe5bf6e452f3fc1f414d2" title=" " alt="" coords="1035,848,1211,875"/>
<area shape="rect" href="mmu_8c.html#aa3aace355fab834a27a73054cd060480" title=" " alt="" coords="743,823,955,849"/>
<area shape="rect" href="mmu_8c.html#a1d91ca91e581985c5a26ba6ca434733f" title=" " alt="" coords="742,873,957,900"/>
<area shape="rect" href="mmu_8c.html#a842bf3ec47076504467de1b25cfa572d" title=" " alt="" coords="759,925,940,966"/>
<area shape="rect" href="mmu_8c.html#ad81f091dfb1d3dc16b40f6a162de4a8c" title=" " alt="" coords="1035,5,1210,32"/>
<area shape="rect" href="mmu_8c.html#a5a96624b696225b4bc6c90caea946cb0" title=" " alt="" coords="1049,56,1197,83"/>
<area shape="rect" href="mmu_8c.html#ae810dbeb6cd413090f54ca0cf864fe49" title=" " alt="" coords="1041,158,1204,199"/>
<area shape="rect" href="mmu_8c.html#aa0069ee555cb7a0001ed142edc326369" title=" " alt="" coords="1033,224,1213,251"/>
<area shape="rect" href="mmu_8c.html#ab3ace8d82fe9d5e1653277159c5ad4df" title=" " alt="" coords="1017,275,1228,301"/>
<area shape="rect" href="mmu_8c.html#a66e1553cd71750b6b4d9e4b6e7764a2b" title=" " alt="" coords="1051,325,1194,352"/>
<area shape="rect" href="mmu_8c.html#a8fc6edfe7bd2a5a7d47952232ea5b8a1" title=" " alt="" coords="1063,107,1182,133"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="1346,56,1446,83"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="1309,107,1483,133"/>
<area shape="rect" href="mmu_8c.html#a7a30f054b63184f3edafba0d2645dbb2" title=" " alt="" coords="1311,157,1481,184"/>
<area shape="rect" href="mmu_8c.html#ae43dc19a9042605e9280d9b1901549d4" title=" " alt="" coords="1311,208,1481,235"/>
<area shape="rect" href="mmu_8c.html#adf8fd258fb065555355c0ef2bc7e01e6" title=" " alt="" coords="1325,259,1467,285"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="1317,309,1475,336"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="1347,360,1445,387"/>
<area shape="rect" href="spte_8h.html#aeb796217990be75433fd1430d5958184" title=" " alt="" coords="1311,411,1481,437"/>
<area shape="rect" href="spte_8h.html#ac3f82ba169af94a026b5df40f3d3753e" title=" " alt="" coords="1564,487,1697,513"/>
<area shape="rect" href="tdp__mmu_8c.html#ab831f739cbe511803c4752d84ffab75c" title=" " alt="" coords="1310,563,1482,605"/>
<area shape="rect" href="mmu_8c.html#a915030adfc07c25d675f2069d09acab8" title=" " alt="" coords="1308,512,1484,539"/>
<area shape="rect" href="spte_8h.html#abc2b9043d48550e741fda1e2ad36a652" title=" " alt="" coords="1310,629,1482,656"/>
<area shape="rect" href="mmu_8c.html#a8249a6a2551b792aaec028954ca64dde" title=" " alt="" coords="1291,681,1501,722"/>
<area shape="rect" href="mmu_8c.html#a070edfe1e4c28f6842681042bcffbf10" title=" " alt="" coords="1276,747,1516,773"/>
<area shape="rect" href="mmu_8c.html#a39242ba7b127ebf064de37a1224635cd" title=" " alt="" coords="1063,544,1182,571"/>
<area shape="rect" href="spte_8h.html#ab169c1872e98b9731a05121e0439f244" title=" " alt="" coords="1077,595,1168,621"/>
<area shape="rect" href="mmu_8c.html#a191317a4b6c8acc0a90a33017cfab7f3" title=" " alt="" coords="1051,696,1194,723"/>
<area shape="rect" href="mmu_8c.html#aac896859e8521dd9e4efa9283d5d2b1b" title=" " alt="" coords="1039,747,1207,773"/>
<area shape="rect" href="mmu_8c.html#ad472a4e8b9cc60aeca0afecaf632d39c" title=" " alt="" coords="1029,797,1216,824"/>
<area shape="rect" href="kvm__main_8c.html#a99f99281cc81d5cd69f5825ccb8793b4" title=" " alt="" coords="1289,848,1503,875"/>
<area shape="rect" href="kvm__main_8c.html#a6845d169e1c19786abe7719700b9f6b9" title=" " alt="" coords="1303,899,1489,925"/>
<area shape="rect" href="mmu_8c.html#a93f1e0e5da1bb603a5e4f250d4d76bb0" title=" " alt="" coords="1020,899,1225,925"/>
<area shape="rect" href="mmu_8c.html#aeca903955eae791df4e1e22dcff2671f" title=" " alt="" coords="1038,950,1207,991"/>
<area shape="rect" href="mmu_8h.html#aaac7b37c7c917c491331020726730c02" title=" " alt="" coords="749,990,949,1031"/>
<area shape="rect" href="x86_8c.html#a07ecc086564147d2003e0699cd506aa4" title=" " alt="" coords="729,1056,969,1083"/>
<area shape="rect" href="mtrr_8c.html#aeb25e3cab8f1edf904c9b8c93a0ee055" title=" " alt="" coords="780,1107,919,1133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_ae3c71be306692107b4d90bfb8d24d7f5_icgraph.png" border="0" usemap="#ammu__internal_8h_ae3c71be306692107b4d90bfb8d24d7f5_icgraph" alt=""/></div>
<map name="ammu__internal_8h_ae3c71be306692107b4d90bfb8d24d7f5_icgraph" id="ammu__internal_8h_ae3c71be306692107b4d90bfb8d24d7f5_icgraph">
<area shape="rect" title=" " alt="" coords="1299,233,1489,260"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="1080,171,1251,213"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="1081,263,1249,289"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="862,146,1023,187"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="624,80,799,107"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="643,156,780,183"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="450,5,531,32"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="436,56,545,83"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="435,107,546,133"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="450,157,531,184"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,157,364,184"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,157,129,184"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="861,212,1025,239"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="863,263,1022,289"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="853,313,1032,340"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="879,364,1007,391"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="637,212,785,239"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="423,212,558,239"/>
<area shape="rect" href="vmx_8c.html#a7a38ddbd01bec99bf94ab4868ad4c6ea" title=" " alt="" coords="627,263,796,289"/>
<area shape="rect" href="svm_8c.html#a589e870c8a06d1ba26f24da299e47b95" title=" " alt="" coords="651,313,771,340"/>
<area shape="rect" href="svm_8c.html#a8afafecae406016532810194f187fe2c" title=" " alt="" coords="617,364,805,391"/>
<area shape="rect" href="sev_8c.html#aac550422551b71c0afe8efe176e0b55d" title=" " alt="" coords="192,335,349,361"/>
<area shape="rect" href="sev_8c.html#ae483e70b55c68f5a2405263543ce3737" title=" " alt="" coords="412,357,569,398"/>
<area shape="rect" href="svm_8c.html#a3f8983432f4aae138a6f4d167c561132" title=" " alt="" coords="424,423,557,449"/>
</map>
</div>

</div>
</div>
<a id="a0eb4da3250f15ed351ae2f0acc485870"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0eb4da3250f15ed351ae2f0acc485870">&#9670;&nbsp;</a></span>kvm_mmu_get_dummy_root()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static hpa_t kvm_mmu_get_dummy_root </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00040">40</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;{</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordflow">return</span> my_zero_pfn(0) &lt;&lt; PAGE_SHIFT;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_a0eb4da3250f15ed351ae2f0acc485870_icgraph.png" border="0" usemap="#ammu__internal_8h_a0eb4da3250f15ed351ae2f0acc485870_icgraph" alt=""/></div>
<map name="ammu__internal_8h_a0eb4da3250f15ed351ae2f0acc485870_icgraph" id="ammu__internal_8h_a0eb4da3250f15ed351ae2f0acc485870_icgraph">
<area shape="rect" title=" " alt="" coords="1823,107,2033,133"/>
<area shape="rect" href="mmu_8c.html#a1ede039d44aac6e8ff15be76c16411a1" title=" " alt="" coords="1584,107,1775,133"/>
<area shape="rect" href="mmu_8c.html#a475bd00898314bb9378d8e4306aa7874" title=" " alt="" coords="1409,107,1536,133"/>
<area shape="rect" href="mmu_8h.html#ab0e194ecad859add3d639850021f8b16" title=" " alt="" coords="1221,107,1361,133"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="1003,70,1173,111"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="589,136,727,163"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="793,70,955,111"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="571,67,745,93"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="427,5,508,32"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="413,56,522,83"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="412,107,523,133"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="427,157,508,184"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,157,364,184"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,157,129,184"/>
</map>
</div>

</div>
</div>
<a id="a8726aec6b800501379c831dad5432043"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8726aec6b800501379c831dad5432043">&#9670;&nbsp;</a></span>kvm_mmu_gfn_allow_lpage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_mmu_gfn_allow_lpage </td>
          <td>(</td>
          <td class="paramtype">const struct kvm_memory_slot *&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfn_t&#160;</td>
          <td class="paramname"><em>gfn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l00822">822</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;{</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <a class="code" href="mmu_8c.html#abb10f9f8c6baa15bf3d3fc0b309d34d9">update_gfn_disallow_lpage_count</a>(slot, gfn, -1);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;}</div>
<div class="ttc" id="ammu_8c_html_abb10f9f8c6baa15bf3d3fc0b309d34d9"><div class="ttname"><a href="mmu_8c.html#abb10f9f8c6baa15bf3d3fc0b309d34d9">update_gfn_disallow_lpage_count</a></div><div class="ttdeci">static void update_gfn_disallow_lpage_count(const struct kvm_memory_slot *slot, gfn_t gfn, int count)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l00802">mmu.c:802</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_a8726aec6b800501379c831dad5432043_cgraph.png" border="0" usemap="#ammu__internal_8h_a8726aec6b800501379c831dad5432043_cgraph" alt=""/></div>
<map name="ammu__internal_8h_a8726aec6b800501379c831dad5432043_cgraph" id="ammu__internal_8h_a8726aec6b800501379c831dad5432043_cgraph">
<area shape="rect" title=" " alt="" coords="5,13,211,39"/>
<area shape="rect" href="mmu_8c.html#abb10f9f8c6baa15bf3d3fc0b309d34d9" title=" " alt="" coords="259,5,415,47"/>
<area shape="rect" href="mmu_8c.html#a1a8a0df061e27892bcc64a3e810e6c29" title=" " alt="" coords="463,13,584,39"/>
<area shape="rect" href="mmu_8h.html#a41b79b63cae220349d8eb5a54f047939" title=" " alt="" coords="632,13,739,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_a8726aec6b800501379c831dad5432043_icgraph.png" border="0" usemap="#ammu__internal_8h_a8726aec6b800501379c831dad5432043_icgraph" alt=""/></div>
<map name="ammu__internal_8h_a8726aec6b800501379c831dad5432043_icgraph" id="ammu__internal_8h_a8726aec6b800501379c831dad5432043_icgraph">
<area shape="rect" title=" " alt="" coords="2357,575,2563,602"/>
<area shape="rect" href="page__track_8c.html#ac2932f8336fdd5b8071d5e360cddacd5" title=" " alt="" coords="2079,601,2309,627"/>
<area shape="rect" href="mmu_8c.html#ab0716e0d51f7a555f58f426cbfb6d890" title=" " alt="" coords="1868,575,2031,602"/>
<area shape="rect" href="mmu_8c.html#a01417b2ac70337a4419dc0f171bd548f" title=" " alt="" coords="1588,575,1820,602"/>
<area shape="rect" href="mmu_8c.html#aa915f695d4c341eca7d1f5b5a0a26a03" title=" " alt="" coords="1321,233,1540,259"/>
<area shape="rect" href="mmu_8c.html#a6db2d9d04af40584cbde51a2e1f74837" title=" " alt="" coords="1358,601,1503,627"/>
<area shape="rect" href="mmu_8c.html#aeca903955eae791df4e1e22dcff2671f" title=" " alt="" coords="1346,773,1515,815"/>
<area shape="rect" href="mmu_8c.html#acfa638b7fb78a0f9e41c057c6c119116" title=" " alt="" coords="1335,986,1526,1013"/>
<area shape="rect" href="mmu_8c.html#a0aae5e5c753c842f2ea147f5eb4443e2" title=" " alt="" coords="789,13,1008,39"/>
<area shape="rect" href="mmu_8c.html#ad8f7c681ee8bd25bb3fcb5b3ff39f4e8" title=" " alt="" coords="813,114,985,141"/>
<area shape="rect" href="mmu_8c.html#a45417375d740e0905773ac641827e0a0" title=" " alt="" coords="1067,334,1267,361"/>
<area shape="rect" href="mmu_8c.html#a85202c8f53b11b1c80f9b6e26210aa9a" title=" " alt="" coords="1083,392,1252,433"/>
<area shape="rect" href="mmu_8c.html#a39a2699f47aac1549c6a1ba2600ee86b" title=" " alt="" coords="1104,63,1231,90"/>
<area shape="rect" href="mmu_8c.html#a5b648a843c7267d204fe81facbc9f84f" title=" " alt="" coords="1087,470,1248,497"/>
<area shape="rect" href="mmu_8c.html#a5d549ae5b6c13e9b87ccc13127ddf86a" title=" " alt="" coords="1091,209,1244,235"/>
<area shape="rect" href="mmu_8c.html#af8bc85c6e33cec42152e7982b1fb4cba" title=" " alt="" coords="1068,546,1267,573"/>
<area shape="rect" href="mmu_8c.html#a1ade612e5d4a58575df9428f6ad72bb9" title=" " alt="" coords="505,13,736,39"/>
<area shape="rect" href="mmu_8c.html#a0afaf010cb78207cd01091773878f1f2" title=" " alt="" coords="268,38,431,65"/>
<area shape="rect" href="mmu_8c.html#a0ebfdae56a33b8ca22e8fa22268fe033" title=" " alt="" coords="5,5,193,47"/>
<area shape="rect" href="page__track_8h.html#aaba1a34500917672160397ee8e7dada3" title=" " alt="" coords="535,114,706,141"/>
<area shape="rect" href="x86_8c.html#a170363aad395e949fddcfd1e6261ee5b" title=" " alt="" coords="241,102,457,129"/>
<area shape="rect" href="x86_8c.html#a2493c8d4e95868799c80e648db53dc99" title=" " alt="" coords="270,153,429,179"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="815,282,983,309"/>
<area shape="rect" href="mmu_8c.html#af74327c8867527505d8ca995e2b8a3fb" title=" " alt="" coords="784,333,1013,359"/>
<area shape="rect" href="x86_8c.html#a5559cadc9496d9f62e002e88144d5156" title=" " alt="" coords="817,383,980,410"/>
<area shape="rect" href="x86_8c.html#a5969d2c2ff863d86dbdd90088da52139" title=" " alt="" coords="834,434,963,461"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="539,231,703,258"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="541,282,700,309"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="531,333,710,359"/>
<area shape="rect" href="mmu_8c.html#a2683113dbbf42e73c2b52410f9ef6f84" title=" " alt="" coords="791,485,1007,527"/>
<area shape="rect" href="mmu_8c.html#a2f33377dcdaf5435e453ff75e02075dd" title=" " alt="" coords="823,63,975,90"/>
<area shape="rect" href="mmu_8c.html#ab7d4e418cb85a72507e384df5027293e" title=" " alt="" coords="816,551,981,578"/>
<area shape="rect" href="mmu_8c.html#a182d50b0d6d7be3301d249ba97a8152f" title=" " alt="" coords="791,165,1006,191"/>
<area shape="rect" href="mmu_8c.html#abab2bb5454cc72ba2e4913a87e5800fe" title=" " alt="" coords="809,216,988,257"/>
<area shape="rect" href="mmu_8c.html#a6a9d3382763ac1478855bd15907a98e2" title=" " alt="" coords="1065,602,1269,629"/>
<area shape="rect" href="kvm__main_8c.html#ab6320575dc04178df16ea4d7dddff190" title=" " alt="" coords="814,602,983,629"/>
<area shape="rect" href="mmu_8c.html#a51621e034894e480342d3a5b48735d41" title=" " alt="" coords="1074,719,1261,760"/>
<area shape="rect" href="mmu_8c.html#aa3aace355fab834a27a73054cd060480" title=" " alt="" coords="1061,835,1273,862"/>
<area shape="rect" href="mmu_8c.html#a454f417bda474f7904fe06c1998ecaed" title=" " alt="" coords="1097,937,1237,963"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="796,653,1001,695"/>
<area shape="rect" href="x86_8c.html#afc9f6e79b41a5499613d59090d54df77" title=" " alt="" coords="818,719,979,760"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="831,785,966,811"/>
<area shape="rect" href="mmu_8c.html#a171383889d717b24003ee27735437bbe" title=" " alt="" coords="809,835,988,862"/>
<area shape="rect" href="mmu_8c.html#a1ede039d44aac6e8ff15be76c16411a1" title=" " alt="" coords="803,886,994,913"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="853,937,944,963"/>
<area shape="rect" href="mmu_8c.html#ac1e20896385a0e158bf217a24a6d6234" title=" " alt="" coords="785,987,1013,1014"/>
<area shape="rect" href="mmu_8c.html#abd59fd9785b9b5676841e9706c1c6797" title=" " alt="" coords="1079,1078,1256,1105"/>
<area shape="rect" href="mmu_8c.html#a58fe7b43995ae8c20c597e1bb9c4c007" title=" " alt="" coords="808,1039,989,1080"/>
<area shape="rect" href="mmu_8c.html#ad4293ab926b1ab16fb8b380a76b9f533" title=" " alt="" coords="817,1104,981,1145"/>
<area shape="rect" href="mmu_8c.html#a5a613414a3787274a50cc9f9e9bab180" title=" " alt="" coords="823,1170,974,1197"/>
</map>
</div>

</div>
</div>
<a id="ae0ba561823d6dcc90bc489e0a51867a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0ba561823d6dcc90bc489e0a51867a7">&#9670;&nbsp;</a></span>kvm_mmu_gfn_disallow_lpage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_mmu_gfn_disallow_lpage </td>
          <td>(</td>
          <td class="paramtype">const struct kvm_memory_slot *&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfn_t&#160;</td>
          <td class="paramname"><em>gfn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l00817">817</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;{</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <a class="code" href="mmu_8c.html#abb10f9f8c6baa15bf3d3fc0b309d34d9">update_gfn_disallow_lpage_count</a>(slot, gfn, 1);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_ae0ba561823d6dcc90bc489e0a51867a7_cgraph.png" border="0" usemap="#ammu__internal_8h_ae0ba561823d6dcc90bc489e0a51867a7_cgraph" alt=""/></div>
<map name="ammu__internal_8h_ae0ba561823d6dcc90bc489e0a51867a7_cgraph" id="ammu__internal_8h_ae0ba561823d6dcc90bc489e0a51867a7_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,187,47"/>
<area shape="rect" href="mmu_8c.html#abb10f9f8c6baa15bf3d3fc0b309d34d9" title=" " alt="" coords="235,5,391,47"/>
<area shape="rect" href="mmu_8c.html#a1a8a0df061e27892bcc64a3e810e6c29" title=" " alt="" coords="439,13,560,39"/>
<area shape="rect" href="mmu_8h.html#a41b79b63cae220349d8eb5a54f047939" title=" " alt="" coords="608,13,715,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_ae0ba561823d6dcc90bc489e0a51867a7_icgraph.png" border="0" usemap="#ammu__internal_8h_ae0ba561823d6dcc90bc489e0a51867a7_icgraph" alt=""/></div>
<map name="ammu__internal_8h_ae0ba561823d6dcc90bc489e0a51867a7_icgraph" id="ammu__internal_8h_ae0ba561823d6dcc90bc489e0a51867a7_icgraph">
<area shape="rect" title=" " alt="" coords="3304,757,3485,798"/>
<area shape="rect" href="page__track_8c.html#ab6a4ffea76ea12eb3b1e83eafaf4618b" title=" " alt="" coords="3052,739,3256,765"/>
<area shape="rect" href="mmu_8c.html#aec5cf4265713109c5e2ea673c610cd03" title=" " alt="" coords="2857,764,3004,791"/>
<area shape="rect" href="mmu_8c.html#a6f305a17525ee7345f0f852070869e4c" title=" " alt="" coords="2583,764,2809,791"/>
<area shape="rect" href="mmu_8c.html#a1ade612e5d4a58575df9428f6ad72bb9" title=" " alt="" coords="2304,764,2535,791"/>
<area shape="rect" href="mmu_8c.html#a0afaf010cb78207cd01091773878f1f2" title=" " alt="" coords="2093,739,2256,765"/>
<area shape="rect" href="mmu_8c.html#a0ebfdae56a33b8ca22e8fa22268fe033" title=" " alt="" coords="1857,782,2045,823"/>
<area shape="rect" href="mmu_8c.html#aa0069ee555cb7a0001ed142edc326369" title=" " alt="" coords="1861,731,2041,757"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="1649,680,1743,707"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="1669,731,1723,757"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1381,680,1515,707"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="1149,487,1304,513"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="1143,680,1310,707"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="923,352,1071,379"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="901,487,1092,513"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="695,284,815,311"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="419,81,591,108"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="411,208,599,235"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="182,360,322,387"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="424,309,587,336"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="423,360,587,387"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="152,5,352,32"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="203,56,301,83"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="199,107,305,133"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="5,233,101,260"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="153,208,351,235"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="182,259,322,285"/>
<area shape="rect" href="smm_8c.html#a5382946234c910e05c6e2c09aff15713" title=" " alt="" coords="175,309,329,336"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="669,437,840,478"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="671,528,839,555"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="425,411,586,453"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="423,477,587,504"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="426,528,585,555"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="416,579,595,605"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="441,629,569,656"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="909,680,1084,707"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="656,680,853,707"/>
<area shape="rect" href="mmu_8c.html#a3e794d802eeb843cd6d7b699b74d8bf3" title=" " alt="" coords="417,680,594,707"/>
<area shape="rect" href="mmu_8c.html#a00f26353045c597f6a49cdd4f239f548" title=" " alt="" coords="403,731,608,757"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1403,731,1493,757"/>
<area shape="rect" href="mmu_8c.html#abe6e7771da6f6df50052156316535466" title=" " alt="" coords="1583,789,1809,816"/>
<area shape="rect" href="mmu_8c.html#a03732600ed110f429f4a2d526a303bcb" title=" " alt="" coords="1361,782,1535,823"/>
<area shape="rect" href="mmu_8c.html#a2e109b8775cdfe9924c3d331ac5f332f" title=" " alt="" coords="1140,782,1313,823"/>
<area shape="rect" href="mmu_8c.html#adfe576663ff84a7b51773d87e91dd28a" title=" " alt="" coords="909,782,1084,823"/>
<area shape="rect" href="mmu_8c.html#a073d9b7de8eaf977452c1eb7395a78d6" title=" " alt="" coords="663,782,846,823"/>
<area shape="rect" href="mmu_8c.html#a6abdd1728810c3f3ab8c2e1e6d2d37f0" title=" " alt="" coords="659,847,850,889"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="422,782,589,823"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="149,782,355,823"/>
<area shape="rect" href="mmu_8c.html#a035ec39ab60e2a3d382c272b15fc83a6" title=" " alt="" coords="416,847,595,889"/>
<area shape="rect" href="dirty__ring_8c.html#a68052369106191fbc506fdf4d64be449" title=" " alt="" coords="174,855,330,881"/>
</map>
</div>

</div>
</div>
<a id="ab3ace8d82fe9d5e1653277159c5ad4df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3ace8d82fe9d5e1653277159c5ad4df">&#9670;&nbsp;</a></span>kvm_mmu_hugepage_adjust()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_mmu_hugepage_adjust </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__page__fault.html">kvm_page_fault</a> *&#160;</td>
          <td class="paramname"><em>fault</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l03180">3180</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;{</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;    <span class="keyword">struct </span>kvm_memory_slot *slot = fault-&gt;<a class="code" href="structkvm__page__fault.html#a94ca2315c94da3e5ab0273b78ff6da3a">slot</a>;</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;    kvm_pfn_t mask;</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160; </div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;    fault-&gt;<a class="code" href="structkvm__page__fault.html#a421a772100b124af81fb35768801c6bc">huge_page_disallowed</a> = fault-&gt;<a class="code" href="structkvm__page__fault.html#aebd17cd723773f8d26e5910faa4f6b7d">exec</a> &amp;&amp; fault-&gt;<a class="code" href="structkvm__page__fault.html#a8c1b32bdc3f59a2c3ffca8cc919b5ef3">nx_huge_page_workaround_enabled</a>;</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160; </div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;    <span class="keywordflow">if</span> (unlikely(fault-&gt;<a class="code" href="structkvm__page__fault.html#ab5cc4b80577775008ffd38c21b75d2b6">max_level</a> == PG_LEVEL_4K))</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160; </div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;    <span class="keywordflow">if</span> (is_error_noslot_pfn(fault-&gt;<a class="code" href="structkvm__page__fault.html#a784cc6d936bf4aa03731c0620e334553">pfn</a>))</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160; </div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;    <span class="keywordflow">if</span> (kvm_slot_dirty_track_enabled(slot))</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160; </div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;<span class="comment">     * Enforce the iTLB multihit workaround after capturing the requested</span></div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;<span class="comment">     * level, which will be used to do precise, accurate accounting.</span></div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;    fault-&gt;<a class="code" href="structkvm__page__fault.html#a8ffa43a08e1131c59b2597d86a616b26">req_level</a> = <a class="code" href="mmu_8c.html#a3c4a735c02073ba03d156c2ce4cfc5e5">__kvm_mmu_max_mapping_level</a>(vcpu-&gt;kvm, slot,</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;                               fault-&gt;<a class="code" href="structkvm__page__fault.html#a27031ff0dd2c0b28283774456a29f066">gfn</a>, fault-&gt;<a class="code" href="structkvm__page__fault.html#ab5cc4b80577775008ffd38c21b75d2b6">max_level</a>,</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;                               fault-&gt;<a class="code" href="structkvm__page__fault.html#ab2de0f5ce7803d5f87dfbecc552541e4">is_private</a>);</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;    <span class="keywordflow">if</span> (fault-&gt;<a class="code" href="structkvm__page__fault.html#a8ffa43a08e1131c59b2597d86a616b26">req_level</a> == PG_LEVEL_4K || fault-&gt;<a class="code" href="structkvm__page__fault.html#a421a772100b124af81fb35768801c6bc">huge_page_disallowed</a>)</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160; </div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;<span class="comment">     * mmu_invalidate_retry() was successful and mmu_lock is held, so</span></div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;<span class="comment">     * the pmd can&#39;t be split from under us.</span></div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    fault-&gt;<a class="code" href="structkvm__page__fault.html#ad6705ad5f00efe4e9e47328860e9634a">goal_level</a> = fault-&gt;<a class="code" href="structkvm__page__fault.html#a8ffa43a08e1131c59b2597d86a616b26">req_level</a>;</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;    mask = KVM_PAGES_PER_HPAGE(fault-&gt;<a class="code" href="structkvm__page__fault.html#ad6705ad5f00efe4e9e47328860e9634a">goal_level</a>) - 1;</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;    VM_BUG_ON((fault-&gt;<a class="code" href="structkvm__page__fault.html#a27031ff0dd2c0b28283774456a29f066">gfn</a> &amp; mask) != (fault-&gt;<a class="code" href="structkvm__page__fault.html#a784cc6d936bf4aa03731c0620e334553">pfn</a> &amp; mask));</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;    fault-&gt;<a class="code" href="structkvm__page__fault.html#a784cc6d936bf4aa03731c0620e334553">pfn</a> &amp;= ~mask;</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;}</div>
<div class="ttc" id="ammu_8c_html_a3c4a735c02073ba03d156c2ce4cfc5e5"><div class="ttname"><a href="mmu_8c.html#a3c4a735c02073ba03d156c2ce4cfc5e5">__kvm_mmu_max_mapping_level</a></div><div class="ttdeci">static int __kvm_mmu_max_mapping_level(struct kvm *kvm, const struct kvm_memory_slot *slot, gfn_t gfn, int max_level, bool is_private)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l03146">mmu.c:3146</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_a421a772100b124af81fb35768801c6bc"><div class="ttname"><a href="structkvm__page__fault.html#a421a772100b124af81fb35768801c6bc">kvm_page_fault::huge_page_disallowed</a></div><div class="ttdeci">bool huge_page_disallowed</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00212">mmu_internal.h:212</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_a8c1b32bdc3f59a2c3ffca8cc919b5ef3"><div class="ttname"><a href="structkvm__page__fault.html#a8c1b32bdc3f59a2c3ffca8cc919b5ef3">kvm_page_fault::nx_huge_page_workaround_enabled</a></div><div class="ttdeci">const bool nx_huge_page_workaround_enabled</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00206">mmu_internal.h:206</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_a8ffa43a08e1131c59b2597d86a616b26"><div class="ttname"><a href="structkvm__page__fault.html#a8ffa43a08e1131c59b2597d86a616b26">kvm_page_fault::req_level</a></div><div class="ttdeci">u8 req_level</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00224">mmu_internal.h:224</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_ab2de0f5ce7803d5f87dfbecc552541e4"><div class="ttname"><a href="structkvm__page__fault.html#ab2de0f5ce7803d5f87dfbecc552541e4">kvm_page_fault::is_private</a></div><div class="ttdeci">const bool is_private</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00205">mmu_internal.h:205</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_ab5cc4b80577775008ffd38c21b75d2b6"><div class="ttname"><a href="structkvm__page__fault.html#ab5cc4b80577775008ffd38c21b75d2b6">kvm_page_fault::max_level</a></div><div class="ttdeci">u8 max_level</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00218">mmu_internal.h:218</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_aebd17cd723773f8d26e5910faa4f6b7d"><div class="ttname"><a href="structkvm__page__fault.html#aebd17cd723773f8d26e5910faa4f6b7d">kvm_page_fault::exec</a></div><div class="ttdeci">const bool exec</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00197">mmu_internal.h:197</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_ab3ace8d82fe9d5e1653277159c5ad4df_cgraph.png" border="0" usemap="#ammu__internal_8h_ab3ace8d82fe9d5e1653277159c5ad4df_cgraph" alt=""/></div>
<map name="ammu__internal_8h_ab3ace8d82fe9d5e1653277159c5ad4df_cgraph" id="ammu__internal_8h_ab3ace8d82fe9d5e1653277159c5ad4df_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,216,57"/>
<area shape="rect" href="mmu_8c.html#a3c4a735c02073ba03d156c2ce4cfc5e5" title=" " alt="" coords="264,23,471,65"/>
<area shape="rect" href="mmu_8c.html#a25a86ecdadc998ed7ceac6eb669be98f" title=" " alt="" coords="519,5,700,32"/>
<area shape="rect" href="mmu_8c.html#a1a8a0df061e27892bcc64a3e810e6c29" title=" " alt="" coords="549,56,670,83"/>
<area shape="rect" href="mmu_8h.html#a41b79b63cae220349d8eb5a54f047939" title=" " alt="" coords="748,56,855,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_ab3ace8d82fe9d5e1653277159c5ad4df_icgraph.png" border="0" usemap="#ammu__internal_8h_ab3ace8d82fe9d5e1653277159c5ad4df_icgraph" alt=""/></div>
<map name="ammu__internal_8h_ab3ace8d82fe9d5e1653277159c5ad4df_icgraph" id="ammu__internal_8h_ab3ace8d82fe9d5e1653277159c5ad4df_icgraph">
<area shape="rect" title=" " alt="" coords="2061,689,2272,716"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="1888,639,1983,665"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="1908,689,1963,716"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="1857,740,2013,767"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1675,639,1809,665"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="1466,613,1621,640"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="1460,664,1627,691"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="1243,613,1391,640"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="1221,237,1412,264"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="1015,613,1135,640"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="255,1060,427,1087"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="731,765,919,792"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="505,613,645,640"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="744,487,907,513"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="743,360,907,387"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="5,1060,205,1087"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="526,933,625,960"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="522,984,629,1011"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="293,740,389,767"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="476,816,675,843"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="505,664,645,691"/>
<area shape="rect" href="smm_8c.html#a5382946234c910e05c6e2c09aff15713" title=" " alt="" coords="499,765,652,792"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="511,1035,640,1061"/>
<area shape="rect" href="vmx_2nested_8c.html#a001f930db9a867e828cf01b48d3e4e25" title=" " alt="" coords="498,867,653,909"/>
<area shape="rect" href="x86_8c.html#a420caf80521ab8d6ef7218d5dd26d47f" title=" " alt="" coords="538,563,613,589"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="307,664,374,691"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="288,613,393,640"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="253,385,428,412"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="486,411,665,437"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="498,461,653,488"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="491,512,659,539"/>
<area shape="rect" href="vmx_2nested_8c.html#a06a397c328d1656bb4d3ab073878e6f0" title=" " alt="" coords="484,309,667,336"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="510,360,641,387"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="989,230,1160,271"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="991,107,1159,133"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="745,230,906,271"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="507,259,644,285"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="743,157,907,184"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="746,5,905,32"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="736,56,915,83"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="761,107,889,133"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="501,157,649,184"/>
<area shape="rect" href="vmx_8c.html#a7a38ddbd01bec99bf94ab4868ad4c6ea" title=" " alt="" coords="491,5,660,32"/>
<area shape="rect" href="svm_8c.html#a589e870c8a06d1ba26f24da299e47b95" title=" " alt="" coords="515,56,635,83"/>
<area shape="rect" href="svm_8c.html#a8afafecae406016532810194f187fe2c" title=" " alt="" coords="481,107,669,133"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="1229,900,1404,927"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="976,1136,1173,1163"/>
<area shape="rect" href="mmu_8c.html#a3e794d802eeb843cd6d7b699b74d8bf3" title=" " alt="" coords="737,1136,914,1163"/>
<area shape="rect" href="mmu_8c.html#a00f26353045c597f6a49cdd4f239f548" title=" " alt="" coords="723,1187,928,1213"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1697,689,1787,716"/>
</map>
</div>

</div>
</div>
<a id="a6491934fd3538f608b4b91245943b6fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6491934fd3538f608b4b91245943b6fc">&#9670;&nbsp;</a></span>kvm_mmu_is_dummy_root()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_mmu_is_dummy_root </td>
          <td>(</td>
          <td class="paramtype">hpa_t&#160;</td>
          <td class="paramname"><em>shadow_page</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00045">45</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">return</span> is_zero_pfn(shadow_page &gt;&gt; PAGE_SHIFT);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_a6491934fd3538f608b4b91245943b6fc_icgraph.png" border="0" usemap="#ammu__internal_8h_a6491934fd3538f608b4b91245943b6fc_icgraph" alt=""/></div>
<map name="ammu__internal_8h_a6491934fd3538f608b4b91245943b6fc_icgraph" id="ammu__internal_8h_a6491934fd3538f608b4b91245943b6fc_icgraph">
<area shape="rect" title=" " alt="" coords="1528,401,1728,428"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="980,148,1115,175"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="1407,300,1462,327"/>
<area shape="rect" href="mmu_8c.html#a85cc512fac68747ea8cab508dd83796c" title=" " alt="" coords="1201,401,1320,428"/>
<area shape="rect" href="mmu_8c.html#ab7d4e418cb85a72507e384df5027293e" title=" " alt="" coords="965,688,1130,715"/>
<area shape="rect" href="spte_8h.html#ab169c1872e98b9731a05121e0439f244" title=" " alt="" coords="1389,477,1480,504"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="735,56,889,83"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="729,107,895,133"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="492,56,640,83"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="471,5,661,32"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="479,107,653,133"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1002,199,1093,225"/>
<area shape="rect" href="mmu_8c.html#a6d448c19a18bd089be4c218a86d523be" title=" " alt="" coords="709,376,915,403"/>
<area shape="rect" href="mmu_8c.html#ab00408fb7acb0199782175051f59add6" title=" " alt="" coords="963,325,1132,352"/>
<area shape="rect" href="x86_8c.html#a334f9c72dae5c0a2867b04acbc2beb6e" title=" " alt="" coords="491,310,641,351"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="269,224,406,251"/>
<area shape="rect" href="mmu_8c.html#a475bd00898314bb9378d8e4306aa7874" title=" " alt="" coords="749,275,875,301"/>
<area shape="rect" href="mmu_8c.html#ae3c450d21264b7f2a31cc71d03c2a658" title=" " alt="" coords="711,158,913,199"/>
<area shape="rect" href="mmu_8c.html#accc9c990bf354ea4f50d7e9c2deee3e4" title=" " alt="" coords="731,579,893,621"/>
<area shape="rect" href="mmu_8c.html#a0e7f249026693e08d3c8b70f7ffd5003" title=" " alt="" coords="503,557,629,584"/>
<area shape="rect" href="vmx_2nested_8c.html#ad9920ec1586ae352fbc272ed93cf7b38" title=" " alt="" coords="763,883,861,909"/>
<area shape="rect" href="vmx_2nested_8c.html#a54e70f407596ed5f029a4e4a9855d76c" title=" " alt="" coords="755,933,869,960"/>
<area shape="rect" href="x86_8c.html#aa792359250f034a2a29b0c809df64ff3" title=" " alt="" coords="733,427,891,453"/>
<area shape="rect" href="mmu_8c.html#aed9206081417b11ad2654d347022bb05" title=" " alt="" coords="728,985,896,1026"/>
<area shape="rect" href="mmu_8c.html#a7bf770a114656f992dd1c0aff57fe9e5" title=" " alt="" coords="741,797,883,824"/>
<area shape="rect" href="x86_8c.html#ae69bdd054a70a95d99b79bae770372cf" title=" " alt="" coords="288,621,387,648"/>
<area shape="rect" href="vmx_2nested_8c.html#a5a5df09c88b5fad9a716109f9917e9a5" title=" " alt="" coords="723,645,901,672"/>
<area shape="rect" href="mmu_8c.html#aa1e7a67c950b9d5bc46f7aaed6b5367c" title=" " alt="" coords="472,158,660,199"/>
<area shape="rect" href="mmu_8c.html#a40fe74f8abc723be216276bf005e4be8" title=" " alt="" coords="259,477,416,504"/>
<area shape="rect" href="x86_8c.html#a75f57f1f4494df7f35fcdf0e0e582a31" title=" " alt="" coords="52,419,157,445"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="23,520,186,547"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="23,469,187,496"/>
<area shape="rect" href="vmx_2nested_8c.html#a4c26f7246065bb8952f345af22487b9c" title=" " alt="" coords="507,916,625,943"/>
<area shape="rect" href="vmx_2nested_8c.html#a64e6550fab681b40c832fe4e2d5e3b95" title=" " alt="" coords="493,967,639,993"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="252,1010,423,1051"/>
<area shape="rect" href="x86_8c.html#a97b209e5c87a4c7b5850646ab9a1919c" title=" " alt="" coords="488,427,644,453"/>
<area shape="rect" href="vmx_2nested_8c.html#a82fdee7a11d269320b0b30e836910587" title=" " alt="" coords="505,1068,627,1095"/>
<area shape="rect" href="mmu_8c.html#a1b010cfd4a70f0e7ad2d50619562cd1c" title=" " alt="" coords="492,815,640,841"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="472,713,660,740"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="267,764,407,791"/>
<area shape="rect" href="x86_8c.html#aa7dd06e7d0835e6cbf23134ad9fb19d8" title=" " alt="" coords="475,865,657,892"/>
<area shape="rect" href="x86_8c.html#a39acca4a1624a86a5d8e547339729536" title=" " alt="" coords="52,773,157,800"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="23,621,186,648"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="52,672,157,699"/>
<area shape="rect" href="vmx_2nested_8c.html#a562e6893d0703c98635cab943cc58fed" title=" " alt="" coords="5,723,204,749"/>
<area shape="rect" href="svm_8c.html#a6c03fa2ac66c8db77e6bdc408cf0b7bb" title=" " alt="" coords="43,571,166,597"/>
<area shape="rect" href="mmu_8c.html#a18c5041cf69d79e06c51bd903978adc8" title=" " alt="" coords="1196,300,1325,327"/>
<area shape="rect" href="mmu_8c.html#ad6d58376bff6747099d7b2a652b0af17" title=" " alt="" coords="1187,199,1335,225"/>
<area shape="rect" href="mmu_8c.html#a32155e8116997cb7c4a4a15ab3c7c6d6" title=" " alt="" coords="989,583,1105,609"/>
<area shape="rect" href="mmu_8c.html#a5b648a843c7267d204fe81facbc9f84f" title=" " alt="" coords="1180,629,1341,656"/>
</map>
</div>

</div>
</div>
<a id="a514b4601388e83cb56ffe210d5123b50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a514b4601388e83cb56ffe210d5123b50">&#9670;&nbsp;</a></span>kvm_mmu_max_mapping_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_mmu_max_mapping_level </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct kvm_memory_slot *&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfn_t&#160;</td>
          <td class="paramname"><em>gfn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l03170">3170</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;{</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;    <span class="keywordtype">bool</span> is_private = kvm_slot_can_be_private(slot) &amp;&amp;</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;              kvm_mem_is_private(kvm, gfn);</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160; </div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mmu_8c.html#a3c4a735c02073ba03d156c2ce4cfc5e5">__kvm_mmu_max_mapping_level</a>(kvm, slot, gfn, max_level, is_private);</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_a514b4601388e83cb56ffe210d5123b50_cgraph.png" border="0" usemap="#ammu__internal_8h_a514b4601388e83cb56ffe210d5123b50_cgraph" alt=""/></div>
<map name="ammu__internal_8h_a514b4601388e83cb56ffe210d5123b50_cgraph" id="ammu__internal_8h_a514b4601388e83cb56ffe210d5123b50_cgraph">
<area shape="rect" title=" " alt="" coords="5,23,197,65"/>
<area shape="rect" href="mmu_8c.html#a3c4a735c02073ba03d156c2ce4cfc5e5" title=" " alt="" coords="245,23,452,65"/>
<area shape="rect" href="mmu_8c.html#a25a86ecdadc998ed7ceac6eb669be98f" title=" " alt="" coords="500,5,681,32"/>
<area shape="rect" href="mmu_8c.html#a1a8a0df061e27892bcc64a3e810e6c29" title=" " alt="" coords="530,56,651,83"/>
<area shape="rect" href="mmu_8h.html#a41b79b63cae220349d8eb5a54f047939" title=" " alt="" coords="729,56,836,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_a514b4601388e83cb56ffe210d5123b50_icgraph.png" border="0" usemap="#ammu__internal_8h_a514b4601388e83cb56ffe210d5123b50_icgraph" alt=""/></div>
<map name="ammu__internal_8h_a514b4601388e83cb56ffe210d5123b50_icgraph" id="ammu__internal_8h_a514b4601388e83cb56ffe210d5123b50_icgraph">
<area shape="rect" title=" " alt="" coords="3637,225,3829,266"/>
<area shape="rect" href="mmu_8c.html#a9894c31f8b002070c4d2e81846bed206" title=" " alt="" coords="3355,201,3589,228"/>
<area shape="rect" href="tdp__mmu_8c.html#ac72a38de4d0b8a5cfeace82f10cc4caf" title=" " alt="" coords="3393,254,3551,295"/>
<area shape="rect" href="mmu_8c.html#a5df94d1035651e654323995253a32292" title=" " alt="" coords="3094,191,3293,233"/>
<area shape="rect" href="mmu_8c.html#a35da5538a61de05522efdad8f615df4f" title=" " alt="" coords="2833,225,3032,266"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="2619,225,2785,266"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="2365,225,2571,266"/>
<area shape="rect" href="kvm__main_8c.html#a05eed662dd45e4e4f7485e3158d95a3b" title=" " alt="" coords="2099,232,2317,259"/>
<area shape="rect" href="kvm__main_8c.html#ac81a7d714d0668ccea6d0c2ddfd0fed5" title=" " alt="" coords="1908,232,2051,259"/>
<area shape="rect" href="kvm__main_8c.html#ac76f506181e49aa4800bb202e11cb2b3" title=" " alt="" coords="1657,232,1860,259"/>
<area shape="rect" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9" title=" " alt="" coords="1412,177,1609,204"/>
<area shape="rect" href="kvm__main_8c.html#a1a839781d3be88d418abfb2b456663ab" title=" " alt="" coords="1417,257,1605,284"/>
<area shape="rect" href="vmx_8c.html#acc48d0f16e027c2bad1268d02a2eaa68" title=" " alt="" coords="1160,51,1345,77"/>
<area shape="rect" href="lapic_8c.html#a8c6616d2cbae35632aa5debb15b552ec" title=" " alt="" coords="1146,101,1359,128"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="1167,152,1338,179"/>
<area shape="rect" href="lapic_8c.html#a017e57adbc721d98d26099f1a431a22c" title=" " alt="" coords="1141,203,1364,229"/>
<area shape="rect" href="vmx_8c.html#a15d61630d8c4e3f7aea16d3b0164a799" title=" " alt="" coords="1183,253,1323,280"/>
<area shape="rect" href="vmx_8c.html#a426fe0cb3c7fd73b276f6815b6ab9ddc" title=" " alt="" coords="933,51,1071,77"/>
<area shape="rect" href="avic_8c.html#aefc63eafb35c1efd94f6d53e7d0b20d5" title=" " alt="" coords="915,101,1089,128"/>
<area shape="rect" href="avic_8c.html#a8e0a22138080054f4ac064064402f74a" title=" " alt="" coords="737,25,851,52"/>
<area shape="rect" href="svm_8c.html#a2af2f754ca7838a0253d54c33aae7d1e" title=" " alt="" coords="504,5,640,32"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="731,113,857,140"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="935,203,1069,229"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="475,56,669,83"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="737,240,851,267"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="497,107,647,133"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="489,157,655,184"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="495,208,649,235"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="467,259,677,285"/>
<area shape="rect" href="debugfs_8c.html#af0427db3ec1a8c38ea51591abbefde57" title=" " alt="" coords="486,310,658,351"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="505,376,639,403"/>
<area shape="rect" href="sev_8c.html#ad28fd793149997c912b52490f6ca139a" title=" " alt="" coords="501,427,643,453"/>
<area shape="rect" href="sev_8c.html#af1eb77eac84f085b0a943b87f783e30d" title=" " alt="" coords="507,477,637,504"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="219,107,377,133"/>
<area shape="rect" href="sev_8c.html#abe3c569b297da3b78824074b8c08f9a7" title=" " alt="" coords="177,427,419,453"/>
<area shape="rect" href="svm_8c.html#a0e69cefce46e7b11e1e8e056ea5b6561" title=" " alt="" coords="231,477,365,504"/>
<area shape="rect" href="x86_8c.html#a384702aafa8cdbab3cf92b3d576bb6fb" title=" " alt="" coords="911,253,1093,280"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="725,400,863,427"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="531,528,613,555"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="205,528,391,555"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,528,129,555"/>
<area shape="rect" href="kvm__main_8c.html#a4c8ff5a794a6a2e77e0cfc224568ef70" title=" " alt="" coords="1151,305,1354,346"/>
<area shape="rect" href="tdp__mmu_8c.html#a3a86994ba17144f60df37ea7682d650b" title=" " alt="" coords="3080,257,3307,298"/>
</map>
</div>

</div>
</div>
<a id="a32da0c4cb2494f355e66aabe82bc1bb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32da0c4cb2494f355e66aabe82bc1bb5">&#9670;&nbsp;</a></span>kvm_mmu_page_ad_need_write_protect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_mmu_page_ad_need_write_protect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a> *&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00148">148</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;{</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">     * When using the EPT page-modification log, the GPAs in the CPU dirty</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">     * log would come from L2 rather than L1.  Therefore, we need to rely</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">     * on write protection to record dirty pages, which bypasses PML, since</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">     * writes now result in a vmexit.  Note, the check on CPU dirty logging</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">     * being enabled is mandatory as the bits used to denote WP-only SPTEs</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">     * are reserved for PAE paging (32-bit KVM).</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">return</span> kvm_x86_ops.cpu_dirty_log_size &amp;&amp; sp-&gt;<a class="code" href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">role</a>.guest_mode;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div>
<div class="ttc" id="astructkvm__mmu__page_html_a9a054096d38bb2789139b0ef5aa8fec3"><div class="ttname"><a href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">kvm_mmu_page::role</a></div><div class="ttdeci">union kvm_mmu_page_role role</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00074">mmu_internal.h:80</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_a32da0c4cb2494f355e66aabe82bc1bb5_icgraph.png" border="0" usemap="#ammu__internal_8h_a32da0c4cb2494f355e66aabe82bc1bb5_icgraph" alt=""/></div>
<map name="ammu__internal_8h_a32da0c4cb2494f355e66aabe82bc1bb5_icgraph" id="ammu__internal_8h_a32da0c4cb2494f355e66aabe82bc1bb5_icgraph">
<area shape="rect" title=" " alt="" coords="2839,440,3032,481"/>
<area shape="rect" href="spte_8c.html#ab8dba69ef9f5267d41ba061dbe101ded" title=" " alt="" coords="2663,321,2756,347"/>
<area shape="rect" href="tdp__mmu_8c.html#a8d2a2606fb90f6b6e1a2559d12c04ee8" title=" " alt="" coords="2628,495,2791,536"/>
<area shape="rect" href="mmu_8c.html#a8fc6edfe7bd2a5a7d47952232ea5b8a1" title=" " alt="" coords="2435,350,2554,377"/>
<area shape="rect" href="paging__tmpl_8h.html#a189517b8079c307a0aef9f58dc8c7a25" title=" " alt="" coords="2451,233,2538,259"/>
<area shape="rect" href="tdp__mmu_8c.html#aa98226578ebe207e97e262a86bbd5427" title=" " alt="" coords="2409,284,2580,325"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="1467,401,1562,427"/>
<area shape="rect" href="mmu_8c.html#aab93e6e4502a54b3d61492f0e052e358" title=" " alt="" coords="2152,375,2344,402"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="1487,299,1542,326"/>
<area shape="rect" href="paging__tmpl_8h.html#ac251b8f404f8fa0840ec5f4db44a6480" title=" " alt="" coords="1933,325,2045,351"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1187,401,1322,427"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="937,375,1091,402"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="931,426,1097,453"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="713,375,861,402"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="692,147,883,174"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="485,375,605,402"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="210,375,382,402"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="202,426,390,453"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="5,451,145,478"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="215,274,377,301"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="214,325,378,351"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="460,31,631,72"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="461,147,629,174"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="215,5,377,47"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="214,71,378,98"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="217,122,375,149"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="207,173,385,199"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="232,223,360,250"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="700,477,875,503"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="447,527,644,554"/>
<area shape="rect" href="mmu_8c.html#a3e794d802eeb843cd6d7b699b74d8bf3" title=" " alt="" coords="207,527,385,554"/>
<area shape="rect" href="mmu_8c.html#a00f26353045c597f6a49cdd4f239f548" title=" " alt="" coords="193,578,399,605"/>
<area shape="rect" href="mmu_8c.html#a269190dc46a1af3d04b9e039944d85b9" title=" " alt="" coords="1908,375,2071,402"/>
<area shape="rect" href="mmu_8c.html#a5a96624b696225b4bc6c90caea946cb0" title=" " alt="" coords="1681,375,1829,402"/>
<area shape="rect" href="paging__tmpl_8h.html#a53f0634ff017bc46ff621fdad18cdcd4" title=" " alt="" coords="1703,325,1807,351"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1209,299,1300,326"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="2170,223,2326,250"/>
<area shape="rect" href="tdp__mmu_8c.html#a9da9e7ba01717f85966fc080e86ecb84" title=" " alt="" coords="2413,557,2576,583"/>
<area shape="rect" href="tdp__mmu_8c.html#a302b8c57cfb6b9bc82a2f68047477145" title=" " alt="" coords="2410,502,2579,529"/>
<area shape="rect" href="tdp__mmu_8c.html#a670804848ccec53148d097c06b44657c" title=" " alt="" coords="2135,597,2361,623"/>
<area shape="rect" href="mmu_8c.html#acb92068f6e948846797ac6814b3618f1" title=" " alt="" coords="1892,608,2087,649"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="1671,608,1838,649"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="1412,608,1617,649"/>
<area shape="rect" href="kvm__main_8c.html#a05eed662dd45e4e4f7485e3158d95a3b" title=" " alt="" coords="1145,615,1364,642"/>
<area shape="rect" href="tdp__mmu_8c.html#ad1753c27bb053bc6ac3a3893e10b49f6" title=" " alt="" coords="2150,495,2346,536"/>
<area shape="rect" href="mmu_8c.html#afeee4db4dd885d0e891ccb05f545c876" title=" " alt="" coords="1905,477,2073,519"/>
<area shape="rect" href="mmu_8c.html#ace4eaa769a0c9e1f75a3900a51275d18" title=" " alt="" coords="1897,543,2082,584"/>
<area shape="rect" href="mmu_8c.html#a035ec39ab60e2a3d382c272b15fc83a6" title=" " alt="" coords="1665,511,1844,552"/>
<area shape="rect" href="dirty__ring_8c.html#a68052369106191fbc506fdf4d64be449" title=" " alt="" coords="1437,518,1593,545"/>
<area shape="rect" href="dirty__ring_8c.html#a33f93cefad4ed59214fb8dbf36de7dd1" title=" " alt="" coords="1175,518,1335,545"/>
</map>
</div>

</div>
</div>
<a id="a993d31328977f0bf21610ad74fa55a79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a993d31328977f0bf21610ad74fa55a79">&#9670;&nbsp;</a></span>kvm_mmu_page_as_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kvm_mmu_page_as_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a> *&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00143">143</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;{</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac">kvm_mmu_role_as_id</a>(sp-&gt;<a class="code" href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">role</a>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div>
<div class="ttc" id="ammu__internal_8h_html_a5334557775f77a151865c95f1cd224ac"><div class="ttname"><a href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac">kvm_mmu_role_as_id</a></div><div class="ttdeci">static int kvm_mmu_role_as_id(union kvm_mmu_page_role role)</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00138">mmu_internal.h:138</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_a993d31328977f0bf21610ad74fa55a79_cgraph.png" border="0" usemap="#ammu__internal_8h_a993d31328977f0bf21610ad74fa55a79_cgraph" alt=""/></div>
<map name="ammu__internal_8h_a993d31328977f0bf21610ad74fa55a79_cgraph" id="ammu__internal_8h_a993d31328977f0bf21610ad74fa55a79_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,177,32"/>
<area shape="rect" href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac" title=" " alt="" coords="225,5,391,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_a993d31328977f0bf21610ad74fa55a79_icgraph.png" border="0" usemap="#ammu__internal_8h_a993d31328977f0bf21610ad74fa55a79_icgraph" alt=""/></div>
<map name="ammu__internal_8h_a993d31328977f0bf21610ad74fa55a79_icgraph" id="ammu__internal_8h_a993d31328977f0bf21610ad74fa55a79_icgraph">
<area shape="rect" title=" " alt="" coords="2141,239,2313,266"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="1943,239,2093,266"/>
<area shape="rect" href="tdp__mmu_8c.html#a381e22ee819864cf1fd726479a76b6c7" title=" " alt="" coords="1304,189,1476,215"/>
<area shape="rect" href="tdp__iter_8c.html#ab290f5fe97e3911e3861f3c6035279b9" title=" " alt="" coords="1963,290,2073,317"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="1732,239,1895,266"/>
<area shape="rect" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a" title=" " alt="" coords="1537,239,1684,266"/>
<area shape="rect" href="tdp__mmu_8c.html#a692eb9d20075258e5d4a0e4289a7c9b6" title=" " alt="" coords="1291,469,1489,495"/>
<area shape="rect" href="tdp__mmu_8c.html#af6444812b70d9509539a3fa478cde14d" title=" " alt="" coords="1303,239,1477,266"/>
<area shape="rect" href="mmu_8c.html#a85202c8f53b11b1c80f9b6e26210aa9a" title=" " alt="" coords="1057,23,1227,64"/>
<area shape="rect" href="mmu_8c.html#a2683113dbbf42e73c2b52410f9ef6f84" title=" " alt="" coords="765,5,981,47"/>
<area shape="rect" href="mmu_8c.html#a13148d5065ef27624701afcaa3229983" title=" " alt="" coords="497,13,680,39"/>
<area shape="rect" href="x86_8c.html#a91673b399129921871f11d0752eea8c3" title=" " alt="" coords="234,13,411,39"/>
<area shape="rect" href="tdp__mmu_8c.html#af9c34fae0b7eac63cc78a01882498cfb" title=" " alt="" coords="1061,313,1223,339"/>
<area shape="rect" href="tdp__mmu_8c.html#a01bf8752c61ddeae2878ef46d312e00c" title=" " alt="" coords="1089,105,1195,131"/>
<area shape="rect" href="tdp__mmu_8c.html#a6588b054500f580603f94c0555fe3c06" title=" " alt="" coords="1073,393,1211,419"/>
<area shape="rect" href="tdp__mmu_8c.html#a182ff449fd87f9503148e88c33cff5ac" title=" " alt="" coords="1065,189,1219,215"/>
<area shape="rect" href="tdp__mmu_8c.html#aa07f9d272e2404a5b5392ae7aa175580" title=" " alt="" coords="1074,239,1210,266"/>
<area shape="rect" href="tdp__mmu_8c.html#a95955e5f31399228d6a722fba5a81477" title=" " alt="" coords="799,313,946,339"/>
<area shape="rect" href="tdp__mmu_8c.html#aca0f6025bf55596c80647e3a35997d92" title=" " alt="" coords="502,359,675,386"/>
<area shape="rect" href="tdp__mmu_8c.html#a8ab26f4fb05f388d8bcf04ad89ee6797" title=" " alt="" coords="473,293,704,335"/>
<area shape="rect" href="mmu_8c.html#a6db2d9d04af40584cbde51a2e1f74837" title=" " alt="" coords="250,359,395,386"/>
<area shape="rect" href="tdp__mmu_8c.html#a73432bf42fbb3d43b3e04f88cd92b592" title=" " alt="" coords="220,309,425,335"/>
<area shape="rect" href="mmu_8c.html#abd59fd9785b9b5676841e9706c1c6797" title=" " alt="" coords="234,258,411,285"/>
<area shape="rect" href="tdp__mmu_8c.html#aa53a75612d7b32153949be34f4055144" title=" " alt="" coords="767,71,978,98"/>
<area shape="rect" href="mmu_8c.html#a978186d69e4a1b753b9650294d80ca7d" title=" " alt="" coords="518,71,659,98"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="511,477,667,503"/>
<area shape="rect" href="tdp__mmu_8c.html#acf7d062eca8e6190d76f4934c290be61" title=" " alt="" coords="774,375,971,402"/>
<area shape="rect" href="tdp__mmu_8c.html#afa070d8c089f8547cfc2dbafa856e99c" title=" " alt="" coords="509,411,668,452"/>
<area shape="rect" href="tdp__mmu_8c.html#a57310f6ad7e70c13dadcfd30aa71af6d" title=" " alt="" coords="233,411,413,452"/>
<area shape="rect" href="tdp__mmu_8c.html#aaa8f0898db08dd5c9213ac2f8b355501" title=" " alt="" coords="773,123,973,164"/>
<area shape="rect" href="tdp__mmu_8c.html#aa4fb1a66a2bc67f8699e8ddafdd4b1e8" title=" " alt="" coords="778,189,967,215"/>
<area shape="rect" href="mmu_8c.html#aa37fc9ea36d6c97e97d77af76eca5767" title=" " alt="" coords="501,126,676,153"/>
<area shape="rect" href="mmu_8c.html#a8b2588158566c9bb798cdb77760e6446" title=" " alt="" coords="512,177,665,203"/>
<area shape="rect" href="x86_8c.html#ac280f3f33408b1fead3c38127a2ab3e9" title=" " alt="" coords="247,127,398,168"/>
<area shape="rect" href="x86_8c.html#ab61af196de8a3705f59d9915b5eb1a0e" title=" " alt="" coords="224,192,421,233"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="253,75,393,102"/>
<area shape="rect" href="tdp__mmu_8c.html#a45fd618d35fb0df14a3401a230f41faa" title=" " alt="" coords="752,239,993,266"/>
<area shape="rect" href="mmu_8c.html#a1f49638b71a482e4b0c3a6af10d0711e" title=" " alt="" coords="493,228,684,269"/>
<area shape="rect" href="tdp__mmu_8c.html#a9da9e7ba01717f85966fc080e86ecb84" title=" " alt="" coords="1061,527,1223,554"/>
<area shape="rect" href="tdp__mmu_8c.html#aa98226578ebe207e97e262a86bbd5427" title=" " alt="" coords="1057,461,1227,503"/>
<area shape="rect" href="tdp__mmu_8c.html#ab901a77cd00a4e809baa9a25e289b59d" title=" " alt="" coords="1041,582,1243,609"/>
<area shape="rect" href="tdp__mmu_8c.html#ae3e523e725021c7dd3f3796f4e074a37" title=" " alt="" coords="1074,637,1210,663"/>
<area shape="rect" href="tdp__mmu_8c.html#a670804848ccec53148d097c06b44657c" title=" " alt="" coords="759,527,986,554"/>
<area shape="rect" href="mmu_8c.html#acb92068f6e948846797ac6814b3618f1" title=" " alt="" coords="225,513,420,555"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="5,579,172,620"/>
<area shape="rect" href="tdp__mmu_8c.html#ac72a38de4d0b8a5cfeace82f10cc4caf" title=" " alt="" coords="794,579,951,620"/>
<area shape="rect" href="tdp__mmu_8c.html#a3a86994ba17144f60df37ea7682d650b" title=" " alt="" coords="475,579,702,620"/>
<area shape="rect" href="mmu_8c.html#a35da5538a61de05522efdad8f615df4f" title=" " alt="" coords="223,579,422,620"/>
<area shape="rect" href="tdp__mmu_8c.html#a7f6c658f3ddf3ffac5ce96335b78e295" title=" " alt="" coords="773,646,973,673"/>
<area shape="rect" href="mmu_8c.html#a168b7814e68a545abd8bf00fc4466610" title=" " alt="" coords="233,644,413,685"/>
</map>
</div>

</div>
</div>
<a id="a5334557775f77a151865c95f1cd224ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5334557775f77a151865c95f1cd224ac">&#9670;&nbsp;</a></span>kvm_mmu_role_as_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kvm_mmu_role_as_id </td>
          <td>(</td>
          <td class="paramtype">union kvm_mmu_page_role&#160;</td>
          <td class="paramname"><em>role</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu__internal_8h_source.html#l00138">138</a> of file <a class="el" href="mmu__internal_8h_source.html">mmu_internal.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;{</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">return</span> role.smm ? 1 : 0;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_a5334557775f77a151865c95f1cd224ac_icgraph.png" border="0" usemap="#ammu__internal_8h_a5334557775f77a151865c95f1cd224ac_icgraph" alt=""/></div>
<map name="ammu__internal_8h_a5334557775f77a151865c95f1cd224ac_icgraph" id="ammu__internal_8h_a5334557775f77a151865c95f1cd224ac_icgraph">
<area shape="rect" title=" " alt="" coords="2171,265,2336,291"/>
<area shape="rect" href="mmu__internal_8h.html#a993d31328977f0bf21610ad74fa55a79" title=" " alt="" coords="1943,225,2115,251"/>
<area shape="rect" href="tdp__mmu_8c.html#ae643f902f826e920f4150bb66872fd47" title=" " alt="" coords="1936,287,2123,328"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="1723,265,1874,291"/>
<area shape="rect" href="tdp__mmu_8c.html#a381e22ee819864cf1fd726479a76b6c7" title=" " alt="" coords="1071,214,1243,241"/>
<area shape="rect" href="tdp__iter_8c.html#ab290f5fe97e3911e3861f3c6035279b9" title=" " alt="" coords="1744,163,1853,190"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="1499,265,1661,291"/>
<area shape="rect" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a" title=" " alt="" coords="1304,265,1451,291"/>
<area shape="rect" href="tdp__mmu_8c.html#a692eb9d20075258e5d4a0e4289a7c9b6" title=" " alt="" coords="1057,434,1256,461"/>
<area shape="rect" href="tdp__mmu_8c.html#af6444812b70d9509539a3fa478cde14d" title=" " alt="" coords="1069,265,1244,291"/>
<area shape="rect" href="mmu_8c.html#a85202c8f53b11b1c80f9b6e26210aa9a" title=" " alt="" coords="824,23,993,64"/>
<area shape="rect" href="mmu_8c.html#a2683113dbbf42e73c2b52410f9ef6f84" title=" " alt="" coords="531,5,747,47"/>
<area shape="rect" href="mmu_8c.html#a13148d5065ef27624701afcaa3229983" title=" " alt="" coords="264,13,447,39"/>
<area shape="rect" href="x86_8c.html#a91673b399129921871f11d0752eea8c3" title=" " alt="" coords="10,13,187,39"/>
<area shape="rect" href="tdp__mmu_8c.html#af9c34fae0b7eac63cc78a01882498cfb" title=" " alt="" coords="828,290,989,317"/>
<area shape="rect" href="tdp__mmu_8c.html#a01bf8752c61ddeae2878ef46d312e00c" title=" " alt="" coords="856,105,961,131"/>
<area shape="rect" href="tdp__mmu_8c.html#a6588b054500f580603f94c0555fe3c06" title=" " alt="" coords="840,358,977,385"/>
<area shape="rect" href="tdp__mmu_8c.html#a182ff449fd87f9503148e88c33cff5ac" title=" " alt="" coords="832,189,985,215"/>
<area shape="rect" href="tdp__mmu_8c.html#aa07f9d272e2404a5b5392ae7aa175580" title=" " alt="" coords="841,239,977,266"/>
<area shape="rect" href="tdp__mmu_8c.html#a95955e5f31399228d6a722fba5a81477" title=" " alt="" coords="566,290,713,317"/>
<area shape="rect" href="tdp__mmu_8c.html#aca0f6025bf55596c80647e3a35997d92" title=" " alt="" coords="269,286,442,313"/>
<area shape="rect" href="tdp__mmu_8c.html#a8ab26f4fb05f388d8bcf04ad89ee6797" title=" " alt="" coords="240,220,471,261"/>
<area shape="rect" href="tdp__mmu_8c.html#aa53a75612d7b32153949be34f4055144" title=" " alt="" coords="534,71,745,98"/>
<area shape="rect" href="mmu_8c.html#a978186d69e4a1b753b9650294d80ca7d" title=" " alt="" coords="285,71,426,98"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="277,403,433,430"/>
<area shape="rect" href="tdp__mmu_8c.html#acf7d062eca8e6190d76f4934c290be61" title=" " alt="" coords="541,341,738,367"/>
<area shape="rect" href="tdp__mmu_8c.html#afa070d8c089f8547cfc2dbafa856e99c" title=" " alt="" coords="276,337,435,379"/>
<area shape="rect" href="tdp__mmu_8c.html#aaa8f0898db08dd5c9213ac2f8b355501" title=" " alt="" coords="539,123,739,164"/>
<area shape="rect" href="tdp__mmu_8c.html#aa4fb1a66a2bc67f8699e8ddafdd4b1e8" title=" " alt="" coords="545,189,734,215"/>
<area shape="rect" href="mmu_8c.html#aa37fc9ea36d6c97e97d77af76eca5767" title=" " alt="" coords="268,130,443,157"/>
<area shape="rect" href="tdp__mmu_8c.html#a45fd618d35fb0df14a3401a230f41faa" title=" " alt="" coords="519,239,760,266"/>
<area shape="rect" href="tdp__mmu_8c.html#a9da9e7ba01717f85966fc080e86ecb84" title=" " alt="" coords="827,493,990,519"/>
<area shape="rect" href="tdp__mmu_8c.html#aa98226578ebe207e97e262a86bbd5427" title=" " alt="" coords="823,427,994,468"/>
<area shape="rect" href="tdp__mmu_8c.html#ab901a77cd00a4e809baa9a25e289b59d" title=" " alt="" coords="808,545,1009,571"/>
<area shape="rect" href="tdp__mmu_8c.html#ae3e523e725021c7dd3f3796f4e074a37" title=" " alt="" coords="841,599,977,626"/>
<area shape="rect" href="tdp__mmu_8c.html#a670804848ccec53148d097c06b44657c" title=" " alt="" coords="526,493,753,519"/>
<area shape="rect" href="mmu_8c.html#acb92068f6e948846797ac6814b3618f1" title=" " alt="" coords="258,476,453,517"/>
<area shape="rect" href="tdp__mmu_8c.html#ac72a38de4d0b8a5cfeace82f10cc4caf" title=" " alt="" coords="561,544,718,585"/>
<area shape="rect" href="tdp__mmu_8c.html#a3a86994ba17144f60df37ea7682d650b" title=" " alt="" coords="242,541,469,583"/>
<area shape="rect" href="tdp__mmu_8c.html#a7f6c658f3ddf3ffac5ce96335b78e295" title=" " alt="" coords="539,613,739,639"/>
<area shape="rect" href="mmu_8c.html#a168b7814e68a545abd8bf00fc4466610" title=" " alt="" coords="265,607,445,648"/>
<area shape="rect" href="mmu_8c.html#a171383889d717b24003ee27735437bbe" title=" " alt="" coords="1709,315,1888,342"/>
<area shape="rect" href="mmu_8c.html#a475bd00898314bb9378d8e4306aa7874" title=" " alt="" coords="1517,467,1643,494"/>
<area shape="rect" href="mmu_8h.html#ab0e194ecad859add3d639850021f8b16" title=" " alt="" coords="1307,657,1447,683"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="1071,708,1242,749"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="571,667,708,694"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="828,708,989,749"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="552,718,727,745"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="315,673,396,699"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="5,673,192,699"/>
</map>
</div>

</div>
</div>
<a id="a1f49638b71a482e4b0c3a6af10d0711e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f49638b71a482e4b0c3a6af10d0711e">&#9670;&nbsp;</a></span>kvm_mmu_slot_gfn_write_protect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_mmu_slot_gfn_write_protect </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_memory_slot *&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>gfn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min_level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l01414">1414</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;{</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <span class="keyword">struct </span>kvm_rmap_head *rmap_head;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <span class="keywordtype">bool</span> write_protected = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160; </div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mmu_8h.html#ac9867cac2f7c0a763088b2112951b5ac">kvm_memslots_have_rmaps</a>(kvm)) {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        <span class="keywordflow">for</span> (i = min_level; i &lt;= KVM_MAX_HUGEPAGE_LEVEL; ++i) {</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;            rmap_head = <a class="code" href="mmu_8c.html#a6c0de1f668bad24810049a8ea46883a5">gfn_to_rmap</a>(gfn, i, slot);</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;            write_protected |= <a class="code" href="mmu_8c.html#a3e1cbf10ba62d93c99dffc655ec0282a">rmap_write_protect</a>(rmap_head, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        }</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    }</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160; </div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mmu_8h.html#a1e6b88ba1c393126e54e78a220a4473f">tdp_mmu_enabled</a>)</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        write_protected |=</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;            <a class="code" href="tdp__mmu_8c.html#a45fd618d35fb0df14a3401a230f41faa">kvm_tdp_mmu_write_protect_gfn</a>(kvm, slot, gfn, min_level);</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160; </div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="keywordflow">return</span> write_protected;</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;}</div>
<div class="ttc" id="ammu_8c_html_a3e1cbf10ba62d93c99dffc655ec0282a"><div class="ttname"><a href="mmu_8c.html#a3e1cbf10ba62d93c99dffc655ec0282a">rmap_write_protect</a></div><div class="ttdeci">static bool rmap_write_protect(struct kvm_rmap_head *rmap_head, bool pt_protect)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l01244">mmu.c:1244</a></div></div>
<div class="ttc" id="ammu_8c_html_a6c0de1f668bad24810049a8ea46883a5"><div class="ttname"><a href="mmu_8c.html#a6c0de1f668bad24810049a8ea46883a5">gfn_to_rmap</a></div><div class="ttdeci">static struct kvm_rmap_head * gfn_to_rmap(gfn_t gfn, int level, const struct kvm_memory_slot *slot)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l01086">mmu.c:1086</a></div></div>
<div class="ttc" id="ammu_8h_html_a1e6b88ba1c393126e54e78a220a4473f"><div class="ttname"><a href="mmu_8h.html#a1e6b88ba1c393126e54e78a220a4473f">tdp_mmu_enabled</a></div><div class="ttdeci">#define tdp_mmu_enabled</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00276">mmu.h:276</a></div></div>
<div class="ttc" id="ammu_8h_html_ac9867cac2f7c0a763088b2112951b5ac"><div class="ttname"><a href="mmu_8h.html#ac9867cac2f7c0a763088b2112951b5ac">kvm_memslots_have_rmaps</a></div><div class="ttdeci">static bool kvm_memslots_have_rmaps(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00279">mmu.h:279</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_a45fd618d35fb0df14a3401a230f41faa"><div class="ttname"><a href="tdp__mmu_8c.html#a45fd618d35fb0df14a3401a230f41faa">kvm_tdp_mmu_write_protect_gfn</a></div><div class="ttdeci">bool kvm_tdp_mmu_write_protect_gfn(struct kvm *kvm, struct kvm_memory_slot *slot, gfn_t gfn, int min_level)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l01746">tdp_mmu.c:1746</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_a1f49638b71a482e4b0c3a6af10d0711e_cgraph.png" border="0" usemap="#ammu__internal_8h_a1f49638b71a482e4b0c3a6af10d0711e_cgraph" alt=""/></div>
<map name="ammu__internal_8h_a1f49638b71a482e4b0c3a6af10d0711e_cgraph" id="ammu__internal_8h_a1f49638b71a482e4b0c3a6af10d0711e_cgraph">
<area shape="rect" title=" " alt="" coords="5,891,196,932"/>
<area shape="rect" href="mmu_8c.html#a6c0de1f668bad24810049a8ea46883a5" title=" " alt="" coords="313,822,417,849"/>
<area shape="rect" href="mmu_8h.html#ac9867cac2f7c0a763088b2112951b5ac" title=" " alt="" coords="259,873,470,899"/>
<area shape="rect" href="tdp__mmu_8c.html#a45fd618d35fb0df14a3401a230f41faa" title=" " alt="" coords="244,923,485,950"/>
<area shape="rect" href="mmu_8c.html#a3e1cbf10ba62d93c99dffc655ec0282a" title=" " alt="" coords="802,1174,951,1201"/>
<area shape="rect" href="mmu_8h.html#a41b79b63cae220349d8eb5a54f047939" title=" " alt="" coords="584,822,691,849"/>
<area shape="rect" href="mmu_8h.html#a89c85e383e0f6dfe6f91f5c1dd25e522" title=" " alt="" coords="533,873,741,899"/>
<area shape="rect" href="tdp__mmu_8c.html#aa07f9d272e2404a5b5392ae7aa175580" title=" " alt="" coords="569,923,705,950"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="2193,271,2292,298"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="2832,741,3007,767"/>
<area shape="rect" href="tdp__mmu_8c.html#af6444812b70d9509539a3fa478cde14d" title=" " alt="" coords="789,723,964,750"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="2445,271,2546,298"/>
<area shape="rect" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a" title=" " alt="" coords="1012,373,1159,399"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="1207,499,1369,526"/>
<area shape="rect" href="spte_8h.html#ad52bae526742289dbd54348dfa55310b" title=" " alt="" coords="1677,347,1811,374"/>
<area shape="rect" href="tdp__iter_8h.html#a74cc1f032b50c7c6c64ded8866deb4a4" title=" " alt="" coords="1647,94,1841,121"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="2165,956,2320,997"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="1433,195,1583,222"/>
<area shape="rect" href="spte_8h.html#a16669248c64937ddec714d855609cacb" title=" " alt="" coords="1927,702,2061,729"/>
<area shape="rect" href="spte_8h.html#a0726c9cf54d23a373533a0833aaf979c" title=" " alt="" coords="1941,803,2047,830"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="1451,601,1565,627"/>
<area shape="rect" href="kvm__main_8c.html#ad88d3f7ece0c0ad7dce0c296133beccb" title=" " alt="" coords="1907,651,2081,678"/>
<area shape="rect" href="kvm__main_8c.html#a3617d51882e6aba0abae53c0bf922873" title=" " alt="" coords="1923,550,2065,577"/>
<area shape="rect" href="mmu_8h.html#a9d589fd96a814e43fc146f83dc5d5f73" title=" " alt="" coords="1417,347,1599,374"/>
<area shape="rect" href="tdp__iter_8c.html#ae565103c187af07e69eb2f29b180b977" title=" " alt="" coords="1930,405,2058,431"/>
<area shape="rect" href="spte_8h.html#a88a720d39abac3aee2f63e03a20e8abd" title=" " alt="" coords="2193,753,2292,779"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="2435,993,2556,1019"/>
<area shape="rect" href="mmu__internal_8h.html#a993d31328977f0bf21610ad74fa55a79" title=" " alt="" coords="1658,195,1830,222"/>
<area shape="rect" href="tdp__iter_8h.html#ae1b8feffcbd421cbcb6a40cd57abf768" title=" " alt="" coords="1649,246,1839,273"/>
<area shape="rect" href="tdp__iter_8h.html#a2138ed5465b3552439c1ad55ee1bc6d1" title=" " alt="" coords="1897,220,2091,261"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="2668,665,2768,691"/>
<area shape="rect" href="tdp__iter_8h.html#acce3a5afd04a68fc666c32e91d8c1770" title=" " alt="" coords="1889,94,2099,121"/>
<area shape="rect" href="tdp__iter_8h.html#ae00f2a54e0e899c2f169396a9c10d223" title=" " alt="" coords="1897,155,2091,196"/>
<area shape="rect" href="spte_8c.html#a11de60840b247621debae854aea928db" title=" " alt="" coords="2159,702,2326,729"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="2416,665,2575,691"/>
<area shape="rect" href="spte_8h.html#a976cddc84d935189584bdce94d4805fd" title=" " alt="" coords="2652,715,2784,742"/>
<area shape="rect" href="spte_8h.html#aeb796217990be75433fd1430d5958184" title=" " alt="" coords="2411,1174,2580,1201"/>
<area shape="rect" href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8" title=" " alt="" coords="2387,614,2604,641"/>
<area shape="rect" href="spte_8h.html#ad4cab344dce7557c80f815d4dc072deb" title=" " alt="" coords="2402,766,2589,793"/>
<area shape="rect" href="kvm__main_8c.html#a05228520c714138c61d76bfbc12c162c" title=" " alt="" coords="2151,550,2335,577"/>
<area shape="rect" href="kvm__main_8c.html#aefbc4e0cbda09938de01d0afb0c06d59" title=" " alt="" coords="2402,538,2589,565"/>
<area shape="rect" href="kvm__main_8c.html#adb6ddc9dc8c5e447e04b1be97543f347" title=" " alt="" coords="2165,499,2320,526"/>
<area shape="rect" href="mmu_8c.html#afac424a6a4cdd467fc2d6ba22b88d08f" title=" " alt="" coords="1437,1174,1579,1201"/>
<area shape="rect" href="mmu_8c.html#a5b9a8fea2e61370d22c2d256b5bc33da" title=" " alt="" coords="1673,883,1815,910"/>
<area shape="rect" href="mmu_8c.html#aa9f7f9c3b251235e8e59c6e0c07c5fab" title=" " alt="" coords="1911,905,2077,947"/>
<area shape="rect" href="mmu_8c.html#a29dd1887c83a0d49219b0fd5f28ce401" title=" " alt="" coords="2149,905,2336,931"/>
<area shape="rect" href="mmu_8c.html#ab201fe546ae5c64aba03e7b56a97c47c" title=" " alt="" coords="2147,854,2339,881"/>
<area shape="rect" href="mmu_8c.html#a9943be93aca53a3193bd9e7d289290bd" title=" " alt="" coords="2183,1275,2302,1302"/>
<area shape="rect" href="mmu_8c.html#a524e5e4e93e5542da2fc8898e6b488ef" title=" " alt="" coords="2429,845,2561,871"/>
<area shape="rect" href="mmu_8c.html#af19b3539f6ed07ed97e87a790f246ce8" title=" " alt="" coords="2450,1225,2541,1251"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_a1f49638b71a482e4b0c3a6af10d0711e_icgraph.png" border="0" usemap="#ammu__internal_8h_a1f49638b71a482e4b0c3a6af10d0711e_icgraph" alt=""/></div>
<map name="ammu__internal_8h_a1f49638b71a482e4b0c3a6af10d0711e_icgraph" id="ammu__internal_8h_a1f49638b71a482e4b0c3a6af10d0711e_icgraph">
<area shape="rect" title=" " alt="" coords="2659,78,2849,119"/>
<area shape="rect" href="page__track_8c.html#ab6a4ffea76ea12eb3b1e83eafaf4618b" title=" " alt="" coords="2403,5,2607,32"/>
<area shape="rect" href="mmu_8c.html#aec5cf4265713109c5e2ea673c610cd03" title=" " alt="" coords="2201,56,2347,83"/>
<area shape="rect" href="mmu_8c.html#a035ec39ab60e2a3d382c272b15fc83a6" title=" " alt="" coords="2416,107,2595,149"/>
<area shape="rect" href="mmu_8c.html#a2e21344d37e1f1c8c347bed8627da8db" title=" " alt="" coords="2400,173,2611,200"/>
<area shape="rect" href="mmu_8c.html#a6f305a17525ee7345f0f852070869e4c" title=" " alt="" coords="1921,56,2148,83"/>
<area shape="rect" href="mmu_8c.html#a1ade612e5d4a58575df9428f6ad72bb9" title=" " alt="" coords="1643,56,1873,83"/>
<area shape="rect" href="mmu_8c.html#a0afaf010cb78207cd01091773878f1f2" title=" " alt="" coords="1432,107,1595,133"/>
<area shape="rect" href="mmu_8c.html#a0ebfdae56a33b8ca22e8fa22268fe033" title=" " alt="" coords="1196,49,1384,90"/>
<area shape="rect" href="mmu_8c.html#aa0069ee555cb7a0001ed142edc326369" title=" " alt="" coords="1200,119,1380,145"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="987,119,1082,145"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="1007,171,1062,197"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="719,119,853,145"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="465,165,620,192"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="459,115,626,141"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="741,171,831,197"/>
<area shape="rect" href="mmu_8c.html#abe6e7771da6f6df50052156316535466" title=" " alt="" coords="921,56,1148,83"/>
<area shape="rect" href="mmu_8c.html#a03732600ed110f429f4a2d526a303bcb" title=" " alt="" coords="699,49,873,90"/>
<area shape="rect" href="mmu_8c.html#a2e109b8775cdfe9924c3d331ac5f332f" title=" " alt="" coords="456,49,629,90"/>
<area shape="rect" href="mmu_8c.html#adfe576663ff84a7b51773d87e91dd28a" title=" " alt="" coords="200,49,375,90"/>
<area shape="rect" href="dirty__ring_8c.html#a68052369106191fbc506fdf4d64be449" title=" " alt="" coords="2196,115,2352,141"/>
<area shape="rect" href="dirty__ring_8c.html#a33f93cefad4ed59214fb8dbf36de7dd1" title=" " alt="" coords="1955,115,2115,141"/>
<area shape="rect" href="kvm__main_8c.html#a91e959c20554917ba05e7feea69acc7c" title=" " alt="" coords="1681,107,1835,149"/>
<area shape="rect" href="mmu_8c.html#a2f33377dcdaf5435e453ff75e02075dd" title=" " alt="" coords="2198,173,2350,200"/>
<area shape="rect" href="mmu_8c.html#ab00408fb7acb0199782175051f59add6" title=" " alt="" coords="1950,316,2119,343"/>
<area shape="rect" href="mmu_8c.html#a475bd00898314bb9378d8e4306aa7874" title=" " alt="" coords="1695,291,1821,317"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="717,341,855,368"/>
<area shape="rect" href="x86_8c.html#a334f9c72dae5c0a2867b04acbc2beb6e" title=" " alt="" coords="1215,414,1365,455"/>
<area shape="rect" href="mmu_8h.html#ab0e194ecad859add3d639850021f8b16" title=" " alt="" coords="1443,291,1583,317"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="1205,225,1375,266"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="954,225,1115,266"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="699,232,873,259"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="502,216,583,243"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="194,216,381,243"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="11,216,135,243"/>
<area shape="rect" href="x86_8c.html#abf28742eaf88f469f322233afeb66b59" title=" " alt="" coords="951,494,1118,535"/>
<area shape="rect" href="x86_8c.html#a187212c772cf6e896de2a5304f88b9fb" title=" " alt="" coords="965,392,1104,419"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="709,501,863,528"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="213,583,361,609"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="481,669,604,696"/>
<area shape="rect" href="vmx_2nested_8c.html#a4e307e2bcf664c83265b1442e3fc8da2" title=" " alt="" coords="455,722,631,763"/>
<area shape="rect" href="vmx_2nested_8c.html#ad3cab9cf8633364513bd6a24caecf41a" title=" " alt="" coords="435,267,651,309"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="188,388,387,415"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fcc88ceee4f57a3dbf23fedb46a5cb" title=" " alt="" coords="467,553,618,594"/>
<area shape="rect" href="vmx_2nested_8c.html#aedc5821e9af5c7bd4aac6c06f4ca046f" title=" " alt="" coords="453,333,633,360"/>
<area shape="rect" href="vmx_2hyperv_8c.html#a937e30dece4579b71b17efcd54c1d910" title=" " alt="" coords="451,385,635,426"/>
<area shape="rect" href="vmx_2nested_8c.html#a64e6550fab681b40c832fe4e2d5e3b95" title=" " alt="" coords="470,451,615,477"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="5,583,140,609"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="202,659,373,701"/>
<area shape="rect" href="vmx_2nested_8c.html#a6a1c45a52fde9844f4431a9db00dbf9f" title=" " alt="" coords="206,725,369,766"/>
</map>
</div>

</div>
</div>
<a id="a4bd7a8fd81e65c4e06e025d92c5787d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bd7a8fd81e65c4e06e025d92c5787d9">&#9670;&nbsp;</a></span>kvm_tdp_page_fault()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_tdp_page_fault </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__page__fault.html">kvm_page_fault</a> *&#160;</td>
          <td class="paramname"><em>fault</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l04623">4623</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;{</div>
<div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;<span class="comment">     * If the guest&#39;s MTRRs may be used to compute the &quot;real&quot; memtype,</span></div>
<div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;<span class="comment">     * restrict the mapping level to ensure KVM uses a consistent memtype</span></div>
<div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;<span class="comment">     * across the entire mapping.</span></div>
<div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mmu_8h.html#a11c275bc8cfad409c0681f0c953ebcae">kvm_mmu_honors_guest_mtrrs</a>(vcpu-&gt;kvm)) {</div>
<div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;        <span class="keywordflow">for</span> ( ; fault-&gt;<a class="code" href="structkvm__page__fault.html#ab5cc4b80577775008ffd38c21b75d2b6">max_level</a> &gt; PG_LEVEL_4K; --fault-&gt;<a class="code" href="structkvm__page__fault.html#ab5cc4b80577775008ffd38c21b75d2b6">max_level</a>) {</div>
<div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;            <span class="keywordtype">int</span> page_num = KVM_PAGES_PER_HPAGE(fault-&gt;<a class="code" href="structkvm__page__fault.html#ab5cc4b80577775008ffd38c21b75d2b6">max_level</a>);</div>
<div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;            gfn_t base = <a class="code" href="mmu__internal_8h.html#a8805295a6f11129455d5b87a86fd3db5">gfn_round_for_level</a>(fault-&gt;<a class="code" href="structkvm__page__fault.html#a27031ff0dd2c0b28283774456a29f066">gfn</a>,</div>
<div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;                             fault-&gt;<a class="code" href="structkvm__page__fault.html#ab5cc4b80577775008ffd38c21b75d2b6">max_level</a>);</div>
<div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160; </div>
<div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="mtrr_8c.html#ae3f4e197f50db225e34de21d65633fcb">kvm_mtrr_check_gfn_range_consistency</a>(vcpu, base, page_num))</div>
<div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;        }</div>
<div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;    }</div>
<div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160; </div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;<span class="preprocessor">#ifdef CONFIG_X86_64</span></div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mmu_8h.html#a1e6b88ba1c393126e54e78a220a4473f">tdp_mmu_enabled</a>)</div>
<div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;        <span class="keywordflow">return</span> kvm_tdp_mmu_page_fault(vcpu, fault);</div>
<div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160; </div>
<div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d">direct_page_fault</a>(vcpu, fault);</div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;}</div>
<div class="ttc" id="ammu_8c_html_aebe1e577e70e9f77f0bfea48bab7c83d"><div class="ttname"><a href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d">direct_page_fault</a></div><div class="ttdeci">static int direct_page_fault(struct kvm_vcpu *vcpu, struct kvm_page_fault *fault)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l04491">mmu.c:4491</a></div></div>
<div class="ttc" id="ammu_8h_html_a11c275bc8cfad409c0681f0c953ebcae"><div class="ttname"><a href="mmu_8h.html#a11c275bc8cfad409c0681f0c953ebcae">kvm_mmu_honors_guest_mtrrs</a></div><div class="ttdeci">static bool kvm_mmu_honors_guest_mtrrs(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00250">mmu.h:250</a></div></div>
<div class="ttc" id="amtrr_8c_html_ae3f4e197f50db225e34de21d65633fcb"><div class="ttname"><a href="mtrr_8c.html#ae3f4e197f50db225e34de21d65633fcb">kvm_mtrr_check_gfn_range_consistency</a></div><div class="ttdeci">bool kvm_mtrr_check_gfn_range_consistency(struct kvm_vcpu *vcpu, gfn_t gfn, int page_num)</div><div class="ttdef"><b>Definition:</b> <a href="mtrr_8c_source.html#l00690">mtrr.c:690</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_a4bd7a8fd81e65c4e06e025d92c5787d9_cgraph.png" border="0" usemap="#ammu__internal_8h_a4bd7a8fd81e65c4e06e025d92c5787d9_cgraph" alt=""/></div>
<map name="ammu__internal_8h_a4bd7a8fd81e65c4e06e025d92c5787d9_cgraph" id="ammu__internal_8h_a4bd7a8fd81e65c4e06e025d92c5787d9_cgraph">
<area shape="rect" title=" " alt="" coords="5,1129,160,1156"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="234,991,369,1017"/>
<area shape="rect" href="mmu__internal_8h.html#a8805295a6f11129455d5b87a86fd3db5" title=" " alt="" coords="761,696,911,723"/>
<area shape="rect" href="mmu_8h.html#a11c275bc8cfad409c0681f0c953ebcae" title=" " alt="" coords="208,1234,395,1275"/>
<area shape="rect" href="mtrr_8c.html#ae3f4e197f50db225e34de21d65633fcb" title=" " alt="" coords="222,1321,381,1362"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="515,224,610,251"/>
<area shape="rect" href="mmu_8c.html#a19bf28eb1ca5198dc125fd42f26c789e" title=" " alt="" coords="775,629,897,656"/>
<area shape="rect" href="mmu_8c.html#ad6d58376bff6747099d7b2a652b0af17" title=" " alt="" coords="489,813,637,840"/>
<area shape="rect" href="mmu__internal_8h.html#a6491934fd3538f608b4b91245943b6fc" title=" " alt="" coords="1009,1016,1209,1043"/>
<area shape="rect" href="mmu_8c.html#a62cf3d1ba1f946897f545d9a93db988f" title=" " alt="" coords="499,965,627,992"/>
<area shape="rect" href="kvm__main_8c.html#af83e69473e2fe5bf6e452f3fc1f414d2" title=" " alt="" coords="748,1067,924,1093"/>
<area shape="rect" href="mmu_8c.html#aa3aace355fab834a27a73054cd060480" title=" " alt="" coords="457,1067,669,1093"/>
<area shape="rect" href="mmu_8c.html#a1d91ca91e581985c5a26ba6ca434733f" title=" " alt="" coords="455,1117,670,1144"/>
<area shape="rect" href="mmu_8c.html#a842bf3ec47076504467de1b25cfa572d" title=" " alt="" coords="472,1169,653,1210"/>
<area shape="rect" href="mmu_8c.html#ad81f091dfb1d3dc16b40f6a162de4a8c" title=" " alt="" coords="749,13,923,40"/>
<area shape="rect" href="mmu_8c.html#a5a96624b696225b4bc6c90caea946cb0" title=" " alt="" coords="762,72,910,99"/>
<area shape="rect" href="mmu_8c.html#ae810dbeb6cd413090f54ca0cf864fe49" title=" " alt="" coords="1028,107,1191,149"/>
<area shape="rect" href="mmu_8c.html#aa0069ee555cb7a0001ed142edc326369" title=" " alt="" coords="746,173,926,200"/>
<area shape="rect" href="mmu_8c.html#ab3ace8d82fe9d5e1653277159c5ad4df" title=" " alt="" coords="731,275,941,301"/>
<area shape="rect" href="mmu_8c.html#a66e1553cd71750b6b4d9e4b6e7764a2b" title=" " alt="" coords="765,325,907,352"/>
<area shape="rect" href="mmu_8c.html#a8fc6edfe7bd2a5a7d47952232ea5b8a1" title=" " alt="" coords="777,224,895,251"/>
<area shape="rect" href="mmu_8c.html#ad3e86bf491c8c2726e3bc6702166cfdf" title=" " alt="" coords="1001,5,1218,32"/>
<area shape="rect" href="mmu_8c.html#a269190dc46a1af3d04b9e039944d85b9" title=" " alt="" coords="1028,56,1191,83"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="1059,275,1159,301"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="1277,173,1452,200"/>
<area shape="rect" href="mmu_8c.html#a7a30f054b63184f3edafba0d2645dbb2" title=" " alt="" coords="1025,376,1194,403"/>
<area shape="rect" href="mmu_8c.html#ae43dc19a9042605e9280d9b1901549d4" title=" " alt="" coords="1025,427,1194,453"/>
<area shape="rect" href="mmu_8c.html#adf8fd258fb065555355c0ef2bc7e01e6" title=" " alt="" coords="1038,477,1181,504"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="1030,528,1189,555"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="1060,579,1159,605"/>
<area shape="rect" href="spte_8h.html#aeb796217990be75433fd1430d5958184" title=" " alt="" coords="1025,629,1194,656"/>
<area shape="rect" href="spte_8h.html#ac3f82ba169af94a026b5df40f3d3753e" title=" " alt="" coords="1298,705,1431,732"/>
<area shape="rect" href="tdp__mmu_8c.html#ab831f739cbe511803c4752d84ffab75c" title=" " alt="" coords="1023,782,1195,823"/>
<area shape="rect" href="mmu_8c.html#a915030adfc07c25d675f2069d09acab8" title=" " alt="" coords="1021,731,1197,757"/>
<area shape="rect" href="spte_8h.html#abc2b9043d48550e741fda1e2ad36a652" title=" " alt="" coords="1023,848,1195,875"/>
<area shape="rect" href="mmu_8c.html#a8249a6a2551b792aaec028954ca64dde" title=" " alt="" coords="1005,899,1214,941"/>
<area shape="rect" href="mmu_8c.html#a070edfe1e4c28f6842681042bcffbf10" title=" " alt="" coords="989,965,1229,992"/>
<area shape="rect" href="mmu_8c.html#a39242ba7b127ebf064de37a1224635cd" title=" " alt="" coords="777,763,895,789"/>
<area shape="rect" href="spte_8h.html#ab169c1872e98b9731a05121e0439f244" title=" " alt="" coords="791,813,881,840"/>
<area shape="rect" href="mmu_8c.html#a191317a4b6c8acc0a90a33017cfab7f3" title=" " alt="" coords="765,915,907,941"/>
<area shape="rect" href="mmu_8c.html#aac896859e8521dd9e4efa9283d5d2b1b" title=" " alt="" coords="752,965,920,992"/>
<area shape="rect" href="mmu_8c.html#ad472a4e8b9cc60aeca0afecaf632d39c" title=" " alt="" coords="743,1016,929,1043"/>
<area shape="rect" href="kvm__main_8c.html#a99f99281cc81d5cd69f5825ccb8793b4" title=" " alt="" coords="1002,1067,1217,1093"/>
<area shape="rect" href="kvm__main_8c.html#a6845d169e1c19786abe7719700b9f6b9" title=" " alt="" coords="1016,1117,1203,1144"/>
<area shape="rect" href="mmu_8c.html#a93f1e0e5da1bb603a5e4f250d4d76bb0" title=" " alt="" coords="733,1117,939,1144"/>
<area shape="rect" href="mmu_8c.html#aeca903955eae791df4e1e22dcff2671f" title=" " alt="" coords="751,1169,921,1210"/>
<area shape="rect" href="page__track_8c.html#a73235ad2d0552c7e4b6b69d729fa79b1" title=" " alt="" coords="740,1235,932,1261"/>
<area shape="rect" href="mmu_8h.html#aaac7b37c7c917c491331020726730c02" title=" " alt="" coords="463,1234,663,1275"/>
<area shape="rect" href="x86_8c.html#a07ecc086564147d2003e0699cd506aa4" title=" " alt="" coords="443,1300,683,1327"/>
<area shape="rect" href="mtrr_8c.html#aeb25e3cab8f1edf904c9b8c93a0ee055" title=" " alt="" coords="493,1351,632,1377"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_a4bd7a8fd81e65c4e06e025d92c5787d9_icgraph.png" border="0" usemap="#ammu__internal_8h_a4bd7a8fd81e65c4e06e025d92c5787d9_icgraph" alt=""/></div>
<map name="ammu__internal_8h_a4bd7a8fd81e65c4e06e025d92c5787d9_icgraph" id="ammu__internal_8h_a4bd7a8fd81e65c4e06e025d92c5787d9_icgraph">
<area shape="rect" title=" " alt="" coords="1592,809,1747,835"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="1396,743,1544,770"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="1157,914,1348,941"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="1193,582,1313,609"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="447,71,619,98"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="921,383,1109,410"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="704,485,844,511"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="934,678,1097,705"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="933,805,1097,831"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="191,71,391,98"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="725,383,823,410"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="479,274,586,301"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="485,223,581,250"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="675,122,873,149"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="704,434,844,461"/>
<area shape="rect" href="smm_8c.html#a5382946234c910e05c6e2c09aff15713" title=" " alt="" coords="697,333,851,359"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="709,173,839,199"/>
<area shape="rect" href="vmx_2nested_8c.html#a001f930db9a867e828cf01b48d3e4e25" title=" " alt="" coords="697,536,851,577"/>
<area shape="rect" href="x86_8c.html#a420caf80521ab8d6ef7218d5dd26d47f" title=" " alt="" coords="737,602,811,629"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="453,493,612,535"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="247,387,334,414"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="211,311,370,338"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="205,224,376,265"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="5,231,143,258"/>
<area shape="rect" href="cpuid_8c.html#ae8f7489a3e05a9bcd5dfdae82c33d618" title=" " alt="" coords="456,5,609,47"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="499,610,566,637"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="480,661,585,687"/>
<area shape="rect" href="smm_8c.html#a0943012ff008c7999f582998f0f9167a" title=" " alt="" coords="209,559,373,586"/>
<area shape="rect" href="x86_8c.html#a39acca4a1624a86a5d8e547339729536" title=" " alt="" coords="480,559,585,586"/>
<area shape="rect" href="x86_8c.html#ad6f80d324684bb9f6674522e5d84dccc" title=" " alt="" coords="455,325,610,367"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="197,173,384,199"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="447,122,618,149"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="455,813,610,839"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="217,966,365,993"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="445,863,620,890"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="685,754,863,781"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="697,653,851,679"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="690,703,858,730"/>
<area shape="rect" href="vmx_2nested_8c.html#a06a397c328d1656bb4d3ab073878e6f0" title=" " alt="" coords="683,855,865,882"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="709,805,839,831"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="930,907,1101,948"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="931,1023,1099,1050"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="693,907,855,948"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="451,969,615,995"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="695,1074,853,1101"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="685,1125,863,1151"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="710,1023,838,1050"/>
<area shape="rect" href="vmx_8c.html#a7a38ddbd01bec99bf94ab4868ad4c6ea" title=" " alt="" coords="448,1099,617,1126"/>
<area shape="rect" href="svm_8c.html#a589e870c8a06d1ba26f24da299e47b95" title=" " alt="" coords="473,1150,593,1177"/>
<area shape="rect" href="svm_8c.html#a8afafecae406016532810194f187fe2c" title=" " alt="" coords="439,1023,627,1050"/>
</map>
</div>

</div>
</div>
<a id="a2af71cd012ce4f9032d1fdab87110cca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2af71cd012ce4f9032d1fdab87110cca">&#9670;&nbsp;</a></span>mmu_memory_cache_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* mmu_memory_cache_alloc </td>
          <td>(</td>
          <td class="paramtype">struct kvm_mmu_memory_cache *&#160;</td>
          <td class="paramname"><em>mc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af8846daf6e76a8d619fba16ff979245b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8846daf6e76a8d619fba16ff979245b">&#9670;&nbsp;</a></span>mmu_try_to_unsync_pages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mmu_try_to_unsync_pages </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct kvm_memory_slot *&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfn_t&#160;</td>
          <td class="paramname"><em>gfn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>can_unsync</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>prefetch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l02805">2805</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;{</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__mmu__page.html">kvm_mmu_page</a> *sp;</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    <span class="keywordtype">bool</span> locked = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160; </div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;<span class="comment">     * Force write-protection if the page is being tracked.  Note, the page</span></div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;<span class="comment">     * track machinery is used to write-protect upper-level shadow pages,</span></div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;<span class="comment">     * i.e. this guards the role.level == 4K assertion below!</span></div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="page__track_8c.html#a73235ad2d0552c7e4b6b69d729fa79b1">kvm_gfn_is_write_tracked</a>(kvm, slot, <a class="code" href="structkvm__mmu__page.html#ad833bc48e1885408b2b5c7deca9a6232">gfn</a>))</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;        <span class="keywordflow">return</span> -EPERM;</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160; </div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;<span class="comment">     * The page is not write-tracked, mark existing shadow pages unsync</span></div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;<span class="comment">     * unless KVM is synchronizing an unsync SP (can_unsync = false).  In</span></div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;<span class="comment">     * that case, KVM must complete emulation of the guest TLB flush before</span></div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;<span class="comment">     * allowing shadow pages to become unsync (writable by the guest).</span></div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;    <a class="code" href="mmu_8c.html#a830e3afaef6cd373e4402e579d12cd3e">for_each_gfn_valid_sp_with_gptes</a>(kvm, sp, <a class="code" href="structkvm__mmu__page.html#ad833bc48e1885408b2b5c7deca9a6232">gfn</a>) {</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;        <span class="keywordflow">if</span> (!can_unsync)</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;            <span class="keywordflow">return</span> -EPERM;</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160; </div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;        <span class="keywordflow">if</span> (sp-&gt;<a class="code" href="structkvm__mmu__page.html#a9bd31c4eeee99f7c16e11b9c0fd4c347">unsync</a>)</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160; </div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;        <span class="keywordflow">if</span> (prefetch)</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;            <span class="keywordflow">return</span> -EEXIST;</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160; </div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;<span class="comment">         * TDP MMU page faults require an additional spinlock as they</span></div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;<span class="comment">         * run with mmu_lock held for read, not write, and the unsync</span></div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;<span class="comment">         * logic is not thread safe.  Take the spinklock regardless of</span></div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;<span class="comment">         * the MMU type to avoid extra conditionals/parameters, there&#39;s</span></div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;<span class="comment">         * no meaningful penalty if mmu_lock is held for write.</span></div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;        <span class="keywordflow">if</span> (!locked) {</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;            locked = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;            spin_lock(&amp;kvm-&gt;arch.mmu_unsync_pages_lock);</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160; </div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;<span class="comment">             * Recheck after taking the spinlock, a different vCPU</span></div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;<span class="comment">             * may have since marked the page unsync.  A false</span></div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;<span class="comment">             * negative on the unprotected check above is not</span></div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;<span class="comment">             * possible as clearing sp-&gt;unsync _must_ hold mmu_lock</span></div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;<span class="comment">             * for write, i.e. unsync cannot transition from 1-&gt;0</span></div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;<span class="comment">             * while this CPU holds mmu_lock for read (or write).</span></div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;            <span class="keywordflow">if</span> (READ_ONCE(sp-&gt;<a class="code" href="structkvm__mmu__page.html#a9bd31c4eeee99f7c16e11b9c0fd4c347">unsync</a>))</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;        }</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160; </div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;        WARN_ON_ONCE(sp-&gt;<a class="code" href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">role</a>.level != PG_LEVEL_4K);</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;        <a class="code" href="mmu_8c.html#a01f2e3d13500ebb1caa2021001ba4026">kvm_unsync_page</a>(kvm, sp);</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;    }</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    <span class="keywordflow">if</span> (locked)</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;        spin_unlock(&amp;kvm-&gt;arch.mmu_unsync_pages_lock);</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160; </div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;<span class="comment">     * We need to ensure that the marking of unsync pages is visible</span></div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;<span class="comment">     * before the SPTE is updated to allow writes because</span></div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;<span class="comment">     * kvm_mmu_sync_roots() checks the unsync flags without holding</span></div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;<span class="comment">     * the MMU lock and so can race with this. If the SPTE was updated</span></div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;<span class="comment">     * before the page had been marked as unsync-ed, something like the</span></div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;<span class="comment">     * following could happen:</span></div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;<span class="comment">     * CPU 1                    CPU 2</span></div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;<span class="comment">     * ---------------------------------------------------------------------</span></div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;<span class="comment">     * 1.2 Host updates SPTE</span></div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;<span class="comment">     *     to be writable</span></div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;<span class="comment">     *                      2.1 Guest writes a GPTE for GVA X.</span></div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;<span class="comment">     *                          (GPTE being in the guest page table shadowed</span></div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;<span class="comment">     *                           by the SP from CPU 1.)</span></div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;<span class="comment">     *                          This reads SPTE during the page table walk.</span></div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;<span class="comment">     *                          Since SPTE.W is read as 1, there is no</span></div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;<span class="comment">     *                          fault.</span></div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;<span class="comment">     *                      2.2 Guest issues TLB flush.</span></div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;<span class="comment">     *                          That causes a VM Exit.</span></div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;<span class="comment">     *                      2.3 Walking of unsync pages sees sp-&gt;unsync is</span></div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;<span class="comment">     *                          false and skips the page.</span></div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;<span class="comment">     *                      2.4 Guest accesses GVA X.</span></div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;<span class="comment">     *                          Since the mapping in the SP was not updated,</span></div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;<span class="comment">     *                          so the old mapping for GVA X incorrectly</span></div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;<span class="comment">     *                          gets used.</span></div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;<span class="comment">     * 1.1 Host marks SP</span></div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;<span class="comment">     *     as unsync</span></div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;<span class="comment">     *     (sp-&gt;unsync = true)</span></div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;<span class="comment">     * The write barrier below ensures that 1.1 happens before 1.2 and thus</span></div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;<span class="comment">     * the situation in 2.4 does not arise.  It pairs with the read barrier</span></div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;<span class="comment">     * in is_unsync_root(), placed between 2.1&#39;s load of SPTE.W and 2.3.</span></div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;    smp_wmb();</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160; </div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;}</div>
<div class="ttc" id="ammu_8c_html_a01f2e3d13500ebb1caa2021001ba4026"><div class="ttname"><a href="mmu_8c.html#a01f2e3d13500ebb1caa2021001ba4026">kvm_unsync_page</a></div><div class="ttdeci">static void kvm_unsync_page(struct kvm *kvm, struct kvm_mmu_page *sp)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l02790">mmu.c:2790</a></div></div>
<div class="ttc" id="ammu_8c_html_a830e3afaef6cd373e4402e579d12cd3e"><div class="ttname"><a href="mmu_8c.html#a830e3afaef6cd373e4402e579d12cd3e">for_each_gfn_valid_sp_with_gptes</a></div><div class="ttdeci">#define for_each_gfn_valid_sp_with_gptes(_kvm, _sp, _gfn)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l01913">mmu.c:1913</a></div></div>
<div class="ttc" id="apage__track_8c_html_a73235ad2d0552c7e4b6b69d729fa79b1"><div class="ttname"><a href="page__track_8c.html#a73235ad2d0552c7e4b6b69d729fa79b1">kvm_gfn_is_write_tracked</a></div><div class="ttdeci">bool kvm_gfn_is_write_tracked(struct kvm *kvm, const struct kvm_memory_slot *slot, gfn_t gfn)</div><div class="ttdef"><b>Definition:</b> <a href="page__track_8c_source.html#l00123">page_track.c:123</a></div></div>
<div class="ttc" id="astructkvm__mmu__page_html"><div class="ttname"><a href="structkvm__mmu__page.html">kvm_mmu_page</a></div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00052">mmu_internal.h:52</a></div></div>
<div class="ttc" id="astructkvm__mmu__page_html_a9bd31c4eeee99f7c16e11b9c0fd4c347"><div class="ttname"><a href="structkvm__mmu__page.html#a9bd31c4eeee99f7c16e11b9c0fd4c347">kvm_mmu_page::unsync</a></div><div class="ttdeci">bool unsync</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00061">mmu_internal.h:61</a></div></div>
<div class="ttc" id="astructkvm__mmu__page_html_ad833bc48e1885408b2b5c7deca9a6232"><div class="ttname"><a href="structkvm__mmu__page.html#ad833bc48e1885408b2b5c7deca9a6232">kvm_mmu_page::gfn</a></div><div class="ttdeci">gfn_t gfn</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00081">mmu_internal.h:81</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_af8846daf6e76a8d619fba16ff979245b_cgraph.png" border="0" usemap="#ammu__internal_8h_af8846daf6e76a8d619fba16ff979245b_cgraph" alt=""/></div>
<map name="ammu__internal_8h_af8846daf6e76a8d619fba16ff979245b_cgraph" id="ammu__internal_8h_af8846daf6e76a8d619fba16ff979245b_cgraph">
<area shape="rect" title=" " alt="" coords="5,96,205,123"/>
<area shape="rect" href="page__track_8c.html#a73235ad2d0552c7e4b6b69d729fa79b1" title=" " alt="" coords="253,64,445,91"/>
<area shape="rect" href="mmu_8c.html#a01f2e3d13500ebb1caa2021001ba4026" title=" " alt="" coords="278,121,421,148"/>
<area shape="rect" href="mmu_8h.html#a41b79b63cae220349d8eb5a54f047939" title=" " alt="" coords="535,5,641,32"/>
<area shape="rect" href="page__track_8c.html#acdd8bb0c7c8b588137d126d56d20d7fa" title=" " alt="" coords="503,57,673,98"/>
<area shape="rect" href="mmu_8h.html#a89c85e383e0f6dfe6f91f5c1dd25e522" title=" " alt="" coords="731,64,939,91"/>
<area shape="rect" href="mmu_8c.html#a5acf1a996848fd3a4b7d2792d90a4c60" title=" " alt="" coords="493,122,683,163"/>
<area shape="rect" href="mmu_8c.html#ae9f0b7a623073572585a81a32b104eb3" title=" " alt="" coords="780,129,889,156"/>
<area shape="rect" href="spte_8h.html#afa67b29261e5d58fdf1f7f694e99a053" title=" " alt="" coords="990,104,1083,131"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="987,155,1087,181"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="1135,155,1265,181"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_af8846daf6e76a8d619fba16ff979245b_icgraph.png" border="0" usemap="#ammu__internal_8h_af8846daf6e76a8d619fba16ff979245b_icgraph" alt=""/></div>
<map name="ammu__internal_8h_af8846daf6e76a8d619fba16ff979245b_icgraph" id="ammu__internal_8h_af8846daf6e76a8d619fba16ff979245b_icgraph">
<area shape="rect" title=" " alt="" coords="3004,523,3204,550"/>
<area shape="rect" href="spte_8c.html#ab8dba69ef9f5267d41ba061dbe101ded" title=" " alt="" coords="2863,523,2956,550"/>
<area shape="rect" href="mmu_8c.html#a8fc6edfe7bd2a5a7d47952232ea5b8a1" title=" " alt="" coords="2670,473,2789,499"/>
<area shape="rect" href="paging__tmpl_8h.html#a189517b8079c307a0aef9f58dc8c7a25" title=" " alt="" coords="2686,523,2773,550"/>
<area shape="rect" href="tdp__mmu_8c.html#aa98226578ebe207e97e262a86bbd5427" title=" " alt="" coords="2644,575,2815,616"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="1855,401,1949,427"/>
<area shape="rect" href="mmu_8c.html#aab93e6e4502a54b3d61492f0e052e358" title=" " alt="" coords="2404,426,2596,453"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="1875,502,1929,529"/>
<area shape="rect" href="paging__tmpl_8h.html#ac251b8f404f8fa0840ec5f4db44a6480" title=" " alt="" coords="2219,477,2331,503"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1672,401,1807,427"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="1463,375,1618,402"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="1457,426,1624,453"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="1240,375,1388,402"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="1219,147,1409,174"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="1012,375,1132,402"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="253,401,425,427"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="729,619,917,646"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="503,898,643,925"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="741,274,904,301"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="741,325,905,351"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="5,401,205,427"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="523,594,622,621"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="519,645,626,671"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="291,771,387,798"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="473,695,672,722"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="503,847,643,874"/>
<area shape="rect" href="smm_8c.html#a5382946234c910e05c6e2c09aff15713" title=" " alt="" coords="496,797,649,823"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="508,426,637,453"/>
<area shape="rect" href="vmx_2nested_8c.html#a001f930db9a867e828cf01b48d3e4e25" title=" " alt="" coords="495,477,650,519"/>
<area shape="rect" href="x86_8c.html#a420caf80521ab8d6ef7218d5dd26d47f" title=" " alt="" coords="535,543,610,570"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="306,847,373,874"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="287,898,392,925"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="483,299,662,326"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="495,249,650,275"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="987,31,1157,72"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="988,147,1156,174"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="742,5,903,47"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="741,71,905,98"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="743,122,902,149"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="733,173,912,199"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="759,223,887,250"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="1227,561,1401,587"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="973,721,1171,747"/>
<area shape="rect" href="mmu_8c.html#a3e794d802eeb843cd6d7b699b74d8bf3" title=" " alt="" coords="734,721,911,747"/>
<area shape="rect" href="mmu_8c.html#a00f26353045c597f6a49cdd4f239f548" title=" " alt="" coords="720,771,925,798"/>
<area shape="rect" href="mmu_8c.html#a269190dc46a1af3d04b9e039944d85b9" title=" " alt="" coords="2193,426,2356,453"/>
<area shape="rect" href="mmu_8c.html#a5a96624b696225b4bc6c90caea946cb0" title=" " alt="" coords="1997,426,2145,453"/>
<area shape="rect" href="paging__tmpl_8h.html#a53f0634ff017bc46ff621fdad18cdcd4" title=" " alt="" coords="2019,477,2123,503"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1694,502,1785,529"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="2422,582,2578,609"/>
</map>
</div>

</div>
</div>
<a id="a4dc99f06253cd18d05d8260cc30447ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dc99f06253cd18d05d8260cc30447ea">&#9670;&nbsp;</a></span>pte_list_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int pte_list_count </td>
          <td>(</td>
          <td class="paramtype">struct kvm_rmap_head *&#160;</td>
          <td class="paramname"><em>rmap_head</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l01073">1073</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;{</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keyword">struct </span><a class="code" href="structpte__list__desc.html">pte_list_desc</a> *desc;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160; </div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordflow">if</span> (!rmap_head-&gt;val)</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(rmap_head-&gt;val &amp; 1))</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160; </div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    desc = (<span class="keyword">struct </span><a class="code" href="structpte__list__desc.html">pte_list_desc</a> *)(rmap_head-&gt;val &amp; ~1ul);</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">return</span> desc-&gt;<a class="code" href="structpte__list__desc.html#a0a96a0e1448dd49972a2a42ea3c60d76">tail_count</a> + desc-&gt;<a class="code" href="structpte__list__desc.html#a7abb625358813f3b887de99d64e54029">spte_count</a>;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;}</div>
<div class="ttc" id="astructpte__list__desc_html"><div class="ttname"><a href="structpte__list__desc.html">pte_list_desc</a></div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l00146">mmu.c:146</a></div></div>
<div class="ttc" id="astructpte__list__desc_html_a0a96a0e1448dd49972a2a42ea3c60d76"><div class="ttname"><a href="structpte__list__desc.html#a0a96a0e1448dd49972a2a42ea3c60d76">pte_list_desc::tail_count</a></div><div class="ttdeci">u32 tail_count</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l00151">mmu.c:151</a></div></div>
<div class="ttc" id="astructpte__list__desc_html_a7abb625358813f3b887de99d64e54029"><div class="ttname"><a href="structpte__list__desc.html#a7abb625358813f3b887de99d64e54029">pte_list_desc::spte_count</a></div><div class="ttdeci">u32 spte_count</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l00149">mmu.c:149</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_a4dc99f06253cd18d05d8260cc30447ea_icgraph.png" border="0" usemap="#ammu__internal_8h_a4dc99f06253cd18d05d8260cc30447ea_icgraph" alt=""/></div>
<map name="ammu__internal_8h_a4dc99f06253cd18d05d8260cc30447ea_icgraph" id="ammu__internal_8h_a4dc99f06253cd18d05d8260cc30447ea_icgraph">
<area shape="rect" title=" " alt="" coords="525,5,639,32"/>
<area shape="rect" href="debugfs_8c.html#a036e43f2625e35a5d7d037b533b231be" title=" " alt="" coords="264,5,477,32"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="5,5,216,32"/>
</map>
</div>

</div>
</div>
<a id="ad3e86bf491c8c2726e3bc6702166cfdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3e86bf491c8c2726e3bc6702166cfdf">&#9670;&nbsp;</a></span>track_possible_nx_huge_page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void track_possible_nx_huge_page </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a> *&#160;</td>
          <td class="paramname"><em>sp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l00848">848</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;{</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">     * If it&#39;s possible to replace the shadow page with an NX huge page,</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment">     * i.e. if the shadow page is the only thing currently preventing KVM</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment">     * from using a huge page, add the shadow page to the list of &quot;to be</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment">     * zapped for NX recovery&quot; pages.  Note, the shadow page can already be</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment">     * on the list if KVM is reusing an existing shadow page, i.e. if KVM</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">     * links a shadow page at multiple points.</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordflow">if</span> (!list_empty(&amp;sp-&gt;<a class="code" href="structkvm__mmu__page.html#a6a67c3f1dd304ec2730973d68f6ac4f7">possible_nx_huge_page_link</a>))</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    ++kvm-&gt;stat.nx_lpage_splits;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    list_add_tail(&amp;sp-&gt;<a class="code" href="structkvm__mmu__page.html#a6a67c3f1dd304ec2730973d68f6ac4f7">possible_nx_huge_page_link</a>,</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;              &amp;kvm-&gt;arch.possible_nx_huge_pages);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;}</div>
<div class="ttc" id="astructkvm__mmu__page_html_a6a67c3f1dd304ec2730973d68f6ac4f7"><div class="ttname"><a href="structkvm__mmu__page.html#a6a67c3f1dd304ec2730973d68f6ac4f7">kvm_mmu_page::possible_nx_huge_page_link</a></div><div class="ttdeci">struct list_head possible_nx_huge_page_link</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00109">mmu_internal.h:118</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_ad3e86bf491c8c2726e3bc6702166cfdf_icgraph.png" border="0" usemap="#ammu__internal_8h_ad3e86bf491c8c2726e3bc6702166cfdf_icgraph" alt=""/></div>
<map name="ammu__internal_8h_ad3e86bf491c8c2726e3bc6702166cfdf_icgraph" id="ammu__internal_8h_ad3e86bf491c8c2726e3bc6702166cfdf_icgraph">
<area shape="rect" title=" " alt="" coords="2223,639,2440,665"/>
<area shape="rect" href="mmu_8c.html#ad81f091dfb1d3dc16b40f6a162de4a8c" title=" " alt="" coords="2000,613,2175,640"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="2009,664,2165,691"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="1857,588,1952,615"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="1877,639,1932,665"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1675,588,1809,615"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="1466,563,1621,589"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="1460,613,1627,640"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="1243,563,1391,589"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="1221,237,1412,264"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="1015,563,1135,589"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="255,613,427,640"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="731,791,919,817"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="505,1085,645,1112"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="744,385,907,412"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="743,512,907,539"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="5,613,205,640"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="526,933,625,960"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="522,984,629,1011"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="293,765,389,792"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="476,765,675,792"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="505,1035,645,1061"/>
<area shape="rect" href="smm_8c.html#a5382946234c910e05c6e2c09aff15713" title=" " alt="" coords="499,816,652,843"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="511,664,640,691"/>
<area shape="rect" href="vmx_2nested_8c.html#a001f930db9a867e828cf01b48d3e4e25" title=" " alt="" coords="498,867,653,909"/>
<area shape="rect" href="x86_8c.html#a420caf80521ab8d6ef7218d5dd26d47f" title=" " alt="" coords="538,613,613,640"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="307,1035,374,1061"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="288,1085,393,1112"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="253,385,428,412"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="486,309,665,336"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="498,360,653,387"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="491,411,659,437"/>
<area shape="rect" href="vmx_2nested_8c.html#a06a397c328d1656bb4d3ab073878e6f0" title=" " alt="" coords="484,461,667,488"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="510,512,641,539"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="989,230,1160,271"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="991,107,1159,133"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="745,230,906,271"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="507,208,644,235"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="743,5,907,32"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="746,56,905,83"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="736,157,915,184"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="761,107,889,133"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="501,5,649,32"/>
<area shape="rect" href="vmx_8c.html#a7a38ddbd01bec99bf94ab4868ad4c6ea" title=" " alt="" coords="491,157,660,184"/>
<area shape="rect" href="svm_8c.html#a589e870c8a06d1ba26f24da299e47b95" title=" " alt="" coords="515,107,635,133"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="1229,740,1404,767"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="976,892,1173,919"/>
<area shape="rect" href="mmu_8c.html#a3e794d802eeb843cd6d7b699b74d8bf3" title=" " alt="" coords="737,892,914,919"/>
<area shape="rect" href="mmu_8c.html#a00f26353045c597f6a49cdd4f239f548" title=" " alt="" coords="723,943,928,969"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1697,639,1787,665"/>
</map>
</div>

</div>
</div>
<a id="a2fba0b2dd67723bfbc4349ea7c8e019a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fba0b2dd67723bfbc4349ea7c8e019a">&#9670;&nbsp;</a></span>untrack_possible_nx_huge_page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void untrack_possible_nx_huge_page </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a> *&#160;</td>
          <td class="paramname"><em>sp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l00891">891</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;{</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keywordflow">if</span> (list_empty(&amp;sp-&gt;<a class="code" href="structkvm__mmu__page.html#a6a67c3f1dd304ec2730973d68f6ac4f7">possible_nx_huge_page_link</a>))</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160; </div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    --kvm-&gt;stat.nx_lpage_splits;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    list_del_init(&amp;sp-&gt;<a class="code" href="structkvm__mmu__page.html#a6a67c3f1dd304ec2730973d68f6ac4f7">possible_nx_huge_page_link</a>);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu__internal_8h_a2fba0b2dd67723bfbc4349ea7c8e019a_icgraph.png" border="0" usemap="#ammu__internal_8h_a2fba0b2dd67723bfbc4349ea7c8e019a_icgraph" alt=""/></div>
<map name="ammu__internal_8h_a2fba0b2dd67723bfbc4349ea7c8e019a_icgraph" id="ammu__internal_8h_a2fba0b2dd67723bfbc4349ea7c8e019a_icgraph">
<area shape="rect" title=" " alt="" coords="2007,318,2161,359"/>
<area shape="rect" href="tdp__mmu_8c.html#a401c07c0503d3fc2c62b9a8a06096686" title=" " alt="" coords="1805,300,1959,327"/>
<area shape="rect" href="mmu_8c.html#a802c5b4f03cc2183d5a097abb661e90c" title=" " alt="" coords="1368,364,1559,391"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="1607,288,1757,315"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="1382,288,1545,315"/>
<area shape="rect" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a" title=" " alt="" coords="1131,288,1277,315"/>
<area shape="rect" href="tdp__mmu_8c.html#a692eb9d20075258e5d4a0e4289a7c9b6" title=" " alt="" coords="831,173,1030,200"/>
<area shape="rect" href="tdp__mmu_8c.html#a381e22ee819864cf1fd726479a76b6c7" title=" " alt="" coords="845,313,1017,340"/>
<area shape="rect" href="tdp__mmu_8c.html#af6444812b70d9509539a3fa478cde14d" title=" " alt="" coords="843,263,1018,289"/>
<area shape="rect" href="mmu_8c.html#a85202c8f53b11b1c80f9b6e26210aa9a" title=" " alt="" coords="583,326,752,367"/>
<area shape="rect" href="mmu_8c.html#a2683113dbbf42e73c2b52410f9ef6f84" title=" " alt="" coords="291,275,507,317"/>
<area shape="rect" href="mmu_8c.html#a13148d5065ef27624701afcaa3229983" title=" " alt="" coords="29,283,212,309"/>
<area shape="rect" href="tdp__mmu_8c.html#af9c34fae0b7eac63cc78a01882498cfb" title=" " alt="" coords="587,275,748,301"/>
<area shape="rect" href="tdp__mmu_8c.html#a6588b054500f580603f94c0555fe3c06" title=" " alt="" coords="599,224,736,251"/>
<area shape="rect" href="tdp__mmu_8c.html#a9da9e7ba01717f85966fc080e86ecb84" title=" " alt="" coords="586,5,749,32"/>
<area shape="rect" href="tdp__mmu_8c.html#aa98226578ebe207e97e262a86bbd5427" title=" " alt="" coords="582,57,753,98"/>
<area shape="rect" href="tdp__mmu_8c.html#ab901a77cd00a4e809baa9a25e289b59d" title=" " alt="" coords="567,123,768,149"/>
<area shape="rect" href="tdp__mmu_8c.html#ae3e523e725021c7dd3f3796f4e074a37" title=" " alt="" coords="599,173,735,200"/>
<area shape="rect" href="mmu_8c.html#a01417b2ac70337a4419dc0f171bd548f" title=" " alt="" coords="1088,807,1320,833"/>
<area shape="rect" href="mmu_8c.html#aa915f695d4c341eca7d1f5b5a0a26a03" title=" " alt="" coords="821,604,1040,631"/>
<area shape="rect" href="mmu_8c.html#a6db2d9d04af40584cbde51a2e1f74837" title=" " alt="" coords="858,861,1003,888"/>
<area shape="rect" href="mmu_8c.html#aeca903955eae791df4e1e22dcff2671f" title=" " alt="" coords="846,939,1015,981"/>
<area shape="rect" href="mmu_8c.html#acfa638b7fb78a0f9e41c057c6c119116" title=" " alt="" coords="835,1063,1026,1089"/>
<area shape="rect" href="mmu_8c.html#a0aae5e5c753c842f2ea147f5eb4443e2" title=" " alt="" coords="289,341,508,368"/>
<area shape="rect" href="mmu_8c.html#ad8f7c681ee8bd25bb3fcb5b3ff39f4e8" title=" " alt="" coords="313,696,485,723"/>
<area shape="rect" href="mmu_8c.html#a45417375d740e0905773ac641827e0a0" title=" " alt="" coords="567,544,767,571"/>
<area shape="rect" href="mmu_8c.html#a39a2699f47aac1549c6a1ba2600ee86b" title=" " alt="" coords="604,443,731,469"/>
<area shape="rect" href="mmu_8c.html#a5b648a843c7267d204fe81facbc9f84f" title=" " alt="" coords="587,604,748,631"/>
<area shape="rect" href="mmu_8c.html#a5d549ae5b6c13e9b87ccc13127ddf86a" title=" " alt="" coords="591,705,744,732"/>
<area shape="rect" href="mmu_8c.html#af8bc85c6e33cec42152e7982b1fb4cba" title=" " alt="" coords="568,756,767,783"/>
<area shape="rect" href="mmu_8c.html#a1ade612e5d4a58575df9428f6ad72bb9" title=" " alt="" coords="5,341,236,368"/>
<area shape="rect" href="page__track_8h.html#aaba1a34500917672160397ee8e7dada3" title=" " alt="" coords="35,696,206,723"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="315,544,483,571"/>
<area shape="rect" href="mmu_8c.html#af74327c8867527505d8ca995e2b8a3fb" title=" " alt="" coords="284,595,513,621"/>
<area shape="rect" href="x86_8c.html#a5559cadc9496d9f62e002e88144d5156" title=" " alt="" coords="317,443,480,469"/>
<area shape="rect" href="x86_8c.html#a5969d2c2ff863d86dbdd90088da52139" title=" " alt="" coords="334,493,463,520"/>
<area shape="rect" href="mmu_8c.html#a2f33377dcdaf5435e453ff75e02075dd" title=" " alt="" coords="323,392,475,419"/>
<area shape="rect" href="mmu_8c.html#ab7d4e418cb85a72507e384df5027293e" title=" " alt="" coords="316,645,481,672"/>
<area shape="rect" href="mmu_8c.html#a182d50b0d6d7be3301d249ba97a8152f" title=" " alt="" coords="291,747,506,773"/>
<area shape="rect" href="mmu_8c.html#abab2bb5454cc72ba2e4913a87e5800fe" title=" " alt="" coords="309,798,488,839"/>
<area shape="rect" href="mmu_8c.html#a6a9d3382763ac1478855bd15907a98e2" title=" " alt="" coords="565,863,769,889"/>
<area shape="rect" href="kvm__main_8c.html#ab6320575dc04178df16ea4d7dddff190" title=" " alt="" coords="314,864,483,891"/>
<area shape="rect" href="mmu_8c.html#a51621e034894e480342d3a5b48735d41" title=" " alt="" coords="574,969,761,1010"/>
<area shape="rect" href="mmu_8c.html#aa3aace355fab834a27a73054cd060480" title=" " alt="" coords="561,1041,773,1068"/>
<area shape="rect" href="mmu_8c.html#a454f417bda474f7904fe06c1998ecaed" title=" " alt="" coords="597,917,737,944"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="296,981,501,1022"/>
<area shape="rect" href="x86_8c.html#afc9f6e79b41a5499613d59090d54df77" title=" " alt="" coords="318,915,479,957"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="331,1097,466,1124"/>
<area shape="rect" href="mmu_8c.html#a171383889d717b24003ee27735437bbe" title=" " alt="" coords="309,1047,488,1073"/>
<area shape="rect" href="mmu_8c.html#abd59fd9785b9b5676841e9706c1c6797" title=" " alt="" coords="579,1092,756,1119"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a3634b84158ea95896b7dcbbb228c309c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3634b84158ea95896b7dcbbb228c309c">&#9670;&nbsp;</a></span>mmu_page_header_cache</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct kmem_cache* mmu_page_header_cache</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l00181">181</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>

</div>
</div>
<a id="a44e186baf100df677a2d62072a7959ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44e186baf100df677a2d62072a7959ad">&#9670;&nbsp;</a></span>nx_huge_pages</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int nx_huge_pages</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l00064">64</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
