<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KVM: arch/x86/kvm/mmu/tdp_mmu.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KVM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_ea9599923402ca8ab47fc3e495999dea.html">arch</a></li><li class="navelem"><a class="el" href="dir_c21774f8bc9f0de15163573e5f5fa2b5.html">x86</a></li><li class="navelem"><a class="el" href="dir_fde450fd4b58e2560c53a1e73bfa4d6d.html">kvm</a></li><li class="navelem"><a class="el" href="dir_5b5419bab78eb3e26ed0c43edf6fed27.html">mmu</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tdp_mmu.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/kvm_host.h&gt;</code><br />
<code>#include &quot;<a class="el" href="spte_8h_source.html">spte.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for tdp_mmu.h:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h__incl.png" border="0" usemap="#aarch_2x86_2kvm_2mmu_2tdp__mmu_8h" alt=""/></div>
<map name="aarch_2x86_2kvm_2mmu_2tdp__mmu_8h" id="aarch_2x86_2kvm_2mmu_2tdp__mmu_8h">
<area shape="rect" title=" " alt="" coords="1471,5,1646,47"/>
<area shape="rect" title=" " alt="" coords="1273,468,1407,495"/>
<area shape="rect" href="spte_8h.html" title=" " alt="" coords="1425,95,1487,121"/>
<area shape="rect" href="mmu_8h.html" title=" " alt="" coords="1006,169,1074,196"/>
<area shape="rect" href="mmu__internal_8h.html" title=" " alt="" coords="1393,169,1519,196"/>
<area shape="rect" href="kvm__cache__regs_8h.html" title=" " alt="" coords="215,393,358,420"/>
<area shape="rect" href="cpuid_8h.html" title=" " alt="" coords="771,244,840,271"/>
<area shape="rect" href="x86_8h.html" title=" " alt="" coords="776,319,835,345"/>
<area shape="rect" href="reverse__cpuid_8h.html" title=" " alt="" coords="859,319,984,345"/>
<area shape="rect" title=" " alt="" coords="662,319,751,345"/>
<area shape="rect" title=" " alt="" coords="1008,319,1136,345"/>
<area shape="rect" title=" " alt="" coords="295,319,457,345"/>
<area shape="rect" href="governed__features_8h.html" title=" " alt="" coords="482,319,638,345"/>
<area shape="rect" title=" " alt="" coords="382,393,514,420"/>
<area shape="rect" title=" " alt="" coords="538,393,633,420"/>
<area shape="rect" title=" " alt="" coords="657,393,773,420"/>
<area shape="rect" href="kvm__emulate_8h.html" title=" " alt="" coords="67,393,191,420"/>
<area shape="rect" title=" " alt="" coords="5,468,136,495"/>
<area shape="rect" href="fpu_8h.html" title=" " alt="" coords="161,468,215,495"/>
<area shape="rect" title=" " alt="" coords="133,543,243,569"/>
<area shape="rect" title=" " alt="" coords="1175,393,1302,420"/>
<area shape="rect" title=" " alt="" coords="848,393,984,420"/>
<area shape="rect" title=" " alt="" coords="1009,393,1151,420"/>
<area shape="rect" title=" " alt="" coords="1312,244,1419,271"/>
<area shape="rect" title=" " alt="" coords="1493,244,1624,271"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h__dep__incl.png" border="0" usemap="#aarch_2x86_2kvm_2mmu_2tdp__mmu_8hdep" alt=""/></div>
<map name="aarch_2x86_2kvm_2mmu_2tdp__mmu_8hdep" id="aarch_2x86_2kvm_2mmu_2tdp__mmu_8hdep">
<area shape="rect" title=" " alt="" coords="111,5,285,47"/>
<area shape="rect" href="tdp__mmu_8c.html" title=" " alt="" coords="5,95,180,136"/>
<area shape="rect" href="mmu_8c.html" title=" " alt="" coords="204,102,403,129"/>
</map>
</div>
</div>
<p><a href="tdp__mmu_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab7552e1b0abe0e2ddb3f91e3f002d9d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#ab7552e1b0abe0e2ddb3f91e3f002d9d9">kvm_mmu_init_tdp_mmu</a> (struct kvm *kvm)</td></tr>
<tr class="separator:ab7552e1b0abe0e2ddb3f91e3f002d9d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73432bf42fbb3d43b3e04f88cd92b592"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#a73432bf42fbb3d43b3e04f88cd92b592">kvm_mmu_uninit_tdp_mmu</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a73432bf42fbb3d43b3e04f88cd92b592"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae643f902f826e920f4150bb66872fd47"><td class="memItemLeft" align="right" valign="top">hpa_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#ae643f902f826e920f4150bb66872fd47">kvm_tdp_mmu_get_vcpu_root_hpa</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ae643f902f826e920f4150bb66872fd47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8fe85fef7c2fb884cd2d27810a84d0b"><td class="memItemLeft" align="right" valign="top">static __must_check bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#ae8fe85fef7c2fb884cd2d27810a84d0b">kvm_tdp_mmu_get_root</a> (struct <a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a> *root)</td></tr>
<tr class="separator:ae8fe85fef7c2fb884cd2d27810a84d0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a9d637b546d8dfd125028f823a6eac0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#a8a9d637b546d8dfd125028f823a6eac0">kvm_tdp_mmu_put_root</a> (struct kvm *kvm, struct <a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a> *root)</td></tr>
<tr class="separator:a8a9d637b546d8dfd125028f823a6eac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4fb1a66a2bc67f8699e8ddafdd4b1e8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#aa4fb1a66a2bc67f8699e8ddafdd4b1e8">kvm_tdp_mmu_zap_leafs</a> (struct kvm *kvm, gfn_t start, gfn_t end, bool flush)</td></tr>
<tr class="separator:aa4fb1a66a2bc67f8699e8ddafdd4b1e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a381e22ee819864cf1fd726479a76b6c7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#a381e22ee819864cf1fd726479a76b6c7">kvm_tdp_mmu_zap_sp</a> (struct kvm *kvm, struct <a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a> *sp)</td></tr>
<tr class="separator:a381e22ee819864cf1fd726479a76b6c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca0f6025bf55596c80647e3a35997d92"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#aca0f6025bf55596c80647e3a35997d92">kvm_tdp_mmu_zap_all</a> (struct kvm *kvm)</td></tr>
<tr class="separator:aca0f6025bf55596c80647e3a35997d92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4bbd5785998945455f358b7cd9bbafa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#ab4bbd5785998945455f358b7cd9bbafa">kvm_tdp_mmu_invalidate_all_roots</a> (struct kvm *kvm)</td></tr>
<tr class="separator:ab4bbd5785998945455f358b7cd9bbafa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ab26f4fb05f388d8bcf04ad89ee6797"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#a8ab26f4fb05f388d8bcf04ad89ee6797">kvm_tdp_mmu_zap_invalidated_roots</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a8ab26f4fb05f388d8bcf04ad89ee6797"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2479228afe629631e4f0331c440a4d6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#ad2479228afe629631e4f0331c440a4d6">kvm_tdp_mmu_map</a> (struct kvm_vcpu *vcpu, struct <a class="el" href="structkvm__page__fault.html">kvm_page_fault</a> *fault)</td></tr>
<tr class="separator:ad2479228afe629631e4f0331c440a4d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa8f0898db08dd5c9213ac2f8b355501"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#aaa8f0898db08dd5c9213ac2f8b355501">kvm_tdp_mmu_unmap_gfn_range</a> (struct kvm *kvm, struct kvm_gfn_range *range, bool flush)</td></tr>
<tr class="separator:aaa8f0898db08dd5c9213ac2f8b355501"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a5c7f827057100e08b2f45da804fa30"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#a0a5c7f827057100e08b2f45da804fa30">kvm_tdp_mmu_age_gfn_range</a> (struct kvm *kvm, struct kvm_gfn_range *range)</td></tr>
<tr class="separator:a0a5c7f827057100e08b2f45da804fa30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78b4b5fbbd5f7b9fc997fef12a5ff92b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#a78b4b5fbbd5f7b9fc997fef12a5ff92b">kvm_tdp_mmu_test_age_gfn</a> (struct kvm *kvm, struct kvm_gfn_range *range)</td></tr>
<tr class="separator:a78b4b5fbbd5f7b9fc997fef12a5ff92b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa53a75612d7b32153949be34f4055144"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#aa53a75612d7b32153949be34f4055144">kvm_tdp_mmu_set_spte_gfn</a> (struct kvm *kvm, struct kvm_gfn_range *range)</td></tr>
<tr class="separator:aa53a75612d7b32153949be34f4055144"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f6c658f3ddf3ffac5ce96335b78e295"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#a7f6c658f3ddf3ffac5ce96335b78e295">kvm_tdp_mmu_wrprot_slot</a> (struct kvm *kvm, const struct kvm_memory_slot *slot, int min_level)</td></tr>
<tr class="separator:a7f6c658f3ddf3ffac5ce96335b78e295"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a670804848ccec53148d097c06b44657c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#a670804848ccec53148d097c06b44657c">kvm_tdp_mmu_clear_dirty_slot</a> (struct kvm *kvm, const struct kvm_memory_slot *slot)</td></tr>
<tr class="separator:a670804848ccec53148d097c06b44657c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1753c27bb053bc6ac3a3893e10b49f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#ad1753c27bb053bc6ac3a3893e10b49f6">kvm_tdp_mmu_clear_dirty_pt_masked</a> (struct kvm *kvm, struct kvm_memory_slot *slot, gfn_t gfn, unsigned long mask, bool wrprot)</td></tr>
<tr class="separator:ad1753c27bb053bc6ac3a3893e10b49f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a86994ba17144f60df37ea7682d650b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#a3a86994ba17144f60df37ea7682d650b">kvm_tdp_mmu_zap_collapsible_sptes</a> (struct kvm *kvm, const struct kvm_memory_slot *slot)</td></tr>
<tr class="separator:a3a86994ba17144f60df37ea7682d650b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45fd618d35fb0df14a3401a230f41faa"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#a45fd618d35fb0df14a3401a230f41faa">kvm_tdp_mmu_write_protect_gfn</a> (struct kvm *kvm, struct kvm_memory_slot *slot, gfn_t gfn, int min_level)</td></tr>
<tr class="separator:a45fd618d35fb0df14a3401a230f41faa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57310f6ad7e70c13dadcfd30aa71af6d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#a57310f6ad7e70c13dadcfd30aa71af6d">kvm_tdp_mmu_try_split_huge_pages</a> (struct kvm *kvm, const struct kvm_memory_slot *slot, gfn_t start, gfn_t end, int target_level, bool shared)</td></tr>
<tr class="separator:a57310f6ad7e70c13dadcfd30aa71af6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9bedc081d8d3dcba1c90a8e9e88df3d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#ad9bedc081d8d3dcba1c90a8e9e88df3d">kvm_tdp_mmu_walk_lockless_begin</a> (void)</td></tr>
<tr class="separator:ad9bedc081d8d3dcba1c90a8e9e88df3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af349eae0f7af96e03ca0fd284ffea7ab"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#af349eae0f7af96e03ca0fd284ffea7ab">kvm_tdp_mmu_walk_lockless_end</a> (void)</td></tr>
<tr class="separator:af349eae0f7af96e03ca0fd284ffea7ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a34a882b3a9c5607394395bc988b804"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#a9a34a882b3a9c5607394395bc988b804">kvm_tdp_mmu_get_walk</a> (struct kvm_vcpu *vcpu, u64 addr, u64 *sptes, int *root_level)</td></tr>
<tr class="separator:a9a34a882b3a9c5607394395bc988b804"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab831f739cbe511803c4752d84ffab75c"><td class="memItemLeft" align="right" valign="top">u64 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#ab831f739cbe511803c4752d84ffab75c">kvm_tdp_mmu_fast_pf_get_last_sptep</a> (struct kvm_vcpu *vcpu, u64 addr, u64 *spte)</td></tr>
<tr class="separator:ab831f739cbe511803c4752d84ffab75c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a166bc9e57a26e8a37e94e2314a72d226"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdp__mmu_8h.html#a166bc9e57a26e8a37e94e2314a72d226">is_tdp_mmu_page</a> (struct <a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a> *sp)</td></tr>
<tr class="separator:a166bc9e57a26e8a37e94e2314a72d226"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a166bc9e57a26e8a37e94e2314a72d226"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a166bc9e57a26e8a37e94e2314a72d226">&#9670;&nbsp;</a></span>is_tdp_mmu_page()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool is_tdp_mmu_page </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a> *&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8h_source.html#l00074">74</a> of file <a class="el" href="tdp__mmu_8h_source.html">tdp_mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a166bc9e57a26e8a37e94e2314a72d226_icgraph.png" border="0" usemap="#atdp__mmu_8h_a166bc9e57a26e8a37e94e2314a72d226_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_a166bc9e57a26e8a37e94e2314a72d226_icgraph" id="atdp__mmu_8h_a166bc9e57a26e8a37e94e2314a72d226_icgraph">
<area shape="rect" title=" " alt="" coords="1747,724,1888,751"/>
<area shape="rect" href="mmu_8c.html#a39242ba7b127ebf064de37a1224635cd" title=" " alt="" coords="1580,591,1699,617"/>
<area shape="rect" href="mmu_8c.html#a85202c8f53b11b1c80f9b6e26210aa9a" title=" " alt="" coords="783,579,952,621"/>
<area shape="rect" href="mmu_8c.html#a5b648a843c7267d204fe81facbc9f84f" title=" " alt="" coords="787,933,948,960"/>
<area shape="rect" href="tdp__mmu_8c.html#a8a9d637b546d8dfd125028f823a6eac0" title=" " alt="" coords="1325,816,1507,843"/>
<area shape="rect" href="mmu_8c.html#a01417b2ac70337a4419dc0f171bd548f" title=" " alt="" coords="1300,379,1532,405"/>
<area shape="rect" href="mmu_8c.html#acfa638b7fb78a0f9e41c057c6c119116" title=" " alt="" coords="1041,641,1232,668"/>
<area shape="rect" href="mmu_8c.html#a18c5041cf69d79e06c51bd903978adc8" title=" " alt="" coords="1351,591,1481,617"/>
<area shape="rect" href="mmu_8c.html#ad6d58376bff6747099d7b2a652b0af17" title=" " alt="" coords="793,5,941,32"/>
<area shape="rect" href="mmu_8c.html#aa915f695d4c341eca7d1f5b5a0a26a03" title=" " alt="" coords="1027,427,1246,453"/>
<area shape="rect" href="mmu_8c.html#a6db2d9d04af40584cbde51a2e1f74837" title=" " alt="" coords="1064,97,1209,124"/>
<area shape="rect" href="mmu_8c.html#aeca903955eae791df4e1e22dcff2671f" title=" " alt="" coords="1052,203,1221,245"/>
<area shape="rect" href="mmu_8c.html#a0aae5e5c753c842f2ea147f5eb4443e2" title=" " alt="" coords="495,491,713,517"/>
<area shape="rect" href="mmu_8c.html#ad8f7c681ee8bd25bb3fcb5b3ff39f4e8" title=" " alt="" coords="518,415,690,441"/>
<area shape="rect" href="mmu_8c.html#a45417375d740e0905773ac641827e0a0" title=" " alt="" coords="767,376,967,403"/>
<area shape="rect" href="mmu_8c.html#a39a2699f47aac1549c6a1ba2600ee86b" title=" " alt="" coords="804,477,931,504"/>
<area shape="rect" href="mmu_8c.html#a5d549ae5b6c13e9b87ccc13127ddf86a" title=" " alt="" coords="791,427,944,453"/>
<area shape="rect" href="mmu_8c.html#af8bc85c6e33cec42152e7982b1fb4cba" title=" " alt="" coords="768,275,967,301"/>
<area shape="rect" href="mmu_8c.html#a2683113dbbf42e73c2b52410f9ef6f84" title=" " alt="" coords="496,579,712,621"/>
<area shape="rect" href="mmu_8c.html#a13148d5065ef27624701afcaa3229983" title=" " alt="" coords="253,587,435,613"/>
<area shape="rect" href="mmu_8c.html#ab7d4e418cb85a72507e384df5027293e" title=" " alt="" coords="521,931,687,957"/>
<area shape="rect" href="mmu_8c.html#ae3c450d21264b7f2a31cc71d03c2a658" title=" " alt="" coords="243,639,445,681"/>
<area shape="rect" href="mmu_8c.html#accc9c990bf354ea4f50d7e9c2deee3e4" title=" " alt="" coords="263,1027,425,1069"/>
<area shape="rect" href="mmu_8c.html#a0e7f249026693e08d3c8b70f7ffd5003" title=" " alt="" coords="36,1064,163,1091"/>
<area shape="rect" href="vmx_2nested_8c.html#ad9920ec1586ae352fbc272ed93cf7b38" title=" " alt="" coords="295,1144,393,1171"/>
<area shape="rect" href="vmx_2nested_8c.html#a54e70f407596ed5f029a4e4a9855d76c" title=" " alt="" coords="287,1195,401,1221"/>
<area shape="rect" href="x86_8c.html#aa792359250f034a2a29b0c809df64ff3" title=" " alt="" coords="265,707,423,733"/>
<area shape="rect" href="mmu_8c.html#aed9206081417b11ad2654d347022bb05" title=" " alt="" coords="260,758,428,799"/>
<area shape="rect" href="mmu_8c.html#a6d448c19a18bd089be4c218a86d523be" title=" " alt="" coords="241,824,447,851"/>
<area shape="rect" href="mmu_8c.html#a7bf770a114656f992dd1c0aff57fe9e5" title=" " alt="" coords="273,875,415,901"/>
<area shape="rect" href="x86_8c.html#ae69bdd054a70a95d99b79bae770372cf" title=" " alt="" coords="295,925,393,952"/>
<area shape="rect" href="vmx_2nested_8c.html#a5a5df09c88b5fad9a716109f9917e9a5" title=" " alt="" coords="255,976,433,1003"/>
<area shape="rect" href="mmu_8c.html#aa1e7a67c950b9d5bc46f7aaed6b5367c" title=" " alt="" coords="5,639,193,681"/>
<area shape="rect" href="mmu_8c.html#a6a9d3382763ac1478855bd15907a98e2" title=" " alt="" coords="765,56,969,83"/>
<area shape="rect" href="mmu_8c.html#a51621e034894e480342d3a5b48735d41" title=" " alt="" coords="774,107,961,149"/>
<area shape="rect" href="mmu_8c.html#aa3aace355fab834a27a73054cd060480" title=" " alt="" coords="761,173,973,200"/>
<area shape="rect" href="mmu_8c.html#a454f417bda474f7904fe06c1998ecaed" title=" " alt="" coords="797,224,937,251"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="537,35,671,61"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="559,144,649,171"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="267,9,421,36"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="261,60,427,87"/>
<area shape="rect" href="mmu_8c.html#abd59fd9785b9b5676841e9706c1c6797" title=" " alt="" coords="779,700,956,727"/>
<area shape="rect" href="mmu_8c.html#a58fe7b43995ae8c20c597e1bb9c4c007" title=" " alt="" coords="513,762,695,803"/>
<area shape="rect" href="mmu_8c.html#ad4293ab926b1ab16fb8b380a76b9f533" title=" " alt="" coords="522,697,686,738"/>
<area shape="rect" href="tdp__mmu_8c.html#a57310f6ad7e70c13dadcfd30aa71af6d" title=" " alt="" coords="1047,809,1227,850"/>
<area shape="rect" href="tdp__mmu_8c.html#a8ab26f4fb05f388d8bcf04ad89ee6797" title=" " alt="" coords="1021,743,1252,785"/>
<area shape="rect" href="tdp__mmu_8c.html#a5d434b3d8d515d7e4c585ae3aa7e15fa" title=" " alt="" coords="1060,875,1213,901"/>
<area shape="rect" href="mmu_8c.html#a073d9b7de8eaf977452c1eb7395a78d6" title=" " alt="" coords="776,802,959,843"/>
<area shape="rect" href="mmu_8c.html#a6abdd1728810c3f3ab8c2e1e6d2d37f0" title=" " alt="" coords="772,867,963,909"/>
<area shape="rect" href="tdp__mmu_8c.html#a73432bf42fbb3d43b3e04f88cd92b592" title=" " alt="" coords="765,751,970,777"/>
</map>
</div>

</div>
</div>
<a id="ab7552e1b0abe0e2ddb3f91e3f002d9d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7552e1b0abe0e2ddb3f91e3f002d9d9">&#9670;&nbsp;</a></span>kvm_mmu_init_tdp_mmu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_mmu_init_tdp_mmu </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l00015">15</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;{</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    INIT_LIST_HEAD(&amp;kvm-&gt;arch.tdp_mmu_roots);</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    spin_lock_init(&amp;kvm-&gt;arch.tdp_mmu_pages_lock);</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_ab7552e1b0abe0e2ddb3f91e3f002d9d9_icgraph.png" border="0" usemap="#atdp__mmu_8h_ab7552e1b0abe0e2ddb3f91e3f002d9d9_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_ab7552e1b0abe0e2ddb3f91e3f002d9d9_icgraph" id="atdp__mmu_8h_ab7552e1b0abe0e2ddb3f91e3f002d9d9_icgraph">
<area shape="rect" title=" " alt="" coords="808,5,997,32"/>
<area shape="rect" href="mmu_8c.html#ab4c98414ab44b654e98c50e06b5ddf23" title=" " alt="" coords="612,5,760,32"/>
<area shape="rect" href="x86_8c.html#a78b266c18dac3b9edbea80941c96e2cd" title=" " alt="" coords="421,5,564,32"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="247,5,373,32"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="5,5,199,32"/>
</map>
</div>

</div>
</div>
<a id="a73432bf42fbb3d43b3e04f88cd92b592"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73432bf42fbb3d43b3e04f88cd92b592">&#9670;&nbsp;</a></span>kvm_mmu_uninit_tdp_mmu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_mmu_uninit_tdp_mmu </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l00033">33</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;{</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">     * Invalidate all roots, which besides the obvious, schedules all roots</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">     * for zapping and thus puts the TDP MMU&#39;s reference to each root, i.e.</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">     * ultimately frees all roots.</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="tdp__mmu_8c.html#ab4bbd5785998945455f358b7cd9bbafa">kvm_tdp_mmu_invalidate_all_roots</a>(kvm);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="tdp__mmu_8c.html#a8ab26f4fb05f388d8bcf04ad89ee6797">kvm_tdp_mmu_zap_invalidated_roots</a>(kvm);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    WARN_ON(atomic64_read(&amp;kvm-&gt;arch.tdp_mmu_pages));</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    WARN_ON(!list_empty(&amp;kvm-&gt;arch.tdp_mmu_roots));</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">     * Ensure that all the outstanding RCU callbacks to free shadow pages</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">     * can run before the VM is torn down.  Putting the last reference to</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">     * zapped roots will create new callbacks.</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    rcu_barrier();</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;}</div>
<div class="ttc" id="atdp__mmu_8c_html_a8ab26f4fb05f388d8bcf04ad89ee6797"><div class="ttname"><a href="tdp__mmu_8c.html#a8ab26f4fb05f388d8bcf04ad89ee6797">kvm_tdp_mmu_zap_invalidated_roots</a></div><div class="ttdeci">void kvm_tdp_mmu_zap_invalidated_roots(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00856">tdp_mmu.c:856</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_ab4bbd5785998945455f358b7cd9bbafa"><div class="ttname"><a href="tdp__mmu_8c.html#ab4bbd5785998945455f358b7cd9bbafa">kvm_tdp_mmu_invalidate_all_roots</a></div><div class="ttdeci">void kvm_tdp_mmu_invalidate_all_roots(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00901">tdp_mmu.c:901</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a73432bf42fbb3d43b3e04f88cd92b592_cgraph.png" border="0" usemap="#atdp__mmu_8h_a73432bf42fbb3d43b3e04f88cd92b592_cgraph" alt=""/></div>
<map name="atdp__mmu_8h_a73432bf42fbb3d43b3e04f88cd92b592_cgraph" id="atdp__mmu_8h_a73432bf42fbb3d43b3e04f88cd92b592_cgraph">
<area shape="rect" title=" " alt="" coords="5,439,211,465"/>
<area shape="rect" href="tdp__mmu_8c.html#ab4bbd5785998945455f358b7cd9bbafa" title=" " alt="" coords="278,398,470,439"/>
<area shape="rect" href="tdp__mmu_8c.html#a8ab26f4fb05f388d8bcf04ad89ee6797" title=" " alt="" coords="259,463,489,505"/>
<area shape="rect" href="tdp__mmu_8c.html#a8a9d637b546d8dfd125028f823a6eac0" title=" " alt="" coords="537,119,719,145"/>
<area shape="rect" href="tdp__mmu_8c.html#a95955e5f31399228d6a722fba5a81477" title=" " alt="" coords="555,652,701,679"/>
<area shape="rect" href="tdp__mmu_8h.html#a166bc9e57a26e8a37e94e2314a72d226" title=" " alt="" coords="777,68,918,95"/>
<area shape="rect" href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279" title=" " alt="" coords="2019,107,2186,149"/>
<area shape="rect" href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b" title=" " alt="" coords="2287,115,2426,141"/>
<area shape="rect" href="tdp__mmu_8c.html#af9c34fae0b7eac63cc78a01882498cfb" title=" " alt="" coords="767,652,928,679"/>
<area shape="rect" href="tdp__mmu_8c.html#a94f5586dfab1d77897564b4b4979da48" title=" " alt="" coords="769,703,925,745"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="2513,731,2688,757"/>
<area shape="rect" href="tdp__mmu_8c.html#abc2d73db35961f670cedf8ce1206c4d2" title=" " alt="" coords="980,67,1189,93"/>
<area shape="rect" href="tdp__mmu_8c.html#af6444812b70d9509539a3fa478cde14d" title=" " alt="" coords="997,608,1172,635"/>
<area shape="rect" href="tdp__mmu_8c.html#ac323268ae26fde5a608d694f4943d476" title=" " alt="" coords="976,715,1193,741"/>
<area shape="rect" href="tdp__mmu_8c.html#a692eb9d20075258e5d4a0e4289a7c9b6" title=" " alt="" coords="1241,669,1440,696"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="1253,63,1428,89"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="1488,61,1699,88"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="1747,49,1957,90"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="2019,5,2186,32"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="2009,56,2197,83"/>
<area shape="rect" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a" title=" " alt="" coords="1267,532,1414,559"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="1512,679,1675,705"/>
<area shape="rect" href="spte_8h.html#ad52bae526742289dbd54348dfa55310b" title=" " alt="" coords="2036,579,2169,605"/>
<area shape="rect" href="tdp__iter_8h.html#a74cc1f032b50c7c6c64ded8866deb4a4" title=" " alt="" coords="2005,224,2200,251"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="1775,799,1929,841"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="1777,427,1927,453"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="2551,303,2650,329"/>
<area shape="rect" href="spte_8h.html#a16669248c64937ddec714d855609cacb" title=" " alt="" coords="1785,647,1919,673"/>
<area shape="rect" href="spte_8h.html#a0726c9cf54d23a373533a0833aaf979c" title=" " alt="" coords="1799,697,1905,724"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="1795,596,1909,623"/>
<area shape="rect" href="kvm__main_8c.html#ad88d3f7ece0c0ad7dce0c296133beccb" title=" " alt="" coords="1765,865,1939,892"/>
<area shape="rect" href="kvm__main_8c.html#a3617d51882e6aba0abae53c0bf922873" title=" " alt="" coords="1781,748,1923,775"/>
<area shape="rect" href="mmu_8h.html#a9d589fd96a814e43fc146f83dc5d5f73" title=" " alt="" coords="1761,967,1943,993"/>
<area shape="rect" href="tdp__iter_8c.html#ae565103c187af07e69eb2f29b180b977" title=" " alt="" coords="1788,1068,1916,1095"/>
<area shape="rect" href="spte_8h.html#a88a720d39abac3aee2f63e03a20e8abd" title=" " alt="" coords="2053,1097,2152,1124"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="2042,832,2163,859"/>
<area shape="rect" href="mmu__internal_8h.html#a993d31328977f0bf21610ad74fa55a79" title=" " alt="" coords="2017,477,2189,504"/>
<area shape="rect" href="tdp__iter_8h.html#ae1b8feffcbd421cbcb6a40cd57abf768" title=" " alt="" coords="2007,275,2198,301"/>
<area shape="rect" href="tdp__iter_8h.html#a2138ed5465b3552439c1ad55ee1bc6d1" title=" " alt="" coords="2259,399,2454,441"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="2053,325,2153,352"/>
<area shape="rect" href="tdp__mmu_8c.html#a401c07c0503d3fc2c62b9a8a06096686" title=" " alt="" coords="2026,376,2179,403"/>
<area shape="rect" href="tdp__iter_8h.html#acce3a5afd04a68fc666c32e91d8c1770" title=" " alt="" coords="2252,224,2461,251"/>
<area shape="rect" href="tdp__iter_8h.html#ae00f2a54e0e899c2f169396a9c10d223" title=" " alt="" coords="2259,295,2454,337"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="2736,303,2837,329"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="2023,629,2182,656"/>
<area shape="rect" href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8" title=" " alt="" coords="2248,680,2465,707"/>
<area shape="rect" href="spte_8h.html#ad4cab344dce7557c80f815d4dc072deb" title=" " alt="" coords="2263,731,2450,757"/>
<area shape="rect" href="kvm__main_8c.html#a05228520c714138c61d76bfbc12c162c" title=" " alt="" coords="2011,883,2195,909"/>
<area shape="rect" href="kvm__main_8c.html#adb6ddc9dc8c5e447e04b1be97543f347" title=" " alt="" coords="2025,781,2180,808"/>
<area shape="rect" href="mmu_8h.html#a6555cf2d510d04ae19bee154d166f778" title=" " alt="" coords="1263,720,1419,747"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a73432bf42fbb3d43b3e04f88cd92b592_icgraph.png" border="0" usemap="#atdp__mmu_8h_a73432bf42fbb3d43b3e04f88cd92b592_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_a73432bf42fbb3d43b3e04f88cd92b592_icgraph" id="atdp__mmu_8h_a73432bf42fbb3d43b3e04f88cd92b592_icgraph">
<area shape="rect" title=" " alt="" coords="1329,157,1535,184"/>
<area shape="rect" href="mmu_8c.html#a0beae9a256ad42642a6b522a36a18a74" title=" " alt="" coords="1117,157,1281,184"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="899,183,1069,209"/>
<area shape="rect" href="x86_8c.html#a78b266c18dac3b9edbea80941c96e2cd" title=" " alt="" coords="913,132,1055,159"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="720,132,847,159"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="716,183,851,209"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="303,5,497,32"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="553,183,668,209"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="325,56,475,83"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="317,107,483,133"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="323,157,477,184"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="295,208,505,235"/>
<area shape="rect" href="debugfs_8c.html#af0427db3ec1a8c38ea51591abbefde57" title=" " alt="" coords="314,259,486,301"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="333,325,467,352"/>
<area shape="rect" href="sev_8c.html#ad28fd793149997c912b52490f6ca139a" title=" " alt="" coords="329,376,471,403"/>
<area shape="rect" href="sev_8c.html#af1eb77eac84f085b0a943b87f783e30d" title=" " alt="" coords="335,427,465,453"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="47,56,205,83"/>
<area shape="rect" href="sev_8c.html#abe3c569b297da3b78824074b8c08f9a7" title=" " alt="" coords="5,376,247,403"/>
<area shape="rect" href="svm_8c.html#a0e69cefce46e7b11e1e8e056ea5b6561" title=" " alt="" coords="59,427,193,453"/>
</map>
</div>

</div>
</div>
<a id="a0a5c7f827057100e08b2f45da804fa30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a5c7f827057100e08b2f45da804fa30">&#9670;&nbsp;</a></span>kvm_tdp_mmu_age_gfn_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_tdp_mmu_age_gfn_range </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_gfn_range *&#160;</td>
          <td class="paramname"><em>range</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l01195">1195</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;{</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="tdp__mmu_8c.html#aee4308cb9e1b221fb73c67c6e8f0e1d1">kvm_tdp_mmu_handle_gfn</a>(kvm, range, <a class="code" href="tdp__mmu_8c.html#a30ae563747c16580e9c760ea701eec6d">age_gfn_range</a>);</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;}</div>
<div class="ttc" id="atdp__mmu_8c_html_a30ae563747c16580e9c760ea701eec6d"><div class="ttname"><a href="tdp__mmu_8c.html#a30ae563747c16580e9c760ea701eec6d">age_gfn_range</a></div><div class="ttdeci">static bool age_gfn_range(struct kvm *kvm, struct tdp_iter *iter, struct kvm_gfn_range *range)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l01161">tdp_mmu.c:1161</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_aee4308cb9e1b221fb73c67c6e8f0e1d1"><div class="ttname"><a href="tdp__mmu_8c.html#aee4308cb9e1b221fb73c67c6e8f0e1d1">kvm_tdp_mmu_handle_gfn</a></div><div class="ttdeci">static __always_inline bool kvm_tdp_mmu_handle_gfn(struct kvm *kvm, struct kvm_gfn_range *range, tdp_handler_t handler)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l01129">tdp_mmu.c:1129</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a0a5c7f827057100e08b2f45da804fa30_cgraph.png" border="0" usemap="#atdp__mmu_8h_a0a5c7f827057100e08b2f45da804fa30_cgraph" alt=""/></div>
<map name="atdp__mmu_8h_a0a5c7f827057100e08b2f45da804fa30_cgraph" id="atdp__mmu_8h_a0a5c7f827057100e08b2f45da804fa30_cgraph">
<area shape="rect" title=" " alt="" coords="5,276,184,317"/>
<area shape="rect" href="tdp__mmu_8c.html#a30ae563747c16580e9c760ea701eec6d" title=" " alt="" coords="272,258,391,284"/>
<area shape="rect" href="tdp__mmu_8c.html#aee4308cb9e1b221fb73c67c6e8f0e1d1" title=" " alt="" coords="232,308,431,335"/>
<area shape="rect" href="spte_8h.html#a16669248c64937ddec714d855609cacb" title=" " alt="" coords="1005,43,1139,70"/>
<area shape="rect" href="spte_8h.html#a976cddc84d935189584bdce94d4805fd" title=" " alt="" coords="1479,144,1611,171"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="1261,262,1383,288"/>
<area shape="rect" href="kvm__main_8c.html#a3617d51882e6aba0abae53c0bf922873" title=" " alt="" coords="505,142,647,168"/>
<area shape="rect" href="tdp__iter_8h.html#a74cc1f032b50c7c6c64ded8866deb4a4" title=" " alt="" coords="479,344,673,371"/>
<area shape="rect" href="spte_8c.html#a8885614ad1f7e35c498eb228826d1909" title=" " alt="" coords="743,205,909,246"/>
<area shape="rect" href="spte_8h.html#a88a720d39abac3aee2f63e03a20e8abd" title=" " alt="" coords="527,395,625,422"/>
<area shape="rect" href="tdp__iter_8h.html#a06888df6894eef0e93f82c77b99110b2" title=" " alt="" coords="481,446,671,472"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="1243,195,1401,222"/>
<area shape="rect" href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8" title=" " alt="" coords="1213,94,1431,120"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="1659,144,1833,171"/>
<area shape="rect" href="kvm__main_8c.html#adb6ddc9dc8c5e447e04b1be97543f347" title=" " alt="" coords="749,123,903,150"/>
<area shape="rect" href="kvm__main_8c.html#aefbc4e0cbda09938de01d0afb0c06d59" title=" " alt="" coords="979,94,1165,120"/>
<area shape="rect" href="tdp__iter_8h.html#acce3a5afd04a68fc666c32e91d8c1770" title=" " alt="" coords="721,472,931,499"/>
<area shape="rect" href="tdp__iter_8h.html#ae00f2a54e0e899c2f169396a9c10d223" title=" " alt="" coords="729,406,923,448"/>
<area shape="rect" href="tdp__iter_8h.html#a2138ed5465b3552439c1ad55ee1bc6d1" title=" " alt="" coords="729,341,923,382"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="1023,464,1121,491"/>
<area shape="rect" href="spte_8c.html#a11de60840b247621debae854aea928db" title=" " alt="" coords="989,363,1155,390"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="1271,464,1373,491"/>
<area shape="rect" href="spte_8h.html#aeb796217990be75433fd1430d5958184" title=" " alt="" coords="1237,363,1407,390"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="995,246,1149,288"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a0a5c7f827057100e08b2f45da804fa30_icgraph.png" border="0" usemap="#atdp__mmu_8h_a0a5c7f827057100e08b2f45da804fa30_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_a0a5c7f827057100e08b2f45da804fa30_icgraph" id="atdp__mmu_8h_a0a5c7f827057100e08b2f45da804fa30_icgraph">
<area shape="rect" title=" " alt="" coords="164,5,343,47"/>
<area shape="rect" href="mmu_8c.html#a39977aaa99a2eb423e12429a5deb15dc" title=" " alt="" coords="5,13,116,39"/>
</map>
</div>

</div>
</div>
<a id="ad1753c27bb053bc6ac3a3893e10b49f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1753c27bb053bc6ac3a3893e10b49f6">&#9670;&nbsp;</a></span>kvm_tdp_mmu_clear_dirty_pt_masked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_tdp_mmu_clear_dirty_pt_masked </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_memory_slot *&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfn_t&#160;</td>
          <td class="paramname"><em>gfn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>wrprot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l01629">1629</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;{</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__mmu__page.html">kvm_mmu_page</a> *root;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160; </div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <a class="code" href="tdp__mmu_8c.html#a80ff30c938358003552a2b48063b0fee">for_each_tdp_mmu_root</a>(kvm, root, slot-&gt;as_id)</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        <a class="code" href="tdp__mmu_8c.html#a302b8c57cfb6b9bc82a2f68047477145">clear_dirty_pt_masked</a>(kvm, root, <a class="code" href="structkvm__mmu__page.html#ad833bc48e1885408b2b5c7deca9a6232">gfn</a>, mask, wrprot);</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;}</div>
<div class="ttc" id="astructkvm__mmu__page_html"><div class="ttname"><a href="structkvm__mmu__page.html">kvm_mmu_page</a></div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00052">mmu_internal.h:52</a></div></div>
<div class="ttc" id="astructkvm__mmu__page_html_ad833bc48e1885408b2b5c7deca9a6232"><div class="ttname"><a href="structkvm__mmu__page.html#ad833bc48e1885408b2b5c7deca9a6232">kvm_mmu_page::gfn</a></div><div class="ttdeci">gfn_t gfn</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00081">mmu_internal.h:81</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_a302b8c57cfb6b9bc82a2f68047477145"><div class="ttname"><a href="tdp__mmu_8c.html#a302b8c57cfb6b9bc82a2f68047477145">clear_dirty_pt_masked</a></div><div class="ttdeci">static void clear_dirty_pt_masked(struct kvm *kvm, struct kvm_mmu_page *root, gfn_t gfn, unsigned long mask, bool wrprot)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l01581">tdp_mmu.c:1581</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_a80ff30c938358003552a2b48063b0fee"><div class="ttname"><a href="tdp__mmu_8c.html#a80ff30c938358003552a2b48063b0fee">for_each_tdp_mmu_root</a></div><div class="ttdeci">#define for_each_tdp_mmu_root(_kvm, _root, _as_id)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00174">tdp_mmu.c:174</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_ad1753c27bb053bc6ac3a3893e10b49f6_cgraph.png" border="0" usemap="#atdp__mmu_8h_ad1753c27bb053bc6ac3a3893e10b49f6_cgraph" alt=""/></div>
<map name="atdp__mmu_8h_ad1753c27bb053bc6ac3a3893e10b49f6_cgraph" id="atdp__mmu_8h_ad1753c27bb053bc6ac3a3893e10b49f6_cgraph">
<area shape="rect" title=" " alt="" coords="5,99,201,141"/>
<area shape="rect" href="tdp__mmu_8c.html#a302b8c57cfb6b9bc82a2f68047477145" title=" " alt="" coords="249,107,419,133"/>
<area shape="rect" href="kvm__main_8c.html#a3617d51882e6aba0abae53c0bf922873" title=" " alt="" coords="490,5,633,32"/>
<area shape="rect" href="spte_8h.html#a5870e4934206b631c93e08f3ef78b934" title=" " alt="" coords="1413,49,1565,90"/>
<area shape="rect" href="spte_8h.html#a88a720d39abac3aee2f63e03a20e8abd" title=" " alt="" coords="512,107,611,133"/>
<area shape="rect" href="tdp__iter_8h.html#a06888df6894eef0e93f82c77b99110b2" title=" " alt="" coords="467,157,656,184"/>
<area shape="rect" href="tdp__mmu_8c.html#a8d2a2606fb90f6b6e1a2559d12c04ee8" title=" " alt="" coords="480,217,643,258"/>
<area shape="rect" href="kvm__main_8c.html#adb6ddc9dc8c5e447e04b1be97543f347" title=" " alt="" coords="731,5,886,32"/>
<area shape="rect" href="kvm__main_8c.html#aefbc4e0cbda09938de01d0afb0c06d59" title=" " alt="" coords="961,5,1148,32"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="1613,115,1788,141"/>
<area shape="rect" href="tdp__iter_8h.html#acce3a5afd04a68fc666c32e91d8c1770" title=" " alt="" coords="704,107,913,133"/>
<area shape="rect" href="tdp__iter_8h.html#ae00f2a54e0e899c2f169396a9c10d223" title=" " alt="" coords="711,158,906,199"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="1005,165,1104,192"/>
<area shape="rect" href="spte_8c.html#a11de60840b247621debae854aea928db" title=" " alt="" coords="971,267,1138,293"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="1230,165,1331,192"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="1201,216,1360,243"/>
<area shape="rect" href="spte_8h.html#a976cddc84d935189584bdce94d4805fd" title=" " alt="" coords="1423,216,1555,243"/>
<area shape="rect" href="spte_8h.html#aeb796217990be75433fd1430d5958184" title=" " alt="" coords="1196,317,1365,344"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="1220,368,1341,395"/>
<area shape="rect" href="spte_8h.html#ac3f82ba169af94a026b5df40f3d3753e" title=" " alt="" coords="742,224,875,251"/>
<area shape="rect" href="mmu__internal_8h.html#a32da0c4cb2494f355e66aabe82bc1bb5" title=" " alt="" coords="712,275,905,317"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_ad1753c27bb053bc6ac3a3893e10b49f6_icgraph.png" border="0" usemap="#atdp__mmu_8h_ad1753c27bb053bc6ac3a3893e10b49f6_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_ad1753c27bb053bc6ac3a3893e10b49f6_icgraph" id="atdp__mmu_8h_ad1753c27bb053bc6ac3a3893e10b49f6_icgraph">
<area shape="rect" title=" " alt="" coords="1080,39,1276,80"/>
<area shape="rect" href="mmu_8c.html#afeee4db4dd885d0e891ccb05f545c876" title=" " alt="" coords="855,5,1023,47"/>
<area shape="rect" href="mmu_8c.html#ace4eaa769a0c9e1f75a3900a51275d18" title=" " alt="" coords="847,71,1032,112"/>
<area shape="rect" href="mmu_8c.html#a035ec39ab60e2a3d382c272b15fc83a6" title=" " alt="" coords="620,39,799,80"/>
<area shape="rect" href="dirty__ring_8c.html#a68052369106191fbc506fdf4d64be449" title=" " alt="" coords="416,46,572,73"/>
<area shape="rect" href="dirty__ring_8c.html#a33f93cefad4ed59214fb8dbf36de7dd1" title=" " alt="" coords="208,46,368,73"/>
<area shape="rect" href="kvm__main_8c.html#a91e959c20554917ba05e7feea69acc7c" title=" " alt="" coords="5,39,160,80"/>
</map>
</div>

</div>
</div>
<a id="a670804848ccec53148d097c06b44657c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a670804848ccec53148d097c06b44657c">&#9670;&nbsp;</a></span>kvm_tdp_mmu_clear_dirty_slot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_tdp_mmu_clear_dirty_slot </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct kvm_memory_slot *&#160;</td>
          <td class="paramname"><em>slot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l01560">1560</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;{</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__mmu__page.html">kvm_mmu_page</a> *root;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="keywordtype">bool</span> spte_set = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160; </div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    lockdep_assert_held_read(&amp;kvm-&gt;mmu_lock);</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <a class="code" href="tdp__mmu_8c.html#a3c960568750483d675f0f994ac033a41">for_each_valid_tdp_mmu_root_yield_safe</a>(kvm, root, slot-&gt;as_id)</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;        spte_set |= <a class="code" href="tdp__mmu_8c.html#a9da9e7ba01717f85966fc080e86ecb84">clear_dirty_gfn_range</a>(kvm, root, slot-&gt;base_gfn,</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                slot-&gt;base_gfn + slot-&gt;npages);</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160; </div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    return spte_set;</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;}</div>
<div class="ttc" id="atdp__mmu_8c_html_a3c960568750483d675f0f994ac033a41"><div class="ttname"><a href="tdp__mmu_8c.html#a3c960568750483d675f0f994ac033a41">for_each_valid_tdp_mmu_root_yield_safe</a></div><div class="ttdeci">#define for_each_valid_tdp_mmu_root_yield_safe(_kvm, _root, _as_id)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00159">tdp_mmu.c:159</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_a9da9e7ba01717f85966fc080e86ecb84"><div class="ttname"><a href="tdp__mmu_8c.html#a9da9e7ba01717f85966fc080e86ecb84">clear_dirty_gfn_range</a></div><div class="ttdeci">static bool clear_dirty_gfn_range(struct kvm *kvm, struct kvm_mmu_page *root, gfn_t start, gfn_t end)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l01518">tdp_mmu.c:1518</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a670804848ccec53148d097c06b44657c_cgraph.png" border="0" usemap="#atdp__mmu_8h_a670804848ccec53148d097c06b44657c_cgraph" alt=""/></div>
<map name="atdp__mmu_8h_a670804848ccec53148d097c06b44657c_cgraph" id="atdp__mmu_8h_a670804848ccec53148d097c06b44657c_cgraph">
<area shape="rect" title=" " alt="" coords="5,620,232,647"/>
<area shape="rect" href="tdp__mmu_8c.html#a9da9e7ba01717f85966fc080e86ecb84" title=" " alt="" coords="280,620,443,647"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="1809,275,1907,301"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="1771,1055,1945,1081"/>
<area shape="rect" href="spte_8h.html#a5870e4934206b631c93e08f3ef78b934" title=" " alt="" coords="519,1325,671,1366"/>
<area shape="rect" href="tdp__mmu_8c.html#abc2d73db35961f670cedf8ce1206c4d2" title=" " alt="" coords="491,59,700,85"/>
<area shape="rect" href="tdp__mmu_8c.html#a8d2a2606fb90f6b6e1a2559d12c04ee8" title=" " alt="" coords="514,583,677,625"/>
<area shape="rect" href="tdp__mmu_8c.html#a692eb9d20075258e5d4a0e4289a7c9b6" title=" " alt="" coords="496,649,695,676"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="1993,275,2095,301"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="757,55,932,81"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="989,53,1200,80"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="1251,45,1462,86"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="1535,5,1701,32"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="1524,56,1712,83"/>
<area shape="rect" href="spte_8h.html#ac3f82ba169af94a026b5df40f3d3753e" title=" " alt="" coords="778,532,911,559"/>
<area shape="rect" href="mmu__internal_8h.html#a32da0c4cb2494f355e66aabe82bc1bb5" title=" " alt="" coords="748,583,941,625"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="763,852,926,879"/>
<area shape="rect" href="spte_8h.html#ad52bae526742289dbd54348dfa55310b" title=" " alt="" coords="1290,700,1423,727"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="1017,1207,1172,1249"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="1019,532,1170,559"/>
<area shape="rect" href="spte_8h.html#a16669248c64937ddec714d855609cacb" title=" " alt="" coords="1027,1105,1162,1132"/>
<area shape="rect" href="spte_8h.html#a0726c9cf54d23a373533a0833aaf979c" title=" " alt="" coords="1042,1156,1147,1183"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="1038,751,1151,777"/>
<area shape="rect" href="kvm__main_8c.html#ad88d3f7ece0c0ad7dce0c296133beccb" title=" " alt="" coords="1008,953,1181,980"/>
<area shape="rect" href="kvm__main_8c.html#a3617d51882e6aba0abae53c0bf922873" title=" " alt="" coords="1023,903,1166,929"/>
<area shape="rect" href="mmu_8h.html#a9d589fd96a814e43fc146f83dc5d5f73" title=" " alt="" coords="1004,1004,1185,1031"/>
<area shape="rect" href="tdp__iter_8c.html#ae565103c187af07e69eb2f29b180b977" title=" " alt="" coords="1031,801,1159,828"/>
<area shape="rect" href="spte_8h.html#a88a720d39abac3aee2f63e03a20e8abd" title=" " alt="" coords="1307,953,1406,980"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="1296,1215,1417,1241"/>
<area shape="rect" href="mmu__internal_8h.html#a993d31328977f0bf21610ad74fa55a79" title=" " alt="" coords="1271,329,1443,356"/>
<area shape="rect" href="tdp__iter_8h.html#ae1b8feffcbd421cbcb6a40cd57abf768" title=" " alt="" coords="1261,431,1452,457"/>
<area shape="rect" href="tdp__iter_8h.html#a74cc1f032b50c7c6c64ded8866deb4a4" title=" " alt="" coords="1259,380,1454,407"/>
<area shape="rect" href="tdp__iter_8h.html#a2138ed5465b3552439c1ad55ee1bc6d1" title=" " alt="" coords="1521,498,1715,539"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="1307,532,1407,559"/>
<area shape="rect" href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279" title=" " alt="" coords="1273,583,1440,625"/>
<area shape="rect" href="tdp__mmu_8c.html#a401c07c0503d3fc2c62b9a8a06096686" title=" " alt="" coords="1280,279,1433,305"/>
<area shape="rect" href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac" title=" " alt="" coords="1535,329,1701,356"/>
<area shape="rect" href="tdp__iter_8h.html#acce3a5afd04a68fc666c32e91d8c1770" title=" " alt="" coords="1513,447,1723,473"/>
<area shape="rect" href="tdp__iter_8h.html#ae00f2a54e0e899c2f169396a9c10d223" title=" " alt="" coords="1521,381,1715,422"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="1553,564,1683,591"/>
<area shape="rect" href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b" title=" " alt="" coords="1549,615,1687,641"/>
<area shape="rect" href="tdp__mmu_8c.html#a0003da5596a964166d5e46389e7cf4b3" title=" " alt="" coords="1519,279,1717,305"/>
<area shape="rect" href="mmu_8c.html#a2fba0b2dd67723bfbc4349ea7c8e019a" title=" " alt="" coords="1541,213,1695,254"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="1277,1105,1436,1132"/>
<area shape="rect" href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8" title=" " alt="" coords="1248,1055,1465,1081"/>
<area shape="rect" href="spte_8h.html#a976cddc84d935189584bdce94d4805fd" title=" " alt="" coords="1552,1105,1684,1132"/>
<area shape="rect" href="spte_8h.html#ad4cab344dce7557c80f815d4dc072deb" title=" " alt="" coords="1263,1156,1450,1183"/>
<area shape="rect" href="kvm__main_8c.html#a05228520c714138c61d76bfbc12c162c" title=" " alt="" coords="1265,1004,1449,1031"/>
<area shape="rect" href="kvm__main_8c.html#aefbc4e0cbda09938de01d0afb0c06d59" title=" " alt="" coords="1525,953,1711,980"/>
<area shape="rect" href="kvm__main_8c.html#adb6ddc9dc8c5e447e04b1be97543f347" title=" " alt="" coords="1279,903,1434,929"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a670804848ccec53148d097c06b44657c_icgraph.png" border="0" usemap="#atdp__mmu_8h_a670804848ccec53148d097c06b44657c_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_a670804848ccec53148d097c06b44657c_icgraph" id="atdp__mmu_8h_a670804848ccec53148d097c06b44657c_icgraph">
<area shape="rect" title=" " alt="" coords="3076,232,3303,259"/>
<area shape="rect" href="mmu_8c.html#acb92068f6e948846797ac6814b3618f1" title=" " alt="" coords="2833,225,3028,266"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="2619,225,2785,266"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="2365,225,2571,266"/>
<area shape="rect" href="kvm__main_8c.html#a05eed662dd45e4e4f7485e3158d95a3b" title=" " alt="" coords="2099,232,2317,259"/>
<area shape="rect" href="kvm__main_8c.html#ac81a7d714d0668ccea6d0c2ddfd0fed5" title=" " alt="" coords="1908,232,2051,259"/>
<area shape="rect" href="kvm__main_8c.html#ac76f506181e49aa4800bb202e11cb2b3" title=" " alt="" coords="1657,232,1860,259"/>
<area shape="rect" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9" title=" " alt="" coords="1412,177,1609,204"/>
<area shape="rect" href="kvm__main_8c.html#a1a839781d3be88d418abfb2b456663ab" title=" " alt="" coords="1417,257,1605,284"/>
<area shape="rect" href="vmx_8c.html#acc48d0f16e027c2bad1268d02a2eaa68" title=" " alt="" coords="1160,51,1345,77"/>
<area shape="rect" href="lapic_8c.html#a8c6616d2cbae35632aa5debb15b552ec" title=" " alt="" coords="1146,101,1359,128"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="1167,152,1338,179"/>
<area shape="rect" href="lapic_8c.html#a017e57adbc721d98d26099f1a431a22c" title=" " alt="" coords="1141,203,1364,229"/>
<area shape="rect" href="vmx_8c.html#a15d61630d8c4e3f7aea16d3b0164a799" title=" " alt="" coords="1183,253,1323,280"/>
<area shape="rect" href="vmx_8c.html#a426fe0cb3c7fd73b276f6815b6ab9ddc" title=" " alt="" coords="933,51,1071,77"/>
<area shape="rect" href="avic_8c.html#aefc63eafb35c1efd94f6d53e7d0b20d5" title=" " alt="" coords="915,101,1089,128"/>
<area shape="rect" href="avic_8c.html#a8e0a22138080054f4ac064064402f74a" title=" " alt="" coords="737,25,851,52"/>
<area shape="rect" href="svm_8c.html#a2af2f754ca7838a0253d54c33aae7d1e" title=" " alt="" coords="504,5,640,32"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="731,113,857,140"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="935,203,1069,229"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="475,56,669,83"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="737,240,851,267"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="497,107,647,133"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="489,157,655,184"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="495,208,649,235"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="467,259,677,285"/>
<area shape="rect" href="debugfs_8c.html#af0427db3ec1a8c38ea51591abbefde57" title=" " alt="" coords="486,310,658,351"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="505,376,639,403"/>
<area shape="rect" href="sev_8c.html#ad28fd793149997c912b52490f6ca139a" title=" " alt="" coords="501,427,643,453"/>
<area shape="rect" href="sev_8c.html#af1eb77eac84f085b0a943b87f783e30d" title=" " alt="" coords="507,477,637,504"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="219,107,377,133"/>
<area shape="rect" href="sev_8c.html#abe3c569b297da3b78824074b8c08f9a7" title=" " alt="" coords="177,427,419,453"/>
<area shape="rect" href="svm_8c.html#a0e69cefce46e7b11e1e8e056ea5b6561" title=" " alt="" coords="231,477,365,504"/>
<area shape="rect" href="x86_8c.html#a384702aafa8cdbab3cf92b3d576bb6fb" title=" " alt="" coords="911,253,1093,280"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="725,400,863,427"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="531,528,613,555"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="205,528,391,555"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,528,129,555"/>
<area shape="rect" href="kvm__main_8c.html#a4c8ff5a794a6a2e77e0cfc224568ef70" title=" " alt="" coords="1151,305,1354,346"/>
</map>
</div>

</div>
</div>
<a id="ab831f739cbe511803c4752d84ffab75c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab831f739cbe511803c4752d84ffab75c">&#9670;&nbsp;</a></span>kvm_tdp_mmu_fast_pf_get_last_sptep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64* kvm_tdp_mmu_fast_pf_get_last_sptep </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64 *&#160;</td>
          <td class="paramname"><em>spte</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l01795">1795</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;{</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtdp__iter.html">tdp_iter</a> iter;</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <span class="keyword">struct </span>kvm_mmu *mmu = vcpu-&gt;arch.mmu;</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    gfn_t gfn = addr &gt;&gt; PAGE_SHIFT;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <a class="code" href="mmu__internal_8h.html#a6798167b4e223d54b53a69a2c3c892c3">tdp_ptep_t</a> sptep = NULL;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160; </div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    <a class="code" href="tdp__mmu_8c.html#a9784c3e281a9a5a1c7fe6ea1f806e8f2">tdp_mmu_for_each_pte</a>(iter, mmu, gfn, gfn + 1) {</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        *spte = iter.old_spte;</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        sptep = iter.sptep;</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    }</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160; </div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;<span class="comment">     * Perform the rcu_dereference to get the raw spte pointer value since</span></div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;<span class="comment">     * we are passing it up to fast_page_fault, which is shared with the</span></div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;<span class="comment">     * legacy MMU and thus does not retain the TDP MMU-specific __rcu</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;<span class="comment">     * annotation.</span></div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;<span class="comment">     * This is safe since fast_page_fault obeys the contracts of this</span></div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;<span class="comment">     * function as well as all TDP MMU contracts around modifying SPTEs</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;<span class="comment">     * outside of mmu_lock.</span></div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="keywordflow">return</span> rcu_dereference(sptep);</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;}</div>
<div class="ttc" id="ammu__internal_8h_html_a6798167b4e223d54b53a69a2c3c892c3"><div class="ttname"><a href="mmu__internal_8h.html#a6798167b4e223d54b53a69a2c3c892c3">tdp_ptep_t</a></div><div class="ttdeci">u64 __rcu * tdp_ptep_t</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00050">mmu_internal.h:50</a></div></div>
<div class="ttc" id="astructtdp__iter_html"><div class="ttname"><a href="structtdp__iter.html">tdp_iter</a></div><div class="ttdef"><b>Definition:</b> <a href="tdp__iter_8h_source.html#l00078">tdp_iter.h:78</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_a9784c3e281a9a5a1c7fe6ea1f806e8f2"><div class="ttname"><a href="tdp__mmu_8c.html#a9784c3e281a9a5a1c7fe6ea1f806e8f2">tdp_mmu_for_each_pte</a></div><div class="ttdeci">#define tdp_mmu_for_each_pte(_iter, _mmu, _start, _end)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00631">tdp_mmu.c:631</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_ab831f739cbe511803c4752d84ffab75c_icgraph.png" border="0" usemap="#atdp__mmu_8h_ab831f739cbe511803c4752d84ffab75c_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_ab831f739cbe511803c4752d84ffab75c_icgraph" id="atdp__mmu_8h_ab831f739cbe511803c4752d84ffab75c_icgraph">
<area shape="rect" title=" " alt="" coords="2705,543,2877,585"/>
<area shape="rect" href="mmu_8c.html#a19bf28eb1ca5198dc125fd42f26c789e" title=" " alt="" coords="2535,551,2657,577"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="2352,551,2487,577"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="1441,521,1596,548"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="2137,576,2304,603"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="1199,521,1347,548"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="1177,233,1368,260"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="984,639,1104,665"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="255,385,427,412"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="723,613,911,640"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="505,832,645,859"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="735,908,898,935"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="735,1035,899,1061"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="5,385,205,412"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="526,613,625,640"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="522,731,629,757"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="293,533,389,560"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="476,461,675,488"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="505,781,645,808"/>
<area shape="rect" href="smm_8c.html#a5382946234c910e05c6e2c09aff15713" title=" " alt="" coords="499,563,652,589"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="511,411,640,437"/>
<area shape="rect" href="vmx_2nested_8c.html#a001f930db9a867e828cf01b48d3e4e25" title=" " alt="" coords="498,665,653,706"/>
<area shape="rect" href="x86_8c.html#a420caf80521ab8d6ef7218d5dd26d47f" title=" " alt="" coords="538,360,613,387"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="261,606,420,647"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="307,781,374,808"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="288,832,393,859"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="253,284,428,311"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="486,883,665,909"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="498,933,653,960"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="491,984,659,1011"/>
<area shape="rect" href="vmx_2nested_8c.html#a06a397c328d1656bb4d3ab073878e6f0" title=" " alt="" coords="484,1035,667,1061"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="510,1085,641,1112"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="959,226,1129,267"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="960,107,1128,133"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="736,226,897,267"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="507,208,644,235"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="735,56,899,83"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="737,107,896,133"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="727,157,906,184"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="753,5,881,32"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="501,56,649,83"/>
<area shape="rect" href="vmx_8c.html#a7a38ddbd01bec99bf94ab4868ad4c6ea" title=" " alt="" coords="491,107,660,133"/>
<area shape="rect" href="svm_8c.html#a589e870c8a06d1ba26f24da299e47b95" title=" " alt="" coords="515,157,635,184"/>
<area shape="rect" href="svm_8c.html#a8afafecae406016532810194f187fe2c" title=" " alt="" coords="481,5,669,32"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="1915,577,2089,604"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="1669,580,1867,607"/>
<area shape="rect" href="mmu_8c.html#a3e794d802eeb843cd6d7b699b74d8bf3" title=" " alt="" coords="1430,635,1607,661"/>
<area shape="rect" href="mmu_8c.html#a00f26353045c597f6a49cdd4f239f548" title=" " alt="" coords="1416,580,1621,607"/>
<area shape="rect" href="mmu_8c.html#a37d0224d142272ad59fd35b4a22c5937" title=" " alt="" coords="1201,639,1345,665"/>
<area shape="rect" href="svm_2nested_8c.html#a962af1ea814d32a42ada9f601918cee5" title=" " alt="" coords="1187,573,1358,614"/>
</map>
</div>

</div>
</div>
<a id="ae8fe85fef7c2fb884cd2d27810a84d0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8fe85fef7c2fb884cd2d27810a84d0b">&#9670;&nbsp;</a></span>kvm_tdp_mmu_get_root()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static __must_check bool kvm_tdp_mmu_get_root </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a> *&#160;</td>
          <td class="paramname"><em>root</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8h_source.html#l00015">15</a> of file <a class="el" href="tdp__mmu_8h_source.html">tdp_mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;{</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <span class="keywordflow">return</span> refcount_inc_not_zero(&amp;root-&gt;<a class="code" href="structkvm__mmu__page.html#a41397fd72948cc7002b169d2fb3aba5f">tdp_mmu_root_count</a>);</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;}</div>
<div class="ttc" id="astructkvm__mmu__page_html_a41397fd72948cc7002b169d2fb3aba5f"><div class="ttname"><a href="structkvm__mmu__page.html#a41397fd72948cc7002b169d2fb3aba5f">kvm_mmu_page::tdp_mmu_root_count</a></div><div class="ttdeci">refcount_t tdp_mmu_root_count</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00102">mmu_internal.h:102</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_ae8fe85fef7c2fb884cd2d27810a84d0b_icgraph.png" border="0" usemap="#atdp__mmu_8h_ae8fe85fef7c2fb884cd2d27810a84d0b_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_ae8fe85fef7c2fb884cd2d27810a84d0b_icgraph" id="atdp__mmu_8h_ae8fe85fef7c2fb884cd2d27810a84d0b_icgraph">
<area shape="rect" title=" " alt="" coords="2045,136,2227,163"/>
<area shape="rect" href="tdp__mmu_8c.html#ae643f902f826e920f4150bb66872fd47" title=" " alt="" coords="1811,99,1997,141"/>
<area shape="rect" href="tdp__mmu_8c.html#a5d434b3d8d515d7e4c585ae3aa7e15fa" title=" " alt="" coords="1827,165,1981,192"/>
<area shape="rect" href="mmu_8c.html#a171383889d717b24003ee27735437bbe" title=" " alt="" coords="1584,107,1763,133"/>
<area shape="rect" href="mmu_8c.html#a475bd00898314bb9378d8e4306aa7874" title=" " alt="" coords="1409,107,1536,133"/>
<area shape="rect" href="mmu_8h.html#ab0e194ecad859add3d639850021f8b16" title=" " alt="" coords="1221,107,1361,133"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="1003,70,1173,111"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="589,136,727,163"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="793,70,955,111"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="571,67,745,93"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="427,5,508,32"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="413,56,522,83"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="412,107,523,133"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="427,157,508,184"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,157,364,184"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,157,129,184"/>
</map>
</div>

</div>
</div>
<a id="ae643f902f826e920f4150bb66872fd47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae643f902f826e920f4150bb66872fd47">&#9670;&nbsp;</a></span>kvm_tdp_mmu_get_vcpu_root_hpa()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">hpa_t kvm_tdp_mmu_get_vcpu_root_hpa </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l00219">219</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;{</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keyword">union </span>kvm_mmu_page_role role = vcpu-&gt;arch.mmu-&gt;root_role;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keyword">struct </span>kvm *kvm = vcpu-&gt;kvm;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__mmu__page.html">kvm_mmu_page</a> *root;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    lockdep_assert_held_write(&amp;kvm-&gt;mmu_lock);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">     * Check for an existing root before allocating a new one.  Note, the</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">     * role check prevents consuming an invalid root.</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="tdp__mmu_8c.html#a80ff30c938358003552a2b48063b0fee">for_each_tdp_mmu_root</a>(kvm, root, <a class="code" href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac">kvm_mmu_role_as_id</a>(<a class="code" href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">role</a>)) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">if</span> (root-&gt;<a class="code" href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">role</a>.word == <a class="code" href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">role</a>.word &amp;&amp;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <a class="code" href="tdp__mmu_8h.html#ae8fe85fef7c2fb884cd2d27810a84d0b">kvm_tdp_mmu_get_root</a>(root))</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    root = <a class="code" href="tdp__mmu_8c.html#aab91e6aa4615cd9bf4f66141ca34642b">tdp_mmu_alloc_sp</a>(vcpu);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="tdp__mmu_8c.html#a8d6f094dd9ef458c1c57aee653afd602">tdp_mmu_init_sp</a>(root, NULL, 0, <a class="code" href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">role</a>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">     * TDP MMU roots are kept until they are explicitly invalidated, either</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">     * by a memslot update or by the destruction of the VM.  Initialize the</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">     * refcount to two; one reference for the vCPU, and one reference for</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">     * the TDP MMU itself, which is held until the root is invalidated and</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">     * is ultimately put by kvm_tdp_mmu_zap_invalidated_roots().</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    refcount_set(&amp;root-&gt;<a class="code" href="structkvm__mmu__page.html#a41397fd72948cc7002b169d2fb3aba5f">tdp_mmu_root_count</a>, 2);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    spin_lock(&amp;kvm-&gt;arch.tdp_mmu_pages_lock);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    list_add_rcu(&amp;root-&gt;<a class="code" href="structkvm__mmu__page.html#aa5dc0ace123000668489891db69aa600">link</a>, &amp;kvm-&gt;arch.tdp_mmu_roots);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    spin_unlock(&amp;kvm-&gt;arch.tdp_mmu_pages_lock);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;out:</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">return</span> __pa(root-&gt;<a class="code" href="structkvm__mmu__page.html#a1bb8925c750e6b17d3a66a54c5df7c50">spt</a>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;}</div>
<div class="ttc" id="ammu__internal_8h_html_a5334557775f77a151865c95f1cd224ac"><div class="ttname"><a href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac">kvm_mmu_role_as_id</a></div><div class="ttdeci">static int kvm_mmu_role_as_id(union kvm_mmu_page_role role)</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00138">mmu_internal.h:138</a></div></div>
<div class="ttc" id="astructkvm__mmu__page_html_a1bb8925c750e6b17d3a66a54c5df7c50"><div class="ttname"><a href="structkvm__mmu__page.html#a1bb8925c750e6b17d3a66a54c5df7c50">kvm_mmu_page::spt</a></div><div class="ttdeci">u64 * spt</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00083">mmu_internal.h:83</a></div></div>
<div class="ttc" id="astructkvm__mmu__page_html_a9a054096d38bb2789139b0ef5aa8fec3"><div class="ttname"><a href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">kvm_mmu_page::role</a></div><div class="ttdeci">union kvm_mmu_page_role role</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00074">mmu_internal.h:80</a></div></div>
<div class="ttc" id="astructkvm__mmu__page_html_aa5dc0ace123000668489891db69aa600"><div class="ttname"><a href="structkvm__mmu__page.html#aa5dc0ace123000668489891db69aa600">kvm_mmu_page::link</a></div><div class="ttdeci">struct list_head link</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00351">mmu_internal.h:57</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_a8d6f094dd9ef458c1c57aee653afd602"><div class="ttname"><a href="tdp__mmu_8c.html#a8d6f094dd9ef458c1c57aee653afd602">tdp_mmu_init_sp</a></div><div class="ttdeci">static void tdp_mmu_init_sp(struct kvm_mmu_page *sp, tdp_ptep_t sptep, gfn_t gfn, union kvm_mmu_page_role role)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00190">tdp_mmu.c:190</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_aab91e6aa4615cd9bf4f66141ca34642b"><div class="ttname"><a href="tdp__mmu_8c.html#aab91e6aa4615cd9bf4f66141ca34642b">tdp_mmu_alloc_sp</a></div><div class="ttdeci">static struct kvm_mmu_page * tdp_mmu_alloc_sp(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00180">tdp_mmu.c:180</a></div></div>
<div class="ttc" id="atdp__mmu_8h_html_ae8fe85fef7c2fb884cd2d27810a84d0b"><div class="ttname"><a href="tdp__mmu_8h.html#ae8fe85fef7c2fb884cd2d27810a84d0b">kvm_tdp_mmu_get_root</a></div><div class="ttdeci">static __must_check bool kvm_tdp_mmu_get_root(struct kvm_mmu_page *root)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8h_source.html#l00015">tdp_mmu.h:15</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_ae643f902f826e920f4150bb66872fd47_cgraph.png" border="0" usemap="#atdp__mmu_8h_ae643f902f826e920f4150bb66872fd47_cgraph" alt=""/></div>
<map name="atdp__mmu_8h_ae643f902f826e920f4150bb66872fd47_cgraph" id="atdp__mmu_8h_ae643f902f826e920f4150bb66872fd47_cgraph">
<area shape="rect" title=" " alt="" coords="5,74,192,115"/>
<area shape="rect" href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac" title=" " alt="" coords="248,5,413,32"/>
<area shape="rect" href="tdp__mmu_8h.html#ae8fe85fef7c2fb884cd2d27810a84d0b" title=" " alt="" coords="240,56,421,83"/>
<area shape="rect" href="tdp__mmu_8c.html#aab91e6aa4615cd9bf4f66141ca34642b" title=" " alt="" coords="259,107,403,133"/>
<area shape="rect" href="tdp__mmu_8c.html#a8d6f094dd9ef458c1c57aee653afd602" title=" " alt="" coords="263,157,398,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_ae643f902f826e920f4150bb66872fd47_icgraph.png" border="0" usemap="#atdp__mmu_8h_ae643f902f826e920f4150bb66872fd47_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_ae643f902f826e920f4150bb66872fd47_icgraph" id="atdp__mmu_8h_ae643f902f826e920f4150bb66872fd47_icgraph">
<area shape="rect" title=" " alt="" coords="1811,99,1997,141"/>
<area shape="rect" href="mmu_8c.html#a171383889d717b24003ee27735437bbe" title=" " alt="" coords="1584,107,1763,133"/>
<area shape="rect" href="mmu_8c.html#a475bd00898314bb9378d8e4306aa7874" title=" " alt="" coords="1409,107,1536,133"/>
<area shape="rect" href="mmu_8h.html#ab0e194ecad859add3d639850021f8b16" title=" " alt="" coords="1221,107,1361,133"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="1003,70,1173,111"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="589,136,727,163"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="793,70,955,111"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="571,67,745,93"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="427,5,508,32"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="413,56,522,83"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="412,107,523,133"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="427,157,508,184"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,157,364,184"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,157,129,184"/>
</map>
</div>

</div>
</div>
<a id="a9a34a882b3a9c5607394395bc988b804"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a34a882b3a9c5607394395bc988b804">&#9670;&nbsp;</a></span>kvm_tdp_mmu_get_walk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_tdp_mmu_get_walk </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64 *&#160;</td>
          <td class="paramname"><em>sptes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>root_level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l01766">1766</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;{</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtdp__iter.html">tdp_iter</a> iter;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <span class="keyword">struct </span>kvm_mmu *mmu = vcpu-&gt;arch.mmu;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    gfn_t gfn = addr &gt;&gt; PAGE_SHIFT;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <span class="keywordtype">int</span> leaf = -1;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160; </div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    *root_level = vcpu-&gt;arch.mmu-&gt;root_role.<a class="code" href="structtdp__iter.html#ac6b854683bce752c9e0fe0b068a288b2">level</a>;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160; </div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <a class="code" href="tdp__mmu_8c.html#a9784c3e281a9a5a1c7fe6ea1f806e8f2">tdp_mmu_for_each_pte</a>(iter, mmu, gfn, gfn + 1) {</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;        leaf = iter.level;</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;        sptes[leaf] = iter.old_spte;</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    }</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160; </div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="keywordflow">return</span> leaf;</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;}</div>
<div class="ttc" id="astructtdp__iter_html_ac6b854683bce752c9e0fe0b068a288b2"><div class="ttname"><a href="structtdp__iter.html#ac6b854683bce752c9e0fe0b068a288b2">tdp_iter::level</a></div><div class="ttdeci">int level</div><div class="ttdef"><b>Definition:</b> <a href="tdp__iter_8h_source.html#l00101">tdp_iter.h:101</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a9a34a882b3a9c5607394395bc988b804_icgraph.png" border="0" usemap="#atdp__mmu_8h_a9a34a882b3a9c5607394395bc988b804_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_a9a34a882b3a9c5607394395bc988b804_icgraph" id="atdp__mmu_8h_a9a34a882b3a9c5607394395bc988b804_icgraph">
<area shape="rect" title=" " alt="" coords="1500,81,1687,108"/>
<area shape="rect" href="mmu_8c.html#a24c91b8ae0a349c76c95f6266f62d6e1" title=" " alt="" coords="1329,81,1452,108"/>
<area shape="rect" href="mmu_8c.html#a899cf46c0ee6df6305c7fe167421e2b7" title=" " alt="" coords="1095,81,1281,108"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="879,81,1047,108"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="659,5,823,32"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="662,56,821,83"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="652,107,831,133"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="677,157,805,184"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="436,5,584,32"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="222,5,357,32"/>
<area shape="rect" href="vmx_8c.html#a7a38ddbd01bec99bf94ab4868ad4c6ea" title=" " alt="" coords="425,56,595,83"/>
<area shape="rect" href="svm_8c.html#a589e870c8a06d1ba26f24da299e47b95" title=" " alt="" coords="450,107,570,133"/>
<area shape="rect" href="svm_8c.html#a8afafecae406016532810194f187fe2c" title=" " alt="" coords="416,157,604,184"/>
<area shape="rect" href="sev_8c.html#aac550422551b71c0afe8efe176e0b55d" title=" " alt="" coords="5,128,163,155"/>
<area shape="rect" href="sev_8c.html#ae483e70b55c68f5a2405263543ce3737" title=" " alt="" coords="211,150,368,191"/>
<area shape="rect" href="svm_8c.html#a3f8983432f4aae138a6f4d167c561132" title=" " alt="" coords="223,216,356,243"/>
</map>
</div>

</div>
</div>
<a id="ab4bbd5785998945455f358b7cd9bbafa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4bbd5785998945455f358b7cd9bbafa">&#9670;&nbsp;</a></span>kvm_tdp_mmu_invalidate_all_roots()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_tdp_mmu_invalidate_all_roots </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l00901">901</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;{</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__mmu__page.html">kvm_mmu_page</a> *root;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">     * mmu_lock must be held for write to ensure that a root doesn&#39;t become</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">     * invalid while there are active readers (invalidating a root while</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment">     * there are active readers may or may not be problematic in practice,</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment">     * but it&#39;s uncharted territory and not supported).</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment">     * Waive the assertion if there are no users of @kvm, i.e. the VM is</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">     * being destroyed after all references have been put, or if no vCPUs</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">     * have been created (which means there are no roots), i.e. the VM is</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">     * being destroyed in an error path of KVM_CREATE_VM.</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordflow">if</span> (IS_ENABLED(CONFIG_PROVE_LOCKING) &amp;&amp;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        refcount_read(&amp;kvm-&gt;users_count) &amp;&amp; kvm-&gt;created_vcpus)</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        lockdep_assert_held_write(&amp;kvm-&gt;mmu_lock);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160; </div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment">     * As above, mmu_lock isn&#39;t held when destroying the VM!  There can&#39;t</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="comment">     * be other references to @kvm, i.e. nothing else can invalidate roots</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment">     * or get/put references to roots.</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    list_for_each_entry(root, &amp;kvm-&gt;arch.tdp_mmu_roots, <a class="code" href="structkvm__mmu__page.html#aa5dc0ace123000668489891db69aa600">link</a>) {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="comment">         * Note, invalid roots can outlive a memslot update!  Invalid</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="comment">         * roots must be *zapped* before the memslot update completes,</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment">         * but a different task can acquire a reference and keep the</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">         * root alive after its been zapped.</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <span class="keywordflow">if</span> (!root-&gt;<a class="code" href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">role</a>.invalid) {</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            root-&gt;<a class="code" href="structkvm__mmu__page.html#a4be3912894be6a937cad4c54708edaa4">tdp_mmu_scheduled_root_to_zap</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            root-&gt;<a class="code" href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">role</a>.invalid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        }</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;}</div>
<div class="ttc" id="astructkvm__mmu__page_html_a4be3912894be6a937cad4c54708edaa4"><div class="ttname"><a href="structkvm__mmu__page.html#a4be3912894be6a937cad4c54708edaa4">kvm_mmu_page::tdp_mmu_scheduled_root_to_zap</a></div><div class="ttdeci">bool tdp_mmu_scheduled_root_to_zap</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00066">mmu_internal.h:66</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_ab4bbd5785998945455f358b7cd9bbafa_icgraph.png" border="0" usemap="#atdp__mmu_8h_ab4bbd5785998945455f358b7cd9bbafa_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_ab4bbd5785998945455f358b7cd9bbafa_icgraph" id="atdp__mmu_8h_ab4bbd5785998945455f358b7cd9bbafa_icgraph">
<area shape="rect" title=" " alt="" coords="3580,271,3772,313"/>
<area shape="rect" href="tdp__mmu_8c.html#a73432bf42fbb3d43b3e04f88cd92b592" title=" " alt="" coords="3327,233,3532,260"/>
<area shape="rect" href="mmu_8c.html#abd59fd9785b9b5676841e9706c1c6797" title=" " alt="" coords="3341,304,3518,331"/>
<area shape="rect" href="mmu_8c.html#a0beae9a256ad42642a6b522a36a18a74" title=" " alt="" coords="1429,212,1593,239"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="1167,212,1338,239"/>
<area shape="rect" href="x86_8c.html#a78b266c18dac3b9edbea80941c96e2cd" title=" " alt="" coords="1181,161,1324,188"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="939,161,1065,188"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="935,212,1069,239"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="475,5,669,32"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="737,212,851,239"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="497,56,647,83"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="489,107,655,133"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="495,157,649,184"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="467,208,677,235"/>
<area shape="rect" href="debugfs_8c.html#af0427db3ec1a8c38ea51591abbefde57" title=" " alt="" coords="486,259,658,301"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="505,325,639,352"/>
<area shape="rect" href="sev_8c.html#ad28fd793149997c912b52490f6ca139a" title=" " alt="" coords="501,376,643,403"/>
<area shape="rect" href="sev_8c.html#af1eb77eac84f085b0a943b87f783e30d" title=" " alt="" coords="507,427,637,453"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="219,56,377,83"/>
<area shape="rect" href="sev_8c.html#abe3c569b297da3b78824074b8c08f9a7" title=" " alt="" coords="177,376,419,403"/>
<area shape="rect" href="svm_8c.html#a0e69cefce46e7b11e1e8e056ea5b6561" title=" " alt="" coords="231,427,365,453"/>
<area shape="rect" href="mmu_8c.html#a58fe7b43995ae8c20c597e1bb9c4c007" title=" " alt="" coords="2867,267,3048,309"/>
<area shape="rect" href="mmu_8c.html#ad4293ab926b1ab16fb8b380a76b9f533" title=" " alt="" coords="3115,326,3279,367"/>
<area shape="rect" href="mmu_8c.html#a5a613414a3787274a50cc9f9e9bab180" title=" " alt="" coords="3121,392,3272,419"/>
<area shape="rect" href="kvm__main_8c.html#aae203bcd73cff0002aeddd37bea71323" title=" " alt="" coords="2353,279,2541,305"/>
<area shape="rect" href="kvm__main_8c.html#ac81a7d714d0668ccea6d0c2ddfd0fed5" title=" " alt="" coords="1908,431,2051,457"/>
<area shape="rect" href="kvm__main_8c.html#ac76f506181e49aa4800bb202e11cb2b3" title=" " alt="" coords="1657,432,1860,459"/>
<area shape="rect" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9" title=" " alt="" coords="1412,432,1609,459"/>
<area shape="rect" href="kvm__main_8c.html#a1a839781d3be88d418abfb2b456663ab" title=" " alt="" coords="1417,537,1605,564"/>
<area shape="rect" href="vmx_8c.html#acc48d0f16e027c2bad1268d02a2eaa68" title=" " alt="" coords="1160,381,1345,408"/>
<area shape="rect" href="lapic_8c.html#a8c6616d2cbae35632aa5debb15b552ec" title=" " alt="" coords="1146,432,1359,459"/>
<area shape="rect" href="lapic_8c.html#a017e57adbc721d98d26099f1a431a22c" title=" " alt="" coords="1141,483,1364,509"/>
<area shape="rect" href="vmx_8c.html#a15d61630d8c4e3f7aea16d3b0164a799" title=" " alt="" coords="1183,533,1323,560"/>
<area shape="rect" href="vmx_8c.html#a426fe0cb3c7fd73b276f6815b6ab9ddc" title=" " alt="" coords="933,407,1071,433"/>
<area shape="rect" href="avic_8c.html#aefc63eafb35c1efd94f6d53e7d0b20d5" title=" " alt="" coords="915,457,1089,484"/>
<area shape="rect" href="avic_8c.html#a8e0a22138080054f4ac064064402f74a" title=" " alt="" coords="737,471,851,497"/>
<area shape="rect" href="svm_8c.html#a2af2f754ca7838a0253d54c33aae7d1e" title=" " alt="" coords="504,477,640,504"/>
<area shape="rect" href="x86_8c.html#a384702aafa8cdbab3cf92b3d576bb6fb" title=" " alt="" coords="911,508,1093,535"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="725,521,863,548"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="531,528,613,555"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="205,528,391,555"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,528,129,555"/>
<area shape="rect" href="kvm__main_8c.html#a4c8ff5a794a6a2e77e0cfc224568ef70" title=" " alt="" coords="1151,585,1354,626"/>
<area shape="rect" href="x86_8c.html#ae7e25dec8e0af366fb3db41dc9881970" title=" " alt="" coords="2848,333,3067,360"/>
<area shape="rect" href="kvm__main_8c.html#a6178ec8efee3ce8e53d84403b2a25401" title=" " alt="" coords="2589,333,2800,360"/>
<area shape="rect" href="kvm__main_8c.html#a52d56a5dc447602839375289b5bbffb2" title=" " alt="" coords="2359,405,2535,432"/>
<area shape="rect" href="kvm__main_8c.html#a8c9bd99a64bbedb0930e29ed4dcc7897" title=" " alt="" coords="2120,380,2284,407"/>
<area shape="rect" href="kvm__main_8c.html#ac4ce014a99262ed5672a102c6d2ffdbd" title=" " alt="" coords="2120,431,2284,457"/>
<area shape="rect" href="kvm__main_8c.html#afdb5cea8958921b2ea9bd3a29cf9d7a6" title=" " alt="" coords="2122,481,2282,508"/>
<area shape="rect" href="kvm__main_8c.html#a192569033b972982f6b53e13666ef82b" title=" " alt="" coords="2099,532,2305,559"/>
</map>
</div>

</div>
</div>
<a id="ad2479228afe629631e4f0331c440a4d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2479228afe629631e4f0331c440a4d6">&#9670;&nbsp;</a></span>kvm_tdp_mmu_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_tdp_mmu_map </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__page__fault.html">kvm_page_fault</a> *&#160;</td>
          <td class="paramname"><em>fault</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l01032">1032</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;{</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <span class="keyword">struct </span>kvm_mmu *mmu = vcpu-&gt;arch.mmu;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keyword">struct </span>kvm *kvm = vcpu-&gt;kvm;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtdp__iter.html">tdp_iter</a> iter;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__mmu__page.html">kvm_mmu_page</a> *sp;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keywordtype">int</span> ret = <a class="code" href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5f8c25625c45554fecc5a5b95e63a2e5">RET_PF_RETRY</a>;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160; </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <a class="code" href="mmu_8c.html#ab3ace8d82fe9d5e1653277159c5ad4df">kvm_mmu_hugepage_adjust</a>(vcpu, fault);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; </div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    trace_kvm_mmu_spte_requested(fault);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160; </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    rcu_read_lock();</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160; </div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <a class="code" href="tdp__mmu_8c.html#a9784c3e281a9a5a1c7fe6ea1f806e8f2">tdp_mmu_for_each_pte</a>(iter, mmu, fault-&gt;<a class="code" href="structkvm__page__fault.html#a27031ff0dd2c0b28283774456a29f066">gfn</a>, fault-&gt;<a class="code" href="structkvm__page__fault.html#a27031ff0dd2c0b28283774456a29f066">gfn</a> + 1) {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160; </div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        <span class="keywordflow">if</span> (fault-&gt;<a class="code" href="structkvm__page__fault.html#a8c1b32bdc3f59a2c3ffca8cc919b5ef3">nx_huge_page_workaround_enabled</a>)</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            <a class="code" href="mmu_8c.html#ae810dbeb6cd413090f54ca0cf864fe49">disallowed_hugepage_adjust</a>(fault, iter.old_spte, iter.level);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment">         * If SPTE has been frozen by another thread, just give up and</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment">         * retry, avoiding unnecessary page table allocation and free.</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="spte_8h.html#ad52bae526742289dbd54348dfa55310b">is_removed_spte</a>(iter.old_spte))</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            <span class="keywordflow">goto</span> retry;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        <span class="keywordflow">if</span> (iter.level == fault-&gt;<a class="code" href="structkvm__page__fault.html#ad6705ad5f00efe4e9e47328860e9634a">goal_level</a>)</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            <span class="keywordflow">goto</span> map_target_level;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160; </div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        <span class="comment">/* Step down into the lower level page table if it exists. */</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686">is_shadow_present_pte</a>(iter.old_spte) &amp;&amp;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;            !<a class="code" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729">is_large_pte</a>(iter.old_spte))</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160; </div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment">         * The SPTE is either non-present or points to a huge page that</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment">         * needs to be split.</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        sp = <a class="code" href="tdp__mmu_8c.html#aab91e6aa4615cd9bf4f66141ca34642b">tdp_mmu_alloc_sp</a>(vcpu);</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <a class="code" href="tdp__mmu_8c.html#a502cd8b971218c38ecd999409fc15ee3">tdp_mmu_init_child_sp</a>(sp, &amp;iter);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160; </div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        sp-&gt;<a class="code" href="structkvm__mmu__page.html#a48fdf70976937b2e4cc3e8265ffa5676">nx_huge_page_disallowed</a> = fault-&gt;<a class="code" href="structkvm__page__fault.html#a421a772100b124af81fb35768801c6bc">huge_page_disallowed</a>;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160; </div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686">is_shadow_present_pte</a>(iter.old_spte))</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;            r = <a class="code" href="tdp__mmu_8c.html#acf7d062eca8e6190d76f4934c290be61">tdp_mmu_split_huge_page</a>(kvm, &amp;iter, sp, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;            r = <a class="code" href="tdp__mmu_8c.html#a6588b054500f580603f94c0555fe3c06">tdp_mmu_link_sp</a>(kvm, &amp;iter, sp, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160; </div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment">         * Force the guest to retry if installing an upper level SPTE</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment">         * failed, e.g. because a different task modified the SPTE.</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <span class="keywordflow">if</span> (r) {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            <a class="code" href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b">tdp_mmu_free_sp</a>(sp);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            <span class="keywordflow">goto</span> retry;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        <span class="keywordflow">if</span> (fault-&gt;<a class="code" href="structkvm__page__fault.html#a421a772100b124af81fb35768801c6bc">huge_page_disallowed</a> &amp;&amp;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            fault-&gt;<a class="code" href="structkvm__page__fault.html#a8ffa43a08e1131c59b2597d86a616b26">req_level</a> &gt;= iter.level) {</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;            spin_lock(&amp;kvm-&gt;arch.tdp_mmu_pages_lock);</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            <span class="keywordflow">if</span> (sp-&gt;<a class="code" href="structkvm__mmu__page.html#a48fdf70976937b2e4cc3e8265ffa5676">nx_huge_page_disallowed</a>)</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                <a class="code" href="mmu_8c.html#ad3e86bf491c8c2726e3bc6702166cfdf">track_possible_nx_huge_page</a>(kvm, sp);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            spin_unlock(&amp;kvm-&gt;arch.tdp_mmu_pages_lock);</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        }</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    }</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160; </div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="comment">     * The walk aborted before reaching the target level, e.g. because the</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="comment">     * iterator detected an upper level SPTE was frozen during traversal.</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    WARN_ON_ONCE(iter.level == fault-&gt;<a class="code" href="structkvm__page__fault.html#ad6705ad5f00efe4e9e47328860e9634a">goal_level</a>);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordflow">goto</span> retry;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160; </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;map_target_level:</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    ret = <a class="code" href="tdp__mmu_8c.html#aa98226578ebe207e97e262a86bbd5427">tdp_mmu_map_handle_target_level</a>(vcpu, fault, &amp;iter);</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;retry:</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    rcu_read_unlock();</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;}</div>
<div class="ttc" id="ammu_8c_html_ab3ace8d82fe9d5e1653277159c5ad4df"><div class="ttname"><a href="mmu_8c.html#ab3ace8d82fe9d5e1653277159c5ad4df">kvm_mmu_hugepage_adjust</a></div><div class="ttdeci">void kvm_mmu_hugepage_adjust(struct kvm_vcpu *vcpu, struct kvm_page_fault *fault)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l03180">mmu.c:3180</a></div></div>
<div class="ttc" id="ammu_8c_html_ad3e86bf491c8c2726e3bc6702166cfdf"><div class="ttname"><a href="mmu_8c.html#ad3e86bf491c8c2726e3bc6702166cfdf">track_possible_nx_huge_page</a></div><div class="ttdeci">void track_possible_nx_huge_page(struct kvm *kvm, struct kvm_mmu_page *sp)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l00848">mmu.c:848</a></div></div>
<div class="ttc" id="ammu_8c_html_ae810dbeb6cd413090f54ca0cf864fe49"><div class="ttname"><a href="mmu_8c.html#ae810dbeb6cd413090f54ca0cf864fe49">disallowed_hugepage_adjust</a></div><div class="ttdeci">void disallowed_hugepage_adjust(struct kvm_page_fault *fault, u64 spte, int cur_level)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l03216">mmu.c:3216</a></div></div>
<div class="ttc" id="ammu__internal_8h_html_ab04a0655cd1e3bcac5e8f48c18df1a57a5f8c25625c45554fecc5a5b95e63a2e5"><div class="ttname"><a href="mmu__internal_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5f8c25625c45554fecc5a5b95e63a2e5">RET_PF_RETRY</a></div><div class="ttdeci">@ RET_PF_RETRY</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00275">mmu_internal.h:275</a></div></div>
<div class="ttc" id="aspte_8h_html_a7d73c1cb0114320b9dab8ba78033c686"><div class="ttname"><a href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686">is_shadow_present_pte</a></div><div class="ttdeci">static bool is_shadow_present_pte(u64 pte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00258">spte.h:258</a></div></div>
<div class="ttc" id="aspte_8h_html_ad52bae526742289dbd54348dfa55310b"><div class="ttname"><a href="spte_8h.html#ad52bae526742289dbd54348dfa55310b">is_removed_spte</a></div><div class="ttdeci">static bool is_removed_spte(u64 spte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00202">spte.h:202</a></div></div>
<div class="ttc" id="aspte_8h_html_ae9b1a94fccf74f0837e1a775bc57d729"><div class="ttname"><a href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729">is_large_pte</a></div><div class="ttdeci">static bool is_large_pte(u64 pte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00313">spte.h:313</a></div></div>
<div class="ttc" id="astructkvm__mmu__page_html_a48fdf70976937b2e4cc3e8265ffa5676"><div class="ttname"><a href="structkvm__mmu__page.html#a48fdf70976937b2e4cc3e8265ffa5676">kvm_mmu_page::nx_huge_page_disallowed</a></div><div class="ttdeci">bool nx_huge_page_disallowed</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00074">mmu_internal.h:74</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_a27031ff0dd2c0b28283774456a29f066"><div class="ttname"><a href="structkvm__page__fault.html#a27031ff0dd2c0b28283774456a29f066">kvm_page_fault::gfn</a></div><div class="ttdeci">gfn_t gfn</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00233">mmu_internal.h:233</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_a421a772100b124af81fb35768801c6bc"><div class="ttname"><a href="structkvm__page__fault.html#a421a772100b124af81fb35768801c6bc">kvm_page_fault::huge_page_disallowed</a></div><div class="ttdeci">bool huge_page_disallowed</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00212">mmu_internal.h:212</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_a8c1b32bdc3f59a2c3ffca8cc919b5ef3"><div class="ttname"><a href="structkvm__page__fault.html#a8c1b32bdc3f59a2c3ffca8cc919b5ef3">kvm_page_fault::nx_huge_page_workaround_enabled</a></div><div class="ttdeci">const bool nx_huge_page_workaround_enabled</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00206">mmu_internal.h:206</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_a8ffa43a08e1131c59b2597d86a616b26"><div class="ttname"><a href="structkvm__page__fault.html#a8ffa43a08e1131c59b2597d86a616b26">kvm_page_fault::req_level</a></div><div class="ttdeci">u8 req_level</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00224">mmu_internal.h:224</a></div></div>
<div class="ttc" id="astructkvm__page__fault_html_ad6705ad5f00efe4e9e47328860e9634a"><div class="ttname"><a href="structkvm__page__fault.html#ad6705ad5f00efe4e9e47328860e9634a">kvm_page_fault::goal_level</a></div><div class="ttdeci">u8 goal_level</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00230">mmu_internal.h:230</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_a502cd8b971218c38ecd999409fc15ee3"><div class="ttname"><a href="tdp__mmu_8c.html#a502cd8b971218c38ecd999409fc15ee3">tdp_mmu_init_child_sp</a></div><div class="ttdeci">static void tdp_mmu_init_child_sp(struct kvm_mmu_page *child_sp, struct tdp_iter *iter)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00205">tdp_mmu.c:205</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_a6588b054500f580603f94c0555fe3c06"><div class="ttname"><a href="tdp__mmu_8c.html#a6588b054500f580603f94c0555fe3c06">tdp_mmu_link_sp</a></div><div class="ttdeci">static int tdp_mmu_link_sp(struct kvm *kvm, struct tdp_iter *iter, struct kvm_mmu_page *sp, bool shared)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l01006">tdp_mmu.c:1006</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_aa98226578ebe207e97e262a86bbd5427"><div class="ttname"><a href="tdp__mmu_8c.html#aa98226578ebe207e97e262a86bbd5427">tdp_mmu_map_handle_target_level</a></div><div class="ttdeci">static int tdp_mmu_map_handle_target_level(struct kvm_vcpu *vcpu, struct kvm_page_fault *fault, struct tdp_iter *iter)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00943">tdp_mmu.c:943</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_acf7d062eca8e6190d76f4934c290be61"><div class="ttname"><a href="tdp__mmu_8c.html#acf7d062eca8e6190d76f4934c290be61">tdp_mmu_split_huge_page</a></div><div class="ttdeci">static int tdp_mmu_split_huge_page(struct kvm *kvm, struct tdp_iter *iter, struct kvm_mmu_page *sp, bool shared)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l01376">tdp_mmu.c:1376</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_afab0b8fc9210a8e1190a153f664ef78b"><div class="ttname"><a href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b">tdp_mmu_free_sp</a></div><div class="ttdeci">static void tdp_mmu_free_sp(struct kvm_mmu_page *sp)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00054">tdp_mmu.c:54</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_ad2479228afe629631e4f0331c440a4d6_cgraph.png" border="0" usemap="#atdp__mmu_8h_ad2479228afe629631e4f0331c440a4d6_cgraph" alt=""/></div>
<map name="atdp__mmu_8h_ad2479228afe629631e4f0331c440a4d6_cgraph" id="atdp__mmu_8h_ad2479228afe629631e4f0331c440a4d6_cgraph">
<area shape="rect" title=" " alt="" coords="5,1407,161,1433"/>
<area shape="rect" href="mmu_8c.html#ae810dbeb6cd413090f54ca0cf864fe49" title=" " alt="" coords="739,1023,901,1065"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="1708,1089,1809,1116"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="1482,836,1657,863"/>
<area shape="rect" href="spte_8h.html#ad52bae526742289dbd54348dfa55310b" title=" " alt="" coords="1503,1380,1636,1407"/>
<area shape="rect" href="mmu_8c.html#ab3ace8d82fe9d5e1653277159c5ad4df" title=" " alt="" coords="213,1545,423,1572"/>
<area shape="rect" href="tdp__mmu_8c.html#aab91e6aa4615cd9bf4f66141ca34642b" title=" " alt="" coords="246,1596,390,1623"/>
<area shape="rect" href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b" title=" " alt="" coords="249,1647,387,1673"/>
<area shape="rect" href="tdp__mmu_8c.html#a502cd8b971218c38ecd999409fc15ee3" title=" " alt="" coords="734,1393,906,1420"/>
<area shape="rect" href="tdp__mmu_8c.html#a6588b054500f580603f94c0555fe3c06" title=" " alt="" coords="509,1241,647,1268"/>
<area shape="rect" href="tdp__mmu_8c.html#aa98226578ebe207e97e262a86bbd5427" title=" " alt="" coords="735,958,905,999"/>
<area shape="rect" href="tdp__mmu_8c.html#acf7d062eca8e6190d76f4934c290be61" title=" " alt="" coords="219,1368,417,1395"/>
<area shape="rect" href="mmu_8c.html#ad3e86bf491c8c2726e3bc6702166cfdf" title=" " alt="" coords="209,1697,427,1724"/>
<area shape="rect" href="spte_8h.html#af8791b1ec453ef3bce3c87ea28744692" title=" " alt="" coords="997,1191,1127,1217"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="1257,1241,1387,1268"/>
<area shape="rect" href="mmu_8c.html#a3c4a735c02073ba03d156c2ce4cfc5e5" title=" " alt="" coords="475,1546,681,1587"/>
<area shape="rect" href="mmu_8c.html#a25a86ecdadc998ed7ceac6eb669be98f" title=" " alt="" coords="729,1600,911,1627"/>
<area shape="rect" href="mmu_8c.html#a1a8a0df061e27892bcc64a3e810e6c29" title=" " alt="" coords="759,1549,881,1576"/>
<area shape="rect" href="mmu_8h.html#a41b79b63cae220349d8eb5a54f047939" title=" " alt="" coords="1009,1549,1115,1576"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="1012,1241,1112,1268"/>
<area shape="rect" href="tdp__mmu_8c.html#a8d6f094dd9ef458c1c57aee653afd602" title=" " alt="" coords="995,1393,1129,1420"/>
<area shape="rect" href="spte_8h.html#ac3f82ba169af94a026b5df40f3d3753e" title=" " alt="" coords="753,1140,887,1167"/>
<area shape="rect" href="spte_8c.html#a98038e4116bcdef6f9e1e335eefc29c9" title=" " alt="" coords="745,1191,895,1217"/>
<area shape="rect" href="tdp__mmu_8c.html#a5217224e4957f6457786d51ddd62914b" title=" " alt="" coords="729,1089,911,1116"/>
<area shape="rect" href="tdp__mmu_8c.html#af6444812b70d9509539a3fa478cde14d" title=" " alt="" coords="733,1292,907,1319"/>
<area shape="rect" href="tdp__mmu_8c.html#a692eb9d20075258e5d4a0e4289a7c9b6" title=" " alt="" coords="963,1292,1161,1319"/>
<area shape="rect" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a" title=" " alt="" coords="989,1343,1135,1369"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="1241,1292,1403,1319"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="1520,1241,1619,1268"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="1513,1191,1626,1217"/>
<area shape="rect" href="mmu_8h.html#a9d589fd96a814e43fc146f83dc5d5f73" title=" " alt="" coords="1479,1304,1660,1331"/>
<area shape="rect" href="mmu__internal_8h.html#ae152dfa402f5fe629bd4b1f4f931de1e" title=" " alt="" coords="961,153,1163,180"/>
<area shape="rect" href="spte_8c.html#ae55574ff3b0384504236d8fb85a3a6d0" title=" " alt="" coords="993,372,1131,399"/>
<area shape="rect" href="spte_8c.html#ab8dba69ef9f5267d41ba061dbe101ded" title=" " alt="" coords="1015,553,1109,580"/>
<area shape="rect" href="mmu__internal_8h.html#a8805295a6f11129455d5b87a86fd3db5" title=" " alt="" coords="1247,95,1397,121"/>
<area shape="rect" href="kvm__main_8c.html#a523d3c698dd532d3fbc1bb046246ea5f" title=" " alt="" coords="1235,146,1409,187"/>
<area shape="rect" href="spte_8c.html#a941485cd3f9578fdfff7474df672b8e4" title=" " alt="" coords="1215,212,1429,239"/>
<area shape="rect" href="spte_8h.html#aca7067bb9ce45d32003771bcdb7f902b" title=" " alt="" coords="1267,684,1377,711"/>
<area shape="rect" href="mmu__internal_8h.html#a8a367cbfff40c5c72d6f19049da9fc51" title=" " alt="" coords="1225,785,1419,812"/>
<area shape="rect" href="spte_8h.html#a331291ac914d7a45322fae31df1f5e64" title=" " alt="" coords="1271,364,1373,391"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="1261,415,1383,441"/>
<area shape="rect" href="spte_8c.html#ab239f729574ce926da684e16e1c739fc" title=" " alt="" coords="1251,465,1393,492"/>
<area shape="rect" href="mmu__internal_8h.html#a32da0c4cb2494f355e66aabe82bc1bb5" title=" " alt="" coords="1225,517,1419,558"/>
<area shape="rect" href="kvm__main_8c.html#ae4806d9a69b751639c175cb98e468f15" title=" " alt="" coords="1231,583,1413,609"/>
<area shape="rect" href="spte_8c.html#a8885614ad1f7e35c498eb228826d1909" title=" " alt="" coords="1486,930,1653,971"/>
<area shape="rect" href="mmu_8c.html#af8846daf6e76a8d619fba16ff979245b" title=" " alt="" coords="1222,633,1422,660"/>
<area shape="rect" href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8" title=" " alt="" coords="1213,263,1431,289"/>
<area shape="rect" href="spte_8h.html#ad4cab344dce7557c80f815d4dc072deb" title=" " alt="" coords="1229,313,1415,340"/>
<area shape="rect" href="spte_8c.html#adc3a08f029fff6aaf2bf687edf69410f" title=" " alt="" coords="959,988,1165,1015"/>
<area shape="rect" href="spte_8c.html#ac0162f8b29f82f308036271f93880cd7" title=" " alt="" coords="1237,988,1407,1015"/>
</map>
</div>

</div>
</div>
<a id="a8a9d637b546d8dfd125028f823a6eac0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a9d637b546d8dfd125028f823a6eac0">&#9670;&nbsp;</a></span>kvm_tdp_mmu_put_root()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_tdp_mmu_put_root </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a> *&#160;</td>
          <td class="paramname"><em>root</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l00076">76</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">if</span> (!refcount_dec_and_test(&amp;root-&gt;<a class="code" href="structkvm__mmu__page.html#a41397fd72948cc7002b169d2fb3aba5f">tdp_mmu_root_count</a>))</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">     * The TDP MMU itself holds a reference to each root until the root is</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">     * explicitly invalidated, i.e. the final reference should be never be</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">     * put for a valid root.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    KVM_BUG_ON(!<a class="code" href="tdp__mmu_8h.html#a166bc9e57a26e8a37e94e2314a72d226">is_tdp_mmu_page</a>(root) || !root-&gt;<a class="code" href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">role</a>.invalid, kvm);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    spin_lock(&amp;kvm-&gt;arch.tdp_mmu_pages_lock);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    list_del_rcu(&amp;root-&gt;<a class="code" href="structkvm__mmu__page.html#aa5dc0ace123000668489891db69aa600">link</a>);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    spin_unlock(&amp;kvm-&gt;arch.tdp_mmu_pages_lock);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    call_rcu(&amp;root-&gt;rcu_head, <a class="code" href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279">tdp_mmu_free_sp_rcu_callback</a>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div>
<div class="ttc" id="atdp__mmu_8c_html_a92b80ecd9f7bf033d7ed2f28fb0a1279"><div class="ttname"><a href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279">tdp_mmu_free_sp_rcu_callback</a></div><div class="ttdeci">static void tdp_mmu_free_sp_rcu_callback(struct rcu_head *head)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00068">tdp_mmu.c:68</a></div></div>
<div class="ttc" id="atdp__mmu_8h_html_a166bc9e57a26e8a37e94e2314a72d226"><div class="ttname"><a href="tdp__mmu_8h.html#a166bc9e57a26e8a37e94e2314a72d226">is_tdp_mmu_page</a></div><div class="ttdeci">static bool is_tdp_mmu_page(struct kvm_mmu_page *sp)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8h_source.html#l00074">tdp_mmu.h:74</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a8a9d637b546d8dfd125028f823a6eac0_cgraph.png" border="0" usemap="#atdp__mmu_8h_a8a9d637b546d8dfd125028f823a6eac0_cgraph" alt=""/></div>
<map name="atdp__mmu_8h_a8a9d637b546d8dfd125028f823a6eac0_cgraph" id="atdp__mmu_8h_a8a9d637b546d8dfd125028f823a6eac0_cgraph">
<area shape="rect" title=" " alt="" coords="5,35,187,61"/>
<area shape="rect" href="tdp__mmu_8h.html#a166bc9e57a26e8a37e94e2314a72d226" title=" " alt="" coords="247,5,389,32"/>
<area shape="rect" href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279" title=" " alt="" coords="235,57,401,98"/>
<area shape="rect" href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b" title=" " alt="" coords="449,64,588,91"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a8a9d637b546d8dfd125028f823a6eac0_icgraph.png" border="0" usemap="#atdp__mmu_8h_a8a9d637b546d8dfd125028f823a6eac0_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_a8a9d637b546d8dfd125028f823a6eac0_icgraph" id="atdp__mmu_8h_a8a9d637b546d8dfd125028f823a6eac0_icgraph">
<area shape="rect" title=" " alt="" coords="1523,281,1704,307"/>
<area shape="rect" href="tdp__mmu_8c.html#a57310f6ad7e70c13dadcfd30aa71af6d" title=" " alt="" coords="1269,71,1449,112"/>
<area shape="rect" href="tdp__mmu_8c.html#a8ab26f4fb05f388d8bcf04ad89ee6797" title=" " alt="" coords="1244,244,1475,285"/>
<area shape="rect" href="mmu_8c.html#a5b648a843c7267d204fe81facbc9f84f" title=" " alt="" coords="1279,310,1440,337"/>
<area shape="rect" href="tdp__mmu_8c.html#a5d434b3d8d515d7e4c585ae3aa7e15fa" title=" " alt="" coords="1283,361,1436,387"/>
<area shape="rect" href="mmu_8c.html#a073d9b7de8eaf977452c1eb7395a78d6" title=" " alt="" coords="1002,5,1185,47"/>
<area shape="rect" href="mmu_8c.html#a6abdd1728810c3f3ab8c2e1e6d2d37f0" title=" " alt="" coords="998,71,1189,112"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="757,5,923,47"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="477,5,683,47"/>
<area shape="rect" href="mmu_8c.html#a035ec39ab60e2a3d382c272b15fc83a6" title=" " alt="" coords="751,71,929,112"/>
<area shape="rect" href="dirty__ring_8c.html#a68052369106191fbc506fdf4d64be449" title=" " alt="" coords="502,74,658,101"/>
<area shape="rect" href="tdp__mmu_8c.html#a73432bf42fbb3d43b3e04f88cd92b592" title=" " alt="" coords="991,190,1196,217"/>
<area shape="rect" href="mmu_8c.html#abd59fd9785b9b5676841e9706c1c6797" title=" " alt="" coords="1005,267,1182,294"/>
<area shape="rect" href="mmu_8c.html#a0beae9a256ad42642a6b522a36a18a74" title=" " alt="" coords="758,159,922,186"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="495,125,665,151"/>
<area shape="rect" href="x86_8c.html#a78b266c18dac3b9edbea80941c96e2cd" title=" " alt="" coords="509,175,651,202"/>
<area shape="rect" href="mmu_8c.html#a58fe7b43995ae8c20c597e1bb9c4c007" title=" " alt="" coords="749,211,931,252"/>
<area shape="rect" href="mmu_8c.html#ad4293ab926b1ab16fb8b380a76b9f533" title=" " alt="" coords="758,276,922,317"/>
<area shape="rect" href="mmu_8c.html#a5a613414a3787274a50cc9f9e9bab180" title=" " alt="" coords="765,342,915,369"/>
<area shape="rect" href="kvm__main_8c.html#aae203bcd73cff0002aeddd37bea71323" title=" " alt="" coords="486,226,674,253"/>
<area shape="rect" href="x86_8c.html#ae7e25dec8e0af366fb3db41dc9881970" title=" " alt="" coords="471,283,689,310"/>
<area shape="rect" href="mmu_8c.html#ab7d4e418cb85a72507e384df5027293e" title=" " alt="" coords="1011,670,1176,697"/>
<area shape="rect" href="mmu_8c.html#ae3c450d21264b7f2a31cc71d03c2a658" title=" " alt="" coords="739,393,941,435"/>
<area shape="rect" href="mmu_8c.html#accc9c990bf354ea4f50d7e9c2deee3e4" title=" " alt="" coords="759,511,921,552"/>
<area shape="rect" href="mmu_8c.html#a0e7f249026693e08d3c8b70f7ffd5003" title=" " alt="" coords="517,467,643,494"/>
<area shape="rect" href="vmx_2nested_8c.html#ad9920ec1586ae352fbc272ed93cf7b38" title=" " alt="" coords="791,822,889,849"/>
<area shape="rect" href="vmx_2nested_8c.html#a54e70f407596ed5f029a4e4a9855d76c" title=" " alt="" coords="783,873,897,899"/>
<area shape="rect" href="x86_8c.html#aa792359250f034a2a29b0c809df64ff3" title=" " alt="" coords="761,577,919,603"/>
<area shape="rect" href="mmu_8c.html#aed9206081417b11ad2654d347022bb05" title=" " alt="" coords="756,924,924,965"/>
<area shape="rect" href="mmu_8c.html#a6d448c19a18bd089be4c218a86d523be" title=" " alt="" coords="737,990,943,1017"/>
<area shape="rect" href="mmu_8c.html#a7bf770a114656f992dd1c0aff57fe9e5" title=" " alt="" coords="769,721,911,747"/>
<area shape="rect" href="x86_8c.html#ae69bdd054a70a95d99b79bae770372cf" title=" " alt="" coords="288,619,387,646"/>
<area shape="rect" href="vmx_2nested_8c.html#a5a5df09c88b5fad9a716109f9917e9a5" title=" " alt="" coords="751,1041,929,1067"/>
<area shape="rect" href="mmu_8c.html#aa1e7a67c950b9d5bc46f7aaed6b5367c" title=" " alt="" coords="486,393,674,435"/>
<area shape="rect" href="mmu_8c.html#a40fe74f8abc723be216276bf005e4be8" title=" " alt="" coords="259,467,416,494"/>
<area shape="rect" href="x86_8c.html#a75f57f1f4494df7f35fcdf0e0e582a31" title=" " alt="" coords="52,518,157,545"/>
<area shape="rect" href="vmx_2nested_8c.html#a4c26f7246065bb8952f345af22487b9c" title=" " alt="" coords="521,873,639,899"/>
<area shape="rect" href="vmx_2nested_8c.html#a64e6550fab681b40c832fe4e2d5e3b95" title=" " alt="" coords="507,923,653,950"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="252,967,423,1008"/>
<area shape="rect" href="x86_8c.html#a97b209e5c87a4c7b5850646ab9a1919c" title=" " alt="" coords="502,569,658,595"/>
<area shape="rect" href="vmx_2nested_8c.html#a82fdee7a11d269320b0b30e836910587" title=" " alt="" coords="519,1025,641,1051"/>
<area shape="rect" href="x86_8c.html#a334f9c72dae5c0a2867b04acbc2beb6e" title=" " alt="" coords="505,1076,655,1117"/>
<area shape="rect" href="mmu_8c.html#a1b010cfd4a70f0e7ad2d50619562cd1c" title=" " alt="" coords="506,771,654,798"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="486,721,674,747"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="267,721,407,747"/>
<area shape="rect" href="x86_8c.html#aa7dd06e7d0835e6cbf23134ad9fb19d8" title=" " alt="" coords="489,822,671,849"/>
<area shape="rect" href="x86_8c.html#a39acca4a1624a86a5d8e547339729536" title=" " alt="" coords="52,721,157,747"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="23,569,186,595"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="52,619,157,646"/>
<area shape="rect" href="vmx_2nested_8c.html#a562e6893d0703c98635cab943cc58fed" title=" " alt="" coords="5,670,204,697"/>
</map>
</div>

</div>
</div>
<a id="aa53a75612d7b32153949be34f4055144"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa53a75612d7b32153949be34f4055144">&#9670;&nbsp;</a></span>kvm_tdp_mmu_set_spte_gfn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_tdp_mmu_set_spte_gfn </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_gfn_range *&#160;</td>
          <td class="paramname"><em>range</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l01247">1247</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;{</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="comment">     * No need to handle the remote TLB flush under RCU protection, the</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="comment">     * target SPTE _must_ be a leaf SPTE, i.e. cannot result in freeing a</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="comment">     * shadow page. See the WARN on pfn_changed in handle_changed_spte().</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="tdp__mmu_8c.html#aee4308cb9e1b221fb73c67c6e8f0e1d1">kvm_tdp_mmu_handle_gfn</a>(kvm, range, <a class="code" href="tdp__mmu_8c.html#a01bf8752c61ddeae2878ef46d312e00c">set_spte_gfn</a>);</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;}</div>
<div class="ttc" id="atdp__mmu_8c_html_a01bf8752c61ddeae2878ef46d312e00c"><div class="ttname"><a href="tdp__mmu_8c.html#a01bf8752c61ddeae2878ef46d312e00c">set_spte_gfn</a></div><div class="ttdeci">static bool set_spte_gfn(struct kvm *kvm, struct tdp_iter *iter, struct kvm_gfn_range *range)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l01211">tdp_mmu.c:1211</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_aa53a75612d7b32153949be34f4055144_cgraph.png" border="0" usemap="#atdp__mmu_8h_aa53a75612d7b32153949be34f4055144_cgraph" alt=""/></div>
<map name="atdp__mmu_8h_aa53a75612d7b32153949be34f4055144_cgraph" id="atdp__mmu_8h_aa53a75612d7b32153949be34f4055144_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,216,57"/>
<area shape="rect" href="tdp__mmu_8c.html#aee4308cb9e1b221fb73c67c6e8f0e1d1" title=" " alt="" coords="264,5,463,32"/>
<area shape="rect" href="tdp__mmu_8c.html#a01bf8752c61ddeae2878ef46d312e00c" title=" " alt="" coords="311,56,416,83"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="2536,581,2711,608"/>
<area shape="rect" href="spte_8c.html#acde6f5a6ce759cab5d21b74658796860" title=" " alt="" coords="511,49,693,90"/>
<area shape="rect" href="tdp__mmu_8c.html#af6444812b70d9509539a3fa478cde14d" title=" " alt="" coords="515,140,689,167"/>
<area shape="rect" href="spte_8c.html#a8885614ad1f7e35c498eb228826d1909" title=" " alt="" coords="1640,49,1807,90"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="1882,306,2037,347"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="2120,165,2279,192"/>
<area shape="rect" href="spte_8h.html#a976cddc84d935189584bdce94d4805fd" title=" " alt="" coords="2356,204,2488,231"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="2139,317,2260,344"/>
<area shape="rect" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a" title=" " alt="" coords="741,191,888,217"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="936,719,1099,745"/>
<area shape="rect" href="spte_8h.html#ad52bae526742289dbd54348dfa55310b" title=" " alt="" coords="1407,289,1540,316"/>
<area shape="rect" href="tdp__iter_8h.html#a74cc1f032b50c7c6c64ded8866deb4a4" title=" " alt="" coords="1376,239,1571,265"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="1162,492,1313,519"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="1910,769,2009,796"/>
<area shape="rect" href="spte_8h.html#a16669248c64937ddec714d855609cacb" title=" " alt="" coords="1892,115,2027,141"/>
<area shape="rect" href="spte_8h.html#a0726c9cf54d23a373533a0833aaf979c" title=" " alt="" coords="1907,719,2012,745"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="1181,668,1294,695"/>
<area shape="rect" href="kvm__main_8c.html#ad88d3f7ece0c0ad7dce0c296133beccb" title=" " alt="" coords="1151,871,1324,897"/>
<area shape="rect" href="kvm__main_8c.html#a3617d51882e6aba0abae53c0bf922873" title=" " alt="" coords="1166,820,1309,847"/>
<area shape="rect" href="mmu_8h.html#a9d589fd96a814e43fc146f83dc5d5f73" title=" " alt="" coords="1147,972,1328,999"/>
<area shape="rect" href="tdp__iter_8c.html#ae565103c187af07e69eb2f29b180b977" title=" " alt="" coords="1173,921,1301,948"/>
<area shape="rect" href="spte_8h.html#a88a720d39abac3aee2f63e03a20e8abd" title=" " alt="" coords="1424,1023,1523,1049"/>
<area shape="rect" href="mmu__internal_8h.html#a993d31328977f0bf21610ad74fa55a79" title=" " alt="" coords="1387,391,1559,417"/>
<area shape="rect" href="tdp__iter_8h.html#ae1b8feffcbd421cbcb6a40cd57abf768" title=" " alt="" coords="1378,441,1569,468"/>
<area shape="rect" href="tdp__iter_8h.html#a2138ed5465b3552439c1ad55ee1bc6d1" title=" " alt="" coords="1626,333,1821,374"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="1423,492,1523,519"/>
<area shape="rect" href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279" title=" " alt="" coords="1390,543,1557,585"/>
<area shape="rect" href="tdp__mmu_8c.html#a401c07c0503d3fc2c62b9a8a06096686" title=" " alt="" coords="1397,609,1550,636"/>
<area shape="rect" href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac" title=" " alt="" coords="1641,399,1806,425"/>
<area shape="rect" href="tdp__iter_8h.html#acce3a5afd04a68fc666c32e91d8c1770" title=" " alt="" coords="1619,216,1828,243"/>
<area shape="rect" href="tdp__iter_8h.html#ae00f2a54e0e899c2f169396a9c10d223" title=" " alt="" coords="1626,267,1821,309"/>
<area shape="rect" href="spte_8c.html#a11de60840b247621debae854aea928db" title=" " alt="" coords="1876,255,2043,281"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="2149,769,2250,796"/>
<area shape="rect" href="spte_8h.html#aeb796217990be75433fd1430d5958184" title=" " alt="" coords="2115,267,2284,293"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="1658,449,1789,476"/>
<area shape="rect" href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b" title=" " alt="" coords="1654,500,1793,527"/>
<area shape="rect" href="tdp__mmu_8c.html#a0003da5596a964166d5e46389e7cf4b3" title=" " alt="" coords="1625,551,1822,577"/>
<area shape="rect" href="mmu_8c.html#a2fba0b2dd67723bfbc4349ea7c8e019a" title=" " alt="" coords="1646,602,1801,643"/>
<area shape="rect" href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8" title=" " alt="" coords="2091,115,2308,141"/>
<area shape="rect" href="spte_8h.html#ad4cab344dce7557c80f815d4dc072deb" title=" " alt="" coords="2106,719,2293,745"/>
<area shape="rect" href="kvm__main_8c.html#a05228520c714138c61d76bfbc12c162c" title=" " alt="" coords="1381,871,1565,897"/>
<area shape="rect" href="kvm__main_8c.html#aefbc4e0cbda09938de01d0afb0c06d59" title=" " alt="" coords="1630,845,1817,872"/>
<area shape="rect" href="kvm__main_8c.html#adb6ddc9dc8c5e447e04b1be97543f347" title=" " alt="" coords="1396,820,1551,847"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_aa53a75612d7b32153949be34f4055144_icgraph.png" border="0" usemap="#atdp__mmu_8h_aa53a75612d7b32153949be34f4055144_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_aa53a75612d7b32153949be34f4055144_icgraph" id="atdp__mmu_8h_aa53a75612d7b32153949be34f4055144_icgraph">
<area shape="rect" title=" " alt="" coords="195,5,405,32"/>
<area shape="rect" href="mmu_8c.html#a978186d69e4a1b753b9650294d80ca7d" title=" " alt="" coords="5,5,147,32"/>
</map>
</div>

</div>
</div>
<a id="a78b4b5fbbd5f7b9fc997fef12a5ff92b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78b4b5fbbd5f7b9fc997fef12a5ff92b">&#9670;&nbsp;</a></span>kvm_tdp_mmu_test_age_gfn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_tdp_mmu_test_age_gfn </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_gfn_range *&#160;</td>
          <td class="paramname"><em>range</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l01206">1206</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;{</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="tdp__mmu_8c.html#aee4308cb9e1b221fb73c67c6e8f0e1d1">kvm_tdp_mmu_handle_gfn</a>(kvm, range, <a class="code" href="tdp__mmu_8c.html#a35969e29bbb017463732377231d536c4">test_age_gfn</a>);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;}</div>
<div class="ttc" id="atdp__mmu_8c_html_a35969e29bbb017463732377231d536c4"><div class="ttname"><a href="tdp__mmu_8c.html#a35969e29bbb017463732377231d536c4">test_age_gfn</a></div><div class="ttdeci">static bool test_age_gfn(struct kvm *kvm, struct tdp_iter *iter, struct kvm_gfn_range *range)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l01200">tdp_mmu.c:1200</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a78b4b5fbbd5f7b9fc997fef12a5ff92b_cgraph.png" border="0" usemap="#atdp__mmu_8h_a78b4b5fbbd5f7b9fc997fef12a5ff92b_cgraph" alt=""/></div>
<map name="atdp__mmu_8h_a78b4b5fbbd5f7b9fc997fef12a5ff92b_cgraph" id="atdp__mmu_8h_a78b4b5fbbd5f7b9fc997fef12a5ff92b_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,216,57"/>
<area shape="rect" href="tdp__mmu_8c.html#aee4308cb9e1b221fb73c67c6e8f0e1d1" title=" " alt="" coords="264,5,463,32"/>
<area shape="rect" href="tdp__mmu_8c.html#a35969e29bbb017463732377231d536c4" title=" " alt="" coords="310,56,417,83"/>
<area shape="rect" href="spte_8h.html#a16669248c64937ddec714d855609cacb" title=" " alt="" coords="511,56,645,83"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="723,31,881,57"/>
<area shape="rect" href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8" title=" " alt="" coords="693,81,911,108"/>
<area shape="rect" href="spte_8h.html#a976cddc84d935189584bdce94d4805fd" title=" " alt="" coords="959,31,1091,57"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="1139,56,1313,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a78b4b5fbbd5f7b9fc997fef12a5ff92b_icgraph.png" border="0" usemap="#atdp__mmu_8h_a78b4b5fbbd5f7b9fc997fef12a5ff92b_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_a78b4b5fbbd5f7b9fc997fef12a5ff92b_icgraph" id="atdp__mmu_8h_a78b4b5fbbd5f7b9fc997fef12a5ff92b_icgraph">
<area shape="rect" title=" " alt="" coords="196,5,407,32"/>
<area shape="rect" href="mmu_8c.html#a7045f4df80d26474c5fe995d02eebc35" title=" " alt="" coords="5,5,148,32"/>
</map>
</div>

</div>
</div>
<a id="a57310f6ad7e70c13dadcfd30aa71af6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57310f6ad7e70c13dadcfd30aa71af6d">&#9670;&nbsp;</a></span>kvm_tdp_mmu_try_split_huge_pages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_tdp_mmu_try_split_huge_pages </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct kvm_memory_slot *&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfn_t&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfn_t&#160;</td>
          <td class="paramname"><em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>target_level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>shared</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l01483">1483</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;{</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__mmu__page.html">kvm_mmu_page</a> *root;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="keywordtype">int</span> r = 0;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160; </div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <a class="code" href="tdp__mmu_8c.html#a94f5586dfab1d77897564b4b4979da48">kvm_lockdep_assert_mmu_lock_held</a>(kvm, shared);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <a class="code" href="tdp__mmu_8c.html#a3c960568750483d675f0f994ac033a41">for_each_valid_tdp_mmu_root_yield_safe</a>(kvm, root, slot-&gt;as_id) {</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        r = <a class="code" href="tdp__mmu_8c.html#afa070d8c089f8547cfc2dbafa856e99c">tdp_mmu_split_huge_pages_root</a>(kvm, root, start, end, target_level, shared);</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        <span class="keywordflow">if</span> (r) {</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;            <a class="code" href="tdp__mmu_8c.html#a8a9d637b546d8dfd125028f823a6eac0">kvm_tdp_mmu_put_root</a>(kvm, root);</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        }</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    }</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;}</div>
<div class="ttc" id="atdp__mmu_8c_html_a8a9d637b546d8dfd125028f823a6eac0"><div class="ttname"><a href="tdp__mmu_8c.html#a8a9d637b546d8dfd125028f823a6eac0">kvm_tdp_mmu_put_root</a></div><div class="ttdeci">void kvm_tdp_mmu_put_root(struct kvm *kvm, struct kvm_mmu_page *root)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00076">tdp_mmu.c:76</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_a94f5586dfab1d77897564b4b4979da48"><div class="ttname"><a href="tdp__mmu_8c.html#a94f5586dfab1d77897564b4b4979da48">kvm_lockdep_assert_mmu_lock_held</a></div><div class="ttdeci">static __always_inline bool kvm_lockdep_assert_mmu_lock_held(struct kvm *kvm, bool shared)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00022">tdp_mmu.c:22</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_afa070d8c089f8547cfc2dbafa856e99c"><div class="ttname"><a href="tdp__mmu_8c.html#afa070d8c089f8547cfc2dbafa856e99c">tdp_mmu_split_huge_pages_root</a></div><div class="ttdeci">static int tdp_mmu_split_huge_pages_root(struct kvm *kvm, struct kvm_mmu_page *root, gfn_t start, gfn_t end, int target_level, bool shared)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l01414">tdp_mmu.c:1414</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a57310f6ad7e70c13dadcfd30aa71af6d_cgraph.png" border="0" usemap="#atdp__mmu_8h_a57310f6ad7e70c13dadcfd30aa71af6d_cgraph" alt=""/></div>
<map name="atdp__mmu_8h_a57310f6ad7e70c13dadcfd30aa71af6d_cgraph" id="atdp__mmu_8h_a57310f6ad7e70c13dadcfd30aa71af6d_cgraph">
<area shape="rect" title=" " alt="" coords="5,92,185,133"/>
<area shape="rect" href="tdp__mmu_8c.html#a94f5586dfab1d77897564b4b4979da48" title=" " alt="" coords="729,5,885,47"/>
<area shape="rect" href="tdp__mmu_8c.html#a8a9d637b546d8dfd125028f823a6eac0" title=" " alt="" coords="233,99,415,126"/>
<area shape="rect" href="tdp__mmu_8c.html#afa070d8c089f8547cfc2dbafa856e99c" title=" " alt="" coords="245,328,403,369"/>
<area shape="rect" href="tdp__mmu_8h.html#a166bc9e57a26e8a37e94e2314a72d226" title=" " alt="" coords="497,41,638,67"/>
<area shape="rect" href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279" title=" " alt="" coords="1945,209,2111,251"/>
<area shape="rect" href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b" title=" " alt="" coords="2173,187,2312,214"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="2192,969,2293,995"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="2360,1171,2535,1198"/>
<area shape="rect" href="tdp__mmu_8c.html#aa61edf11261db080cdd6b2bba981310f" title=" " alt="" coords="483,92,652,133"/>
<area shape="rect" href="tdp__mmu_8c.html#a502cd8b971218c38ecd999409fc15ee3" title=" " alt="" coords="481,310,653,337"/>
<area shape="rect" href="tdp__mmu_8c.html#abc2d73db35961f670cedf8ce1206c4d2" title=" " alt="" coords="463,361,672,387"/>
<area shape="rect" href="tdp__mmu_8c.html#acf7d062eca8e6190d76f4934c290be61" title=" " alt="" coords="469,950,666,977"/>
<area shape="rect" href="tdp__mmu_8c.html#aef3c64f4319d3be908d23467dd8fb337" title=" " alt="" coords="728,92,887,133"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="1978,318,2078,345"/>
<area shape="rect" href="tdp__mmu_8c.html#a8d6f094dd9ef458c1c57aee653afd602" title=" " alt="" coords="740,310,875,337"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="2177,318,2308,345"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="720,361,895,387"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="943,357,1153,383"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="1201,345,1412,387"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="1473,310,1640,337"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="1463,361,1651,387"/>
<area shape="rect" href="mmu_8h.html#a9d589fd96a814e43fc146f83dc5d5f73" title=" " alt="" coords="1701,1222,1883,1249"/>
<area shape="rect" href="spte_8c.html#adc3a08f029fff6aaf2bf687edf69410f" title=" " alt="" coords="1203,1323,1410,1350"/>
<area shape="rect" href="tdp__mmu_8c.html#a6588b054500f580603f94c0555fe3c06" title=" " alt="" coords="739,899,876,926"/>
<area shape="rect" href="mmu__internal_8h.html#a8a367cbfff40c5c72d6f19049da9fc51" title=" " alt="" coords="1460,1374,1653,1401"/>
<area shape="rect" href="spte_8c.html#ac0162f8b29f82f308036271f93880cd7" title=" " alt="" coords="1471,1425,1642,1451"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="1949,1441,2107,1467"/>
<area shape="rect" href="spte_8c.html#a8885614ad1f7e35c498eb228826d1909" title=" " alt="" coords="1709,1476,1875,1517"/>
<area shape="rect" href="spte_8h.html#abc2b9043d48550e741fda1e2ad36a652" title=" " alt="" coords="1706,1425,1878,1451"/>
<area shape="rect" href="spte_8h.html#a976cddc84d935189584bdce94d4805fd" title=" " alt="" coords="2177,1441,2309,1467"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="1951,1375,2105,1416"/>
<area shape="rect" href="spte_8h.html#ac3f82ba169af94a026b5df40f3d3753e" title=" " alt="" coords="981,874,1115,901"/>
<area shape="rect" href="spte_8c.html#a98038e4116bcdef6f9e1e335eefc29c9" title=" " alt="" coords="973,925,1123,951"/>
<area shape="rect" href="tdp__mmu_8c.html#a5217224e4957f6457786d51ddd62914b" title=" " alt="" coords="957,975,1139,1002"/>
<area shape="rect" href="tdp__mmu_8c.html#af6444812b70d9509539a3fa478cde14d" title=" " alt="" coords="961,753,1135,779"/>
<area shape="rect" href="tdp__mmu_8c.html#a692eb9d20075258e5d4a0e4289a7c9b6" title=" " alt="" coords="1207,823,1406,850"/>
<area shape="rect" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a" title=" " alt="" coords="1233,690,1380,717"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="1475,842,1638,869"/>
<area shape="rect" href="spte_8h.html#ad52bae526742289dbd54348dfa55310b" title=" " alt="" coords="1961,607,2095,634"/>
<area shape="rect" href="tdp__iter_8h.html#a74cc1f032b50c7c6c64ded8866deb4a4" title=" " alt="" coords="1931,487,2125,514"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="1717,513,1867,539"/>
<area shape="rect" href="spte_8h.html#a16669248c64937ddec714d855609cacb" title=" " alt="" coords="1725,1171,1859,1198"/>
<area shape="rect" href="spte_8h.html#a0726c9cf54d23a373533a0833aaf979c" title=" " alt="" coords="1739,867,1845,894"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="1979,969,2077,995"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="1735,918,1849,945"/>
<area shape="rect" href="kvm__main_8c.html#ad88d3f7ece0c0ad7dce0c296133beccb" title=" " alt="" coords="1705,715,1879,742"/>
<area shape="rect" href="kvm__main_8c.html#a3617d51882e6aba0abae53c0bf922873" title=" " alt="" coords="1721,817,1863,843"/>
<area shape="rect" href="tdp__iter_8c.html#ae565103c187af07e69eb2f29b180b977" title=" " alt="" coords="1728,1019,1856,1046"/>
<area shape="rect" href="spte_8h.html#a88a720d39abac3aee2f63e03a20e8abd" title=" " alt="" coords="1979,1070,2077,1097"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a57310f6ad7e70c13dadcfd30aa71af6d_icgraph.png" border="0" usemap="#atdp__mmu_8h_a57310f6ad7e70c13dadcfd30aa71af6d_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_a57310f6ad7e70c13dadcfd30aa71af6d_icgraph" id="atdp__mmu_8h_a57310f6ad7e70c13dadcfd30aa71af6d_icgraph">
<area shape="rect" title=" " alt="" coords="3096,258,3276,299"/>
<area shape="rect" href="mmu_8c.html#a073d9b7de8eaf977452c1eb7395a78d6" title=" " alt="" coords="2861,225,3044,266"/>
<area shape="rect" href="mmu_8c.html#a6abdd1728810c3f3ab8c2e1e6d2d37f0" title=" " alt="" coords="2857,290,3048,331"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="2637,225,2803,266"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="2377,225,2583,266"/>
<area shape="rect" href="kvm__main_8c.html#a05eed662dd45e4e4f7485e3158d95a3b" title=" " alt="" coords="2111,232,2329,259"/>
<area shape="rect" href="kvm__main_8c.html#ac81a7d714d0668ccea6d0c2ddfd0fed5" title=" " alt="" coords="1914,232,2057,259"/>
<area shape="rect" href="kvm__main_8c.html#ac76f506181e49aa4800bb202e11cb2b3" title=" " alt="" coords="1657,232,1860,259"/>
<area shape="rect" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9" title=" " alt="" coords="1412,177,1609,204"/>
<area shape="rect" href="kvm__main_8c.html#a1a839781d3be88d418abfb2b456663ab" title=" " alt="" coords="1417,257,1605,284"/>
<area shape="rect" href="vmx_8c.html#acc48d0f16e027c2bad1268d02a2eaa68" title=" " alt="" coords="1160,51,1345,77"/>
<area shape="rect" href="lapic_8c.html#a8c6616d2cbae35632aa5debb15b552ec" title=" " alt="" coords="1146,101,1359,128"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="1167,152,1338,179"/>
<area shape="rect" href="lapic_8c.html#a017e57adbc721d98d26099f1a431a22c" title=" " alt="" coords="1141,203,1364,229"/>
<area shape="rect" href="vmx_8c.html#a15d61630d8c4e3f7aea16d3b0164a799" title=" " alt="" coords="1183,253,1323,280"/>
<area shape="rect" href="vmx_8c.html#a426fe0cb3c7fd73b276f6815b6ab9ddc" title=" " alt="" coords="933,51,1071,77"/>
<area shape="rect" href="avic_8c.html#aefc63eafb35c1efd94f6d53e7d0b20d5" title=" " alt="" coords="915,101,1089,128"/>
<area shape="rect" href="avic_8c.html#a8e0a22138080054f4ac064064402f74a" title=" " alt="" coords="737,25,851,52"/>
<area shape="rect" href="svm_8c.html#a2af2f754ca7838a0253d54c33aae7d1e" title=" " alt="" coords="504,5,640,32"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="731,113,857,140"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="935,203,1069,229"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="475,56,669,83"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="737,240,851,267"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="497,107,647,133"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="489,157,655,184"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="495,208,649,235"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="467,259,677,285"/>
<area shape="rect" href="debugfs_8c.html#af0427db3ec1a8c38ea51591abbefde57" title=" " alt="" coords="486,310,658,351"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="505,376,639,403"/>
<area shape="rect" href="sev_8c.html#ad28fd793149997c912b52490f6ca139a" title=" " alt="" coords="501,427,643,453"/>
<area shape="rect" href="sev_8c.html#af1eb77eac84f085b0a943b87f783e30d" title=" " alt="" coords="507,477,637,504"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="219,107,377,133"/>
<area shape="rect" href="sev_8c.html#abe3c569b297da3b78824074b8c08f9a7" title=" " alt="" coords="177,427,419,453"/>
<area shape="rect" href="svm_8c.html#a0e69cefce46e7b11e1e8e056ea5b6561" title=" " alt="" coords="231,477,365,504"/>
<area shape="rect" href="x86_8c.html#a384702aafa8cdbab3cf92b3d576bb6fb" title=" " alt="" coords="911,253,1093,280"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="725,400,863,427"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="531,528,613,555"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="205,528,391,555"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,528,129,555"/>
<area shape="rect" href="kvm__main_8c.html#a4c8ff5a794a6a2e77e0cfc224568ef70" title=" " alt="" coords="1151,305,1354,346"/>
<area shape="rect" href="mmu_8c.html#a035ec39ab60e2a3d382c272b15fc83a6" title=" " alt="" coords="2631,290,2809,331"/>
<area shape="rect" href="dirty__ring_8c.html#a68052369106191fbc506fdf4d64be449" title=" " alt="" coords="2402,297,2558,324"/>
<area shape="rect" href="dirty__ring_8c.html#a33f93cefad4ed59214fb8dbf36de7dd1" title=" " alt="" coords="2140,297,2300,324"/>
<area shape="rect" href="kvm__main_8c.html#a91e959c20554917ba05e7feea69acc7c" title=" " alt="" coords="1908,290,2063,331"/>
</map>
</div>

</div>
</div>
<a id="aaa8f0898db08dd5c9213ac2f8b355501"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa8f0898db08dd5c9213ac2f8b355501">&#9670;&nbsp;</a></span>kvm_tdp_mmu_unmap_gfn_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_tdp_mmu_unmap_gfn_range </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_gfn_range *&#160;</td>
          <td class="paramname"><em>range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>flush</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l01114">1114</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;{</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__mmu__page.html">kvm_mmu_page</a> *root;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160; </div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <a class="code" href="tdp__mmu_8c.html#ab9d1583c53d0b2660327c4dea8fae4e3">__for_each_tdp_mmu_root_yield_safe</a>(kvm, root, range-&gt;slot-&gt;as_id, <span class="keyword">false</span>)</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        flush = <a class="code" href="tdp__mmu_8c.html#a182ff449fd87f9503148e88c33cff5ac">tdp_mmu_zap_leafs</a>(kvm, root, range-&gt;start, range-&gt;end,</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                      range-&gt;may_block, flush);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    return flush;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;}</div>
<div class="ttc" id="atdp__mmu_8c_html_a182ff449fd87f9503148e88c33cff5ac"><div class="ttname"><a href="tdp__mmu_8c.html#a182ff449fd87f9503148e88c33cff5ac">tdp_mmu_zap_leafs</a></div><div class="ttdeci">static bool tdp_mmu_zap_leafs(struct kvm *kvm, struct kvm_mmu_page *root, gfn_t start, gfn_t end, bool can_yield, bool flush)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00780">tdp_mmu.c:780</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_ab9d1583c53d0b2660327c4dea8fae4e3"><div class="ttname"><a href="tdp__mmu_8c.html#ab9d1583c53d0b2660327c4dea8fae4e3">__for_each_tdp_mmu_root_yield_safe</a></div><div class="ttdeci">#define __for_each_tdp_mmu_root_yield_safe(_kvm, _root, _as_id, _only_valid)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00152">tdp_mmu.c:152</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_aaa8f0898db08dd5c9213ac2f8b355501_cgraph.png" border="0" usemap="#atdp__mmu_8h_aaa8f0898db08dd5c9213ac2f8b355501_cgraph" alt=""/></div>
<map name="atdp__mmu_8h_aaa8f0898db08dd5c9213ac2f8b355501_cgraph" id="atdp__mmu_8h_aaa8f0898db08dd5c9213ac2f8b355501_cgraph">
<area shape="rect" title=" " alt="" coords="5,986,205,1028"/>
<area shape="rect" href="tdp__mmu_8c.html#a182ff449fd87f9503148e88c33cff5ac" title=" " alt="" coords="253,994,407,1020"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="2006,319,2105,346"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="1968,740,2143,767"/>
<area shape="rect" href="tdp__mmu_8c.html#abc2d73db35961f670cedf8ce1206c4d2" title=" " alt="" coords="459,824,668,851"/>
<area shape="rect" href="tdp__mmu_8c.html#af6444812b70d9509539a3fa478cde14d" title=" " alt="" coords="476,994,651,1020"/>
<area shape="rect" href="tdp__mmu_8c.html#ac323268ae26fde5a608d694f4943d476" title=" " alt="" coords="455,1227,672,1254"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="2219,319,2321,346"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="720,707,895,734"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="943,290,1153,316"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="1201,101,1412,142"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="1474,116,1641,143"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="1463,66,1651,92"/>
<area shape="rect" href="kvm__main_8c.html#a7682302871243c20a5dd16214655db15" title=" " alt="" coords="1772,167,1851,194"/>
<area shape="rect" href="kvm__main_8c.html#a9316cc70360fb39d920d5c76a2e41f35" title=" " alt="" coords="1723,116,1899,143"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1735,66,1888,92"/>
<area shape="rect" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a" title=" " alt="" coords="734,994,881,1020"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="967,522,1129,548"/>
<area shape="rect" href="spte_8h.html#ad52bae526742289dbd54348dfa55310b" title=" " alt="" coords="1491,994,1624,1020"/>
<area shape="rect" href="tdp__iter_8h.html#a74cc1f032b50c7c6c64ded8866deb4a4" title=" " alt="" coords="1460,1044,1655,1071"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="1978,497,2133,538"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="1231,766,1382,792"/>
<area shape="rect" href="spte_8h.html#a16669248c64937ddec714d855609cacb" title=" " alt="" coords="1490,1095,1625,1122"/>
<area shape="rect" href="spte_8h.html#a0726c9cf54d23a373533a0833aaf979c" title=" " alt="" coords="1254,522,1359,548"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="1250,867,1363,894"/>
<area shape="rect" href="kvm__main_8c.html#ad88d3f7ece0c0ad7dce0c296133beccb" title=" " alt="" coords="1220,167,1393,194"/>
<area shape="rect" href="kvm__main_8c.html#a3617d51882e6aba0abae53c0bf922873" title=" " alt="" coords="1235,218,1378,244"/>
<area shape="rect" href="mmu_8h.html#a9d589fd96a814e43fc146f83dc5d5f73" title=" " alt="" coords="1216,319,1397,346"/>
<area shape="rect" href="tdp__iter_8c.html#ae565103c187af07e69eb2f29b180b977" title=" " alt="" coords="1243,420,1371,447"/>
<area shape="rect" href="spte_8h.html#a88a720d39abac3aee2f63e03a20e8abd" title=" " alt="" coords="1508,471,1607,498"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="2209,914,2331,940"/>
<area shape="rect" href="mmu__internal_8h.html#a993d31328977f0bf21610ad74fa55a79" title=" " alt="" coords="1471,791,1643,818"/>
<area shape="rect" href="tdp__iter_8h.html#ae1b8feffcbd421cbcb6a40cd57abf768" title=" " alt="" coords="1462,892,1653,919"/>
<area shape="rect" href="tdp__iter_8h.html#a2138ed5465b3552439c1ad55ee1bc6d1" title=" " alt="" coords="1714,893,1909,934"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="1507,842,1607,868"/>
<area shape="rect" href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279" title=" " alt="" coords="1474,624,1641,665"/>
<area shape="rect" href="tdp__mmu_8c.html#a401c07c0503d3fc2c62b9a8a06096686" title=" " alt="" coords="1481,690,1634,716"/>
<area shape="rect" href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac" title=" " alt="" coords="1729,791,1894,818"/>
<area shape="rect" href="tdp__iter_8h.html#acce3a5afd04a68fc666c32e91d8c1770" title=" " alt="" coords="1707,1024,1916,1051"/>
<area shape="rect" href="tdp__iter_8h.html#ae00f2a54e0e899c2f169396a9c10d223" title=" " alt="" coords="1714,958,1909,1000"/>
<area shape="rect" href="spte_8c.html#a11de60840b247621debae854aea928db" title=" " alt="" coords="1972,966,2139,992"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="2191,1019,2349,1046"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="1746,842,1877,868"/>
<area shape="rect" href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b" title=" " alt="" coords="1742,631,1881,658"/>
<area shape="rect" href="tdp__mmu_8c.html#a0003da5596a964166d5e46389e7cf4b3" title=" " alt="" coords="1713,690,1910,716"/>
<area shape="rect" href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8" title=" " alt="" coords="1703,1075,1920,1102"/>
<area shape="rect" href="spte_8h.html#ad4cab344dce7557c80f815d4dc072deb" title=" " alt="" coords="1718,522,1905,548"/>
<area shape="rect" href="kvm__main_8c.html#a05228520c714138c61d76bfbc12c162c" title=" " alt="" coords="1465,167,1649,194"/>
<area shape="rect" href="kvm__main_8c.html#adb6ddc9dc8c5e447e04b1be97543f347" title=" " alt="" coords="1480,218,1635,244"/>
<area shape="rect" href="mmu_8h.html#a6555cf2d510d04ae19bee154d166f778" title=" " alt="" coords="729,1227,885,1254"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_aaa8f0898db08dd5c9213ac2f8b355501_icgraph.png" border="0" usemap="#atdp__mmu_8h_aaa8f0898db08dd5c9213ac2f8b355501_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_aaa8f0898db08dd5c9213ac2f8b355501_icgraph" id="atdp__mmu_8h_aaa8f0898db08dd5c9213ac2f8b355501_icgraph">
<area shape="rect" title=" " alt="" coords="228,5,428,47"/>
<area shape="rect" href="mmu_8c.html#aa37fc9ea36d6c97e97d77af76eca5767" title=" " alt="" coords="5,13,180,39"/>
</map>
</div>

</div>
</div>
<a id="ad9bedc081d8d3dcba1c90a8e9e88df3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9bedc081d8d3dcba1c90a8e9e88df3d">&#9670;&nbsp;</a></span>kvm_tdp_mmu_walk_lockless_begin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_tdp_mmu_walk_lockless_begin </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8h_source.html#l00056">56</a> of file <a class="el" href="tdp__mmu_8h_source.html">tdp_mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;{</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    rcu_read_lock();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_ad9bedc081d8d3dcba1c90a8e9e88df3d_icgraph.png" border="0" usemap="#atdp__mmu_8h_ad9bedc081d8d3dcba1c90a8e9e88df3d_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_ad9bedc081d8d3dcba1c90a8e9e88df3d_icgraph" id="atdp__mmu_8h_ad9bedc081d8d3dcba1c90a8e9e88df3d_icgraph">
<area shape="rect" title=" " alt="" coords="2371,718,2589,759"/>
<area shape="rect" href="mmu_8c.html#a8249a6a2551b792aaec028954ca64dde" title=" " alt="" coords="2113,718,2323,759"/>
<area shape="rect" href="mmu_8c.html#a19bf28eb1ca5198dc125fd42f26c789e" title=" " alt="" coords="1909,674,2031,701"/>
<area shape="rect" href="mmu_8c.html#a24c91b8ae0a349c76c95f6266f62d6e1" title=" " alt="" coords="1909,725,2031,752"/>
<area shape="rect" href="mmu_8c.html#af71d1283ea45f5011372746bbfc825a1" title=" " alt="" coords="1875,776,2065,818"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1692,674,1827,701"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="1473,658,1628,685"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="1467,776,1634,802"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="1240,549,1388,576"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="1219,658,1409,685"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="1012,481,1132,508"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="253,17,425,44"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="729,296,917,322"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="503,514,643,541"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="741,506,904,533"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="741,557,905,584"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="5,17,205,44"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="523,93,622,120"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="519,144,626,170"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="291,220,387,246"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="473,296,672,322"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="503,346,643,373"/>
<area shape="rect" href="smm_8c.html#a5382946234c910e05c6e2c09aff15713" title=" " alt="" coords="496,245,649,272"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="508,42,637,69"/>
<area shape="rect" href="vmx_2nested_8c.html#a001f930db9a867e828cf01b48d3e4e25" title=" " alt="" coords="495,398,650,439"/>
<area shape="rect" href="x86_8c.html#a420caf80521ab8d6ef7218d5dd26d47f" title=" " alt="" coords="535,464,610,490"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="306,405,373,432"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="287,514,392,541"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="483,565,662,592"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="987,634,1157,675"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="988,725,1156,752"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="742,608,903,650"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="741,674,905,701"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="743,725,902,752"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="733,776,912,802"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="759,826,887,853"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="499,674,647,701"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="272,674,407,701"/>
<area shape="rect" href="vmx_8c.html#a7a38ddbd01bec99bf94ab4868ad4c6ea" title=" " alt="" coords="488,725,657,752"/>
<area shape="rect" href="svm_8c.html#a589e870c8a06d1ba26f24da299e47b95" title=" " alt="" coords="513,776,633,802"/>
<area shape="rect" href="svm_8c.html#a8afafecae406016532810194f187fe2c" title=" " alt="" coords="479,826,667,853"/>
<area shape="rect" href="sev_8c.html#aac550422551b71c0afe8efe176e0b55d" title=" " alt="" coords="27,797,184,824"/>
<area shape="rect" href="sev_8c.html#ae483e70b55c68f5a2405263543ce3737" title=" " alt="" coords="261,819,418,860"/>
<area shape="rect" href="svm_8c.html#a3f8983432f4aae138a6f4d167c561132" title=" " alt="" coords="273,885,406,912"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="1227,826,1401,853"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="973,877,1171,904"/>
<area shape="rect" href="mmu_8c.html#a3e794d802eeb843cd6d7b699b74d8bf3" title=" " alt="" coords="734,877,911,904"/>
<area shape="rect" href="mmu_8c.html#a00f26353045c597f6a49cdd4f239f548" title=" " alt="" coords="720,928,925,954"/>
<area shape="rect" href="mmu_8c.html#a899cf46c0ee6df6305c7fe167421e2b7" title=" " alt="" coords="1457,725,1644,752"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1714,784,1805,810"/>
</map>
</div>

</div>
</div>
<a id="af349eae0f7af96e03ca0fd284ffea7ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af349eae0f7af96e03ca0fd284ffea7ab">&#9670;&nbsp;</a></span>kvm_tdp_mmu_walk_lockless_end()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_tdp_mmu_walk_lockless_end </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8h_source.html#l00061">61</a> of file <a class="el" href="tdp__mmu_8h_source.html">tdp_mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;{</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    rcu_read_unlock();</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_af349eae0f7af96e03ca0fd284ffea7ab_icgraph.png" border="0" usemap="#atdp__mmu_8h_af349eae0f7af96e03ca0fd284ffea7ab_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_af349eae0f7af96e03ca0fd284ffea7ab_icgraph" id="atdp__mmu_8h_af349eae0f7af96e03ca0fd284ffea7ab_icgraph">
<area shape="rect" title=" " alt="" coords="2401,725,2651,752"/>
<area shape="rect" href="mmu_8c.html#a070edfe1e4c28f6842681042bcffbf10" title=" " alt="" coords="2113,725,2353,752"/>
<area shape="rect" href="mmu_8c.html#a19bf28eb1ca5198dc125fd42f26c789e" title=" " alt="" coords="1909,674,2031,701"/>
<area shape="rect" href="mmu_8c.html#a24c91b8ae0a349c76c95f6266f62d6e1" title=" " alt="" coords="1909,725,2031,752"/>
<area shape="rect" href="mmu_8c.html#af71d1283ea45f5011372746bbfc825a1" title=" " alt="" coords="1875,776,2065,818"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1692,674,1827,701"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="1473,658,1628,685"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="1467,776,1634,802"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="1240,549,1388,576"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="1219,658,1409,685"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="1012,481,1132,508"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="253,17,425,44"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="729,296,917,322"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="503,514,643,541"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="741,506,904,533"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="741,557,905,584"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="5,17,205,44"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="523,93,622,120"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="519,144,626,170"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="291,220,387,246"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="473,296,672,322"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="503,346,643,373"/>
<area shape="rect" href="smm_8c.html#a5382946234c910e05c6e2c09aff15713" title=" " alt="" coords="496,245,649,272"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="508,42,637,69"/>
<area shape="rect" href="vmx_2nested_8c.html#a001f930db9a867e828cf01b48d3e4e25" title=" " alt="" coords="495,398,650,439"/>
<area shape="rect" href="x86_8c.html#a420caf80521ab8d6ef7218d5dd26d47f" title=" " alt="" coords="535,464,610,490"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="306,405,373,432"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="287,514,392,541"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="483,565,662,592"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="987,634,1157,675"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="988,725,1156,752"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="742,608,903,650"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="741,674,905,701"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="743,725,902,752"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="733,776,912,802"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="759,826,887,853"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="499,674,647,701"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="272,674,407,701"/>
<area shape="rect" href="vmx_8c.html#a7a38ddbd01bec99bf94ab4868ad4c6ea" title=" " alt="" coords="488,725,657,752"/>
<area shape="rect" href="svm_8c.html#a589e870c8a06d1ba26f24da299e47b95" title=" " alt="" coords="513,776,633,802"/>
<area shape="rect" href="svm_8c.html#a8afafecae406016532810194f187fe2c" title=" " alt="" coords="479,826,667,853"/>
<area shape="rect" href="sev_8c.html#aac550422551b71c0afe8efe176e0b55d" title=" " alt="" coords="27,797,184,824"/>
<area shape="rect" href="sev_8c.html#ae483e70b55c68f5a2405263543ce3737" title=" " alt="" coords="261,819,418,860"/>
<area shape="rect" href="svm_8c.html#a3f8983432f4aae138a6f4d167c561132" title=" " alt="" coords="273,885,406,912"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="1227,826,1401,853"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="973,877,1171,904"/>
<area shape="rect" href="mmu_8c.html#a3e794d802eeb843cd6d7b699b74d8bf3" title=" " alt="" coords="734,877,911,904"/>
<area shape="rect" href="mmu_8c.html#a00f26353045c597f6a49cdd4f239f548" title=" " alt="" coords="720,928,925,954"/>
<area shape="rect" href="mmu_8c.html#a899cf46c0ee6df6305c7fe167421e2b7" title=" " alt="" coords="1457,725,1644,752"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1714,784,1805,810"/>
</map>
</div>

</div>
</div>
<a id="a45fd618d35fb0df14a3401a230f41faa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45fd618d35fb0df14a3401a230f41faa">&#9670;&nbsp;</a></span>kvm_tdp_mmu_write_protect_gfn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_tdp_mmu_write_protect_gfn </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_memory_slot *&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfn_t&#160;</td>
          <td class="paramname"><em>gfn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min_level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l01746">1746</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;{</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__mmu__page.html">kvm_mmu_page</a> *root;</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    <span class="keywordtype">bool</span> spte_set = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160; </div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    lockdep_assert_held_write(&amp;kvm-&gt;mmu_lock);</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    <a class="code" href="tdp__mmu_8c.html#a80ff30c938358003552a2b48063b0fee">for_each_tdp_mmu_root</a>(kvm, root, slot-&gt;as_id)</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;        spte_set |= <a class="code" href="tdp__mmu_8c.html#aa07f9d272e2404a5b5392ae7aa175580">write_protect_gfn</a>(kvm, root, <a class="code" href="structkvm__mmu__page.html#ad833bc48e1885408b2b5c7deca9a6232">gfn</a>, min_level);</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160; </div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    return spte_set;</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;}</div>
<div class="ttc" id="atdp__mmu_8c_html_aa07f9d272e2404a5b5392ae7aa175580"><div class="ttname"><a href="tdp__mmu_8c.html#aa07f9d272e2404a5b5392ae7aa175580">write_protect_gfn</a></div><div class="ttdeci">static bool write_protect_gfn(struct kvm *kvm, struct kvm_mmu_page *root, gfn_t gfn, int min_level)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l01710">tdp_mmu.c:1710</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a45fd618d35fb0df14a3401a230f41faa_cgraph.png" border="0" usemap="#atdp__mmu_8h_a45fd618d35fb0df14a3401a230f41faa_cgraph" alt=""/></div>
<map name="atdp__mmu_8h_a45fd618d35fb0df14a3401a230f41faa_cgraph" id="atdp__mmu_8h_a45fd618d35fb0df14a3401a230f41faa_cgraph">
<area shape="rect" title=" " alt="" coords="5,43,247,69"/>
<area shape="rect" href="tdp__mmu_8c.html#aa07f9d272e2404a5b5392ae7aa175580" title=" " alt="" coords="295,43,431,69"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="1870,169,1969,196"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="2496,793,2671,820"/>
<area shape="rect" href="tdp__mmu_8c.html#af6444812b70d9509539a3fa478cde14d" title=" " alt="" coords="479,245,653,272"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="2109,169,2210,196"/>
<area shape="rect" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a" title=" " alt="" coords="701,423,848,449"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="896,448,1059,475"/>
<area shape="rect" href="spte_8h.html#ad52bae526742289dbd54348dfa55310b" title=" " alt="" coords="1367,397,1500,424"/>
<area shape="rect" href="tdp__iter_8h.html#a74cc1f032b50c7c6c64ded8866deb4a4" title=" " alt="" coords="1336,892,1531,919"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="1842,1057,1997,1098"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="1122,616,1273,643"/>
<area shape="rect" href="spte_8h.html#a16669248c64937ddec714d855609cacb" title=" " alt="" coords="1852,920,1987,947"/>
<area shape="rect" href="spte_8h.html#a0726c9cf54d23a373533a0833aaf979c" title=" " alt="" coords="1867,1123,1972,1149"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="1141,245,1254,272"/>
<area shape="rect" href="kvm__main_8c.html#ad88d3f7ece0c0ad7dce0c296133beccb" title=" " alt="" coords="1111,195,1284,221"/>
<area shape="rect" href="kvm__main_8c.html#a3617d51882e6aba0abae53c0bf922873" title=" " alt="" coords="1126,144,1269,171"/>
<area shape="rect" href="mmu_8h.html#a9d589fd96a814e43fc146f83dc5d5f73" title=" " alt="" coords="1107,448,1288,475"/>
<area shape="rect" href="tdp__iter_8c.html#ae565103c187af07e69eb2f29b180b977" title=" " alt="" coords="1133,296,1261,323"/>
<area shape="rect" href="spte_8h.html#a88a720d39abac3aee2f63e03a20e8abd" title=" " alt="" coords="1384,347,1483,373"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="2099,1072,2220,1099"/>
<area shape="rect" href="mmu__internal_8h.html#a993d31328977f0bf21610ad74fa55a79" title=" " alt="" coords="1347,616,1519,643"/>
<area shape="rect" href="tdp__iter_8h.html#ae1b8feffcbd421cbcb6a40cd57abf768" title=" " alt="" coords="1338,667,1529,693"/>
<area shape="rect" href="tdp__iter_8h.html#a2138ed5465b3552439c1ad55ee1bc6d1" title=" " alt="" coords="1586,819,1781,861"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="1383,499,1483,525"/>
<area shape="rect" href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279" title=" " alt="" coords="1350,550,1517,591"/>
<area shape="rect" href="tdp__mmu_8c.html#a401c07c0503d3fc2c62b9a8a06096686" title=" " alt="" coords="1357,717,1510,744"/>
<area shape="rect" href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac" title=" " alt="" coords="1601,600,1766,627"/>
<area shape="rect" href="tdp__iter_8h.html#acce3a5afd04a68fc666c32e91d8c1770" title=" " alt="" coords="1579,951,1788,977"/>
<area shape="rect" href="tdp__iter_8h.html#ae00f2a54e0e899c2f169396a9c10d223" title=" " alt="" coords="1586,885,1781,926"/>
<area shape="rect" href="spte_8c.html#a11de60840b247621debae854aea928db" title=" " alt="" coords="1836,971,2003,997"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="2080,920,2239,947"/>
<area shape="rect" href="spte_8h.html#a976cddc84d935189584bdce94d4805fd" title=" " alt="" coords="2316,920,2448,947"/>
<area shape="rect" href="spte_8h.html#aeb796217990be75433fd1430d5958184" title=" " alt="" coords="2075,1021,2244,1048"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="1618,499,1749,525"/>
<area shape="rect" href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b" title=" " alt="" coords="1614,549,1753,576"/>
<area shape="rect" href="tdp__mmu_8c.html#a0003da5596a964166d5e46389e7cf4b3" title=" " alt="" coords="1585,717,1782,744"/>
<area shape="rect" href="mmu_8c.html#a2fba0b2dd67723bfbc4349ea7c8e019a" title=" " alt="" coords="1606,651,1761,693"/>
<area shape="rect" href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8" title=" " alt="" coords="2051,869,2268,896"/>
<area shape="rect" href="spte_8h.html#ad4cab344dce7557c80f815d4dc072deb" title=" " alt="" coords="2066,1123,2253,1149"/>
<area shape="rect" href="kvm__main_8c.html#a05228520c714138c61d76bfbc12c162c" title=" " alt="" coords="1341,195,1525,221"/>
<area shape="rect" href="kvm__main_8c.html#aefbc4e0cbda09938de01d0afb0c06d59" title=" " alt="" coords="1590,169,1777,196"/>
<area shape="rect" href="kvm__main_8c.html#adb6ddc9dc8c5e447e04b1be97543f347" title=" " alt="" coords="1356,144,1511,171"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a45fd618d35fb0df14a3401a230f41faa_icgraph.png" border="0" usemap="#atdp__mmu_8h_a45fd618d35fb0df14a3401a230f41faa_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_a45fd618d35fb0df14a3401a230f41faa_icgraph" id="atdp__mmu_8h_a45fd618d35fb0df14a3401a230f41faa_icgraph">
<area shape="rect" title=" " alt="" coords="2897,85,3139,112"/>
<area shape="rect" href="mmu_8c.html#a1f49638b71a482e4b0c3a6af10d0711e" title=" " alt="" coords="2659,78,2849,119"/>
<area shape="rect" href="page__track_8c.html#ab6a4ffea76ea12eb3b1e83eafaf4618b" title=" " alt="" coords="2403,5,2607,32"/>
<area shape="rect" href="mmu_8c.html#aec5cf4265713109c5e2ea673c610cd03" title=" " alt="" coords="2201,56,2347,83"/>
<area shape="rect" href="mmu_8c.html#a035ec39ab60e2a3d382c272b15fc83a6" title=" " alt="" coords="2416,107,2595,149"/>
<area shape="rect" href="mmu_8c.html#a2e21344d37e1f1c8c347bed8627da8db" title=" " alt="" coords="2400,173,2611,200"/>
<area shape="rect" href="mmu_8c.html#a6f305a17525ee7345f0f852070869e4c" title=" " alt="" coords="1921,56,2148,83"/>
<area shape="rect" href="mmu_8c.html#a1ade612e5d4a58575df9428f6ad72bb9" title=" " alt="" coords="1643,56,1873,83"/>
<area shape="rect" href="mmu_8c.html#a0afaf010cb78207cd01091773878f1f2" title=" " alt="" coords="1432,107,1595,133"/>
<area shape="rect" href="mmu_8c.html#a0ebfdae56a33b8ca22e8fa22268fe033" title=" " alt="" coords="1196,49,1384,90"/>
<area shape="rect" href="mmu_8c.html#aa0069ee555cb7a0001ed142edc326369" title=" " alt="" coords="1200,116,1380,143"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="987,116,1082,143"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="1007,169,1062,196"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="719,116,853,143"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="465,165,620,192"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="459,115,626,141"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="741,169,831,196"/>
<area shape="rect" href="mmu_8c.html#abe6e7771da6f6df50052156316535466" title=" " alt="" coords="921,56,1148,83"/>
<area shape="rect" href="mmu_8c.html#a03732600ed110f429f4a2d526a303bcb" title=" " alt="" coords="699,49,873,90"/>
<area shape="rect" href="mmu_8c.html#a2e109b8775cdfe9924c3d331ac5f332f" title=" " alt="" coords="456,49,629,90"/>
<area shape="rect" href="mmu_8c.html#adfe576663ff84a7b51773d87e91dd28a" title=" " alt="" coords="200,49,375,90"/>
<area shape="rect" href="dirty__ring_8c.html#a68052369106191fbc506fdf4d64be449" title=" " alt="" coords="2196,115,2352,141"/>
<area shape="rect" href="dirty__ring_8c.html#a33f93cefad4ed59214fb8dbf36de7dd1" title=" " alt="" coords="1955,115,2115,141"/>
<area shape="rect" href="kvm__main_8c.html#a91e959c20554917ba05e7feea69acc7c" title=" " alt="" coords="1681,107,1835,149"/>
<area shape="rect" href="mmu_8c.html#a2f33377dcdaf5435e453ff75e02075dd" title=" " alt="" coords="2198,173,2350,200"/>
<area shape="rect" href="mmu_8c.html#ab00408fb7acb0199782175051f59add6" title=" " alt="" coords="1950,316,2119,343"/>
<area shape="rect" href="mmu_8c.html#a475bd00898314bb9378d8e4306aa7874" title=" " alt="" coords="1695,291,1821,317"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="717,341,855,368"/>
<area shape="rect" href="x86_8c.html#a334f9c72dae5c0a2867b04acbc2beb6e" title=" " alt="" coords="1215,414,1365,455"/>
<area shape="rect" href="mmu_8h.html#ab0e194ecad859add3d639850021f8b16" title=" " alt="" coords="1443,291,1583,317"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="1205,225,1375,266"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="954,225,1115,266"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="699,232,873,259"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="502,216,583,243"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="194,216,381,243"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="11,216,135,243"/>
<area shape="rect" href="x86_8c.html#abf28742eaf88f469f322233afeb66b59" title=" " alt="" coords="951,494,1118,535"/>
<area shape="rect" href="x86_8c.html#a187212c772cf6e896de2a5304f88b9fb" title=" " alt="" coords="965,392,1104,419"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="709,501,863,528"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="213,699,361,725"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="481,552,604,579"/>
<area shape="rect" href="vmx_2nested_8c.html#a4e307e2bcf664c83265b1442e3fc8da2" title=" " alt="" coords="455,603,631,645"/>
<area shape="rect" href="vmx_2nested_8c.html#ad3cab9cf8633364513bd6a24caecf41a" title=" " alt="" coords="435,267,651,309"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="188,384,387,411"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fcc88ceee4f57a3dbf23fedb46a5cb" title=" " alt="" coords="467,721,618,762"/>
<area shape="rect" href="vmx_2nested_8c.html#aedc5821e9af5c7bd4aac6c06f4ca046f" title=" " alt="" coords="453,333,633,360"/>
<area shape="rect" href="vmx_2hyperv_8c.html#a937e30dece4579b71b17efcd54c1d910" title=" " alt="" coords="451,385,635,426"/>
<area shape="rect" href="vmx_2nested_8c.html#a64e6550fab681b40c832fe4e2d5e3b95" title=" " alt="" coords="470,451,615,477"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="5,699,140,725"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="202,545,373,586"/>
</map>
</div>

</div>
</div>
<a id="a7f6c658f3ddf3ffac5ce96335b78e295"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f6c658f3ddf3ffac5ce96335b78e295">&#9670;&nbsp;</a></span>kvm_tdp_mmu_wrprot_slot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_tdp_mmu_wrprot_slot </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct kvm_memory_slot *&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min_level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l01300">1300</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;{</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__mmu__page.html">kvm_mmu_page</a> *root;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keywordtype">bool</span> spte_set = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160; </div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    lockdep_assert_held_read(&amp;kvm-&gt;mmu_lock);</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160; </div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <a class="code" href="tdp__mmu_8c.html#a3c960568750483d675f0f994ac033a41">for_each_valid_tdp_mmu_root_yield_safe</a>(kvm, root, slot-&gt;as_id)</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        spte_set |= <a class="code" href="tdp__mmu_8c.html#ae3e523e725021c7dd3f3796f4e074a37">wrprot_gfn_range</a>(kvm, root, slot-&gt;base_gfn,</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                 slot-&gt;base_gfn + slot-&gt;npages, min_level);</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160; </div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    return spte_set;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;}</div>
<div class="ttc" id="atdp__mmu_8c_html_ae3e523e725021c7dd3f3796f4e074a37"><div class="ttname"><a href="tdp__mmu_8c.html#ae3e523e725021c7dd3f3796f4e074a37">wrprot_gfn_range</a></div><div class="ttdeci">static bool wrprot_gfn_range(struct kvm *kvm, struct kvm_mmu_page *root, gfn_t start, gfn_t end, int min_level)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l01262">tdp_mmu.c:1262</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a7f6c658f3ddf3ffac5ce96335b78e295_cgraph.png" border="0" usemap="#atdp__mmu_8h_a7f6c658f3ddf3ffac5ce96335b78e295_cgraph" alt=""/></div>
<map name="atdp__mmu_8h_a7f6c658f3ddf3ffac5ce96335b78e295_cgraph" id="atdp__mmu_8h_a7f6c658f3ddf3ffac5ce96335b78e295_cgraph">
<area shape="rect" title=" " alt="" coords="5,115,205,141"/>
<area shape="rect" href="tdp__mmu_8c.html#ae3e523e725021c7dd3f3796f4e074a37" title=" " alt="" coords="253,115,389,141"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="1731,220,1829,247"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="2361,501,2536,528"/>
<area shape="rect" href="tdp__mmu_8c.html#abc2d73db35961f670cedf8ce1206c4d2" title=" " alt="" coords="437,92,647,119"/>
<area shape="rect" href="tdp__mmu_8c.html#a692eb9d20075258e5d4a0e4289a7c9b6" title=" " alt="" coords="443,347,641,373"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="1974,220,2075,247"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="695,91,869,117"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="917,89,1128,116"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="1176,78,1387,119"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="1456,93,1623,120"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="1445,43,1633,69"/>
<area shape="rect" href="kvm__main_8c.html#a7682302871243c20a5dd16214655db15" title=" " alt="" coords="1741,144,1819,171"/>
<area shape="rect" href="kvm__main_8c.html#a9316cc70360fb39d920d5c76a2e41f35" title=" " alt="" coords="1692,93,1868,120"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1703,43,1857,69"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="701,637,863,664"/>
<area shape="rect" href="spte_8h.html#ad52bae526742289dbd54348dfa55310b" title=" " alt="" coords="1215,448,1348,475"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="1703,710,1857,751"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="947,637,1098,664"/>
<area shape="rect" href="spte_8h.html#a16669248c64937ddec714d855609cacb" title=" " alt="" coords="1713,869,1847,896"/>
<area shape="rect" href="spte_8h.html#a0726c9cf54d23a373533a0833aaf979c" title=" " alt="" coords="970,1053,1075,1080"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="966,1104,1079,1131"/>
<area shape="rect" href="kvm__main_8c.html#ad88d3f7ece0c0ad7dce0c296133beccb" title=" " alt="" coords="936,1155,1109,1181"/>
<area shape="rect" href="kvm__main_8c.html#a3617d51882e6aba0abae53c0bf922873" title=" " alt="" coords="951,1205,1094,1232"/>
<area shape="rect" href="mmu_8h.html#a9d589fd96a814e43fc146f83dc5d5f73" title=" " alt="" coords="932,397,1113,424"/>
<area shape="rect" href="tdp__iter_8c.html#ae565103c187af07e69eb2f29b180b977" title=" " alt="" coords="959,296,1087,323"/>
<area shape="rect" href="spte_8h.html#a88a720d39abac3aee2f63e03a20e8abd" title=" " alt="" coords="1232,347,1331,373"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="1964,717,2085,744"/>
<area shape="rect" href="mmu__internal_8h.html#a993d31328977f0bf21610ad74fa55a79" title=" " alt="" coords="1195,717,1367,744"/>
<area shape="rect" href="tdp__iter_8h.html#ae1b8feffcbd421cbcb6a40cd57abf768" title=" " alt="" coords="1186,768,1377,795"/>
<area shape="rect" href="tdp__iter_8h.html#a74cc1f032b50c7c6c64ded8866deb4a4" title=" " alt="" coords="1184,824,1379,851"/>
<area shape="rect" href="tdp__iter_8h.html#a2138ed5465b3552439c1ad55ee1bc6d1" title=" " alt="" coords="1442,886,1637,927"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="1231,549,1331,576"/>
<area shape="rect" href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279" title=" " alt="" coords="1198,601,1365,642"/>
<area shape="rect" href="tdp__mmu_8c.html#a401c07c0503d3fc2c62b9a8a06096686" title=" " alt="" coords="1205,667,1358,693"/>
<area shape="rect" href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac" title=" " alt="" coords="1457,717,1622,744"/>
<area shape="rect" href="tdp__iter_8h.html#acce3a5afd04a68fc666c32e91d8c1770" title=" " alt="" coords="1435,835,1644,861"/>
<area shape="rect" href="tdp__iter_8h.html#ae00f2a54e0e899c2f169396a9c10d223" title=" " alt="" coords="1442,769,1637,810"/>
<area shape="rect" href="spte_8c.html#a11de60840b247621debae854aea928db" title=" " alt="" coords="1697,776,1863,803"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="1945,819,2104,845"/>
<area shape="rect" href="spte_8h.html#a976cddc84d935189584bdce94d4805fd" title=" " alt="" coords="2181,819,2313,845"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="1474,499,1605,525"/>
<area shape="rect" href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b" title=" " alt="" coords="1470,549,1609,576"/>
<area shape="rect" href="tdp__mmu_8c.html#a0003da5596a964166d5e46389e7cf4b3" title=" " alt="" coords="1441,667,1638,693"/>
<area shape="rect" href="mmu_8c.html#a2fba0b2dd67723bfbc4349ea7c8e019a" title=" " alt="" coords="1462,601,1617,642"/>
<area shape="rect" href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8" title=" " alt="" coords="1916,869,2133,896"/>
<area shape="rect" href="spte_8h.html#ad4cab344dce7557c80f815d4dc072deb" title=" " alt="" coords="1931,920,2118,947"/>
<area shape="rect" href="kvm__main_8c.html#a05228520c714138c61d76bfbc12c162c" title=" " alt="" coords="1189,1155,1373,1181"/>
<area shape="rect" href="kvm__main_8c.html#aefbc4e0cbda09938de01d0afb0c06d59" title=" " alt="" coords="1446,1180,1633,1207"/>
<area shape="rect" href="kvm__main_8c.html#adb6ddc9dc8c5e447e04b1be97543f347" title=" " alt="" coords="1204,1205,1359,1232"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a7f6c658f3ddf3ffac5ce96335b78e295_icgraph.png" border="0" usemap="#atdp__mmu_8h_a7f6c658f3ddf3ffac5ce96335b78e295_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_a7f6c658f3ddf3ffac5ce96335b78e295_icgraph" id="atdp__mmu_8h_a7f6c658f3ddf3ffac5ce96335b78e295_icgraph">
<area shape="rect" title=" " alt="" coords="3061,232,3261,259"/>
<area shape="rect" href="mmu_8c.html#a168b7814e68a545abd8bf00fc4466610" title=" " alt="" coords="2833,225,3013,266"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="2619,225,2785,266"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="2365,225,2571,266"/>
<area shape="rect" href="kvm__main_8c.html#a05eed662dd45e4e4f7485e3158d95a3b" title=" " alt="" coords="2099,232,2317,259"/>
<area shape="rect" href="kvm__main_8c.html#ac81a7d714d0668ccea6d0c2ddfd0fed5" title=" " alt="" coords="1908,232,2051,259"/>
<area shape="rect" href="kvm__main_8c.html#ac76f506181e49aa4800bb202e11cb2b3" title=" " alt="" coords="1657,232,1860,259"/>
<area shape="rect" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9" title=" " alt="" coords="1412,177,1609,204"/>
<area shape="rect" href="kvm__main_8c.html#a1a839781d3be88d418abfb2b456663ab" title=" " alt="" coords="1417,257,1605,284"/>
<area shape="rect" href="vmx_8c.html#acc48d0f16e027c2bad1268d02a2eaa68" title=" " alt="" coords="1160,51,1345,77"/>
<area shape="rect" href="lapic_8c.html#a8c6616d2cbae35632aa5debb15b552ec" title=" " alt="" coords="1146,101,1359,128"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="1167,152,1338,179"/>
<area shape="rect" href="lapic_8c.html#a017e57adbc721d98d26099f1a431a22c" title=" " alt="" coords="1141,203,1364,229"/>
<area shape="rect" href="vmx_8c.html#a15d61630d8c4e3f7aea16d3b0164a799" title=" " alt="" coords="1183,253,1323,280"/>
<area shape="rect" href="vmx_8c.html#a426fe0cb3c7fd73b276f6815b6ab9ddc" title=" " alt="" coords="933,51,1071,77"/>
<area shape="rect" href="avic_8c.html#aefc63eafb35c1efd94f6d53e7d0b20d5" title=" " alt="" coords="915,101,1089,128"/>
<area shape="rect" href="avic_8c.html#a8e0a22138080054f4ac064064402f74a" title=" " alt="" coords="737,25,851,52"/>
<area shape="rect" href="svm_8c.html#a2af2f754ca7838a0253d54c33aae7d1e" title=" " alt="" coords="504,5,640,32"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="731,113,857,140"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="935,203,1069,229"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="475,56,669,83"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="737,240,851,267"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="497,107,647,133"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="489,157,655,184"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="495,208,649,235"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="467,259,677,285"/>
<area shape="rect" href="debugfs_8c.html#af0427db3ec1a8c38ea51591abbefde57" title=" " alt="" coords="486,310,658,351"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="505,376,639,403"/>
<area shape="rect" href="sev_8c.html#ad28fd793149997c912b52490f6ca139a" title=" " alt="" coords="501,427,643,453"/>
<area shape="rect" href="sev_8c.html#af1eb77eac84f085b0a943b87f783e30d" title=" " alt="" coords="507,477,637,504"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="219,107,377,133"/>
<area shape="rect" href="sev_8c.html#abe3c569b297da3b78824074b8c08f9a7" title=" " alt="" coords="177,427,419,453"/>
<area shape="rect" href="svm_8c.html#a0e69cefce46e7b11e1e8e056ea5b6561" title=" " alt="" coords="231,477,365,504"/>
<area shape="rect" href="x86_8c.html#a384702aafa8cdbab3cf92b3d576bb6fb" title=" " alt="" coords="911,253,1093,280"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="725,400,863,427"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="531,528,613,555"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="205,528,391,555"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,528,129,555"/>
<area shape="rect" href="kvm__main_8c.html#a4c8ff5a794a6a2e77e0cfc224568ef70" title=" " alt="" coords="1151,305,1354,346"/>
</map>
</div>

</div>
</div>
<a id="aca0f6025bf55596c80647e3a35997d92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca0f6025bf55596c80647e3a35997d92">&#9670;&nbsp;</a></span>kvm_tdp_mmu_zap_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_tdp_mmu_zap_all </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l00831">831</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;{</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__mmu__page.html">kvm_mmu_page</a> *root;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment">     * Zap all roots, including invalid roots, as all SPTEs must be dropped</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">     * before returning to the caller.  Zap directly even if the root is</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment">     * also being zapped by a worker.  Walking zapped top-level SPTEs isn&#39;t</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment">     * all that expensive and mmu_lock is already held, which means the</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment">     * worker has yielded, i.e. flushing the work instead of zapping here</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment">     * isn&#39;t guaranteed to be any faster.</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment">     * A TLB flush is unnecessary, KVM zaps everything if and only the VM</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment">     * is being destroyed or the userspace VMM has exited.  In both cases,</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment">     * KVM_RUN is unreachable, i.e. no vCPUs will ever service the request.</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    lockdep_assert_held_write(&amp;kvm-&gt;mmu_lock);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <a class="code" href="tdp__mmu_8c.html#a380373dbae26c3723631c3eebccf47db">for_each_tdp_mmu_root_yield_safe</a>(kvm, root)</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <a class="code" href="tdp__mmu_8c.html#a95955e5f31399228d6a722fba5a81477">tdp_mmu_zap_root</a>(kvm, root, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;}</div>
<div class="ttc" id="atdp__mmu_8c_html_a380373dbae26c3723631c3eebccf47db"><div class="ttname"><a href="tdp__mmu_8c.html#a380373dbae26c3723631c3eebccf47db">for_each_tdp_mmu_root_yield_safe</a></div><div class="ttdeci">#define for_each_tdp_mmu_root_yield_safe(_kvm, _root)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00162">tdp_mmu.c:162</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_a95955e5f31399228d6a722fba5a81477"><div class="ttname"><a href="tdp__mmu_8c.html#a95955e5f31399228d6a722fba5a81477">tdp_mmu_zap_root</a></div><div class="ttdeci">static void tdp_mmu_zap_root(struct kvm *kvm, struct kvm_mmu_page *root, bool shared)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00716">tdp_mmu.c:716</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_aca0f6025bf55596c80647e3a35997d92_cgraph.png" border="0" usemap="#atdp__mmu_8h_aca0f6025bf55596c80647e3a35997d92_cgraph" alt=""/></div>
<map name="atdp__mmu_8h_aca0f6025bf55596c80647e3a35997d92_cgraph" id="atdp__mmu_8h_aca0f6025bf55596c80647e3a35997d92_cgraph">
<area shape="rect" title=" " alt="" coords="5,911,179,938"/>
<area shape="rect" href="tdp__mmu_8c.html#a95955e5f31399228d6a722fba5a81477" title=" " alt="" coords="227,911,373,938"/>
<area shape="rect" href="tdp__mmu_8c.html#af9c34fae0b7eac63cc78a01882498cfb" title=" " alt="" coords="421,882,583,908"/>
<area shape="rect" href="tdp__mmu_8c.html#a94f5586dfab1d77897564b4b4979da48" title=" " alt="" coords="424,933,580,974"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="2168,220,2343,247"/>
<area shape="rect" href="tdp__mmu_8c.html#abc2d73db35961f670cedf8ce1206c4d2" title=" " alt="" coords="635,932,844,959"/>
<area shape="rect" href="tdp__mmu_8c.html#af6444812b70d9509539a3fa478cde14d" title=" " alt="" coords="652,882,827,908"/>
<area shape="rect" href="tdp__mmu_8c.html#ac323268ae26fde5a608d694f4943d476" title=" " alt="" coords="631,983,848,1010"/>
<area shape="rect" href="tdp__mmu_8c.html#a692eb9d20075258e5d4a0e4289a7c9b6" title=" " alt="" coords="896,831,1095,858"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="908,932,1083,959"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="1143,1008,1353,1035"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="1401,1014,1612,1056"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="1674,1022,1841,1048"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="1663,1072,1851,1099"/>
<area shape="rect" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a" title=" " alt="" coords="922,882,1069,908"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="1167,423,1329,450"/>
<area shape="rect" href="spte_8h.html#ad52bae526742289dbd54348dfa55310b" title=" " alt="" coords="1691,870,1824,896"/>
<area shape="rect" href="tdp__iter_8h.html#a74cc1f032b50c7c6c64ded8866deb4a4" title=" " alt="" coords="1660,920,1855,947"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="2178,322,2333,364"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="1431,659,1582,686"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="2206,515,2305,542"/>
<area shape="rect" href="spte_8h.html#a16669248c64937ddec714d855609cacb" title=" " alt="" coords="1690,43,1825,70"/>
<area shape="rect" href="spte_8h.html#a0726c9cf54d23a373533a0833aaf979c" title=" " alt="" coords="1454,195,1559,222"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="1450,246,1563,272"/>
<area shape="rect" href="kvm__main_8c.html#ad88d3f7ece0c0ad7dce0c296133beccb" title=" " alt="" coords="1420,94,1593,120"/>
<area shape="rect" href="kvm__main_8c.html#a3617d51882e6aba0abae53c0bf922873" title=" " alt="" coords="1435,144,1578,171"/>
<area shape="rect" href="mmu_8h.html#a9d589fd96a814e43fc146f83dc5d5f73" title=" " alt="" coords="1416,296,1597,323"/>
<area shape="rect" href="tdp__iter_8c.html#ae565103c187af07e69eb2f29b180b977" title=" " alt="" coords="1443,448,1571,475"/>
<area shape="rect" href="spte_8h.html#a88a720d39abac3aee2f63e03a20e8abd" title=" " alt="" coords="1708,448,1807,475"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="2409,299,2531,326"/>
<area shape="rect" href="mmu__internal_8h.html#a993d31328977f0bf21610ad74fa55a79" title=" " alt="" coords="1671,768,1843,795"/>
<area shape="rect" href="tdp__iter_8h.html#ae1b8feffcbd421cbcb6a40cd57abf768" title=" " alt="" coords="1662,600,1853,627"/>
<area shape="rect" href="tdp__iter_8h.html#a2138ed5465b3552439c1ad55ee1bc6d1" title=" " alt="" coords="1914,837,2109,878"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="1707,550,1807,576"/>
<area shape="rect" href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279" title=" " alt="" coords="1674,652,1841,693"/>
<area shape="rect" href="tdp__mmu_8c.html#a401c07c0503d3fc2c62b9a8a06096686" title=" " alt="" coords="1681,718,1834,744"/>
<area shape="rect" href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac" title=" " alt="" coords="1929,768,2094,795"/>
<area shape="rect" href="tdp__iter_8h.html#acce3a5afd04a68fc666c32e91d8c1770" title=" " alt="" coords="1907,920,2116,947"/>
<area shape="rect" href="tdp__iter_8h.html#ae00f2a54e0e899c2f169396a9c10d223" title=" " alt="" coords="1914,449,2109,490"/>
<area shape="rect" href="spte_8c.html#a11de60840b247621debae854aea928db" title=" " alt="" coords="2172,271,2339,298"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="2419,515,2521,542"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="2391,244,2549,271"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="1946,566,2077,592"/>
<area shape="rect" href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b" title=" " alt="" coords="1942,659,2081,686"/>
<area shape="rect" href="tdp__mmu_8c.html#a0003da5596a964166d5e46389e7cf4b3" title=" " alt="" coords="1913,718,2110,744"/>
<area shape="rect" href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8" title=" " alt="" coords="1903,94,2120,120"/>
<area shape="rect" href="spte_8h.html#ad4cab344dce7557c80f815d4dc072deb" title=" " alt="" coords="1918,195,2105,222"/>
<area shape="rect" href="kvm__main_8c.html#a05228520c714138c61d76bfbc12c162c" title=" " alt="" coords="1665,94,1849,120"/>
<area shape="rect" href="kvm__main_8c.html#adb6ddc9dc8c5e447e04b1be97543f347" title=" " alt="" coords="1680,144,1835,171"/>
<area shape="rect" href="mmu_8h.html#a6555cf2d510d04ae19bee154d166f778" title=" " alt="" coords="917,983,1073,1010"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_aca0f6025bf55596c80647e3a35997d92_icgraph.png" border="0" usemap="#atdp__mmu_8h_aca0f6025bf55596c80647e3a35997d92_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_aca0f6025bf55596c80647e3a35997d92_icgraph" id="atdp__mmu_8h_aca0f6025bf55596c80647e3a35997d92_icgraph">
<area shape="rect" title=" " alt="" coords="1561,208,1735,235"/>
<area shape="rect" href="mmu_8c.html#a6db2d9d04af40584cbde51a2e1f74837" title=" " alt="" coords="1368,208,1513,235"/>
<area shape="rect" href="mmu_8c.html#a6a9d3382763ac1478855bd15907a98e2" title=" " alt="" coords="1116,208,1320,235"/>
<area shape="rect" href="kvm__main_8c.html#ab6320575dc04178df16ea4d7dddff190" title=" " alt="" coords="899,208,1068,235"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="716,208,851,235"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="553,208,668,235"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="325,5,475,32"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="317,56,483,83"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="303,107,497,133"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="323,157,477,184"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="295,208,505,235"/>
<area shape="rect" href="debugfs_8c.html#af0427db3ec1a8c38ea51591abbefde57" title=" " alt="" coords="314,259,486,301"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="333,325,467,352"/>
<area shape="rect" href="sev_8c.html#ad28fd793149997c912b52490f6ca139a" title=" " alt="" coords="329,376,471,403"/>
<area shape="rect" href="sev_8c.html#af1eb77eac84f085b0a943b87f783e30d" title=" " alt="" coords="335,427,465,453"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="47,5,205,32"/>
<area shape="rect" href="sev_8c.html#abe3c569b297da3b78824074b8c08f9a7" title=" " alt="" coords="5,376,247,403"/>
<area shape="rect" href="svm_8c.html#a0e69cefce46e7b11e1e8e056ea5b6561" title=" " alt="" coords="59,427,193,453"/>
</map>
</div>

</div>
</div>
<a id="a3a86994ba17144f60df37ea7682d650b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a86994ba17144f60df37ea7682d650b">&#9670;&nbsp;</a></span>kvm_tdp_mmu_zap_collapsible_sptes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_tdp_mmu_zap_collapsible_sptes </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct kvm_memory_slot *&#160;</td>
          <td class="paramname"><em>slot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l01695">1695</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;{</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__mmu__page.html">kvm_mmu_page</a> *root;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160; </div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    lockdep_assert_held_read(&amp;kvm-&gt;mmu_lock);</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    <a class="code" href="tdp__mmu_8c.html#a3c960568750483d675f0f994ac033a41">for_each_valid_tdp_mmu_root_yield_safe</a>(kvm, root, slot-&gt;as_id)</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        <a class="code" href="tdp__mmu_8c.html#ac72a38de4d0b8a5cfeace82f10cc4caf">zap_collapsible_spte_range</a>(kvm, root, slot);</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;}</div>
<div class="ttc" id="atdp__mmu_8c_html_ac72a38de4d0b8a5cfeace82f10cc4caf"><div class="ttname"><a href="tdp__mmu_8c.html#ac72a38de4d0b8a5cfeace82f10cc4caf">zap_collapsible_spte_range</a></div><div class="ttdeci">static void zap_collapsible_spte_range(struct kvm *kvm, struct kvm_mmu_page *root, const struct kvm_memory_slot *slot)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l01640">tdp_mmu.c:1640</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a3a86994ba17144f60df37ea7682d650b_cgraph.png" border="0" usemap="#atdp__mmu_8h_a3a86994ba17144f60df37ea7682d650b_cgraph" alt=""/></div>
<map name="atdp__mmu_8h_a3a86994ba17144f60df37ea7682d650b_cgraph" id="atdp__mmu_8h_a3a86994ba17144f60df37ea7682d650b_cgraph">
<area shape="rect" title=" " alt="" coords="5,1128,232,1169"/>
<area shape="rect" href="tdp__mmu_8c.html#ac72a38de4d0b8a5cfeace82f10cc4caf" title=" " alt="" coords="280,1128,437,1169"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="1515,90,1614,117"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="1739,486,1914,513"/>
<area shape="rect" href="mmu_8c.html#a514b4601388e83cb56ffe210d5123b50" title=" " alt="" coords="494,1325,686,1367"/>
<area shape="rect" href="tdp__mmu_8c.html#abc2d73db35961f670cedf8ce1206c4d2" title=" " alt="" coords="485,1215,695,1242"/>
<area shape="rect" href="tdp__mmu_8c.html#ab901a77cd00a4e809baa9a25e289b59d" title=" " alt="" coords="489,1135,691,1162"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="1776,90,1877,117"/>
<area shape="rect" href="mmu_8c.html#a3c4a735c02073ba03d156c2ce4cfc5e5" title=" " alt="" coords="743,1355,949,1396"/>
<area shape="rect" href="mmu_8c.html#a25a86ecdadc998ed7ceac6eb669be98f" title=" " alt="" coords="997,1358,1179,1385"/>
<area shape="rect" href="mmu_8c.html#a1a8a0df061e27892bcc64a3e810e6c29" title=" " alt="" coords="1027,1409,1149,1435"/>
<area shape="rect" href="mmu_8h.html#a41b79b63cae220349d8eb5a54f047939" title=" " alt="" coords="1264,1409,1371,1435"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="1230,1274,1405,1301"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="1459,1274,1670,1301"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="1721,1267,1932,1308"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="1991,1249,2157,1275"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="1980,1299,2168,1326"/>
<area shape="rect" href="kvm__main_8c.html#a7682302871243c20a5dd16214655db15" title=" " alt="" coords="2265,1249,2343,1275"/>
<area shape="rect" href="kvm__main_8c.html#a9316cc70360fb39d920d5c76a2e41f35" title=" " alt="" coords="2216,1350,2392,1377"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="2227,1299,2381,1326"/>
<area shape="rect" href="tdp__iter_8h.html#acce3a5afd04a68fc666c32e91d8c1770" title=" " alt="" coords="1722,1089,1931,1115"/>
<area shape="rect" href="mmu__internal_8h.html#ae152dfa402f5fe629bd4b1f4f931de1e" title=" " alt="" coords="745,1186,947,1213"/>
<area shape="rect" href="tdp__mmu_8c.html#a692eb9d20075258e5d4a0e4289a7c9b6" title=" " alt="" coords="747,1085,945,1111"/>
<area shape="rect" href="mmu__internal_8h.html#a8805295a6f11129455d5b87a86fd3db5" title=" " alt="" coords="1013,1186,1163,1213"/>
<area shape="rect" href="kvm__main_8c.html#a523d3c698dd532d3fbc1bb046246ea5f" title=" " alt="" coords="1001,1237,1175,1279"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="1007,461,1169,487"/>
<area shape="rect" href="spte_8h.html#ad52bae526742289dbd54348dfa55310b" title=" " alt="" coords="1498,1085,1631,1111"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="1240,141,1395,183"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="1242,831,1393,858"/>
<area shape="rect" href="spte_8h.html#a16669248c64937ddec714d855609cacb" title=" " alt="" coords="1250,613,1385,639"/>
<area shape="rect" href="spte_8h.html#a0726c9cf54d23a373533a0833aaf979c" title=" " alt="" coords="1265,562,1370,589"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="1261,258,1374,285"/>
<area shape="rect" href="kvm__main_8c.html#ad88d3f7ece0c0ad7dce0c296133beccb" title=" " alt="" coords="1231,207,1404,234"/>
<area shape="rect" href="kvm__main_8c.html#a3617d51882e6aba0abae53c0bf922873" title=" " alt="" coords="1246,410,1389,437"/>
<area shape="rect" href="mmu_8h.html#a9d589fd96a814e43fc146f83dc5d5f73" title=" " alt="" coords="1227,461,1408,487"/>
<area shape="rect" href="tdp__iter_8c.html#ae565103c187af07e69eb2f29b180b977" title=" " alt="" coords="1253,309,1381,335"/>
<area shape="rect" href="spte_8h.html#a88a720d39abac3aee2f63e03a20e8abd" title=" " alt="" coords="1515,359,1614,386"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="1504,149,1625,175"/>
<area shape="rect" href="mmu__internal_8h.html#a993d31328977f0bf21610ad74fa55a79" title=" " alt="" coords="1479,831,1651,858"/>
<area shape="rect" href="tdp__iter_8h.html#ae1b8feffcbd421cbcb6a40cd57abf768" title=" " alt="" coords="1469,882,1660,909"/>
<area shape="rect" href="tdp__iter_8h.html#a74cc1f032b50c7c6c64ded8866deb4a4" title=" " alt="" coords="1467,1034,1662,1061"/>
<area shape="rect" href="tdp__iter_8h.html#a2138ed5465b3552439c1ad55ee1bc6d1" title=" " alt="" coords="1729,1001,1924,1043"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="1515,933,1615,959"/>
<area shape="rect" href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279" title=" " alt="" coords="1481,715,1648,756"/>
<area shape="rect" href="tdp__mmu_8c.html#a401c07c0503d3fc2c62b9a8a06096686" title=" " alt="" coords="1488,781,1641,807"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="1485,613,1644,639"/>
<area shape="rect" href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8" title=" " alt="" coords="1456,562,1673,589"/>
<area shape="rect" href="spte_8h.html#ad4cab344dce7557c80f815d4dc072deb" title=" " alt="" coords="1471,511,1658,538"/>
<area shape="rect" href="kvm__main_8c.html#a05228520c714138c61d76bfbc12c162c" title=" " alt="" coords="1473,207,1657,234"/>
<area shape="rect" href="kvm__main_8c.html#adb6ddc9dc8c5e447e04b1be97543f347" title=" " alt="" coords="1487,410,1642,437"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a3a86994ba17144f60df37ea7682d650b_icgraph.png" border="0" usemap="#atdp__mmu_8h_a3a86994ba17144f60df37ea7682d650b_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_a3a86994ba17144f60df37ea7682d650b_icgraph" id="atdp__mmu_8h_a3a86994ba17144f60df37ea7682d650b_icgraph">
<area shape="rect" title=" " alt="" coords="3080,225,3307,266"/>
<area shape="rect" href="mmu_8c.html#a35da5538a61de05522efdad8f615df4f" title=" " alt="" coords="2833,225,3032,266"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="2619,225,2785,266"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="2365,225,2571,266"/>
<area shape="rect" href="kvm__main_8c.html#a05eed662dd45e4e4f7485e3158d95a3b" title=" " alt="" coords="2099,232,2317,259"/>
<area shape="rect" href="kvm__main_8c.html#ac81a7d714d0668ccea6d0c2ddfd0fed5" title=" " alt="" coords="1908,232,2051,259"/>
<area shape="rect" href="kvm__main_8c.html#ac76f506181e49aa4800bb202e11cb2b3" title=" " alt="" coords="1657,232,1860,259"/>
<area shape="rect" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9" title=" " alt="" coords="1412,177,1609,204"/>
<area shape="rect" href="kvm__main_8c.html#a1a839781d3be88d418abfb2b456663ab" title=" " alt="" coords="1417,257,1605,284"/>
<area shape="rect" href="vmx_8c.html#acc48d0f16e027c2bad1268d02a2eaa68" title=" " alt="" coords="1160,51,1345,77"/>
<area shape="rect" href="lapic_8c.html#a8c6616d2cbae35632aa5debb15b552ec" title=" " alt="" coords="1146,101,1359,128"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="1167,152,1338,179"/>
<area shape="rect" href="lapic_8c.html#a017e57adbc721d98d26099f1a431a22c" title=" " alt="" coords="1141,203,1364,229"/>
<area shape="rect" href="vmx_8c.html#a15d61630d8c4e3f7aea16d3b0164a799" title=" " alt="" coords="1183,253,1323,280"/>
<area shape="rect" href="vmx_8c.html#a426fe0cb3c7fd73b276f6815b6ab9ddc" title=" " alt="" coords="933,51,1071,77"/>
<area shape="rect" href="avic_8c.html#aefc63eafb35c1efd94f6d53e7d0b20d5" title=" " alt="" coords="915,101,1089,128"/>
<area shape="rect" href="avic_8c.html#a8e0a22138080054f4ac064064402f74a" title=" " alt="" coords="737,25,851,52"/>
<area shape="rect" href="svm_8c.html#a2af2f754ca7838a0253d54c33aae7d1e" title=" " alt="" coords="504,5,640,32"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="731,113,857,140"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="935,203,1069,229"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="475,56,669,83"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="737,240,851,267"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="497,107,647,133"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="489,157,655,184"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="495,208,649,235"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="467,259,677,285"/>
<area shape="rect" href="debugfs_8c.html#af0427db3ec1a8c38ea51591abbefde57" title=" " alt="" coords="486,310,658,351"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="505,376,639,403"/>
<area shape="rect" href="sev_8c.html#ad28fd793149997c912b52490f6ca139a" title=" " alt="" coords="501,427,643,453"/>
<area shape="rect" href="sev_8c.html#af1eb77eac84f085b0a943b87f783e30d" title=" " alt="" coords="507,477,637,504"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="219,107,377,133"/>
<area shape="rect" href="sev_8c.html#abe3c569b297da3b78824074b8c08f9a7" title=" " alt="" coords="177,427,419,453"/>
<area shape="rect" href="svm_8c.html#a0e69cefce46e7b11e1e8e056ea5b6561" title=" " alt="" coords="231,477,365,504"/>
<area shape="rect" href="x86_8c.html#a384702aafa8cdbab3cf92b3d576bb6fb" title=" " alt="" coords="911,253,1093,280"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="725,400,863,427"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="531,528,613,555"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="205,528,391,555"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,528,129,555"/>
<area shape="rect" href="kvm__main_8c.html#a4c8ff5a794a6a2e77e0cfc224568ef70" title=" " alt="" coords="1151,305,1354,346"/>
</map>
</div>

</div>
</div>
<a id="a8ab26f4fb05f388d8bcf04ad89ee6797"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ab26f4fb05f388d8bcf04ad89ee6797">&#9670;&nbsp;</a></span>kvm_tdp_mmu_zap_invalidated_roots()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_tdp_mmu_zap_invalidated_roots </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l00856">856</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;{</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__mmu__page.html">kvm_mmu_page</a> *root;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    read_lock(&amp;kvm-&gt;mmu_lock);</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160; </div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <a class="code" href="tdp__mmu_8c.html#a380373dbae26c3723631c3eebccf47db">for_each_tdp_mmu_root_yield_safe</a>(kvm, root) {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <span class="keywordflow">if</span> (!root-&gt;<a class="code" href="structkvm__mmu__page.html#a4be3912894be6a937cad4c54708edaa4">tdp_mmu_scheduled_root_to_zap</a>)</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        root-&gt;<a class="code" href="structkvm__mmu__page.html#a4be3912894be6a937cad4c54708edaa4">tdp_mmu_scheduled_root_to_zap</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        KVM_BUG_ON(!root-&gt;<a class="code" href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">role</a>.invalid, kvm);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160; </div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment">         * A TLB flush is not necessary as KVM performs a local TLB</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment">         * flush when allocating a new root (see kvm_mmu_load()), and</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">         * when migrating a vCPU to a different pCPU.  Note, the local</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">         * TLB flush on reuse also invalidates paging-structure-cache</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">         * entries, i.e. TLB entries for intermediate paging structures,</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">         * that may be zapped, as such entries are associated with the</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">         * ASID on both VMX and SVM.</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <a class="code" href="tdp__mmu_8c.html#a95955e5f31399228d6a722fba5a81477">tdp_mmu_zap_root</a>(kvm, root, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment">         * The referenced needs to be put *after* zapping the root, as</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment">         * the root must be reachable by mmu_notifiers while it&#39;s being</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="comment">         * zapped</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <a class="code" href="tdp__mmu_8c.html#a8a9d637b546d8dfd125028f823a6eac0">kvm_tdp_mmu_put_root</a>(kvm, root);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    }</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; </div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    read_unlock(&amp;kvm-&gt;mmu_lock);</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a8ab26f4fb05f388d8bcf04ad89ee6797_cgraph.png" border="0" usemap="#atdp__mmu_8h_a8ab26f4fb05f388d8bcf04ad89ee6797_cgraph" alt=""/></div>
<map name="atdp__mmu_8h_a8ab26f4fb05f388d8bcf04ad89ee6797_cgraph" id="atdp__mmu_8h_a8ab26f4fb05f388d8bcf04ad89ee6797_cgraph">
<area shape="rect" title=" " alt="" coords="5,314,236,355"/>
<area shape="rect" href="tdp__mmu_8c.html#a8a9d637b546d8dfd125028f823a6eac0" title=" " alt="" coords="284,119,465,145"/>
<area shape="rect" href="tdp__mmu_8c.html#a95955e5f31399228d6a722fba5a81477" title=" " alt="" coords="301,503,448,529"/>
<area shape="rect" href="tdp__mmu_8h.html#a166bc9e57a26e8a37e94e2314a72d226" title=" " alt="" coords="523,68,665,95"/>
<area shape="rect" href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279" title=" " alt="" coords="1766,107,1933,149"/>
<area shape="rect" href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b" title=" " alt="" coords="2034,115,2173,141"/>
<area shape="rect" href="tdp__mmu_8c.html#af9c34fae0b7eac63cc78a01882498cfb" title=" " alt="" coords="513,503,675,529"/>
<area shape="rect" href="tdp__mmu_8c.html#a94f5586dfab1d77897564b4b4979da48" title=" " alt="" coords="516,554,672,595"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="2260,781,2435,808"/>
<area shape="rect" href="tdp__mmu_8c.html#abc2d73db35961f670cedf8ce1206c4d2" title=" " alt="" coords="727,67,936,93"/>
<area shape="rect" href="tdp__mmu_8c.html#af6444812b70d9509539a3fa478cde14d" title=" " alt="" coords="744,477,919,504"/>
<area shape="rect" href="tdp__mmu_8c.html#ac323268ae26fde5a608d694f4943d476" title=" " alt="" coords="723,579,940,605"/>
<area shape="rect" href="tdp__mmu_8c.html#a692eb9d20075258e5d4a0e4289a7c9b6" title=" " alt="" coords="988,528,1187,555"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="1000,64,1175,91"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="1235,59,1445,85"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="1493,49,1704,90"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="1766,5,1933,32"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="1755,56,1943,83"/>
<area shape="rect" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a" title=" " alt="" coords="1014,477,1161,504"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="1259,705,1421,732"/>
<area shape="rect" href="spte_8h.html#ad52bae526742289dbd54348dfa55310b" title=" " alt="" coords="1783,579,1916,605"/>
<area shape="rect" href="tdp__iter_8h.html#a74cc1f032b50c7c6c64ded8866deb4a4" title=" " alt="" coords="1752,224,1947,251"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="2270,191,2425,233"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="1523,427,1674,453"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="2298,984,2397,1011"/>
<area shape="rect" href="spte_8h.html#a16669248c64937ddec714d855609cacb" title=" " alt="" coords="1782,629,1917,656"/>
<area shape="rect" href="spte_8h.html#a0726c9cf54d23a373533a0833aaf979c" title=" " alt="" coords="1546,781,1651,808"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="1542,933,1655,960"/>
<area shape="rect" href="kvm__main_8c.html#ad88d3f7ece0c0ad7dce0c296133beccb" title=" " alt="" coords="1512,731,1685,757"/>
<area shape="rect" href="kvm__main_8c.html#a3617d51882e6aba0abae53c0bf922873" title=" " alt="" coords="1527,680,1670,707"/>
<area shape="rect" href="mmu_8h.html#a9d589fd96a814e43fc146f83dc5d5f73" title=" " alt="" coords="1508,984,1689,1011"/>
<area shape="rect" href="tdp__iter_8c.html#ae565103c187af07e69eb2f29b180b977" title=" " alt="" coords="1535,883,1663,909"/>
<area shape="rect" href="spte_8h.html#a88a720d39abac3aee2f63e03a20e8abd" title=" " alt="" coords="1800,984,1899,1011"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="2501,241,2623,268"/>
<area shape="rect" href="mmu__internal_8h.html#a993d31328977f0bf21610ad74fa55a79" title=" " alt="" coords="1763,477,1935,504"/>
<area shape="rect" href="tdp__iter_8h.html#ae1b8feffcbd421cbcb6a40cd57abf768" title=" " alt="" coords="1754,376,1945,403"/>
<area shape="rect" href="tdp__iter_8h.html#a2138ed5465b3552439c1ad55ee1bc6d1" title=" " alt="" coords="2006,341,2201,382"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="1799,325,1899,352"/>
<area shape="rect" href="tdp__mmu_8c.html#a401c07c0503d3fc2c62b9a8a06096686" title=" " alt="" coords="1773,427,1926,453"/>
<area shape="rect" href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac" title=" " alt="" coords="2021,477,2186,504"/>
<area shape="rect" href="tdp__iter_8h.html#acce3a5afd04a68fc666c32e91d8c1770" title=" " alt="" coords="1999,224,2208,251"/>
<area shape="rect" href="tdp__iter_8h.html#ae00f2a54e0e899c2f169396a9c10d223" title=" " alt="" coords="2006,275,2201,317"/>
<area shape="rect" href="spte_8c.html#a11de60840b247621debae854aea928db" title=" " alt="" coords="2264,283,2431,309"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="2511,984,2613,1011"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="2483,440,2641,467"/>
<area shape="rect" href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8" title=" " alt="" coords="1995,680,2212,707"/>
<area shape="rect" href="spte_8h.html#ad4cab344dce7557c80f815d4dc072deb" title=" " alt="" coords="2010,781,2197,808"/>
<area shape="rect" href="kvm__main_8c.html#a05228520c714138c61d76bfbc12c162c" title=" " alt="" coords="1757,731,1941,757"/>
<area shape="rect" href="kvm__main_8c.html#adb6ddc9dc8c5e447e04b1be97543f347" title=" " alt="" coords="1772,680,1927,707"/>
<area shape="rect" href="mmu_8h.html#a6555cf2d510d04ae19bee154d166f778" title=" " alt="" coords="1009,579,1165,605"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a8ab26f4fb05f388d8bcf04ad89ee6797_icgraph.png" border="0" usemap="#atdp__mmu_8h_a8ab26f4fb05f388d8bcf04ad89ee6797_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_a8ab26f4fb05f388d8bcf04ad89ee6797_icgraph" id="atdp__mmu_8h_a8ab26f4fb05f388d8bcf04ad89ee6797_icgraph">
<area shape="rect" title=" " alt="" coords="3580,271,3811,313"/>
<area shape="rect" href="tdp__mmu_8c.html#a73432bf42fbb3d43b3e04f88cd92b592" title=" " alt="" coords="3327,233,3532,260"/>
<area shape="rect" href="mmu_8c.html#abd59fd9785b9b5676841e9706c1c6797" title=" " alt="" coords="3341,304,3518,331"/>
<area shape="rect" href="mmu_8c.html#a0beae9a256ad42642a6b522a36a18a74" title=" " alt="" coords="1429,212,1593,239"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="1167,212,1338,239"/>
<area shape="rect" href="x86_8c.html#a78b266c18dac3b9edbea80941c96e2cd" title=" " alt="" coords="1181,161,1324,188"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="939,161,1065,188"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="935,212,1069,239"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="475,5,669,32"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="737,212,851,239"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="497,56,647,83"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="489,107,655,133"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="495,157,649,184"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="467,208,677,235"/>
<area shape="rect" href="debugfs_8c.html#af0427db3ec1a8c38ea51591abbefde57" title=" " alt="" coords="486,259,658,301"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="505,325,639,352"/>
<area shape="rect" href="sev_8c.html#ad28fd793149997c912b52490f6ca139a" title=" " alt="" coords="501,376,643,403"/>
<area shape="rect" href="sev_8c.html#af1eb77eac84f085b0a943b87f783e30d" title=" " alt="" coords="507,427,637,453"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="219,56,377,83"/>
<area shape="rect" href="sev_8c.html#abe3c569b297da3b78824074b8c08f9a7" title=" " alt="" coords="177,376,419,403"/>
<area shape="rect" href="svm_8c.html#a0e69cefce46e7b11e1e8e056ea5b6561" title=" " alt="" coords="231,427,365,453"/>
<area shape="rect" href="mmu_8c.html#a58fe7b43995ae8c20c597e1bb9c4c007" title=" " alt="" coords="2867,267,3048,309"/>
<area shape="rect" href="mmu_8c.html#ad4293ab926b1ab16fb8b380a76b9f533" title=" " alt="" coords="3115,326,3279,367"/>
<area shape="rect" href="mmu_8c.html#a5a613414a3787274a50cc9f9e9bab180" title=" " alt="" coords="3121,392,3272,419"/>
<area shape="rect" href="kvm__main_8c.html#aae203bcd73cff0002aeddd37bea71323" title=" " alt="" coords="2353,279,2541,305"/>
<area shape="rect" href="kvm__main_8c.html#ac81a7d714d0668ccea6d0c2ddfd0fed5" title=" " alt="" coords="1908,431,2051,457"/>
<area shape="rect" href="kvm__main_8c.html#ac76f506181e49aa4800bb202e11cb2b3" title=" " alt="" coords="1657,432,1860,459"/>
<area shape="rect" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9" title=" " alt="" coords="1412,432,1609,459"/>
<area shape="rect" href="kvm__main_8c.html#a1a839781d3be88d418abfb2b456663ab" title=" " alt="" coords="1417,537,1605,564"/>
<area shape="rect" href="vmx_8c.html#acc48d0f16e027c2bad1268d02a2eaa68" title=" " alt="" coords="1160,381,1345,408"/>
<area shape="rect" href="lapic_8c.html#a8c6616d2cbae35632aa5debb15b552ec" title=" " alt="" coords="1146,432,1359,459"/>
<area shape="rect" href="lapic_8c.html#a017e57adbc721d98d26099f1a431a22c" title=" " alt="" coords="1141,483,1364,509"/>
<area shape="rect" href="vmx_8c.html#a15d61630d8c4e3f7aea16d3b0164a799" title=" " alt="" coords="1183,533,1323,560"/>
<area shape="rect" href="vmx_8c.html#a426fe0cb3c7fd73b276f6815b6ab9ddc" title=" " alt="" coords="933,407,1071,433"/>
<area shape="rect" href="avic_8c.html#aefc63eafb35c1efd94f6d53e7d0b20d5" title=" " alt="" coords="915,457,1089,484"/>
<area shape="rect" href="avic_8c.html#a8e0a22138080054f4ac064064402f74a" title=" " alt="" coords="737,471,851,497"/>
<area shape="rect" href="svm_8c.html#a2af2f754ca7838a0253d54c33aae7d1e" title=" " alt="" coords="504,477,640,504"/>
<area shape="rect" href="x86_8c.html#a384702aafa8cdbab3cf92b3d576bb6fb" title=" " alt="" coords="911,508,1093,535"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="725,521,863,548"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="531,528,613,555"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="205,528,391,555"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,528,129,555"/>
<area shape="rect" href="kvm__main_8c.html#a4c8ff5a794a6a2e77e0cfc224568ef70" title=" " alt="" coords="1151,585,1354,626"/>
<area shape="rect" href="x86_8c.html#ae7e25dec8e0af366fb3db41dc9881970" title=" " alt="" coords="2848,333,3067,360"/>
<area shape="rect" href="kvm__main_8c.html#a6178ec8efee3ce8e53d84403b2a25401" title=" " alt="" coords="2589,333,2800,360"/>
<area shape="rect" href="kvm__main_8c.html#a52d56a5dc447602839375289b5bbffb2" title=" " alt="" coords="2359,405,2535,432"/>
<area shape="rect" href="kvm__main_8c.html#a8c9bd99a64bbedb0930e29ed4dcc7897" title=" " alt="" coords="2120,380,2284,407"/>
<area shape="rect" href="kvm__main_8c.html#ac4ce014a99262ed5672a102c6d2ffdbd" title=" " alt="" coords="2120,431,2284,457"/>
<area shape="rect" href="kvm__main_8c.html#afdb5cea8958921b2ea9bd3a29cf9d7a6" title=" " alt="" coords="2122,481,2282,508"/>
<area shape="rect" href="kvm__main_8c.html#a192569033b972982f6b53e13666ef82b" title=" " alt="" coords="2099,532,2305,559"/>
</map>
</div>

</div>
</div>
<a id="aa4fb1a66a2bc67f8699e8ddafdd4b1e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4fb1a66a2bc67f8699e8ddafdd4b1e8">&#9670;&nbsp;</a></span>kvm_tdp_mmu_zap_leafs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_tdp_mmu_zap_leafs </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfn_t&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfn_t&#160;</td>
          <td class="paramname"><em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>flush</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l00820">820</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;{</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__mmu__page.html">kvm_mmu_page</a> *root;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    lockdep_assert_held_write(&amp;kvm-&gt;mmu_lock);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <a class="code" href="tdp__mmu_8c.html#a380373dbae26c3723631c3eebccf47db">for_each_tdp_mmu_root_yield_safe</a>(kvm, root)</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        flush = <a class="code" href="tdp__mmu_8c.html#a182ff449fd87f9503148e88c33cff5ac">tdp_mmu_zap_leafs</a>(kvm, root, start, end, <span class="keyword">true</span>, flush);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">return</span> flush;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_aa4fb1a66a2bc67f8699e8ddafdd4b1e8_cgraph.png" border="0" usemap="#atdp__mmu_8h_aa4fb1a66a2bc67f8699e8ddafdd4b1e8_cgraph" alt=""/></div>
<map name="atdp__mmu_8h_aa4fb1a66a2bc67f8699e8ddafdd4b1e8_cgraph" id="atdp__mmu_8h_aa4fb1a66a2bc67f8699e8ddafdd4b1e8_cgraph">
<area shape="rect" title=" " alt="" coords="5,994,195,1020"/>
<area shape="rect" href="tdp__mmu_8c.html#a182ff449fd87f9503148e88c33cff5ac" title=" " alt="" coords="243,994,396,1020"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="1995,319,2094,346"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="1957,740,2132,767"/>
<area shape="rect" href="tdp__mmu_8c.html#abc2d73db35961f670cedf8ce1206c4d2" title=" " alt="" coords="448,824,657,851"/>
<area shape="rect" href="tdp__mmu_8c.html#af6444812b70d9509539a3fa478cde14d" title=" " alt="" coords="465,994,640,1020"/>
<area shape="rect" href="tdp__mmu_8c.html#ac323268ae26fde5a608d694f4943d476" title=" " alt="" coords="444,1227,661,1254"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="2209,319,2310,346"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="709,707,884,734"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="932,290,1143,316"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="1191,101,1401,142"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="1463,116,1630,143"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="1453,66,1641,92"/>
<area shape="rect" href="kvm__main_8c.html#a7682302871243c20a5dd16214655db15" title=" " alt="" coords="1761,167,1840,194"/>
<area shape="rect" href="kvm__main_8c.html#a9316cc70360fb39d920d5c76a2e41f35" title=" " alt="" coords="1713,116,1889,143"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1724,66,1877,92"/>
<area shape="rect" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a" title=" " alt="" coords="723,994,870,1020"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="956,522,1119,548"/>
<area shape="rect" href="spte_8h.html#ad52bae526742289dbd54348dfa55310b" title=" " alt="" coords="1480,994,1613,1020"/>
<area shape="rect" href="tdp__iter_8h.html#a74cc1f032b50c7c6c64ded8866deb4a4" title=" " alt="" coords="1449,1044,1644,1071"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="1967,497,2122,538"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="1221,766,1371,792"/>
<area shape="rect" href="spte_8h.html#a16669248c64937ddec714d855609cacb" title=" " alt="" coords="1479,1095,1614,1122"/>
<area shape="rect" href="spte_8h.html#a0726c9cf54d23a373533a0833aaf979c" title=" " alt="" coords="1243,522,1349,548"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="1239,867,1353,894"/>
<area shape="rect" href="kvm__main_8c.html#ad88d3f7ece0c0ad7dce0c296133beccb" title=" " alt="" coords="1209,167,1383,194"/>
<area shape="rect" href="kvm__main_8c.html#a3617d51882e6aba0abae53c0bf922873" title=" " alt="" coords="1225,218,1367,244"/>
<area shape="rect" href="mmu_8h.html#a9d589fd96a814e43fc146f83dc5d5f73" title=" " alt="" coords="1205,319,1387,346"/>
<area shape="rect" href="tdp__iter_8c.html#ae565103c187af07e69eb2f29b180b977" title=" " alt="" coords="1232,420,1360,447"/>
<area shape="rect" href="spte_8h.html#a88a720d39abac3aee2f63e03a20e8abd" title=" " alt="" coords="1497,471,1596,498"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="2199,914,2320,940"/>
<area shape="rect" href="mmu__internal_8h.html#a993d31328977f0bf21610ad74fa55a79" title=" " alt="" coords="1461,791,1633,818"/>
<area shape="rect" href="tdp__iter_8h.html#ae1b8feffcbd421cbcb6a40cd57abf768" title=" " alt="" coords="1451,892,1642,919"/>
<area shape="rect" href="tdp__iter_8h.html#a2138ed5465b3552439c1ad55ee1bc6d1" title=" " alt="" coords="1703,893,1898,934"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="1497,842,1597,868"/>
<area shape="rect" href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279" title=" " alt="" coords="1463,624,1630,665"/>
<area shape="rect" href="tdp__mmu_8c.html#a401c07c0503d3fc2c62b9a8a06096686" title=" " alt="" coords="1470,690,1623,716"/>
<area shape="rect" href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac" title=" " alt="" coords="1718,791,1883,818"/>
<area shape="rect" href="tdp__iter_8h.html#acce3a5afd04a68fc666c32e91d8c1770" title=" " alt="" coords="1696,1024,1905,1051"/>
<area shape="rect" href="tdp__iter_8h.html#ae00f2a54e0e899c2f169396a9c10d223" title=" " alt="" coords="1703,958,1898,1000"/>
<area shape="rect" href="spte_8c.html#a11de60840b247621debae854aea928db" title=" " alt="" coords="1961,966,2128,992"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="2180,1019,2339,1046"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="1735,842,1866,868"/>
<area shape="rect" href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b" title=" " alt="" coords="1731,631,1870,658"/>
<area shape="rect" href="tdp__mmu_8c.html#a0003da5596a964166d5e46389e7cf4b3" title=" " alt="" coords="1702,690,1899,716"/>
<area shape="rect" href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8" title=" " alt="" coords="1692,1075,1909,1102"/>
<area shape="rect" href="spte_8h.html#ad4cab344dce7557c80f815d4dc072deb" title=" " alt="" coords="1707,522,1894,548"/>
<area shape="rect" href="kvm__main_8c.html#a05228520c714138c61d76bfbc12c162c" title=" " alt="" coords="1455,167,1639,194"/>
<area shape="rect" href="kvm__main_8c.html#adb6ddc9dc8c5e447e04b1be97543f347" title=" " alt="" coords="1469,218,1624,244"/>
<area shape="rect" href="mmu_8h.html#a6555cf2d510d04ae19bee154d166f778" title=" " alt="" coords="719,1227,875,1254"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_aa4fb1a66a2bc67f8699e8ddafdd4b1e8_icgraph.png" border="0" usemap="#atdp__mmu_8h_aa4fb1a66a2bc67f8699e8ddafdd4b1e8_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_aa4fb1a66a2bc67f8699e8ddafdd4b1e8_icgraph" id="atdp__mmu_8h_aa4fb1a66a2bc67f8699e8ddafdd4b1e8_icgraph">
<area shape="rect" title=" " alt="" coords="2076,278,2265,305"/>
<area shape="rect" href="mmu_8c.html#a8b2588158566c9bb798cdb77760e6446" title=" " alt="" coords="1875,278,2028,305"/>
<area shape="rect" href="x86_8c.html#ac280f3f33408b1fead3c38127a2ab3e9" title=" " alt="" coords="1653,100,1803,141"/>
<area shape="rect" href="x86_8c.html#ab61af196de8a3705f59d9915b5eb1a0e" title=" " alt="" coords="1629,243,1827,284"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="1658,313,1798,339"/>
<area shape="rect" href="mtrr_8c.html#aca604775fbcfad49bfaf9441fc2253dc" title=" " alt="" coords="1677,465,1779,491"/>
<area shape="rect" href="x86_8c.html#ae1ffb1252c0aa966c6d94279766427ca" title=" " alt="" coords="1353,5,1543,47"/>
<area shape="rect" href="x86_8c.html#a613f1a822aa2ffa29a32341ec8a92913" title=" " alt="" coords="1359,71,1537,112"/>
<area shape="rect" href="hyperv_8c.html#a9eaaad1dfbff166c751e725c9fcf73b6" title=" " alt="" coords="1370,137,1526,163"/>
<area shape="rect" href="x86_8c.html#ae3d9929c9a77fa2c710befa0a784d4c6" title=" " alt="" coords="1083,5,1242,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="865,13,989,39"/>
<area shape="rect" href="hyperv_8c.html#addb1696255847fad41e6cbadd2e31f57" title=" " alt="" coords="1105,103,1220,130"/>
<area shape="rect" href="hyperv_8c.html#a98568f4f9b61af590e833d5f4a127c68" title=" " alt="" coords="870,67,985,94"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="647,74,781,101"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,99,584,126"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,339,339,366"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,289,101,315"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,339,115,366"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,390,116,417"/>
<area shape="rect" href="x86_8c.html#a541cd35068f221456141f8798a1ab7c9" title=" " alt="" coords="1315,191,1581,218"/>
<area shape="rect" href="x86_8c.html#aab788793558a6c5c0cdc2e3ec840ebf6" title=" " alt="" coords="1369,243,1527,284"/>
<area shape="rect" href="vfio_8c.html#a0f8a9bc6a328c121266b7bedf8ccbe28" title=" " alt="" coords="1059,191,1267,218"/>
<area shape="rect" href="vfio_8c.html#a72ebd436cdee24ef38504201f2d8552c" title=" " alt="" coords="857,118,997,145"/>
<area shape="rect" href="vfio_8c.html#a69f95fca834d8d52cbb826dec545bbb9" title=" " alt="" coords="859,169,995,195"/>
<area shape="rect" href="vfio_8c.html#a0f0458c9f09300055baa0c892a2fbc29" title=" " alt="" coords="859,219,996,246"/>
<area shape="rect" href="vfio_8c.html#a8ad4a98a112c210e854931feaef8bd63" title=" " alt="" coords="646,162,782,189"/>
<area shape="rect" href="vfio_8c.html#a6e1f4ba2cd918c03e22262aa0019af12" title=" " alt="" coords="416,162,555,189"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="1415,313,1481,339"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="1395,371,1501,398"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="1103,270,1222,297"/>
<area shape="rect" href="smm_8c.html#a0943012ff008c7999f582998f0f9167a" title=" " alt="" coords="632,434,796,461"/>
<area shape="rect" href="x86_8c.html#a86812e4228865668099921709e1c2f26" title=" " alt="" coords="1099,371,1226,398"/>
<area shape="rect" href="vmx_8c.html#ac02e59b539f5874eaeb4b12568e9d0dd" title=" " alt="" coords="1103,422,1223,449"/>
<area shape="rect" href="x86_8c.html#abe99237e5fd6f33407bc30aa2647e0db" title=" " alt="" coords="1116,473,1209,499"/>
<area shape="rect" href="smm_8c.html#a0c50da2c4874eda6d67766974a476019" title=" " alt="" coords="1062,523,1263,550"/>
<area shape="rect" href="svm_8c.html#af2ee2a03530f5b7a02a127d8b779d2ae" title=" " alt="" coords="844,270,1011,297"/>
<area shape="rect" href="vmx_8c.html#aa55ace9429e6e94042e6602716222805" title=" " alt="" coords="885,434,970,461"/>
<area shape="rect" href="smm_8c.html#ae0136cd1aa193ad29565961ea839a99a" title=" " alt="" coords="855,510,1000,537"/>
<area shape="rect" href="mtrr_8c.html#a2b95f238c68e317e64e57d06f2a698dd" title=" " alt="" coords="413,390,558,417"/>
</map>
</div>

</div>
</div>
<a id="a381e22ee819864cf1fd726479a76b6c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a381e22ee819864cf1fd726479a76b6c7">&#9670;&nbsp;</a></span>kvm_tdp_mmu_zap_sp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_tdp_mmu_zap_sp </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__mmu__page.html">kvm_mmu_page</a> *&#160;</td>
          <td class="paramname"><em>sp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tdp__mmu_8c_source.html#l00752">752</a> of file <a class="el" href="tdp__mmu_8c_source.html">tdp_mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;{</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    u64 old_spte;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">     * This helper intentionally doesn&#39;t allow zapping a root shadow page,</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">     * which doesn&#39;t have a parent page table and thus no associated entry.</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">if</span> (WARN_ON_ONCE(!sp-&gt;<a class="code" href="structkvm__mmu__page.html#a354e43de3a7ea16fee41005505982422">ptep</a>))</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    old_spte = <a class="code" href="tdp__iter_8h.html#ae1b8feffcbd421cbcb6a40cd57abf768">kvm_tdp_mmu_read_spte</a>(sp-&gt;<a class="code" href="structkvm__mmu__page.html#a354e43de3a7ea16fee41005505982422">ptep</a>);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordflow">if</span> (WARN_ON_ONCE(!<a class="code" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686">is_shadow_present_pte</a>(old_spte)))</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <a class="code" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a">tdp_mmu_set_spte</a>(kvm, <a class="code" href="mmu__internal_8h.html#a993d31328977f0bf21610ad74fa55a79">kvm_mmu_page_as_id</a>(sp), sp-&gt;<a class="code" href="structkvm__mmu__page.html#a354e43de3a7ea16fee41005505982422">ptep</a>, old_spte, 0,</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;             sp-&gt;<a class="code" href="structkvm__mmu__page.html#ad833bc48e1885408b2b5c7deca9a6232">gfn</a>, sp-&gt;<a class="code" href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">role</a>.level + 1);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;}</div>
<div class="ttc" id="ammu__internal_8h_html_a993d31328977f0bf21610ad74fa55a79"><div class="ttname"><a href="mmu__internal_8h.html#a993d31328977f0bf21610ad74fa55a79">kvm_mmu_page_as_id</a></div><div class="ttdeci">static int kvm_mmu_page_as_id(struct kvm_mmu_page *sp)</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00143">mmu_internal.h:143</a></div></div>
<div class="ttc" id="astructkvm__mmu__page_html_a354e43de3a7ea16fee41005505982422"><div class="ttname"><a href="structkvm__mmu__page.html#a354e43de3a7ea16fee41005505982422">kvm_mmu_page::ptep</a></div><div class="ttdeci">tdp_ptep_t ptep</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00107">mmu_internal.h:107</a></div></div>
<div class="ttc" id="atdp__iter_8h_html_ae1b8feffcbd421cbcb6a40cd57abf768"><div class="ttname"><a href="tdp__iter_8h.html#ae1b8feffcbd421cbcb6a40cd57abf768">kvm_tdp_mmu_read_spte</a></div><div class="ttdeci">static u64 kvm_tdp_mmu_read_spte(tdp_ptep_t sptep)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__iter_8h_source.html#l00017">tdp_iter.h:17</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_a1880e056251c1743579f5c7a25ccad1a"><div class="ttname"><a href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a">tdp_mmu_set_spte</a></div><div class="ttdeci">static u64 tdp_mmu_set_spte(struct kvm *kvm, int as_id, tdp_ptep_t sptep, u64 old_spte, u64 new_spte, gfn_t gfn, int level)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00592">tdp_mmu.c:592</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a381e22ee819864cf1fd726479a76b6c7_cgraph.png" border="0" usemap="#atdp__mmu_8h_a381e22ee819864cf1fd726479a76b6c7_cgraph" alt=""/></div>
<map name="atdp__mmu_8h_a381e22ee819864cf1fd726479a76b6c7_cgraph" id="atdp__mmu_8h_a381e22ee819864cf1fd726479a76b6c7_cgraph">
<area shape="rect" title=" " alt="" coords="5,904,177,931"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="2020,359,2195,385"/>
<area shape="rect" href="mmu__internal_8h.html#a993d31328977f0bf21610ad74fa55a79" title=" " alt="" coords="871,993,1043,1020"/>
<area shape="rect" href="tdp__iter_8h.html#ae1b8feffcbd421cbcb6a40cd57abf768" title=" " alt="" coords="862,1044,1053,1071"/>
<area shape="rect" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a" title=" " alt="" coords="225,719,372,745"/>
<area shape="rect" href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac" title=" " alt="" coords="1125,993,1290,1020"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="420,521,583,548"/>
<area shape="rect" href="spte_8h.html#ad52bae526742289dbd54348dfa55310b" title=" " alt="" coords="891,841,1024,868"/>
<area shape="rect" href="tdp__iter_8h.html#a74cc1f032b50c7c6c64ded8866deb4a4" title=" " alt="" coords="860,355,1055,381"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="1366,145,1521,186"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="646,600,797,627"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="1394,211,1493,237"/>
<area shape="rect" href="spte_8h.html#a16669248c64937ddec714d855609cacb" title=" " alt="" coords="1376,479,1511,505"/>
<area shape="rect" href="spte_8h.html#a0726c9cf54d23a373533a0833aaf979c" title=" " alt="" coords="1391,544,1496,571"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="665,752,778,779"/>
<area shape="rect" href="kvm__main_8c.html#ad88d3f7ece0c0ad7dce0c296133beccb" title=" " alt="" coords="635,803,808,829"/>
<area shape="rect" href="kvm__main_8c.html#a3617d51882e6aba0abae53c0bf922873" title=" " alt="" coords="650,701,793,728"/>
<area shape="rect" href="mmu_8h.html#a9d589fd96a814e43fc146f83dc5d5f73" title=" " alt="" coords="631,369,812,396"/>
<area shape="rect" href="tdp__iter_8c.html#ae565103c187af07e69eb2f29b180b977" title=" " alt="" coords="657,253,785,280"/>
<area shape="rect" href="spte_8h.html#a88a720d39abac3aee2f63e03a20e8abd" title=" " alt="" coords="908,300,1007,327"/>
<area shape="rect" href="spte_8h.html#a4d0035385de92ed42a75324a2fb96d49" title=" " alt="" coords="1623,308,1744,335"/>
<area shape="rect" href="tdp__iter_8h.html#a2138ed5465b3552439c1ad55ee1bc6d1" title=" " alt="" coords="1110,413,1305,454"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="907,623,1007,649"/>
<area shape="rect" href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279" title=" " alt="" coords="874,725,1041,766"/>
<area shape="rect" href="tdp__mmu_8c.html#a401c07c0503d3fc2c62b9a8a06096686" title=" " alt="" coords="881,791,1034,817"/>
<area shape="rect" href="tdp__iter_8h.html#acce3a5afd04a68fc666c32e91d8c1770" title=" " alt="" coords="1103,296,1312,323"/>
<area shape="rect" href="tdp__iter_8h.html#ae00f2a54e0e899c2f169396a9c10d223" title=" " alt="" coords="1110,347,1305,389"/>
<area shape="rect" href="spte_8c.html#a11de60840b247621debae854aea928db" title=" " alt="" coords="1360,359,1527,385"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="1633,207,1734,233"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="1604,460,1763,487"/>
<area shape="rect" href="spte_8h.html#a976cddc84d935189584bdce94d4805fd" title=" " alt="" coords="1840,460,1972,487"/>
<area shape="rect" href="spte_8h.html#aeb796217990be75433fd1430d5958184" title=" " alt="" coords="1599,359,1768,385"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="1142,623,1273,649"/>
<area shape="rect" href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b" title=" " alt="" coords="1138,732,1277,759"/>
<area shape="rect" href="tdp__mmu_8c.html#a0003da5596a964166d5e46389e7cf4b3" title=" " alt="" coords="1109,787,1306,813"/>
<area shape="rect" href="mmu_8c.html#a2fba0b2dd67723bfbc4349ea7c8e019a" title=" " alt="" coords="1130,838,1285,879"/>
<area shape="rect" href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8" title=" " alt="" coords="1575,511,1792,537"/>
<area shape="rect" href="spte_8h.html#ad4cab344dce7557c80f815d4dc072deb" title=" " alt="" coords="1590,561,1777,588"/>
<area shape="rect" href="kvm__main_8c.html#a05228520c714138c61d76bfbc12c162c" title=" " alt="" coords="865,943,1049,969"/>
<area shape="rect" href="kvm__main_8c.html#aefbc4e0cbda09938de01d0afb0c06d59" title=" " alt="" coords="1114,924,1301,951"/>
<area shape="rect" href="kvm__main_8c.html#adb6ddc9dc8c5e447e04b1be97543f347" title=" " alt="" coords="880,892,1035,919"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tdp__mmu_8h_a381e22ee819864cf1fd726479a76b6c7_icgraph.png" border="0" usemap="#atdp__mmu_8h_a381e22ee819864cf1fd726479a76b6c7_icgraph" alt=""/></div>
<map name="atdp__mmu_8h_a381e22ee819864cf1fd726479a76b6c7_icgraph" id="atdp__mmu_8h_a381e22ee819864cf1fd726479a76b6c7_icgraph">
<area shape="rect" title=" " alt="" coords="943,13,1115,39"/>
<area shape="rect" href="mmu_8c.html#a85202c8f53b11b1c80f9b6e26210aa9a" title=" " alt="" coords="725,5,895,47"/>
<area shape="rect" href="mmu_8c.html#a2683113dbbf42e73c2b52410f9ef6f84" title=" " alt="" coords="461,5,677,47"/>
<area shape="rect" href="mmu_8c.html#a13148d5065ef27624701afcaa3229983" title=" " alt="" coords="231,13,413,39"/>
<area shape="rect" href="x86_8c.html#a91673b399129921871f11d0752eea8c3" title=" " alt="" coords="5,13,183,39"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
