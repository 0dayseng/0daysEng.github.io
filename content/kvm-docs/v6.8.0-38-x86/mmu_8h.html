<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KVM: arch/x86/kvm/mmu.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KVM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_ea9599923402ca8ab47fc3e495999dea.html">arch</a></li><li class="navelem"><a class="el" href="dir_c21774f8bc9f0de15163573e5f5fa2b5.html">x86</a></li><li class="navelem"><a class="el" href="dir_fde450fd4b58e2560c53a1e73bfa4d6d.html">kvm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">mmu.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/kvm_host.h&gt;</code><br />
<code>#include &quot;<a class="el" href="kvm__cache__regs_8h_source.html">kvm_cache_regs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cpuid_8h_source.html">cpuid.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for mmu.h:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h__incl.png" border="0" usemap="#aarch_2x86_2kvm_2mmu_8h" alt=""/></div>
<map name="aarch_2x86_2kvm_2mmu_8h" id="aarch_2x86_2kvm_2mmu_8h">
<area shape="rect" title=" " alt="" coords="12,5,173,32"/>
<area shape="rect" title=" " alt="" coords="25,304,160,331"/>
<area shape="rect" href="kvm__cache__regs_8h.html" title=" " alt="" coords="21,229,164,256"/>
<area shape="rect" href="cpuid_8h.html" title=" " alt="" coords="963,80,1033,107"/>
<area shape="rect" href="x86_8h.html" title=" " alt="" coords="414,155,473,181"/>
<area shape="rect" href="reverse__cpuid_8h.html" title=" " alt="" coords="803,155,929,181"/>
<area shape="rect" title=" " alt="" coords="953,155,1043,181"/>
<area shape="rect" title=" " alt="" coords="1067,155,1195,181"/>
<area shape="rect" title=" " alt="" coords="1219,155,1382,181"/>
<area shape="rect" href="governed__features_8h.html" title=" " alt="" coords="1407,155,1563,181"/>
<area shape="rect" title=" " alt="" coords="240,229,372,256"/>
<area shape="rect" title=" " alt="" coords="396,229,491,256"/>
<area shape="rect" title=" " alt="" coords="515,229,631,256"/>
<area shape="rect" href="kvm__emulate_8h.html" title=" " alt="" coords="655,229,779,256"/>
<area shape="rect" title=" " alt="" coords="593,304,723,331"/>
<area shape="rect" href="fpu_8h.html" title=" " alt="" coords="748,304,803,331"/>
<area shape="rect" title=" " alt="" coords="720,379,831,405"/>
<area shape="rect" title=" " alt="" coords="803,229,929,256"/>
<area shape="rect" title=" " alt="" coords="954,229,1090,256"/>
<area shape="rect" title=" " alt="" coords="1115,229,1257,256"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h__dep__incl.png" border="0" usemap="#aarch_2x86_2kvm_2mmu_8hdep" alt=""/></div>
<map name="aarch_2x86_2kvm_2mmu_8hdep" id="aarch_2x86_2kvm_2mmu_8hdep">
<area shape="rect" title=" " alt="" coords="1081,5,1243,32"/>
<area shape="rect" href="page__track_8c.html" title=" " alt="" coords="5,80,191,121"/>
<area shape="rect" href="debugfs_8c.html" title=" " alt="" coords="215,87,394,114"/>
<area shape="rect" href="spte_8c.html" title=" " alt="" coords="11,177,203,203"/>
<area shape="rect" href="spte_8h.html" title=" " alt="" coords="520,87,713,114"/>
<area shape="rect" href="tdp__iter_8h.html" title=" " alt="" coords="228,169,403,211"/>
<area shape="rect" href="tdp__mmu_8c.html" title=" " alt="" coords="440,259,615,300"/>
<area shape="rect" href="mmu_8c.html" title=" " alt="" coords="643,266,841,293"/>
<area shape="rect" href="emulate_8c.html" title=" " alt="" coords="881,87,1061,114"/>
<area shape="rect" href="mtrr_8c.html" title=" " alt="" coords="1085,87,1239,114"/>
<area shape="rect" href="cpuid_8c.html" title=" " alt="" coords="1263,87,1424,114"/>
<area shape="rect" href="hyperv_8c.html" title=" " alt="" coords="1449,87,1619,114"/>
<area shape="rect" href="svm_2nested_8c.html" title=" " alt="" coords="1643,87,1846,114"/>
<area shape="rect" href="sev_8c.html" title=" " alt="" coords="1871,87,2051,114"/>
<area shape="rect" href="svm_8c.html" title=" " alt="" coords="2075,87,2262,114"/>
<area shape="rect" href="vmx_2nested_8c.html" title=" " alt="" coords="2286,87,2489,114"/>
<area shape="rect" href="vmx_8c.html" title=" " alt="" coords="2513,87,2701,114"/>
<area shape="rect" href="x86_8c.html" title=" " alt="" coords="2725,87,2876,114"/>
<area shape="rect" href="tdp__iter_8c.html" title=" " alt="" coords="233,259,408,300"/>
<area shape="rect" href="tdp__mmu_8h.html" title=" " alt="" coords="529,169,704,211"/>
</map>
</div>
</div>
<p><a href="mmu_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:abe35a3d1495d35a96c74a2254af79a98"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#abe35a3d1495d35a96c74a2254af79a98">PT_WRITABLE_SHIFT</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:abe35a3d1495d35a96c74a2254af79a98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6936959dfa60a9a0c17f9f38a6a7a37"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#aa6936959dfa60a9a0c17f9f38a6a7a37">PT_USER_SHIFT</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:aa6936959dfa60a9a0c17f9f38a6a7a37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a3dca6eee809f72f4c5af9b1adfca58"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a6a3dca6eee809f72f4c5af9b1adfca58">PT_PRESENT_MASK</a>&#160;&#160;&#160;(1ULL &lt;&lt; 0)</td></tr>
<tr class="separator:a6a3dca6eee809f72f4c5af9b1adfca58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8738f5e32b741b402eeb723accb071ed"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a8738f5e32b741b402eeb723accb071ed">PT_WRITABLE_MASK</a>&#160;&#160;&#160;(1ULL &lt;&lt; <a class="el" href="mmu_8h.html#abe35a3d1495d35a96c74a2254af79a98">PT_WRITABLE_SHIFT</a>)</td></tr>
<tr class="separator:a8738f5e32b741b402eeb723accb071ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefe2df12a6601495d0fcf57568247dd2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#aefe2df12a6601495d0fcf57568247dd2">PT_USER_MASK</a>&#160;&#160;&#160;(1ULL &lt;&lt; <a class="el" href="mmu_8h.html#aa6936959dfa60a9a0c17f9f38a6a7a37">PT_USER_SHIFT</a>)</td></tr>
<tr class="separator:aefe2df12a6601495d0fcf57568247dd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6b0d6229164ca0d870dc63f529663c4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#ad6b0d6229164ca0d870dc63f529663c4">PT_PWT_MASK</a>&#160;&#160;&#160;(1ULL &lt;&lt; 3)</td></tr>
<tr class="separator:ad6b0d6229164ca0d870dc63f529663c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab1a0d4a7ef57f71c98a415792f6b75d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#aab1a0d4a7ef57f71c98a415792f6b75d">PT_PCD_MASK</a>&#160;&#160;&#160;(1ULL &lt;&lt; 4)</td></tr>
<tr class="separator:aab1a0d4a7ef57f71c98a415792f6b75d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80c72f4f393192b0490921510fdb41cf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a80c72f4f393192b0490921510fdb41cf">PT_ACCESSED_SHIFT</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:a80c72f4f393192b0490921510fdb41cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d41edb9ba8b401a27f501baadc888f4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a8d41edb9ba8b401a27f501baadc888f4">PT_ACCESSED_MASK</a>&#160;&#160;&#160;(1ULL &lt;&lt; <a class="el" href="mmu_8h.html#a80c72f4f393192b0490921510fdb41cf">PT_ACCESSED_SHIFT</a>)</td></tr>
<tr class="separator:a8d41edb9ba8b401a27f501baadc888f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1956000c2e5226d555a9bc6a0c417b73"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a1956000c2e5226d555a9bc6a0c417b73">PT_DIRTY_SHIFT</a>&#160;&#160;&#160;6</td></tr>
<tr class="separator:a1956000c2e5226d555a9bc6a0c417b73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89aea6a28aa3f8c00475ef4863213092"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a89aea6a28aa3f8c00475ef4863213092">PT_DIRTY_MASK</a>&#160;&#160;&#160;(1ULL &lt;&lt; <a class="el" href="mmu_8h.html#a1956000c2e5226d555a9bc6a0c417b73">PT_DIRTY_SHIFT</a>)</td></tr>
<tr class="separator:a89aea6a28aa3f8c00475ef4863213092"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a735605db3d393cecdbf21f96006757d8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a735605db3d393cecdbf21f96006757d8">PT_PAGE_SIZE_SHIFT</a>&#160;&#160;&#160;7</td></tr>
<tr class="separator:a735605db3d393cecdbf21f96006757d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc8b55babfd3481f98a80a94ac99d0d8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#abc8b55babfd3481f98a80a94ac99d0d8">PT_PAGE_SIZE_MASK</a>&#160;&#160;&#160;(1ULL &lt;&lt; <a class="el" href="mmu_8h.html#a735605db3d393cecdbf21f96006757d8">PT_PAGE_SIZE_SHIFT</a>)</td></tr>
<tr class="separator:abc8b55babfd3481f98a80a94ac99d0d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87343f31f4b21cfb5d52c8a57b941322"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a87343f31f4b21cfb5d52c8a57b941322">PT_PAT_MASK</a>&#160;&#160;&#160;(1ULL &lt;&lt; 7)</td></tr>
<tr class="separator:a87343f31f4b21cfb5d52c8a57b941322"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae00b4c34da6eff280b139aef059c7ec5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#ae00b4c34da6eff280b139aef059c7ec5">PT_GLOBAL_MASK</a>&#160;&#160;&#160;(1ULL &lt;&lt; 8)</td></tr>
<tr class="separator:ae00b4c34da6eff280b139aef059c7ec5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0686cc7b38913946e33e451c245da03"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#aa0686cc7b38913946e33e451c245da03">PT64_NX_SHIFT</a>&#160;&#160;&#160;63</td></tr>
<tr class="separator:aa0686cc7b38913946e33e451c245da03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac65ee46fa9c336ebff6fd0ca5dbe6683"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#ac65ee46fa9c336ebff6fd0ca5dbe6683">PT64_NX_MASK</a>&#160;&#160;&#160;(1ULL &lt;&lt; <a class="el" href="mmu_8h.html#aa0686cc7b38913946e33e451c245da03">PT64_NX_SHIFT</a>)</td></tr>
<tr class="separator:ac65ee46fa9c336ebff6fd0ca5dbe6683"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e9544787a507dbec66037b0d4e1ca53"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a4e9544787a507dbec66037b0d4e1ca53">PT_PAT_SHIFT</a>&#160;&#160;&#160;7</td></tr>
<tr class="separator:a4e9544787a507dbec66037b0d4e1ca53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ec7ef5f3b75f443d9938eb432921a28"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a6ec7ef5f3b75f443d9938eb432921a28">PT_DIR_PAT_SHIFT</a>&#160;&#160;&#160;12</td></tr>
<tr class="separator:a6ec7ef5f3b75f443d9938eb432921a28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3d1dac71ad37a69bdaee7840c689cb6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#aa3d1dac71ad37a69bdaee7840c689cb6">PT_DIR_PAT_MASK</a>&#160;&#160;&#160;(1ULL &lt;&lt; <a class="el" href="mmu_8h.html#a6ec7ef5f3b75f443d9938eb432921a28">PT_DIR_PAT_SHIFT</a>)</td></tr>
<tr class="separator:aa3d1dac71ad37a69bdaee7840c689cb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19051c7c7463cebcb4d2f335e546499c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a19051c7c7463cebcb4d2f335e546499c">PT64_ROOT_5LEVEL</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:a19051c7c7463cebcb4d2f335e546499c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac16f657d0a07511b24afa81de87e2404"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#ac16f657d0a07511b24afa81de87e2404">PT64_ROOT_4LEVEL</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:ac16f657d0a07511b24afa81de87e2404"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adab1bbfa92f696e8cc9db9d464bedfc0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#adab1bbfa92f696e8cc9db9d464bedfc0">PT32_ROOT_LEVEL</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:adab1bbfa92f696e8cc9db9d464bedfc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a922bba5668a44d08bf7c7ba3a5e4fba0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a922bba5668a44d08bf7c7ba3a5e4fba0">PT32E_ROOT_LEVEL</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a922bba5668a44d08bf7c7ba3a5e4fba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2b2735841a03ab0bc8f94560b79cabc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#af2b2735841a03ab0bc8f94560b79cabc">KVM_MMU_CR4_ROLE_BITS</a></td></tr>
<tr class="separator:af2b2735841a03ab0bc8f94560b79cabc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4494c146d00d9c2c6b0d99e41da47b51"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a4494c146d00d9c2c6b0d99e41da47b51">KVM_MMU_CR0_ROLE_BITS</a>&#160;&#160;&#160;(X86_CR0_PG | X86_CR0_WP)</td></tr>
<tr class="separator:a4494c146d00d9c2c6b0d99e41da47b51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37feaff7b43230c2bf20095e0e78b065"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a37feaff7b43230c2bf20095e0e78b065">KVM_MMU_EFER_ROLE_BITS</a>&#160;&#160;&#160;(EFER_LME | EFER_NX)</td></tr>
<tr class="separator:a37feaff7b43230c2bf20095e0e78b065"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e6b88ba1c393126e54e78a220a4473f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a1e6b88ba1c393126e54e78a220a4473f">tdp_mmu_enabled</a>&#160;&#160;&#160;false</td></tr>
<tr class="separator:a1e6b88ba1c393126e54e78a220a4473f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a20a41b0166b13eb22b15786964f5de9d"><td class="memItemLeft" align="right" valign="top">static __always_inline u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a20a41b0166b13eb22b15786964f5de9d">rsvd_bits</a> (int s, int e)</td></tr>
<tr class="separator:a20a41b0166b13eb22b15786964f5de9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6555cf2d510d04ae19bee154d166f778"><td class="memItemLeft" align="right" valign="top">static gfn_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a6555cf2d510d04ae19bee154d166f778">kvm_mmu_max_gfn</a> (void)</td></tr>
<tr class="separator:a6555cf2d510d04ae19bee154d166f778"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4a3e49f63d0517b2694a9d8f72cb79a"><td class="memItemLeft" align="right" valign="top">static u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#ab4a3e49f63d0517b2694a9d8f72cb79a">kvm_get_shadow_phys_bits</a> (void)</td></tr>
<tr class="separator:ab4a3e49f63d0517b2694a9d8f72cb79a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80f2cd338ffdc70a83e10eda040387a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a80f2cd338ffdc70a83e10eda040387a5">kvm_mmu_set_mmio_spte_mask</a> (u64 mmio_value, u64 mmio_mask, u64 access_mask)</td></tr>
<tr class="separator:a80f2cd338ffdc70a83e10eda040387a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24f526505004d8f749e0e069c2efd17a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a24f526505004d8f749e0e069c2efd17a">kvm_mmu_set_me_spte_mask</a> (u64 me_value, u64 me_mask)</td></tr>
<tr class="separator:a24f526505004d8f749e0e069c2efd17a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cb3688f8c5783569f001a056f7d93d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a5cb3688f8c5783569f001a056f7d93d0">kvm_mmu_set_ept_masks</a> (bool has_ad_bits, bool has_exec_only)</td></tr>
<tr class="separator:a5cb3688f8c5783569f001a056f7d93d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88ade1c65bbbb9b25a78e82003a71a7c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a88ade1c65bbbb9b25a78e82003a71a7c">kvm_init_mmu</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a88ade1c65bbbb9b25a78e82003a71a7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00f26353045c597f6a49cdd4f239f548"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a00f26353045c597f6a49cdd4f239f548">kvm_init_shadow_npt_mmu</a> (struct kvm_vcpu *vcpu, unsigned long cr0, unsigned long cr4, u64 efer, gpa_t nested_cr3)</td></tr>
<tr class="separator:a00f26353045c597f6a49cdd4f239f548"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdc5c43e54aca7335b2a438095cb98bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#abdc5c43e54aca7335b2a438095cb98bf">kvm_init_shadow_ept_mmu</a> (struct kvm_vcpu *vcpu, bool execonly, int huge_page_level, bool accessed_dirty, gpa_t new_eptp)</td></tr>
<tr class="separator:abdc5c43e54aca7335b2a438095cb98bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fc0b881dcc20a927ca42693043c1eef"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a8fc0b881dcc20a927ca42693043c1eef">kvm_can_do_async_pf</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a8fc0b881dcc20a927ca42693043c1eef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d6f2ec540cbdb86e2594df2e4d453c2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a4d6f2ec540cbdb86e2594df2e4d453c2">kvm_handle_page_fault</a> (struct kvm_vcpu *vcpu, u64 error_code, u64 fault_address, char *insn, int insn_len)</td></tr>
<tr class="separator:a4d6f2ec540cbdb86e2594df2e4d453c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abba0adca082144a9c30aaceebfa82685"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#abba0adca082144a9c30aaceebfa82685">__kvm_mmu_refresh_passthrough_bits</a> (struct kvm_vcpu *vcpu, struct kvm_mmu *mmu)</td></tr>
<tr class="separator:abba0adca082144a9c30aaceebfa82685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a475bd00898314bb9378d8e4306aa7874"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a475bd00898314bb9378d8e4306aa7874">kvm_mmu_load</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a475bd00898314bb9378d8e4306aa7874"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bf770a114656f992dd1c0aff57fe9e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a7bf770a114656f992dd1c0aff57fe9e5">kvm_mmu_unload</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a7bf770a114656f992dd1c0aff57fe9e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1e7a67c950b9d5bc46f7aaed6b5367c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#aa1e7a67c950b9d5bc46f7aaed6b5367c">kvm_mmu_free_obsolete_roots</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:aa1e7a67c950b9d5bc46f7aaed6b5367c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab00408fb7acb0199782175051f59add6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#ab00408fb7acb0199782175051f59add6">kvm_mmu_sync_roots</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ab00408fb7acb0199782175051f59add6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d448c19a18bd089be4c218a86d523be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a6d448c19a18bd089be4c218a86d523be">kvm_mmu_sync_prev_roots</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a6d448c19a18bd089be4c218a86d523be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8f7c681ee8bd25bb3fcb5b3ff39f4e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#ad8f7c681ee8bd25bb3fcb5b3ff39f4e8">kvm_mmu_track_write</a> (struct kvm_vcpu *vcpu, gpa_t gpa, const u8 *new, int bytes)</td></tr>
<tr class="separator:ad8f7c681ee8bd25bb3fcb5b3ff39f4e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0e194ecad859add3d639850021f8b16"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#ab0e194ecad859add3d639850021f8b16">kvm_mmu_reload</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ab0e194ecad859add3d639850021f8b16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a573994365668ea7cc32c0858f96d8e64"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a573994365668ea7cc32c0858f96d8e64">kvm_get_pcid</a> (struct kvm_vcpu *vcpu, gpa_t cr3)</td></tr>
<tr class="separator:a573994365668ea7cc32c0858f96d8e64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1aee9e6e5e9d85568a734930c8a084a"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#ad1aee9e6e5e9d85568a734930c8a084a">kvm_get_active_pcid</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ad1aee9e6e5e9d85568a734930c8a084a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e90e07b62b255d32f17cdb19ba6d1d1"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a4e90e07b62b255d32f17cdb19ba6d1d1">kvm_get_active_cr3_lam_bits</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a4e90e07b62b255d32f17cdb19ba6d1d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4afa08892909b9040fa9da2f3a55f74"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#ae4afa08892909b9040fa9da2f3a55f74">kvm_mmu_load_pgd</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ae4afa08892909b9040fa9da2f3a55f74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0bba48799c436cc6749fdaa0d95201b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#ae0bba48799c436cc6749fdaa0d95201b">kvm_mmu_refresh_passthrough_bits</a> (struct kvm_vcpu *vcpu, struct kvm_mmu *mmu)</td></tr>
<tr class="separator:ae0bba48799c436cc6749fdaa0d95201b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad96f3e909292ae5f41a4ad1f07c98360"><td class="memItemLeft" align="right" valign="top">static u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#ad96f3e909292ae5f41a4ad1f07c98360">permission_fault</a> (struct kvm_vcpu *vcpu, struct kvm_mmu *mmu, unsigned pte_access, unsigned pte_pkey, u64 access)</td></tr>
<tr class="separator:ad96f3e909292ae5f41a4ad1f07c98360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaac7b37c7c917c491331020726730c02"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#aaac7b37c7c917c491331020726730c02">__kvm_mmu_honors_guest_mtrrs</a> (bool vm_has_noncoherent_dma)</td></tr>
<tr class="separator:aaac7b37c7c917c491331020726730c02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11c275bc8cfad409c0681f0c953ebcae"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a11c275bc8cfad409c0681f0c953ebcae">kvm_mmu_honors_guest_mtrrs</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a11c275bc8cfad409c0681f0c953ebcae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b2588158566c9bb798cdb77760e6446"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a8b2588158566c9bb798cdb77760e6446">kvm_zap_gfn_range</a> (struct kvm *kvm, gfn_t gfn_start, gfn_t gfn_end)</td></tr>
<tr class="separator:a8b2588158566c9bb798cdb77760e6446"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf66d07a95ce1eb3c5c1e7766f0aacda"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#adf66d07a95ce1eb3c5c1e7766f0aacda">kvm_arch_write_log_dirty</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:adf66d07a95ce1eb3c5c1e7766f0aacda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13148d5065ef27624701afcaa3229983"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a13148d5065ef27624701afcaa3229983">kvm_mmu_post_init_vm</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a13148d5065ef27624701afcaa3229983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eb6816fb27d7ccc1d38119ddc8ab6c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a1eb6816fb27d7ccc1d38119ddc8ab6c1">kvm_mmu_pre_destroy_vm</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a1eb6816fb27d7ccc1d38119ddc8ab6c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89c85e383e0f6dfe6f91f5c1dd25e522"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a89c85e383e0f6dfe6f91f5c1dd25e522">kvm_shadow_root_allocated</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a89c85e383e0f6dfe6f91f5c1dd25e522"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9867cac2f7c0a763088b2112951b5ac"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#ac9867cac2f7c0a763088b2112951b5ac">kvm_memslots_have_rmaps</a> (struct kvm *kvm)</td></tr>
<tr class="separator:ac9867cac2f7c0a763088b2112951b5ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41b79b63cae220349d8eb5a54f047939"><td class="memItemLeft" align="right" valign="top">static gfn_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a41b79b63cae220349d8eb5a54f047939">gfn_to_index</a> (gfn_t gfn, gfn_t base_gfn, int level)</td></tr>
<tr class="separator:a41b79b63cae220349d8eb5a54f047939"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a1851ad21795102ec5d6f395525ff78"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a4a1851ad21795102ec5d6f395525ff78">__kvm_mmu_slot_lpages</a> (struct kvm_memory_slot *slot, unsigned long npages, int level)</td></tr>
<tr class="separator:a4a1851ad21795102ec5d6f395525ff78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5811b24582939343961d6699f639ddc7"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a5811b24582939343961d6699f639ddc7">kvm_mmu_slot_lpages</a> (struct kvm_memory_slot *slot, int level)</td></tr>
<tr class="separator:a5811b24582939343961d6699f639ddc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d589fd96a814e43fc146f83dc5d5f73"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a9d589fd96a814e43fc146f83dc5d5f73">kvm_update_page_stats</a> (struct kvm *kvm, int level, int count)</td></tr>
<tr class="separator:a9d589fd96a814e43fc146f83dc5d5f73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa47e04c0739bc10134b493cc8bfb0dc6"><td class="memItemLeft" align="right" valign="top">gpa_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#aa47e04c0739bc10134b493cc8bfb0dc6">translate_nested_gpa</a> (struct kvm_vcpu *vcpu, gpa_t gpa, u64 access, struct <a class="el" href="structx86__exception.html">x86_exception</a> *exception)</td></tr>
<tr class="separator:aa47e04c0739bc10134b493cc8bfb0dc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a937b5147c498fb7bdafb70240b735089"><td class="memItemLeft" align="right" valign="top">static gpa_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a937b5147c498fb7bdafb70240b735089">kvm_translate_gpa</a> (struct kvm_vcpu *vcpu, struct kvm_mmu *mmu, gpa_t gpa, u64 access, struct <a class="el" href="structx86__exception.html">x86_exception</a> *exception)</td></tr>
<tr class="separator:a937b5147c498fb7bdafb70240b735089"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad1f35c581f53d7ebf9ada1be6d5531ad"><td class="memItemLeft" align="right" valign="top">bool <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#ad1f35c581f53d7ebf9ada1be6d5531ad">enable_mmio_caching</a></td></tr>
<tr class="separator:ad1f35c581f53d7ebf9ada1be6d5531ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43d89b28f6285b7b34c137f70723565b"><td class="memItemLeft" align="right" valign="top">u8 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmu_8h.html#a43d89b28f6285b7b34c137f70723565b">shadow_phys_bits</a></td></tr>
<tr class="separator:a43d89b28f6285b7b34c137f70723565b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a4494c146d00d9c2c6b0d99e41da47b51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4494c146d00d9c2c6b0d99e41da47b51">&#9670;&nbsp;</a></span>KVM_MMU_CR0_ROLE_BITS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_MMU_CR0_ROLE_BITS&#160;&#160;&#160;(X86_CR0_PG | X86_CR0_WP)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00042">42</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="af2b2735841a03ab0bc8f94560b79cabc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2b2735841a03ab0bc8f94560b79cabc">&#9670;&nbsp;</a></span>KVM_MMU_CR4_ROLE_BITS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_MMU_CR4_ROLE_BITS</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">                   (X86_CR4_PSE | X86_CR4_PAE | X86_CR4_LA57 | \</div>
<div class="line">                   X86_CR4_SMEP | X86_CR4_SMAP | X86_CR4_PKE)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00039">39</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="a37feaff7b43230c2bf20095e0e78b065"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37feaff7b43230c2bf20095e0e78b065">&#9670;&nbsp;</a></span>KVM_MMU_EFER_ROLE_BITS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_MMU_EFER_ROLE_BITS&#160;&#160;&#160;(EFER_LME | EFER_NX)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00043">43</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="adab1bbfa92f696e8cc9db9d464bedfc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adab1bbfa92f696e8cc9db9d464bedfc0">&#9670;&nbsp;</a></span>PT32_ROOT_LEVEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT32_ROOT_LEVEL&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00036">36</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="a922bba5668a44d08bf7c7ba3a5e4fba0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a922bba5668a44d08bf7c7ba3a5e4fba0">&#9670;&nbsp;</a></span>PT32E_ROOT_LEVEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT32E_ROOT_LEVEL&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00037">37</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="ac65ee46fa9c336ebff6fd0ca5dbe6683"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac65ee46fa9c336ebff6fd0ca5dbe6683">&#9670;&nbsp;</a></span>PT64_NX_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT64_NX_MASK&#160;&#160;&#160;(1ULL &lt;&lt; <a class="el" href="mmu_8h.html#aa0686cc7b38913946e33e451c245da03">PT64_NX_SHIFT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00028">28</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="aa0686cc7b38913946e33e451c245da03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0686cc7b38913946e33e451c245da03">&#9670;&nbsp;</a></span>PT64_NX_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT64_NX_SHIFT&#160;&#160;&#160;63</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00027">27</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="ac16f657d0a07511b24afa81de87e2404"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac16f657d0a07511b24afa81de87e2404">&#9670;&nbsp;</a></span>PT64_ROOT_4LEVEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT64_ROOT_4LEVEL&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00035">35</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="a19051c7c7463cebcb4d2f335e546499c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19051c7c7463cebcb4d2f335e546499c">&#9670;&nbsp;</a></span>PT64_ROOT_5LEVEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT64_ROOT_5LEVEL&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00034">34</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="a8d41edb9ba8b401a27f501baadc888f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d41edb9ba8b401a27f501baadc888f4">&#9670;&nbsp;</a></span>PT_ACCESSED_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_ACCESSED_MASK&#160;&#160;&#160;(1ULL &lt;&lt; <a class="el" href="mmu_8h.html#a80c72f4f393192b0490921510fdb41cf">PT_ACCESSED_SHIFT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00020">20</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="a80c72f4f393192b0490921510fdb41cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80c72f4f393192b0490921510fdb41cf">&#9670;&nbsp;</a></span>PT_ACCESSED_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_ACCESSED_SHIFT&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00019">19</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="aa3d1dac71ad37a69bdaee7840c689cb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3d1dac71ad37a69bdaee7840c689cb6">&#9670;&nbsp;</a></span>PT_DIR_PAT_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_DIR_PAT_MASK&#160;&#160;&#160;(1ULL &lt;&lt; <a class="el" href="mmu_8h.html#a6ec7ef5f3b75f443d9938eb432921a28">PT_DIR_PAT_SHIFT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00032">32</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="a6ec7ef5f3b75f443d9938eb432921a28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ec7ef5f3b75f443d9938eb432921a28">&#9670;&nbsp;</a></span>PT_DIR_PAT_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_DIR_PAT_SHIFT&#160;&#160;&#160;12</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00031">31</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="a89aea6a28aa3f8c00475ef4863213092"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89aea6a28aa3f8c00475ef4863213092">&#9670;&nbsp;</a></span>PT_DIRTY_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_DIRTY_MASK&#160;&#160;&#160;(1ULL &lt;&lt; <a class="el" href="mmu_8h.html#a1956000c2e5226d555a9bc6a0c417b73">PT_DIRTY_SHIFT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00022">22</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="a1956000c2e5226d555a9bc6a0c417b73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1956000c2e5226d555a9bc6a0c417b73">&#9670;&nbsp;</a></span>PT_DIRTY_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_DIRTY_SHIFT&#160;&#160;&#160;6</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00021">21</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="ae00b4c34da6eff280b139aef059c7ec5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae00b4c34da6eff280b139aef059c7ec5">&#9670;&nbsp;</a></span>PT_GLOBAL_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_GLOBAL_MASK&#160;&#160;&#160;(1ULL &lt;&lt; 8)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00026">26</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="abc8b55babfd3481f98a80a94ac99d0d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc8b55babfd3481f98a80a94ac99d0d8">&#9670;&nbsp;</a></span>PT_PAGE_SIZE_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_PAGE_SIZE_MASK&#160;&#160;&#160;(1ULL &lt;&lt; <a class="el" href="mmu_8h.html#a735605db3d393cecdbf21f96006757d8">PT_PAGE_SIZE_SHIFT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00024">24</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="a735605db3d393cecdbf21f96006757d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a735605db3d393cecdbf21f96006757d8">&#9670;&nbsp;</a></span>PT_PAGE_SIZE_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_PAGE_SIZE_SHIFT&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00023">23</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="a87343f31f4b21cfb5d52c8a57b941322"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87343f31f4b21cfb5d52c8a57b941322">&#9670;&nbsp;</a></span>PT_PAT_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_PAT_MASK&#160;&#160;&#160;(1ULL &lt;&lt; 7)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00025">25</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="a4e9544787a507dbec66037b0d4e1ca53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e9544787a507dbec66037b0d4e1ca53">&#9670;&nbsp;</a></span>PT_PAT_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_PAT_SHIFT&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00030">30</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="aab1a0d4a7ef57f71c98a415792f6b75d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab1a0d4a7ef57f71c98a415792f6b75d">&#9670;&nbsp;</a></span>PT_PCD_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_PCD_MASK&#160;&#160;&#160;(1ULL &lt;&lt; 4)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00018">18</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="a6a3dca6eee809f72f4c5af9b1adfca58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a3dca6eee809f72f4c5af9b1adfca58">&#9670;&nbsp;</a></span>PT_PRESENT_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_PRESENT_MASK&#160;&#160;&#160;(1ULL &lt;&lt; 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00014">14</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="ad6b0d6229164ca0d870dc63f529663c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6b0d6229164ca0d870dc63f529663c4">&#9670;&nbsp;</a></span>PT_PWT_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_PWT_MASK&#160;&#160;&#160;(1ULL &lt;&lt; 3)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00017">17</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="aefe2df12a6601495d0fcf57568247dd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefe2df12a6601495d0fcf57568247dd2">&#9670;&nbsp;</a></span>PT_USER_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_USER_MASK&#160;&#160;&#160;(1ULL &lt;&lt; <a class="el" href="mmu_8h.html#aa6936959dfa60a9a0c17f9f38a6a7a37">PT_USER_SHIFT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00016">16</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="aa6936959dfa60a9a0c17f9f38a6a7a37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6936959dfa60a9a0c17f9f38a6a7a37">&#9670;&nbsp;</a></span>PT_USER_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_USER_SHIFT&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00012">12</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="a8738f5e32b741b402eeb723accb071ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8738f5e32b741b402eeb723accb071ed">&#9670;&nbsp;</a></span>PT_WRITABLE_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_WRITABLE_MASK&#160;&#160;&#160;(1ULL &lt;&lt; <a class="el" href="mmu_8h.html#abe35a3d1495d35a96c74a2254af79a98">PT_WRITABLE_SHIFT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00015">15</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="abe35a3d1495d35a96c74a2254af79a98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe35a3d1495d35a96c74a2254af79a98">&#9670;&nbsp;</a></span>PT_WRITABLE_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_WRITABLE_SHIFT&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00011">11</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<a id="a1e6b88ba1c393126e54e78a220a4473f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e6b88ba1c393126e54e78a220a4473f">&#9670;&nbsp;</a></span>tdp_mmu_enabled</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define tdp_mmu_enabled&#160;&#160;&#160;false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00276">276</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aaac7b37c7c917c491331020726730c02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaac7b37c7c917c491331020726730c02">&#9670;&nbsp;</a></span>__kvm_mmu_honors_guest_mtrrs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool __kvm_mmu_honors_guest_mtrrs </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>vm_has_noncoherent_dma</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l04609">4609</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;{</div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;<span class="comment">     * If host MTRRs are ignored (shadow_memtype_mask is non-zero), and the</span></div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;<span class="comment">     * VM has non-coherent DMA (DMA doesn&#39;t snoop CPU caches), KVM&#39;s ABI is</span></div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;<span class="comment">     * to honor the memtype from the guest&#39;s MTRRs so that guest accesses</span></div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;<span class="comment">     * to memory that is DMA&#39;d aren&#39;t cached against the guest&#39;s wishes.</span></div>
<div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;<span class="comment">     * Note, KVM may still ultimately ignore guest MTRRs for certain PFNs,</span></div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;<span class="comment">     * e.g. KVM will force UC memtype for host MMIO.</span></div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;    <span class="keywordflow">return</span> vm_has_noncoherent_dma &amp;&amp; <a class="code" href="spte_8c.html#a61bd7ce98c04ee184b3e600f8bbe1712">shadow_memtype_mask</a>;</div>
<div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;}</div>
<div class="ttc" id="aspte_8c_html_a61bd7ce98c04ee184b3e600f8bbe1712"><div class="ttname"><a href="spte_8c.html#a61bd7ce98c04ee184b3e600f8bbe1712">shadow_memtype_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_memtype_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00038">spte.c:38</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_aaac7b37c7c917c491331020726730c02_icgraph.png" border="0" usemap="#ammu_8h_aaac7b37c7c917c491331020726730c02_icgraph" alt=""/></div>
<map name="ammu_8h_aaac7b37c7c917c491331020726730c02_icgraph" id="ammu_8h_aaac7b37c7c917c491331020726730c02_icgraph">
<area shape="rect" title=" " alt="" coords="2359,568,2559,609"/>
<area shape="rect" href="mmu_8h.html#a11c275bc8cfad409c0681f0c953ebcae" title=" " alt="" coords="2119,467,2305,508"/>
<area shape="rect" href="x86_8c.html#ab61af196de8a3705f59d9915b5eb1a0e" title=" " alt="" coords="2113,600,2311,641"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="870,582,1010,609"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="1855,405,2009,431"/>
<area shape="rect" href="mtrr_8c.html#aca604775fbcfad49bfaf9441fc2253dc" title=" " alt="" coords="1881,221,1983,247"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="703,493,770,519"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="684,569,789,595"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="473,619,592,646"/>
<area shape="rect" href="smm_8c.html#a0943012ff008c7999f582998f0f9167a" title=" " alt="" coords="5,417,169,443"/>
<area shape="rect" href="x86_8c.html#a86812e4228865668099921709e1c2f26" title=" " alt="" coords="469,569,596,595"/>
<area shape="rect" href="vmx_8c.html#ac02e59b539f5874eaeb4b12568e9d0dd" title=" " alt="" coords="473,518,593,545"/>
<area shape="rect" href="x86_8c.html#abe99237e5fd6f33407bc30aa2647e0db" title=" " alt="" coords="486,467,579,494"/>
<area shape="rect" href="smm_8c.html#a0c50da2c4874eda6d67766974a476019" title=" " alt="" coords="432,417,633,443"/>
<area shape="rect" href="svm_8c.html#af2ee2a03530f5b7a02a127d8b779d2ae" title=" " alt="" coords="217,619,384,646"/>
<area shape="rect" href="vmx_8c.html#aa55ace9429e6e94042e6602716222805" title=" " alt="" coords="258,493,343,519"/>
<area shape="rect" href="smm_8c.html#ae0136cd1aa193ad29565961ea839a99a" title=" " alt="" coords="228,417,373,443"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="1573,405,1721,431"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="1551,245,1742,271"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="1349,405,1469,431"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="1096,405,1268,431"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="1088,455,1276,482"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="1101,303,1263,330"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="1100,354,1264,381"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="840,227,1040,254"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="891,379,989,406"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="887,430,993,457"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="689,329,785,355"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="841,531,1039,558"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="870,481,1010,507"/>
<area shape="rect" href="smm_8c.html#a5382946234c910e05c6e2c09aff15713" title=" " alt="" coords="863,278,1017,305"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="1324,237,1495,279"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="1325,135,1493,162"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="1101,237,1263,279"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="853,93,1027,119"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="696,93,777,119"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="682,143,791,170"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="681,42,792,69"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="1100,85,1264,111"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="1103,135,1261,162"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="1093,186,1271,213"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="1118,34,1246,61"/>
<area shape="rect" href="mtrr_8c.html#a2b95f238c68e317e64e57d06f2a698dd" title=" " alt="" coords="1574,89,1719,115"/>
<area shape="rect" href="x86_8c.html#a541cd35068f221456141f8798a1ab7c9" title=" " alt="" coords="1799,607,2065,634"/>
<area shape="rect" href="x86_8c.html#aab788793558a6c5c0cdc2e3ec840ebf6" title=" " alt="" coords="1853,659,2011,700"/>
<area shape="rect" href="vfio_8c.html#a0f8a9bc6a328c121266b7bedf8ccbe28" title=" " alt="" coords="1543,662,1751,689"/>
<area shape="rect" href="vfio_8c.html#a72ebd436cdee24ef38504201f2d8552c" title=" " alt="" coords="1339,713,1479,739"/>
<area shape="rect" href="vfio_8c.html#a69f95fca834d8d52cbb826dec545bbb9" title=" " alt="" coords="1341,611,1477,638"/>
<area shape="rect" href="vfio_8c.html#a0f0458c9f09300055baa0c892a2fbc29" title=" " alt="" coords="1341,662,1478,689"/>
<area shape="rect" href="vfio_8c.html#a8ad4a98a112c210e854931feaef8bd63" title=" " alt="" coords="1114,662,1250,689"/>
</map>
</div>

</div>
</div>
<a id="abba0adca082144a9c30aaceebfa82685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abba0adca082144a9c30aaceebfa82685">&#9670;&nbsp;</a></span>__kvm_mmu_refresh_passthrough_bits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __kvm_mmu_refresh_passthrough_bits </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_mmu *&#160;</td>
          <td class="paramname"><em>mmu</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l05284">5284</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;{</div>
<div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> cr0_wp = <a class="code" href="kvm__cache__regs_8h.html#a16b29ca8796e3da212a8faf1b2dc7ff3">kvm_is_cr0_bit_set</a>(vcpu, X86_CR0_WP);</div>
<div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160; </div>
<div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;    BUILD_BUG_ON((<a class="code" href="mmu_8h.html#a4494c146d00d9c2c6b0d99e41da47b51">KVM_MMU_CR0_ROLE_BITS</a> &amp; <a class="code" href="kvm__cache__regs_8h.html#a88f7cbc42fe5bd05205a6cdec3e4f42c">KVM_POSSIBLE_CR0_GUEST_BITS</a>) != X86_CR0_WP);</div>
<div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;    BUILD_BUG_ON((<a class="code" href="mmu_8h.html#af2b2735841a03ab0bc8f94560b79cabc">KVM_MMU_CR4_ROLE_BITS</a> &amp; <a class="code" href="kvm__cache__regs_8h.html#a37a4ebdba5e6c0d9438a0976d5261d36">KVM_POSSIBLE_CR4_GUEST_BITS</a>));</div>
<div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160; </div>
<div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;    <span class="keywordflow">if</span> (is_cr0_wp(mmu) == cr0_wp)</div>
<div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160; </div>
<div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;    mmu-&gt;cpu_role.base.cr0_wp = cr0_wp;</div>
<div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;    <a class="code" href="mmu_8c.html#ac7b31af26c029f185ab41ed060228847">reset_guest_paging_metadata</a>(vcpu, mmu);</div>
<div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;}</div>
<div class="ttc" id="akvm__cache__regs_8h_html_a16b29ca8796e3da212a8faf1b2dc7ff3"><div class="ttname"><a href="kvm__cache__regs_8h.html#a16b29ca8796e3da212a8faf1b2dc7ff3">kvm_is_cr0_bit_set</a></div><div class="ttdeci">static __always_inline bool kvm_is_cr0_bit_set(struct kvm_vcpu *vcpu, unsigned long cr0_bit)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__cache__regs_8h_source.html#l00160">kvm_cache_regs.h:160</a></div></div>
<div class="ttc" id="akvm__cache__regs_8h_html_a37a4ebdba5e6c0d9438a0976d5261d36"><div class="ttname"><a href="kvm__cache__regs_8h.html#a37a4ebdba5e6c0d9438a0976d5261d36">KVM_POSSIBLE_CR4_GUEST_BITS</a></div><div class="ttdeci">#define KVM_POSSIBLE_CR4_GUEST_BITS</div><div class="ttdef"><b>Definition:</b> <a href="kvm__cache__regs_8h_source.html#l00008">kvm_cache_regs.h:8</a></div></div>
<div class="ttc" id="akvm__cache__regs_8h_html_a88f7cbc42fe5bd05205a6cdec3e4f42c"><div class="ttname"><a href="kvm__cache__regs_8h.html#a88f7cbc42fe5bd05205a6cdec3e4f42c">KVM_POSSIBLE_CR0_GUEST_BITS</a></div><div class="ttdeci">#define KVM_POSSIBLE_CR0_GUEST_BITS</div><div class="ttdef"><b>Definition:</b> <a href="kvm__cache__regs_8h_source.html#l00007">kvm_cache_regs.h:7</a></div></div>
<div class="ttc" id="ammu_8c_html_ac7b31af26c029f185ab41ed060228847"><div class="ttname"><a href="mmu_8c.html#ac7b31af26c029f185ab41ed060228847">reset_guest_paging_metadata</a></div><div class="ttdeci">static void reset_guest_paging_metadata(struct kvm_vcpu *vcpu, struct kvm_mmu *mmu)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l05219">mmu.c:5219</a></div></div>
<div class="ttc" id="ammu_8h_html_a4494c146d00d9c2c6b0d99e41da47b51"><div class="ttname"><a href="mmu_8h.html#a4494c146d00d9c2c6b0d99e41da47b51">KVM_MMU_CR0_ROLE_BITS</a></div><div class="ttdeci">#define KVM_MMU_CR0_ROLE_BITS</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00042">mmu.h:42</a></div></div>
<div class="ttc" id="ammu_8h_html_af2b2735841a03ab0bc8f94560b79cabc"><div class="ttname"><a href="mmu_8h.html#af2b2735841a03ab0bc8f94560b79cabc">KVM_MMU_CR4_ROLE_BITS</a></div><div class="ttdeci">#define KVM_MMU_CR4_ROLE_BITS</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00039">mmu.h:39</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_abba0adca082144a9c30aaceebfa82685_cgraph.png" border="0" usemap="#ammu_8h_abba0adca082144a9c30aaceebfa82685_cgraph" alt=""/></div>
<map name="ammu_8h_abba0adca082144a9c30aaceebfa82685_cgraph" id="ammu_8h_abba0adca082144a9c30aaceebfa82685_cgraph">
<area shape="rect" title=" " alt="" coords="5,77,283,104"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a16b29ca8796e3da212a8faf1b2dc7ff3" title=" " alt="" coords="332,27,479,53"/>
<area shape="rect" href="mmu_8c.html#ac7b31af26c029f185ab41ed060228847" title=" " alt="" coords="331,99,480,141"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a5fbb40e1f7661ccfd5accdaef3d8c378" title=" " alt="" coords="563,5,708,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="791,5,984,32"/>
<area shape="rect" href="mmu_8c.html#acf22177805abdc960c48327675111025" title=" " alt="" coords="594,56,677,83"/>
<area shape="rect" href="mmu_8c.html#a7c03a09eaa19dd03710b5221a58f49db" title=" " alt="" coords="528,107,743,133"/>
<area shape="rect" href="mmu_8c.html#a2e6bb9bbf6a14b07e8c12c8926547c04" title=" " alt="" coords="532,157,739,184"/>
<area shape="rect" href="mmu_8c.html#aa8502cc81aa39d5c4631d6208ce15732" title=" " alt="" coords="554,208,717,235"/>
<area shape="rect" href="mmu_8c.html#aca62a749439306019073c5d5e04fe3e9" title=" " alt="" coords="795,56,980,83"/>
<area shape="rect" href="cpuid_8h.html#acf67f5848a2ddd59dc852e37bc330390" title=" " alt="" coords="828,107,947,133"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="810,158,965,199"/>
<area shape="rect" href="mmu_8c.html#a2096473262912949e7dfdbe6f7b7457f" title=" " alt="" coords="1066,5,1189,32"/>
<area shape="rect" href="mmu_8h.html#a20a41b0166b13eb22b15786964f5de9d" title=" " alt="" coords="1087,56,1168,83"/>
<area shape="rect" href="cpuid_8h.html#a786eea4c1fa59be0155455a72125e0ff" title=" " alt="" coords="1271,125,1444,166"/>
<area shape="rect" href="cpuid_8h.html#a72da5444b01d72d935ebc411b99ba166" title=" " alt="" coords="1032,157,1223,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_abba0adca082144a9c30aaceebfa82685_icgraph.png" border="0" usemap="#ammu_8h_abba0adca082144a9c30aaceebfa82685_icgraph" alt=""/></div>
<map name="ammu_8h_abba0adca082144a9c30aaceebfa82685_icgraph" id="ammu_8h_abba0adca082144a9c30aaceebfa82685_icgraph">
<area shape="rect" title=" " alt="" coords="1636,64,1913,91"/>
<area shape="rect" href="mmu_8h.html#ae0bba48799c436cc6749fdaa0d95201b" title=" " alt="" coords="1325,64,1588,91"/>
<area shape="rect" href="mmu_8h.html#ad96f3e909292ae5f41a4ad1f07c98360" title=" " alt="" coords="1147,64,1277,91"/>
<area shape="rect" href="x86_8c.html#a959081b7be4bb67205656d8a1999ddb6" title=" " alt="" coords="919,35,1099,61"/>
<area shape="rect" href="paging__tmpl_8h.html#acb3afde0f06bed4ef5ff00dd8ad8acf1" title=" " alt="" coords="937,89,1081,116"/>
<area shape="rect" href="x86_8c.html#a58700b05b0607c5ff3b515fcb7ed88fa" title=" " alt="" coords="713,23,871,65"/>
<area shape="rect" href="x86_8c.html#a5d51faff82117d36af71fdf38de541f4" title=" " alt="" coords="508,31,665,57"/>
<area shape="rect" href="x86_8c.html#a691d7742446f463af56ba50d3ea90cef" title=" " alt="" coords="271,5,458,32"/>
<area shape="rect" href="x86_8c.html#a7c995e0c9c9dac795da0af090a8e1b91" title=" " alt="" coords="269,56,460,83"/>
<area shape="rect" href="x86_8c.html#a170363aad395e949fddcfd1e6261ee5b" title=" " alt="" coords="5,31,221,57"/>
<area shape="rect" href="x86_8c.html#a5920b07bff7e351a14e1c79f81a8b2d3" title=" " alt="" coords="28,81,199,108"/>
<area shape="rect" href="paging__tmpl_8h.html#a8a3c848b1aae92ef2e683a41f82f314b" title=" " alt="" coords="743,89,841,116"/>
<area shape="rect" href="paging__tmpl_8h.html#a2fcd5acfc877b79f73d44835be14d862" title=" " alt="" coords="747,140,837,167"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="541,140,632,167"/>
</map>
</div>

</div>
</div>
<a id="a4a1851ad21795102ec5d6f395525ff78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a1851ad21795102ec5d6f395525ff78">&#9670;&nbsp;</a></span>__kvm_mmu_slot_lpages()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long __kvm_mmu_slot_lpages </td>
          <td>(</td>
          <td class="paramtype">struct kvm_memory_slot *&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>npages</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00292">292</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;{</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mmu_8h.html#a41b79b63cae220349d8eb5a54f047939">gfn_to_index</a>(slot-&gt;base_gfn + npages - 1,</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                slot-&gt;base_gfn, level) + 1;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div>
<div class="ttc" id="ammu_8h_html_a41b79b63cae220349d8eb5a54f047939"><div class="ttname"><a href="mmu_8h.html#a41b79b63cae220349d8eb5a54f047939">gfn_to_index</a></div><div class="ttdeci">static gfn_t gfn_to_index(gfn_t gfn, gfn_t base_gfn, int level)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00284">mmu.h:284</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a4a1851ad21795102ec5d6f395525ff78_cgraph.png" border="0" usemap="#ammu_8h_a4a1851ad21795102ec5d6f395525ff78_cgraph" alt=""/></div>
<map name="ammu_8h_a4a1851ad21795102ec5d6f395525ff78_cgraph" id="ammu_8h_a4a1851ad21795102ec5d6f395525ff78_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,192,32"/>
<area shape="rect" href="mmu_8h.html#a41b79b63cae220349d8eb5a54f047939" title=" " alt="" coords="240,5,347,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a4a1851ad21795102ec5d6f395525ff78_icgraph.png" border="0" usemap="#ammu_8h_a4a1851ad21795102ec5d6f395525ff78_icgraph" alt=""/></div>
<map name="ammu_8h_a4a1851ad21795102ec5d6f395525ff78_icgraph" id="ammu_8h_a4a1851ad21795102ec5d6f395525ff78_icgraph">
<area shape="rect" title=" " alt="" coords="3129,383,3316,409"/>
<area shape="rect" href="x86_8c.html#a1be4ac58e0429946d83b58f98bfe2301" title=" " alt="" coords="2636,408,2860,435"/>
<area shape="rect" href="mmu_8h.html#a5811b24582939343961d6699f639ddc7" title=" " alt="" coords="2908,331,3081,357"/>
<area shape="rect" href="x86_8c.html#abd6174ba9b312b97d69f36c53aa50e04" title=" " alt="" coords="2915,433,3074,460"/>
<area shape="rect" href="x86_8c.html#a14568e065745512e03b3088070848289" title=" " alt="" coords="2379,401,2584,442"/>
<area shape="rect" href="kvm__main_8c.html#a6dd13a049fee9663450eebbf2ac16faa" title=" " alt="" coords="2146,401,2317,442"/>
<area shape="rect" href="kvm__main_8c.html#ac81a7d714d0668ccea6d0c2ddfd0fed5" title=" " alt="" coords="1945,408,2088,435"/>
<area shape="rect" href="kvm__main_8c.html#ac76f506181e49aa4800bb202e11cb2b3" title=" " alt="" coords="1695,408,1897,435"/>
<area shape="rect" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9" title=" " alt="" coords="1449,379,1647,405"/>
<area shape="rect" href="kvm__main_8c.html#a1a839781d3be88d418abfb2b456663ab" title=" " alt="" coords="1454,436,1642,463"/>
<area shape="rect" href="vmx_8c.html#acc48d0f16e027c2bad1268d02a2eaa68" title=" " alt="" coords="1197,353,1383,380"/>
<area shape="rect" href="lapic_8c.html#a8c6616d2cbae35632aa5debb15b552ec" title=" " alt="" coords="1183,404,1397,431"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="1205,303,1375,329"/>
<area shape="rect" href="lapic_8c.html#a017e57adbc721d98d26099f1a431a22c" title=" " alt="" coords="1179,455,1401,481"/>
<area shape="rect" href="vmx_8c.html#a15d61630d8c4e3f7aea16d3b0164a799" title=" " alt="" coords="1220,252,1360,279"/>
<area shape="rect" href="vmx_8c.html#a426fe0cb3c7fd73b276f6815b6ab9ddc" title=" " alt="" coords="971,379,1108,405"/>
<area shape="rect" href="avic_8c.html#aefc63eafb35c1efd94f6d53e7d0b20d5" title=" " alt="" coords="952,440,1127,467"/>
<area shape="rect" href="avic_8c.html#a8e0a22138080054f4ac064064402f74a" title=" " alt="" coords="755,459,870,485"/>
<area shape="rect" href="svm_8c.html#a2af2f754ca7838a0253d54c33aae7d1e" title=" " alt="" coords="504,477,640,504"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="749,365,876,392"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="972,267,1107,293"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="475,427,669,453"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="755,244,870,271"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="497,325,647,352"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="489,376,655,403"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="495,56,649,83"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="467,5,677,32"/>
<area shape="rect" href="debugfs_8c.html#af0427db3ec1a8c38ea51591abbefde57" title=" " alt="" coords="486,107,658,149"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="505,173,639,200"/>
<area shape="rect" href="sev_8c.html#ad28fd793149997c912b52490f6ca139a" title=" " alt="" coords="501,224,643,251"/>
<area shape="rect" href="sev_8c.html#af1eb77eac84f085b0a943b87f783e30d" title=" " alt="" coords="507,275,637,301"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="219,325,377,352"/>
<area shape="rect" href="sev_8c.html#abe3c569b297da3b78824074b8c08f9a7" title=" " alt="" coords="177,224,419,251"/>
<area shape="rect" href="x86_8c.html#a384702aafa8cdbab3cf92b3d576bb6fb" title=" " alt="" coords="948,511,1131,537"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="744,561,881,588"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="531,549,613,576"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="205,549,391,576"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,549,129,576"/>
<area shape="rect" href="kvm__main_8c.html#a4c8ff5a794a6a2e77e0cfc224568ef70" title=" " alt="" coords="1189,506,1391,547"/>
<area shape="rect" href="debugfs_8c.html#a036e43f2625e35a5d7d037b533b231be" title=" " alt="" coords="2375,240,2588,267"/>
<area shape="rect" href="mmu_8c.html#adae854f3c74003a87a9c2a3ae8feada3" title=" " alt="" coords="2659,459,2837,501"/>
<area shape="rect" href="mmu_8c.html#a1ede039d44aac6e8ff15be76c16411a1" title=" " alt="" coords="2136,471,2327,497"/>
<area shape="rect" href="mmu_8c.html#a475bd00898314bb9378d8e4306aa7874" title=" " alt="" coords="1953,528,2080,555"/>
<area shape="rect" href="mmu_8h.html#ab0e194ecad859add3d639850021f8b16" title=" " alt="" coords="1478,572,1618,599"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="1205,623,1375,665"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="959,623,1120,665"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="725,644,900,671"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="531,600,613,627"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="517,651,627,677"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="517,701,627,728"/>
</map>
</div>

</div>
</div>
<a id="a41b79b63cae220349d8eb5a54f047939"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41b79b63cae220349d8eb5a54f047939">&#9670;&nbsp;</a></span>gfn_to_index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static gfn_t gfn_to_index </td>
          <td>(</td>
          <td class="paramtype">gfn_t&#160;</td>
          <td class="paramname"><em>gfn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfn_t&#160;</td>
          <td class="paramname"><em>base_gfn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00284">284</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;{</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">/* KVM_HPAGE_GFN_SHIFT(PG_LEVEL_4K) must be 0. */</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">return</span> (gfn &gt;&gt; KVM_HPAGE_GFN_SHIFT(level)) -</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        (base_gfn &gt;&gt; KVM_HPAGE_GFN_SHIFT(level));</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a41b79b63cae220349d8eb5a54f047939_icgraph.png" border="0" usemap="#ammu_8h_a41b79b63cae220349d8eb5a54f047939_icgraph" alt=""/></div>
<map name="ammu_8h_a41b79b63cae220349d8eb5a54f047939_icgraph" id="ammu_8h_a41b79b63cae220349d8eb5a54f047939_icgraph">
<area shape="rect" title=" " alt="" coords="1547,568,1653,595"/>
<area shape="rect" href="mmu_8h.html#a4a1851ad21795102ec5d6f395525ff78" title=" " alt="" coords="1309,97,1496,124"/>
<area shape="rect" href="mmu_8c.html#a6c0de1f668bad24810049a8ea46883a5" title=" " alt="" coords="1351,568,1455,595"/>
<area shape="rect" href="page__track_8c.html#a73235ad2d0552c7e4b6b69d729fa79b1" title=" " alt="" coords="1307,325,1499,352"/>
<area shape="rect" href="mmu_8c.html#a1a8a0df061e27892bcc64a3e810e6c29" title=" " alt="" coords="1342,888,1463,915"/>
<area shape="rect" href="page__track_8c.html#adeaed9320c48169c6fcc2049810388d6" title=" " alt="" coords="803,863,978,889"/>
<area shape="rect" href="x86_8c.html#a1be4ac58e0429946d83b58f98bfe2301" title=" " alt="" coords="779,123,1003,149"/>
<area shape="rect" href="mmu_8h.html#a5811b24582939343961d6699f639ddc7" title=" " alt="" coords="1069,13,1242,40"/>
<area shape="rect" href="x86_8c.html#abd6174ba9b312b97d69f36c53aa50e04" title=" " alt="" coords="1076,72,1235,99"/>
<area shape="rect" href="x86_8c.html#a14568e065745512e03b3088070848289" title=" " alt="" coords="511,115,717,157"/>
<area shape="rect" href="kvm__main_8c.html#a6dd13a049fee9663450eebbf2ac16faa" title=" " alt="" coords="280,115,451,157"/>
<area shape="rect" href="debugfs_8c.html#a036e43f2625e35a5d7d037b533b231be" title=" " alt="" coords="784,5,997,32"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="509,5,719,32"/>
<area shape="rect" href="mmu_8c.html#adae854f3c74003a87a9c2a3ae8feada3" title=" " alt="" coords="801,57,980,98"/>
<area shape="rect" href="mmu_8c.html#a1ede039d44aac6e8ff15be76c16411a1" title=" " alt="" coords="519,64,709,91"/>
<area shape="rect" href="mmu_8c.html#ab5f27c8f9a6f98a60c79163bf82f3c35" title=" " alt="" coords="1105,376,1206,403"/>
<area shape="rect" href="mmu_8c.html#afeee4db4dd885d0e891ccb05f545c876" title=" " alt="" coords="1071,731,1239,773"/>
<area shape="rect" href="mmu_8c.html#a1f49638b71a482e4b0c3a6af10d0711e" title=" " alt="" coords="1060,601,1251,642"/>
<area shape="rect" href="mmu_8c.html#ace4eaa769a0c9e1f75a3900a51275d18" title=" " alt="" coords="1063,666,1248,707"/>
<area shape="rect" href="mmu_8c.html#a2bf303adabc499f269c4b034ae6af8d8" title=" " alt="" coords="1099,452,1212,479"/>
<area shape="rect" href="mmu_8c.html#aa349565a8b3409ec60f0872f62f29cc4" title=" " alt="" coords="1075,528,1236,555"/>
<area shape="rect" href="mmu_8c.html#a99dcfa860adefe29091d745ea78fc065" title=" " alt="" coords="847,376,934,403"/>
<area shape="rect" href="mmu_8c.html#abe6e7771da6f6df50052156316535466" title=" " alt="" coords="777,275,1004,301"/>
<area shape="rect" href="mmu_8c.html#a8fc6edfe7bd2a5a7d47952232ea5b8a1" title=" " alt="" coords="555,376,673,403"/>
<area shape="rect" href="mmu_8c.html#a03732600ed110f429f4a2d526a303bcb" title=" " alt="" coords="527,267,701,309"/>
<area shape="rect" href="mmu_8c.html#a035ec39ab60e2a3d382c272b15fc83a6" title=" " alt="" coords="801,731,980,773"/>
<area shape="rect" href="dirty__ring_8c.html#a68052369106191fbc506fdf4d64be449" title=" " alt="" coords="536,707,692,733"/>
<area shape="rect" href="page__track_8c.html#ab6a4ffea76ea12eb3b1e83eafaf4618b" title=" " alt="" coords="512,808,716,835"/>
<area shape="rect" href="mmu_8c.html#aec5cf4265713109c5e2ea673c610cd03" title=" " alt="" coords="292,757,439,784"/>
<area shape="rect" href="mmu_8c.html#a2e21344d37e1f1c8c347bed8627da8db" title=" " alt="" coords="785,579,996,605"/>
<area shape="rect" href="mmu_8c.html#a6f305a17525ee7345f0f852070869e4c" title=" " alt="" coords="5,757,232,784"/>
<area shape="rect" href="mmu_8c.html#a2f33377dcdaf5435e453ff75e02075dd" title=" " alt="" coords="538,579,690,605"/>
<area shape="rect" href="mmu_8c.html#a3ee167c290bf125621f455ec5af142a2" title=" " alt="" coords="847,427,934,453"/>
<area shape="rect" href="mmu_8c.html#a4634f2893dd92f1cca61da172add4618" title=" " alt="" coords="551,477,677,504"/>
<area shape="rect" href="mmu_8c.html#a5d549ae5b6c13e9b87ccc13127ddf86a" title=" " alt="" coords="537,427,691,453"/>
<area shape="rect" href="mmu_8c.html#acdda1d9dfd048fb8f4502ef423555462" title=" " alt="" coords="814,477,967,504"/>
<area shape="rect" href="mmu_8c.html#aa7b0135aea7ac6e4529ab129da6a6376" title=" " alt="" coords="810,528,971,555"/>
<area shape="rect" href="mmu_8c.html#af8846daf6e76a8d619fba16ff979245b" title=" " alt="" coords="1055,325,1255,352"/>
<area shape="rect" href="mmu_8c.html#a842bf3ec47076504467de1b25cfa572d" title=" " alt="" coords="1065,217,1246,258"/>
<area shape="rect" href="spte_8c.html#ab8dba69ef9f5267d41ba061dbe101ded" title=" " alt="" coords="844,325,937,352"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="823,173,958,200"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="845,224,936,251"/>
<area shape="rect" href="mmu_8c.html#a3c4a735c02073ba03d156c2ce4cfc5e5" title=" " alt="" coords="1052,957,1259,998"/>
<area shape="rect" href="mmu_8c.html#abb10f9f8c6baa15bf3d3fc0b309d34d9" title=" " alt="" coords="1077,881,1233,922"/>
<area shape="rect" href="mmu_8c.html#ab3ace8d82fe9d5e1653277159c5ad4df" title=" " alt="" coords="785,964,996,991"/>
<area shape="rect" href="mmu_8c.html#a514b4601388e83cb56ffe210d5123b50" title=" " alt="" coords="795,1015,987,1057"/>
<area shape="rect" href="mmu_8c.html#a8726aec6b800501379c831dad5432043" title=" " alt="" coords="788,913,993,940"/>
<area shape="rect" href="mmu_8c.html#ae0ba561823d6dcc90bc489e0a51867a7" title=" " alt="" coords="800,797,981,838"/>
<area shape="rect" href="page__track_8c.html#ac2932f8336fdd5b8071d5e360cddacd5" title=" " alt="" coords="499,863,729,889"/>
<area shape="rect" href="mmu_8c.html#ab0716e0d51f7a555f58f426cbfb6d890" title=" " alt="" coords="284,888,447,915"/>
</map>
</div>

</div>
</div>
<a id="adf66d07a95ce1eb3c5c1e7766f0aacda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf66d07a95ce1eb3c5c1e7766f0aacda">&#9670;&nbsp;</a></span>kvm_arch_write_log_dirty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_arch_write_log_dirty </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8fc0b881dcc20a927ca42693043c1eef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fc0b881dcc20a927ca42693043c1eef">&#9670;&nbsp;</a></span>kvm_can_do_async_pf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_can_do_async_pf </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="x86_8c_source.html#l13317">13317</a> of file <a class="el" href="x86_8c_source.html">x86.c</a>.</p>
<div class="fragment"><div class="line"><a name="l13318"></a><span class="lineno">13318</span>&#160;{</div>
<div class="line"><a name="l13319"></a><span class="lineno">13319</span>&#160;    <span class="keywordflow">if</span> (unlikely(!<a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(vcpu) ||</div>
<div class="line"><a name="l13320"></a><span class="lineno">13320</span>&#160;             <a class="code" href="x86_8h.html#a2a4bd8f3c9a644ab1bc76383672e8d4b">kvm_event_needs_reinjection</a>(vcpu) ||</div>
<div class="line"><a name="l13321"></a><span class="lineno">13321</span>&#160;             <a class="code" href="x86_8h.html#aa9890500a8e1721d97bbeb847c932d2b">kvm_is_exception_pending</a>(vcpu)))</div>
<div class="line"><a name="l13322"></a><span class="lineno">13322</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13323"></a><span class="lineno">13323</span>&#160; </div>
<div class="line"><a name="l13324"></a><span class="lineno">13324</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231">kvm_hlt_in_guest</a>(vcpu-&gt;kvm) &amp;&amp; !<a class="code" href="x86_8c.html#ad873397baf5d53d77c945851a0ab689c">kvm_can_deliver_async_pf</a>(vcpu))</div>
<div class="line"><a name="l13325"></a><span class="lineno">13325</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13326"></a><span class="lineno">13326</span>&#160; </div>
<div class="line"><a name="l13327"></a><span class="lineno">13327</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l13328"></a><span class="lineno">13328</span>&#160;<span class="comment">     * If interrupts are off we cannot even use an artificial</span></div>
<div class="line"><a name="l13329"></a><span class="lineno">13329</span>&#160;<span class="comment">     * halt state.</span></div>
<div class="line"><a name="l13330"></a><span class="lineno">13330</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l13331"></a><span class="lineno">13331</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="x86_8c.html#a4593bb3c3619c24c8f7f0af1a224fdbd">kvm_arch_interrupt_allowed</a>(vcpu);</div>
<div class="line"><a name="l13332"></a><span class="lineno">13332</span>&#160;}</div>
<div class="ttc" id="alapic_8h_html_a1d8c9378fcbf62390a89dc3b7f0bdbd4"><div class="ttname"><a href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a></div><div class="ttdeci">static bool lapic_in_kernel(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00186">lapic.h:186</a></div></div>
<div class="ttc" id="ax86_8c_html_a4593bb3c3619c24c8f7f0af1a224fdbd"><div class="ttname"><a href="x86_8c.html#a4593bb3c3619c24c8f7f0af1a224fdbd">kvm_arch_interrupt_allowed</a></div><div class="ttdeci">int kvm_arch_interrupt_allowed(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l13146">x86.c:13146</a></div></div>
<div class="ttc" id="ax86_8c_html_ad873397baf5d53d77c945851a0ab689c"><div class="ttname"><a href="x86_8c.html#ad873397baf5d53d77c945851a0ab689c">kvm_can_deliver_async_pf</a></div><div class="ttdeci">static bool kvm_can_deliver_async_pf(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l13291">x86.c:13291</a></div></div>
<div class="ttc" id="ax86_8h_html_a2a4bd8f3c9a644ab1bc76383672e8d4b"><div class="ttname"><a href="x86_8h.html#a2a4bd8f3c9a644ab1bc76383672e8d4b">kvm_event_needs_reinjection</a></div><div class="ttdeci">static bool kvm_event_needs_reinjection(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8h_source.html#l00127">x86.h:127</a></div></div>
<div class="ttc" id="ax86_8h_html_aa9890500a8e1721d97bbeb847c932d2b"><div class="ttname"><a href="x86_8h.html#aa9890500a8e1721d97bbeb847c932d2b">kvm_is_exception_pending</a></div><div class="ttdeci">static bool kvm_is_exception_pending(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8h_source.html#l00100">x86.h:100</a></div></div>
<div class="ttc" id="ax86_8h_html_ace4ed625ac4852e54db110fde28d3231"><div class="ttname"><a href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231">kvm_hlt_in_guest</a></div><div class="ttdeci">static bool kvm_hlt_in_guest(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8h_source.html#l00414">x86.h:414</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a8fc0b881dcc20a927ca42693043c1eef_cgraph.png" border="0" usemap="#ammu_8h_a8fc0b881dcc20a927ca42693043c1eef_cgraph" alt=""/></div>
<map name="ammu_8h_a8fc0b881dcc20a927ca42693043c1eef_cgraph" id="ammu_8h_a8fc0b881dcc20a927ca42693043c1eef_cgraph">
<area shape="rect" title=" " alt="" coords="5,147,175,174"/>
<area shape="rect" href="x86_8c.html#a4593bb3c3619c24c8f7f0af1a224fdbd" title=" " alt="" coords="257,5,406,47"/>
<area shape="rect" href="x86_8c.html#ad873397baf5d53d77c945851a0ab689c" title=" " alt="" coords="232,71,431,98"/>
<area shape="rect" href="x86_8h.html#a2a4bd8f3c9a644ab1bc76383672e8d4b" title=" " alt="" coords="223,122,440,149"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="263,173,400,199"/>
<area shape="rect" href="x86_8h.html#aa9890500a8e1721d97bbeb847c932d2b" title=" " alt="" coords="232,223,431,250"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="272,274,391,301"/>
<area shape="rect" href="kvm__cache__regs_8h.html#afbcfc413ceedb460734eb5fd7c5c4fbc" title=" " alt="" coords="527,21,647,47"/>
<area shape="rect" href="x86_8h.html#a716c9d1b6fc76fd454097cf39d640878" title=" " alt="" coords="545,71,629,98"/>
<area shape="rect" href="x86_8c.html#a16fe438236ed83e028cf665cd9022c1b" title=" " alt="" coords="488,122,687,149"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a16b29ca8796e3da212a8faf1b2dc7ff3" title=" " alt="" coords="735,71,881,98"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a5fbb40e1f7661ccfd5accdaef3d8c378" title=" " alt="" coords="929,71,1075,98"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="1123,71,1316,98"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a8fc0b881dcc20a927ca42693043c1eef_icgraph.png" border="0" usemap="#ammu_8h_a8fc0b881dcc20a927ca42693043c1eef_icgraph" alt=""/></div>
<map name="ammu_8h_a8fc0b881dcc20a927ca42693043c1eef_icgraph" id="ammu_8h_a8fc0b881dcc20a927ca42693043c1eef_icgraph">
<area shape="rect" title=" " alt="" coords="2901,731,3071,757"/>
<area shape="rect" href="mmu_8c.html#a191317a4b6c8acc0a90a33017cfab7f3" title=" " alt="" coords="2711,731,2853,757"/>
<area shape="rect" href="mmu_8c.html#a62cf3d1ba1f946897f545d9a93db988f" title=" " alt="" coords="2535,731,2663,757"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="2352,705,2487,732"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="2374,756,2465,783"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="1441,731,1596,757"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="2137,680,2304,707"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="1199,731,1347,757"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="1177,233,1368,260"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="984,731,1104,757"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="255,469,427,496"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="723,629,911,656"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="505,832,645,859"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="735,1009,898,1036"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="735,883,899,909"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="5,469,205,496"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="526,477,625,504"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="522,579,629,605"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="293,655,389,681"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="476,731,675,757"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="505,781,645,808"/>
<area shape="rect" href="smm_8c.html#a5382946234c910e05c6e2c09aff15713" title=" " alt="" coords="499,680,652,707"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="511,528,640,555"/>
<area shape="rect" href="vmx_2nested_8c.html#a001f930db9a867e828cf01b48d3e4e25" title=" " alt="" coords="498,411,653,453"/>
<area shape="rect" href="x86_8c.html#a420caf80521ab8d6ef7218d5dd26d47f" title=" " alt="" coords="538,360,613,387"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="307,781,374,808"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="288,832,393,859"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="253,284,428,311"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="486,984,665,1011"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="498,1035,653,1061"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="491,1085,659,1112"/>
<area shape="rect" href="vmx_2nested_8c.html#a06a397c328d1656bb4d3ab073878e6f0" title=" " alt="" coords="484,883,667,909"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="510,933,641,960"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="959,226,1129,267"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="960,107,1128,133"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="736,226,897,267"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="507,259,644,285"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="735,5,899,32"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="737,56,896,83"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="727,107,906,133"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="753,157,881,184"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="501,5,649,32"/>
<area shape="rect" href="vmx_8c.html#a7a38ddbd01bec99bf94ab4868ad4c6ea" title=" " alt="" coords="491,107,660,133"/>
<area shape="rect" href="svm_8c.html#a589e870c8a06d1ba26f24da299e47b95" title=" " alt="" coords="515,56,635,83"/>
<area shape="rect" href="svm_8c.html#a8afafecae406016532810194f187fe2c" title=" " alt="" coords="481,157,669,184"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="1915,680,2089,707"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="1669,680,1867,707"/>
<area shape="rect" href="mmu_8c.html#a3e794d802eeb843cd6d7b699b74d8bf3" title=" " alt="" coords="1430,680,1607,707"/>
<area shape="rect" href="mmu_8c.html#a00f26353045c597f6a49cdd4f239f548" title=" " alt="" coords="1416,629,1621,656"/>
<area shape="rect" href="mmu_8c.html#a37d0224d142272ad59fd35b4a22c5937" title=" " alt="" coords="1201,680,1345,707"/>
</map>
</div>

</div>
</div>
<a id="a4e90e07b62b255d32f17cdb19ba6d1d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e90e07b62b255d32f17cdb19ba6d1d1">&#9670;&nbsp;</a></span>kvm_get_active_cr3_lam_bits()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long kvm_get_active_cr3_lam_bits </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00149">149</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;{</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cpuid_8h.html#acf67f5848a2ddd59dc852e37bc330390">guest_can_use</a>(vcpu, X86_FEATURE_LAM))</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="kvm__cache__regs_8h.html#aa80de2ba11d877ef825788b0c9768378">kvm_read_cr3</a>(vcpu) &amp; (X86_CR3_LAM_U48 | X86_CR3_LAM_U57);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;}</div>
<div class="ttc" id="acpuid_8h_html_acf67f5848a2ddd59dc852e37bc330390"><div class="ttname"><a href="cpuid_8h.html#acf67f5848a2ddd59dc852e37bc330390">guest_can_use</a></div><div class="ttdeci">static __always_inline bool guest_can_use(struct kvm_vcpu *vcpu, unsigned int x86_feature)</div><div class="ttdef"><b>Definition:</b> <a href="cpuid_8h_source.html#l00278">cpuid.h:278</a></div></div>
<div class="ttc" id="akvm__cache__regs_8h_html_aa80de2ba11d877ef825788b0c9768378"><div class="ttname"><a href="kvm__cache__regs_8h.html#aa80de2ba11d877ef825788b0c9768378">kvm_read_cr3</a></div><div class="ttdeci">static ulong kvm_read_cr3(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__cache__regs_8h_source.html#l00190">kvm_cache_regs.h:190</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a4e90e07b62b255d32f17cdb19ba6d1d1_cgraph.png" border="0" usemap="#ammu_8h_a4e90e07b62b255d32f17cdb19ba6d1d1_cgraph" alt=""/></div>
<map name="ammu_8h_a4e90e07b62b255d32f17cdb19ba6d1d1_cgraph" id="ammu_8h_a4e90e07b62b255d32f17cdb19ba6d1d1_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,159,97"/>
<area shape="rect" href="cpuid_8h.html#acf67f5848a2ddd59dc852e37bc330390" title=" " alt="" coords="207,38,325,65"/>
<area shape="rect" href="kvm__cache__regs_8h.html#aa80de2ba11d877ef825788b0c9768378" title=" " alt="" coords="209,89,323,115"/>
<area shape="rect" href="cpuid_8h.html#a786eea4c1fa59be0155455a72125e0ff" title=" " alt="" coords="615,5,788,47"/>
<area shape="rect" href="cpuid_8h.html#a72da5444b01d72d935ebc411b99ba166" title=" " alt="" coords="375,38,565,65"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="373,89,567,115"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a4e90e07b62b255d32f17cdb19ba6d1d1_icgraph.png" border="0" usemap="#ammu_8h_a4e90e07b62b255d32f17cdb19ba6d1d1_icgraph" alt=""/></div>
<map name="ammu_8h_a4e90e07b62b255d32f17cdb19ba6d1d1_icgraph" id="ammu_8h_a4e90e07b62b255d32f17cdb19ba6d1d1_icgraph">
<area shape="rect" title=" " alt="" coords="212,5,365,47"/>
<area shape="rect" href="vmx_8c.html#a074416f44b1e2949a96f85e0579c8aeb" title=" " alt="" coords="5,13,164,39"/>
</map>
</div>

</div>
</div>
<a id="ad1aee9e6e5e9d85568a734930c8a084a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1aee9e6e5e9d85568a734930c8a084a">&#9670;&nbsp;</a></span>kvm_get_active_pcid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long kvm_get_active_pcid </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00144">144</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;{</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mmu_8h.html#a573994365668ea7cc32c0858f96d8e64">kvm_get_pcid</a>(vcpu, <a class="code" href="kvm__cache__regs_8h.html#aa80de2ba11d877ef825788b0c9768378">kvm_read_cr3</a>(vcpu));</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div>
<div class="ttc" id="ammu_8h_html_a573994365668ea7cc32c0858f96d8e64"><div class="ttname"><a href="mmu_8h.html#a573994365668ea7cc32c0858f96d8e64">kvm_get_pcid</a></div><div class="ttdeci">static unsigned long kvm_get_pcid(struct kvm_vcpu *vcpu, gpa_t cr3)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00135">mmu.h:135</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_ad1aee9e6e5e9d85568a734930c8a084a_cgraph.png" border="0" usemap="#ammu_8h_ad1aee9e6e5e9d85568a734930c8a084a_cgraph" alt=""/></div>
<map name="ammu_8h_ad1aee9e6e5e9d85568a734930c8a084a_cgraph" id="ammu_8h_ad1aee9e6e5e9d85568a734930c8a084a_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,165,57"/>
<area shape="rect" href="mmu_8h.html#a573994365668ea7cc32c0858f96d8e64" title=" " alt="" coords="213,5,327,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#aa80de2ba11d877ef825788b0c9768378" title=" " alt="" coords="391,56,505,83"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a2b779657b20f7afa44c0172b1478ac65" title=" " alt="" coords="375,5,521,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a24ffc81fe5ed7998e29134351275b4dd" title=" " alt="" coords="569,5,715,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="763,31,956,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_ad1aee9e6e5e9d85568a734930c8a084a_icgraph.png" border="0" usemap="#ammu_8h_ad1aee9e6e5e9d85568a734930c8a084a_icgraph" alt=""/></div>
<map name="ammu_8h_ad1aee9e6e5e9d85568a734930c8a084a_icgraph" id="ammu_8h_ad1aee9e6e5e9d85568a734930c8a084a_icgraph">
<area shape="rect" title=" " alt="" coords="1111,132,1271,159"/>
<area shape="rect" href="x86_8c.html#aa792359250f034a2a29b0c809df64ff3" title=" " alt="" coords="895,107,1053,133"/>
<area shape="rect" href="mmu_8c.html#a3b8a9cd97346da0584f14387a0f7828e" title=" " alt="" coords="885,56,1063,83"/>
<area shape="rect" href="svm_8c.html#a5f28637bd5292dc7bb085750c3e31d94" title=" " alt="" coords="895,157,1053,184"/>
<area shape="rect" href="vmx_8c.html#a074416f44b1e2949a96f85e0579c8aeb" title=" " alt="" coords="895,208,1053,235"/>
<area shape="rect" href="x86_8c.html#a97b209e5c87a4c7b5850646ab9a1919c" title=" " alt="" coords="681,56,837,83"/>
<area shape="rect" href="x86_8c.html#a75f57f1f4494df7f35fcdf0e0e582a31" title=" " alt="" coords="707,157,812,184"/>
<area shape="rect" href="vmx_8c.html#af3a69581bc36e5dd88f3c37334df214d" title=" " alt="" coords="473,5,593,32"/>
<area shape="rect" href="svm_8c.html#a6875c998376697a8776271bc88521721" title=" " alt="" coords="455,56,610,83"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="473,107,592,133"/>
<area shape="rect" href="x86_8c.html#a86812e4228865668099921709e1c2f26" title=" " alt="" coords="469,157,596,184"/>
<area shape="rect" href="vmx_8c.html#aa55ace9429e6e94042e6602716222805" title=" " alt="" coords="490,208,575,235"/>
<area shape="rect" href="smm_8c.html#a0c50da2c4874eda6d67766974a476019" title=" " alt="" coords="432,259,633,285"/>
<area shape="rect" href="svm_8c.html#af2ee2a03530f5b7a02a127d8b779d2ae" title=" " alt="" coords="217,107,384,133"/>
<area shape="rect" href="smm_8c.html#ae0136cd1aa193ad29565961ea839a99a" title=" " alt="" coords="228,259,373,285"/>
<area shape="rect" href="smm_8c.html#a0943012ff008c7999f582998f0f9167a" title=" " alt="" coords="5,259,169,285"/>
</map>
</div>

</div>
</div>
<a id="a573994365668ea7cc32c0858f96d8e64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a573994365668ea7cc32c0858f96d8e64">&#9670;&nbsp;</a></span>kvm_get_pcid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long kvm_get_pcid </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpa_t&#160;</td>
          <td class="paramname"><em>cr3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00135">135</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;{</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    BUILD_BUG_ON((X86_CR3_PCID_MASK &amp; PAGE_MASK) != 0);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="kvm__cache__regs_8h.html#a2b779657b20f7afa44c0172b1478ac65">kvm_is_cr4_bit_set</a>(vcpu, X86_CR4_PCIDE)</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;           ? cr3 &amp; X86_CR3_PCID_MASK</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;           : 0;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div>
<div class="ttc" id="akvm__cache__regs_8h_html_a2b779657b20f7afa44c0172b1478ac65"><div class="ttname"><a href="kvm__cache__regs_8h.html#a2b779657b20f7afa44c0172b1478ac65">kvm_is_cr4_bit_set</a></div><div class="ttdeci">static __always_inline bool kvm_is_cr4_bit_set(struct kvm_vcpu *vcpu, unsigned long cr4_bit)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__cache__regs_8h_source.html#l00182">kvm_cache_regs.h:182</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a573994365668ea7cc32c0858f96d8e64_cgraph.png" border="0" usemap="#ammu_8h_a573994365668ea7cc32c0858f96d8e64_cgraph" alt=""/></div>
<map name="ammu_8h_a573994365668ea7cc32c0858f96d8e64_cgraph" id="ammu_8h_a573994365668ea7cc32c0858f96d8e64_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,119,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a2b779657b20f7afa44c0172b1478ac65" title=" " alt="" coords="167,5,313,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a24ffc81fe5ed7998e29134351275b4dd" title=" " alt="" coords="361,5,507,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="555,5,748,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a573994365668ea7cc32c0858f96d8e64_icgraph.png" border="0" usemap="#ammu_8h_a573994365668ea7cc32c0858f96d8e64_icgraph" alt=""/></div>
<map name="ammu_8h_a573994365668ea7cc32c0858f96d8e64_icgraph" id="ammu_8h_a573994365668ea7cc32c0858f96d8e64_icgraph">
<area shape="rect" title=" " alt="" coords="1319,183,1432,209"/>
<area shape="rect" href="mmu_8h.html#ad1aee9e6e5e9d85568a734930c8a084a" title=" " alt="" coords="1111,183,1271,209"/>
<area shape="rect" href="x86_8c.html#aa792359250f034a2a29b0c809df64ff3" title=" " alt="" coords="895,100,1053,127"/>
<area shape="rect" href="mmu_8c.html#a3b8a9cd97346da0584f14387a0f7828e" title=" " alt="" coords="885,252,1063,279"/>
<area shape="rect" href="svm_8c.html#a5f28637bd5292dc7bb085750c3e31d94" title=" " alt="" coords="895,151,1053,177"/>
<area shape="rect" href="vmx_8c.html#a074416f44b1e2949a96f85e0579c8aeb" title=" " alt="" coords="895,201,1053,228"/>
<area shape="rect" href="x86_8c.html#a97b209e5c87a4c7b5850646ab9a1919c" title=" " alt="" coords="681,227,837,253"/>
<area shape="rect" href="x86_8c.html#a75f57f1f4494df7f35fcdf0e0e582a31" title=" " alt="" coords="707,100,812,127"/>
<area shape="rect" href="vmx_8c.html#af3a69581bc36e5dd88f3c37334df214d" title=" " alt="" coords="473,220,593,247"/>
<area shape="rect" href="svm_8c.html#a6875c998376697a8776271bc88521721" title=" " alt="" coords="455,271,610,297"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="473,107,592,133"/>
<area shape="rect" href="x86_8c.html#a86812e4228865668099921709e1c2f26" title=" " alt="" coords="469,157,596,184"/>
<area shape="rect" href="vmx_8c.html#aa55ace9429e6e94042e6602716222805" title=" " alt="" coords="490,5,575,32"/>
<area shape="rect" href="smm_8c.html#a0c50da2c4874eda6d67766974a476019" title=" " alt="" coords="432,56,633,83"/>
<area shape="rect" href="svm_8c.html#af2ee2a03530f5b7a02a127d8b779d2ae" title=" " alt="" coords="217,107,384,133"/>
<area shape="rect" href="smm_8c.html#ae0136cd1aa193ad29565961ea839a99a" title=" " alt="" coords="228,56,373,83"/>
<area shape="rect" href="smm_8c.html#a0943012ff008c7999f582998f0f9167a" title=" " alt="" coords="5,56,169,83"/>
</map>
</div>

</div>
</div>
<a id="ab4a3e49f63d0517b2694a9d8f72cb79a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4a3e49f63d0517b2694a9d8f72cb79a">&#9670;&nbsp;</a></span>kvm_get_shadow_phys_bits()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u8 kvm_get_shadow_phys_bits </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00084">84</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;{</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">     * boot_cpu_data.x86_phys_bits is reduced when MKTME or SME are detected</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">     * in CPU detection code, but the processor treats those reduced bits as</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">     * &#39;keyID&#39; thus they are not reserved bits. Therefore KVM needs to look at</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">     * the physical address bits reported by CPUID.</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">if</span> (likely(boot_cpu_data.extended_cpuid_level &gt;= 0x80000008))</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">return</span> cpuid_eax(0x80000008) &amp; 0xff;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">     * Quite weird to have VMX or SVM but not MAXPHYADDR; probably a VM with</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">     * custom CPUID.  Proceed with whatever the kernel found since these features</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">     * aren&#39;t virtualizable (SME/SEV also require CPUIDs higher than 0x80000008).</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">return</span> boot_cpu_data.x86_phys_bits;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_ab4a3e49f63d0517b2694a9d8f72cb79a_icgraph.png" border="0" usemap="#ammu_8h_ab4a3e49f63d0517b2694a9d8f72cb79a_icgraph" alt=""/></div>
<map name="ammu_8h_ab4a3e49f63d0517b2694a9d8f72cb79a_icgraph" id="ammu_8h_ab4a3e49f63d0517b2694a9d8f72cb79a_icgraph">
<area shape="rect" title=" " alt="" coords="1091,60,1296,87"/>
<area shape="rect" href="spte_8c.html#ad87f402ab1a9a0340b4e280deb05dd7c" title=" " alt="" coords="851,23,1034,65"/>
<area shape="rect" href="vmx_8c.html#a3e17271461560cfca4cc0f4deccd430f" title=" " alt="" coords="843,89,1043,116"/>
<area shape="rect" href="mmu_8c.html#ac1e20896385a0e158bf217a24a6d6234" title=" " alt="" coords="567,31,795,57"/>
<area shape="rect" href="x86_8c.html#a0ad8fc4784d6d316f3d9f5afe640af81" title=" " alt="" coords="343,31,519,57"/>
<area shape="rect" href="x86_8c.html#ae295ff45fc91a432658e57dda4dfea68" title=" " alt="" coords="132,31,295,57"/>
<area shape="rect" href="svm_8c.html#aa667b0a0f202f83aa1533825aeecb402" title=" " alt="" coords="5,5,84,32"/>
<area shape="rect" href="vmx_8c.html#aa8f62a8c3a5a5da29c69565d2645a371" title=" " alt="" coords="5,56,84,83"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="617,89,744,116"/>
</map>
</div>

</div>
</div>
<a id="a4d6f2ec540cbdb86e2594df2e4d453c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d6f2ec540cbdb86e2594df2e4d453c2">&#9670;&nbsp;</a></span>kvm_handle_page_fault()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_handle_page_fault </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>error_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>fault_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>insn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>insn_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l04540">4540</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;{</div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;    <span class="keywordtype">int</span> r = 1;</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;    u32 <a class="code" href="xen_8c.html#a773b39d480759f67926cb18ae2219281">flags</a> = vcpu-&gt;arch.apf.host_apf_flags;</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160; </div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;<span class="preprocessor">#ifndef CONFIG_X86_64</span></div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;    <span class="comment">/* A 64-bit CR2 should be impossible on 32-bit KVM. */</span></div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;    <span class="keywordflow">if</span> (WARN_ON_ONCE(fault_address &gt;&gt; 32))</div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;        <span class="keywordflow">return</span> -EFAULT;</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160; </div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;    vcpu-&gt;arch.l1tf_flush_l1d = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="xen_8c.html#a773b39d480759f67926cb18ae2219281">flags</a>) {</div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;        trace_kvm_page_fault(vcpu, fault_address, error_code);</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160; </div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="x86_8h.html#a2a4bd8f3c9a644ab1bc76383672e8d4b">kvm_event_needs_reinjection</a>(vcpu))</div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;            <a class="code" href="mmu_8c.html#af74327c8867527505d8ca995e2b8a3fb">kvm_mmu_unprotect_page_virt</a>(vcpu, fault_address);</div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;        r = <a class="code" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9">kvm_mmu_page_fault</a>(vcpu, fault_address, error_code, insn,</div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;                insn_len);</div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="xen_8c.html#a773b39d480759f67926cb18ae2219281">flags</a> &amp; KVM_PV_REASON_PAGE_NOT_PRESENT) {</div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;        vcpu-&gt;arch.apf.host_apf_flags = 0;</div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;        local_irq_disable();</div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;        kvm_async_pf_task_wait_schedule(fault_address);</div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;        local_irq_enable();</div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;        WARN_ONCE(1, <span class="stringliteral">&quot;Unexpected host async PF flags: %x\n&quot;</span>, <a class="code" href="xen_8c.html#a773b39d480759f67926cb18ae2219281">flags</a>);</div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;    }</div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160; </div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;    <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;}</div>
<div class="ttc" id="ammu_8c_html_a3d0bd209d792a4316f3b40681fdc10f9"><div class="ttname"><a href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9">kvm_mmu_page_fault</a></div><div class="ttdeci">int noinline kvm_mmu_page_fault(struct kvm_vcpu *vcpu, gpa_t cr2_or_gpa, u64 error_code, void *insn, int insn_len)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l05830">mmu.c:5830</a></div></div>
<div class="ttc" id="ammu_8c_html_af74327c8867527505d8ca995e2b8a3fb"><div class="ttname"><a href="mmu_8c.html#af74327c8867527505d8ca995e2b8a3fb">kvm_mmu_unprotect_page_virt</a></div><div class="ttdeci">static int kvm_mmu_unprotect_page_virt(struct kvm_vcpu *vcpu, gva_t gva)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l02775">mmu.c:2775</a></div></div>
<div class="ttc" id="axen_8c_html_a773b39d480759f67926cb18ae2219281"><div class="ttname"><a href="xen_8c.html#a773b39d480759f67926cb18ae2219281">flags</a></div><div class="ttdeci">uint32_t flags</div><div class="ttdef"><b>Definition:</b> <a href="xen_8c_source.html#l00001">xen.c:1</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a4d6f2ec540cbdb86e2594df2e4d453c2_cgraph.png" border="0" usemap="#ammu_8h_a4d6f2ec540cbdb86e2594df2e4d453c2_cgraph" alt=""/></div>
<map name="ammu_8h_a4d6f2ec540cbdb86e2594df2e4d453c2_cgraph" id="ammu_8h_a4d6f2ec540cbdb86e2594df2e4d453c2_cgraph">
<area shape="rect" title=" " alt="" coords="5,1441,184,1468"/>
<area shape="rect" href="x86_8h.html#a2a4bd8f3c9a644ab1bc76383672e8d4b" title=" " alt="" coords="238,1391,455,1417"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="263,1441,431,1468"/>
<area shape="rect" href="mmu_8c.html#af74327c8867527505d8ca995e2b8a3fb" title=" " alt="" coords="232,1543,461,1569"/>
<area shape="rect" href="mmu_8c.html#a899cf46c0ee6df6305c7fe167421e2b7" title=" " alt="" coords="521,1681,708,1708"/>
<area shape="rect" href="mmu_8c.html#abaee26e516b75f579b063a76c376b045" title=" " alt="" coords="791,1580,947,1607"/>
<area shape="rect" href="kvm__cache__regs_8h.html#afbcfc413ceedb460734eb5fd7c5c4fbc" title=" " alt="" coords="1059,1301,1179,1328"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="519,81,710,108"/>
<area shape="rect" href="mmu_8c.html#a45417375d740e0905773ac641827e0a0" title=" " alt="" coords="1019,1428,1219,1455"/>
<area shape="rect" href="x86_8c.html#a3f6bd8b3f0bc1678451fd28682e7c3b1" title=" " alt="" coords="523,784,706,811"/>
<area shape="rect" href="mmu_8c.html#aa6dadc0bd20da0d41281abe089941491" title=" " alt="" coords="799,1884,939,1911"/>
<area shape="rect" href="mmu_8c.html#a24c91b8ae0a349c76c95f6266f62d6e1" title=" " alt="" coords="808,1631,931,1657"/>
<area shape="rect" href="mmu_8c.html#a82303f01ba06fead33e8a67eac44807e" title=" " alt="" coords="782,1681,957,1708"/>
<area shape="rect" href="mmu_8c.html#a1217d6225ddd3e8a27699bb59fc91211" title=" " alt="" coords="794,1732,945,1759"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="813,1783,926,1809"/>
<area shape="rect" href="x86_8h.html#ab77d498df3e80dc4bdbbd7ef398f9f4e" title=" " alt="" coords="782,1833,957,1860"/>
<area shape="rect" href="spte_8h.html#a1afff676d846020d0ea1a0ae8f1ae26a" title=" " alt="" coords="1019,1884,1219,1911"/>
<area shape="rect" href="x86_8h.html#a661bc84e256a87cbd929ffb7c1f61b2f" title=" " alt="" coords="1056,1732,1181,1759"/>
<area shape="rect" href="x86_8h.html#adec8392408e5b0e363872e91e83a90af" title=" " alt="" coords="1030,1555,1207,1581"/>
<area shape="rect" href="x86_8h.html#a2cc991ad82a0546dd38fabaf3c096037" title=" " alt="" coords="1030,1605,1207,1632"/>
<area shape="rect" href="mmu__internal_8h.html#a8a367cbfff40c5c72d6f19049da9fc51" title=" " alt="" coords="773,5,966,32"/>
<area shape="rect" href="mmu__internal_8h.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="792,56,947,83"/>
<area shape="rect" href="kvm__main_8c.html#ac4b56de4919be80c9cd4289f20437c64" title=" " alt="" coords="768,107,971,133"/>
<area shape="rect" href="mmu_8c.html#ab8e14476297a48107341bc44a29b6af9" title=" " alt="" coords="1267,1377,1485,1404"/>
<area shape="rect" href="mmu_8c.html#aa915f695d4c341eca7d1f5b5a0a26a03" title=" " alt="" coords="1267,1428,1485,1455"/>
<area shape="rect" href="kvm__main_8c.html#aa8688eb80c9acaf8b0aa783b6ac68c16" title=" " alt="" coords="1329,1479,1423,1505"/>
<area shape="rect" href="x86_8c.html#a02687f1819d3a24cafdda1660be6ec9b" title=" " alt="" coords="1051,839,1186,865"/>
<area shape="rect" href="x86_8c.html#a3989782ad88b95fba558bd550288d551" title=" " alt="" coords="771,1200,968,1227"/>
<area shape="rect" href="x86_8c.html#a82999d0b499027dbcf226f164016c023" title=" " alt="" coords="780,1251,959,1277"/>
<area shape="rect" href="emulate_8c.html#a8e6c168c4d0660ef944366d6dd83c506" title=" " alt="" coords="793,209,946,250"/>
<area shape="rect" href="x86_8c.html#a673435288bc64cc9ddadb6b25c95693e" title=" " alt="" coords="808,275,931,301"/>
<area shape="rect" href="x86_8c.html#aa8815dc77b29b1054a9edc849d14a3b0" title=" " alt="" coords="775,544,963,571"/>
<area shape="rect" href="x86_8c.html#ac9502ee8f018301047c80e19ab79f7e2" title=" " alt="" coords="1034,376,1203,403"/>
<area shape="rect" href="x86_8c.html#aac24bace71b27dc8ae2ee3ecae145d0f" title=" " alt="" coords="1027,544,1211,571"/>
<area shape="rect" href="x86_8c.html#a031a116c2f53928292fd79cb4405352e" title=" " alt="" coords="770,376,969,403"/>
<area shape="rect" href="x86_8c.html#a83c65667726e87db38b0379e6de27a29" title=" " alt="" coords="789,427,949,469"/>
<area shape="rect" href="x86_8c.html#a5cf5556013d24428137ff2113e368db5" title=" " alt="" coords="774,696,965,723"/>
<area shape="rect" href="x86_8h.html#acdc826b0cd2ce8b958a826c8faa306b4" title=" " alt="" coords="789,747,950,789"/>
<area shape="rect" href="pmu_8c.html#a0b4da757f734ef55ec71a70808bc50d4" title=" " alt="" coords="779,813,960,840"/>
<area shape="rect" href="kvm__cache__regs_8h.html#aa70071fd3a98f236b0b57a30cbec124f" title=" " alt="" coords="812,864,927,891"/>
<area shape="rect" href="x86_8c.html#a12826c3f941e4dbf381d4d085ce42110" title=" " alt="" coords="809,645,930,672"/>
<area shape="rect" href="x86_8c.html#a95270b039fad8dd0663cbee58f3d1cf4" title=" " alt="" coords="783,915,955,957"/>
<area shape="rect" href="x86_8c.html#aaad1e1c79fc8780110beaebf328ea7f9" title=" " alt="" coords="776,981,963,1008"/>
<area shape="rect" href="x86_8c.html#a5559cadc9496d9f62e002e88144d5156" title=" " alt="" coords="788,1403,951,1429"/>
<area shape="rect" href="x86_8c.html#a5969d2c2ff863d86dbdd90088da52139" title=" " alt="" coords="805,1301,934,1328"/>
<area shape="rect" href="x86_8c.html#a32d57f7752f511acb821a12625ff8455" title=" " alt="" coords="788,1083,951,1109"/>
<area shape="rect" href="emulate_8c.html#a4a1d9ea50bedcf56a5ba5ca9f6e90c6a" title=" " alt="" coords="1075,241,1162,268"/>
<area shape="rect" href="x86_8c.html#a1d439c08a5848010284827827cfcbf76" title=" " alt="" coords="785,1134,954,1175"/>
<area shape="rect" href="emulate_8c.html#a01cc7d1fe9a09ddc0941fe01271556af" title=" " alt="" coords="799,493,940,520"/>
<area shape="rect" href="x86_8c.html#a5192f48e840413ed18b661a0fb6bca11" title=" " alt="" coords="509,1732,720,1759"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a4d6f2ec540cbdb86e2594df2e4d453c2_icgraph.png" border="0" usemap="#ammu_8h_a4d6f2ec540cbdb86e2594df2e4d453c2_icgraph" alt=""/></div>
<map name="ammu_8h_a4d6f2ec540cbdb86e2594df2e4d453c2_icgraph" id="ammu_8h_a4d6f2ec540cbdb86e2594df2e4d453c2_icgraph">
<area shape="rect" title=" " alt="" coords="223,31,401,57"/>
<area shape="rect" href="vmx_8c.html#a7a38ddbd01bec99bf94ab4868ad4c6ea" title=" " alt="" coords="5,5,175,32"/>
<area shape="rect" href="svm_8c.html#a589e870c8a06d1ba26f24da299e47b95" title=" " alt="" coords="30,56,150,83"/>
</map>
</div>

</div>
</div>
<a id="a88ade1c65bbbb9b25a78e82003a71a7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88ade1c65bbbb9b25a78e82003a71a7c">&#9670;&nbsp;</a></span>kvm_init_mmu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_init_mmu </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l05538">5538</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;{</div>
<div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__mmu__role__regs.html">kvm_mmu_role_regs</a> regs = <a class="code" href="mmu_8c.html#abef7a85395cc30529b7306fb12566ecd">vcpu_to_role_regs</a>(vcpu);</div>
<div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;    <span class="keyword">union </span>kvm_cpu_role cpu_role = <a class="code" href="mmu_8c.html#a39c690691d8b166be323cb09d89be57d">kvm_calc_cpu_role</a>(vcpu, &amp;regs);</div>
<div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160; </div>
<div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="x86_8h.html#a661bc84e256a87cbd929ffb7c1f61b2f">mmu_is_nested</a>(vcpu))</div>
<div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;        <a class="code" href="mmu_8c.html#a8a6a76a1ef24ce48ce2378ac59cf5b20">init_kvm_nested_mmu</a>(vcpu, cpu_role);</div>
<div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="mmu_8c.html#ab96cbfdb088c3659bfd6117823de8e30">tdp_enabled</a>)</div>
<div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;        <a class="code" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35">init_kvm_tdp_mmu</a>(vcpu, cpu_role);</div>
<div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;        <a class="code" href="mmu_8c.html#a37d0224d142272ad59fd35b4a22c5937">init_kvm_softmmu</a>(vcpu, cpu_role);</div>
<div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;}</div>
<div class="ttc" id="ammu_8c_html_a2346100ce00fd4d842c51c4be6cbfe35"><div class="ttname"><a href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35">init_kvm_tdp_mmu</a></div><div class="ttdeci">static void init_kvm_tdp_mmu(struct kvm_vcpu *vcpu, union kvm_cpu_role cpu_role)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l05331">mmu.c:5331</a></div></div>
<div class="ttc" id="ammu_8c_html_a37d0224d142272ad59fd35b4a22c5937"><div class="ttname"><a href="mmu_8c.html#a37d0224d142272ad59fd35b4a22c5937">init_kvm_softmmu</a></div><div class="ttdeci">static void init_kvm_softmmu(struct kvm_vcpu *vcpu, union kvm_cpu_role cpu_role)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l05487">mmu.c:5487</a></div></div>
<div class="ttc" id="ammu_8c_html_a39c690691d8b166be323cb09d89be57d"><div class="ttname"><a href="mmu_8c.html#a39c690691d8b166be323cb09d89be57d">kvm_calc_cpu_role</a></div><div class="ttdeci">static union kvm_cpu_role kvm_calc_cpu_role(struct kvm_vcpu *vcpu, const struct kvm_mmu_role_regs *regs)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l05237">mmu.c:5244</a></div></div>
<div class="ttc" id="ammu_8c_html_a8a6a76a1ef24ce48ce2378ac59cf5b20"><div class="ttname"><a href="mmu_8c.html#a8a6a76a1ef24ce48ce2378ac59cf5b20">init_kvm_nested_mmu</a></div><div class="ttdeci">static void init_kvm_nested_mmu(struct kvm_vcpu *vcpu, union kvm_cpu_role new_mode)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l05499">mmu.c:5499</a></div></div>
<div class="ttc" id="ammu_8c_html_ab96cbfdb088c3659bfd6117823de8e30"><div class="ttname"><a href="mmu_8c.html#ab96cbfdb088c3659bfd6117823de8e30">tdp_enabled</a></div><div class="ttdeci">bool tdp_enabled</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l00106">mmu.c:106</a></div></div>
<div class="ttc" id="ammu_8c_html_abef7a85395cc30529b7306fb12566ecd"><div class="ttname"><a href="mmu_8c.html#abef7a85395cc30529b7306fb12566ecd">vcpu_to_role_regs</a></div><div class="ttdeci">static struct kvm_mmu_role_regs vcpu_to_role_regs(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l00242">mmu.c:247</a></div></div>
<div class="ttc" id="astructkvm__mmu__role__regs_html"><div class="ttname"><a href="structkvm__mmu__role__regs.html">kvm_mmu_role_regs</a></div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l00186">mmu.c:186</a></div></div>
<div class="ttc" id="ax86_8h_html_a661bc84e256a87cbd929ffb7c1f61b2f"><div class="ttname"><a href="x86_8h.html#a661bc84e256a87cbd929ffb7c1f61b2f">mmu_is_nested</a></div><div class="ttdeci">static bool mmu_is_nested(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8h_source.html#l00183">x86.h:183</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a88ade1c65bbbb9b25a78e82003a71a7c_cgraph.png" border="0" usemap="#ammu_8h_a88ade1c65bbbb9b25a78e82003a71a7c_cgraph" alt=""/></div>
<map name="ammu_8h_a88ade1c65bbbb9b25a78e82003a71a7c_cgraph" id="ammu_8h_a88ade1c65bbbb9b25a78e82003a71a7c_cgraph">
<area shape="rect" title=" " alt="" coords="5,884,125,911"/>
<area shape="rect" href="mmu_8c.html#a8a6a76a1ef24ce48ce2378ac59cf5b20" title=" " alt="" coords="607,352,777,379"/>
<area shape="rect" href="x86_8h.html#a661bc84e256a87cbd929ffb7c1f61b2f" title=" " alt="" coords="1811,1091,1936,1117"/>
<area shape="rect" href="mmu_8c.html#a37d0224d142272ad59fd35b4a22c5937" title=" " alt="" coords="175,453,319,480"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="618,579,766,605"/>
<area shape="rect" href="mmu_8c.html#a39c690691d8b166be323cb09d89be57d" title=" " alt="" coords="173,1167,320,1193"/>
<area shape="rect" href="mmu_8c.html#abef7a85395cc30529b7306fb12566ecd" title=" " alt="" coords="177,1217,317,1244"/>
<area shape="rect" href="mmu_8c.html#ad46ec95426c3d1db277984090f2ecbd1" title=" " alt="" coords="875,301,989,328"/>
<area shape="rect" href="x86_8h.html#aad3ee550e50892e0e340061479bb284d" title=" " alt="" coords="876,200,988,227"/>
<area shape="rect" href="x86_8h.html#abc2ffd79aced13c24f0c4143465d3d51" title=" " alt="" coords="900,77,964,104"/>
<area shape="rect" href="x86_8h.html#a716c9d1b6fc76fd454097cf39d640878" title=" " alt="" coords="890,251,974,277"/>
<area shape="rect" href="x86_8c.html#a868acd995069b75c021828d8990ce659" title=" " alt="" coords="847,403,1017,429"/>
<area shape="rect" href="kvm__cache__regs_8h.html#af767224dbef857e41165cd41a18e0c7d" title=" " alt="" coords="868,352,996,379"/>
<area shape="rect" href="mmu_8c.html#a2484adc402a0dc25cf9978152a678b00" title=" " alt="" coords="1095,1065,1267,1092"/>
<area shape="rect" href="mmu_8c.html#ac7b31af26c029f185ab41ed060228847" title=" " alt="" coords="857,454,1007,495"/>
<area shape="rect" href="kvm__cache__regs_8h.html#aa80de2ba11d877ef825788b0c9768378" title=" " alt="" coords="1371,107,1486,133"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="1569,81,1763,108"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a2b779657b20f7afa44c0172b1478ac65" title=" " alt="" coords="1107,5,1254,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a24ffc81fe5ed7998e29134351275b4dd" title=" " alt="" coords="1356,5,1501,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a16b29ca8796e3da212a8faf1b2dc7ff3" title=" " alt="" coords="1107,56,1254,83"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a5fbb40e1f7661ccfd5accdaef3d8c378" title=" " alt="" coords="1356,56,1501,83"/>
<area shape="rect" href="kvm__cache__regs_8h.html#afbcfc413ceedb460734eb5fd7c5c4fbc" title=" " alt="" coords="1606,299,1726,325"/>
<area shape="rect" href="x86_8c.html#a25ebb513e6e81d17277fadec1597835a" title=" " alt="" coords="1081,259,1280,285"/>
<area shape="rect" href="x86_8c.html#a28de704e0172e28f1f108b20d606458b" title=" " alt="" coords="1581,211,1751,253"/>
<area shape="rect" href="x86_8c.html#a9a6f9a3892e36b8251d551192dc20a6f" title=" " alt="" coords="1337,259,1520,285"/>
<area shape="rect" href="mmu_8h.html#a937b5147c498fb7bdafb70240b735089" title=" " alt="" coords="1355,1065,1502,1092"/>
<area shape="rect" href="mmu_8h.html#aa47e04c0739bc10134b493cc8bfb0dc6" title=" " alt="" coords="1585,1065,1747,1092"/>
<area shape="rect" href="mmu_8c.html#acf22177805abdc960c48327675111025" title=" " alt="" coords="1139,512,1222,539"/>
<area shape="rect" href="mmu_8c.html#a7c03a09eaa19dd03710b5221a58f49db" title=" " alt="" coords="1073,411,1288,437"/>
<area shape="rect" href="mmu_8c.html#a2e6bb9bbf6a14b07e8c12c8926547c04" title=" " alt="" coords="1077,461,1284,488"/>
<area shape="rect" href="mmu_8c.html#aa8502cc81aa39d5c4631d6208ce15732" title=" " alt="" coords="1099,360,1262,387"/>
<area shape="rect" href="mmu_8c.html#aca62a749439306019073c5d5e04fe3e9" title=" " alt="" coords="1336,687,1521,713"/>
<area shape="rect" href="cpuid_8h.html#acf67f5848a2ddd59dc852e37bc330390" title=" " alt="" coords="1369,385,1488,412"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1351,437,1506,478"/>
<area shape="rect" href="mmu_8c.html#a3e794d802eeb843cd6d7b699b74d8bf3" title=" " alt="" coords="368,740,545,767"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="593,885,791,912"/>
<area shape="rect" href="mmu_8c.html#ab10aac90278ac25bf40eccc8b199e407" title=" " alt="" coords="887,921,977,948"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="845,1037,1019,1064"/>
<area shape="rect" href="mmu_8c.html#a7c56b83db04e9d0edb2ebe2c86b780dc" title=" " alt="" coords="849,972,1015,999"/>
<area shape="rect" href="mmu_8c.html#a07ee66bdf73e200ebc9bbf56be2ebe35" title=" " alt="" coords="839,571,1025,613"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="855,688,1009,715"/>
<area shape="rect" href="mmu_8c.html#aa07388cb60927549be1da4ea8e2bea60" title=" " alt="" coords="845,754,1019,795"/>
<area shape="rect" href="cpuid_8h.html#a1678e00b10264045277c1abfcb6eec3e" title=" " alt="" coords="1107,563,1254,589"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1113,745,1248,772"/>
<area shape="rect" href="mmu__internal_8h.html#a8805295a6f11129455d5b87a86fd3db5" title=" " alt="" coords="1105,796,1256,823"/>
<area shape="rect" href="mmu_8h.html#a11c275bc8cfad409c0681f0c953ebcae" title=" " alt="" coords="1087,614,1274,655"/>
<area shape="rect" href="mtrr_8c.html#ae3f4e197f50db225e34de21d65633fcb" title=" " alt="" coords="1101,679,1260,721"/>
<area shape="rect" href="mmu_8c.html#a933710db54d61c7ed41888c23c37f37d" title=" " alt="" coords="1109,949,1252,990"/>
<area shape="rect" href="mmu_8c.html#ae93f7c991f6a8e00c58147d6f5ffc690" title=" " alt="" coords="1113,1015,1248,1041"/>
<area shape="rect" href="mmu_8c.html#a2621cfd78deaa642ed4b0ef5ada8a71f" title=" " alt="" coords="1110,897,1251,924"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a88ade1c65bbbb9b25a78e82003a71a7c_icgraph.png" border="0" usemap="#ammu_8h_a88ade1c65bbbb9b25a78e82003a71a7c_icgraph" alt=""/></div>
<map name="ammu_8h_a88ade1c65bbbb9b25a78e82003a71a7c_icgraph" id="ammu_8h_a88ade1c65bbbb9b25a78e82003a71a7c_icgraph">
<area shape="rect" title=" " alt="" coords="1407,587,1527,613"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="683,5,855,32"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="1171,392,1359,419"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="953,587,1093,613"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="1183,905,1346,932"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="1183,704,1347,731"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="413,5,613,32"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="719,275,818,301"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="970,392,1077,419"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="721,224,817,251"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="924,172,1123,199"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="953,536,1093,563"/>
<area shape="rect" href="smm_8c.html#a5382946234c910e05c6e2c09aff15713" title=" " alt="" coords="947,337,1100,364"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="959,95,1088,121"/>
<area shape="rect" href="vmx_2nested_8c.html#a001f930db9a867e828cf01b48d3e4e25" title=" " alt="" coords="946,638,1101,679"/>
<area shape="rect" href="x86_8c.html#a420caf80521ab8d6ef7218d5dd26d47f" title=" " alt="" coords="986,468,1061,495"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,263,350,305"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="469,329,556,356"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,329,129,356"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,329,364,356"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="433,380,592,407"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="427,210,598,251"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="202,157,339,184"/>
<area shape="rect" href="cpuid_8c.html#ae8f7489a3e05a9bcd5dfdae82c33d618" title=" " alt="" coords="692,158,845,199"/>
<area shape="rect" href="cpuid_8c.html#a0ff60eac33c1bf95a3889674e34251ad" title=" " alt="" coords="453,159,573,185"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="735,595,802,621"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="716,645,821,672"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="453,645,572,672"/>
<area shape="rect" href="smm_8c.html#a0943012ff008c7999f582998f0f9167a" title=" " alt="" coords="431,493,595,520"/>
<area shape="rect" href="x86_8c.html#a86812e4228865668099921709e1c2f26" title=" " alt="" coords="449,544,576,571"/>
<area shape="rect" href="vmx_8c.html#ac02e59b539f5874eaeb4b12568e9d0dd" title=" " alt="" coords="453,747,573,773"/>
<area shape="rect" href="x86_8c.html#abe99237e5fd6f33407bc30aa2647e0db" title=" " alt="" coords="466,696,559,723"/>
<area shape="rect" href="smm_8c.html#a0c50da2c4874eda6d67766974a476019" title=" " alt="" coords="412,595,613,621"/>
<area shape="rect" href="x86_8c.html#a39acca4a1624a86a5d8e547339729536" title=" " alt="" coords="716,544,821,571"/>
<area shape="rect" href="x86_8c.html#ad6f80d324684bb9f6674522e5d84dccc" title=" " alt="" coords="691,326,846,367"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="419,108,606,135"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="683,56,854,83"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="691,696,846,723"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="681,493,856,520"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="934,1015,1113,1041"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="946,880,1101,907"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="939,931,1107,957"/>
<area shape="rect" href="svm_2nested_8c.html#a4ec7e878f6af209e74dd84285ee0198f" title=" " alt="" coords="693,1032,844,1059"/>
<area shape="rect" href="svm_2nested_8c.html#a777240cb9ab00451d21a1b204e19c5a6" title=" " alt="" coords="673,981,865,1008"/>
<area shape="rect" href="svm_2nested_8c.html#a03b4be7ca82710ecd17bc66f2a20cad8" title=" " alt="" coords="661,747,876,789"/>
<area shape="rect" href="svm_2nested_8c.html#a574acca11f4be4ea5df18f36307f9bf6" title=" " alt="" coords="667,813,871,840"/>
<area shape="rect" href="svm_8h.html#a7b2d87885eea1b11b1bf1045c21c5a8b" title=" " alt="" coords="666,864,871,891"/>
<area shape="rect" href="svm_2hyperv_8c.html#a33efa5fe6a664e9b2a70232b93485645" title=" " alt="" coords="677,915,860,957"/>
<area shape="rect" href="vmx_2nested_8c.html#a06a397c328d1656bb4d3ab073878e6f0" title=" " alt="" coords="932,704,1115,731"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="958,755,1089,781"/>
</map>
</div>

</div>
</div>
<a id="abdc5c43e54aca7335b2a438095cb98bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdc5c43e54aca7335b2a438095cb98bf">&#9670;&nbsp;</a></span>kvm_init_shadow_ept_mmu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_init_shadow_ept_mmu </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>execonly</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>huge_page_level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>accessed_dirty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpa_t&#160;</td>
          <td class="paramname"><em>new_eptp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l05458">5458</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;{</div>
<div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;    <span class="keyword">struct </span>kvm_mmu *context = &amp;vcpu-&gt;arch.guest_mmu;</div>
<div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;    u8 level = vmx_eptp_page_walk_level(new_eptp);</div>
<div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;    <span class="keyword">union </span>kvm_cpu_role new_mode =</div>
<div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;        <a class="code" href="mmu_8c.html#a217ca72deedca34c762fa229e2eeadc9">kvm_calc_shadow_ept_root_page_role</a>(vcpu, accessed_dirty,</div>
<div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;                           execonly, level);</div>
<div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160; </div>
<div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;    <span class="keywordflow">if</span> (new_mode.as_u64 != context-&gt;cpu_role.as_u64) {</div>
<div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;        <span class="comment">/* EPT, and thus nested EPT, does not consume CR0, CR4, nor EFER. */</span></div>
<div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;        context-&gt;cpu_role.as_u64 = new_mode.as_u64;</div>
<div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;        context-&gt;root_role.word = new_mode.base.word;</div>
<div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160; </div>
<div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;        context-&gt;page_fault = ept_page_fault;</div>
<div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;        context-&gt;gva_to_gpa = ept_gva_to_gpa;</div>
<div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;        context-&gt;sync_spte = ept_sync_spte;</div>
<div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160; </div>
<div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;        <a class="code" href="mmu_8c.html#a2e6bb9bbf6a14b07e8c12c8926547c04">update_permission_bitmask</a>(context, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;        context-&gt;pkru_mask = 0;</div>
<div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;        <a class="code" href="mmu_8c.html#a7072fc14301de7b9f8769ca84d669cf2">reset_rsvds_bits_mask_ept</a>(vcpu, context, execonly, huge_page_level);</div>
<div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;        <a class="code" href="mmu_8c.html#a0f431aaee6add30304bcf5cb5fa1465d">reset_ept_shadow_zero_bits_mask</a>(context, execonly);</div>
<div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;    }</div>
<div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160; </div>
<div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;    <a class="code" href="mmu_8c.html#a40fe74f8abc723be216276bf005e4be8">kvm_mmu_new_pgd</a>(vcpu, new_eptp);</div>
<div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;}</div>
<div class="ttc" id="ammu_8c_html_a0f431aaee6add30304bcf5cb5fa1465d"><div class="ttname"><a href="mmu_8c.html#a0f431aaee6add30304bcf5cb5fa1465d">reset_ept_shadow_zero_bits_mask</a></div><div class="ttdeci">static void reset_ept_shadow_zero_bits_mask(struct kvm_mmu *context, bool execonly)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l05062">mmu.c:5062</a></div></div>
<div class="ttc" id="ammu_8c_html_a217ca72deedca34c762fa229e2eeadc9"><div class="ttname"><a href="mmu_8c.html#a217ca72deedca34c762fa229e2eeadc9">kvm_calc_shadow_ept_root_page_role</a></div><div class="ttdeci">static union kvm_cpu_role kvm_calc_shadow_ept_root_page_role(struct kvm_vcpu *vcpu, bool accessed_dirty, bool execonly, u8 level)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l05431">mmu.c:5434</a></div></div>
<div class="ttc" id="ammu_8c_html_a2e6bb9bbf6a14b07e8c12c8926547c04"><div class="ttname"><a href="mmu_8c.html#a2e6bb9bbf6a14b07e8c12c8926547c04">update_permission_bitmask</a></div><div class="ttdeci">static void update_permission_bitmask(struct kvm_mmu *mmu, bool ept)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l05079">mmu.c:5079</a></div></div>
<div class="ttc" id="ammu_8c_html_a40fe74f8abc723be216276bf005e4be8"><div class="ttname"><a href="mmu_8c.html#a40fe74f8abc723be216276bf005e4be8">kvm_mmu_new_pgd</a></div><div class="ttdeci">void kvm_mmu_new_pgd(struct kvm_vcpu *vcpu, gpa_t new_pgd)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l04753">mmu.c:4753</a></div></div>
<div class="ttc" id="ammu_8c_html_a7072fc14301de7b9f8769ca84d669cf2"><div class="ttname"><a href="mmu_8c.html#a7072fc14301de7b9f8769ca84d669cf2">reset_rsvds_bits_mask_ept</a></div><div class="ttdeci">static void reset_rsvds_bits_mask_ept(struct kvm_vcpu *vcpu, struct kvm_mmu *context, bool execonly, int huge_page_level)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l04966">mmu.c:4966</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_abdc5c43e54aca7335b2a438095cb98bf_cgraph.png" border="0" usemap="#ammu_8h_abdc5c43e54aca7335b2a438095cb98bf_cgraph" alt=""/></div>
<map name="ammu_8h_abdc5c43e54aca7335b2a438095cb98bf_cgraph" id="ammu_8h_abdc5c43e54aca7335b2a438095cb98bf_cgraph">
<area shape="rect" title=" " alt="" coords="5,174,211,201"/>
<area shape="rect" href="mmu_8c.html#a217ca72deedca34c762fa229e2eeadc9" title=" " alt="" coords="277,53,447,95"/>
<area shape="rect" href="mmu_8c.html#a40fe74f8abc723be216276bf005e4be8" title=" " alt="" coords="283,119,441,146"/>
<area shape="rect" href="mmu_8c.html#a0f431aaee6add30304bcf5cb5fa1465d" title=" " alt="" coords="275,225,449,267"/>
<area shape="rect" href="mmu_8c.html#a7072fc14301de7b9f8769ca84d669cf2" title=" " alt="" coords="263,174,461,201"/>
<area shape="rect" href="mmu_8c.html#a2e6bb9bbf6a14b07e8c12c8926547c04" title=" " alt="" coords="259,291,465,318"/>
<area shape="rect" href="mmu_8c.html#abb5019ac7518fb7c882332a480e20896" title=" " alt="" coords="513,108,703,149"/>
<area shape="rect" href="mmu_8c.html#a0e7f249026693e08d3c8b70f7ffd5003" title=" " alt="" coords="545,174,671,201"/>
<area shape="rect" href="spte_8h.html#ab169c1872e98b9731a05121e0439f244" title=" " alt="" coords="1473,82,1564,109"/>
<area shape="rect" href="x86_8h.html#a0647452067d01e527a8cd1da2fb6b897" title=" " alt="" coords="523,57,693,83"/>
<area shape="rect" href="mmu_8c.html#accc9c990bf354ea4f50d7e9c2deee3e4" title=" " alt="" coords="763,173,926,215"/>
<area shape="rect" href="mmu_8c.html#ab7d4e418cb85a72507e384df5027293e" title=" " alt="" coords="987,239,1152,266"/>
<area shape="rect" href="mmu_8c.html#a4c1a61da4d53df98eaea9c873cc90660" title=" " alt="" coords="751,108,939,149"/>
<area shape="rect" href="mmu_8c.html#a32155e8116997cb7c4a4a15ab3c7c6d6" title=" " alt="" coords="1011,115,1127,142"/>
<area shape="rect" href="mmu__internal_8h.html#a6491934fd3538f608b4b91245943b6fc" title=" " alt="" coords="1692,82,1892,109"/>
<area shape="rect" href="spte_8h.html#af8791b1ec453ef3bce3c87ea28744692" title=" " alt="" coords="2502,78,2633,105"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="2709,78,2840,105"/>
<area shape="rect" href="mmu_8c.html#ab8e14476297a48107341bc44a29b6af9" title=" " alt="" coords="1409,798,1628,825"/>
<area shape="rect" href="kvm__main_8c.html#aa8688eb80c9acaf8b0aa783b6ac68c16" title=" " alt="" coords="1234,361,1327,387"/>
<area shape="rect" href="mmu_8c.html#a5b648a843c7267d204fe81facbc9f84f" title=" " alt="" coords="1200,259,1361,286"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="1705,798,1879,825"/>
<area shape="rect" href="mmu_8c.html#a584797a273970c4c5a807189bdc0004e" title=" " alt="" coords="1681,849,1903,875"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="1956,733,2167,759"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="2215,728,2425,769"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="2484,761,2651,787"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="2473,710,2661,737"/>
<area shape="rect" href="mmu_8c.html#a61b041a986244b62aedac5b132cf2c09" title=" " alt="" coords="1972,837,2151,879"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="2480,297,2655,323"/>
<area shape="rect" href="mmu_8c.html#a69a9545d1380d3c51ec6fa0f9ff36555" title=" " alt="" coords="2227,845,2413,871"/>
<area shape="rect" href="tdp__mmu_8h.html#a166bc9e57a26e8a37e94e2314a72d226" title=" " alt="" coords="2249,626,2391,653"/>
<area shape="rect" href="mmu_8c.html#aa915f695d4c341eca7d1f5b5a0a26a03" title=" " alt="" coords="1409,259,1628,286"/>
<area shape="rect" href="tdp__mmu_8c.html#a8a9d637b546d8dfd125028f823a6eac0" title=" " alt="" coords="1428,681,1609,707"/>
<area shape="rect" href="mmu_8c.html#a01417b2ac70337a4419dc0f171bd548f" title=" " alt="" coords="1676,377,1908,403"/>
<area shape="rect" href="mmu_8c.html#a39242ba7b127ebf064de37a1224635cd" title=" " alt="" coords="2002,579,2121,606"/>
<area shape="rect" href="mmu_8c.html#abab2bb5454cc72ba2e4913a87e5800fe" title=" " alt="" coords="1972,209,2151,251"/>
<area shape="rect" href="mmu_8c.html#a9d4eccd9e1e1198a1e63d28b750efe83" title=" " alt="" coords="1964,275,2159,302"/>
<area shape="rect" href="mmu_8c.html#ac1f044f2e317d0cd567530208b7118ee" title=" " alt="" coords="1959,326,2164,353"/>
<area shape="rect" href="mmu_8c.html#a2a0cdee83771c8d171f5f809076773d2" title=" " alt="" coords="1966,377,2157,403"/>
<area shape="rect" href="mmu_8c.html#af8bc85c6e33cec42152e7982b1fb4cba" title=" " alt="" coords="1962,158,2161,185"/>
<area shape="rect" href="mmu_8c.html#a85d47efa797da896b3bb3cf1cc32d768" title=" " alt="" coords="2006,427,2117,454"/>
<area shape="rect" href="mmu_8c.html#a802c5b4f03cc2183d5a097abb661e90c" title=" " alt="" coords="1966,478,2157,505"/>
<area shape="rect" href="mmu_8c.html#ab0716e0d51f7a555f58f426cbfb6d890" title=" " alt="" coords="1980,529,2143,555"/>
<area shape="rect" href="mmu_8c.html#a5d549ae5b6c13e9b87ccc13127ddf86a" title=" " alt="" coords="2243,195,2397,222"/>
<area shape="rect" href="mmu_8c.html#afa9309dada333ba442f20329ecd94033" title=" " alt="" coords="2503,221,2631,247"/>
<area shape="rect" href="mmu_8c.html#ac65268f7bfa05d3c874b604bd3b792b5" title=" " alt="" coords="2262,297,2378,323"/>
<area shape="rect" href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279" title=" " alt="" coords="1709,732,1875,773"/>
<area shape="rect" href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b" title=" " alt="" coords="1992,783,2131,810"/>
<area shape="rect" href="mmu_8c.html#a933710db54d61c7ed41888c23c37f37d" title=" " alt="" coords="537,225,679,267"/>
<area shape="rect" href="mmu_8c.html#a2621cfd78deaa642ed4b0ef5ada8a71f" title=" " alt="" coords="537,291,679,318"/>
<area shape="rect" href="mmu_8h.html#a20a41b0166b13eb22b15786964f5de9d" title=" " alt="" coords="804,290,885,317"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_abdc5c43e54aca7335b2a438095cb98bf_icgraph.png" border="0" usemap="#ammu_8h_abdc5c43e54aca7335b2a438095cb98bf_icgraph" alt=""/></div>
<map name="ammu_8h_abdc5c43e54aca7335b2a438095cb98bf_icgraph" id="ammu_8h_abdc5c43e54aca7335b2a438095cb98bf_icgraph">
<area shape="rect" title=" " alt="" coords="1044,42,1249,69"/>
<area shape="rect" href="vmx_2nested_8c.html#a0b3f5e5d7c26f6301089970b32f1d771" title=" " alt="" coords="832,42,996,69"/>
<area shape="rect" href="vmx_2nested_8c.html#a6a1c45a52fde9844f4431a9db00dbf9f" title=" " alt="" coords="599,5,762,47"/>
<area shape="rect" href="vmx_2nested_8c.html#ad874dd59254c34b16ae48fffb4ebbf1f" title=" " alt="" coords="577,71,784,98"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="399,13,529,39"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="403,71,525,98"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="180,64,351,105"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="5,71,132,98"/>
</map>
</div>

</div>
</div>
<a id="a00f26353045c597f6a49cdd4f239f548"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00f26353045c597f6a49cdd4f239f548">&#9670;&nbsp;</a></span>kvm_init_shadow_npt_mmu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_init_shadow_npt_mmu </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>cr0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>cr4</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>efer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpa_t&#160;</td>
          <td class="paramname"><em>nested_cr3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l05407">5407</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;{</div>
<div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;    <span class="keyword">struct </span>kvm_mmu *context = &amp;vcpu-&gt;arch.guest_mmu;</div>
<div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__mmu__role__regs.html">kvm_mmu_role_regs</a> regs = {</div>
<div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;        .<a class="code" href="structkvm__mmu__role__regs.html#ae8d2b49b2071b5e8dbb139d81b853170">cr0</a> = <a class="code" href="structkvm__mmu__role__regs.html#ae8d2b49b2071b5e8dbb139d81b853170">cr0</a>,</div>
<div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;        .cr4 = <a class="code" href="structkvm__mmu__role__regs.html#a6f0a642c4d8f05208d33200c8f4f84a5">cr4</a> &amp; ~X86_CR4_PKE,</div>
<div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;        .efer = <a class="code" href="structkvm__mmu__role__regs.html#ac9b4bfbf1a79551cf0bf45a955071f40">efer</a>,</div>
<div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;    };</div>
<div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;    <span class="keyword">union </span>kvm_cpu_role cpu_role = <a class="code" href="mmu_8c.html#a39c690691d8b166be323cb09d89be57d">kvm_calc_cpu_role</a>(vcpu, &amp;regs);</div>
<div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;    <span class="keyword">union </span>kvm_mmu_page_role root_role;</div>
<div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160; </div>
<div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;    <span class="comment">/* NPT requires CR0.PG=1. */</span></div>
<div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;    WARN_ON_ONCE(cpu_role.base.direct);</div>
<div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160; </div>
<div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;    root_role = cpu_role.base;</div>
<div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;    root_role.level = <a class="code" href="mmu_8c.html#aaa9aff2116b9dcd3a7d4386aafce4eb9">kvm_mmu_get_tdp_level</a>(vcpu);</div>
<div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;    <span class="keywordflow">if</span> (root_role.level == <a class="code" href="mmu_8h.html#a19051c7c7463cebcb4d2f335e546499c">PT64_ROOT_5LEVEL</a> &amp;&amp;</div>
<div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;        cpu_role.base.level == <a class="code" href="mmu_8h.html#ac16f657d0a07511b24afa81de87e2404">PT64_ROOT_4LEVEL</a>)</div>
<div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;        root_role.passthrough = 1;</div>
<div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160; </div>
<div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;    <a class="code" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf">shadow_mmu_init_context</a>(vcpu, context, cpu_role, root_role);</div>
<div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;    <a class="code" href="mmu_8c.html#a40fe74f8abc723be216276bf005e4be8">kvm_mmu_new_pgd</a>(vcpu, nested_cr3);</div>
<div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;}</div>
<div class="ttc" id="ammu_8c_html_aaa9aff2116b9dcd3a7d4386aafce4eb9"><div class="ttname"><a href="mmu_8c.html#aaa9aff2116b9dcd3a7d4386aafce4eb9">kvm_mmu_get_tdp_level</a></div><div class="ttdeci">static int kvm_mmu_get_tdp_level(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l05299">mmu.c:5299</a></div></div>
<div class="ttc" id="ammu_8c_html_abd9285ed33f21279b97f214287ab49bf"><div class="ttname"><a href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf">shadow_mmu_init_context</a></div><div class="ttdeci">static void shadow_mmu_init_context(struct kvm_vcpu *vcpu, struct kvm_mmu *context, union kvm_cpu_role cpu_role, union kvm_mmu_page_role root_role)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l05360">mmu.c:5360</a></div></div>
<div class="ttc" id="ammu_8h_html_a19051c7c7463cebcb4d2f335e546499c"><div class="ttname"><a href="mmu_8h.html#a19051c7c7463cebcb4d2f335e546499c">PT64_ROOT_5LEVEL</a></div><div class="ttdeci">#define PT64_ROOT_5LEVEL</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00034">mmu.h:34</a></div></div>
<div class="ttc" id="ammu_8h_html_ac16f657d0a07511b24afa81de87e2404"><div class="ttname"><a href="mmu_8h.html#ac16f657d0a07511b24afa81de87e2404">PT64_ROOT_4LEVEL</a></div><div class="ttdeci">#define PT64_ROOT_4LEVEL</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00035">mmu.h:35</a></div></div>
<div class="ttc" id="astructkvm__mmu__role__regs_html_a6f0a642c4d8f05208d33200c8f4f84a5"><div class="ttname"><a href="structkvm__mmu__role__regs.html#a6f0a642c4d8f05208d33200c8f4f84a5">kvm_mmu_role_regs::cr4</a></div><div class="ttdeci">const unsigned long cr4</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l00188">mmu.c:188</a></div></div>
<div class="ttc" id="astructkvm__mmu__role__regs_html_ac9b4bfbf1a79551cf0bf45a955071f40"><div class="ttname"><a href="structkvm__mmu__role__regs.html#ac9b4bfbf1a79551cf0bf45a955071f40">kvm_mmu_role_regs::efer</a></div><div class="ttdeci">const u64 efer</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l00189">mmu.c:189</a></div></div>
<div class="ttc" id="astructkvm__mmu__role__regs_html_ae8d2b49b2071b5e8dbb139d81b853170"><div class="ttname"><a href="structkvm__mmu__role__regs.html#ae8d2b49b2071b5e8dbb139d81b853170">kvm_mmu_role_regs::cr0</a></div><div class="ttdeci">const unsigned long cr0</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l00187">mmu.c:187</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a00f26353045c597f6a49cdd4f239f548_cgraph.png" border="0" usemap="#ammu_8h_a00f26353045c597f6a49cdd4f239f548_cgraph" alt=""/></div>
<map name="ammu_8h_a00f26353045c597f6a49cdd4f239f548_cgraph" id="ammu_8h_a00f26353045c597f6a49cdd4f239f548_cgraph">
<area shape="rect" title=" " alt="" coords="5,159,211,185"/>
<area shape="rect" href="mmu_8c.html#a39c690691d8b166be323cb09d89be57d" title=" " alt="" coords="284,83,431,109"/>
<area shape="rect" href="mmu_8c.html#aaa9aff2116b9dcd3a7d4386aafce4eb9" title=" " alt="" coords="264,133,451,160"/>
<area shape="rect" href="mmu_8c.html#a40fe74f8abc723be216276bf005e4be8" title=" " alt="" coords="279,184,436,211"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="259,656,456,683"/>
<area shape="rect" href="mmu_8c.html#abb5019ac7518fb7c882332a480e20896" title=" " alt="" coords="504,235,693,277"/>
<area shape="rect" href="mmu_8c.html#a0e7f249026693e08d3c8b70f7ffd5003" title=" " alt="" coords="535,133,662,160"/>
<area shape="rect" href="spte_8h.html#ab169c1872e98b9731a05121e0439f244" title=" " alt="" coords="1576,144,1667,171"/>
<area shape="rect" href="x86_8h.html#a0647452067d01e527a8cd1da2fb6b897" title=" " alt="" coords="514,184,683,211"/>
<area shape="rect" href="mmu_8c.html#accc9c990bf354ea4f50d7e9c2deee3e4" title=" " alt="" coords="771,159,933,201"/>
<area shape="rect" href="mmu_8c.html#ab7d4e418cb85a72507e384df5027293e" title=" " alt="" coords="1021,225,1186,252"/>
<area shape="rect" href="mmu_8c.html#a4c1a61da4d53df98eaea9c873cc90660" title=" " alt="" coords="758,94,946,135"/>
<area shape="rect" href="mmu_8c.html#a32155e8116997cb7c4a4a15ab3c7c6d6" title=" " alt="" coords="1045,101,1161,128"/>
<area shape="rect" href="mmu__internal_8h.html#a6491934fd3538f608b4b91245943b6fc" title=" " alt="" coords="1780,220,1980,247"/>
<area shape="rect" href="spte_8h.html#af8791b1ec453ef3bce3c87ea28744692" title=" " alt="" coords="1815,144,1945,171"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="2028,144,2159,171"/>
<area shape="rect" href="mmu_8c.html#ab8e14476297a48107341bc44a29b6af9" title=" " alt="" coords="1244,423,1463,449"/>
<area shape="rect" href="kvm__main_8c.html#aa8688eb80c9acaf8b0aa783b6ac68c16" title=" " alt="" coords="1307,144,1400,171"/>
<area shape="rect" href="mmu_8c.html#a5b648a843c7267d204fe81facbc9f84f" title=" " alt="" coords="1273,296,1434,323"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="1534,473,1709,500"/>
<area shape="rect" href="mmu_8c.html#a584797a273970c4c5a807189bdc0004e" title=" " alt="" coords="1511,423,1732,449"/>
<area shape="rect" href="tdp__mmu_8h.html#a166bc9e57a26e8a37e94e2314a72d226" title=" " alt="" coords="1809,321,1951,348"/>
<area shape="rect" href="mmu_8c.html#aa915f695d4c341eca7d1f5b5a0a26a03" title=" " alt="" coords="1512,321,1731,348"/>
<area shape="rect" href="tdp__mmu_8c.html#a8a9d637b546d8dfd125028f823a6eac0" title=" " alt="" coords="1531,372,1712,399"/>
<area shape="rect" href="mmu_8c.html#acf22177805abdc960c48327675111025" title=" " alt="" coords="811,783,893,809"/>
<area shape="rect" href="mmu_8c.html#ab10aac90278ac25bf40eccc8b199e407" title=" " alt="" coords="553,580,644,607"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="511,529,686,556"/>
<area shape="rect" href="mmu_8c.html#a7c56b83db04e9d0edb2ebe2c86b780dc" title=" " alt="" coords="515,631,682,657"/>
<area shape="rect" href="mmu_8c.html#ab80d3180ea710a0c1320ce66d32293ce" title=" " alt="" coords="515,681,682,708"/>
<area shape="rect" href="mmu_8c.html#ac7b31af26c029f185ab41ed060228847" title=" " alt="" coords="524,834,673,875"/>
<area shape="rect" href="mmu_8c.html#af9097af8c7f507ad527d445389b1b0b5" title=" " alt="" coords="741,732,963,759"/>
<area shape="rect" href="mmu_8c.html#a2484adc402a0dc25cf9978152a678b00" title=" " alt="" coords="766,603,938,629"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="769,529,935,556"/>
<area shape="rect" href="mmu_8h.html#a937b5147c498fb7bdafb70240b735089" title=" " alt="" coords="1030,613,1177,640"/>
<area shape="rect" href="mmu_8h.html#aa47e04c0739bc10134b493cc8bfb0dc6" title=" " alt="" coords="1272,625,1435,652"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1036,529,1171,556"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="1306,575,1401,601"/>
<area shape="rect" href="mmu_8c.html#a7c03a09eaa19dd03710b5221a58f49db" title=" " alt="" coords="745,935,959,961"/>
<area shape="rect" href="mmu_8c.html#a2e6bb9bbf6a14b07e8c12c8926547c04" title=" " alt="" coords="749,833,955,860"/>
<area shape="rect" href="mmu_8c.html#aa8502cc81aa39d5c4631d6208ce15732" title=" " alt="" coords="771,884,933,911"/>
<area shape="rect" href="mmu_8c.html#aca62a749439306019073c5d5e04fe3e9" title=" " alt="" coords="1011,788,1196,815"/>
<area shape="rect" href="cpuid_8h.html#acf67f5848a2ddd59dc852e37bc330390" title=" " alt="" coords="1044,868,1163,895"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1026,927,1181,969"/>
<area shape="rect" href="mmu_8c.html#a2096473262912949e7dfdbe6f7b7457f" title=" " alt="" coords="1292,788,1415,815"/>
<area shape="rect" href="mmu_8h.html#a20a41b0166b13eb22b15786964f5de9d" title=" " alt="" coords="1313,737,1394,764"/>
<area shape="rect" href="cpuid_8h.html#a786eea4c1fa59be0155455a72125e0ff" title=" " alt="" coords="1535,878,1708,919"/>
<area shape="rect" href="cpuid_8h.html#a72da5444b01d72d935ebc411b99ba166" title=" " alt="" coords="1258,860,1449,887"/>
<area shape="rect" href="x86_8h.html#a46aba02424c106f3cdb462fd774f54f4" title=" " alt="" coords="1072,687,1135,713"/>
<area shape="rect" href="mmu_8c.html#a2621cfd78deaa642ed4b0ef5ada8a71f" title=" " alt="" coords="1033,737,1174,764"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a2b779657b20f7afa44c0172b1478ac65" title=" " alt="" coords="1280,687,1427,713"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a00f26353045c597f6a49cdd4f239f548_icgraph.png" border="0" usemap="#ammu_8h_a00f26353045c597f6a49cdd4f239f548_icgraph" alt=""/></div>
<map name="ammu_8h_a00f26353045c597f6a49cdd4f239f548_icgraph" id="ammu_8h_a00f26353045c597f6a49cdd4f239f548_icgraph">
<area shape="rect" title=" " alt="" coords="1443,31,1648,57"/>
<area shape="rect" href="svm_2nested_8c.html#a962af1ea814d32a42ada9f601918cee5" title=" " alt="" coords="1224,23,1395,65"/>
<area shape="rect" href="svm_2nested_8c.html#ab7904bb74631114e0bd5102a52aab4c8" title=" " alt="" coords="993,23,1176,65"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="767,5,945,32"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="772,56,940,83"/>
<area shape="rect" href="svm_2nested_8c.html#a4ec7e878f6af209e74dd84285ee0198f" title=" " alt="" coords="568,5,719,32"/>
<area shape="rect" href="svm_8c.html#a5d52c93beeb85ba5a99283d4eba589e1" title=" " alt="" coords="371,5,520,32"/>
<area shape="rect" href="svm_8c.html#a1eacc7b79f62ed332056217c35fe3be4" title=" " alt="" coords="176,5,323,32"/>
<area shape="rect" href="svm_8c.html#a7c2323b13a5022aa9f6a9ae5ebe4d830" title=" " alt="" coords="5,5,128,32"/>
</map>
</div>

</div>
</div>
<a id="ac9867cac2f7c0a763088b2112951b5ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9867cac2f7c0a763088b2112951b5ac">&#9670;&nbsp;</a></span>kvm_memslots_have_rmaps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_memslots_have_rmaps </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00279">279</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;{</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="mmu_8h.html#a1e6b88ba1c393126e54e78a220a4473f">tdp_mmu_enabled</a> || <a class="code" href="mmu_8h.html#a89c85e383e0f6dfe6f91f5c1dd25e522">kvm_shadow_root_allocated</a>(kvm);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;}</div>
<div class="ttc" id="ammu_8h_html_a1e6b88ba1c393126e54e78a220a4473f"><div class="ttname"><a href="mmu_8h.html#a1e6b88ba1c393126e54e78a220a4473f">tdp_mmu_enabled</a></div><div class="ttdeci">#define tdp_mmu_enabled</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00276">mmu.h:276</a></div></div>
<div class="ttc" id="ammu_8h_html_a89c85e383e0f6dfe6f91f5c1dd25e522"><div class="ttname"><a href="mmu_8h.html#a89c85e383e0f6dfe6f91f5c1dd25e522">kvm_shadow_root_allocated</a></div><div class="ttdeci">static bool kvm_shadow_root_allocated(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00262">mmu.h:262</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_ac9867cac2f7c0a763088b2112951b5ac_cgraph.png" border="0" usemap="#ammu_8h_ac9867cac2f7c0a763088b2112951b5ac_cgraph" alt=""/></div>
<map name="ammu_8h_ac9867cac2f7c0a763088b2112951b5ac_cgraph" id="ammu_8h_ac9867cac2f7c0a763088b2112951b5ac_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,216,32"/>
<area shape="rect" href="mmu_8h.html#a89c85e383e0f6dfe6f91f5c1dd25e522" title=" " alt="" coords="264,5,472,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_ac9867cac2f7c0a763088b2112951b5ac_icgraph.png" border="0" usemap="#ammu_8h_ac9867cac2f7c0a763088b2112951b5ac_icgraph" alt=""/></div>
<map name="ammu_8h_ac9867cac2f7c0a763088b2112951b5ac_icgraph" id="ammu_8h_ac9867cac2f7c0a763088b2112951b5ac_icgraph">
<area shape="rect" title=" " alt="" coords="1383,475,1593,501"/>
<area shape="rect" href="mmu_8c.html#a39977aaa99a2eb423e12429a5deb15dc" title=" " alt="" coords="1167,5,1278,32"/>
<area shape="rect" href="x86_8c.html#a1be4ac58e0429946d83b58f98bfe2301" title=" " alt="" coords="1111,56,1335,83"/>
<area shape="rect" href="mmu_8c.html#afeee4db4dd885d0e891ccb05f545c876" title=" " alt="" coords="1139,369,1307,410"/>
<area shape="rect" href="debugfs_8c.html#a036e43f2625e35a5d7d037b533b231be" title=" " alt="" coords="1116,696,1329,723"/>
<area shape="rect" href="mmu_8c.html#a1f49638b71a482e4b0c3a6af10d0711e" title=" " alt="" coords="1127,565,1318,606"/>
<area shape="rect" href="mmu_8c.html#acb92068f6e948846797ac6814b3618f1" title=" " alt="" coords="1125,107,1320,149"/>
<area shape="rect" href="mmu_8c.html#a168b7814e68a545abd8bf00fc4466610" title=" " alt="" coords="1133,173,1313,214"/>
<area shape="rect" href="mmu_8c.html#a073d9b7de8eaf977452c1eb7395a78d6" title=" " alt="" coords="1131,238,1314,279"/>
<area shape="rect" href="mmu_8c.html#a6abdd1728810c3f3ab8c2e1e6d2d37f0" title=" " alt="" coords="1127,434,1318,475"/>
<area shape="rect" href="mmu_8c.html#ace4eaa769a0c9e1f75a3900a51275d18" title=" " alt="" coords="1130,499,1315,541"/>
<area shape="rect" href="mmu_8c.html#a35da5538a61de05522efdad8f615df4f" title=" " alt="" coords="1123,303,1322,345"/>
<area shape="rect" href="mmu_8c.html#aafdb4964a081741c295ad440ae9ff0f4" title=" " alt="" coords="1125,747,1320,773"/>
<area shape="rect" href="mmu_8c.html#a978186d69e4a1b753b9650294d80ca7d" title=" " alt="" coords="1152,797,1293,824"/>
<area shape="rect" href="mmu_8c.html#a7045f4df80d26474c5fe995d02eebc35" title=" " alt="" coords="1151,848,1294,875"/>
<area shape="rect" href="mmu_8c.html#aa37fc9ea36d6c97e97d77af76eca5767" title=" " alt="" coords="1135,899,1310,925"/>
<area shape="rect" href="mmu_8c.html#adae854f3c74003a87a9c2a3ae8feada3" title=" " alt="" coords="1133,630,1312,671"/>
<area shape="rect" href="x86_8c.html#a14568e065745512e03b3088070848289" title=" " alt="" coords="855,78,1060,119"/>
<area shape="rect" href="kvm__main_8c.html#a6dd13a049fee9663450eebbf2ac16faa" title=" " alt="" coords="616,85,787,126"/>
<area shape="rect" href="kvm__main_8c.html#ac81a7d714d0668ccea6d0c2ddfd0fed5" title=" " alt="" coords="49,124,192,151"/>
<area shape="rect" href="mmu_8c.html#a035ec39ab60e2a3d382c272b15fc83a6" title=" " alt="" coords="868,430,1047,471"/>
<area shape="rect" href="dirty__ring_8c.html#a68052369106191fbc506fdf4d64be449" title=" " alt="" coords="623,437,779,464"/>
<area shape="rect" href="dirty__ring_8c.html#a33f93cefad4ed59214fb8dbf36de7dd1" title=" " alt="" coords="337,437,497,464"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="852,699,1063,725"/>
<area shape="rect" href="page__track_8c.html#ab6a4ffea76ea12eb3b1e83eafaf4618b" title=" " alt="" coords="855,547,1059,573"/>
<area shape="rect" href="mmu_8c.html#aec5cf4265713109c5e2ea673c610cd03" title=" " alt="" coords="628,496,775,523"/>
<area shape="rect" href="mmu_8c.html#a2e21344d37e1f1c8c347bed8627da8db" title=" " alt="" coords="852,597,1063,624"/>
<area shape="rect" href="mmu_8c.html#a6f305a17525ee7345f0f852070869e4c" title=" " alt="" coords="304,496,531,523"/>
<area shape="rect" href="mmu_8c.html#a1ade612e5d4a58575df9428f6ad72bb9" title=" " alt="" coords="5,496,236,523"/>
<area shape="rect" href="mmu_8c.html#a2f33377dcdaf5435e453ff75e02075dd" title=" " alt="" coords="625,597,777,624"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="390,547,445,573"/>
<area shape="rect" href="mmu_8c.html#ab00408fb7acb0199782175051f59add6" title=" " alt="" coords="333,597,502,624"/>
<area shape="rect" href="mmu_8c.html#a475bd00898314bb9378d8e4306aa7874" title=" " alt="" coords="57,623,184,649"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="874,173,1041,214"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="599,158,804,199"/>
<area shape="rect" href="kvm__main_8c.html#a05eed662dd45e4e4f7485e3158d95a3b" title=" " alt="" coords="308,151,527,177"/>
<area shape="rect" href="mmu_8c.html#a8b2588158566c9bb798cdb77760e6446" title=" " alt="" coords="881,900,1034,927"/>
<area shape="rect" href="x86_8c.html#ac280f3f33408b1fead3c38127a2ab3e9" title=" " alt="" coords="626,806,777,847"/>
<area shape="rect" href="x86_8c.html#ab61af196de8a3705f59d9915b5eb1a0e" title=" " alt="" coords="603,893,800,934"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="631,999,771,1025"/>
<area shape="rect" href="mtrr_8c.html#aca604775fbcfad49bfaf9441fc2253dc" title=" " alt="" coords="650,1075,753,1101"/>
<area shape="rect" href="x86_8c.html#ae1ffb1252c0aa966c6d94279766427ca" title=" " alt="" coords="322,699,513,741"/>
<area shape="rect" href="x86_8c.html#a613f1a822aa2ffa29a32341ec8a92913" title=" " alt="" coords="328,765,507,806"/>
<area shape="rect" href="hyperv_8c.html#a9eaaad1dfbff166c751e725c9fcf73b6" title=" " alt="" coords="339,831,495,857"/>
<area shape="rect" href="x86_8c.html#a541cd35068f221456141f8798a1ab7c9" title=" " alt="" coords="284,881,551,908"/>
<area shape="rect" href="x86_8c.html#aab788793558a6c5c0cdc2e3ec840ebf6" title=" " alt="" coords="338,933,497,974"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="384,999,451,1025"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="365,1049,470,1076"/>
<area shape="rect" href="mtrr_8c.html#a2b95f238c68e317e64e57d06f2a698dd" title=" " alt="" coords="345,1100,490,1127"/>
<area shape="rect" href="mmu_8c.html#a1ede039d44aac6e8ff15be76c16411a1" title=" " alt="" coords="862,648,1053,675"/>
</map>
</div>

</div>
</div>
<a id="aa1e7a67c950b9d5bc46f7aaed6b5367c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1e7a67c950b9d5bc46f7aaed6b5367c">&#9670;&nbsp;</a></span>kvm_mmu_free_obsolete_roots()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_mmu_free_obsolete_roots </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l05676">5676</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;{</div>
<div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;    <a class="code" href="mmu_8c.html#ae3c450d21264b7f2a31cc71d03c2a658">__kvm_mmu_free_obsolete_roots</a>(vcpu-&gt;kvm, &amp;vcpu-&gt;arch.root_mmu);</div>
<div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;    <a class="code" href="mmu_8c.html#ae3c450d21264b7f2a31cc71d03c2a658">__kvm_mmu_free_obsolete_roots</a>(vcpu-&gt;kvm, &amp;vcpu-&gt;arch.guest_mmu);</div>
<div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;}</div>
<div class="ttc" id="ammu_8c_html_ae3c450d21264b7f2a31cc71d03c2a658"><div class="ttname"><a href="mmu_8c.html#ae3c450d21264b7f2a31cc71d03c2a658">__kvm_mmu_free_obsolete_roots</a></div><div class="ttdeci">static void __kvm_mmu_free_obsolete_roots(struct kvm *kvm, struct kvm_mmu *mmu)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l05659">mmu.c:5659</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_aa1e7a67c950b9d5bc46f7aaed6b5367c_cgraph.png" border="0" usemap="#ammu_8h_aa1e7a67c950b9d5bc46f7aaed6b5367c_cgraph" alt=""/></div>
<map name="ammu_8h_aa1e7a67c950b9d5bc46f7aaed6b5367c_cgraph" id="ammu_8h_aa1e7a67c950b9d5bc46f7aaed6b5367c_cgraph">
<area shape="rect" title=" " alt="" coords="5,646,193,687"/>
<area shape="rect" href="mmu_8c.html#ae3c450d21264b7f2a31cc71d03c2a658" title=" " alt="" coords="241,646,444,687"/>
<area shape="rect" href="mmu_8c.html#a18c5041cf69d79e06c51bd903978adc8" title=" " alt="" coords="721,603,851,629"/>
<area shape="rect" href="mmu_8c.html#ab7d4e418cb85a72507e384df5027293e" title=" " alt="" coords="492,679,657,705"/>
<area shape="rect" href="mmu_8c.html#a39242ba7b127ebf064de37a1224635cd" title=" " alt="" coords="1507,181,1626,208"/>
<area shape="rect" href="spte_8h.html#ab169c1872e98b9731a05121e0439f244" title=" " alt="" coords="979,653,1069,680"/>
<area shape="rect" href="tdp__mmu_8h.html#a166bc9e57a26e8a37e94e2314a72d226" title=" " alt="" coords="1765,64,1906,91"/>
<area shape="rect" href="mmu__internal_8h.html#a6491934fd3538f608b4b91245943b6fc" title=" " alt="" coords="1197,704,1397,731"/>
<area shape="rect" href="spte_8h.html#af8791b1ec453ef3bce3c87ea28744692" title=" " alt="" coords="2036,572,2167,599"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="2275,572,2405,599"/>
<area shape="rect" href="mmu_8c.html#ab8e14476297a48107341bc44a29b6af9" title=" " alt="" coords="915,805,1133,832"/>
<area shape="rect" href="kvm__main_8c.html#aa8688eb80c9acaf8b0aa783b6ac68c16" title=" " alt="" coords="739,805,833,832"/>
<area shape="rect" href="mmu_8c.html#a5b648a843c7267d204fe81facbc9f84f" title=" " alt="" coords="705,283,867,309"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="1210,860,1385,887"/>
<area shape="rect" href="mmu_8c.html#a584797a273970c4c5a807189bdc0004e" title=" " alt="" coords="1187,805,1408,832"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="1461,864,1672,891"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="1730,907,1941,949"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="2018,889,2185,916"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="2007,940,2195,967"/>
<area shape="rect" href="kvm__main_8c.html#a7682302871243c20a5dd16214655db15" title=" " alt="" coords="2301,889,2379,916"/>
<area shape="rect" href="kvm__main_8c.html#a9316cc70360fb39d920d5c76a2e41f35" title=" " alt="" coords="2252,940,2428,967"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="2263,991,2417,1017"/>
<area shape="rect" href="mmu_8c.html#a61b041a986244b62aedac5b132cf2c09" title=" " alt="" coords="1477,798,1656,839"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="2253,467,2427,493"/>
<area shape="rect" href="mmu_8c.html#a69a9545d1380d3c51ec6fa0f9ff36555" title=" " alt="" coords="1742,856,1929,883"/>
<area shape="rect" href="mmu_8c.html#aa915f695d4c341eca7d1f5b5a0a26a03" title=" " alt="" coords="915,283,1133,309"/>
<area shape="rect" href="tdp__mmu_8c.html#a8a9d637b546d8dfd125028f823a6eac0" title=" " alt="" coords="933,123,1115,149"/>
<area shape="rect" href="mmu_8c.html#a01417b2ac70337a4419dc0f171bd548f" title=" " alt="" coords="1181,451,1413,477"/>
<area shape="rect" href="mmu_8c.html#abab2bb5454cc72ba2e4913a87e5800fe" title=" " alt="" coords="1477,334,1656,375"/>
<area shape="rect" href="mmu_8c.html#a9d4eccd9e1e1198a1e63d28b750efe83" title=" " alt="" coords="1738,443,1933,469"/>
<area shape="rect" href="mmu_8c.html#ac1f044f2e317d0cd567530208b7118ee" title=" " alt="" coords="1464,552,1669,579"/>
<area shape="rect" href="mmu_8c.html#a2a0cdee83771c8d171f5f809076773d2" title=" " alt="" coords="1471,451,1662,477"/>
<area shape="rect" href="mmu_8c.html#af8bc85c6e33cec42152e7982b1fb4cba" title=" " alt="" coords="1467,232,1666,259"/>
<area shape="rect" href="mmu_8c.html#a85d47efa797da896b3bb3cf1cc32d768" title=" " alt="" coords="1511,501,1622,528"/>
<area shape="rect" href="mmu_8c.html#a802c5b4f03cc2183d5a097abb661e90c" title=" " alt="" coords="1471,603,1662,629"/>
<area shape="rect" href="mmu_8c.html#ab0716e0d51f7a555f58f426cbfb6d890" title=" " alt="" coords="1485,704,1648,731"/>
<area shape="rect" href="mmu_8c.html#a5d549ae5b6c13e9b87ccc13127ddf86a" title=" " alt="" coords="1759,341,1912,368"/>
<area shape="rect" href="mmu_8c.html#afa9309dada333ba442f20329ecd94033" title=" " alt="" coords="2037,443,2165,469"/>
<area shape="rect" href="mmu_8c.html#a3ee167c290bf125621f455ec5af142a2" title=" " alt="" coords="2058,392,2145,419"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="2052,291,2151,317"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="2045,341,2158,368"/>
<area shape="rect" href="mmu_8c.html#ac65268f7bfa05d3c874b604bd3b792b5" title=" " alt="" coords="2043,493,2159,520"/>
<area shape="rect" href="mmu_8c.html#a71c1314be1e3b4e36ea7a12f3a66dc7a" title=" " alt="" coords="1729,536,1941,563"/>
<area shape="rect" href="mmu_8c.html#aab66bb43b12aa7a1506c323f3fda9893" title=" " alt="" coords="1737,257,1934,284"/>
<area shape="rect" href="mmu_8c.html#a708e13186273bcbb28bdabb02c5053dc" title=" " alt="" coords="1762,207,1909,233"/>
<area shape="rect" href="mmu_8c.html#a2fba0b2dd67723bfbc4349ea7c8e019a" title=" " alt="" coords="1758,587,1913,629"/>
<area shape="rect" href="page__track_8c.html#ac2932f8336fdd5b8071d5e360cddacd5" title=" " alt="" coords="1720,755,1951,781"/>
<area shape="rect" href="mmu_8c.html#a8726aec6b800501379c831dad5432043" title=" " alt="" coords="1999,729,2204,756"/>
<area shape="rect" href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279" title=" " alt="" coords="1214,115,1381,157"/>
<area shape="rect" href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b" title=" " alt="" coords="1497,123,1636,149"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_aa1e7a67c950b9d5bc46f7aaed6b5367c_icgraph.png" border="0" usemap="#ammu_8h_aa1e7a67c950b9d5bc46f7aaed6b5367c_icgraph" alt=""/></div>
<map name="ammu_8h_aa1e7a67c950b9d5bc46f7aaed6b5367c_icgraph" id="ammu_8h_aa1e7a67c950b9d5bc46f7aaed6b5367c_icgraph">
<area shape="rect" title=" " alt="" coords="727,5,915,47"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="541,13,679,39"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,13,493,39"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,13,364,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="a11c275bc8cfad409c0681f0c953ebcae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11c275bc8cfad409c0681f0c953ebcae">&#9670;&nbsp;</a></span>kvm_mmu_honors_guest_mtrrs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_mmu_honors_guest_mtrrs </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00250">250</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;{</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mmu_8h.html#aaac7b37c7c917c491331020726730c02">__kvm_mmu_honors_guest_mtrrs</a>(<a class="code" href="x86_8c.html#a07ecc086564147d2003e0699cd506aa4">kvm_arch_has_noncoherent_dma</a>(kvm));</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
<div class="ttc" id="ammu_8h_html_aaac7b37c7c917c491331020726730c02"><div class="ttname"><a href="mmu_8h.html#aaac7b37c7c917c491331020726730c02">__kvm_mmu_honors_guest_mtrrs</a></div><div class="ttdeci">bool __kvm_mmu_honors_guest_mtrrs(bool vm_has_noncoherent_dma)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l04609">mmu.c:4609</a></div></div>
<div class="ttc" id="ax86_8c_html_a07ecc086564147d2003e0699cd506aa4"><div class="ttname"><a href="x86_8c.html#a07ecc086564147d2003e0699cd506aa4">kvm_arch_has_noncoherent_dma</a></div><div class="ttdeci">bool kvm_arch_has_noncoherent_dma(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l13452">x86.c:13452</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a11c275bc8cfad409c0681f0c953ebcae_cgraph.png" border="0" usemap="#ammu_8h_a11c275bc8cfad409c0681f0c953ebcae_cgraph" alt=""/></div>
<map name="ammu_8h_a11c275bc8cfad409c0681f0c953ebcae_cgraph" id="ammu_8h_a11c275bc8cfad409c0681f0c953ebcae_cgraph">
<area shape="rect" title=" " alt="" coords="5,35,192,76"/>
<area shape="rect" href="mmu_8h.html#aaac7b37c7c917c491331020726730c02" title=" " alt="" coords="260,5,460,47"/>
<area shape="rect" href="x86_8c.html#a07ecc086564147d2003e0699cd506aa4" title=" " alt="" coords="240,71,480,98"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a11c275bc8cfad409c0681f0c953ebcae_icgraph.png" border="0" usemap="#ammu_8h_a11c275bc8cfad409c0681f0c953ebcae_icgraph" alt=""/></div>
<map name="ammu_8h_a11c275bc8cfad409c0681f0c953ebcae_icgraph" id="ammu_8h_a11c275bc8cfad409c0681f0c953ebcae_icgraph">
<area shape="rect" title=" " alt="" coords="2047,729,2233,770"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="933,43,1073,69"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="1844,736,1999,763"/>
<area shape="rect" href="mtrr_8c.html#aca604775fbcfad49bfaf9441fc2253dc" title=" " alt="" coords="1870,787,1973,813"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="735,183,802,209"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="716,107,821,133"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="473,107,592,133"/>
<area shape="rect" href="smm_8c.html#a0943012ff008c7999f582998f0f9167a" title=" " alt="" coords="5,56,169,83"/>
<area shape="rect" href="x86_8c.html#a86812e4228865668099921709e1c2f26" title=" " alt="" coords="469,259,596,285"/>
<area shape="rect" href="vmx_8c.html#ac02e59b539f5874eaeb4b12568e9d0dd" title=" " alt="" coords="473,157,593,184"/>
<area shape="rect" href="x86_8c.html#abe99237e5fd6f33407bc30aa2647e0db" title=" " alt="" coords="486,208,579,235"/>
<area shape="rect" href="smm_8c.html#a0c50da2c4874eda6d67766974a476019" title=" " alt="" coords="432,5,633,32"/>
<area shape="rect" href="svm_8c.html#af2ee2a03530f5b7a02a127d8b779d2ae" title=" " alt="" coords="217,107,384,133"/>
<area shape="rect" href="vmx_8c.html#aa55ace9429e6e94042e6602716222805" title=" " alt="" coords="258,183,343,209"/>
<area shape="rect" href="smm_8c.html#ae0136cd1aa193ad29565961ea839a99a" title=" " alt="" coords="228,5,373,32"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="1627,671,1775,697"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="1605,801,1796,828"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="1412,616,1532,643"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="683,515,855,541"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="1151,296,1339,323"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="1163,641,1326,668"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="1163,743,1327,769"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="433,515,633,541"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="954,93,1053,120"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="950,144,1057,171"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="721,252,817,279"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="904,296,1103,323"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="933,195,1073,221"/>
<area shape="rect" href="smm_8c.html#a5382946234c910e05c6e2c09aff15713" title=" " alt="" coords="927,347,1080,373"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="939,464,1068,491"/>
<area shape="rect" href="vmx_2nested_8c.html#a001f930db9a867e828cf01b48d3e4e25" title=" " alt="" coords="926,398,1081,439"/>
<area shape="rect" href="x86_8c.html#a420caf80521ab8d6ef7218d5dd26d47f" title=" " alt="" coords="966,515,1041,541"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="681,869,856,896"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="492,920,573,947"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="478,819,587,845"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="477,869,588,896"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="914,717,1093,744"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="926,616,1081,643"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="919,667,1087,693"/>
<area shape="rect" href="vmx_2nested_8c.html#a06a397c328d1656bb4d3ab073878e6f0" title=" " alt="" coords="912,768,1095,795"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="938,819,1069,845"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="1387,794,1557,835"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="1388,911,1556,937"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="1164,794,1325,835"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="935,920,1072,947"/>
<area shape="rect" href="vmx_8c.html#a8acbb27feacd0dd2105ccd2957cab474" title=" " alt="" coords="1163,961,1327,988"/>
<area shape="rect" href="vmx_8c.html#a55a56c6fe3cbee7ead4da26de4074000" title=" " alt="" coords="1165,1012,1324,1039"/>
<area shape="rect" href="mmu_8c.html#a4d6f2ec540cbdb86e2594df2e4d453c2" title=" " alt="" coords="1155,860,1334,887"/>
<area shape="rect" href="svm_8c.html#a723646ac5d3234ba8e1845249e6a0935" title=" " alt="" coords="1181,911,1309,937"/>
<area shape="rect" href="mtrr_8c.html#a2b95f238c68e317e64e57d06f2a698dd" title=" " alt="" coords="1628,957,1773,984"/>
</map>
</div>

</div>
</div>
<a id="a475bd00898314bb9378d8e4306aa7874"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a475bd00898314bb9378d8e4306aa7874">&#9670;&nbsp;</a></span>kvm_mmu_load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_mmu_load </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l05588">5588</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;{</div>
<div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;    <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160; </div>
<div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;    r = <a class="code" href="mmu_8c.html#a1d91ca91e581985c5a26ba6ca434733f">mmu_topup_memory_caches</a>(vcpu, !vcpu-&gt;arch.mmu-&gt;root_role.direct);</div>
<div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;    <span class="keywordflow">if</span> (r)</div>
<div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;    r = <a class="code" href="mmu_8c.html#a18996f863c9cabb138be5881a3f1a478">mmu_alloc_special_roots</a>(vcpu);</div>
<div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;    <span class="keywordflow">if</span> (r)</div>
<div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;    <span class="keywordflow">if</span> (vcpu-&gt;arch.mmu-&gt;root_role.direct)</div>
<div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;        r = <a class="code" href="mmu_8c.html#a171383889d717b24003ee27735437bbe">mmu_alloc_direct_roots</a>(vcpu);</div>
<div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;        r = <a class="code" href="mmu_8c.html#a1ede039d44aac6e8ff15be76c16411a1">mmu_alloc_shadow_roots</a>(vcpu);</div>
<div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;    <span class="keywordflow">if</span> (r)</div>
<div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160; </div>
<div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;    <a class="code" href="mmu_8c.html#ab00408fb7acb0199782175051f59add6">kvm_mmu_sync_roots</a>(vcpu);</div>
<div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160; </div>
<div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;    <a class="code" href="mmu_8h.html#ae4afa08892909b9040fa9da2f3a55f74">kvm_mmu_load_pgd</a>(vcpu);</div>
<div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160; </div>
<div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;<span class="comment">     * Flush any TLB entries for the new root, the provenance of the root</span></div>
<div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160;<span class="comment">     * is unknown.  Even if KVM ensures there are no stale TLB entries</span></div>
<div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;<span class="comment">     * for a freed root, in theory another hypervisor could have left</span></div>
<div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;<span class="comment">     * stale entries.  Flushing on alloc also allows KVM to skip the TLB</span></div>
<div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;<span class="comment">     * flush when freeing a root (see kvm_tdp_mmu_put_root()).</span></div>
<div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;    static_call(kvm_x86_flush_tlb_current)(vcpu);</div>
<div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;out:</div>
<div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;    <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;}</div>
<div class="ttc" id="ammu_8c_html_a171383889d717b24003ee27735437bbe"><div class="ttname"><a href="mmu_8c.html#a171383889d717b24003ee27735437bbe">mmu_alloc_direct_roots</a></div><div class="ttdeci">static int mmu_alloc_direct_roots(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l03688">mmu.c:3688</a></div></div>
<div class="ttc" id="ammu_8c_html_a18996f863c9cabb138be5881a3f1a478"><div class="ttname"><a href="mmu_8c.html#a18996f863c9cabb138be5881a3f1a478">mmu_alloc_special_roots</a></div><div class="ttdeci">static int mmu_alloc_special_roots(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l03914">mmu.c:3914</a></div></div>
<div class="ttc" id="ammu_8c_html_a1d91ca91e581985c5a26ba6ca434733f"><div class="ttname"><a href="mmu_8c.html#a1d91ca91e581985c5a26ba6ca434733f">mmu_topup_memory_caches</a></div><div class="ttdeci">static int mmu_topup_memory_caches(struct kvm_vcpu *vcpu, bool maybe_indirect)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l00679">mmu.c:679</a></div></div>
<div class="ttc" id="ammu_8c_html_a1ede039d44aac6e8ff15be76c16411a1"><div class="ttname"><a href="mmu_8c.html#a1ede039d44aac6e8ff15be76c16411a1">mmu_alloc_shadow_roots</a></div><div class="ttdeci">static int mmu_alloc_shadow_roots(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l03796">mmu.c:3796</a></div></div>
<div class="ttc" id="ammu_8c_html_ab00408fb7acb0199782175051f59add6"><div class="ttname"><a href="mmu_8c.html#ab00408fb7acb0199782175051f59add6">kvm_mmu_sync_roots</a></div><div class="ttdeci">void kvm_mmu_sync_roots(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l04021">mmu.c:4021</a></div></div>
<div class="ttc" id="ammu_8h_html_ae4afa08892909b9040fa9da2f3a55f74"><div class="ttname"><a href="mmu_8h.html#ae4afa08892909b9040fa9da2f3a55f74">kvm_mmu_load_pgd</a></div><div class="ttdeci">static void kvm_mmu_load_pgd(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00157">mmu.h:157</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a475bd00898314bb9378d8e4306aa7874_cgraph.png" border="0" usemap="#ammu_8h_a475bd00898314bb9378d8e4306aa7874_cgraph" alt=""/></div>
<map name="ammu_8h_a475bd00898314bb9378d8e4306aa7874_cgraph" id="ammu_8h_a475bd00898314bb9378d8e4306aa7874_cgraph">
<area shape="rect" title=" " alt="" coords="5,815,132,842"/>
<area shape="rect" href="mmu_8h.html#ae4afa08892909b9040fa9da2f3a55f74" title=" " alt="" coords="208,112,367,139"/>
<area shape="rect" href="mmu_8c.html#ab00408fb7acb0199782175051f59add6" title=" " alt="" coords="203,163,372,190"/>
<area shape="rect" href="mmu_8c.html#a171383889d717b24003ee27735437bbe" title=" " alt="" coords="198,790,377,816"/>
<area shape="rect" href="mmu_8c.html#a1ede039d44aac6e8ff15be76c16411a1" title=" " alt="" coords="192,840,383,867"/>
<area shape="rect" href="mmu_8c.html#a18996f863c9cabb138be5881a3f1a478" title=" " alt="" coords="194,891,381,918"/>
<area shape="rect" href="mmu_8c.html#a1d91ca91e581985c5a26ba6ca434733f" title=" " alt="" coords="180,942,395,968"/>
<area shape="rect" href="mmu_8c.html#a85cc512fac68747ea8cab508dd83796c" title=" " alt="" coords="489,62,608,88"/>
<area shape="rect" href="spte_8h.html#ab169c1872e98b9731a05121e0439f244" title=" " alt="" coords="765,23,856,50"/>
<area shape="rect" href="spte_8h.html#af8791b1ec453ef3bce3c87ea28744692" title=" " alt="" coords="1273,150,1404,176"/>
<area shape="rect" href="mmu_8c.html#a2f33377dcdaf5435e453ff75e02075dd" title=" " alt="" coords="473,327,625,354"/>
<area shape="rect" href="x86_8h.html#a0647452067d01e527a8cd1da2fb6b897" title=" " alt="" coords="464,112,633,139"/>
<area shape="rect" href="mmu__internal_8h.html#a6491934fd3538f608b4b91245943b6fc" title=" " alt="" coords="976,74,1176,100"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="1531,150,1661,176"/>
<area shape="rect" href="mmu_8c.html#a5ab4ca7bcca38cbb996aa2abec5bb5a1" title=" " alt="" coords="719,404,903,445"/>
<area shape="rect" href="mmu_8c.html#a39a2699f47aac1549c6a1ba2600ee86b" title=" " alt="" coords="747,200,874,227"/>
<area shape="rect" href="mmu_8c.html#a2a0cdee83771c8d171f5f809076773d2" title=" " alt="" coords="715,251,906,278"/>
<area shape="rect" href="mmu_8c.html#a2e21344d37e1f1c8c347bed8627da8db" title=" " alt="" coords="705,470,916,496"/>
<area shape="rect" href="kvm__main_8c.html#aa8688eb80c9acaf8b0aa783b6ac68c16" title=" " alt="" coords="1029,680,1123,707"/>
<area shape="rect" href="mmu_8c.html#aab66bb43b12aa7a1506c323f3fda9893" title=" " alt="" coords="977,352,1175,379"/>
<area shape="rect" href="mmu_8c.html#a708e13186273bcbb28bdabb02c5053dc" title=" " alt="" coords="737,302,884,328"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="1251,436,1426,463"/>
<area shape="rect" href="mmu_8c.html#ab8e14476297a48107341bc44a29b6af9" title=" " alt="" coords="967,462,1185,488"/>
<area shape="rect" href="mmu_8c.html#a492e75504ac4cc30ca6dd83087aee286" title=" " alt="" coords="1005,200,1147,227"/>
<area shape="rect" href="mmu_8c.html#aa915f695d4c341eca7d1f5b5a0a26a03" title=" " alt="" coords="967,251,1185,278"/>
<area shape="rect" href="mmu_8c.html#a1f49638b71a482e4b0c3a6af10d0711e" title=" " alt="" coords="981,613,1171,654"/>
<area shape="rect" href="kvm__main_8c.html#ac4b56de4919be80c9cd4289f20437c64" title=" " alt="" coords="975,734,1177,760"/>
<area shape="rect" href="mmu_8h.html#ac9867cac2f7c0a763088b2112951b5ac" title=" " alt="" coords="1233,715,1444,742"/>
<area shape="rect" href="mmu_8h.html#a89c85e383e0f6dfe6f91f5c1dd25e522" title=" " alt="" coords="1492,766,1700,792"/>
<area shape="rect" href="mmu_8c.html#a911006629221ec1bab2fed2f8fab2510" title=" " alt="" coords="1254,327,1423,354"/>
<area shape="rect" href="mmu_8c.html#a2c784dfebb5c884b33c66e9c01d5c10c" title=" " alt="" coords="995,302,1157,328"/>
<area shape="rect" href="tdp__mmu_8c.html#ae643f902f826e920f4150bb66872fd47" title=" " alt="" coords="455,665,642,706"/>
<area shape="rect" href="mmu_8c.html#aa3aace355fab834a27a73054cd060480" title=" " alt="" coords="443,790,655,816"/>
<area shape="rect" href="mmu_8c.html#a87f1eb520f5b6b4fdd1e19e18ba670c0" title=" " alt="" coords="485,840,612,867"/>
<area shape="rect" href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac" title=" " alt="" coords="728,622,893,648"/>
<area shape="rect" href="tdp__mmu_8h.html#ae8fe85fef7c2fb884cd2d27810a84d0b" title=" " alt="" coords="720,672,901,699"/>
<area shape="rect" href="tdp__mmu_8c.html#aab91e6aa4615cd9bf4f66141ca34642b" title=" " alt="" coords="739,723,883,750"/>
<area shape="rect" href="tdp__mmu_8c.html#a8d6f094dd9ef458c1c57aee653afd602" title=" " alt="" coords="743,571,878,598"/>
<area shape="rect" href="mmu_8c.html#a93f1e0e5da1bb603a5e4f250d4d76bb0" title=" " alt="" coords="708,840,913,867"/>
<area shape="rect" href="mmu_8c.html#aeca903955eae791df4e1e22dcff2671f" title=" " alt="" coords="726,774,895,816"/>
<area shape="rect" href="mmu_8c.html#a00b24afda1801b4cd19c662c13c99a3c" title=" " alt="" coords="703,891,919,918"/>
<area shape="rect" href="mmu__internal_8h.html#a0eb4da3250f15ed351ae2f0acc485870" title=" " alt="" coords="443,942,654,968"/>
<area shape="rect" href="mmu_8c.html#a2be49d6fcf78af485a16f8798a99ed29" title=" " alt="" coords="451,1043,646,1070"/>
<area shape="rect" href="kvm__main_8c.html#ac6f5a79d7adfff7a4b5256a2a154e926" title=" " alt="" coords="456,891,641,918"/>
<area shape="rect" href="mmu_8c.html#adae854f3c74003a87a9c2a3ae8feada3" title=" " alt="" coords="987,850,1165,892"/>
<area shape="rect" href="mmu_8c.html#ad46ec95426c3d1db277984090f2ecbd1" title=" " alt="" coords="754,1043,867,1070"/>
<area shape="rect" href="kvm__cache__regs_8h.html#aa80de2ba11d877ef825788b0c9768378" title=" " alt="" coords="1019,1068,1133,1095"/>
<area shape="rect" href="page__track_8c.html#a21ea1782d6ec58153ffe98e0ca184284" title=" " alt="" coords="1253,882,1424,924"/>
<area shape="rect" href="page__track_8c.html#acdd8bb0c7c8b588137d126d56d20d7fa" title=" " alt="" coords="1253,817,1424,858"/>
<area shape="rect" href="x86_8c.html#abd6174ba9b312b97d69f36c53aa50e04" title=" " alt="" coords="1259,948,1418,975"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a475bd00898314bb9378d8e4306aa7874_icgraph.png" border="0" usemap="#ammu_8h_a475bd00898314bb9378d8e4306aa7874_icgraph" alt=""/></div>
<map name="ammu_8h_a475bd00898314bb9378d8e4306aa7874_icgraph" id="ammu_8h_a475bd00898314bb9378d8e4306aa7874_icgraph">
<area shape="rect" title=" " alt="" coords="1409,107,1536,133"/>
<area shape="rect" href="mmu_8h.html#ab0e194ecad859add3d639850021f8b16" title=" " alt="" coords="1221,107,1361,133"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="1003,70,1173,111"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="589,136,727,163"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="793,70,955,111"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="571,67,745,93"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="427,5,508,32"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="413,56,522,83"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="412,107,523,133"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="427,157,508,184"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,157,364,184"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,157,129,184"/>
</map>
</div>

</div>
</div>
<a id="ae4afa08892909b9040fa9da2f3a55f74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4afa08892909b9040fa9da2f3a55f74">&#9670;&nbsp;</a></span>kvm_mmu_load_pgd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_mmu_load_pgd </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00157">157</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;{</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    u64 root_hpa = vcpu-&gt;arch.mmu-&gt;root.hpa;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">if</span> (!VALID_PAGE(root_hpa))</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    static_call(kvm_x86_load_mmu_pgd)(vcpu, root_hpa,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                      vcpu-&gt;arch.mmu-&gt;root_role.level);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_ae4afa08892909b9040fa9da2f3a55f74_icgraph.png" border="0" usemap="#ammu_8h_ae4afa08892909b9040fa9da2f3a55f74_icgraph" alt=""/></div>
<map name="ammu_8h_ae4afa08892909b9040fa9da2f3a55f74_icgraph" id="ammu_8h_ae4afa08892909b9040fa9da2f3a55f74_icgraph">
<area shape="rect" title=" " alt="" coords="1584,151,1743,177"/>
<area shape="rect" href="mmu_8c.html#a475bd00898314bb9378d8e4306aa7874" title=" " alt="" coords="1409,125,1536,152"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="589,136,727,163"/>
<area shape="rect" href="mmu_8h.html#ab0e194ecad859add3d639850021f8b16" title=" " alt="" coords="1221,125,1361,152"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="1003,59,1173,101"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="793,59,955,101"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="571,61,745,88"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="427,5,508,32"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="413,56,522,83"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="412,107,523,133"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="427,157,508,184"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,157,364,184"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,157,129,184"/>
</map>
</div>

</div>
</div>
<a id="a6555cf2d510d04ae19bee154d166f778"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6555cf2d510d04ae19bee154d166f778">&#9670;&nbsp;</a></span>kvm_mmu_max_gfn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static gfn_t kvm_mmu_max_gfn </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00066">66</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;{</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">     * Note that this uses the host MAXPHYADDR, not the guest&#39;s.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">     * EPT/NPT cannot support GPAs that would exceed host.MAXPHYADDR;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">     * assuming KVM is running on bare metal, guest accesses beyond</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">     * host.MAXPHYADDR will hit a #PF(RSVD) and never cause a vmexit</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">     * (either EPT Violation/Misconfig or #NPF), and so KVM will never</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">     * install a SPTE for such addresses.  If KVM is running as a VM</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">     * itself, on the other hand, it might see a MAXPHYADDR that is less</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">     * than hardware&#39;s real MAXPHYADDR.  Using the host MAXPHYADDR</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">     * disallows such SPTEs entirely and simplifies the TDP MMU.</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordtype">int</span> max_gpa_bits = likely(<a class="code" href="mmu_8c.html#ab96cbfdb088c3659bfd6117823de8e30">tdp_enabled</a>) ? <a class="code" href="mmu_8h.html#a43d89b28f6285b7b34c137f70723565b">shadow_phys_bits</a> : 52;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">return</span> (1ULL &lt;&lt; (max_gpa_bits - PAGE_SHIFT)) - 1;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div>
<div class="ttc" id="ammu_8h_html_a43d89b28f6285b7b34c137f70723565b"><div class="ttname"><a href="mmu_8h.html#a43d89b28f6285b7b34c137f70723565b">shadow_phys_bits</a></div><div class="ttdeci">u8 __read_mostly shadow_phys_bits</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00046">spte.c:46</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a6555cf2d510d04ae19bee154d166f778_icgraph.png" border="0" usemap="#ammu_8h_a6555cf2d510d04ae19bee154d166f778_icgraph" alt=""/></div>
<map name="ammu_8h_a6555cf2d510d04ae19bee154d166f778_icgraph" id="ammu_8h_a6555cf2d510d04ae19bee154d166f778_icgraph">
<area shape="rect" title=" " alt="" coords="1759,500,1915,526"/>
<area shape="rect" href="x86_8c.html#a14568e065745512e03b3088070848289" title=" " alt="" coords="1499,408,1705,450"/>
<area shape="rect" href="mmu_8c.html#ad472a4e8b9cc60aeca0afecaf632d39c" title=" " alt="" coords="1509,580,1695,606"/>
<area shape="rect" href="tdp__mmu_8c.html#ac323268ae26fde5a608d694f4943d476" title=" " alt="" coords="1493,500,1711,526"/>
<area shape="rect" href="kvm__main_8c.html#a6dd13a049fee9663450eebbf2ac16faa" title=" " alt="" coords="1275,355,1445,396"/>
<area shape="rect" href="kvm__main_8c.html#ac81a7d714d0668ccea6d0c2ddfd0fed5" title=" " alt="" coords="1055,308,1198,334"/>
<area shape="rect" href="kvm__main_8c.html#ac76f506181e49aa4800bb202e11cb2b3" title=" " alt="" coords="762,256,965,282"/>
<area shape="rect" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9" title=" " alt="" coords="499,121,696,148"/>
<area shape="rect" href="kvm__main_8c.html#a1a839781d3be88d418abfb2b456663ab" title=" " alt="" coords="503,256,691,282"/>
<area shape="rect" href="vmx_8c.html#acc48d0f16e027c2bad1268d02a2eaa68" title=" " alt="" coords="243,146,428,173"/>
<area shape="rect" href="lapic_8c.html#a8c6616d2cbae35632aa5debb15b552ec" title=" " alt="" coords="229,197,442,224"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="5,180,176,206"/>
<area shape="rect" href="lapic_8c.html#a017e57adbc721d98d26099f1a431a22c" title=" " alt="" coords="224,45,447,72"/>
<area shape="rect" href="vmx_8c.html#a15d61630d8c4e3f7aea16d3b0164a799" title=" " alt="" coords="265,96,405,122"/>
<area shape="rect" href="kvm__main_8c.html#a4c8ff5a794a6a2e77e0cfc224568ef70" title=" " alt="" coords="234,248,437,290"/>
<area shape="rect" href="mmu_8c.html#a62cf3d1ba1f946897f545d9a93db988f" title=" " alt="" coords="1296,726,1424,753"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="1059,877,1194,904"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1081,726,1172,753"/>
<area shape="rect" href="mmu_8c.html#a4bd7a8fd81e65c4e06e025d92c5787d9" title=" " alt="" coords="786,877,941,904"/>
<area shape="rect" href="mmu_8c.html#a925050134bb3c589bb55b63993ddacb1" title=" " alt="" coords="780,956,947,982"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="523,916,671,942"/>
<area shape="rect" href="mmu__internal_8h.html#ae3c71be306692107b4d90bfb8d24d7f5" title=" " alt="" coords="502,864,693,890"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="275,922,395,949"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="21,838,161,865"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="250,856,421,898"/>
<area shape="rect" href="mmu_8c.html#a3d0bd209d792a4316f3b40681fdc10f9" title=" " alt="" coords="251,805,419,832"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="510,970,685,997"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="237,973,434,1000"/>
<area shape="rect" href="tdp__mmu_8c.html#af9c34fae0b7eac63cc78a01882498cfb" title=" " alt="" coords="1279,466,1441,493"/>
<area shape="rect" href="tdp__mmu_8c.html#a182ff449fd87f9503148e88c33cff5ac" title=" " alt="" coords="1283,532,1437,558"/>
<area shape="rect" href="tdp__mmu_8c.html#a95955e5f31399228d6a722fba5a81477" title=" " alt="" coords="1053,442,1200,469"/>
<area shape="rect" href="tdp__mmu_8c.html#aca0f6025bf55596c80647e3a35997d92" title=" " alt="" coords="777,372,950,398"/>
<area shape="rect" href="tdp__mmu_8c.html#a8ab26f4fb05f388d8bcf04ad89ee6797" title=" " alt="" coords="748,435,979,476"/>
<area shape="rect" href="mmu_8c.html#a6db2d9d04af40584cbde51a2e1f74837" title=" " alt="" coords="525,329,670,356"/>
<area shape="rect" href="mmu_8c.html#a6a9d3382763ac1478855bd15907a98e2" title=" " alt="" coords="233,314,437,341"/>
<area shape="rect" href="tdp__mmu_8c.html#a73432bf42fbb3d43b3e04f88cd92b592" title=" " alt="" coords="495,394,700,421"/>
<area shape="rect" href="mmu_8c.html#abd59fd9785b9b5676841e9706c1c6797" title=" " alt="" coords="509,464,686,490"/>
<area shape="rect" href="mmu_8c.html#a0beae9a256ad42642a6b522a36a18a74" title=" " alt="" coords="253,365,417,392"/>
<area shape="rect" href="mmu_8c.html#a58fe7b43995ae8c20c597e1bb9c4c007" title=" " alt="" coords="245,467,426,508"/>
<area shape="rect" href="mmu_8c.html#ad4293ab926b1ab16fb8b380a76b9f533" title=" " alt="" coords="253,532,417,574"/>
<area shape="rect" href="mmu_8c.html#a5a613414a3787274a50cc9f9e9bab180" title=" " alt="" coords="260,416,411,442"/>
<area shape="rect" href="tdp__mmu_8c.html#aaa8f0898db08dd5c9213ac2f8b355501" title=" " alt="" coords="1027,524,1227,566"/>
<area shape="rect" href="tdp__mmu_8c.html#aa4fb1a66a2bc67f8699e8ddafdd4b1e8" title=" " alt="" coords="1032,613,1221,640"/>
<area shape="rect" href="mmu_8c.html#aa37fc9ea36d6c97e97d77af76eca5767" title=" " alt="" coords="776,532,951,558"/>
<area shape="rect" href="mmu_8c.html#a8b2588158566c9bb798cdb77760e6446" title=" " alt="" coords="787,637,940,664"/>
<area shape="rect" href="x86_8c.html#ac280f3f33408b1fead3c38127a2ab3e9" title=" " alt="" coords="522,571,673,612"/>
<area shape="rect" href="x86_8c.html#ab61af196de8a3705f59d9915b5eb1a0e" title=" " alt="" coords="499,688,696,730"/>
<area shape="rect" href="mtrr_8c.html#aca604775fbcfad49bfaf9441fc2253dc" title=" " alt="" coords="546,637,649,664"/>
<area shape="rect" href="x86_8c.html#ae1ffb1252c0aa966c6d94279766427ca" title=" " alt="" coords="240,663,431,704"/>
<area shape="rect" href="x86_8c.html#a613f1a822aa2ffa29a32341ec8a92913" title=" " alt="" coords="246,598,425,639"/>
</map>
</div>

</div>
</div>
<a id="a13148d5065ef27624701afcaa3229983"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13148d5065ef27624701afcaa3229983">&#9670;&nbsp;</a></span>kvm_mmu_post_init_vm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_mmu_post_init_vm </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l07279">7279</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l07280"></a><span class="lineno"> 7280</span>&#160;{</div>
<div class="line"><a name="l07281"></a><span class="lineno"> 7281</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l07282"></a><span class="lineno"> 7282</span>&#160; </div>
<div class="line"><a name="l07283"></a><span class="lineno"> 7283</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mmu_8c.html#ad6e46ad0c799f51e4b3a0d1d50d6b4c7">nx_hugepage_mitigation_hard_disabled</a>)</div>
<div class="line"><a name="l07284"></a><span class="lineno"> 7284</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07285"></a><span class="lineno"> 7285</span>&#160; </div>
<div class="line"><a name="l07286"></a><span class="lineno"> 7286</span>&#160;    err = <a class="code" href="kvm__main_8c.html#a7f2aafeb046780b09254710b5aa69856">kvm_vm_create_worker_thread</a>(kvm, <a class="code" href="mmu_8c.html#a2683113dbbf42e73c2b52410f9ef6f84">kvm_nx_huge_page_recovery_worker</a>, 0,</div>
<div class="line"><a name="l07287"></a><span class="lineno"> 7287</span>&#160;                      <span class="stringliteral">&quot;kvm-nx-lpage-recovery&quot;</span>,</div>
<div class="line"><a name="l07288"></a><span class="lineno"> 7288</span>&#160;                      &amp;kvm-&gt;arch.nx_huge_page_recovery_thread);</div>
<div class="line"><a name="l07289"></a><span class="lineno"> 7289</span>&#160;    <span class="keywordflow">if</span> (!err)</div>
<div class="line"><a name="l07290"></a><span class="lineno"> 7290</span>&#160;        kthread_unpark(kvm-&gt;arch.nx_huge_page_recovery_thread);</div>
<div class="line"><a name="l07291"></a><span class="lineno"> 7291</span>&#160; </div>
<div class="line"><a name="l07292"></a><span class="lineno"> 7292</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l07293"></a><span class="lineno"> 7293</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_a7f2aafeb046780b09254710b5aa69856"><div class="ttname"><a href="kvm__main_8c.html#a7f2aafeb046780b09254710b5aa69856">kvm_vm_create_worker_thread</a></div><div class="ttdeci">int kvm_vm_create_worker_thread(struct kvm *kvm, kvm_vm_thread_fn_t thread_fn, uintptr_t data, const char *name, struct task_struct **thread_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l06593">kvm_main.c:6593</a></div></div>
<div class="ttc" id="ammu_8c_html_a2683113dbbf42e73c2b52410f9ef6f84"><div class="ttname"><a href="mmu_8c.html#a2683113dbbf42e73c2b52410f9ef6f84">kvm_nx_huge_page_recovery_worker</a></div><div class="ttdeci">static int kvm_nx_huge_page_recovery_worker(struct kvm *kvm, uintptr_t data)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l07254">mmu.c:7254</a></div></div>
<div class="ttc" id="ammu_8c_html_ad6e46ad0c799f51e4b3a0d1d50d6b4c7"><div class="ttname"><a href="mmu_8c.html#ad6e46ad0c799f51e4b3a0d1d50d6b4c7">nx_hugepage_mitigation_hard_disabled</a></div><div class="ttdeci">static bool nx_hugepage_mitigation_hard_disabled</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l00062">mmu.c:62</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a13148d5065ef27624701afcaa3229983_cgraph.png" border="0" usemap="#ammu_8h_a13148d5065ef27624701afcaa3229983_cgraph" alt=""/></div>
<map name="ammu_8h_a13148d5065ef27624701afcaa3229983_cgraph" id="ammu_8h_a13148d5065ef27624701afcaa3229983_cgraph">
<area shape="rect" title=" " alt="" coords="5,824,188,851"/>
<area shape="rect" href="mmu_8c.html#a2683113dbbf42e73c2b52410f9ef6f84" title=" " alt="" coords="236,783,452,825"/>
<area shape="rect" href="kvm__main_8c.html#a7f2aafeb046780b09254710b5aa69856" title=" " alt="" coords="255,849,433,890"/>
<area shape="rect" href="mmu_8c.html#ae2a1bc1d190cecb616e9253a0bdab609" title=" " alt="" coords="500,787,708,829"/>
<area shape="rect" href="mmu_8c.html#a85202c8f53b11b1c80f9b6e26210aa9a" title=" " alt="" coords="519,622,689,663"/>
<area shape="rect" href="mmu_8c.html#a96ec228d531823b7b3e07ceda032b44b" title=" " alt="" coords="787,862,943,903"/>
<area shape="rect" href="tdp__mmu_8h.html#a166bc9e57a26e8a37e94e2314a72d226" title=" " alt="" coords="1617,56,1758,83"/>
<area shape="rect" href="mmu_8c.html#aa915f695d4c341eca7d1f5b5a0a26a03" title=" " alt="" coords="756,469,975,496"/>
<area shape="rect" href="mmu_8c.html#a802c5b4f03cc2183d5a097abb661e90c" title=" " alt="" coords="1318,629,1509,656"/>
<area shape="rect" href="mmu_8c.html#a5ab4ca7bcca38cbb996aa2abec5bb5a1" title=" " alt="" coords="773,681,957,722"/>
<area shape="rect" href="tdp__mmu_8c.html#a381e22ee819864cf1fd726479a76b6c7" title=" " alt="" coords="779,811,951,837"/>
<area shape="rect" href="kvm__main_8c.html#aa8688eb80c9acaf8b0aa783b6ac68c16" title=" " alt="" coords="819,5,912,32"/>
<area shape="rect" href="mmu_8c.html#a01417b2ac70337a4419dc0f171bd548f" title=" " alt="" coords="1023,360,1255,387"/>
<area shape="rect" href="mmu_8c.html#a39242ba7b127ebf064de37a1224635cd" title=" " alt="" coords="1354,107,1473,133"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="1582,379,1793,405"/>
<area shape="rect" href="mmu_8c.html#abab2bb5454cc72ba2e4913a87e5800fe" title=" " alt="" coords="1324,411,1503,453"/>
<area shape="rect" href="mmu_8c.html#a9d4eccd9e1e1198a1e63d28b750efe83" title=" " alt="" coords="1316,528,1511,555"/>
<area shape="rect" href="mmu_8c.html#ac1f044f2e317d0cd567530208b7118ee" title=" " alt="" coords="1311,309,1516,336"/>
<area shape="rect" href="mmu_8c.html#a2a0cdee83771c8d171f5f809076773d2" title=" " alt="" coords="1318,477,1509,504"/>
<area shape="rect" href="mmu_8c.html#af8bc85c6e33cec42152e7982b1fb4cba" title=" " alt="" coords="1314,157,1513,184"/>
<area shape="rect" href="mmu_8c.html#a85d47efa797da896b3bb3cf1cc32d768" title=" " alt="" coords="1358,208,1469,235"/>
<area shape="rect" href="mmu_8c.html#ab0716e0d51f7a555f58f426cbfb6d890" title=" " alt="" coords="1332,259,1495,285"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="1851,371,2061,413"/>
<area shape="rect" href="mmu_8c.html#a5d549ae5b6c13e9b87ccc13127ddf86a" title=" " alt="" coords="1611,500,1764,527"/>
<area shape="rect" href="mmu_8c.html#afa9309dada333ba442f20329ecd94033" title=" " alt="" coords="1892,475,2020,501"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="1907,597,2005,624"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="1869,756,2043,783"/>
<area shape="rect" href="mmu_8c.html#ac65268f7bfa05d3c874b604bd3b792b5" title=" " alt="" coords="1629,551,1745,577"/>
<area shape="rect" href="mmu_8c.html#a71c1314be1e3b4e36ea7a12f3a66dc7a" title=" " alt="" coords="1581,309,1793,336"/>
<area shape="rect" href="mmu_8c.html#aab66bb43b12aa7a1506c323f3fda9893" title=" " alt="" coords="1589,107,1786,133"/>
<area shape="rect" href="mmu_8c.html#a708e13186273bcbb28bdabb02c5053dc" title=" " alt="" coords="1614,157,1761,184"/>
<area shape="rect" href="mmu_8c.html#a2fba0b2dd67723bfbc4349ea7c8e019a" title=" " alt="" coords="1610,602,1765,643"/>
<area shape="rect" href="page__track_8c.html#ac2932f8336fdd5b8071d5e360cddacd5" title=" " alt="" coords="1572,208,1803,235"/>
<area shape="rect" href="mmu_8c.html#a8726aec6b800501379c831dad5432043" title=" " alt="" coords="1853,233,2059,260"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="1326,680,1501,707"/>
<area shape="rect" href="mmu_8c.html#ab8e14476297a48107341bc44a29b6af9" title=" " alt="" coords="1029,731,1248,757"/>
<area shape="rect" href="mmu_8c.html#a584797a273970c4c5a807189bdc0004e" title=" " alt="" coords="1303,731,1524,757"/>
<area shape="rect" href="mmu_8c.html#a61b041a986244b62aedac5b132cf2c09" title=" " alt="" coords="1598,719,1777,761"/>
<area shape="rect" href="mmu__internal_8h.html#a993d31328977f0bf21610ad74fa55a79" title=" " alt="" coords="1870,912,2042,939"/>
<area shape="rect" href="tdp__iter_8h.html#ae1b8feffcbd421cbcb6a40cd57abf768" title=" " alt="" coords="1861,1009,2051,1036"/>
<area shape="rect" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a" title=" " alt="" coords="1065,1148,1212,1175"/>
<area shape="rect" href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac" title=" " alt="" coords="2109,912,2275,939"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="1332,1039,1495,1065"/>
<area shape="rect" href="spte_8h.html#ad52bae526742289dbd54348dfa55310b" title=" " alt="" coords="1889,1156,2023,1183"/>
<area shape="rect" href="tdp__iter_8h.html#a74cc1f032b50c7c6c64ded8866deb4a4" title=" " alt="" coords="1859,1068,2053,1095"/>
<area shape="rect" href="spte_8h.html#a2946d25249b11a82d33e9ad9dca73ec4" title=" " alt="" coords="1610,1090,1765,1131"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="1612,1039,1763,1065"/>
<area shape="rect" href="spte_8h.html#a16669248c64937ddec714d855609cacb" title=" " alt="" coords="1620,1207,1755,1233"/>
<area shape="rect" href="spte_8h.html#a0726c9cf54d23a373533a0833aaf979c" title=" " alt="" coords="1635,988,1740,1015"/>
<area shape="rect" href="kvm__main_8c.html#a2e142fd761ff4ccd8cee4cdf4805fd47" title=" " alt="" coords="515,856,693,883"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a13148d5065ef27624701afcaa3229983_icgraph.png" border="0" usemap="#ammu_8h_a13148d5065ef27624701afcaa3229983_icgraph" alt=""/></div>
<map name="ammu_8h_a13148d5065ef27624701afcaa3229983_icgraph" id="ammu_8h_a13148d5065ef27624701afcaa3229983_icgraph">
<area shape="rect" title=" " alt="" coords="231,5,413,32"/>
<area shape="rect" href="x86_8c.html#a91673b399129921871f11d0752eea8c3" title=" " alt="" coords="5,5,183,32"/>
</map>
</div>

</div>
</div>
<a id="a1eb6816fb27d7ccc1d38119ddc8ab6c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1eb6816fb27d7ccc1d38119ddc8ab6c1">&#9670;&nbsp;</a></span>kvm_mmu_pre_destroy_vm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_mmu_pre_destroy_vm </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l07295">7295</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l07296"></a><span class="lineno"> 7296</span>&#160;{</div>
<div class="line"><a name="l07297"></a><span class="lineno"> 7297</span>&#160;    <span class="keywordflow">if</span> (kvm-&gt;arch.nx_huge_page_recovery_thread)</div>
<div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;        kthread_stop(kvm-&gt;arch.nx_huge_page_recovery_thread);</div>
<div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a1eb6816fb27d7ccc1d38119ddc8ab6c1_icgraph.png" border="0" usemap="#ammu_8h_a1eb6816fb27d7ccc1d38119ddc8ab6c1_icgraph" alt=""/></div>
<map name="ammu_8h_a1eb6816fb27d7ccc1d38119ddc8ab6c1_icgraph" id="ammu_8h_a1eb6816fb27d7ccc1d38119ddc8ab6c1_icgraph">
<area shape="rect" title=" " alt="" coords="252,5,456,32"/>
<area shape="rect" href="x86_8c.html#ac271b42eaec25ceef88a8ee4ed1ddc9f" title=" " alt="" coords="5,5,204,32"/>
</map>
</div>

</div>
</div>
<a id="ae0bba48799c436cc6749fdaa0d95201b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0bba48799c436cc6749fdaa0d95201b">&#9670;&nbsp;</a></span>kvm_mmu_refresh_passthrough_bits()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_mmu_refresh_passthrough_bits </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_mmu *&#160;</td>
          <td class="paramname"><em>mmu</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00168">168</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;{</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">     * When EPT is enabled, KVM may passthrough CR0.WP to the guest, i.e.</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">     * @mmu&#39;s snapshot of CR0.WP and thus all related paging metadata may</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">     * be stale.  Refresh CR0.WP and the metadata on-demand when checking</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">     * for permission faults.  Exempt nested MMUs, i.e. MMUs for shadowing</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">     * nEPT and nNPT, as CR0.WP is ignored in both cases.  Note, KVM does</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">     * need to refresh nested_mmu, a.k.a. the walker used to translate L2</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">     * GVAs to GPAs, as that &quot;MMU&quot; needs to honor L2&#39;s CR0.WP.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="mmu_8c.html#ab96cbfdb088c3659bfd6117823de8e30">tdp_enabled</a> || mmu == &amp;vcpu-&gt;arch.guest_mmu)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="mmu_8h.html#abba0adca082144a9c30aaceebfa82685">__kvm_mmu_refresh_passthrough_bits</a>(vcpu, mmu);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div>
<div class="ttc" id="ammu_8h_html_abba0adca082144a9c30aaceebfa82685"><div class="ttname"><a href="mmu_8h.html#abba0adca082144a9c30aaceebfa82685">__kvm_mmu_refresh_passthrough_bits</a></div><div class="ttdeci">void __kvm_mmu_refresh_passthrough_bits(struct kvm_vcpu *vcpu, struct kvm_mmu *mmu)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l05284">mmu.c:5284</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_ae0bba48799c436cc6749fdaa0d95201b_cgraph.png" border="0" usemap="#ammu_8h_ae0bba48799c436cc6749fdaa0d95201b_cgraph" alt=""/></div>
<map name="ammu_8h_ae0bba48799c436cc6749fdaa0d95201b_cgraph" id="ammu_8h_ae0bba48799c436cc6749fdaa0d95201b_cgraph">
<area shape="rect" title=" " alt="" coords="5,77,268,104"/>
<area shape="rect" href="mmu_8h.html#abba0adca082144a9c30aaceebfa82685" title=" " alt="" coords="316,77,593,104"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a16b29ca8796e3da212a8faf1b2dc7ff3" title=" " alt="" coords="643,27,789,53"/>
<area shape="rect" href="mmu_8c.html#ac7b31af26c029f185ab41ed060228847" title=" " alt="" coords="641,99,791,141"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a5fbb40e1f7661ccfd5accdaef3d8c378" title=" " alt="" coords="873,5,1019,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="1101,5,1295,32"/>
<area shape="rect" href="mmu_8c.html#acf22177805abdc960c48327675111025" title=" " alt="" coords="905,56,987,83"/>
<area shape="rect" href="mmu_8c.html#a7c03a09eaa19dd03710b5221a58f49db" title=" " alt="" coords="839,107,1053,133"/>
<area shape="rect" href="mmu_8c.html#a2e6bb9bbf6a14b07e8c12c8926547c04" title=" " alt="" coords="843,157,1049,184"/>
<area shape="rect" href="mmu_8c.html#aa8502cc81aa39d5c4631d6208ce15732" title=" " alt="" coords="865,208,1027,235"/>
<area shape="rect" href="mmu_8c.html#aca62a749439306019073c5d5e04fe3e9" title=" " alt="" coords="1105,56,1291,83"/>
<area shape="rect" href="cpuid_8h.html#acf67f5848a2ddd59dc852e37bc330390" title=" " alt="" coords="1139,107,1257,133"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1121,158,1275,199"/>
<area shape="rect" href="mmu_8c.html#a2096473262912949e7dfdbe6f7b7457f" title=" " alt="" coords="1377,5,1499,32"/>
<area shape="rect" href="mmu_8h.html#a20a41b0166b13eb22b15786964f5de9d" title=" " alt="" coords="1397,56,1479,83"/>
<area shape="rect" href="cpuid_8h.html#a786eea4c1fa59be0155455a72125e0ff" title=" " alt="" coords="1581,125,1755,166"/>
<area shape="rect" href="cpuid_8h.html#a72da5444b01d72d935ebc411b99ba166" title=" " alt="" coords="1343,157,1533,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_ae0bba48799c436cc6749fdaa0d95201b_icgraph.png" border="0" usemap="#ammu_8h_ae0bba48799c436cc6749fdaa0d95201b_icgraph" alt=""/></div>
<map name="ammu_8h_ae0bba48799c436cc6749fdaa0d95201b_icgraph" id="ammu_8h_ae0bba48799c436cc6749fdaa0d95201b_icgraph">
<area shape="rect" title=" " alt="" coords="1325,64,1588,91"/>
<area shape="rect" href="mmu_8h.html#ad96f3e909292ae5f41a4ad1f07c98360" title=" " alt="" coords="1147,64,1277,91"/>
<area shape="rect" href="x86_8c.html#a959081b7be4bb67205656d8a1999ddb6" title=" " alt="" coords="919,35,1099,61"/>
<area shape="rect" href="paging__tmpl_8h.html#acb3afde0f06bed4ef5ff00dd8ad8acf1" title=" " alt="" coords="937,89,1081,116"/>
<area shape="rect" href="x86_8c.html#a58700b05b0607c5ff3b515fcb7ed88fa" title=" " alt="" coords="713,23,871,65"/>
<area shape="rect" href="x86_8c.html#a5d51faff82117d36af71fdf38de541f4" title=" " alt="" coords="508,31,665,57"/>
<area shape="rect" href="x86_8c.html#a691d7742446f463af56ba50d3ea90cef" title=" " alt="" coords="271,5,458,32"/>
<area shape="rect" href="x86_8c.html#a7c995e0c9c9dac795da0af090a8e1b91" title=" " alt="" coords="269,56,460,83"/>
<area shape="rect" href="x86_8c.html#a170363aad395e949fddcfd1e6261ee5b" title=" " alt="" coords="5,31,221,57"/>
<area shape="rect" href="x86_8c.html#a5920b07bff7e351a14e1c79f81a8b2d3" title=" " alt="" coords="28,81,199,108"/>
<area shape="rect" href="paging__tmpl_8h.html#a8a3c848b1aae92ef2e683a41f82f314b" title=" " alt="" coords="743,89,841,116"/>
<area shape="rect" href="paging__tmpl_8h.html#a2fcd5acfc877b79f73d44835be14d862" title=" " alt="" coords="747,140,837,167"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="541,140,632,167"/>
</map>
</div>

</div>
</div>
<a id="ab0e194ecad859add3d639850021f8b16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0e194ecad859add3d639850021f8b16">&#9670;&nbsp;</a></span>kvm_mmu_reload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kvm_mmu_reload </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00127">127</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;{</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">if</span> (likely(vcpu-&gt;arch.mmu-&gt;root.hpa != INVALID_PAGE))</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mmu_8h.html#a475bd00898314bb9378d8e4306aa7874">kvm_mmu_load</a>(vcpu);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div>
<div class="ttc" id="ammu_8h_html_a475bd00898314bb9378d8e4306aa7874"><div class="ttname"><a href="mmu_8h.html#a475bd00898314bb9378d8e4306aa7874">kvm_mmu_load</a></div><div class="ttdeci">int kvm_mmu_load(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l05588">mmu.c:5588</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_ab0e194ecad859add3d639850021f8b16_cgraph.png" border="0" usemap="#ammu_8h_ab0e194ecad859add3d639850021f8b16_cgraph" alt=""/></div>
<map name="ammu_8h_ab0e194ecad859add3d639850021f8b16_cgraph" id="ammu_8h_ab0e194ecad859add3d639850021f8b16_cgraph">
<area shape="rect" title=" " alt="" coords="5,845,145,871"/>
<area shape="rect" href="mmu_8h.html#a475bd00898314bb9378d8e4306aa7874" title=" " alt="" coords="193,845,320,871"/>
<area shape="rect" href="mmu_8h.html#ae4afa08892909b9040fa9da2f3a55f74" title=" " alt="" coords="396,129,555,155"/>
<area shape="rect" href="mmu_8c.html#ab00408fb7acb0199782175051f59add6" title=" " alt="" coords="391,179,560,206"/>
<area shape="rect" href="mmu_8c.html#a171383889d717b24003ee27735437bbe" title=" " alt="" coords="386,819,565,846"/>
<area shape="rect" href="mmu_8c.html#a1ede039d44aac6e8ff15be76c16411a1" title=" " alt="" coords="380,870,571,897"/>
<area shape="rect" href="mmu_8c.html#a18996f863c9cabb138be5881a3f1a478" title=" " alt="" coords="382,921,569,947"/>
<area shape="rect" href="mmu_8c.html#a1d91ca91e581985c5a26ba6ca434733f" title=" " alt="" coords="368,971,583,998"/>
<area shape="rect" href="mmu_8c.html#a85cc512fac68747ea8cab508dd83796c" title=" " alt="" coords="677,179,796,206"/>
<area shape="rect" href="spte_8h.html#ab169c1872e98b9731a05121e0439f244" title=" " alt="" coords="953,78,1044,105"/>
<area shape="rect" href="spte_8h.html#af8791b1ec453ef3bce3c87ea28744692" title=" " alt="" coords="1199,41,1329,67"/>
<area shape="rect" href="mmu_8c.html#a2f33377dcdaf5435e453ff75e02075dd" title=" " alt="" coords="661,310,813,337"/>
<area shape="rect" href="x86_8h.html#a0647452067d01e527a8cd1da2fb6b897" title=" " alt="" coords="652,129,821,155"/>
<area shape="rect" href="mmu__internal_8h.html#a6491934fd3538f608b4b91245943b6fc" title=" " alt="" coords="1164,117,1364,143"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="1461,41,1592,67"/>
<area shape="rect" href="mmu_8c.html#a5ab4ca7bcca38cbb996aa2abec5bb5a1" title=" " alt="" coords="907,332,1091,373"/>
<area shape="rect" href="mmu_8c.html#a39a2699f47aac1549c6a1ba2600ee86b" title=" " alt="" coords="935,179,1062,206"/>
<area shape="rect" href="mmu_8c.html#a2a0cdee83771c8d171f5f809076773d2" title=" " alt="" coords="903,398,1094,425"/>
<area shape="rect" href="mmu_8c.html#a2e21344d37e1f1c8c347bed8627da8db" title=" " alt="" coords="893,499,1104,526"/>
<area shape="rect" href="kvm__main_8c.html#aa8688eb80c9acaf8b0aa783b6ac68c16" title=" " alt="" coords="1217,523,1311,550"/>
<area shape="rect" href="mmu_8c.html#aab66bb43b12aa7a1506c323f3fda9893" title=" " alt="" coords="900,281,1097,307"/>
<area shape="rect" href="mmu_8c.html#a708e13186273bcbb28bdabb02c5053dc" title=" " alt="" coords="925,230,1072,257"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="1439,365,1614,391"/>
<area shape="rect" href="mmu_8c.html#ab8e14476297a48107341bc44a29b6af9" title=" " alt="" coords="1155,390,1373,417"/>
<area shape="rect" href="mmu_8c.html#a492e75504ac4cc30ca6dd83087aee286" title=" " alt="" coords="1193,225,1335,251"/>
<area shape="rect" href="mmu_8c.html#aa915f695d4c341eca7d1f5b5a0a26a03" title=" " alt="" coords="1155,174,1373,201"/>
<area shape="rect" href="mmu_8c.html#a1f49638b71a482e4b0c3a6af10d0711e" title=" " alt="" coords="1169,725,1359,767"/>
<area shape="rect" href="kvm__main_8c.html#ac4b56de4919be80c9cd4289f20437c64" title=" " alt="" coords="1163,803,1365,830"/>
<area shape="rect" href="mmu_8h.html#ac9867cac2f7c0a763088b2112951b5ac" title=" " alt="" coords="1421,755,1632,782"/>
<area shape="rect" href="mmu_8h.html#a89c85e383e0f6dfe6f91f5c1dd25e522" title=" " alt="" coords="1680,806,1888,833"/>
<area shape="rect" href="mmu_8c.html#a911006629221ec1bab2fed2f8fab2510" title=" " alt="" coords="1179,281,1349,307"/>
<area shape="rect" href="tdp__mmu_8c.html#ae643f902f826e920f4150bb66872fd47" title=" " alt="" coords="643,644,830,685"/>
<area shape="rect" href="mmu_8c.html#aa3aace355fab834a27a73054cd060480" title=" " alt="" coords="631,819,843,846"/>
<area shape="rect" href="mmu_8c.html#a87f1eb520f5b6b4fdd1e19e18ba670c0" title=" " alt="" coords="673,870,800,897"/>
<area shape="rect" href="mmu__internal_8h.html#a5334557775f77a151865c95f1cd224ac" title=" " alt="" coords="916,702,1081,729"/>
<area shape="rect" href="tdp__mmu_8h.html#ae8fe85fef7c2fb884cd2d27810a84d0b" title=" " alt="" coords="908,550,1089,577"/>
<area shape="rect" href="tdp__mmu_8c.html#aab91e6aa4615cd9bf4f66141ca34642b" title=" " alt="" coords="927,601,1071,627"/>
<area shape="rect" href="tdp__mmu_8c.html#a8d6f094dd9ef458c1c57aee653afd602" title=" " alt="" coords="931,651,1066,678"/>
<area shape="rect" href="mmu_8c.html#a93f1e0e5da1bb603a5e4f250d4d76bb0" title=" " alt="" coords="896,819,1101,846"/>
<area shape="rect" href="mmu_8c.html#aeca903955eae791df4e1e22dcff2671f" title=" " alt="" coords="914,753,1083,795"/>
<area shape="rect" href="mmu_8c.html#a00b24afda1801b4cd19c662c13c99a3c" title=" " alt="" coords="891,870,1107,897"/>
<area shape="rect" href="mmu__internal_8h.html#a0eb4da3250f15ed351ae2f0acc485870" title=" " alt="" coords="631,1022,842,1049"/>
<area shape="rect" href="mmu_8c.html#a2be49d6fcf78af485a16f8798a99ed29" title=" " alt="" coords="639,1073,834,1099"/>
<area shape="rect" href="kvm__main_8c.html#ac6f5a79d7adfff7a4b5256a2a154e926" title=" " alt="" coords="644,921,829,947"/>
<area shape="rect" href="mmu_8c.html#adae854f3c74003a87a9c2a3ae8feada3" title=" " alt="" coords="1175,880,1353,921"/>
<area shape="rect" href="mmu_8c.html#ad46ec95426c3d1db277984090f2ecbd1" title=" " alt="" coords="942,1098,1055,1125"/>
<area shape="rect" href="kvm__cache__regs_8h.html#aa80de2ba11d877ef825788b0c9768378" title=" " alt="" coords="1207,1073,1321,1099"/>
<area shape="rect" href="page__track_8c.html#a21ea1782d6ec58153ffe98e0ca184284" title=" " alt="" coords="1441,857,1612,899"/>
<area shape="rect" href="page__track_8c.html#acdd8bb0c7c8b588137d126d56d20d7fa" title=" " alt="" coords="1441,975,1612,1016"/>
<area shape="rect" href="x86_8c.html#abd6174ba9b312b97d69f36c53aa50e04" title=" " alt="" coords="1447,923,1606,950"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_ab0e194ecad859add3d639850021f8b16_icgraph.png" border="0" usemap="#ammu_8h_ab0e194ecad859add3d639850021f8b16_icgraph" alt=""/></div>
<map name="ammu_8h_ab0e194ecad859add3d639850021f8b16_icgraph" id="ammu_8h_ab0e194ecad859add3d639850021f8b16_icgraph">
<area shape="rect" title=" " alt="" coords="1221,107,1361,133"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="1003,70,1173,111"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="589,136,727,163"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="793,70,955,111"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="571,67,745,93"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="427,5,508,32"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="413,56,522,83"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="412,107,523,133"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="427,157,508,184"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,157,364,184"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,157,129,184"/>
</map>
</div>

</div>
</div>
<a id="a5cb3688f8c5783569f001a056f7d93d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cb3688f8c5783569f001a056f7d93d0">&#9670;&nbsp;</a></span>kvm_mmu_set_ept_masks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_mmu_set_ept_masks </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>has_ad_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>has_exec_only</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00425">425</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;{</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <a class="code" href="spte_8c.html#a88422204fa87484ebb6b1afe5657293e">shadow_user_mask</a>    = VMX_EPT_READABLE_MASK;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="spte_8c.html#a1037a592d9e03bab1ce70a6e471901ae">shadow_accessed_mask</a>    = has_ad_bits ? VMX_EPT_ACCESS_BIT : 0ull;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="spte_8c.html#a4da775a32ca03cd42a18da1e1aac568e">shadow_dirty_mask</a>   = has_ad_bits ? VMX_EPT_DIRTY_BIT : 0ull;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <a class="code" href="spte_8c.html#ac345c70889ab98d540472296de75aaa9">shadow_nx_mask</a>      = 0ull;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <a class="code" href="spte_8c.html#ae4b595f87e310029f3011955be43dc6d">shadow_x_mask</a>       = VMX_EPT_EXECUTABLE_MASK;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="spte_8c.html#af8d723b5e0ffd2c2927bc5ab2ea5219e">shadow_present_mask</a> = has_exec_only ? 0ull : VMX_EPT_READABLE_MASK;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">     * EPT overrides the host MTRRs, and so KVM must program the desired</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">     * memtype directly into the SPTEs.  Note, this mask is just the mask</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">     * of all bits that factor into the memtype, the actual memtype must be</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">     * dynamically calculated, e.g. to ensure host MMIO is mapped UC.</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="spte_8c.html#a61bd7ce98c04ee184b3e600f8bbe1712">shadow_memtype_mask</a> = VMX_EPT_MT_MASK | VMX_EPT_IPAT_BIT;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="spte_8c.html#a1db70b0d38cd86029fc77525fa53d96a">shadow_acc_track_mask</a>   = VMX_EPT_RWX_MASK;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="spte_8c.html#a2539eaf9e6c788f2fa877c7e9e1c29a8">shadow_host_writable_mask</a> = <a class="code" href="spte_8h.html#a1cd8c056889ac6f05f7bccdc2de7ce41">EPT_SPTE_HOST_WRITABLE</a>;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="spte_8c.html#af450287cc0d83434644a34a9b938a250">shadow_mmu_writable_mask</a>  = <a class="code" href="spte_8h.html#a0690b9baddd97e241f0c99894024c19e">EPT_SPTE_MMU_WRITABLE</a>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">     * EPT Misconfigurations are generated if the value of bits 2:0</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">     * of an EPT paging-structure entry is 110b (write/execute).</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="spte_8c.html#a80f2cd338ffdc70a83e10eda040387a5">kvm_mmu_set_mmio_spte_mask</a>(VMX_EPT_MISCONFIG_WX_VALUE,</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                   VMX_EPT_RWX_MASK, 0);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;}</div>
<div class="ttc" id="aspte_8c_html_a1037a592d9e03bab1ce70a6e471901ae"><div class="ttname"><a href="spte_8c.html#a1037a592d9e03bab1ce70a6e471901ae">shadow_accessed_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_accessed_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00032">spte.c:32</a></div></div>
<div class="ttc" id="aspte_8c_html_a1db70b0d38cd86029fc77525fa53d96a"><div class="ttname"><a href="spte_8c.html#a1db70b0d38cd86029fc77525fa53d96a">shadow_acc_track_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_acc_track_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00041">spte.c:41</a></div></div>
<div class="ttc" id="aspte_8c_html_a2539eaf9e6c788f2fa877c7e9e1c29a8"><div class="ttname"><a href="spte_8c.html#a2539eaf9e6c788f2fa877c7e9e1c29a8">shadow_host_writable_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_host_writable_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00027">spte.c:27</a></div></div>
<div class="ttc" id="aspte_8c_html_a4da775a32ca03cd42a18da1e1aac568e"><div class="ttname"><a href="spte_8c.html#a4da775a32ca03cd42a18da1e1aac568e">shadow_dirty_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_dirty_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00033">spte.c:33</a></div></div>
<div class="ttc" id="aspte_8c_html_a80f2cd338ffdc70a83e10eda040387a5"><div class="ttname"><a href="spte_8c.html#a80f2cd338ffdc70a83e10eda040387a5">kvm_mmu_set_mmio_spte_mask</a></div><div class="ttdeci">void kvm_mmu_set_mmio_spte_mask(u64 mmio_value, u64 mmio_mask, u64 access_mask)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00362">spte.c:362</a></div></div>
<div class="ttc" id="aspte_8c_html_a88422204fa87484ebb6b1afe5657293e"><div class="ttname"><a href="spte_8c.html#a88422204fa87484ebb6b1afe5657293e">shadow_user_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_user_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00031">spte.c:31</a></div></div>
<div class="ttc" id="aspte_8c_html_ac345c70889ab98d540472296de75aaa9"><div class="ttname"><a href="spte_8c.html#ac345c70889ab98d540472296de75aaa9">shadow_nx_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_nx_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00029">spte.c:29</a></div></div>
<div class="ttc" id="aspte_8c_html_ae4b595f87e310029f3011955be43dc6d"><div class="ttname"><a href="spte_8c.html#ae4b595f87e310029f3011955be43dc6d">shadow_x_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_x_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00030">spte.c:30</a></div></div>
<div class="ttc" id="aspte_8c_html_af450287cc0d83434644a34a9b938a250"><div class="ttname"><a href="spte_8c.html#af450287cc0d83434644a34a9b938a250">shadow_mmu_writable_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_mmu_writable_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00028">spte.c:28</a></div></div>
<div class="ttc" id="aspte_8c_html_af8d723b5e0ffd2c2927bc5ab2ea5219e"><div class="ttname"><a href="spte_8c.html#af8d723b5e0ffd2c2927bc5ab2ea5219e">shadow_present_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_present_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00037">spte.c:37</a></div></div>
<div class="ttc" id="aspte_8h_html_a0690b9baddd97e241f0c99894024c19e"><div class="ttname"><a href="spte_8h.html#a0690b9baddd97e241f0c99894024c19e">EPT_SPTE_MMU_WRITABLE</a></div><div class="ttdeci">#define EPT_SPTE_MMU_WRITABLE</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00089">spte.h:89</a></div></div>
<div class="ttc" id="aspte_8h_html_a1cd8c056889ac6f05f7bccdc2de7ce41"><div class="ttname"><a href="spte_8h.html#a1cd8c056889ac6f05f7bccdc2de7ce41">EPT_SPTE_HOST_WRITABLE</a></div><div class="ttdeci">#define EPT_SPTE_HOST_WRITABLE</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00088">spte.h:88</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a5cb3688f8c5783569f001a056f7d93d0_cgraph.png" border="0" usemap="#ammu_8h_a5cb3688f8c5783569f001a056f7d93d0_cgraph" alt=""/></div>
<map name="ammu_8h_a5cb3688f8c5783569f001a056f7d93d0_cgraph" id="ammu_8h_a5cb3688f8c5783569f001a056f7d93d0_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,203,32"/>
<area shape="rect" href="spte_8c.html#a80f2cd338ffdc70a83e10eda040387a5" title=" " alt="" coords="251,5,493,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a5cb3688f8c5783569f001a056f7d93d0_icgraph.png" border="0" usemap="#ammu_8h_a5cb3688f8c5783569f001a056f7d93d0_icgraph" alt=""/></div>
<map name="ammu_8h_a5cb3688f8c5783569f001a056f7d93d0_icgraph" id="ammu_8h_a5cb3688f8c5783569f001a056f7d93d0_icgraph">
<area shape="rect" title=" " alt="" coords="180,5,377,32"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="5,5,132,32"/>
</map>
</div>

</div>
</div>
<a id="a24f526505004d8f749e0e069c2efd17a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24f526505004d8f749e0e069c2efd17a">&#9670;&nbsp;</a></span>kvm_mmu_set_me_spte_mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_mmu_set_me_spte_mask </td>
          <td>(</td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>me_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>me_mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00414">414</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;{</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">/* shadow_me_value must be a subset of shadow_me_mask */</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span> (WARN_ON(me_value &amp; ~me_mask))</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        me_value = me_mask = 0;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="spte_8c.html#a1aea0c6f6f3fb8ec2b27d22b737e462c">shadow_me_value</a> = me_value;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="spte_8c.html#a880496effc639a427674eacc301593f3">shadow_me_mask</a> = me_mask;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;}</div>
<div class="ttc" id="aspte_8c_html_a1aea0c6f6f3fb8ec2b27d22b737e462c"><div class="ttname"><a href="spte_8c.html#a1aea0c6f6f3fb8ec2b27d22b737e462c">shadow_me_value</a></div><div class="ttdeci">u64 __read_mostly shadow_me_value</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00039">spte.c:39</a></div></div>
<div class="ttc" id="aspte_8c_html_a880496effc639a427674eacc301593f3"><div class="ttname"><a href="spte_8c.html#a880496effc639a427674eacc301593f3">shadow_me_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_me_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00040">spte.c:40</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a24f526505004d8f749e0e069c2efd17a_icgraph.png" border="0" usemap="#ammu_8h_a24f526505004d8f749e0e069c2efd17a_icgraph" alt=""/></div>
<map name="ammu_8h_a24f526505004d8f749e0e069c2efd17a_icgraph" id="ammu_8h_a24f526505004d8f749e0e069c2efd17a_icgraph">
<area shape="rect" title=" " alt="" coords="428,31,653,57"/>
<area shape="rect" href="svm_8c.html#aa4cdf4791105d54ebcadfeafdcdf01ac" title=" " alt="" coords="199,5,361,32"/>
<area shape="rect" href="vmx_8c.html#a3e17271461560cfca4cc0f4deccd430f" title=" " alt="" coords="180,56,380,83"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="5,56,132,83"/>
</map>
</div>

</div>
</div>
<a id="a80f2cd338ffdc70a83e10eda040387a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80f2cd338ffdc70a83e10eda040387a5">&#9670;&nbsp;</a></span>kvm_mmu_set_mmio_spte_mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_mmu_set_mmio_spte_mask </td>
          <td>(</td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>mmio_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>mmio_mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>access_mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00362">362</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;{</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    BUG_ON((u64)(<span class="keywordtype">unsigned</span>)access_mask != access_mask);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    WARN_ON(mmio_value &amp; <a class="code" href="spte_8c.html#ad79ebd99e580b4e6fe8338ad43f3e6b0">shadow_nonpresent_or_rsvd_lower_gfn_mask</a>);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">     * Reset to the original module param value to honor userspace&#39;s desire</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">     * to (dis)allow MMIO caching.  Update the param itself so that</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">     * userspace can see whether or not KVM is actually using MMIO caching.</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="spte_8c.html#ad1f35c581f53d7ebf9ada1be6d5531ad">enable_mmio_caching</a> = <a class="code" href="spte_8c.html#a329e4ae6a29cf76c6524ccc85279b8d6">allow_mmio_caching</a>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="spte_8c.html#ad1f35c581f53d7ebf9ada1be6d5531ad">enable_mmio_caching</a>)</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        mmio_value = 0;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">     * The mask must contain only bits that are carved out specifically for</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">     * the MMIO SPTE mask, e.g. to ensure there&#39;s no overlap with the MMIO</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">     * generation.</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">if</span> (WARN_ON(mmio_mask &amp; ~<a class="code" href="spte_8h.html#a0c54fb4a604513fdd19019c4e60b7fde">SPTE_MMIO_ALLOWED_MASK</a>))</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        mmio_value = 0;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">     * Disable MMIO caching if the MMIO value collides with the bits that</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">     * are used to hold the relocated GFN when the L1TF mitigation is</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">     * enabled.  This should never fire as there is no known hardware that</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">     * can trigger this condition, e.g. SME/SEV CPUs that require a custom</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">     * MMIO value are not susceptible to L1TF.</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">if</span> (WARN_ON(mmio_value &amp; (<a class="code" href="spte_8c.html#a2d00cde16d32442591f9b96abcaadf94">shadow_nonpresent_or_rsvd_mask</a> &lt;&lt;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                  <a class="code" href="spte_8h.html#a1a17a48568e4885c2681903b021d5002">SHADOW_NONPRESENT_OR_RSVD_MASK_LEN</a>)))</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        mmio_value = 0;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">     * The masked MMIO value must obviously match itself and a removed SPTE</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">     * must not get a false positive.  Removed SPTEs and MMIO SPTEs should</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">     * never collide as MMIO must set some RWX bits, and removed SPTEs must</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">     * not set any RWX bits.</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">if</span> (WARN_ON((mmio_value &amp; mmio_mask) != mmio_value) ||</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        WARN_ON(mmio_value &amp;&amp; (<a class="code" href="spte_8h.html#a9e3b5ea0bcca48866f5fb2e94ae03826">REMOVED_SPTE</a> &amp; mmio_mask) == mmio_value))</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        mmio_value = 0;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">if</span> (!mmio_value)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <a class="code" href="spte_8c.html#ad1f35c581f53d7ebf9ada1be6d5531ad">enable_mmio_caching</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <a class="code" href="spte_8c.html#aff0e78f9604a10796d208995c28b1371">shadow_mmio_value</a> = mmio_value;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <a class="code" href="spte_8c.html#a59be1c97d42d1a20cd3341c0133674f7">shadow_mmio_mask</a>  = mmio_mask;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <a class="code" href="spte_8c.html#a598921f5a19013886e32dec8999ab00e">shadow_mmio_access_mask</a> = access_mask;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;}</div>
<div class="ttc" id="aspte_8c_html_a2d00cde16d32442591f9b96abcaadf94"><div class="ttname"><a href="spte_8c.html#a2d00cde16d32442591f9b96abcaadf94">shadow_nonpresent_or_rsvd_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_nonpresent_or_rsvd_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00043">spte.c:43</a></div></div>
<div class="ttc" id="aspte_8c_html_a329e4ae6a29cf76c6524ccc85279b8d6"><div class="ttname"><a href="spte_8c.html#a329e4ae6a29cf76c6524ccc85279b8d6">allow_mmio_caching</a></div><div class="ttdeci">static bool __ro_after_init allow_mmio_caching</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00023">spte.c:23</a></div></div>
<div class="ttc" id="aspte_8c_html_a598921f5a19013886e32dec8999ab00e"><div class="ttname"><a href="spte_8c.html#a598921f5a19013886e32dec8999ab00e">shadow_mmio_access_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_mmio_access_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00036">spte.c:36</a></div></div>
<div class="ttc" id="aspte_8c_html_a59be1c97d42d1a20cd3341c0133674f7"><div class="ttname"><a href="spte_8c.html#a59be1c97d42d1a20cd3341c0133674f7">shadow_mmio_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_mmio_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00035">spte.c:35</a></div></div>
<div class="ttc" id="aspte_8c_html_ad1f35c581f53d7ebf9ada1be6d5531ad"><div class="ttname"><a href="spte_8c.html#ad1f35c581f53d7ebf9ada1be6d5531ad">enable_mmio_caching</a></div><div class="ttdeci">bool __read_mostly enable_mmio_caching</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00022">spte.c:22</a></div></div>
<div class="ttc" id="aspte_8c_html_ad79ebd99e580b4e6fe8338ad43f3e6b0"><div class="ttname"><a href="spte_8c.html#ad79ebd99e580b4e6fe8338ad43f3e6b0">shadow_nonpresent_or_rsvd_lower_gfn_mask</a></div><div class="ttdeci">u64 __read_mostly shadow_nonpresent_or_rsvd_lower_gfn_mask</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00044">spte.c:44</a></div></div>
<div class="ttc" id="aspte_8c_html_aff0e78f9604a10796d208995c28b1371"><div class="ttname"><a href="spte_8c.html#aff0e78f9604a10796d208995c28b1371">shadow_mmio_value</a></div><div class="ttdeci">u64 __read_mostly shadow_mmio_value</div><div class="ttdef"><b>Definition:</b> <a href="spte_8c_source.html#l00034">spte.c:34</a></div></div>
<div class="ttc" id="aspte_8h_html_a0c54fb4a604513fdd19019c4e60b7fde"><div class="ttname"><a href="spte_8h.html#a0c54fb4a604513fdd19019c4e60b7fde">SPTE_MMIO_ALLOWED_MASK</a></div><div class="ttdeci">#define SPTE_MMIO_ALLOWED_MASK</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00137">spte.h:137</a></div></div>
<div class="ttc" id="aspte_8h_html_a1a17a48568e4885c2681903b021d5002"><div class="ttname"><a href="spte_8h.html#a1a17a48568e4885c2681903b021d5002">SHADOW_NONPRESENT_OR_RSVD_MASK_LEN</a></div><div class="ttdeci">#define SHADOW_NONPRESENT_OR_RSVD_MASK_LEN</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00183">spte.h:183</a></div></div>
<div class="ttc" id="aspte_8h_html_a9e3b5ea0bcca48866f5fb2e94ae03826"><div class="ttname"><a href="spte_8h.html#a9e3b5ea0bcca48866f5fb2e94ae03826">REMOVED_SPTE</a></div><div class="ttdeci">#define REMOVED_SPTE</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00197">spte.h:197</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a80f2cd338ffdc70a83e10eda040387a5_icgraph.png" border="0" usemap="#ammu_8h_a80f2cd338ffdc70a83e10eda040387a5_icgraph" alt=""/></div>
<map name="ammu_8h_a80f2cd338ffdc70a83e10eda040387a5_icgraph" id="ammu_8h_a80f2cd338ffdc70a83e10eda040387a5_icgraph">
<area shape="rect" title=" " alt="" coords="1088,89,1331,116"/>
<area shape="rect" href="spte_8c.html#ad87f402ab1a9a0340b4e280deb05dd7c" title=" " alt="" coords="850,23,1033,65"/>
<area shape="rect" href="spte_8c.html#a5cb3688f8c5783569f001a056f7d93d0" title=" " alt="" coords="843,89,1040,116"/>
<area shape="rect" href="svm_8c.html#ae9ce56e3c8875ba1d607bb1be8ed420f" title=" " alt="" coords="849,140,1034,167"/>
<area shape="rect" href="mmu_8c.html#ac1e20896385a0e158bf217a24a6d6234" title=" " alt="" coords="567,31,795,57"/>
<area shape="rect" href="x86_8c.html#a0ad8fc4784d6d316f3d9f5afe640af81" title=" " alt="" coords="343,31,519,57"/>
<area shape="rect" href="x86_8c.html#ae295ff45fc91a432658e57dda4dfea68" title=" " alt="" coords="132,31,295,57"/>
<area shape="rect" href="svm_8c.html#aa667b0a0f202f83aa1533825aeecb402" title=" " alt="" coords="5,5,84,32"/>
<area shape="rect" href="vmx_8c.html#aa8f62a8c3a5a5da29c69565d2645a371" title=" " alt="" coords="5,56,84,83"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="617,89,744,116"/>
<area shape="rect" href="svm_8c.html#aa4cdf4791105d54ebcadfeafdcdf01ac" title=" " alt="" coords="600,140,761,167"/>
</map>
</div>

</div>
</div>
<a id="a5811b24582939343961d6699f639ddc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5811b24582939343961d6699f639ddc7">&#9670;&nbsp;</a></span>kvm_mmu_slot_lpages()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long kvm_mmu_slot_lpages </td>
          <td>(</td>
          <td class="paramtype">struct kvm_memory_slot *&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00300">300</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;{</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mmu_8h.html#a4a1851ad21795102ec5d6f395525ff78">__kvm_mmu_slot_lpages</a>(slot, slot-&gt;npages, level);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}</div>
<div class="ttc" id="ammu_8h_html_a4a1851ad21795102ec5d6f395525ff78"><div class="ttname"><a href="mmu_8h.html#a4a1851ad21795102ec5d6f395525ff78">__kvm_mmu_slot_lpages</a></div><div class="ttdeci">static unsigned long __kvm_mmu_slot_lpages(struct kvm_memory_slot *slot, unsigned long npages, int level)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00292">mmu.h:292</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a5811b24582939343961d6699f639ddc7_cgraph.png" border="0" usemap="#ammu_8h_a5811b24582939343961d6699f639ddc7_cgraph" alt=""/></div>
<map name="ammu_8h_a5811b24582939343961d6699f639ddc7_cgraph" id="ammu_8h_a5811b24582939343961d6699f639ddc7_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,179,32"/>
<area shape="rect" href="mmu_8h.html#a4a1851ad21795102ec5d6f395525ff78" title=" " alt="" coords="227,5,413,32"/>
<area shape="rect" href="mmu_8h.html#a41b79b63cae220349d8eb5a54f047939" title=" " alt="" coords="461,5,568,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a5811b24582939343961d6699f639ddc7_icgraph.png" border="0" usemap="#ammu_8h_a5811b24582939343961d6699f639ddc7_icgraph" alt=""/></div>
<map name="ammu_8h_a5811b24582939343961d6699f639ddc7_icgraph" id="ammu_8h_a5811b24582939343961d6699f639ddc7_icgraph">
<area shape="rect" title=" " alt="" coords="525,5,699,32"/>
<area shape="rect" href="debugfs_8c.html#a036e43f2625e35a5d7d037b533b231be" title=" " alt="" coords="264,5,477,32"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="5,5,216,32"/>
</map>
</div>

</div>
</div>
<a id="a6d448c19a18bd089be4c218a86d523be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d448c19a18bd089be4c218a86d523be">&#9670;&nbsp;</a></span>kvm_mmu_sync_prev_roots()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_mmu_sync_prev_roots </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l04062">4062</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;{</div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> roots_to_free = 0;</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160; </div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; KVM_MMU_NUM_PREV_ROOTS; i++)</div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mmu_8c.html#a85cc512fac68747ea8cab508dd83796c">is_unsync_root</a>(vcpu-&gt;arch.mmu-&gt;prev_roots[i].hpa))</div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;            roots_to_free |= KVM_MMU_ROOT_PREVIOUS(i);</div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160; </div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;    <span class="comment">/* sync prev_roots by simply freeing them */</span></div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;    <a class="code" href="mmu_8c.html#ab7d4e418cb85a72507e384df5027293e">kvm_mmu_free_roots</a>(vcpu-&gt;kvm, vcpu-&gt;arch.mmu, roots_to_free);</div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;}</div>
<div class="ttc" id="ammu_8c_html_a85cc512fac68747ea8cab508dd83796c"><div class="ttname"><a href="mmu_8c.html#a85cc512fac68747ea8cab508dd83796c">is_unsync_root</a></div><div class="ttdeci">static bool is_unsync_root(hpa_t root)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l03986">mmu.c:3986</a></div></div>
<div class="ttc" id="ammu_8c_html_ab7d4e418cb85a72507e384df5027293e"><div class="ttname"><a href="mmu_8c.html#ab7d4e418cb85a72507e384df5027293e">kvm_mmu_free_roots</a></div><div class="ttdeci">void kvm_mmu_free_roots(struct kvm *kvm, struct kvm_mmu *mmu, ulong roots_to_free)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l03587">mmu.c:3587</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a6d448c19a18bd089be4c218a86d523be_cgraph.png" border="0" usemap="#ammu_8h_a6d448c19a18bd089be4c218a86d523be_cgraph" alt=""/></div>
<map name="ammu_8h_a6d448c19a18bd089be4c218a86d523be_cgraph" id="ammu_8h_a6d448c19a18bd089be4c218a86d523be_cgraph">
<area shape="rect" title=" " alt="" coords="5,189,211,216"/>
<area shape="rect" href="mmu_8c.html#a85cc512fac68747ea8cab508dd83796c" title=" " alt="" coords="493,88,612,115"/>
<area shape="rect" href="mmu_8c.html#ab7d4e418cb85a72507e384df5027293e" title=" " alt="" coords="259,215,424,241"/>
<area shape="rect" href="mmu__internal_8h.html#a6491934fd3538f608b4b91245943b6fc" title=" " alt="" coords="964,5,1164,32"/>
<area shape="rect" href="spte_8h.html#ab169c1872e98b9731a05121e0439f244" title=" " alt="" coords="745,189,836,216"/>
<area shape="rect" href="spte_8h.html#af8791b1ec453ef3bce3c87ea28744692" title=" " alt="" coords="1803,60,1933,87"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="2050,60,2181,87"/>
<area shape="rect" href="mmu_8c.html#ab8e14476297a48107341bc44a29b6af9" title=" " alt="" coords="681,797,900,824"/>
<area shape="rect" href="kvm__main_8c.html#aa8688eb80c9acaf8b0aa783b6ac68c16" title=" " alt="" coords="506,291,599,317"/>
<area shape="rect" href="mmu_8c.html#a5b648a843c7267d204fe81facbc9f84f" title=" " alt="" coords="472,240,633,267"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="977,797,1151,824"/>
<area shape="rect" href="mmu_8c.html#a584797a273970c4c5a807189bdc0004e" title=" " alt="" coords="953,848,1175,875"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="1228,732,1439,759"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="1497,731,1707,773"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="1785,785,1951,812"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="1774,735,1962,761"/>
<area shape="rect" href="kvm__main_8c.html#a7682302871243c20a5dd16214655db15" title=" " alt="" coords="2076,785,2155,812"/>
<area shape="rect" href="kvm__main_8c.html#a9316cc70360fb39d920d5c76a2e41f35" title=" " alt="" coords="2027,735,2203,761"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="2039,684,2192,711"/>
<area shape="rect" href="mmu_8c.html#a61b041a986244b62aedac5b132cf2c09" title=" " alt="" coords="1244,838,1423,879"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="2028,368,2203,395"/>
<area shape="rect" href="mmu_8c.html#a69a9545d1380d3c51ec6fa0f9ff36555" title=" " alt="" coords="1509,845,1695,872"/>
<area shape="rect" href="tdp__mmu_8h.html#a166bc9e57a26e8a37e94e2314a72d226" title=" " alt="" coords="1531,629,1673,656"/>
<area shape="rect" href="mmu_8c.html#aa915f695d4c341eca7d1f5b5a0a26a03" title=" " alt="" coords="681,349,900,376"/>
<area shape="rect" href="tdp__mmu_8c.html#a8a9d637b546d8dfd125028f823a6eac0" title=" " alt="" coords="700,680,881,707"/>
<area shape="rect" href="mmu_8c.html#a01417b2ac70337a4419dc0f171bd548f" title=" " alt="" coords="948,376,1180,403"/>
<area shape="rect" href="mmu_8c.html#a39242ba7b127ebf064de37a1224635cd" title=" " alt="" coords="1274,579,1393,605"/>
<area shape="rect" href="mmu_8c.html#abab2bb5454cc72ba2e4913a87e5800fe" title=" " alt="" coords="1244,259,1423,301"/>
<area shape="rect" href="mmu_8c.html#a9d4eccd9e1e1198a1e63d28b750efe83" title=" " alt="" coords="1505,376,1699,403"/>
<area shape="rect" href="mmu_8c.html#ac1f044f2e317d0cd567530208b7118ee" title=" " alt="" coords="1231,157,1436,184"/>
<area shape="rect" href="mmu_8c.html#a2a0cdee83771c8d171f5f809076773d2" title=" " alt="" coords="1238,427,1429,453"/>
<area shape="rect" href="mmu_8c.html#af8bc85c6e33cec42152e7982b1fb4cba" title=" " alt="" coords="1234,528,1433,555"/>
<area shape="rect" href="mmu_8c.html#a85d47efa797da896b3bb3cf1cc32d768" title=" " alt="" coords="1278,208,1389,235"/>
<area shape="rect" href="mmu_8c.html#a802c5b4f03cc2183d5a097abb661e90c" title=" " alt="" coords="1238,325,1429,352"/>
<area shape="rect" href="mmu_8c.html#ab0716e0d51f7a555f58f426cbfb6d890" title=" " alt="" coords="1252,477,1415,504"/>
<area shape="rect" href="mmu_8c.html#a5d549ae5b6c13e9b87ccc13127ddf86a" title=" " alt="" coords="1525,216,1679,243"/>
<area shape="rect" href="mmu_8c.html#afa9309dada333ba442f20329ecd94033" title=" " alt="" coords="1804,368,1932,395"/>
<area shape="rect" href="mmu_8c.html#a85a8d231f0b692ff61afb66570575734" title=" " alt="" coords="2019,241,2212,268"/>
<area shape="rect" href="mmu_8c.html#a3ee167c290bf125621f455ec5af142a2" title=" " alt="" coords="1825,267,1911,293"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="1819,165,1917,192"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="1811,216,1925,243"/>
<area shape="rect" href="mmu_8c.html#ac65268f7bfa05d3c874b604bd3b792b5" title=" " alt="" coords="1810,419,1926,445"/>
<area shape="rect" href="mmu_8c.html#a71c1314be1e3b4e36ea7a12f3a66dc7a" title=" " alt="" coords="1496,157,1708,184"/>
<area shape="rect" href="mmu_8c.html#aab66bb43b12aa7a1506c323f3fda9893" title=" " alt="" coords="1503,579,1701,605"/>
<area shape="rect" href="mmu_8c.html#a708e13186273bcbb28bdabb02c5053dc" title=" " alt="" coords="1529,528,1675,555"/>
<area shape="rect" href="mmu_8c.html#a2fba0b2dd67723bfbc4349ea7c8e019a" title=" " alt="" coords="1525,310,1679,351"/>
<area shape="rect" href="page__track_8c.html#ac2932f8336fdd5b8071d5e360cddacd5" title=" " alt="" coords="1487,427,1717,453"/>
<area shape="rect" href="mmu_8c.html#a8726aec6b800501379c831dad5432043" title=" " alt="" coords="1765,473,1971,500"/>
<area shape="rect" href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279" title=" " alt="" coords="981,731,1147,773"/>
<area shape="rect" href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b" title=" " alt="" coords="1264,783,1403,809"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a6d448c19a18bd089be4c218a86d523be_icgraph.png" border="0" usemap="#ammu_8h_a6d448c19a18bd089be4c218a86d523be_icgraph" alt=""/></div>
<map name="ammu_8h_a6d448c19a18bd089be4c218a86d523be_icgraph" id="ammu_8h_a6d448c19a18bd089be4c218a86d523be_icgraph">
<area shape="rect" title=" " alt="" coords="1315,407,1520,433"/>
<area shape="rect" href="x86_8c.html#a334f9c72dae5c0a2867b04acbc2beb6e" title=" " alt="" coords="1116,399,1267,441"/>
<area shape="rect" href="x86_8c.html#abf28742eaf88f469f322233afeb66b59" title=" " alt="" coords="901,341,1068,382"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="707,432,845,459"/>
<area shape="rect" href="x86_8c.html#a187212c772cf6e896de2a5304f88b9fb" title=" " alt="" coords="915,457,1054,484"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="699,275,853,301"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="213,31,361,57"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="481,121,604,148"/>
<area shape="rect" href="vmx_2nested_8c.html#a4e307e2bcf664c83265b1442e3fc8da2" title=" " alt="" coords="455,173,631,214"/>
<area shape="rect" href="vmx_2nested_8c.html#ad3cab9cf8633364513bd6a24caecf41a" title=" " alt="" coords="435,238,651,279"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="188,275,387,301"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fcc88ceee4f57a3dbf23fedb46a5cb" title=" " alt="" coords="467,55,618,97"/>
<area shape="rect" href="vmx_2nested_8c.html#aedc5821e9af5c7bd4aac6c06f4ca046f" title=" " alt="" coords="453,355,633,381"/>
<area shape="rect" href="vmx_2hyperv_8c.html#a937e30dece4579b71b17efcd54c1d910" title=" " alt="" coords="451,406,635,447"/>
<area shape="rect" href="vmx_2nested_8c.html#a64e6550fab681b40c832fe4e2d5e3b95" title=" " alt="" coords="470,472,615,499"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="5,31,140,57"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="202,111,373,153"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="9,119,136,145"/>
<area shape="rect" href="vmx_2nested_8c.html#a6a1c45a52fde9844f4431a9db00dbf9f" title=" " alt="" coords="206,177,369,218"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="7,184,138,211"/>
<area shape="rect" href="vmx_2nested_8c.html#a2c53f6d5cd8133df2c8e67ab90b9aa5f" title=" " alt="" coords="201,408,374,435"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="232,459,343,485"/>
<area shape="rect" href="vmx_2nested_8c.html#acee8cb651216e97a9c12b807243ae59a" title=" " alt="" coords="203,509,372,536"/>
<area shape="rect" href="vmx_8c.html#ac1cd58b9f223df9d6b5fe9695c0cbe2b" title=" " alt="" coords="11,408,134,435"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="502,535,583,561"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="194,560,381,587"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="11,560,135,587"/>
</map>
</div>

</div>
</div>
<a id="ab00408fb7acb0199782175051f59add6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab00408fb7acb0199782175051f59add6">&#9670;&nbsp;</a></span>kvm_mmu_sync_roots()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_mmu_sync_roots </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l04021">4021</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;{</div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__mmu__page.html">kvm_mmu_page</a> *sp;</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160; </div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;    <span class="keywordflow">if</span> (vcpu-&gt;arch.mmu-&gt;root_role.direct)</div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160; </div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;    <span class="keywordflow">if</span> (!VALID_PAGE(vcpu-&gt;arch.mmu-&gt;root.hpa))</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160; </div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;    <a class="code" href="x86_8h.html#a0647452067d01e527a8cd1da2fb6b897">vcpu_clear_mmio_info</a>(vcpu, <a class="code" href="x86_8h.html#ae8fc6afc14ddddfd3c359c6bd495b3ff">MMIO_GVA_ANY</a>);</div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160; </div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;    <span class="keywordflow">if</span> (vcpu-&gt;arch.mmu-&gt;cpu_role.base.level &gt;= <a class="code" href="mmu_8h.html#ac16f657d0a07511b24afa81de87e2404">PT64_ROOT_4LEVEL</a>) {</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;        hpa_t root = vcpu-&gt;arch.mmu-&gt;root.hpa;</div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160; </div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="mmu_8c.html#a85cc512fac68747ea8cab508dd83796c">is_unsync_root</a>(root))</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160; </div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;        sp = <a class="code" href="spte_8h.html#ab169c1872e98b9731a05121e0439f244">root_to_sp</a>(root);</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160; </div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;        write_lock(&amp;vcpu-&gt;kvm-&gt;mmu_lock);</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;        <a class="code" href="mmu_8c.html#a2f33377dcdaf5435e453ff75e02075dd">mmu_sync_children</a>(vcpu, sp, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;        write_unlock(&amp;vcpu-&gt;kvm-&gt;mmu_lock);</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;    }</div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160; </div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;    write_lock(&amp;vcpu-&gt;kvm-&gt;mmu_lock);</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160; </div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 4; ++i) {</div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;        hpa_t root = vcpu-&gt;arch.mmu-&gt;pae_root[i];</div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160; </div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mmu__internal_8h.html#a14bc6bffc6f94f99aefd177e15fb6d90">IS_VALID_PAE_ROOT</a>(root)) {</div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;            sp = <a class="code" href="spte_8h.html#af8791b1ec453ef3bce3c87ea28744692">spte_to_child_sp</a>(root);</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;            <a class="code" href="mmu_8c.html#a2f33377dcdaf5435e453ff75e02075dd">mmu_sync_children</a>(vcpu, sp, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;        }</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;    }</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160; </div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;    write_unlock(&amp;vcpu-&gt;kvm-&gt;mmu_lock);</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;}</div>
<div class="ttc" id="ammu_8c_html_a2f33377dcdaf5435e453ff75e02075dd"><div class="ttname"><a href="mmu_8c.html#a2f33377dcdaf5435e453ff75e02075dd">mmu_sync_children</a></div><div class="ttdeci">static int mmu_sync_children(struct kvm_vcpu *vcpu, struct kvm_mmu_page *parent, bool can_yield)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l02093">mmu.c:2093</a></div></div>
<div class="ttc" id="ammu__internal_8h_html_a14bc6bffc6f94f99aefd177e15fb6d90"><div class="ttname"><a href="mmu__internal_8h.html#a14bc6bffc6f94f99aefd177e15fb6d90">IS_VALID_PAE_ROOT</a></div><div class="ttdeci">#define IS_VALID_PAE_ROOT(x)</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00038">mmu_internal.h:38</a></div></div>
<div class="ttc" id="aspte_8h_html_ab169c1872e98b9731a05121e0439f244"><div class="ttname"><a href="spte_8h.html#ab169c1872e98b9731a05121e0439f244">root_to_sp</a></div><div class="ttdeci">static struct kvm_mmu_page * root_to_sp(hpa_t root)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00240">spte.h:240</a></div></div>
<div class="ttc" id="aspte_8h_html_af8791b1ec453ef3bce3c87ea28744692"><div class="ttname"><a href="spte_8h.html#af8791b1ec453ef3bce3c87ea28744692">spte_to_child_sp</a></div><div class="ttdeci">static struct kvm_mmu_page * spte_to_child_sp(u64 spte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00230">spte.h:230</a></div></div>
<div class="ttc" id="astructkvm__mmu__page_html"><div class="ttname"><a href="structkvm__mmu__page.html">kvm_mmu_page</a></div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00052">mmu_internal.h:52</a></div></div>
<div class="ttc" id="ax86_8h_html_a0647452067d01e527a8cd1da2fb6b897"><div class="ttname"><a href="x86_8h.html#a0647452067d01e527a8cd1da2fb6b897">vcpu_clear_mmio_info</a></div><div class="ttdeci">static void vcpu_clear_mmio_info(struct kvm_vcpu *vcpu, gva_t gva)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8h_source.html#l00247">x86.h:247</a></div></div>
<div class="ttc" id="ax86_8h_html_ae8fc6afc14ddddfd3c359c6bd495b3ff"><div class="ttname"><a href="x86_8h.html#ae8fc6afc14ddddfd3c359c6bd495b3ff">MMIO_GVA_ANY</a></div><div class="ttdeci">#define MMIO_GVA_ANY</div><div class="ttdef"><b>Definition:</b> <a href="x86_8h_source.html#l00245">x86.h:245</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_ab00408fb7acb0199782175051f59add6_cgraph.png" border="0" usemap="#ammu_8h_ab00408fb7acb0199782175051f59add6_cgraph" alt=""/></div>
<map name="ammu_8h_ab00408fb7acb0199782175051f59add6_cgraph" id="ammu_8h_ab00408fb7acb0199782175051f59add6_cgraph">
<area shape="rect" title=" " alt="" coords="5,107,175,133"/>
<area shape="rect" href="mmu_8c.html#a85cc512fac68747ea8cab508dd83796c" title=" " alt="" coords="248,5,367,32"/>
<area shape="rect" href="spte_8h.html#ab169c1872e98b9731a05121e0439f244" title=" " alt="" coords="500,56,591,83"/>
<area shape="rect" href="spte_8h.html#af8791b1ec453ef3bce3c87ea28744692" title=" " alt="" coords="2021,107,2151,133"/>
<area shape="rect" href="mmu_8c.html#a2f33377dcdaf5435e453ff75e02075dd" title=" " alt="" coords="231,411,383,437"/>
<area shape="rect" href="x86_8h.html#a0647452067d01e527a8cd1da2fb6b897" title=" " alt="" coords="223,461,392,488"/>
<area shape="rect" href="mmu__internal_8h.html#a6491934fd3538f608b4b91245943b6fc" title=" " alt="" coords="708,5,908,32"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="2221,107,2352,133"/>
<area shape="rect" href="mmu_8c.html#a5ab4ca7bcca38cbb996aa2abec5bb5a1" title=" " alt="" coords="453,345,637,386"/>
<area shape="rect" href="mmu_8c.html#a39a2699f47aac1549c6a1ba2600ee86b" title=" " alt="" coords="482,717,609,744"/>
<area shape="rect" href="mmu_8c.html#a2a0cdee83771c8d171f5f809076773d2" title=" " alt="" coords="1265,933,1455,960"/>
<area shape="rect" href="mmu_8c.html#aab66bb43b12aa7a1506c323f3fda9893" title=" " alt="" coords="1520,883,1717,909"/>
<area shape="rect" href="mmu_8c.html#a708e13186273bcbb28bdabb02c5053dc" title=" " alt="" coords="1545,499,1692,525"/>
<area shape="rect" href="mmu_8c.html#a2e21344d37e1f1c8c347bed8627da8db" title=" " alt="" coords="440,293,651,320"/>
<area shape="rect" href="kvm__main_8c.html#aa8688eb80c9acaf8b0aa783b6ac68c16" title=" " alt="" coords="499,411,592,437"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="999,411,1173,437"/>
<area shape="rect" href="mmu_8c.html#ab8e14476297a48107341bc44a29b6af9" title=" " alt="" coords="699,360,917,387"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="1255,411,1465,437"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="1513,411,1724,453"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="1778,419,1945,445"/>
<area shape="rect" href="mmu_8c.html#a584797a273970c4c5a807189bdc0004e" title=" " alt="" coords="975,360,1197,387"/>
<area shape="rect" href="mmu_8c.html#a61b041a986244b62aedac5b132cf2c09" title=" " alt="" coords="1772,353,1951,394"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="1999,360,2173,387"/>
<area shape="rect" href="mmu_8c.html#a492e75504ac4cc30ca6dd83087aee286" title=" " alt="" coords="737,793,879,820"/>
<area shape="rect" href="mmu_8c.html#aa915f695d4c341eca7d1f5b5a0a26a03" title=" " alt="" coords="699,717,917,744"/>
<area shape="rect" href="mmu_8c.html#aadbe3c71aec71d1655ebb75d32a6f677" title=" " alt="" coords="1000,793,1172,820"/>
<area shape="rect" href="mmu_8c.html#af5a315f8e6c3430789204ab72fdfac5d" title=" " alt="" coords="1025,844,1147,871"/>
<area shape="rect" href="mmu_8c.html#a01417b2ac70337a4419dc0f171bd548f" title=" " alt="" coords="970,692,1202,719"/>
<area shape="rect" href="mmu_8c.html#a39242ba7b127ebf064de37a1224635cd" title=" " alt="" coords="1301,512,1419,539"/>
<area shape="rect" href="mmu_8c.html#abab2bb5454cc72ba2e4913a87e5800fe" title=" " alt="" coords="1271,563,1449,605"/>
<area shape="rect" href="mmu_8c.html#a9d4eccd9e1e1198a1e63d28b750efe83" title=" " alt="" coords="1263,629,1457,656"/>
<area shape="rect" href="mmu_8c.html#ac1f044f2e317d0cd567530208b7118ee" title=" " alt="" coords="1257,680,1463,707"/>
<area shape="rect" href="mmu_8c.html#af8bc85c6e33cec42152e7982b1fb4cba" title=" " alt="" coords="1261,883,1459,909"/>
<area shape="rect" href="mmu_8c.html#a85d47efa797da896b3bb3cf1cc32d768" title=" " alt="" coords="1305,731,1415,757"/>
<area shape="rect" href="mmu_8c.html#a802c5b4f03cc2183d5a097abb661e90c" title=" " alt="" coords="1265,781,1455,808"/>
<area shape="rect" href="mmu_8c.html#ab0716e0d51f7a555f58f426cbfb6d890" title=" " alt="" coords="1279,832,1441,859"/>
<area shape="rect" href="mmu_8c.html#a911006629221ec1bab2fed2f8fab2510" title=" " alt="" coords="2001,648,2171,675"/>
<area shape="rect" href="mmu_8c.html#a2c784dfebb5c884b33c66e9c01d5c10c" title=" " alt="" coords="1781,469,1942,496"/>
<area shape="rect" href="mmu_8c.html#acb198f7ad14a5e6323779f8c8d0efdad" title=" " alt="" coords="2019,520,2153,547"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="2035,469,2137,496"/>
<area shape="rect" href="mmu_8c.html#a1f49638b71a482e4b0c3a6af10d0711e" title=" " alt="" coords="713,235,903,277"/>
<area shape="rect" href="kvm__main_8c.html#ac4b56de4919be80c9cd4289f20437c64" title=" " alt="" coords="707,301,909,328"/>
<area shape="rect" href="mmu_8c.html#a6c0de1f668bad24810049a8ea46883a5" title=" " alt="" coords="1034,309,1138,336"/>
<area shape="rect" href="mmu_8h.html#ac9867cac2f7c0a763088b2112951b5ac" title=" " alt="" coords="981,208,1191,235"/>
<area shape="rect" href="tdp__mmu_8c.html#a45fd618d35fb0df14a3401a230f41faa" title=" " alt="" coords="965,157,1207,184"/>
<area shape="rect" href="mmu_8c.html#a3e1cbf10ba62d93c99dffc655ec0282a" title=" " alt="" coords="1011,259,1161,285"/>
<area shape="rect" href="mmu_8h.html#a41b79b63cae220349d8eb5a54f047939" title=" " alt="" coords="1307,309,1413,336"/>
<area shape="rect" href="mmu_8h.html#a89c85e383e0f6dfe6f91f5c1dd25e522" title=" " alt="" coords="1256,208,1464,235"/>
<area shape="rect" href="tdp__mmu_8c.html#aa07f9d272e2404a5b5392ae7aa175580" title=" " alt="" coords="1551,193,1687,220"/>
<area shape="rect" href="mmu_8c.html#afac424a6a4cdd467fc2d6ba22b88d08f" title=" " alt="" coords="1289,259,1431,285"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_ab00408fb7acb0199782175051f59add6_icgraph.png" border="0" usemap="#ammu_8h_ab00408fb7acb0199782175051f59add6_icgraph" alt=""/></div>
<map name="ammu_8h_ab00408fb7acb0199782175051f59add6_icgraph" id="ammu_8h_ab00408fb7acb0199782175051f59add6_icgraph">
<area shape="rect" title=" " alt="" coords="1697,165,1867,192"/>
<area shape="rect" href="mmu_8c.html#a475bd00898314bb9378d8e4306aa7874" title=" " alt="" coords="1523,115,1649,141"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="707,165,845,192"/>
<area shape="rect" href="x86_8c.html#a334f9c72dae5c0a2867b04acbc2beb6e" title=" " alt="" coords="1126,238,1277,279"/>
<area shape="rect" href="mmu_8h.html#ab0e194ecad859add3d639850021f8b16" title=" " alt="" coords="1335,115,1475,141"/>
<area shape="rect" href="mmu_8c.html#a339656816251af93fbd52aece22a2009" title=" " alt="" coords="1116,49,1287,90"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="904,49,1065,90"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="455,56,630,83"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="247,5,328,32"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="233,56,342,83"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="232,165,343,192"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="502,107,583,133"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="194,107,381,133"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="11,107,135,133"/>
<area shape="rect" href="x86_8c.html#abf28742eaf88f469f322233afeb66b59" title=" " alt="" coords="901,318,1068,359"/>
<area shape="rect" href="x86_8c.html#a187212c772cf6e896de2a5304f88b9fb" title=" " alt="" coords="915,267,1054,293"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="699,363,853,389"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="213,325,361,352"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="481,392,604,419"/>
<area shape="rect" href="vmx_2nested_8c.html#a4e307e2bcf664c83265b1442e3fc8da2" title=" " alt="" coords="455,443,631,485"/>
<area shape="rect" href="vmx_2nested_8c.html#ad3cab9cf8633364513bd6a24caecf41a" title=" " alt="" coords="435,509,651,550"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="188,545,387,572"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fcc88ceee4f57a3dbf23fedb46a5cb" title=" " alt="" coords="467,326,618,367"/>
<area shape="rect" href="vmx_2nested_8c.html#aedc5821e9af5c7bd4aac6c06f4ca046f" title=" " alt="" coords="453,625,633,652"/>
<area shape="rect" href="vmx_2hyperv_8c.html#a937e30dece4579b71b17efcd54c1d910" title=" " alt="" coords="451,158,635,199"/>
<area shape="rect" href="vmx_2nested_8c.html#a64e6550fab681b40c832fe4e2d5e3b95" title=" " alt="" coords="470,224,615,251"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="5,325,140,352"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="202,382,373,423"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="9,389,136,416"/>
<area shape="rect" href="vmx_2nested_8c.html#a6a1c45a52fde9844f4431a9db00dbf9f" title=" " alt="" coords="206,447,369,489"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="7,455,138,481"/>
<area shape="rect" href="vmx_2nested_8c.html#a2c53f6d5cd8133df2c8e67ab90b9aa5f" title=" " alt="" coords="201,220,374,247"/>
<area shape="rect" href="vmx_2nested_8c.html#acee8cb651216e97a9c12b807243ae59a" title=" " alt="" coords="203,271,372,297"/>
<area shape="rect" href="vmx_8c.html#ac1cd58b9f223df9d6b5fe9695c0cbe2b" title=" " alt="" coords="11,220,134,247"/>
</map>
</div>

</div>
</div>
<a id="ad8f7c681ee8bd25bb3fcb5b3ff39f4e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8f7c681ee8bd25bb3fcb5b3ff39f4e8">&#9670;&nbsp;</a></span>kvm_mmu_track_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_mmu_track_write </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpa_t&#160;</td>
          <td class="paramname"><em>gpa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const u8 *&#160;</td>
          <td class="paramname"><em>new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l05781">5781</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;{</div>
<div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;    gfn_t gfn = gpa &gt;&gt; PAGE_SHIFT;</div>
<div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__mmu__page.html">kvm_mmu_page</a> *sp;</div>
<div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;    <a class="code" href="kvm__main_8c.html#aa8688eb80c9acaf8b0aa783b6ac68c16">LIST_HEAD</a>(invalid_list);</div>
<div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;    u64 entry, gentry, *spte;</div>
<div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;    <span class="keywordtype">int</span> npte;</div>
<div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;    <span class="keywordtype">bool</span> flush = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160; </div>
<div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;<span class="comment">     * If we don&#39;t have indirect shadow pages, it means no page is</span></div>
<div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;<span class="comment">     * write-protected, so we can exit simply.</span></div>
<div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;    <span class="keywordflow">if</span> (!READ_ONCE(vcpu-&gt;kvm-&gt;arch.indirect_shadow_pages))</div>
<div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160; </div>
<div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;    write_lock(&amp;vcpu-&gt;kvm-&gt;mmu_lock);</div>
<div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160; </div>
<div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;    gentry = <a class="code" href="mmu_8c.html#aa2a9dabc11840778afb395e0a8bddbf7">mmu_pte_write_fetch_gpte</a>(vcpu, &amp;gpa, &amp;bytes);</div>
<div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160; </div>
<div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;    ++vcpu-&gt;kvm-&gt;stat.mmu_pte_write;</div>
<div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160; </div>
<div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;    <a class="code" href="mmu_8c.html#a830e3afaef6cd373e4402e579d12cd3e">for_each_gfn_valid_sp_with_gptes</a>(vcpu-&gt;kvm, sp, <a class="code" href="structkvm__mmu__page.html#ad833bc48e1885408b2b5c7deca9a6232">gfn</a>) {</div>
<div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mmu_8c.html#a852069b00b71efdd1e6def36b2cc8080">detect_write_misaligned</a>(sp, gpa, bytes) ||</div>
<div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;              <a class="code" href="mmu_8c.html#a39f47096e8e473cb911a998ae97c76c8">detect_write_flooding</a>(sp)) {</div>
<div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;            <a class="code" href="mmu_8c.html#aa915f695d4c341eca7d1f5b5a0a26a03">kvm_mmu_prepare_zap_page</a>(vcpu-&gt;kvm, sp, &amp;invalid_list);</div>
<div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;            ++vcpu-&gt;kvm-&gt;stat.mmu_flooded;</div>
<div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;        }</div>
<div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160; </div>
<div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;        spte = <a class="code" href="mmu_8c.html#a9d43d29f2a9f7e9e148622b58d83acc5">get_written_sptes</a>(sp, gpa, &amp;npte);</div>
<div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;        <span class="keywordflow">if</span> (!spte)</div>
<div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160; </div>
<div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;        <span class="keywordflow">while</span> (npte--) {</div>
<div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;            entry = *spte;</div>
<div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;            <a class="code" href="mmu_8c.html#a5d549ae5b6c13e9b87ccc13127ddf86a">mmu_page_zap_pte</a>(vcpu-&gt;kvm, sp, spte, NULL);</div>
<div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;            <span class="keywordflow">if</span> (gentry &amp;&amp; sp-&gt;<a class="code" href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">role</a>.level != PG_LEVEL_4K)</div>
<div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;                ++vcpu-&gt;kvm-&gt;stat.mmu_pde_zapped;</div>
<div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686">is_shadow_present_pte</a>(entry))</div>
<div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;                flush = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;            ++spte;</div>
<div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160;        }</div>
<div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;    }</div>
<div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;    <a class="code" href="mmu_8c.html#a5ab4ca7bcca38cbb996aa2abec5bb5a1">kvm_mmu_remote_flush_or_zap</a>(vcpu-&gt;kvm, &amp;invalid_list, flush);</div>
<div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;    write_unlock(&amp;vcpu-&gt;kvm-&gt;mmu_lock);</div>
<div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_aa8688eb80c9acaf8b0aa783b6ac68c16"><div class="ttname"><a href="kvm__main_8c.html#aa8688eb80c9acaf8b0aa783b6ac68c16">LIST_HEAD</a></div><div class="ttdeci">LIST_HEAD(vm_list)</div></div>
<div class="ttc" id="ammu_8c_html_a39f47096e8e473cb911a998ae97c76c8"><div class="ttname"><a href="mmu_8c.html#a39f47096e8e473cb911a998ae97c76c8">detect_write_flooding</a></div><div class="ttdeci">static bool detect_write_flooding(struct kvm_mmu_page *sp)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l05712">mmu.c:5712</a></div></div>
<div class="ttc" id="ammu_8c_html_a5ab4ca7bcca38cbb996aa2abec5bb5a1"><div class="ttname"><a href="mmu_8c.html#a5ab4ca7bcca38cbb996aa2abec5bb5a1">kvm_mmu_remote_flush_or_zap</a></div><div class="ttdeci">static bool kvm_mmu_remote_flush_or_zap(struct kvm *kvm, struct list_head *invalid_list, bool remote_flush)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l01997">mmu.c:1997</a></div></div>
<div class="ttc" id="ammu_8c_html_a5d549ae5b6c13e9b87ccc13127ddf86a"><div class="ttname"><a href="mmu_8c.html#a5d549ae5b6c13e9b87ccc13127ddf86a">mmu_page_zap_pte</a></div><div class="ttdeci">static int mmu_page_zap_pte(struct kvm *kvm, struct kvm_mmu_page *sp, u64 *spte, struct list_head *invalid_list)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l02493">mmu.c:2493</a></div></div>
<div class="ttc" id="ammu_8c_html_a830e3afaef6cd373e4402e579d12cd3e"><div class="ttname"><a href="mmu_8c.html#a830e3afaef6cd373e4402e579d12cd3e">for_each_gfn_valid_sp_with_gptes</a></div><div class="ttdeci">#define for_each_gfn_valid_sp_with_gptes(_kvm, _sp, _gfn)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l01913">mmu.c:1913</a></div></div>
<div class="ttc" id="ammu_8c_html_a852069b00b71efdd1e6def36b2cc8080"><div class="ttname"><a href="mmu_8c.html#a852069b00b71efdd1e6def36b2cc8080">detect_write_misaligned</a></div><div class="ttdeci">static bool detect_write_misaligned(struct kvm_mmu_page *sp, gpa_t gpa, int bytes)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l05729">mmu.c:5729</a></div></div>
<div class="ttc" id="ammu_8c_html_a9d43d29f2a9f7e9e148622b58d83acc5"><div class="ttname"><a href="mmu_8c.html#a9d43d29f2a9f7e9e148622b58d83acc5">get_written_sptes</a></div><div class="ttdeci">static u64 * get_written_sptes(struct kvm_mmu_page *sp, gpa_t gpa, int *nspte)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l05750">mmu.c:5750</a></div></div>
<div class="ttc" id="ammu_8c_html_aa2a9dabc11840778afb395e0a8bddbf7"><div class="ttname"><a href="mmu_8c.html#aa2a9dabc11840778afb395e0a8bddbf7">mmu_pte_write_fetch_gpte</a></div><div class="ttdeci">static u64 mmu_pte_write_fetch_gpte(struct kvm_vcpu *vcpu, gpa_t *gpa, int *bytes)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l05682">mmu.c:5682</a></div></div>
<div class="ttc" id="ammu_8c_html_aa915f695d4c341eca7d1f5b5a0a26a03"><div class="ttname"><a href="mmu_8c.html#aa915f695d4c341eca7d1f5b5a0a26a03">kvm_mmu_prepare_zap_page</a></div><div class="ttdeci">static bool kvm_mmu_prepare_zap_page(struct kvm *kvm, struct kvm_mmu_page *sp, struct list_head *invalid_list)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l02634">mmu.c:2634</a></div></div>
<div class="ttc" id="aspte_8h_html_a7d73c1cb0114320b9dab8ba78033c686"><div class="ttname"><a href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686">is_shadow_present_pte</a></div><div class="ttdeci">static bool is_shadow_present_pte(u64 pte)</div><div class="ttdef"><b>Definition:</b> <a href="spte_8h_source.html#l00258">spte.h:258</a></div></div>
<div class="ttc" id="astructkvm__mmu__page_html_a9a054096d38bb2789139b0ef5aa8fec3"><div class="ttname"><a href="structkvm__mmu__page.html#a9a054096d38bb2789139b0ef5aa8fec3">kvm_mmu_page::role</a></div><div class="ttdeci">union kvm_mmu_page_role role</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00074">mmu_internal.h:80</a></div></div>
<div class="ttc" id="astructkvm__mmu__page_html_ad833bc48e1885408b2b5c7deca9a6232"><div class="ttname"><a href="structkvm__mmu__page.html#ad833bc48e1885408b2b5c7deca9a6232">kvm_mmu_page::gfn</a></div><div class="ttdeci">gfn_t gfn</div><div class="ttdef"><b>Definition:</b> <a href="mmu__internal_8h_source.html#l00081">mmu_internal.h:81</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_ad8f7c681ee8bd25bb3fcb5b3ff39f4e8_cgraph.png" border="0" usemap="#ammu_8h_ad8f7c681ee8bd25bb3fcb5b3ff39f4e8_cgraph" alt=""/></div>
<map name="ammu_8h_ad8f7c681ee8bd25bb3fcb5b3ff39f4e8_cgraph" id="ammu_8h_ad8f7c681ee8bd25bb3fcb5b3ff39f4e8_cgraph">
<area shape="rect" title=" " alt="" coords="5,237,177,264"/>
<area shape="rect" href="mmu_8c.html#a39f47096e8e473cb911a998ae97c76c8" title=" " alt="" coords="253,5,416,32"/>
<area shape="rect" href="mmu_8c.html#a852069b00b71efdd1e6def36b2cc8080" title=" " alt="" coords="243,56,426,83"/>
<area shape="rect" href="mmu_8c.html#a9d43d29f2a9f7e9e148622b58d83acc5" title=" " alt="" coords="265,107,404,133"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="1862,704,2037,731"/>
<area shape="rect" href="mmu_8c.html#aa915f695d4c341eca7d1f5b5a0a26a03" title=" " alt="" coords="225,577,444,604"/>
<area shape="rect" href="mmu_8c.html#a5d549ae5b6c13e9b87ccc13127ddf86a" title=" " alt="" coords="1080,813,1233,840"/>
<area shape="rect" href="mmu_8c.html#a5ab4ca7bcca38cbb996aa2abec5bb5a1" title=" " alt="" coords="243,230,427,271"/>
<area shape="rect" href="kvm__main_8c.html#aa8688eb80c9acaf8b0aa783b6ac68c16" title=" " alt="" coords="288,923,381,949"/>
<area shape="rect" href="mmu_8c.html#aa2a9dabc11840778afb395e0a8bddbf7" title=" " alt="" coords="235,973,435,1000"/>
<area shape="rect" href="mmu_8c.html#a01417b2ac70337a4419dc0f171bd548f" title=" " alt="" coords="492,552,724,579"/>
<area shape="rect" href="mmu_8c.html#a39242ba7b127ebf064de37a1224635cd" title=" " alt="" coords="823,349,942,376"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="1051,252,1262,279"/>
<area shape="rect" href="mmu_8c.html#abab2bb5454cc72ba2e4913a87e5800fe" title=" " alt="" coords="793,755,972,797"/>
<area shape="rect" href="mmu_8c.html#a9d4eccd9e1e1198a1e63d28b750efe83" title=" " alt="" coords="1059,653,1254,680"/>
<area shape="rect" href="mmu_8c.html#ac1f044f2e317d0cd567530208b7118ee" title=" " alt="" coords="780,400,985,427"/>
<area shape="rect" href="mmu_8c.html#a2a0cdee83771c8d171f5f809076773d2" title=" " alt="" coords="787,501,978,528"/>
<area shape="rect" href="mmu_8c.html#af8bc85c6e33cec42152e7982b1fb4cba" title=" " alt="" coords="783,704,982,731"/>
<area shape="rect" href="mmu_8c.html#a85d47efa797da896b3bb3cf1cc32d768" title=" " alt="" coords="827,552,938,579"/>
<area shape="rect" href="mmu_8c.html#a802c5b4f03cc2183d5a097abb661e90c" title=" " alt="" coords="787,451,978,477"/>
<area shape="rect" href="mmu_8c.html#ab0716e0d51f7a555f58f426cbfb6d890" title=" " alt="" coords="801,603,964,629"/>
<area shape="rect" href="tdp__mmu_8h.html#a166bc9e57a26e8a37e94e2314a72d226" title=" " alt="" coords="1086,349,1227,376"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="1320,245,1531,286"/>
<area shape="rect" href="mmu_8c.html#afa9309dada333ba442f20329ecd94033" title=" " alt="" coords="1361,653,1489,680"/>
<area shape="rect" href="mmu_8c.html#a85a8d231f0b692ff61afb66570575734" title=" " alt="" coords="1597,805,1790,832"/>
<area shape="rect" href="mmu_8c.html#a3ee167c290bf125621f455ec5af142a2" title=" " alt="" coords="1382,957,1469,984"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="1376,755,1475,781"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="1369,805,1482,832"/>
<area shape="rect" href="spte_8h.html#af8791b1ec453ef3bce3c87ea28744692" title=" " alt="" coords="1360,907,1491,933"/>
<area shape="rect" href="mmu_8c.html#ad24b0003d8c878d11a34d9501c248df2" title=" " alt="" coords="1579,653,1808,680"/>
<area shape="rect" href="mmu_8c.html#a29dd1887c83a0d49219b0fd5f28ce401" title=" " alt="" coords="1856,907,2043,933"/>
<area shape="rect" href="mmu_8c.html#a63ad2b3c2d88537186f5732c6d26793e" title=" " alt="" coords="1593,1008,1794,1035"/>
<area shape="rect" href="mmu_8c.html#a2bf303adabc499f269c4b034ae6af8d8" title=" " alt="" coords="1637,957,1750,984"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="1643,755,1744,781"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="1628,856,1759,883"/>
<area shape="rect" href="mmu_8c.html#ac65268f7bfa05d3c874b604bd3b792b5" title=" " alt="" coords="1635,603,1751,629"/>
<area shape="rect" href="mmu_8c.html#a71c1314be1e3b4e36ea7a12f3a66dc7a" title=" " alt="" coords="1051,400,1263,427"/>
<area shape="rect" href="mmu_8c.html#aab66bb43b12aa7a1506c323f3fda9893" title=" " alt="" coords="1058,704,1255,731"/>
<area shape="rect" href="mmu_8c.html#a708e13186273bcbb28bdabb02c5053dc" title=" " alt="" coords="1083,755,1230,781"/>
<area shape="rect" href="mmu_8c.html#a2fba0b2dd67723bfbc4349ea7c8e019a" title=" " alt="" coords="1079,451,1234,493"/>
<area shape="rect" href="page__track_8c.html#ac2932f8336fdd5b8071d5e360cddacd5" title=" " alt="" coords="1041,552,1272,579"/>
<area shape="rect" href="mmu_8c.html#a8726aec6b800501379c831dad5432043" title=" " alt="" coords="1323,552,1528,579"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="795,197,970,224"/>
<area shape="rect" href="mmu_8c.html#ab8e14476297a48107341bc44a29b6af9" title=" " alt="" coords="499,248,717,275"/>
<area shape="rect" href="mmu_8c.html#a584797a273970c4c5a807189bdc0004e" title=" " alt="" coords="772,248,993,275"/>
<area shape="rect" href="x86_8h.html#abc2ffd79aced13c24f0c4143465d3d51" title=" " alt="" coords="576,1029,640,1056"/>
<area shape="rect" href="kvm__main_8c.html#a840d38762a9b0e1a7cb3034781c3b470" title=" " alt="" coords="524,963,692,1005"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a2b779657b20f7afa44c0172b1478ac65" title=" " alt="" coords="809,1029,956,1056"/>
<area shape="rect" href="kvm__main_8c.html#ab5530927a1a3b082e3f1bfc31c9962c5" title=" " alt="" coords="785,924,981,951"/>
<area shape="rect" href="kvm__main_8c.html#ac4b56de4919be80c9cd4289f20437c64" title=" " alt="" coords="781,975,984,1001"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_ad8f7c681ee8bd25bb3fcb5b3ff39f4e8_icgraph.png" border="0" usemap="#ammu_8h_ad8f7c681ee8bd25bb3fcb5b3ff39f4e8_icgraph" alt=""/></div>
<map name="ammu_8h_ad8f7c681ee8bd25bb3fcb5b3ff39f4e8_icgraph" id="ammu_8h_ad8f7c681ee8bd25bb3fcb5b3ff39f4e8_icgraph">
<area shape="rect" title=" " alt="" coords="652,31,824,57"/>
<area shape="rect" href="page__track_8h.html#aaba1a34500917672160397ee8e7dada3" title=" " alt="" coords="433,31,604,57"/>
<area shape="rect" href="x86_8c.html#a170363aad395e949fddcfd1e6261ee5b" title=" " alt="" coords="169,5,385,32"/>
<area shape="rect" href="x86_8c.html#a2493c8d4e95868799c80e648db53dc99" title=" " alt="" coords="198,56,357,83"/>
<area shape="rect" href="x86_8c.html#a58b037be2e8408bc5a469c4eca5ba388" title=" " alt="" coords="5,56,121,83"/>
</map>
</div>

</div>
</div>
<a id="a7bf770a114656f992dd1c0aff57fe9e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bf770a114656f992dd1c0aff57fe9e5">&#9670;&nbsp;</a></span>kvm_mmu_unload()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_mmu_unload </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l05621">5621</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;{</div>
<div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;    <span class="keyword">struct </span>kvm *kvm = vcpu-&gt;kvm;</div>
<div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160; </div>
<div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;    <a class="code" href="mmu_8c.html#ab7d4e418cb85a72507e384df5027293e">kvm_mmu_free_roots</a>(kvm, &amp;vcpu-&gt;arch.root_mmu, KVM_MMU_ROOTS_ALL);</div>
<div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;    WARN_ON_ONCE(VALID_PAGE(vcpu-&gt;arch.root_mmu.root.hpa));</div>
<div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;    <a class="code" href="mmu_8c.html#ab7d4e418cb85a72507e384df5027293e">kvm_mmu_free_roots</a>(kvm, &amp;vcpu-&gt;arch.guest_mmu, KVM_MMU_ROOTS_ALL);</div>
<div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;    WARN_ON_ONCE(VALID_PAGE(vcpu-&gt;arch.guest_mmu.root.hpa));</div>
<div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;    <a class="code" href="x86_8h.html#a0647452067d01e527a8cd1da2fb6b897">vcpu_clear_mmio_info</a>(vcpu, <a class="code" href="x86_8h.html#ae8fc6afc14ddddfd3c359c6bd495b3ff">MMIO_GVA_ANY</a>);</div>
<div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a7bf770a114656f992dd1c0aff57fe9e5_cgraph.png" border="0" usemap="#ammu_8h_a7bf770a114656f992dd1c0aff57fe9e5_cgraph" alt=""/></div>
<map name="ammu_8h_a7bf770a114656f992dd1c0aff57fe9e5_cgraph" id="ammu_8h_a7bf770a114656f992dd1c0aff57fe9e5_cgraph">
<area shape="rect" title=" " alt="" coords="5,939,148,965"/>
<area shape="rect" href="mmu_8c.html#ab7d4e418cb85a72507e384df5027293e" title=" " alt="" coords="198,913,363,940"/>
<area shape="rect" href="x86_8h.html#a0647452067d01e527a8cd1da2fb6b897" title=" " alt="" coords="196,964,365,991"/>
<area shape="rect" href="mmu_8c.html#ab8e14476297a48107341bc44a29b6af9" title=" " alt="" coords="623,183,841,209"/>
<area shape="rect" href="mmu__internal_8h.html#a6491934fd3538f608b4b91245943b6fc" title=" " alt="" coords="905,983,1105,1009"/>
<area shape="rect" href="kvm__main_8c.html#aa8688eb80c9acaf8b0aa783b6ac68c16" title=" " alt="" coords="447,1015,541,1041"/>
<area shape="rect" href="mmu_8c.html#a5b648a843c7267d204fe81facbc9f84f" title=" " alt="" coords="413,844,575,871"/>
<area shape="rect" href="spte_8h.html#ab169c1872e98b9731a05121e0439f244" title=" " alt="" coords="687,913,777,940"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="918,128,1093,155"/>
<area shape="rect" href="mmu_8c.html#a584797a273970c4c5a807189bdc0004e" title=" " alt="" coords="895,183,1116,209"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="1169,124,1380,151"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="1438,74,1649,115"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="1726,107,1893,133"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="1715,56,1903,83"/>
<area shape="rect" href="kvm__main_8c.html#a7682302871243c20a5dd16214655db15" title=" " alt="" coords="2017,107,2096,133"/>
<area shape="rect" href="kvm__main_8c.html#a9316cc70360fb39d920d5c76a2e41f35" title=" " alt="" coords="1969,5,2145,32"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1980,56,2133,83"/>
<area shape="rect" href="mmu_8c.html#a61b041a986244b62aedac5b132cf2c09" title=" " alt="" coords="1185,175,1364,217"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="1969,343,2144,369"/>
<area shape="rect" href="mmu_8c.html#a69a9545d1380d3c51ec6fa0f9ff36555" title=" " alt="" coords="1450,140,1637,167"/>
<area shape="rect" href="tdp__mmu_8h.html#a166bc9e57a26e8a37e94e2314a72d226" title=" " alt="" coords="1473,764,1614,791"/>
<area shape="rect" href="mmu_8c.html#aa915f695d4c341eca7d1f5b5a0a26a03" title=" " alt="" coords="623,637,841,664"/>
<area shape="rect" href="tdp__mmu_8c.html#a8a9d637b546d8dfd125028f823a6eac0" title=" " alt="" coords="641,844,823,871"/>
<area shape="rect" href="mmu_8c.html#a01417b2ac70337a4419dc0f171bd548f" title=" " alt="" coords="889,460,1121,487"/>
<area shape="rect" href="mmu_8c.html#a39242ba7b127ebf064de37a1224635cd" title=" " alt="" coords="1215,713,1334,740"/>
<area shape="rect" href="mmu_8c.html#abab2bb5454cc72ba2e4913a87e5800fe" title=" " alt="" coords="1185,394,1364,435"/>
<area shape="rect" href="mmu_8c.html#a9d4eccd9e1e1198a1e63d28b750efe83" title=" " alt="" coords="1446,343,1641,369"/>
<area shape="rect" href="mmu_8c.html#ac1f044f2e317d0cd567530208b7118ee" title=" " alt="" coords="1172,343,1377,369"/>
<area shape="rect" href="mmu_8c.html#a2a0cdee83771c8d171f5f809076773d2" title=" " alt="" coords="1179,460,1370,487"/>
<area shape="rect" href="mmu_8c.html#af8bc85c6e33cec42152e7982b1fb4cba" title=" " alt="" coords="1175,663,1374,689"/>
<area shape="rect" href="mmu_8c.html#a85d47efa797da896b3bb3cf1cc32d768" title=" " alt="" coords="1219,511,1330,537"/>
<area shape="rect" href="mmu_8c.html#a802c5b4f03cc2183d5a097abb661e90c" title=" " alt="" coords="1179,561,1370,588"/>
<area shape="rect" href="mmu_8c.html#ab0716e0d51f7a555f58f426cbfb6d890" title=" " alt="" coords="1193,241,1356,268"/>
<area shape="rect" href="mmu_8c.html#a5d549ae5b6c13e9b87ccc13127ddf86a" title=" " alt="" coords="1467,575,1620,601"/>
<area shape="rect" href="mmu_8c.html#afa9309dada333ba442f20329ecd94033" title=" " alt="" coords="1745,393,1873,420"/>
<area shape="rect" href="mmu_8c.html#a85a8d231f0b692ff61afb66570575734" title=" " alt="" coords="1960,520,2153,547"/>
<area shape="rect" href="mmu_8c.html#a3ee167c290bf125621f455ec5af142a2" title=" " alt="" coords="1766,495,1853,521"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="1760,596,1859,623"/>
<area shape="rect" href="spte_8h.html#a2927d719923cb2ed2b5b83d739a275f7" title=" " alt="" coords="1753,545,1866,572"/>
<area shape="rect" href="spte_8h.html#af8791b1ec453ef3bce3c87ea28744692" title=" " alt="" coords="1744,815,1875,841"/>
<area shape="rect" href="spte_8h.html#a6e93c3ba68ed8b0ab050918d92cf4c6b" title=" " alt="" coords="1991,815,2122,841"/>
<area shape="rect" href="mmu_8c.html#ac65268f7bfa05d3c874b604bd3b792b5" title=" " alt="" coords="1751,343,1867,369"/>
<area shape="rect" href="mmu_8c.html#a71c1314be1e3b4e36ea7a12f3a66dc7a" title=" " alt="" coords="1437,393,1649,420"/>
<area shape="rect" href="mmu_8c.html#aab66bb43b12aa7a1506c323f3fda9893" title=" " alt="" coords="1445,684,1642,711"/>
<area shape="rect" href="mmu_8c.html#a708e13186273bcbb28bdabb02c5053dc" title=" " alt="" coords="1470,633,1617,660"/>
<area shape="rect" href="mmu_8c.html#a2fba0b2dd67723bfbc4349ea7c8e019a" title=" " alt="" coords="1466,509,1621,550"/>
<area shape="rect" href="page__track_8c.html#ac2932f8336fdd5b8071d5e360cddacd5" title=" " alt="" coords="1428,292,1659,319"/>
<area shape="rect" href="mmu_8c.html#a8726aec6b800501379c831dad5432043" title=" " alt="" coords="1707,267,1912,293"/>
<area shape="rect" href="tdp__mmu_8c.html#a92b80ecd9f7bf033d7ed2f28fb0a1279" title=" " alt="" coords="922,866,1089,907"/>
<area shape="rect" href="tdp__mmu_8c.html#afab0b8fc9210a8e1190a153f664ef78b" title=" " alt="" coords="1205,873,1344,900"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a7bf770a114656f992dd1c0aff57fe9e5_icgraph.png" border="0" usemap="#ammu_8h_a7bf770a114656f992dd1c0aff57fe9e5_icgraph" alt=""/></div>
<map name="ammu_8h_a7bf770a114656f992dd1c0aff57fe9e5_icgraph" id="ammu_8h_a7bf770a114656f992dd1c0aff57fe9e5_icgraph">
<area shape="rect" title=" " alt="" coords="1367,296,1509,323"/>
<area shape="rect" href="mmu_8c.html#a1b010cfd4a70f0e7ad2d50619562cd1c" title=" " alt="" coords="1151,132,1299,159"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="1131,459,1319,485"/>
<area shape="rect" href="x86_8c.html#afb193fb2b1c3f240d0ad5a5378afc118" title=" " alt="" coords="913,781,1053,808"/>
<area shape="rect" href="x86_8c.html#aa7dd06e7d0835e6cbf23134ad9fb19d8" title=" " alt="" coords="1134,56,1315,83"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="663,132,835,159"/>
<area shape="rect" href="x86_8c.html#a25d188e4f0871968b9f428c79720a502" title=" " alt="" coords="893,81,1073,108"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="413,92,613,119"/>
<area shape="rect" href="kvm__main_8c.html#a7218df747387e4034ab8442f187306b1" title=" " alt="" coords="676,31,821,57"/>
<area shape="rect" href="kvm__main_8c.html#a0fcd9f7671bee7debec1bc05dcd9557b" title=" " alt="" coords="437,31,589,57"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="185,5,356,32"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="699,183,798,209"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="930,509,1037,536"/>
<area shape="rect" href="smm_8c.html#ae1445727a8459a6cc7d2e49e5a63c0d5" title=" " alt="" coords="701,335,797,361"/>
<area shape="rect" href="mmu_8c.html#a3b03fb05a1055f336fa61182cf0c760b" title=" " alt="" coords="884,459,1083,485"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="913,731,1053,757"/>
<area shape="rect" href="smm_8c.html#a5382946234c910e05c6e2c09aff15713" title=" " alt="" coords="907,401,1060,428"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="919,280,1048,307"/>
<area shape="rect" href="vmx_2nested_8c.html#a001f930db9a867e828cf01b48d3e4e25" title=" " alt="" coords="906,561,1061,602"/>
<area shape="rect" href="x86_8c.html#a420caf80521ab8d6ef7218d5dd26d47f" title=" " alt="" coords="946,648,1021,675"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,95,350,137"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="469,276,556,303"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,223,129,249"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,277,364,304"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="433,393,592,420"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="427,327,598,369"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="202,332,339,359"/>
<area shape="rect" href="cpuid_8c.html#ae8f7489a3e05a9bcd5dfdae82c33d618" title=" " alt="" coords="672,451,825,493"/>
<area shape="rect" href="cpuid_8c.html#a0ff60eac33c1bf95a3889674e34251ad" title=" " alt="" coords="453,444,573,471"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="715,781,782,808"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="696,731,801,757"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="453,815,572,841"/>
<area shape="rect" href="smm_8c.html#a0943012ff008c7999f582998f0f9167a" title=" " alt="" coords="431,663,595,689"/>
<area shape="rect" href="x86_8c.html#a86812e4228865668099921709e1c2f26" title=" " alt="" coords="449,865,576,892"/>
<area shape="rect" href="vmx_8c.html#ac02e59b539f5874eaeb4b12568e9d0dd" title=" " alt="" coords="453,713,573,740"/>
<area shape="rect" href="x86_8c.html#abe99237e5fd6f33407bc30aa2647e0db" title=" " alt="" coords="466,764,559,791"/>
<area shape="rect" href="smm_8c.html#a0c50da2c4874eda6d67766974a476019" title=" " alt="" coords="412,916,613,943"/>
<area shape="rect" href="x86_8c.html#a39acca4a1624a86a5d8e547339729536" title=" " alt="" coords="696,853,801,880"/>
<area shape="rect" href="vmx_8c.html#a47ac25caf6fcd4e2519ed1cd5cee4aaf" title=" " alt="" coords="453,967,573,993"/>
<area shape="rect" href="x86_8c.html#ad6f80d324684bb9f6674522e5d84dccc" title=" " alt="" coords="671,386,826,427"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="419,225,606,252"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="663,284,834,311"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,161,350,202"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="223,227,318,253"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="671,568,826,595"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="439,561,587,588"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="451,612,574,639"/>
<area shape="rect" href="vmx_2nested_8c.html#a4e307e2bcf664c83265b1442e3fc8da2" title=" " alt="" coords="425,495,601,537"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="661,669,836,696"/>
<area shape="rect" href="x86_8c.html#a6710e6b26ce720cb1d40113afe17efa7" title=" " alt="" coords="889,5,1077,32"/>
</map>
</div>

</div>
</div>
<a id="a89c85e383e0f6dfe6f91f5c1dd25e522"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89c85e383e0f6dfe6f91f5c1dd25e522">&#9670;&nbsp;</a></span>kvm_shadow_root_allocated()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_shadow_root_allocated </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00262">262</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;{</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">     * Read shadow_root_allocated before related pointers. Hence, threads</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">     * reading shadow_root_allocated in any lock context are guaranteed to</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">     * see the pointers. Pairs with smp_store_release in</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">     * mmu_first_shadow_root_alloc.</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">return</span> smp_load_acquire(&amp;kvm-&gt;arch.shadow_root_allocated);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a89c85e383e0f6dfe6f91f5c1dd25e522_icgraph.png" border="0" usemap="#ammu_8h_a89c85e383e0f6dfe6f91f5c1dd25e522_icgraph" alt=""/></div>
<map name="ammu_8h_a89c85e383e0f6dfe6f91f5c1dd25e522_icgraph" id="ammu_8h_a89c85e383e0f6dfe6f91f5c1dd25e522_icgraph">
<area shape="rect" title=" " alt="" coords="1560,315,1768,341"/>
<area shape="rect" href="mmu_8h.html#ac9867cac2f7c0a763088b2112951b5ac" title=" " alt="" coords="1301,729,1512,756"/>
<area shape="rect" href="mmu_8c.html#adae854f3c74003a87a9c2a3ae8feada3" title=" " alt="" coords="1049,307,1227,349"/>
<area shape="rect" href="page__track_8c.html#acdd8bb0c7c8b588137d126d56d20d7fa" title=" " alt="" coords="1321,219,1492,261"/>
<area shape="rect" href="mmu_8c.html#a39977aaa99a2eb423e12429a5deb15dc" title=" " alt="" coords="1083,475,1193,501"/>
<area shape="rect" href="x86_8c.html#a1be4ac58e0429946d83b58f98bfe2301" title=" " alt="" coords="751,216,975,243"/>
<area shape="rect" href="mmu_8c.html#afeee4db4dd885d0e891ccb05f545c876" title=" " alt="" coords="1054,722,1222,763"/>
<area shape="rect" href="debugfs_8c.html#a036e43f2625e35a5d7d037b533b231be" title=" " alt="" coords="1031,788,1245,815"/>
<area shape="rect" href="mmu_8c.html#a1f49638b71a482e4b0c3a6af10d0711e" title=" " alt="" coords="1043,526,1233,567"/>
<area shape="rect" href="mmu_8c.html#acb92068f6e948846797ac6814b3618f1" title=" " alt="" coords="1041,1187,1235,1229"/>
<area shape="rect" href="mmu_8c.html#a168b7814e68a545abd8bf00fc4466610" title=" " alt="" coords="1048,991,1228,1033"/>
<area shape="rect" href="mmu_8c.html#a073d9b7de8eaf977452c1eb7395a78d6" title=" " alt="" coords="1047,1122,1229,1163"/>
<area shape="rect" href="mmu_8c.html#a6abdd1728810c3f3ab8c2e1e6d2d37f0" title=" " alt="" coords="1043,591,1233,633"/>
<area shape="rect" href="mmu_8c.html#ace4eaa769a0c9e1f75a3900a51275d18" title=" " alt="" coords="1045,657,1231,698"/>
<area shape="rect" href="mmu_8c.html#a35da5538a61de05522efdad8f615df4f" title=" " alt="" coords="1039,1057,1237,1098"/>
<area shape="rect" href="mmu_8c.html#aafdb4964a081741c295ad440ae9ff0f4" title=" " alt="" coords="1041,424,1235,451"/>
<area shape="rect" href="mmu_8c.html#a978186d69e4a1b753b9650294d80ca7d" title=" " alt="" coords="1067,839,1209,865"/>
<area shape="rect" href="mmu_8c.html#a7045f4df80d26474c5fe995d02eebc35" title=" " alt="" coords="1067,889,1209,916"/>
<area shape="rect" href="mmu_8c.html#aa37fc9ea36d6c97e97d77af76eca5767" title=" " alt="" coords="1051,940,1225,967"/>
<area shape="rect" href="x86_8c.html#a14568e065745512e03b3088070848289" title=" " alt="" coords="484,209,689,250"/>
<area shape="rect" href="kvm__main_8c.html#a6dd13a049fee9663450eebbf2ac16faa" title=" " alt="" coords="224,209,395,250"/>
<area shape="rect" href="kvm__main_8c.html#ac81a7d714d0668ccea6d0c2ddfd0fed5" title=" " alt="" coords="5,216,148,243"/>
<area shape="rect" href="mmu_8c.html#a035ec39ab60e2a3d382c272b15fc83a6" title=" " alt="" coords="773,657,952,698"/>
<area shape="rect" href="dirty__ring_8c.html#a68052369106191fbc506fdf4d64be449" title=" " alt="" coords="509,664,665,691"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="757,788,968,815"/>
<area shape="rect" href="page__track_8c.html#ab6a4ffea76ea12eb3b1e83eafaf4618b" title=" " alt="" coords="761,504,965,531"/>
<area shape="rect" href="mmu_8c.html#aec5cf4265713109c5e2ea673c610cd03" title=" " alt="" coords="513,559,660,585"/>
<area shape="rect" href="mmu_8c.html#a2e21344d37e1f1c8c347bed8627da8db" title=" " alt="" coords="757,605,968,632"/>
<area shape="rect" href="mmu_8c.html#a6f305a17525ee7345f0f852070869e4c" title=" " alt="" coords="196,559,423,585"/>
<area shape="rect" href="mmu_8c.html#a2f33377dcdaf5435e453ff75e02075dd" title=" " alt="" coords="511,609,663,636"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="779,1090,946,1131"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="484,1090,689,1131"/>
<area shape="rect" href="mmu_8c.html#a8b2588158566c9bb798cdb77760e6446" title=" " alt="" coords="786,424,939,451"/>
<area shape="rect" href="x86_8c.html#ac280f3f33408b1fead3c38127a2ab3e9" title=" " alt="" coords="511,427,662,469"/>
<area shape="rect" href="x86_8c.html#ab61af196de8a3705f59d9915b5eb1a0e" title=" " alt="" coords="488,493,685,534"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="517,325,657,352"/>
<area shape="rect" href="mtrr_8c.html#aca604775fbcfad49bfaf9441fc2253dc" title=" " alt="" coords="535,376,638,403"/>
<area shape="rect" href="mmu_8c.html#a1ede039d44aac6e8ff15be76c16411a1" title=" " alt="" coords="767,295,958,321"/>
<area shape="rect" href="mmu_8c.html#a475bd00898314bb9378d8e4306aa7874" title=" " alt="" coords="523,275,650,301"/>
<area shape="rect" href="mmu_8h.html#ab0e194ecad859add3d639850021f8b16" title=" " alt="" coords="239,275,379,301"/>
<area shape="rect" href="page__track_8c.html#ac2932f8336fdd5b8071d5e360cddacd5" title=" " alt="" coords="1023,41,1253,68"/>
<area shape="rect" href="page__track_8c.html#a73235ad2d0552c7e4b6b69d729fa79b1" title=" " alt="" coords="1042,125,1234,152"/>
<area shape="rect" href="page__track_8c.html#af422b4080af541b2b6b09f43eb9fe1c9" title=" " alt="" coords="1049,190,1227,231"/>
<area shape="rect" href="mmu_8c.html#ab0716e0d51f7a555f58f426cbfb6d890" title=" " alt="" coords="781,8,944,35"/>
<area shape="rect" href="mmu_8c.html#a01417b2ac70337a4419dc0f171bd548f" title=" " alt="" coords="471,5,703,32"/>
<area shape="rect" href="mmu_8c.html#af8846daf6e76a8d619fba16ff979245b" title=" " alt="" coords="763,61,963,88"/>
<area shape="rect" href="mmu_8c.html#a842bf3ec47076504467de1b25cfa572d" title=" " alt="" coords="772,118,953,159"/>
<area shape="rect" href="spte_8c.html#ab8dba69ef9f5267d41ba061dbe101ded" title=" " alt="" coords="540,56,633,83"/>
<area shape="rect" href="mmu_8c.html#aebe1e577e70e9f77f0bfea48bab7c83d" title=" " alt="" coords="519,107,654,133"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="541,157,632,184"/>
</map>
</div>

</div>
</div>
<a id="a937b5147c498fb7bdafb70240b735089"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a937b5147c498fb7bdafb70240b735089">&#9670;&nbsp;</a></span>kvm_translate_gpa()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static gpa_t kvm_translate_gpa </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_mmu *&#160;</td>
          <td class="paramname"><em>mmu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpa_t&#160;</td>
          <td class="paramname"><em>gpa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>access</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structx86__exception.html">x86_exception</a> *&#160;</td>
          <td class="paramname"><em>exception</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00313">313</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">if</span> (mmu != &amp;vcpu-&gt;arch.nested_mmu)</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">return</span> gpa;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mmu_8h.html#aa47e04c0739bc10134b493cc8bfb0dc6">translate_nested_gpa</a>(vcpu, gpa, access, exception);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;}</div>
<div class="ttc" id="ammu_8h_html_aa47e04c0739bc10134b493cc8bfb0dc6"><div class="ttname"><a href="mmu_8h.html#aa47e04c0739bc10134b493cc8bfb0dc6">translate_nested_gpa</a></div><div class="ttdeci">gpa_t translate_nested_gpa(struct kvm_vcpu *vcpu, gpa_t gpa, u64 access, struct x86_exception *exception)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l07468">x86.c:7468</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a937b5147c498fb7bdafb70240b735089_cgraph.png" border="0" usemap="#ammu_8h_a937b5147c498fb7bdafb70240b735089_cgraph" alt=""/></div>
<map name="ammu_8h_a937b5147c498fb7bdafb70240b735089_cgraph" id="ammu_8h_a937b5147c498fb7bdafb70240b735089_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,152,32"/>
<area shape="rect" href="mmu_8h.html#aa47e04c0739bc10134b493cc8bfb0dc6" title=" " alt="" coords="200,5,363,32"/>
<area shape="rect" href="x86_8h.html#a661bc84e256a87cbd929ffb7c1f61b2f" title=" " alt="" coords="411,5,536,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a937b5147c498fb7bdafb70240b735089_icgraph.png" border="0" usemap="#ammu_8h_a937b5147c498fb7bdafb70240b735089_icgraph" alt=""/></div>
<map name="ammu_8h_a937b5147c498fb7bdafb70240b735089_icgraph" id="ammu_8h_a937b5147c498fb7bdafb70240b735089_icgraph">
<area shape="rect" title=" " alt="" coords="1664,747,1811,773"/>
<area shape="rect" href="x86_8c.html#ae69bdd054a70a95d99b79bae770372cf" title=" " alt="" coords="1025,452,1124,479"/>
<area shape="rect" href="mmu_8c.html#a2484adc402a0dc25cf9978152a678b00" title=" " alt="" coords="1444,747,1616,773"/>
<area shape="rect" href="paging__tmpl_8h.html#acb3afde0f06bed4ef5ff00dd8ad8acf1" title=" " alt="" coords="1458,848,1602,875"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="747,325,910,352"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="776,376,881,403"/>
<area shape="rect" href="x86_8c.html#a75f57f1f4494df7f35fcdf0e0e582a31" title=" " alt="" coords="776,427,881,453"/>
<area shape="rect" href="x86_8c.html#a39acca4a1624a86a5d8e547339729536" title=" " alt="" coords="776,477,881,504"/>
<area shape="rect" href="vmx_2nested_8c.html#a562e6893d0703c98635cab943cc58fed" title=" " alt="" coords="729,583,928,609"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="747,721,910,748"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="747,772,911,799"/>
<area shape="rect" href="svm_8c.html#a6c03fa2ac66c8db77e6bdc408cf0b7bb" title=" " alt="" coords="767,208,890,235"/>
<area shape="rect" href="svm_2nested_8c.html#afd2919b9c5b5e158cb09deba98a74772" title=" " alt="" coords="744,259,913,301"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="531,115,630,141"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="527,35,634,61"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="245,107,404,149"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="281,56,368,83"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="245,5,404,32"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="521,477,640,504"/>
<area shape="rect" href="smm_8c.html#a0943012ff008c7999f582998f0f9167a" title=" " alt="" coords="5,427,169,453"/>
<area shape="rect" href="x86_8c.html#a86812e4228865668099921709e1c2f26" title=" " alt="" coords="517,376,644,403"/>
<area shape="rect" href="vmx_8c.html#ac02e59b539f5874eaeb4b12568e9d0dd" title=" " alt="" coords="521,275,641,301"/>
<area shape="rect" href="x86_8c.html#abe99237e5fd6f33407bc30aa2647e0db" title=" " alt="" coords="534,224,627,251"/>
<area shape="rect" href="smm_8c.html#a0c50da2c4874eda6d67766974a476019" title=" " alt="" coords="480,427,681,453"/>
<area shape="rect" href="svm_8c.html#af2ee2a03530f5b7a02a127d8b779d2ae" title=" " alt="" coords="241,477,408,504"/>
<area shape="rect" href="vmx_8c.html#aa55ace9429e6e94042e6602716222805" title=" " alt="" coords="282,300,367,327"/>
<area shape="rect" href="smm_8c.html#ae0136cd1aa193ad29565961ea839a99a" title=" " alt="" coords="252,427,397,453"/>
<area shape="rect" href="vmx_8c.html#a47ac25caf6fcd4e2519ed1cd5cee4aaf" title=" " alt="" coords="521,528,641,555"/>
<area shape="rect" href="vmx_2nested_8c.html#a41a0c6eb138f02ae4481ca5d21a09818" title=" " alt="" coords="495,630,666,671"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="491,696,670,723"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="503,747,658,773"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="497,797,665,824"/>
<area shape="rect" href="svm_2nested_8c.html#a4ec7e878f6af209e74dd84285ee0198f" title=" " alt="" coords="249,629,400,656"/>
<area shape="rect" href="svm_2nested_8c.html#a777240cb9ab00451d21a1b204e19c5a6" title=" " alt="" coords="229,915,421,941"/>
<area shape="rect" href="svm_2nested_8c.html#a03b4be7ca82710ecd17bc66f2a20cad8" title=" " alt="" coords="217,681,432,722"/>
<area shape="rect" href="svm_2nested_8c.html#a574acca11f4be4ea5df18f36307f9bf6" title=" " alt="" coords="223,747,427,773"/>
<area shape="rect" href="svm_8h.html#a7b2d87885eea1b11b1bf1045c21c5a8b" title=" " alt="" coords="222,797,427,824"/>
<area shape="rect" href="svm_2hyperv_8c.html#a33efa5fe6a664e9b2a70232b93485645" title=" " alt="" coords="233,849,416,890"/>
<area shape="rect" href="vmx_2nested_8c.html#a06a397c328d1656bb4d3ab073878e6f0" title=" " alt="" coords="489,932,672,959"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="515,848,646,875"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="247,965,402,992"/>
<area shape="rect" href="mmu_8c.html#a8a6a76a1ef24ce48ce2378ac59cf5b20" title=" " alt="" coords="1223,696,1394,723"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="1235,747,1383,773"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="1221,797,1396,824"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="1015,747,1135,773"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="743,823,915,849"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="976,797,1173,824"/>
<area shape="rect" href="paging__tmpl_8h.html#a8a3c848b1aae92ef2e683a41f82f314b" title=" " alt="" coords="1260,848,1357,875"/>
<area shape="rect" href="paging__tmpl_8h.html#a2fcd5acfc877b79f73d44835be14d862" title=" " alt="" coords="1264,899,1353,925"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1029,899,1120,925"/>
</map>
</div>

</div>
</div>
<a id="a9d589fd96a814e43fc146f83dc5d5f73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d589fd96a814e43fc146f83dc5d5f73">&#9670;&nbsp;</a></span>kvm_update_page_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_update_page_stats </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00305">305</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;{</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    atomic64_add(count, &amp;kvm-&gt;stat.pages[level - 1]);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a9d589fd96a814e43fc146f83dc5d5f73_icgraph.png" border="0" usemap="#ammu_8h_a9d589fd96a814e43fc146f83dc5d5f73_icgraph" alt=""/></div>
<map name="ammu_8h_a9d589fd96a814e43fc146f83dc5d5f73_icgraph" id="ammu_8h_a9d589fd96a814e43fc146f83dc5d5f73_icgraph">
<area shape="rect" title=" " alt="" coords="1779,503,1960,529"/>
<area shape="rect" href="mmu_8c.html#ab5f27c8f9a6f98a60c79163bf82f3c35" title=" " alt="" coords="1077,56,1179,83"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="1549,587,1711,613"/>
<area shape="rect" href="tdp__mmu_8c.html#acf7d062eca8e6190d76f4934c290be61" title=" " alt="" coords="488,837,685,864"/>
<area shape="rect" href="mmu_8c.html#a63ad2b3c2d88537186f5732c6d26793e" title=" " alt="" coords="1529,419,1731,445"/>
<area shape="rect" href="mmu_8c.html#a99dcfa860adefe29091d745ea78fc065" title=" " alt="" coords="812,56,899,83"/>
<area shape="rect" href="mmu_8c.html#abe6e7771da6f6df50052156316535466" title=" " alt="" coords="473,263,700,289"/>
<area shape="rect" href="mmu_8c.html#a8fc6edfe7bd2a5a7d47952232ea5b8a1" title=" " alt="" coords="527,81,646,108"/>
<area shape="rect" href="mmu_8c.html#a3722e33cca20a56503aa98b084383c47" title=" " alt="" coords="282,5,377,32"/>
<area shape="rect" href="mmu_8c.html#aab93e6e4502a54b3d61492f0e052e358" title=" " alt="" coords="233,56,425,83"/>
<area shape="rect" href="paging__tmpl_8h.html#ac7154588698b915e973bb8ca63e206e4" title=" " alt="" coords="302,107,357,133"/>
<area shape="rect" href="paging__tmpl_8h.html#ac251b8f404f8fa0840ec5f4db44a6480" title=" " alt="" coords="273,157,385,184"/>
<area shape="rect" href="mmu_8c.html#a03732600ed110f429f4a2d526a303bcb" title=" " alt="" coords="243,255,416,297"/>
<area shape="rect" href="mmu_8c.html#a2e109b8775cdfe9924c3d331ac5f332f" title=" " alt="" coords="9,255,182,297"/>
<area shape="rect" href="tdp__mmu_8c.html#ac509299bc28d3b827578915abdb2280e" title=" " alt="" coords="1312,587,1463,613"/>
<area shape="rect" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a" title=" " alt="" coords="1314,637,1461,664"/>
<area shape="rect" href="tdp__mmu_8c.html#a692eb9d20075258e5d4a0e4289a7c9b6" title=" " alt="" coords="1029,899,1227,925"/>
<area shape="rect" href="tdp__mmu_8c.html#a381e22ee819864cf1fd726479a76b6c7" title=" " alt="" coords="1042,579,1214,605"/>
<area shape="rect" href="tdp__mmu_8c.html#af6444812b70d9509539a3fa478cde14d" title=" " alt="" coords="1041,671,1215,697"/>
<area shape="rect" href="mmu_8c.html#a85202c8f53b11b1c80f9b6e26210aa9a" title=" " alt="" coords="771,529,940,570"/>
<area shape="rect" href="tdp__mmu_8c.html#af9c34fae0b7eac63cc78a01882498cfb" title=" " alt="" coords="775,747,936,773"/>
<area shape="rect" href="tdp__mmu_8c.html#a01bf8752c61ddeae2878ef46d312e00c" title=" " alt="" coords="803,595,908,621"/>
<area shape="rect" href="tdp__mmu_8c.html#a6588b054500f580603f94c0555fe3c06" title=" " alt="" coords="787,797,924,824"/>
<area shape="rect" href="tdp__mmu_8c.html#a182ff449fd87f9503148e88c33cff5ac" title=" " alt="" coords="779,645,932,672"/>
<area shape="rect" href="tdp__mmu_8c.html#aa07f9d272e2404a5b5392ae7aa175580" title=" " alt="" coords="787,696,923,723"/>
<area shape="rect" href="tdp__mmu_8c.html#a95955e5f31399228d6a722fba5a81477" title=" " alt="" coords="513,736,660,763"/>
<area shape="rect" href="tdp__mmu_8c.html#ad2479228afe629631e4f0331c440a4d6" title=" " alt="" coords="251,812,407,839"/>
<area shape="rect" href="tdp__mmu_8c.html#afa070d8c089f8547cfc2dbafa856e99c" title=" " alt="" coords="250,863,409,905"/>
<area shape="rect" href="tdp__mmu_8c.html#a57310f6ad7e70c13dadcfd30aa71af6d" title=" " alt="" coords="5,863,185,905"/>
<area shape="rect" href="tdp__mmu_8c.html#a9da9e7ba01717f85966fc080e86ecb84" title=" " alt="" coords="774,953,937,980"/>
<area shape="rect" href="tdp__mmu_8c.html#aa98226578ebe207e97e262a86bbd5427" title=" " alt="" coords="501,889,672,930"/>
<area shape="rect" href="tdp__mmu_8c.html#ab901a77cd00a4e809baa9a25e289b59d" title=" " alt="" coords="755,1008,956,1035"/>
<area shape="rect" href="tdp__mmu_8c.html#ae3e523e725021c7dd3f3796f4e074a37" title=" " alt="" coords="787,1067,923,1093"/>
<area shape="rect" href="tdp__mmu_8c.html#a670804848ccec53148d097c06b44657c" title=" " alt="" coords="473,955,700,981"/>
<area shape="rect" href="tdp__mmu_8c.html#ac72a38de4d0b8a5cfeace82f10cc4caf" title=" " alt="" coords="508,1006,665,1047"/>
<area shape="rect" href="tdp__mmu_8c.html#a7f6c658f3ddf3ffac5ce96335b78e295" title=" " alt="" coords="487,1072,687,1099"/>
<area shape="rect" href="mmu_8c.html#a3ee167c290bf125621f455ec5af142a2" title=" " alt="" coords="1344,284,1431,311"/>
<area shape="rect" href="mmu_8c.html#a896287d2c20890911385b8c4e905f803" title=" " alt="" coords="1055,444,1201,471"/>
<area shape="rect" href="mmu_8c.html#aee3bce967ca931b9d1b1766632f0561e" title=" " alt="" coords="1294,107,1481,133"/>
<area shape="rect" href="mmu_8c.html#a8ee87ecd6aa56f9798fd4dc3f4dfefe5" title=" " alt="" coords="1293,469,1481,496"/>
<area shape="rect" href="mmu_8c.html#a4634f2893dd92f1cca61da172add4618" title=" " alt="" coords="1065,309,1191,336"/>
<area shape="rect" href="mmu_8c.html#a5d549ae5b6c13e9b87ccc13127ddf86a" title=" " alt="" coords="1051,360,1205,387"/>
<area shape="rect" href="paging__tmpl_8h.html#aeeae3a937efef7a41df33c3ca002d32c" title=" " alt="" coords="1047,208,1209,235"/>
<area shape="rect" href="paging__tmpl_8h.html#a189517b8079c307a0aef9f58dc8c7a25" title=" " alt="" coords="812,259,899,285"/>
<area shape="rect" href="mmu_8c.html#a4a92071a0225bffad8c0336453d7433d" title=" " alt="" coords="777,309,933,336"/>
<area shape="rect" href="mmu_8c.html#a182d50b0d6d7be3301d249ba97a8152f" title=" " alt="" coords="748,360,963,387"/>
<area shape="rect" href="mmu_8c.html#abab2bb5454cc72ba2e4913a87e5800fe" title=" " alt="" coords="766,411,945,453"/>
<area shape="rect" href="mmu_8c.html#a978186d69e4a1b753b9650294d80ca7d" title=" " alt="" coords="785,477,926,504"/>
<area shape="rect" href="mmu_8c.html#a51e0b9f12c2d968627ad2c32cc8b2b12" title=" " alt="" coords="1060,107,1196,133"/>
<area shape="rect" href="mmu_8c.html#a9894c31f8b002070c4d2e81846bed206" title=" " alt="" coords="1011,495,1245,521"/>
</map>
</div>

</div>
</div>
<a id="a8b2588158566c9bb798cdb77760e6446"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b2588158566c9bb798cdb77760e6446">&#9670;&nbsp;</a></span>kvm_zap_gfn_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_zap_gfn_range </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfn_t&#160;</td>
          <td class="paramname"><em>gfn_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfn_t&#160;</td>
          <td class="paramname"><em>gfn_end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8c_source.html#l06373">6373</a> of file <a class="el" href="mmu_8c_source.html">mmu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l06374"></a><span class="lineno"> 6374</span>&#160;{</div>
<div class="line"><a name="l06375"></a><span class="lineno"> 6375</span>&#160;    <span class="keywordtype">bool</span> flush;</div>
<div class="line"><a name="l06376"></a><span class="lineno"> 6376</span>&#160; </div>
<div class="line"><a name="l06377"></a><span class="lineno"> 6377</span>&#160;    <span class="keywordflow">if</span> (WARN_ON_ONCE(gfn_end &lt;= gfn_start))</div>
<div class="line"><a name="l06378"></a><span class="lineno"> 6378</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06379"></a><span class="lineno"> 6379</span>&#160; </div>
<div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;    write_lock(&amp;kvm-&gt;mmu_lock);</div>
<div class="line"><a name="l06381"></a><span class="lineno"> 6381</span>&#160; </div>
<div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160;    kvm_mmu_invalidate_begin(kvm);</div>
<div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160; </div>
<div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160;    kvm_mmu_invalidate_range_add(kvm, gfn_start, gfn_end);</div>
<div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160; </div>
<div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160;    flush = <a class="code" href="mmu_8c.html#aafdb4964a081741c295ad440ae9ff0f4">kvm_rmap_zap_gfn_range</a>(kvm, gfn_start, gfn_end);</div>
<div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160; </div>
<div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mmu_8h.html#a1e6b88ba1c393126e54e78a220a4473f">tdp_mmu_enabled</a>)</div>
<div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160;        flush = <a class="code" href="tdp__mmu_8c.html#aa4fb1a66a2bc67f8699e8ddafdd4b1e8">kvm_tdp_mmu_zap_leafs</a>(kvm, gfn_start, gfn_end, flush);</div>
<div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160; </div>
<div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160;    <span class="keywordflow">if</span> (flush)</div>
<div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160;        <a class="code" href="kvm__main_8c.html#a523d3c698dd532d3fbc1bb046246ea5f">kvm_flush_remote_tlbs_range</a>(kvm, gfn_start, gfn_end - gfn_start);</div>
<div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160; </div>
<div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160;    kvm_mmu_invalidate_end(kvm);</div>
<div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160; </div>
<div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;    write_unlock(&amp;kvm-&gt;mmu_lock);</div>
<div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_a523d3c698dd532d3fbc1bb046246ea5f"><div class="ttname"><a href="kvm__main_8c.html#a523d3c698dd532d3fbc1bb046246ea5f">kvm_flush_remote_tlbs_range</a></div><div class="ttdeci">void kvm_flush_remote_tlbs_range(struct kvm *kvm, gfn_t gfn, u64 nr_pages)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l00367">kvm_main.c:367</a></div></div>
<div class="ttc" id="ammu_8c_html_aafdb4964a081741c295ad440ae9ff0f4"><div class="ttname"><a href="mmu_8c.html#aafdb4964a081741c295ad440ae9ff0f4">kvm_rmap_zap_gfn_range</a></div><div class="ttdeci">static bool kvm_rmap_zap_gfn_range(struct kvm *kvm, gfn_t gfn_start, gfn_t gfn_end)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l06338">mmu.c:6338</a></div></div>
<div class="ttc" id="atdp__mmu_8c_html_aa4fb1a66a2bc67f8699e8ddafdd4b1e8"><div class="ttname"><a href="tdp__mmu_8c.html#aa4fb1a66a2bc67f8699e8ddafdd4b1e8">kvm_tdp_mmu_zap_leafs</a></div><div class="ttdeci">bool kvm_tdp_mmu_zap_leafs(struct kvm *kvm, gfn_t start, gfn_t end, bool flush)</div><div class="ttdef"><b>Definition:</b> <a href="tdp__mmu_8c_source.html#l00820">tdp_mmu.c:820</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a8b2588158566c9bb798cdb77760e6446_cgraph.png" border="0" usemap="#ammu_8h_a8b2588158566c9bb798cdb77760e6446_cgraph" alt=""/></div>
<map name="ammu_8h_a8b2588158566c9bb798cdb77760e6446_cgraph" id="ammu_8h_a8b2588158566c9bb798cdb77760e6446_cgraph">
<area shape="rect" title=" " alt="" coords="5,411,159,437"/>
<area shape="rect" href="kvm__main_8c.html#a523d3c698dd532d3fbc1bb046246ea5f" title=" " alt="" coords="729,302,904,343"/>
<area shape="rect" href="mmu_8c.html#aafdb4964a081741c295ad440ae9ff0f4" title=" " alt="" coords="207,411,401,437"/>
<area shape="rect" href="tdp__mmu_8c.html#aa4fb1a66a2bc67f8699e8ddafdd4b1e8" title=" " alt="" coords="209,537,399,564"/>
<area shape="rect" href="kvm__main_8c.html#a54913b65d68c88909678d5cf9c983a6b" title=" " alt="" coords="979,309,1154,336"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="1208,183,1419,209"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="1469,45,1679,86"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="1755,5,1921,32"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="1744,56,1932,83"/>
<area shape="rect" href="kvm__main_8c.html#a7682302871243c20a5dd16214655db15" title=" " alt="" coords="2043,5,2122,32"/>
<area shape="rect" href="kvm__main_8c.html#a9316cc70360fb39d920d5c76a2e41f35" title=" " alt="" coords="1995,56,2171,83"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="2006,107,2159,133"/>
<area shape="rect" href="mmu_8c.html#a51e0b9f12c2d968627ad2c32cc8b2b12" title=" " alt="" coords="487,465,623,492"/>
<area shape="rect" href="mmu_8c.html#a0d6468f2fe0ff56e6a8465e1dbe759aa" title=" " alt="" coords="481,360,628,387"/>
<area shape="rect" href="mmu_8h.html#ac9867cac2f7c0a763088b2112951b5ac" title=" " alt="" coords="449,411,660,437"/>
<area shape="rect" href="mmu_8c.html#aee3bce967ca931b9d1b1766632f0561e" title=" " alt="" coords="973,415,1160,441"/>
<area shape="rect" href="mmu_8c.html#a790300e09cfcb98ec72f8c55822df153" title=" " alt="" coords="1223,364,1404,391"/>
<area shape="rect" href="mmu_8c.html#a63ad2b3c2d88537186f5732c6d26793e" title=" " alt="" coords="1213,415,1414,441"/>
<area shape="rect" href="mmu_8c.html#a29dd1887c83a0d49219b0fd5f28ce401" title=" " alt="" coords="1481,263,1667,289"/>
<area shape="rect" href="spte_8h.html#a7d73c1cb0114320b9dab8ba78033c686" title=" " alt="" coords="1995,541,2170,568"/>
<area shape="rect" href="spte_8h.html#a501c74fbb95a5dd015922c57a163ca13" title=" " alt="" coords="2033,183,2133,209"/>
<area shape="rect" href="mmu_8c.html#ab201fe546ae5c64aba03e7b56a97c47c" title=" " alt="" coords="1478,212,1670,239"/>
<area shape="rect" href="spte_8h.html#a16669248c64937ddec714d855609cacb" title=" " alt="" coords="1507,415,1641,441"/>
<area shape="rect" href="spte_8h.html#a0726c9cf54d23a373533a0833aaf979c" title=" " alt="" coords="1521,668,1627,695"/>
<area shape="rect" href="kvm__main_8c.html#a99f99281cc81d5cd69f5825ccb8793b4" title=" " alt="" coords="1467,161,1681,188"/>
<area shape="rect" href="kvm__main_8c.html#ad88d3f7ece0c0ad7dce0c296133beccb" title=" " alt="" coords="1487,465,1661,492"/>
<area shape="rect" href="kvm__main_8c.html#a3617d51882e6aba0abae53c0bf922873" title=" " alt="" coords="1503,516,1645,543"/>
<area shape="rect" href="mmu_8h.html#a9d589fd96a814e43fc146f83dc5d5f73" title=" " alt="" coords="1483,617,1665,644"/>
<area shape="rect" href="spte_8c.html#a11de60840b247621debae854aea928db" title=" " alt="" coords="1491,364,1657,391"/>
<area shape="rect" href="spte_8h.html#a88a720d39abac3aee2f63e03a20e8abd" title=" " alt="" coords="1525,567,1623,593"/>
<area shape="rect" href="mmu_8c.html#a524e5e4e93e5542da2fc8898e6b488ef" title=" " alt="" coords="1772,237,1904,264"/>
<area shape="rect" href="spte_8h.html#a30b8d20964e90337ab8eaeddca1ba192" title=" " alt="" coords="1759,415,1917,441"/>
<area shape="rect" href="spte_8h.html#a98cf368e8afe70efc381135f55a982c8" title=" " alt="" coords="1729,465,1947,492"/>
<area shape="rect" href="spte_8h.html#ad4cab344dce7557c80f815d4dc072deb" title=" " alt="" coords="1745,643,1931,669"/>
<area shape="rect" href="kvm__main_8c.html#a6c7165822622ebbd29159771905bd317" title=" " alt="" coords="1740,161,1936,188"/>
<area shape="rect" href="kvm__main_8c.html#a05228520c714138c61d76bfbc12c162c" title=" " alt="" coords="1746,516,1930,543"/>
<area shape="rect" href="kvm__main_8c.html#adb6ddc9dc8c5e447e04b1be97543f347" title=" " alt="" coords="1761,567,1915,593"/>
<area shape="rect" href="spte_8h.html#aeb796217990be75433fd1430d5958184" title=" " alt="" coords="1753,364,1923,391"/>
<area shape="rect" href="mmu_8h.html#a89c85e383e0f6dfe6f91f5c1dd25e522" title=" " alt="" coords="713,368,921,395"/>
<area shape="rect" href="tdp__mmu_8c.html#a182ff449fd87f9503148e88c33cff5ac" title=" " alt="" coords="478,693,631,720"/>
<area shape="rect" href="spte_8h.html#a785ce7507ac8cabfb2a667ed0c57b1f5" title=" " alt="" coords="1525,769,1623,796"/>
<area shape="rect" href="tdp__mmu_8c.html#abc2d73db35961f670cedf8ce1206c4d2" title=" " alt="" coords="712,419,921,445"/>
<area shape="rect" href="tdp__mmu_8c.html#af6444812b70d9509539a3fa478cde14d" title=" " alt="" coords="729,769,904,796"/>
<area shape="rect" href="tdp__mmu_8c.html#ac323268ae26fde5a608d694f4943d476" title=" " alt="" coords="708,719,925,745"/>
<area shape="rect" href="spte_8h.html#ae9b1a94fccf74f0837e1a775bc57d729" title=" " alt="" coords="1787,769,1889,796"/>
<area shape="rect" href="tdp__mmu_8c.html#a1880e056251c1743579f5c7a25ccad1a" title=" " alt="" coords="993,769,1140,796"/>
<area shape="rect" href="tdp__mmu_8c.html#a95692dd1daa13effa90e042a8a7057af" title=" " alt="" coords="1232,617,1395,644"/>
<area shape="rect" href="spte_8h.html#ad52bae526742289dbd54348dfa55310b" title=" " alt="" coords="1507,820,1641,847"/>
<area shape="rect" href="tdp__iter_8h.html#a74cc1f032b50c7c6c64ded8866deb4a4" title=" " alt="" coords="1216,820,1411,847"/>
<area shape="rect" href="mmu_8h.html#a6555cf2d510d04ae19bee154d166f778" title=" " alt="" coords="989,719,1145,745"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a8b2588158566c9bb798cdb77760e6446_icgraph.png" border="0" usemap="#ammu_8h_a8b2588158566c9bb798cdb77760e6446_icgraph" alt=""/></div>
<map name="ammu_8h_a8b2588158566c9bb798cdb77760e6446_icgraph" id="ammu_8h_a8b2588158566c9bb798cdb77760e6446_icgraph">
<area shape="rect" title=" " alt="" coords="1875,278,2028,305"/>
<area shape="rect" href="x86_8c.html#ac280f3f33408b1fead3c38127a2ab3e9" title=" " alt="" coords="1653,100,1803,141"/>
<area shape="rect" href="x86_8c.html#ab61af196de8a3705f59d9915b5eb1a0e" title=" " alt="" coords="1629,243,1827,284"/>
<area shape="rect" href="x86_8c.html#a3df01e8bd995bb72420812ea1d39df4b" title=" " alt="" coords="1658,313,1798,339"/>
<area shape="rect" href="mtrr_8c.html#aca604775fbcfad49bfaf9441fc2253dc" title=" " alt="" coords="1677,465,1779,491"/>
<area shape="rect" href="x86_8c.html#ae1ffb1252c0aa966c6d94279766427ca" title=" " alt="" coords="1353,5,1543,47"/>
<area shape="rect" href="x86_8c.html#a613f1a822aa2ffa29a32341ec8a92913" title=" " alt="" coords="1359,71,1537,112"/>
<area shape="rect" href="hyperv_8c.html#a9eaaad1dfbff166c751e725c9fcf73b6" title=" " alt="" coords="1370,137,1526,163"/>
<area shape="rect" href="x86_8c.html#ae3d9929c9a77fa2c710befa0a784d4c6" title=" " alt="" coords="1083,5,1242,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="865,13,989,39"/>
<area shape="rect" href="hyperv_8c.html#addb1696255847fad41e6cbadd2e31f57" title=" " alt="" coords="1105,103,1220,130"/>
<area shape="rect" href="hyperv_8c.html#a98568f4f9b61af590e833d5f4a127c68" title=" " alt="" coords="870,67,985,94"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="647,74,781,101"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,99,584,126"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,339,339,366"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,289,101,315"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,339,115,366"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,390,116,417"/>
<area shape="rect" href="x86_8c.html#a541cd35068f221456141f8798a1ab7c9" title=" " alt="" coords="1315,191,1581,218"/>
<area shape="rect" href="x86_8c.html#aab788793558a6c5c0cdc2e3ec840ebf6" title=" " alt="" coords="1369,243,1527,284"/>
<area shape="rect" href="vfio_8c.html#a0f8a9bc6a328c121266b7bedf8ccbe28" title=" " alt="" coords="1059,191,1267,218"/>
<area shape="rect" href="vfio_8c.html#a72ebd436cdee24ef38504201f2d8552c" title=" " alt="" coords="857,118,997,145"/>
<area shape="rect" href="vfio_8c.html#a69f95fca834d8d52cbb826dec545bbb9" title=" " alt="" coords="859,169,995,195"/>
<area shape="rect" href="vfio_8c.html#a0f0458c9f09300055baa0c892a2fbc29" title=" " alt="" coords="859,219,996,246"/>
<area shape="rect" href="vfio_8c.html#a8ad4a98a112c210e854931feaef8bd63" title=" " alt="" coords="646,162,782,189"/>
<area shape="rect" href="vfio_8c.html#a6e1f4ba2cd918c03e22262aa0019af12" title=" " alt="" coords="416,162,555,189"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="1415,313,1481,339"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="1395,371,1501,398"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="1103,270,1222,297"/>
<area shape="rect" href="smm_8c.html#a0943012ff008c7999f582998f0f9167a" title=" " alt="" coords="632,434,796,461"/>
<area shape="rect" href="x86_8c.html#a86812e4228865668099921709e1c2f26" title=" " alt="" coords="1099,371,1226,398"/>
<area shape="rect" href="vmx_8c.html#ac02e59b539f5874eaeb4b12568e9d0dd" title=" " alt="" coords="1103,422,1223,449"/>
<area shape="rect" href="x86_8c.html#abe99237e5fd6f33407bc30aa2647e0db" title=" " alt="" coords="1116,473,1209,499"/>
<area shape="rect" href="smm_8c.html#a0c50da2c4874eda6d67766974a476019" title=" " alt="" coords="1062,523,1263,550"/>
<area shape="rect" href="svm_8c.html#af2ee2a03530f5b7a02a127d8b779d2ae" title=" " alt="" coords="844,270,1011,297"/>
<area shape="rect" href="vmx_8c.html#aa55ace9429e6e94042e6602716222805" title=" " alt="" coords="885,434,970,461"/>
<area shape="rect" href="smm_8c.html#ae0136cd1aa193ad29565961ea839a99a" title=" " alt="" coords="855,510,1000,537"/>
<area shape="rect" href="mtrr_8c.html#a2b95f238c68e317e64e57d06f2a698dd" title=" " alt="" coords="413,390,558,417"/>
</map>
</div>

</div>
</div>
<a id="ad96f3e909292ae5f41a4ad1f07c98360"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad96f3e909292ae5f41a4ad1f07c98360">&#9670;&nbsp;</a></span>permission_fault()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u8 permission_fault </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_mmu *&#160;</td>
          <td class="paramname"><em>mmu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>pte_access</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>pte_pkey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>access</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00194">194</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;{</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="comment">/* strip nested paging fault error codes */</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pfec = access;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> rflags = static_call(kvm_x86_get_rflags)(vcpu);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">     * For explicit supervisor accesses, SMAP is disabled if EFLAGS.AC = 1.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">     * For implicit supervisor accesses, SMAP cannot be overridden.</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">     * SMAP works on supervisor accesses only, and not_smap can</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">     * be set or not set when user access with neither has any bearing</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">     * on the result.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">     * We put the SMAP checking bit in place of the PFERR_RSVD_MASK bit;</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">     * this bit will always be zero in pfec, but it will be one in index</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">     * if SMAP checks are being disabled.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    u64 implicit_access = access &amp; PFERR_IMPLICIT_ACCESS;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordtype">bool</span> not_smap = ((rflags &amp; X86_EFLAGS_AC) | implicit_access) == X86_EFLAGS_AC;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordtype">int</span> index = (pfec + (not_smap &lt;&lt; PFERR_RSVD_BIT)) &gt;&gt; 1;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    u32 errcode = PFERR_PRESENT_MASK;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordtype">bool</span> fault;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="mmu_8h.html#ae0bba48799c436cc6749fdaa0d95201b">kvm_mmu_refresh_passthrough_bits</a>(vcpu, mmu);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    fault = (mmu-&gt;permissions[index] &gt;&gt; pte_access) &amp; 1;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    WARN_ON(pfec &amp; (PFERR_PK_MASK | PFERR_RSVD_MASK));</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">if</span> (unlikely(mmu-&gt;pkru_mask)) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        u32 pkru_bits, offset;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">        * PKRU defines 32 bits, there are 16 domains and 2</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">        * attribute bits per domain in pkru.  pte_pkey is the</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">        * index of the protection domain, so pte_pkey * 2 is</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">        * is the index of the first bit for the domain.</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">        */</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        pkru_bits = (vcpu-&gt;arch.pkru &gt;&gt; (pte_pkey * 2)) &amp; 3;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="comment">/* clear present bit, replace PFEC.RSVD with ACC_USER_MASK. */</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        offset = (pfec &amp; ~1) +</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            ((pte_access &amp; <a class="code" href="mmu_8h.html#aefe2df12a6601495d0fcf57568247dd2">PT_USER_MASK</a>) &lt;&lt; (PFERR_RSVD_BIT - <a class="code" href="mmu_8h.html#aa6936959dfa60a9a0c17f9f38a6a7a37">PT_USER_SHIFT</a>));</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        pkru_bits &amp;= mmu-&gt;pkru_mask &gt;&gt; offset;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        errcode |= -pkru_bits &amp; PFERR_PK_MASK;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        fault |= (pkru_bits != 0);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">return</span> -(u32)fault &amp; errcode;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;}</div>
<div class="ttc" id="ammu_8h_html_aa6936959dfa60a9a0c17f9f38a6a7a37"><div class="ttname"><a href="mmu_8h.html#aa6936959dfa60a9a0c17f9f38a6a7a37">PT_USER_SHIFT</a></div><div class="ttdeci">#define PT_USER_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00012">mmu.h:12</a></div></div>
<div class="ttc" id="ammu_8h_html_ae0bba48799c436cc6749fdaa0d95201b"><div class="ttname"><a href="mmu_8h.html#ae0bba48799c436cc6749fdaa0d95201b">kvm_mmu_refresh_passthrough_bits</a></div><div class="ttdeci">static void kvm_mmu_refresh_passthrough_bits(struct kvm_vcpu *vcpu, struct kvm_mmu *mmu)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00168">mmu.h:168</a></div></div>
<div class="ttc" id="ammu_8h_html_aefe2df12a6601495d0fcf57568247dd2"><div class="ttname"><a href="mmu_8h.html#aefe2df12a6601495d0fcf57568247dd2">PT_USER_MASK</a></div><div class="ttdeci">#define PT_USER_MASK</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8h_source.html#l00016">mmu.h:16</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_ad96f3e909292ae5f41a4ad1f07c98360_cgraph.png" border="0" usemap="#ammu_8h_ad96f3e909292ae5f41a4ad1f07c98360_cgraph" alt=""/></div>
<map name="ammu_8h_ad96f3e909292ae5f41a4ad1f07c98360_cgraph" id="ammu_8h_ad96f3e909292ae5f41a4ad1f07c98360_cgraph">
<area shape="rect" title=" " alt="" coords="5,77,136,104"/>
<area shape="rect" href="mmu_8h.html#ae0bba48799c436cc6749fdaa0d95201b" title=" " alt="" coords="184,77,447,104"/>
<area shape="rect" href="mmu_8h.html#abba0adca082144a9c30aaceebfa82685" title=" " alt="" coords="495,77,772,104"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a16b29ca8796e3da212a8faf1b2dc7ff3" title=" " alt="" coords="821,27,968,53"/>
<area shape="rect" href="mmu_8c.html#ac7b31af26c029f185ab41ed060228847" title=" " alt="" coords="820,99,969,141"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a5fbb40e1f7661ccfd5accdaef3d8c378" title=" " alt="" coords="1052,5,1197,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="1280,5,1473,32"/>
<area shape="rect" href="mmu_8c.html#acf22177805abdc960c48327675111025" title=" " alt="" coords="1083,56,1166,83"/>
<area shape="rect" href="mmu_8c.html#a7c03a09eaa19dd03710b5221a58f49db" title=" " alt="" coords="1017,107,1232,133"/>
<area shape="rect" href="mmu_8c.html#a2e6bb9bbf6a14b07e8c12c8926547c04" title=" " alt="" coords="1021,157,1228,184"/>
<area shape="rect" href="mmu_8c.html#aa8502cc81aa39d5c4631d6208ce15732" title=" " alt="" coords="1043,208,1206,235"/>
<area shape="rect" href="mmu_8c.html#aca62a749439306019073c5d5e04fe3e9" title=" " alt="" coords="1284,56,1469,83"/>
<area shape="rect" href="cpuid_8h.html#acf67f5848a2ddd59dc852e37bc330390" title=" " alt="" coords="1317,107,1436,133"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1299,158,1454,199"/>
<area shape="rect" href="mmu_8c.html#a2096473262912949e7dfdbe6f7b7457f" title=" " alt="" coords="1555,5,1678,32"/>
<area shape="rect" href="mmu_8h.html#a20a41b0166b13eb22b15786964f5de9d" title=" " alt="" coords="1576,56,1657,83"/>
<area shape="rect" href="cpuid_8h.html#a786eea4c1fa59be0155455a72125e0ff" title=" " alt="" coords="1760,125,1933,166"/>
<area shape="rect" href="cpuid_8h.html#a72da5444b01d72d935ebc411b99ba166" title=" " alt="" coords="1521,157,1712,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_ad96f3e909292ae5f41a4ad1f07c98360_icgraph.png" border="0" usemap="#ammu_8h_ad96f3e909292ae5f41a4ad1f07c98360_icgraph" alt=""/></div>
<map name="ammu_8h_ad96f3e909292ae5f41a4ad1f07c98360_icgraph" id="ammu_8h_ad96f3e909292ae5f41a4ad1f07c98360_icgraph">
<area shape="rect" title=" " alt="" coords="1147,64,1277,91"/>
<area shape="rect" href="x86_8c.html#a959081b7be4bb67205656d8a1999ddb6" title=" " alt="" coords="919,35,1099,61"/>
<area shape="rect" href="paging__tmpl_8h.html#acb3afde0f06bed4ef5ff00dd8ad8acf1" title=" " alt="" coords="937,89,1081,116"/>
<area shape="rect" href="x86_8c.html#a58700b05b0607c5ff3b515fcb7ed88fa" title=" " alt="" coords="713,23,871,65"/>
<area shape="rect" href="x86_8c.html#a5d51faff82117d36af71fdf38de541f4" title=" " alt="" coords="508,31,665,57"/>
<area shape="rect" href="x86_8c.html#a691d7742446f463af56ba50d3ea90cef" title=" " alt="" coords="271,5,458,32"/>
<area shape="rect" href="x86_8c.html#a7c995e0c9c9dac795da0af090a8e1b91" title=" " alt="" coords="269,56,460,83"/>
<area shape="rect" href="x86_8c.html#a170363aad395e949fddcfd1e6261ee5b" title=" " alt="" coords="5,31,221,57"/>
<area shape="rect" href="x86_8c.html#a5920b07bff7e351a14e1c79f81a8b2d3" title=" " alt="" coords="28,81,199,108"/>
<area shape="rect" href="paging__tmpl_8h.html#a8a3c848b1aae92ef2e683a41f82f314b" title=" " alt="" coords="743,89,841,116"/>
<area shape="rect" href="paging__tmpl_8h.html#a2fcd5acfc877b79f73d44835be14d862" title=" " alt="" coords="747,140,837,167"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="541,140,632,167"/>
</map>
</div>

</div>
</div>
<a id="a20a41b0166b13eb22b15786964f5de9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20a41b0166b13eb22b15786964f5de9d">&#9670;&nbsp;</a></span>rsvd_bits()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static __always_inline u64 rsvd_bits </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mmu_8h_source.html#l00045">45</a> of file <a class="el" href="mmu_8h_source.html">mmu.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    BUILD_BUG_ON(__builtin_constant_p(e) &amp;&amp; __builtin_constant_p(s) &amp;&amp; e &lt; s);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">if</span> (__builtin_constant_p(e))</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        BUILD_BUG_ON(e &gt; 63);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        e &amp;= 63;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">if</span> (e &lt; s)</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">return</span> ((2ULL &lt;&lt; (e - s)) - 1) &lt;&lt; s;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_a20a41b0166b13eb22b15786964f5de9d_icgraph.png" border="0" usemap="#ammu_8h_a20a41b0166b13eb22b15786964f5de9d_icgraph" alt=""/></div>
<map name="ammu_8h_a20a41b0166b13eb22b15786964f5de9d_icgraph" id="ammu_8h_a20a41b0166b13eb22b15786964f5de9d_icgraph">
<area shape="rect" title=" " alt="" coords="1856,554,1937,581"/>
<area shape="rect" href="mmu_8c.html#aca62a749439306019073c5d5e04fe3e9" title=" " alt="" coords="1615,413,1801,439"/>
<area shape="rect" href="mmu_8c.html#a933710db54d61c7ed41888c23c37f37d" title=" " alt="" coords="1637,576,1779,617"/>
<area shape="rect" href="spte_8c.html#ad87f402ab1a9a0340b4e280deb05dd7c" title=" " alt="" coords="1617,645,1799,687"/>
<area shape="rect" href="cpuid_8c.html#a8bf272b370f8a27bb68bf5bf9e5ae7d5" title=" " alt="" coords="800,165,984,207"/>
<area shape="rect" href="x86_8c.html#aee0eed4ae7aae6d67d9db92d30f029d8" title=" " alt="" coords="1120,531,1243,558"/>
<area shape="rect" href="mmu_8c.html#a2621cfd78deaa642ed4b0ef5ada8a71f" title=" " alt="" coords="1637,470,1779,497"/>
<area shape="rect" href="svm_8c.html#ae9ce56e3c8875ba1d607bb1be8ed420f" title=" " alt="" coords="1615,721,1801,747"/>
<area shape="rect" href="vmx_8c.html#a3e17271461560cfca4cc0f4deccd430f" title=" " alt="" coords="1608,789,1808,815"/>
<area shape="rect" href="mmu_8c.html#a7c03a09eaa19dd03710b5221a58f49db" title=" " alt="" coords="1339,407,1553,434"/>
<area shape="rect" href="mmu_8c.html#af9097af8c7f507ad527d445389b1b0b5" title=" " alt="" coords="1335,357,1557,383"/>
<area shape="rect" href="mmu_8c.html#aa07388cb60927549be1da4ea8e2bea60" title=" " alt="" coords="1359,459,1533,500"/>
<area shape="rect" href="mmu_8c.html#ac7b31af26c029f185ab41ed060228847" title=" " alt="" coords="1107,400,1256,441"/>
<area shape="rect" href="mmu_8c.html#abba0adca082144a9c30aaceebfa82685" title=" " alt="" coords="753,375,1031,402"/>
<area shape="rect" href="mmu_8c.html#a8a6a76a1ef24ce48ce2378ac59cf5b20" title=" " alt="" coords="807,426,977,453"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="818,477,966,503"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="793,325,991,351"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="543,426,663,453"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="267,274,439,301"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="271,375,434,402"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="271,426,435,453"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="5,274,205,301"/>
<area shape="rect" href="mmu_8c.html#a3e794d802eeb843cd6d7b699b74d8bf3" title=" " alt="" coords="514,325,691,351"/>
<area shape="rect" href="mmu_8c.html#a00f26353045c597f6a49cdd4f239f548" title=" " alt="" coords="500,375,705,402"/>
<area shape="rect" href="mmu_8c.html#a0f431aaee6add30304bcf5cb5fa1465d" title=" " alt="" coords="1359,576,1533,617"/>
<area shape="rect" href="mmu_8c.html#a7072fc14301de7b9f8769ca84d669cf2" title=" " alt="" coords="1347,642,1545,669"/>
<area shape="rect" href="mmu_8c.html#abdc5c43e54aca7335b2a438095cb98bf" title=" " alt="" coords="1079,615,1284,642"/>
<area shape="rect" href="vmx_2nested_8c.html#a0b3f5e5d7c26f6301089970b32f1d771" title=" " alt="" coords="810,615,974,642"/>
<area shape="rect" href="mmu_8c.html#ac1e20896385a0e158bf217a24a6d6234" title=" " alt="" coords="1332,693,1560,719"/>
<area shape="rect" href="x86_8c.html#a0ad8fc4784d6d316f3d9f5afe640af81" title=" " alt="" coords="1093,693,1269,719"/>
<area shape="rect" href="x86_8c.html#ae295ff45fc91a432658e57dda4dfea68" title=" " alt="" coords="811,693,973,719"/>
<area shape="rect" href="mtrr_8c.html#a81a164c2615ef1c0fc231d71e5ba9a53" title=" " alt="" coords="529,71,676,98"/>
<area shape="rect" href="mtrr_8c.html#a1775807b30fdd1d17a4fb9f1f82a6aab" title=" " alt="" coords="540,122,665,149"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="527,223,678,250"/>
<area shape="rect" href="cpuid_8c.html#ae8f7489a3e05a9bcd5dfdae82c33d618" title=" " alt="" coords="526,5,679,47"/>
<area shape="rect" href="mtrr_8c.html#ae76247135f576f78a7740ff82f92b10c" title=" " alt="" coords="534,173,671,199"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="265,71,440,98"/>
<area shape="rect" href="mtrr_8c.html#a2b95f238c68e317e64e57d06f2a698dd" title=" " alt="" coords="280,173,425,199"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="18,223,193,250"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="271,325,434,351"/>
<area shape="rect" href="cpuid_8c.html#a0ff60eac33c1bf95a3889674e34251ad" title=" " alt="" coords="293,13,413,39"/>
<area shape="rect" href="x86_8c.html#ae69bdd054a70a95d99b79bae770372cf" title=" " alt="" coords="553,539,652,566"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="300,543,405,570"/>
<area shape="rect" href="x86_8c.html#a75f57f1f4494df7f35fcdf0e0e582a31" title=" " alt="" coords="300,594,405,621"/>
<area shape="rect" href="x86_8c.html#a39acca4a1624a86a5d8e547339729536" title=" " alt="" coords="300,645,405,671"/>
<area shape="rect" href="vmx_2nested_8c.html#a562e6893d0703c98635cab943cc58fed" title=" " alt="" coords="253,695,452,722"/>
<area shape="rect" href="svm_8c.html#a6c03fa2ac66c8db77e6bdc408cf0b7bb" title=" " alt="" coords="291,746,414,773"/>
<area shape="rect" href="svm_2nested_8c.html#afd2919b9c5b5e158cb09deba98a74772" title=" " alt="" coords="268,477,437,519"/>
<area shape="rect" href="svm_8c.html#aa4cdf4791105d54ebcadfeafdcdf01ac" title=" " alt="" coords="1365,743,1527,770"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="1383,794,1509,821"/>
</map>
</div>

</div>
</div>
<a id="aa47e04c0739bc10134b493cc8bfb0dc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa47e04c0739bc10134b493cc8bfb0dc6">&#9670;&nbsp;</a></span>translate_nested_gpa()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gpa_t translate_nested_gpa </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpa_t&#160;</td>
          <td class="paramname"><em>gpa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>access</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structx86__exception.html">x86_exception</a> *&#160;</td>
          <td class="paramname"><em>exception</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="x86_8c_source.html#l07468">7468</a> of file <a class="el" href="x86_8c_source.html">x86.c</a>.</p>
<div class="fragment"><div class="line"><a name="l07470"></a><span class="lineno"> 7470</span>&#160;{</div>
<div class="line"><a name="l07471"></a><span class="lineno"> 7471</span>&#160;    <span class="keyword">struct </span>kvm_mmu *mmu = vcpu-&gt;arch.mmu;</div>
<div class="line"><a name="l07472"></a><span class="lineno"> 7472</span>&#160;    gpa_t t_gpa;</div>
<div class="line"><a name="l07473"></a><span class="lineno"> 7473</span>&#160; </div>
<div class="line"><a name="l07474"></a><span class="lineno"> 7474</span>&#160;    BUG_ON(!<a class="code" href="x86_8h.html#a661bc84e256a87cbd929ffb7c1f61b2f">mmu_is_nested</a>(vcpu));</div>
<div class="line"><a name="l07475"></a><span class="lineno"> 7475</span>&#160; </div>
<div class="line"><a name="l07476"></a><span class="lineno"> 7476</span>&#160;    <span class="comment">/* NPT walks are always user-walks */</span></div>
<div class="line"><a name="l07477"></a><span class="lineno"> 7477</span>&#160;    access |= PFERR_USER_MASK;</div>
<div class="line"><a name="l07478"></a><span class="lineno"> 7478</span>&#160;    t_gpa  = mmu-&gt;gva_to_gpa(vcpu, mmu, gpa, access, exception);</div>
<div class="line"><a name="l07479"></a><span class="lineno"> 7479</span>&#160; </div>
<div class="line"><a name="l07480"></a><span class="lineno"> 7480</span>&#160;    <span class="keywordflow">return</span> t_gpa;</div>
<div class="line"><a name="l07481"></a><span class="lineno"> 7481</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_aa47e04c0739bc10134b493cc8bfb0dc6_cgraph.png" border="0" usemap="#ammu_8h_aa47e04c0739bc10134b493cc8bfb0dc6_cgraph" alt=""/></div>
<map name="ammu_8h_aa47e04c0739bc10134b493cc8bfb0dc6_cgraph" id="ammu_8h_aa47e04c0739bc10134b493cc8bfb0dc6_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,168,32"/>
<area shape="rect" href="x86_8h.html#a661bc84e256a87cbd929ffb7c1f61b2f" title=" " alt="" coords="216,5,341,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mmu_8h_aa47e04c0739bc10134b493cc8bfb0dc6_icgraph.png" border="0" usemap="#ammu_8h_aa47e04c0739bc10134b493cc8bfb0dc6_icgraph" alt=""/></div>
<map name="ammu_8h_aa47e04c0739bc10134b493cc8bfb0dc6_icgraph" id="ammu_8h_aa47e04c0739bc10134b493cc8bfb0dc6_icgraph">
<area shape="rect" title=" " alt="" coords="1859,231,2021,257"/>
<area shape="rect" href="hyperv_8c.html#a9ff462f663c5b81608332c950959101c" title=" " alt="" coords="1669,155,1805,181"/>
<area shape="rect" href="mmu_8h.html#a937b5147c498fb7bdafb70240b735089" title=" " alt="" coords="1664,256,1811,283"/>
<area shape="rect" href="hyperv_8c.html#ac96f1fa9ec6ac0ac26c24ca65cc1547e" title=" " alt="" coords="1459,104,1601,131"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="985,79,1164,105"/>
<area shape="rect" href="xen_8c.html#aaf398a8803a79984b06fbf9e2a64193c" title=" " alt="" coords="1235,104,1383,131"/>
<area shape="rect" href="x86_8c.html#ae69bdd054a70a95d99b79bae770372cf" title=" " alt="" coords="1025,408,1124,435"/>
<area shape="rect" href="mmu_8c.html#a2484adc402a0dc25cf9978152a678b00" title=" " alt="" coords="1444,231,1616,257"/>
<area shape="rect" href="paging__tmpl_8h.html#acb3afde0f06bed4ef5ff00dd8ad8acf1" title=" " alt="" coords="1458,307,1602,333"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="747,408,910,435"/>
<area shape="rect" href="x86_8c.html#aa9556b4ebb06617f66625ff73a3f56b4" title=" " alt="" coords="776,661,881,688"/>
<area shape="rect" href="x86_8c.html#a75f57f1f4494df7f35fcdf0e0e582a31" title=" " alt="" coords="776,560,881,587"/>
<area shape="rect" href="x86_8c.html#a39acca4a1624a86a5d8e547339729536" title=" " alt="" coords="776,488,881,515"/>
<area shape="rect" href="vmx_2nested_8c.html#a562e6893d0703c98635cab943cc58fed" title=" " alt="" coords="729,792,928,819"/>
<area shape="rect" href="svm_2nested_8c.html#a2d996c5be366f0a7b21228fd18be85ab" title=" " alt="" coords="747,155,910,181"/>
<area shape="rect" href="vmx_2nested_8c.html#a6541b63ab236a1d9732c8ffc3c604ee9" title=" " alt="" coords="747,231,911,257"/>
<area shape="rect" href="svm_8c.html#a6c03fa2ac66c8db77e6bdc408cf0b7bb" title=" " alt="" coords="767,291,890,317"/>
<area shape="rect" href="svm_2nested_8c.html#afd2919b9c5b5e158cb09deba98a74772" title=" " alt="" coords="744,342,913,383"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="531,357,630,384"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="527,307,634,333"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="245,291,404,333"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="281,357,368,384"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="245,240,404,267"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="521,560,640,587"/>
<area shape="rect" href="smm_8c.html#a0943012ff008c7999f582998f0f9167a" title=" " alt="" coords="5,509,169,536"/>
<area shape="rect" href="x86_8c.html#a86812e4228865668099921709e1c2f26" title=" " alt="" coords="517,661,644,688"/>
<area shape="rect" href="vmx_8c.html#ac02e59b539f5874eaeb4b12568e9d0dd" title=" " alt="" coords="521,763,641,789"/>
<area shape="rect" href="x86_8c.html#abe99237e5fd6f33407bc30aa2647e0db" title=" " alt="" coords="534,712,627,739"/>
<area shape="rect" href="smm_8c.html#a0c50da2c4874eda6d67766974a476019" title=" " alt="" coords="480,509,681,536"/>
<area shape="rect" href="svm_8c.html#af2ee2a03530f5b7a02a127d8b779d2ae" title=" " alt="" coords="241,560,408,587"/>
<area shape="rect" href="vmx_8c.html#aa55ace9429e6e94042e6602716222805" title=" " alt="" coords="282,661,367,688"/>
<area shape="rect" href="smm_8c.html#ae0136cd1aa193ad29565961ea839a99a" title=" " alt="" coords="252,509,397,536"/>
<area shape="rect" href="vmx_8c.html#a47ac25caf6fcd4e2519ed1cd5cee4aaf" title=" " alt="" coords="521,459,641,485"/>
<area shape="rect" href="vmx_2nested_8c.html#a41a0c6eb138f02ae4481ca5d21a09818" title=" " alt="" coords="495,865,666,906"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="491,155,670,181"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="503,53,658,80"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="497,104,665,131"/>
<area shape="rect" href="svm_2nested_8c.html#a4ec7e878f6af209e74dd84285ee0198f" title=" " alt="" coords="249,144,400,171"/>
<area shape="rect" href="svm_2nested_8c.html#a777240cb9ab00451d21a1b204e19c5a6" title=" " alt="" coords="229,5,421,32"/>
<area shape="rect" href="svm_2nested_8c.html#a03b4be7ca82710ecd17bc66f2a20cad8" title=" " alt="" coords="217,57,432,98"/>
<area shape="rect" href="vmx_2nested_8c.html#a06a397c328d1656bb4d3ab073878e6f0" title=" " alt="" coords="489,256,672,283"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="515,205,646,232"/>
<area shape="rect" href="mmu_8c.html#a8a6a76a1ef24ce48ce2378ac59cf5b20" title=" " alt="" coords="1223,256,1394,283"/>
<area shape="rect" href="mmu_8c.html#a2346100ce00fd4d842c51c4be6cbfe35" title=" " alt="" coords="1235,205,1383,232"/>
<area shape="rect" href="mmu_8c.html#afd5a07eceb08a73f2ef1f4d643d67397" title=" " alt="" coords="1221,155,1396,181"/>
<area shape="rect" href="mmu_8c.html#a88ade1c65bbbb9b25a78e82003a71a7c" title=" " alt="" coords="1015,223,1135,249"/>
<area shape="rect" href="mmu_8c.html#abd9285ed33f21279b97f214287ab49bf" title=" " alt="" coords="976,155,1173,181"/>
<area shape="rect" href="paging__tmpl_8h.html#a8a3c848b1aae92ef2e683a41f82f314b" title=" " alt="" coords="1260,357,1357,384"/>
<area shape="rect" href="paging__tmpl_8h.html#a2fcd5acfc877b79f73d44835be14d862" title=" " alt="" coords="1264,307,1353,333"/>
<area shape="rect" href="paging__tmpl_8h.html#a58a78a9bd7e3593e2a7cfe13400331aa" title=" " alt="" coords="1029,307,1120,333"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad1f35c581f53d7ebf9ada1be6d5531ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1f35c581f53d7ebf9ada1be6d5531ad">&#9670;&nbsp;</a></span>enable_mmio_caching</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> enable_mmio_caching</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00022">22</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
<a id="a43d89b28f6285b7b34c137f70723565b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43d89b28f6285b7b34c137f70723565b">&#9670;&nbsp;</a></span>shadow_phys_bits</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">u8 <a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> shadow_phys_bits</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spte_8c_source.html#l00046">46</a> of file <a class="el" href="spte_8c_source.html">spte.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
