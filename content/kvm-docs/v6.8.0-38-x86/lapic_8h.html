<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KVM: arch/x86/kvm/lapic.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KVM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_ea9599923402ca8ab47fc3e495999dea.html">arch</a></li><li class="navelem"><a class="el" href="dir_c21774f8bc9f0de15163573e5f5fa2b5.html">x86</a></li><li class="navelem"><a class="el" href="dir_fde450fd4b58e2560c53a1e73bfa4d6d.html">kvm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">lapic.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;kvm/iodev.h&gt;</code><br />
<code>#include &lt;linux/kvm_host.h&gt;</code><br />
<code>#include &quot;<a class="el" href="hyperv_8h_source.html">hyperv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="smm_8h_source.html">smm.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for lapic.h:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h__incl.png" border="0" usemap="#aarch_2x86_2kvm_2lapic_8h" alt=""/></div>
<map name="aarch_2x86_2kvm_2lapic_8h" id="aarch_2x86_2kvm_2lapic_8h">
<area shape="rect" title=" " alt="" coords="105,5,264,32"/>
<area shape="rect" title=" " alt="" coords="5,80,108,107"/>
<area shape="rect" title=" " alt="" coords="155,304,289,331"/>
<area shape="rect" href="hyperv_8h.html" title=" " alt="" coords="184,80,263,107"/>
<area shape="rect" href="smm_8h.html" title=" " alt="" coords="431,80,498,107"/>
<area shape="rect" href="x86_8h.html" title=" " alt="" coords="390,155,449,181"/>
<area shape="rect" title=" " alt="" coords="285,229,417,256"/>
<area shape="rect" title=" " alt="" coords="441,229,536,256"/>
<area shape="rect" title=" " alt="" coords="560,229,676,256"/>
<area shape="rect" href="kvm__cache__regs_8h.html" title=" " alt="" coords="700,229,843,256"/>
<area shape="rect" href="kvm__emulate_8h.html" title=" " alt="" coords="867,229,991,256"/>
<area shape="rect" title=" " alt="" coords="805,304,935,331"/>
<area shape="rect" href="fpu_8h.html" title=" " alt="" coords="960,304,1015,331"/>
<area shape="rect" title=" " alt="" coords="932,379,1043,405"/>
<area shape="rect" title=" " alt="" coords="473,155,606,181"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h__dep__incl.png" border="0" usemap="#aarch_2x86_2kvm_2lapic_8hdep" alt=""/></div>
<map name="aarch_2x86_2kvm_2lapic_8hdep" id="aarch_2x86_2kvm_2lapic_8hdep">
<area shape="rect" title=" " alt="" coords="2181,5,2340,32"/>
<area shape="rect" href="irq_8h.html" title=" " alt="" coords="934,80,1078,107"/>
<area shape="rect" href="irq__comm_8c.html" title=" " alt="" coords="5,229,196,256"/>
<area shape="rect" href="ioapic_8c.html" title=" " alt="" coords="221,229,386,256"/>
<area shape="rect" href="hyperv_8c.html" title=" " alt="" coords="410,229,581,256"/>
<area shape="rect" href="x86_8c.html" title=" " alt="" coords="1248,229,1399,256"/>
<area shape="rect" href="avic_8c.html" title=" " alt="" coords="1457,155,1643,181"/>
<area shape="rect" href="posted__intr_8c.html" title=" " alt="" coords="1553,647,1745,688"/>
<area shape="rect" href="vmx_8c.html" title=" " alt="" coords="2196,818,2384,845"/>
<area shape="rect" href="debugfs_8c.html" title=" " alt="" coords="2434,80,2613,107"/>
<area shape="rect" href="cpuid_8c.html" title=" " alt="" coords="2637,80,2799,107"/>
<area shape="rect" href="pmu_8c.html" title=" " alt="" coords="2823,80,2978,107"/>
<area shape="rect" href="svm_2pmu_8c.html" title=" " alt="" coords="3002,80,3189,107"/>
<area shape="rect" href="svm_2nested_8c.html" title=" " alt="" coords="3213,80,3415,107"/>
<area shape="rect" href="capabilities_8h.html" title=" " alt="" coords="2066,80,2301,107"/>
<area shape="rect" href="pmu__intel_8c.html" title=" " alt="" coords="3236,811,3413,852"/>
<area shape="rect" href="xen_8c.html" title=" " alt="" coords="3439,80,3589,107"/>
<area shape="rect" href="ioapic_8h.html" title=" " alt="" coords="801,155,968,181"/>
<area shape="rect" href="i8254_8c.html" title=" " alt="" coords="1010,229,1173,256"/>
<area shape="rect" href="lapic_8c.html" title=" " alt="" coords="605,229,762,256"/>
<area shape="rect" href="mmu_8c.html" title=" " alt="" coords="787,229,985,256"/>
<area shape="rect" href="irq_8c.html" title=" " alt="" coords="345,155,488,181"/>
<area shape="rect" href="i8259_8c.html" title=" " alt="" coords="513,155,675,181"/>
<area shape="rect" href="svm_8c.html" title=" " alt="" coords="1145,155,1331,181"/>
<area shape="rect" href="hyperv__evmcs_8h.html" title=" " alt="" coords="2068,304,2261,345"/>
<area shape="rect" href="vmx__onhyperv_8h.html" title=" " alt="" coords="1871,393,2048,435"/>
<area shape="rect" href="vmx__onhyperv_8c.html" title=" " alt="" coords="1845,483,2023,524"/>
<area shape="rect" href="sgx_8h.html" title=" " alt="" coords="2404,736,2587,763"/>
<area shape="rect" href="vmx_8h.html" title=" " alt="" coords="2825,572,3014,599"/>
<area shape="rect" href="vmcs_8h.html" title=" " alt="" coords="2670,155,2865,181"/>
<area shape="rect" href="hyperv__evmcs_8c.html" title=" " alt="" coords="2072,393,2265,435"/>
<area shape="rect" href="vmx__ops_8h.html" title=" " alt="" coords="2513,483,2691,524"/>
<area shape="rect" href="sgx_8c.html" title=" " alt="" coords="2801,818,2984,845"/>
<area shape="rect" href="vmx_2nested_8c.html" title=" " alt="" coords="2574,818,2777,845"/>
<area shape="rect" href="kvm-asm-offsets_8c.html" title=" " alt="" coords="2785,647,2963,688"/>
<area shape="rect" href="vmx_2hyperv_8h.html" title=" " alt="" coords="2505,654,2709,681"/>
<area shape="rect" href="nested_8h.html" title=" " alt="" coords="2837,736,3041,763"/>
<area shape="rect" href="vmx_2hyperv_8c.html" title=" " alt="" coords="3009,818,3211,845"/>
<area shape="rect" href="vmcs12_8h.html" title=" " alt="" coords="2539,229,2750,256"/>
<area shape="rect" href="vmcs12_8c.html" title=" " alt="" coords="2539,311,2750,338"/>
</map>
</div>
</div>
<p><a href="lapic_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkvm__timer.html">kvm_timer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkvm__lapic.html">kvm_lapic</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3b7d7d35c001fcefc23520569c5d81d7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a3b7d7d35c001fcefc23520569c5d81d7">KVM_APIC_INIT</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a3b7d7d35c001fcefc23520569c5d81d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7a4bf414bb99391b6c9e674d87cdc41"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#af7a4bf414bb99391b6c9e674d87cdc41">KVM_APIC_SIPI</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:af7a4bf414bb99391b6c9e674d87cdc41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3b78bd2ddd9b9b15390755b6df98d3d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#ad3b78bd2ddd9b9b15390755b6df98d3d">APIC_SHORT_MASK</a>&#160;&#160;&#160;0xc0000</td></tr>
<tr class="separator:ad3b78bd2ddd9b9b15390755b6df98d3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc73bace457403e7d23ff22afac7df0f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#acc73bace457403e7d23ff22afac7df0f">APIC_DEST_NOSHORT</a>&#160;&#160;&#160;0x0</td></tr>
<tr class="separator:acc73bace457403e7d23ff22afac7df0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e58cf75a31cd26e03db7f201861a8e4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a5e58cf75a31cd26e03db7f201861a8e4">APIC_DEST_MASK</a>&#160;&#160;&#160;0x800</td></tr>
<tr class="separator:a5e58cf75a31cd26e03db7f201861a8e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e44db9c8a1731b40f6ad0267b42f3f9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a0e44db9c8a1731b40f6ad0267b42f3f9">APIC_BUS_CYCLE_NS</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a0e44db9c8a1731b40f6ad0267b42f3f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a877c690c49f1d0ce3adc113fcbfe4a22"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a877c690c49f1d0ce3adc113fcbfe4a22">APIC_BUS_FREQUENCY</a>&#160;&#160;&#160;(1000000000ULL / <a class="el" href="lapic_8h.html#a0e44db9c8a1731b40f6ad0267b42f3f9">APIC_BUS_CYCLE_NS</a>)</td></tr>
<tr class="separator:a877c690c49f1d0ce3adc113fcbfe4a22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e368c4d317e2f3289d8287fc28c4d19"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a8e368c4d317e2f3289d8287fc28c4d19">APIC_BROADCAST</a>&#160;&#160;&#160;0xFF</td></tr>
<tr class="separator:a8e368c4d317e2f3289d8287fc28c4d19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a481da2cdd19d996fb0378476375133c6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a481da2cdd19d996fb0378476375133c6">X2APIC_BROADCAST</a>&#160;&#160;&#160;0xFFFFFFFFul</td></tr>
<tr class="separator:a481da2cdd19d996fb0378476375133c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae54f52b3c96453d38d44e36bc8d3c00c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#ae54f52b3c96453d38d44e36bc8d3c00c">APIC_LVTx</a>(x)&#160;&#160;&#160;((x) == <a class="el" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda6501a8a1c49c80b439b25520514bbfce">LVT_CMCI</a> ? APIC_LVTCMCI : APIC_LVTT + 0x10 * (x))</td></tr>
<tr class="separator:ae54f52b3c96453d38d44e36bc8d3c00c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c7a9b90f9a68f13aa4b9395a275ca96"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a9c7a9b90f9a68f13aa4b9395a275ca96">VEC_POS</a>(v)&#160;&#160;&#160;((v) &amp; (32 - 1))</td></tr>
<tr class="separator:a9c7a9b90f9a68f13aa4b9395a275ca96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba88c7489787a27e53b077679ce7b534"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#aba88c7489787a27e53b077679ce7b534">REG_POS</a>(v)&#160;&#160;&#160;(((v) &gt;&gt; 5) &lt;&lt; 4)</td></tr>
<tr class="separator:aba88c7489787a27e53b077679ce7b534"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a0c04991fb862ed18aaf962dc5eae9dff"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dff">lapic_mode</a> { <a class="el" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dffaa085aa594329c377d85feca3872e9d38">LAPIC_MODE_DISABLED</a> = 0
, <a class="el" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dffacc7944d9d7dbe606acabbf39f2fd9358">LAPIC_MODE_INVALID</a> = X2APIC_ENABLE
, <a class="el" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dffaaf077cffd5b7a15d27225db34a95b56c">LAPIC_MODE_XAPIC</a> = MSR_IA32_APICBASE_ENABLE
, <a class="el" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dffa995b62067c99e3263b6615a6b44bf092">LAPIC_MODE_X2APIC</a> = MSR_IA32_APICBASE_ENABLE | X2APIC_ENABLE
 }</td></tr>
<tr class="separator:a0c04991fb862ed18aaf962dc5eae9dff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcd26ec2b2cce7b13778d6fcea27c1fd"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fd">lapic_lvt_entry</a> { <br />
&#160;&#160;<a class="el" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdaaa41ab22efcb8632e45533e067402ac2">LVT_TIMER</a>
, <a class="el" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdaf3ef908053e3fd4a9c45a1c5046372c9">LVT_THERMAL_MONITOR</a>
, <a class="el" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda287c02fa2b5efa0b060c321914ad5aff">LVT_PERFORMANCE_COUNTER</a>
, <a class="el" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda1118be31e3566e933d9ce565a02cfdd5">LVT_LINT0</a>
, <br />
&#160;&#160;<a class="el" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdad63014a29d09b49e2d4a5ea621624573">LVT_LINT1</a>
, <a class="el" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda3f637ebcd14b33d1c30b0b56b09cb29f">LVT_ERROR</a>
, <a class="el" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda6501a8a1c49c80b439b25520514bbfce">LVT_CMCI</a>
, <a class="el" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdaa2e7ce18b246d7ad6fe039d93d40dd06">KVM_APIC_MAX_NR_LVT_ENTRIES</a>
<br />
 }</td></tr>
<tr class="separator:abcd26ec2b2cce7b13778d6fcea27c1fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1d54fd094860a96cad1af17c18f6904c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a1d54fd094860a96cad1af17c18f6904c">kvm_create_lapic</a> (struct kvm_vcpu *vcpu, int timer_advance_ns)</td></tr>
<tr class="separator:a1d54fd094860a96cad1af17c18f6904c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b935c2c698d932ceff03cb20f512919"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a4b935c2c698d932ceff03cb20f512919">kvm_free_lapic</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a4b935c2c698d932ceff03cb20f512919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa421165466ac455ff3fff91fb9afe7bf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#aa421165466ac455ff3fff91fb9afe7bf">kvm_apic_has_interrupt</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:aa421165466ac455ff3fff91fb9afe7bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f4df169625f9c4c2cb06f7443698af4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a1f4df169625f9c4c2cb06f7443698af4">kvm_apic_accept_pic_intr</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a1f4df169625f9c4c2cb06f7443698af4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6d5ae412d8199fc4aceeae42cb80024"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#ac6d5ae412d8199fc4aceeae42cb80024">kvm_get_apic_interrupt</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ac6d5ae412d8199fc4aceeae42cb80024"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27836a2bcd51ebcfe2ca478e9ad7aa04"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a27836a2bcd51ebcfe2ca478e9ad7aa04">kvm_apic_accept_events</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a27836a2bcd51ebcfe2ca478e9ad7aa04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b8a5d87df5283a20e9aa9b828320552"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a8b8a5d87df5283a20e9aa9b828320552">kvm_lapic_reset</a> (struct kvm_vcpu *vcpu, bool init_event)</td></tr>
<tr class="separator:a8b8a5d87df5283a20e9aa9b828320552"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aead5d19fd0505da0197dfc140d6824"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a3aead5d19fd0505da0197dfc140d6824">kvm_lapic_get_cr8</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a3aead5d19fd0505da0197dfc140d6824"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee34622e495b500817e0b0905bfd0d4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#aee34622e495b500817e0b0905bfd0d4c">kvm_lapic_set_tpr</a> (struct kvm_vcpu *vcpu, unsigned long cr8)</td></tr>
<tr class="separator:aee34622e495b500817e0b0905bfd0d4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6d8f3638f580c8d6dcd091512c49768"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#ab6d8f3638f580c8d6dcd091512c49768">kvm_lapic_set_eoi</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ab6d8f3638f580c8d6dcd091512c49768"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d747385873e52f47e85179c21521e73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a8d747385873e52f47e85179c21521e73">kvm_lapic_set_base</a> (struct kvm_vcpu *vcpu, u64 value)</td></tr>
<tr class="separator:a8d747385873e52f47e85179c21521e73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb2749600d08d491d91b7d3ce1d0cfaf"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#abb2749600d08d491d91b7d3ce1d0cfaf">kvm_lapic_get_base</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:abb2749600d08d491d91b7d3ce1d0cfaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a756b707dd502680db2eed7759defde40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a756b707dd502680db2eed7759defde40">kvm_recalculate_apic_map</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a756b707dd502680db2eed7759defde40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa6716cc0b30bec513d223fbfdecfdcf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#aaa6716cc0b30bec513d223fbfdecfdcf">kvm_apic_set_version</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:aaa6716cc0b30bec513d223fbfdecfdcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a200be826b3634c1b5a377464f35d540f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a200be826b3634c1b5a377464f35d540f">kvm_apic_after_set_mcg_cap</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a200be826b3634c1b5a377464f35d540f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb63e5a650d4571316b450d153a3105d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#adb63e5a650d4571316b450d153a3105d">kvm_apic_match_dest</a> (struct kvm_vcpu *vcpu, struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *source, int shorthand, unsigned int dest, int dest_mode)</td></tr>
<tr class="separator:adb63e5a650d4571316b450d153a3105d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47d52843df792ef8e7bffdfb66a3b40b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a47d52843df792ef8e7bffdfb66a3b40b">kvm_apic_compare_prio</a> (struct kvm_vcpu *vcpu1, struct kvm_vcpu *vcpu2)</td></tr>
<tr class="separator:a47d52843df792ef8e7bffdfb66a3b40b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad608730f208932f64d2c98c762fce85c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#ad608730f208932f64d2c98c762fce85c">kvm_apic_clear_irr</a> (struct kvm_vcpu *vcpu, int vec)</td></tr>
<tr class="separator:ad608730f208932f64d2c98c762fce85c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed305556b8d09cfaa135cca071bd8c22"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#aed305556b8d09cfaa135cca071bd8c22">__kvm_apic_update_irr</a> (u32 *<a class="el" href="posted__intr_8h.html#a2707c542febe155b1642f9b9a9c0bc79">pir</a>, void *regs, int *max_irr)</td></tr>
<tr class="separator:aed305556b8d09cfaa135cca071bd8c22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a922ce0b7b20cf9b9ef4930d3d81e8360"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a922ce0b7b20cf9b9ef4930d3d81e8360">kvm_apic_update_irr</a> (struct kvm_vcpu *vcpu, u32 *<a class="el" href="posted__intr_8h.html#a2707c542febe155b1642f9b9a9c0bc79">pir</a>, int *max_irr)</td></tr>
<tr class="separator:a922ce0b7b20cf9b9ef4930d3d81e8360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44fec9a6b84f831af88ffed6b2325545"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a44fec9a6b84f831af88ffed6b2325545">kvm_apic_update_ppr</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a44fec9a6b84f831af88ffed6b2325545"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d272e1b73f22f797955e7ddea84b741"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a3d272e1b73f22f797955e7ddea84b741">kvm_apic_set_irq</a> (struct kvm_vcpu *vcpu, struct kvm_lapic_irq *irq, struct <a class="el" href="structdest__map.html">dest_map</a> *<a class="el" href="structdest__map.html">dest_map</a>)</td></tr>
<tr class="separator:a3d272e1b73f22f797955e7ddea84b741"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1ce737e754e319ee93f3d06e197cc50"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#ab1ce737e754e319ee93f3d06e197cc50">kvm_apic_local_deliver</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, int lvt_type)</td></tr>
<tr class="separator:ab1ce737e754e319ee93f3d06e197cc50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5468339c2df08ca538b77d4d48915c35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a5468339c2df08ca538b77d4d48915c35">kvm_apic_update_apicv</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a5468339c2df08ca538b77d4d48915c35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c6616d2cbae35632aa5debb15b552ec"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a8c6616d2cbae35632aa5debb15b552ec">kvm_alloc_apic_access_page</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a8c6616d2cbae35632aa5debb15b552ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a017e57adbc721d98d26099f1a431a22c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a017e57adbc721d98d26099f1a431a22c">kvm_inhibit_apic_access_page</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a017e57adbc721d98d26099f1a431a22c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17eee4051fa1d41b805b09a195f64045"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a17eee4051fa1d41b805b09a195f64045">kvm_irq_delivery_to_apic_fast</a> (struct kvm *kvm, struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *src, struct kvm_lapic_irq *irq, int *r, struct <a class="el" href="structdest__map.html">dest_map</a> *<a class="el" href="structdest__map.html">dest_map</a>)</td></tr>
<tr class="separator:a17eee4051fa1d41b805b09a195f64045"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b7f12cb3ba68245df79bc30d938b728"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a4b7f12cb3ba68245df79bc30d938b728">kvm_apic_send_ipi</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 icr_low, u32 icr_high)</td></tr>
<tr class="separator:a4b7f12cb3ba68245df79bc30d938b728"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62fc68a9f819c5044440e2cf6a7763e8"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a62fc68a9f819c5044440e2cf6a7763e8">kvm_get_apic_base</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a62fc68a9f819c5044440e2cf6a7763e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d9f2a266299bc56c932735db94816d5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5">kvm_set_apic_base</a> (struct kvm_vcpu *vcpu, struct msr_data *msr_info)</td></tr>
<tr class="separator:a9d9f2a266299bc56c932735db94816d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a623f02f0875b0883fd65e82c565c9a18"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a623f02f0875b0883fd65e82c565c9a18">kvm_apic_get_state</a> (struct kvm_vcpu *vcpu, struct kvm_lapic_state *s)</td></tr>
<tr class="separator:a623f02f0875b0883fd65e82c565c9a18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4768d4990380510ec220c3e510d32598"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a4768d4990380510ec220c3e510d32598">kvm_apic_set_state</a> (struct kvm_vcpu *vcpu, struct kvm_lapic_state *s)</td></tr>
<tr class="separator:a4768d4990380510ec220c3e510d32598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8415cd1d2d30e65d505adb5ba75a0338"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dff">lapic_mode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a8415cd1d2d30e65d505adb5ba75a0338">kvm_get_apic_mode</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a8415cd1d2d30e65d505adb5ba75a0338"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e5b22760af617cabb18355a0a373156"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a1e5b22760af617cabb18355a0a373156">kvm_lapic_find_highest_irr</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a1e5b22760af617cabb18355a0a373156"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2fa5313476adb8240d3595805d784fc"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#af2fa5313476adb8240d3595805d784fc">kvm_get_lapic_tscdeadline_msr</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:af2fa5313476adb8240d3595805d784fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44881cc17bdbe632a483e8c7c1dd0dfb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a44881cc17bdbe632a483e8c7c1dd0dfb">kvm_set_lapic_tscdeadline_msr</a> (struct kvm_vcpu *vcpu, u64 data)</td></tr>
<tr class="separator:a44881cc17bdbe632a483e8c7c1dd0dfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b33bb5758d3dd75c7b87e537a5e729e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a1b33bb5758d3dd75c7b87e537a5e729e">kvm_apic_write_nodecode</a> (struct kvm_vcpu *vcpu, u32 offset)</td></tr>
<tr class="separator:a1b33bb5758d3dd75c7b87e537a5e729e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a501cf23b440691f979fad04c87067f93"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a501cf23b440691f979fad04c87067f93">kvm_apic_set_eoi_accelerated</a> (struct kvm_vcpu *vcpu, int vector)</td></tr>
<tr class="separator:a501cf23b440691f979fad04c87067f93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0f76b010d3d80125e88dc3d819f115b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#ad0f76b010d3d80125e88dc3d819f115b">kvm_lapic_set_vapic_addr</a> (struct kvm_vcpu *vcpu, gpa_t vapic_addr)</td></tr>
<tr class="separator:ad0f76b010d3d80125e88dc3d819f115b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa63139efcde3eb7b7548e5792d7cf63d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#aa63139efcde3eb7b7548e5792d7cf63d">kvm_lapic_sync_from_vapic</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:aa63139efcde3eb7b7548e5792d7cf63d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a332060485ef249fcfd9edbf9cf80dd2b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a332060485ef249fcfd9edbf9cf80dd2b">kvm_lapic_sync_to_vapic</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a332060485ef249fcfd9edbf9cf80dd2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf2487dc76dace6e577b637cc357998b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#adf2487dc76dace6e577b637cc357998b">kvm_x2apic_icr_write</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u64 data)</td></tr>
<tr class="separator:adf2487dc76dace6e577b637cc357998b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d2f3f34c12c8c724fe739cbbc44ad43"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a7d2f3f34c12c8c724fe739cbbc44ad43">kvm_x2apic_msr_write</a> (struct kvm_vcpu *vcpu, u32 msr, u64 data)</td></tr>
<tr class="separator:a7d2f3f34c12c8c724fe739cbbc44ad43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a179cfc2268db31f40b5bd9b1c247a37b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a179cfc2268db31f40b5bd9b1c247a37b">kvm_x2apic_msr_read</a> (struct kvm_vcpu *vcpu, u32 msr, u64 *data)</td></tr>
<tr class="separator:a179cfc2268db31f40b5bd9b1c247a37b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b13b534cc2764aef8abe2383294fb06"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a6b13b534cc2764aef8abe2383294fb06">kvm_hv_vapic_msr_write</a> (struct kvm_vcpu *vcpu, u32 msr, u64 data)</td></tr>
<tr class="separator:a6b13b534cc2764aef8abe2383294fb06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec25ca9a5ddcfdd5fee6a986826582c7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#aec25ca9a5ddcfdd5fee6a986826582c7">kvm_hv_vapic_msr_read</a> (struct kvm_vcpu *vcpu, u32 msr, u64 *data)</td></tr>
<tr class="separator:aec25ca9a5ddcfdd5fee6a986826582c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c3f4680631c7f6cb33a6a5c4c001750"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a9c3f4680631c7f6cb33a6a5c4c001750">kvm_lapic_set_pv_eoi</a> (struct kvm_vcpu *vcpu, u64 data, unsigned long len)</td></tr>
<tr class="separator:a9c3f4680631c7f6cb33a6a5c4c001750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2d9c133a24e68f345a3fe133bf8bfaf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#af2d9c133a24e68f345a3fe133bf8bfaf">kvm_lapic_exit</a> (void)</td></tr>
<tr class="separator:af2d9c133a24e68f345a3fe133bf8bfaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b4d880305f2ddba0ac9fdb398a7611a"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a4b4d880305f2ddba0ac9fdb398a7611a">kvm_lapic_readable_reg_mask</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a4b4d880305f2ddba0ac9fdb398a7611a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada4d7479e3c0f2e45cb1565dab78c198"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198">kvm_lapic_clear_vector</a> (int vec, void *bitmap)</td></tr>
<tr class="separator:ada4d7479e3c0f2e45cb1565dab78c198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecd6ca5347dbb81047584149b2291019"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019">kvm_lapic_set_vector</a> (int vec, void *bitmap)</td></tr>
<tr class="separator:aecd6ca5347dbb81047584149b2291019"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12227432ca4a620c3a4e249cbb28ecbe"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a12227432ca4a620c3a4e249cbb28ecbe">kvm_lapic_set_irr</a> (int vec, struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a12227432ca4a620c3a4e249cbb28ecbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa28a43e0f54449e2ec4d25e1f8ecb178"><td class="memItemLeft" align="right" valign="top">static u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178">__kvm_lapic_get_reg</a> (char *regs, int reg_off)</td></tr>
<tr class="separator:aa28a43e0f54449e2ec4d25e1f8ecb178"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cd1df8b4c079c23a522d09c964da0ee"><td class="memItemLeft" align="right" valign="top">static u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, int reg_off)</td></tr>
<tr class="separator:a8cd1df8b4c079c23a522d09c964da0ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a794ccadf351e1b46decb0755741b3eed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a794ccadf351e1b46decb0755741b3eed">DECLARE_STATIC_KEY_FALSE</a> (kvm_has_noapic_vcpu)</td></tr>
<tr class="separator:a794ccadf351e1b46decb0755741b3eed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d8c9378fcbf62390a89dc3b7f0bdbd4"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a1d8c9378fcbf62390a89dc3b7f0bdbd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d8660ecbda996b11b10b179013e52d4"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4">kvm_apic_hw_enabled</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a1d8660ecbda996b11b10b179013e52d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a447b1b971acaf871dd62669b4aa3116f"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f">kvm_apic_sw_enabled</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a447b1b971acaf871dd62669b4aa3116f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7e74fde3e4fb01f561634e789b5eab4"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4">kvm_apic_present</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ae7e74fde3e4fb01f561634e789b5eab4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac572ef1ae29ec34adf2d46f7b82cc620"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#ac572ef1ae29ec34adf2d46f7b82cc620">kvm_lapic_enabled</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ac572ef1ae29ec34adf2d46f7b82cc620"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07d3e1e4090a62753325dfa11d232cea"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a07d3e1e4090a62753325dfa11d232cea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3af346d02eebff16886d49d3810b5358"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358">kvm_vcpu_apicv_active</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a3af346d02eebff16886d49d3810b5358"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a106127db5f69d94e5ea9d6d2982c23fd"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a106127db5f69d94e5ea9d6d2982c23fd">kvm_apic_has_pending_init_or_sipi</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a106127db5f69d94e5ea9d6d2982c23fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58bae1ee856b1b5c5c44903c9f83a4f7"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a58bae1ee856b1b5c5c44903c9f83a4f7">kvm_apic_init_sipi_allowed</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a58bae1ee856b1b5c5c44903c9f83a4f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfbea71ac96b210fb91bef47c77194f1"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#adfbea71ac96b210fb91bef47c77194f1">kvm_lowest_prio_delivery</a> (struct kvm_lapic_irq *irq)</td></tr>
<tr class="separator:adfbea71ac96b210fb91bef47c77194f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90e371fd128f6bd87e2863ca2d3ed066"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a90e371fd128f6bd87e2863ca2d3ed066">kvm_lapic_latched_init</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a90e371fd128f6bd87e2863ca2d3ed066"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a637f6f499709ab30e61db1b69177ea00"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a637f6f499709ab30e61db1b69177ea00">kvm_apic_pending_eoi</a> (struct kvm_vcpu *vcpu, int vector)</td></tr>
<tr class="separator:a637f6f499709ab30e61db1b69177ea00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94273a31a16c3d074d5722f22474bcbb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a94273a31a16c3d074d5722f22474bcbb">kvm_wait_lapic_expire</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a94273a31a16c3d074d5722f22474bcbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42846edfc8630e622bcde943f49559c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a42846edfc8630e622bcde943f49559c4">kvm_bitmap_or_dest_vcpus</a> (struct kvm *kvm, struct kvm_lapic_irq *irq, unsigned long *vcpu_bitmap)</td></tr>
<tr class="separator:a42846edfc8630e622bcde943f49559c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8620b1c89f8cf017f7827024fc95ac92"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a8620b1c89f8cf017f7827024fc95ac92">kvm_intr_is_single_vcpu_fast</a> (struct kvm *kvm, struct kvm_lapic_irq *irq, struct kvm_vcpu **dest_vcpu)</td></tr>
<tr class="separator:a8620b1c89f8cf017f7827024fc95ac92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9fecb7d9f4574931650af9abb4b9f4c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#ac9fecb7d9f4574931650af9abb4b9f4c">kvm_vector_to_index</a> (u32 vector, u32 dest_vcpus, const unsigned long *bitmap, u32 bitmap_size)</td></tr>
<tr class="separator:ac9fecb7d9f4574931650af9abb4b9f4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee4a3e5ae4ed211edf4e463ebacadaa5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#aee4a3e5ae4ed211edf4e463ebacadaa5">kvm_lapic_switch_to_sw_timer</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:aee4a3e5ae4ed211edf4e463ebacadaa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a973c3bd2856958a514e5ae2f49b14821"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a973c3bd2856958a514e5ae2f49b14821">kvm_lapic_switch_to_hv_timer</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a973c3bd2856958a514e5ae2f49b14821"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55b40b66655c45769650efd20bf3c26d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a55b40b66655c45769650efd20bf3c26d">kvm_lapic_expired_hv_timer</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a55b40b66655c45769650efd20bf3c26d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a054dd145c5435c8bfe1dea1adf2ed1e1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a054dd145c5435c8bfe1dea1adf2ed1e1">kvm_lapic_hv_timer_in_use</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a054dd145c5435c8bfe1dea1adf2ed1e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab785e74943a17874760f3d4b6b5359d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#ab785e74943a17874760f3d4b6b5359d0">kvm_lapic_restart_hv_timer</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ab785e74943a17874760f3d4b6b5359d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2400290b895608d302ecce4ee352ee25"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a2400290b895608d302ecce4ee352ee25">kvm_can_use_hv_timer</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a2400290b895608d302ecce4ee352ee25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a101348a7cc26ee89dac847f02ca917a4"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dff">lapic_mode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a101348a7cc26ee89dac847f02ca917a4">kvm_apic_mode</a> (u64 apic_base)</td></tr>
<tr class="separator:a101348a7cc26ee89dac847f02ca917a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f07303d20a06eeb408d4985c5e15096"><td class="memItemLeft" align="right" valign="top">static u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096">kvm_xapic_id</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a4f07303d20a06eeb408d4985c5e15096"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a65788ee3d09ea041368cd93b3391f3c4"><td class="memItemLeft" align="right" valign="top">struct static_key_false_deferred&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a65788ee3d09ea041368cd93b3391f3c4">apic_hw_disabled</a></td></tr>
<tr class="separator:a65788ee3d09ea041368cd93b3391f3c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c2a1bc1bb244452f5338719ef4e73c8"><td class="memItemLeft" align="right" valign="top">struct static_key_false_deferred&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8h.html#a3c2a1bc1bb244452f5338719ef4e73c8">apic_sw_disabled</a></td></tr>
<tr class="separator:a3c2a1bc1bb244452f5338719ef4e73c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a8e368c4d317e2f3289d8287fc28c4d19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e368c4d317e2f3289d8287fc28c4d19">&#9670;&nbsp;</a></span>APIC_BROADCAST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APIC_BROADCAST&#160;&#160;&#160;0xFF</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00022">22</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>

</div>
</div>
<a id="a0e44db9c8a1731b40f6ad0267b42f3f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e44db9c8a1731b40f6ad0267b42f3f9">&#9670;&nbsp;</a></span>APIC_BUS_CYCLE_NS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APIC_BUS_CYCLE_NS&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00019">19</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>

</div>
</div>
<a id="a877c690c49f1d0ce3adc113fcbfe4a22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a877c690c49f1d0ce3adc113fcbfe4a22">&#9670;&nbsp;</a></span>APIC_BUS_FREQUENCY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APIC_BUS_FREQUENCY&#160;&#160;&#160;(1000000000ULL / <a class="el" href="lapic_8h.html#a0e44db9c8a1731b40f6ad0267b42f3f9">APIC_BUS_CYCLE_NS</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00020">20</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>

</div>
</div>
<a id="a5e58cf75a31cd26e03db7f201861a8e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e58cf75a31cd26e03db7f201861a8e4">&#9670;&nbsp;</a></span>APIC_DEST_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APIC_DEST_MASK&#160;&#160;&#160;0x800</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00017">17</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>

</div>
</div>
<a id="acc73bace457403e7d23ff22afac7df0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc73bace457403e7d23ff22afac7df0f">&#9670;&nbsp;</a></span>APIC_DEST_NOSHORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APIC_DEST_NOSHORT&#160;&#160;&#160;0x0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00016">16</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>

</div>
</div>
<a id="ae54f52b3c96453d38d44e36bc8d3c00c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae54f52b3c96453d38d44e36bc8d3c00c">&#9670;&nbsp;</a></span>APIC_LVTx</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APIC_LVTx</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;((x) == <a class="el" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda6501a8a1c49c80b439b25520514bbfce">LVT_CMCI</a> ? APIC_LVTCMCI : APIC_LVTT + 0x10 * (x))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00044">44</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>

</div>
</div>
<a id="ad3b78bd2ddd9b9b15390755b6df98d3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3b78bd2ddd9b9b15390755b6df98d3d">&#9670;&nbsp;</a></span>APIC_SHORT_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APIC_SHORT_MASK&#160;&#160;&#160;0xc0000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00015">15</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>

</div>
</div>
<a id="a3b7d7d35c001fcefc23520569c5d81d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b7d7d35c001fcefc23520569c5d81d7">&#9670;&nbsp;</a></span>KVM_APIC_INIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_APIC_INIT&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00012">12</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>

</div>
</div>
<a id="af7a4bf414bb99391b6c9e674d87cdc41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7a4bf414bb99391b6c9e674d87cdc41">&#9670;&nbsp;</a></span>KVM_APIC_SIPI</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_APIC_SIPI&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00013">13</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>

</div>
</div>
<a id="aba88c7489787a27e53b077679ce7b534"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba88c7489787a27e53b077679ce7b534">&#9670;&nbsp;</a></span>REG_POS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REG_POS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;(((v) &gt;&gt; 5) &lt;&lt; 4)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00152">152</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>

</div>
</div>
<a id="a9c7a9b90f9a68f13aa4b9395a275ca96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c7a9b90f9a68f13aa4b9395a275ca96">&#9670;&nbsp;</a></span>VEC_POS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VEC_POS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;((v) &amp; (32 - 1))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00151">151</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>

</div>
</div>
<a id="a481da2cdd19d996fb0378476375133c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a481da2cdd19d996fb0378476375133c6">&#9670;&nbsp;</a></span>X2APIC_BROADCAST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define X2APIC_BROADCAST&#160;&#160;&#160;0xFFFFFFFFul</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00023">23</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="abcd26ec2b2cce7b13778d6fcea27c1fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcd26ec2b2cce7b13778d6fcea27c1fd">&#9670;&nbsp;</a></span>lapic_lvt_entry</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fd">lapic_lvt_entry</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="abcd26ec2b2cce7b13778d6fcea27c1fdaaa41ab22efcb8632e45533e067402ac2"></a>LVT_TIMER&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="abcd26ec2b2cce7b13778d6fcea27c1fdaf3ef908053e3fd4a9c45a1c5046372c9"></a>LVT_THERMAL_MONITOR&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="abcd26ec2b2cce7b13778d6fcea27c1fda287c02fa2b5efa0b060c321914ad5aff"></a>LVT_PERFORMANCE_COUNTER&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="abcd26ec2b2cce7b13778d6fcea27c1fda1118be31e3566e933d9ce565a02cfdd5"></a>LVT_LINT0&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="abcd26ec2b2cce7b13778d6fcea27c1fdad63014a29d09b49e2d4a5ea621624573"></a>LVT_LINT1&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="abcd26ec2b2cce7b13778d6fcea27c1fda3f637ebcd14b33d1c30b0b56b09cb29f"></a>LVT_ERROR&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="abcd26ec2b2cce7b13778d6fcea27c1fda6501a8a1c49c80b439b25520514bbfce"></a>LVT_CMCI&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="abcd26ec2b2cce7b13778d6fcea27c1fdaa2e7ce18b246d7ad6fe039d93d40dd06"></a>KVM_APIC_MAX_NR_LVT_ENTRIES&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00032">32</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                     {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdaaa41ab22efcb8632e45533e067402ac2">LVT_TIMER</a>,</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdaf3ef908053e3fd4a9c45a1c5046372c9">LVT_THERMAL_MONITOR</a>,</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda287c02fa2b5efa0b060c321914ad5aff">LVT_PERFORMANCE_COUNTER</a>,</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda1118be31e3566e933d9ce565a02cfdd5">LVT_LINT0</a>,</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdad63014a29d09b49e2d4a5ea621624573">LVT_LINT1</a>,</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda3f637ebcd14b33d1c30b0b56b09cb29f">LVT_ERROR</a>,</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda6501a8a1c49c80b439b25520514bbfce">LVT_CMCI</a>,</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdaa2e7ce18b246d7ad6fe039d93d40dd06">KVM_APIC_MAX_NR_LVT_ENTRIES</a>,</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;};</div>
<div class="ttc" id="alapic_8h_html_abcd26ec2b2cce7b13778d6fcea27c1fda1118be31e3566e933d9ce565a02cfdd5"><div class="ttname"><a href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda1118be31e3566e933d9ce565a02cfdd5">LVT_LINT0</a></div><div class="ttdeci">@ LVT_LINT0</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00036">lapic.h:36</a></div></div>
<div class="ttc" id="alapic_8h_html_abcd26ec2b2cce7b13778d6fcea27c1fda287c02fa2b5efa0b060c321914ad5aff"><div class="ttname"><a href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda287c02fa2b5efa0b060c321914ad5aff">LVT_PERFORMANCE_COUNTER</a></div><div class="ttdeci">@ LVT_PERFORMANCE_COUNTER</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00035">lapic.h:35</a></div></div>
<div class="ttc" id="alapic_8h_html_abcd26ec2b2cce7b13778d6fcea27c1fda3f637ebcd14b33d1c30b0b56b09cb29f"><div class="ttname"><a href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda3f637ebcd14b33d1c30b0b56b09cb29f">LVT_ERROR</a></div><div class="ttdeci">@ LVT_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00038">lapic.h:38</a></div></div>
<div class="ttc" id="alapic_8h_html_abcd26ec2b2cce7b13778d6fcea27c1fda6501a8a1c49c80b439b25520514bbfce"><div class="ttname"><a href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda6501a8a1c49c80b439b25520514bbfce">LVT_CMCI</a></div><div class="ttdeci">@ LVT_CMCI</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00039">lapic.h:39</a></div></div>
<div class="ttc" id="alapic_8h_html_abcd26ec2b2cce7b13778d6fcea27c1fdaa2e7ce18b246d7ad6fe039d93d40dd06"><div class="ttname"><a href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdaa2e7ce18b246d7ad6fe039d93d40dd06">KVM_APIC_MAX_NR_LVT_ENTRIES</a></div><div class="ttdeci">@ KVM_APIC_MAX_NR_LVT_ENTRIES</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00041">lapic.h:41</a></div></div>
<div class="ttc" id="alapic_8h_html_abcd26ec2b2cce7b13778d6fcea27c1fdaaa41ab22efcb8632e45533e067402ac2"><div class="ttname"><a href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdaaa41ab22efcb8632e45533e067402ac2">LVT_TIMER</a></div><div class="ttdeci">@ LVT_TIMER</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00033">lapic.h:33</a></div></div>
<div class="ttc" id="alapic_8h_html_abcd26ec2b2cce7b13778d6fcea27c1fdad63014a29d09b49e2d4a5ea621624573"><div class="ttname"><a href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdad63014a29d09b49e2d4a5ea621624573">LVT_LINT1</a></div><div class="ttdeci">@ LVT_LINT1</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00037">lapic.h:37</a></div></div>
<div class="ttc" id="alapic_8h_html_abcd26ec2b2cce7b13778d6fcea27c1fdaf3ef908053e3fd4a9c45a1c5046372c9"><div class="ttname"><a href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdaf3ef908053e3fd4a9c45a1c5046372c9">LVT_THERMAL_MONITOR</a></div><div class="ttdeci">@ LVT_THERMAL_MONITOR</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00034">lapic.h:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0c04991fb862ed18aaf962dc5eae9dff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c04991fb862ed18aaf962dc5eae9dff">&#9670;&nbsp;</a></span>lapic_mode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dff">lapic_mode</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a0c04991fb862ed18aaf962dc5eae9dffaa085aa594329c377d85feca3872e9d38"></a>LAPIC_MODE_DISABLED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a0c04991fb862ed18aaf962dc5eae9dffacc7944d9d7dbe606acabbf39f2fd9358"></a>LAPIC_MODE_INVALID&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a0c04991fb862ed18aaf962dc5eae9dffaaf077cffd5b7a15d27225db34a95b56c"></a>LAPIC_MODE_XAPIC&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a0c04991fb862ed18aaf962dc5eae9dffa995b62067c99e3263b6615a6b44bf092"></a>LAPIC_MODE_X2APIC&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00025">25</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;                {</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <a class="code" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dffaa085aa594329c377d85feca3872e9d38">LAPIC_MODE_DISABLED</a> = 0,</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <a class="code" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dffacc7944d9d7dbe606acabbf39f2fd9358">LAPIC_MODE_INVALID</a> = X2APIC_ENABLE,</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <a class="code" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dffaaf077cffd5b7a15d27225db34a95b56c">LAPIC_MODE_XAPIC</a> = MSR_IA32_APICBASE_ENABLE,</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <a class="code" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dffa995b62067c99e3263b6615a6b44bf092">LAPIC_MODE_X2APIC</a> = MSR_IA32_APICBASE_ENABLE | X2APIC_ENABLE,</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;};</div>
<div class="ttc" id="alapic_8h_html_a0c04991fb862ed18aaf962dc5eae9dffa995b62067c99e3263b6615a6b44bf092"><div class="ttname"><a href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dffa995b62067c99e3263b6615a6b44bf092">LAPIC_MODE_X2APIC</a></div><div class="ttdeci">@ LAPIC_MODE_X2APIC</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00029">lapic.h:29</a></div></div>
<div class="ttc" id="alapic_8h_html_a0c04991fb862ed18aaf962dc5eae9dffaa085aa594329c377d85feca3872e9d38"><div class="ttname"><a href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dffaa085aa594329c377d85feca3872e9d38">LAPIC_MODE_DISABLED</a></div><div class="ttdeci">@ LAPIC_MODE_DISABLED</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00026">lapic.h:26</a></div></div>
<div class="ttc" id="alapic_8h_html_a0c04991fb862ed18aaf962dc5eae9dffaaf077cffd5b7a15d27225db34a95b56c"><div class="ttname"><a href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dffaaf077cffd5b7a15d27225db34a95b56c">LAPIC_MODE_XAPIC</a></div><div class="ttdeci">@ LAPIC_MODE_XAPIC</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00028">lapic.h:28</a></div></div>
<div class="ttc" id="alapic_8h_html_a0c04991fb862ed18aaf962dc5eae9dffacc7944d9d7dbe606acabbf39f2fd9358"><div class="ttname"><a href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dffacc7944d9d7dbe606acabbf39f2fd9358">LAPIC_MODE_INVALID</a></div><div class="ttdeci">@ LAPIC_MODE_INVALID</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00027">lapic.h:27</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aed305556b8d09cfaa135cca071bd8c22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed305556b8d09cfaa135cca071bd8c22">&#9670;&nbsp;</a></span>__kvm_apic_update_irr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool __kvm_apic_update_irr </td>
          <td>(</td>
          <td class="paramtype">u32 *&#160;</td>
          <td class="paramname"><em>pir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>regs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>max_irr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00654">654</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;{</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    u32 i, vec;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    u32 pir_val, irr_val, prev_irr_val;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keywordtype">int</span> max_updated_irr;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    max_updated_irr = -1;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    *max_irr = -1;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">for</span> (i = vec = 0; i &lt;= 7; i++, vec += 32) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        u32 *p_irr = (u32 *)(regs + APIC_IRR + i * 0x10);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        irr_val = *p_irr;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        pir_val = READ_ONCE(<a class="code" href="posted__intr_8h.html#a2707c542febe155b1642f9b9a9c0bc79">pir</a>[i]);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="keywordflow">if</span> (pir_val) {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            pir_val = xchg(&amp;<a class="code" href="posted__intr_8h.html#a2707c542febe155b1642f9b9a9c0bc79">pir</a>[i], 0);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            prev_irr_val = irr_val;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                irr_val = prev_irr_val | pir_val;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            } <span class="keywordflow">while</span> (prev_irr_val != irr_val &amp;&amp;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                 !try_cmpxchg(p_irr, &amp;prev_irr_val, irr_val));</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            <span class="keywordflow">if</span> (prev_irr_val != irr_val)</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                max_updated_irr = __fls(irr_val ^ prev_irr_val) + vec;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        }</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keywordflow">if</span> (irr_val)</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            *max_irr = __fls(irr_val) + vec;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    }</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">return</span> ((max_updated_irr != -1) &amp;&amp;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        (max_updated_irr == *max_irr));</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;}</div>
<div class="ttc" id="aposted__intr_8h_html_a2707c542febe155b1642f9b9a9c0bc79"><div class="ttname"><a href="posted__intr_8h.html#a2707c542febe155b1642f9b9a9c0bc79">pir</a></div><div class="ttdeci">u32 pir[8]</div><div class="ttdef"><b>Definition:</b> <a href="posted__intr_8h_source.html#l00000">posted_intr.h:0</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_aed305556b8d09cfaa135cca071bd8c22_icgraph.png" border="0" usemap="#alapic_8h_aed305556b8d09cfaa135cca071bd8c22_icgraph" alt=""/></div>
<map name="alapic_8h_aed305556b8d09cfaa135cca071bd8c22_icgraph" id="alapic_8h_aed305556b8d09cfaa135cca071bd8c22_icgraph">
<area shape="rect" title=" " alt="" coords="471,35,643,61"/>
<area shape="rect" href="lapic_8c.html#a922ce0b7b20cf9b9ef4930d3d81e8360" title=" " alt="" coords="258,5,417,32"/>
<area shape="rect" href="vmx_2nested_8c.html#a1202b81c0b68f0555ec94d77f1243029" title=" " alt="" coords="252,57,423,98"/>
<area shape="rect" href="vmx_8c.html#ac2197e1b1fbae590edacaecfd1d0974c" title=" " alt="" coords="28,5,181,32"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="5,64,204,91"/>
</map>
</div>

</div>
</div>
<a id="aa28a43e0f54449e2ec4d25e1f8ecb178"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa28a43e0f54449e2ec4d25e1f8ecb178">&#9670;&nbsp;</a></span>__kvm_lapic_get_reg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u32 __kvm_lapic_get_reg </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>regs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reg_off</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00174">174</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;{</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">return</span> *((u32 *) (regs + reg_off));</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_aa28a43e0f54449e2ec4d25e1f8ecb178_icgraph.png" border="0" usemap="#alapic_8h_aa28a43e0f54449e2ec4d25e1f8ecb178_icgraph" alt=""/></div>
<map name="alapic_8h_aa28a43e0f54449e2ec4d25e1f8ecb178_icgraph" id="alapic_8h_aa28a43e0f54449e2ec4d25e1f8ecb178_icgraph">
<area shape="rect" title=" " alt="" coords="1389,397,1548,424"/>
<area shape="rect" href="lapic_8c.html#a5862d5df95ddd956a652f1dd3f319706" title=" " alt="" coords="696,93,860,120"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1196,777,1341,804"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="218,125,371,152"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="453,296,605,322"/>
<area shape="rect" href="x86_8c.html#aca5ab82fb669f6a99e011293efed0d5d" title=" " alt="" coords="5,118,157,159"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="219,288,370,330"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="480,188,579,214"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="967,372,1110,398"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="465,498,594,525"/>
<area shape="rect" href="lapic_8c.html#a5bf640da1dfc1be09d89fb23c7f2e954" title=" " alt="" coords="717,194,839,221"/>
<area shape="rect" href="lapic_8c.html#a2800acddbbe439c5ae4fab24c1eaf9ff" title=" " alt="" coords="973,1056,1105,1082"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="973,549,1104,576"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="699,701,857,728"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="432,752,627,778"/>
<area shape="rect" href="avic_8c.html#aaff9720871b696bc298d89cbb27a6dc2" title=" " alt="" coords="689,904,867,930"/>
<area shape="rect" href="avic_8c.html#a6a9ffca6bae1adce86d4495b5caaae2e" title=" " alt="" coords="690,954,866,981"/>
<area shape="rect" href="avic_8c.html#a7cf9fdcdf4f5f6559c099faaab0c2d29" title=" " alt="" coords="675,802,881,829"/>
<area shape="rect" href="avic_8c.html#a2650b353757b538de17a1c843f7308d2" title=" " alt="" coords="982,1005,1095,1032"/>
<area shape="rect" href="lapic_8c.html#a1f4df169625f9c4c2cb06f7443698af4" title=" " alt="" coords="943,1106,1134,1133"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="951,1157,1126,1184"/>
<area shape="rect" href="lapic_8c.html#a870119cb74033f360164df90029af75a" title=" " alt="" coords="929,853,1148,880"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="935,1208,1142,1234"/>
<area shape="rect" href="lapic_8c.html#a3aead5d19fd0505da0197dfc140d6824" title=" " alt="" coords="967,1258,1111,1285"/>
<area shape="rect" href="lapic_8c.html#a332060485ef249fcfd9edbf9cf80dd2b" title=" " alt="" coords="945,1309,1133,1336"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="931,1360,1147,1386"/>
<area shape="rect" href="lapic_8c.html#a4d28368a44947389f8a7afec1c3288d3" title=" " alt="" coords="949,1410,1128,1437"/>
<area shape="rect" href="lapic_8c.html#a0efcb9037756de47e9d28f0a5ea1009f" title=" " alt="" coords="958,42,1119,69"/>
<area shape="rect" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3" title=" " alt="" coords="960,600,1117,626"/>
<area shape="rect" href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4" title=" " alt="" coords="945,701,1132,728"/>
<area shape="rect" href="vmx_2nested_8c.html#ace6032a8bf541cd49984bb572529dd68" title=" " alt="" coords="945,93,1132,120"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="218,188,371,214"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="713,296,843,322"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="441,346,617,373"/>
<area shape="rect" href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf" title=" " alt="" coords="689,397,867,424"/>
<area shape="rect" href="irq_8h.html#afcf66d0c1c15dcbd414e2dbf830d7b29" title=" " alt="" coords="688,1005,868,1032"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="219,794,371,835"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="205,860,384,886"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="225,742,365,769"/>
<area shape="rect" href="avic_8c.html#ae9f162404fdb37bba372d0c9cdc043ee" title=" " alt="" coords="446,908,613,950"/>
<area shape="rect" href="avic_8c.html#ad9345a779111a59de8fa4110106c3adf" title=" " alt="" coords="442,802,617,829"/>
<area shape="rect" href="x86_8c.html#aebdfa8be7e8542163f8396cf93a82398" title=" " alt="" coords="435,1182,623,1209"/>
<area shape="rect" href="irq_8c.html#a0ba50d6865653a9d307102d8f0b36630" title=" " alt="" coords="700,1208,856,1234"/>
<area shape="rect" href="i8259_8c.html#a20f0eb17c76875b81e91fd32b0badc04" title=" " alt="" coords="719,1056,837,1082"/>
<area shape="rect" href="i8259_8c.html#a1f534b69587aeb30f8853f3eb4a35071" title=" " alt="" coords="733,1106,823,1133"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="685,1259,871,1300"/>
<area shape="rect" href="pmu_8c.html#a03a16f548326b68245a4bf0555bea777" title=" " alt="" coords="693,1325,863,1352"/>
<area shape="rect" href="x86_8c.html#a130b6ed14cf18384646cb31251dd104e" title=" " alt="" coords="685,1376,871,1402"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="694,853,862,880"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="690,1426,866,1453"/>
</map>
</div>

</div>
</div>
<a id="a07d3e1e4090a62753325dfa11d232cea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07d3e1e4090a62753325dfa11d232cea">&#9670;&nbsp;</a></span>apic_x2apic_mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int apic_x2apic_mode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00221">221</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;{</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">return</span> apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_base &amp; X2APIC_ENABLE;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
<div class="ttc" id="astructkvm__lapic_html_a54741597d07b2792d2da72ea301ad648"><div class="ttname"><a href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">kvm_lapic::vcpu</a></div><div class="ttdeci">struct kvm_vcpu * vcpu</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00064">lapic.h:64</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a07d3e1e4090a62753325dfa11d232cea_icgraph.png" border="0" usemap="#alapic_8h_a07d3e1e4090a62753325dfa11d232cea_icgraph" alt=""/></div>
<map name="alapic_8h_a07d3e1e4090a62753325dfa11d232cea_icgraph" id="alapic_8h_a07d3e1e4090a62753325dfa11d232cea_icgraph">
<area shape="rect" title=" " alt="" coords="1495,670,1637,697"/>
<area shape="rect" href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1" title=" " alt="" coords="735,71,866,98"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="485,502,619,529"/>
<area shape="rect" href="avic_8c.html#a2af29a6a396bb757ac21f02f6aacfdfa" title=" " alt="" coords="1263,990,1415,1017"/>
<area shape="rect" href="avic_8c.html#a6a9ffca6bae1adce86d4495b5caaae2e" title=" " alt="" coords="979,877,1155,903"/>
<area shape="rect" href="avic_8c.html#a2ed13621ec3f14afbf47f129e43b496d" title=" " alt="" coords="1253,924,1424,965"/>
<area shape="rect" href="avic_8c.html#ad9345a779111a59de8fa4110106c3adf" title=" " alt="" coords="465,379,639,406"/>
<area shape="rect" href="avic_8c.html#a7cf9fdcdf4f5f6559c099faaab0c2d29" title=" " alt="" coords="697,341,904,367"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="475,807,629,848"/>
<area shape="rect" href="lapic_8c.html#a98bde25094c754b30e796357ba643ab0" title=" " alt="" coords="1261,417,1417,443"/>
<area shape="rect" href="lapic_8c.html#a870119cb74033f360164df90029af75a" title=" " alt="" coords="958,442,1177,469"/>
<area shape="rect" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6" title=" " alt="" coords="952,391,1183,418"/>
<area shape="rect" href="lapic_8c.html#abbce6da431ef5f15d85b5fc741d3ef72" title=" " alt="" coords="1234,1298,1443,1325"/>
<area shape="rect" href="lapic_8c.html#a8fb87d02d911e49b5793e391702afe7e" title=" " alt="" coords="1278,518,1399,545"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="994,670,1141,697"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="722,619,879,646"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="455,705,649,731"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="231,755,404,782"/>
<area shape="rect" href="lapic_8c.html#a5862d5df95ddd956a652f1dd3f319706" title=" " alt="" coords="1257,1142,1421,1169"/>
<area shape="rect" href="lapic_8c.html#a4b4d880305f2ddba0ac9fdb398a7611a" title=" " alt="" coords="1262,148,1415,189"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="991,97,1144,123"/>
<area shape="rect" href="lapic_8c.html#a179cfc2268db31f40b5bd9b1c247a37b" title=" " alt="" coords="467,173,637,199"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="736,1218,865,1245"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="1231,1041,1447,1067"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="1237,1091,1441,1118"/>
<area shape="rect" href="x86_8c.html#a384702aafa8cdbab3cf92b3d576bb6fb" title=" " alt="" coords="1247,1357,1430,1383"/>
<area shape="rect" href="avic_8c.html#a40f16bbe281410ac02865ea25c26bf12" title=" " alt="" coords="1007,1041,1127,1067"/>
<area shape="rect" href="avic_8c.html#a51356c24441683c197e1d4c2555da06d" title=" " alt="" coords="477,1041,627,1083"/>
<area shape="rect" href="svm_8c.html#aa3d3185c3eece1cf1e99fd5da3ca3181" title=" " alt="" coords="757,1091,844,1118"/>
<area shape="rect" href="avic_8c.html#affcdeac6765016e970e33d6ecff3eebb" title=" " alt="" coords="245,1041,389,1083"/>
<area shape="rect" href="avic_8c.html#ae9f162404fdb37bba372d0c9cdc043ee" title=" " alt="" coords="717,924,884,965"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="228,873,407,899"/>
<area shape="rect" href="avic_8c.html#aaff9720871b696bc298d89cbb27a6dc2" title=" " alt="" coords="979,931,1156,958"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="241,545,393,587"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="240,807,395,848"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="717,417,885,443"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="975,1295,1159,1336"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="719,670,883,697"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="471,654,633,681"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="481,603,623,630"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="247,705,387,731"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="5,755,180,782"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="991,1142,1144,1169"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="725,1167,877,1194"/>
<area shape="rect" href="vmx_8c.html#a60eaab2d29aa87878b8dd9b43dadb779" title=" " alt="" coords="973,148,1161,189"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="722,130,879,157"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="230,173,405,199"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="487,1218,617,1245"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="967,1091,1167,1118"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="999,1361,1136,1387"/>
</map>
</div>

</div>
</div>
<a id="a794ccadf351e1b46decb0755741b3eed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a794ccadf351e1b46decb0755741b3eed">&#9670;&nbsp;</a></span>DECLARE_STATIC_KEY_FALSE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DECLARE_STATIC_KEY_FALSE </td>
          <td>(</td>
          <td class="paramtype">kvm_has_noapic_vcpu&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8c6616d2cbae35632aa5debb15b552ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c6616d2cbae35632aa5debb15b552ec">&#9670;&nbsp;</a></span>kvm_alloc_apic_access_page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_alloc_apic_access_page </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02598">2598</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;{</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    <span class="keyword">struct </span>page *page;</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    <span class="keywordtype">void</span> __user *hva;</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160; </div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    mutex_lock(&amp;kvm-&gt;slots_lock);</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    <span class="keywordflow">if</span> (kvm-&gt;arch.apic_access_memslot_enabled ||</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;        kvm-&gt;arch.apic_access_memslot_inhibited)</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160; </div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    hva = <a class="code" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9">__x86_set_memory_region</a>(kvm, APIC_ACCESS_PAGE_PRIVATE_MEMSLOT,</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;                      APIC_DEFAULT_PHYS_BASE, PAGE_SIZE);</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;    <span class="keywordflow">if</span> (IS_ERR(hva)) {</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;        ret = PTR_ERR(hva);</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;    }</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160; </div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;    page = <a class="code" href="kvm__main_8c.html#a5132836c5be1763ca353ca2489a7fe23">gfn_to_page</a>(kvm, APIC_DEFAULT_PHYS_BASE &gt;&gt; PAGE_SHIFT);</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;    <span class="keywordflow">if</span> (is_error_page(page)) {</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;        ret = -EFAULT;</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;    }</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160; </div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;<span class="comment">     * Do not pin the page in memory, so that memory hot-unplug</span></div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;<span class="comment">     * is able to migrate it.</span></div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;    put_page(page);</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;    kvm-&gt;arch.apic_access_memslot_enabled = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;out:</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;    mutex_unlock(&amp;kvm-&gt;slots_lock);</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_a5132836c5be1763ca353ca2489a7fe23"><div class="ttname"><a href="kvm__main_8c.html#a5132836c5be1763ca353ca2489a7fe23">gfn_to_page</a></div><div class="ttdeci">struct page * gfn_to_page(struct kvm *kvm, gfn_t gfn)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l03126">kvm_main.c:3126</a></div></div>
<div class="ttc" id="ax86_8c_html_a0c0c5e35bc626e4140927bf15b4881f9"><div class="ttname"><a href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9">__x86_set_memory_region</a></div><div class="ttdeci">void __user * __x86_set_memory_region(struct kvm *kvm, int id, gpa_t gpa, u32 size)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l12637">x86.c:12637</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a8c6616d2cbae35632aa5debb15b552ec_cgraph.png" border="0" usemap="#alapic_8h_a8c6616d2cbae35632aa5debb15b552ec_cgraph" alt=""/></div>
<map name="alapic_8h_a8c6616d2cbae35632aa5debb15b552ec_cgraph" id="alapic_8h_a8c6616d2cbae35632aa5debb15b552ec_cgraph">
<area shape="rect" title=" " alt="" coords="5,847,219,874"/>
<area shape="rect" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9" title=" " alt="" coords="267,789,464,815"/>
<area shape="rect" href="kvm__main_8c.html#a5132836c5be1763ca353ca2489a7fe23" title=" " alt="" coords="314,873,417,899"/>
<area shape="rect" href="kvm__main_8c.html#ac76f506181e49aa4800bb202e11cb2b3" title=" " alt="" coords="518,569,721,595"/>
<area shape="rect" href="kvm__main_8c.html#ab790fe1e5bd86339acfc80a95efddf4c" title=" " alt="" coords="798,805,969,847"/>
<area shape="rect" href="kvm__main_8c.html#a8f5a06af032a1edb199b4ae393b2de8e" title=" " alt="" coords="775,282,992,309"/>
<area shape="rect" href="guest__memfd_8c.html#abaf64b8cb9e32ccb368d1d9c49d0bb02" title=" " alt="" coords="816,333,951,359"/>
<area shape="rect" href="guest__memfd_8c.html#a905ecfa162a290dceb1c7d5678e2a70f" title=" " alt="" coords="1597,703,1747,730"/>
<area shape="rect" href="kvm__main_8c.html#ac81a7d714d0668ccea6d0c2ddfd0fed5" title=" " alt="" coords="812,383,955,410"/>
<area shape="rect" href="guest__memfd_8c.html#a2eab57d9fb8529d3751b5c8179d881c9" title=" " alt="" coords="1864,703,2019,730"/>
<area shape="rect" href="kvm__main_8c.html#a52d56a5dc447602839375289b5bbffb2" title=" " alt="" coords="1321,282,1497,309"/>
<area shape="rect" href="kvm__main_8c.html#a05eed662dd45e4e4f7485e3158d95a3b" title=" " alt="" coords="1040,678,1259,705"/>
<area shape="rect" href="kvm__main_8c.html#a8c9bd99a64bbedb0930e29ed4dcc7897" title=" " alt="" coords="1067,231,1231,258"/>
<area shape="rect" href="kvm__main_8c.html#ac4ce014a99262ed5672a102c6d2ffdbd" title=" " alt="" coords="1067,383,1231,410"/>
<area shape="rect" href="kvm__main_8c.html#aae203bcd73cff0002aeddd37bea71323" title=" " alt="" coords="1315,130,1503,157"/>
<area shape="rect" href="kvm__main_8c.html#afdb5cea8958921b2ea9bd3a29cf9d7a6" title=" " alt="" coords="1069,181,1229,207"/>
<area shape="rect" href="kvm__main_8c.html#a6dd13a049fee9663450eebbf2ac16faa" title=" " alt="" coords="1064,477,1235,519"/>
<area shape="rect" href="kvm__main_8c.html#a192569033b972982f6b53e13666ef82b" title=" " alt="" coords="1046,333,1253,359"/>
<area shape="rect" href="kvm__main_8c.html#aa89329e461345f4a586065895ca072c6" title=" " alt="" coords="1845,391,2037,418"/>
<area shape="rect" href="kvm__main_8c.html#a115855e32d0da82706ba0bf22d90d8f1" title=" " alt="" coords="1587,282,1757,309"/>
<area shape="rect" href="kvm__main_8c.html#a6178ec8efee3ce8e53d84403b2a25401" title=" " alt="" coords="1567,189,1777,215"/>
<area shape="rect" href="kvm__main_8c.html#ada893d7e7d49d1023d23653b23944572" title=" " alt="" coords="1861,239,2022,266"/>
<area shape="rect" href="kvm__main_8c.html#a1a0266e85b304bdbde46a83f921d9606" title=" " alt="" coords="1836,189,2047,215"/>
<area shape="rect" href="kvm__main_8c.html#a578857fc65c8fabf9b425ff0b55a5fd3" title=" " alt="" coords="1860,290,2023,317"/>
<area shape="rect" href="kvm__main_8c.html#aa3b1664c58e5dab933e8659d884d56f3" title=" " alt="" coords="1855,341,2028,367"/>
<area shape="rect" href="x86_8c.html#ae7e25dec8e0af366fb3db41dc9881970" title=" " alt="" coords="1832,138,2051,165"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="1307,805,1512,847"/>
<area shape="rect" href="kvm__main_8c.html#aab592fb3a4d6204c86d8f99caa0986ba" title=" " alt="" coords="1573,653,1771,679"/>
<area shape="rect" href="kvm__main_8c.html#ae2d9291adcda0ba0f7a20350dabdd418" title=" " alt="" coords="1335,703,1484,730"/>
<area shape="rect" href="x86_8c.html#a5a34304a4f0ec19e4bce34e0513fc3a4" title=" " alt="" coords="1580,754,1764,781"/>
<area shape="rect" href="mmu_8c.html#a51621e034894e480342d3a5b48735d41" title=" " alt="" coords="1579,923,1765,964"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="1589,805,1755,847"/>
<area shape="rect" href="page__track_8h.html#ad39459f95333b39d77e1b95c99e492d8" title=" " alt="" coords="1567,871,1777,898"/>
<area shape="rect" href="mmu_8c.html#a58fe7b43995ae8c20c597e1bb9c4c007" title=" " alt="" coords="1581,123,1763,164"/>
<area shape="rect" href="kvm__main_8c.html#a31dbd36d8363fc2e5979b3976ebc0dbb" title=" " alt="" coords="1577,5,1767,47"/>
<area shape="rect" href="kvm__main_8c.html#aa87d0b55e37a312b7291fa9b5c83634c" title=" " alt="" coords="1595,71,1749,98"/>
<area shape="rect" href="mmu_8c.html#abd59fd9785b9b5676841e9706c1c6797" title=" " alt="" coords="1853,87,2030,114"/>
<area shape="rect" href="kvm__main_8c.html#a40ed7705420af10446677d1c99a0978e" title=" " alt="" coords="1320,434,1499,461"/>
<area shape="rect" href="x86_8c.html#a14568e065745512e03b3088070848289" title=" " alt="" coords="1307,536,1512,577"/>
<area shape="rect" href="dirty__ring_8c.html#a38d9bd671fa9181708075184e77eca3a" title=" " alt="" coords="1324,485,1495,511"/>
<area shape="rect" href="x86_8c.html#a1be4ac58e0429946d83b58f98bfe2301" title=" " alt="" coords="1560,543,1784,570"/>
<area shape="rect" href="kvm__main_8c.html#a055190afb6bce32ba87e7fea907ec1ec" title=" " alt="" coords="574,927,665,954"/>
<area shape="rect" href="kvm__main_8c.html#a99f99281cc81d5cd69f5825ccb8793b4" title=" " alt="" coords="512,873,727,899"/>
<area shape="rect" href="kvm__main_8c.html#a7c20e0f654f0b4472c3833f0a563e11e" title=" " alt="" coords="819,927,947,954"/>
<area shape="rect" href="kvm__main_8c.html#aa77d8fc2ee9fe5965c45f1d0989eb266" title=" " alt="" coords="805,986,961,1013"/>
<area shape="rect" href="kvm__main_8c.html#a63ec3e18db03a212e6e84391b5025689" title=" " alt="" coords="1064,987,1235,1014"/>
<area shape="rect" href="kvm__main_8c.html#ab58025ccc253a102c64561fa61c2a514" title=" " alt="" coords="1333,989,1485,1015"/>
<area shape="rect" href="kvm__main_8c.html#a77ec4b9140d69a05f3b4e7836cc03a96" title=" " alt="" coords="1591,989,1753,1015"/>
<area shape="rect" href="kvm__main_8c.html#adfbe9f59cac426f2ff01ab4fcfd631a7" title=" " alt="" coords="1362,1039,1457,1066"/>
<area shape="rect" href="kvm__main_8c.html#a6c7165822622ebbd29159771905bd317" title=" " alt="" coords="785,873,981,899"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a8c6616d2cbae35632aa5debb15b552ec_icgraph.png" border="0" usemap="#alapic_8h_a8c6616d2cbae35632aa5debb15b552ec_icgraph" alt=""/></div>
<map name="alapic_8h_a8c6616d2cbae35632aa5debb15b552ec_icgraph" id="alapic_8h_a8c6616d2cbae35632aa5debb15b552ec_icgraph">
<area shape="rect" title=" " alt="" coords="575,31,788,57"/>
<area shape="rect" href="avic_8c.html#aefc63eafb35c1efd94f6d53e7d0b20d5" title=" " alt="" coords="352,5,527,32"/>
<area shape="rect" href="vmx_8c.html#a426fe0cb3c7fd73b276f6815b6ab9ddc" title=" " alt="" coords="371,56,508,83"/>
<area shape="rect" href="avic_8c.html#a8e0a22138080054f4ac064064402f74a" title=" " alt="" coords="189,5,304,32"/>
<area shape="rect" href="svm_8c.html#a2af2f754ca7838a0253d54c33aae7d1e" title=" " alt="" coords="5,5,141,32"/>
</map>
</div>

</div>
</div>
<a id="a27836a2bcd51ebcfe2ca478e9ad7aa04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27836a2bcd51ebcfe2ca478e9ad7aa04">&#9670;&nbsp;</a></span>kvm_apic_accept_events()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_apic_accept_events </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03263">3263</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;{</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;    u8 <a class="code" href="structkvm__lapic.html#a9122fb8adbd131d159cb064fe6a3f01e">sipi_vector</a>;</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;    <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160; </div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a106127db5f69d94e5ea9d6d2982c23fd">kvm_apic_has_pending_init_or_sipi</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>))</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160; </div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="kvm__cache__regs_8h.html#afbcfc413ceedb460734eb5fd7c5c4fbc">is_guest_mode</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>)) {</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;        r = <a class="code" href="x86_8c.html#a52623517d65c58a92d84f08015198d20">kvm_check_nested_events</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;        <span class="keywordflow">if</span> (r &lt; 0)</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;            <span class="keywordflow">return</span> r == -EBUSY ? 0 : r;</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;<span class="comment">         * Continue processing INIT/SIPI even if a nested VM-Exit</span></div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;<span class="comment">         * occurred, e.g. pending SIPIs should be dropped if INIT+SIPI</span></div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;<span class="comment">         * are blocked as a result of transitioning to VMX root mode.</span></div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;    }</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160; </div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;<span class="comment">     * INITs are blocked while CPU is in specific states (SMM, VMX root</span></div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;<span class="comment">     * mode, SVM with GIF=0), while SIPIs are dropped if the CPU isn&#39;t in</span></div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;<span class="comment">     * wait-for-SIPI (WFS).</span></div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a58bae1ee856b1b5c5c44903c9f83a4f7">kvm_apic_init_sipi_allowed</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>)) {</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;        WARN_ON_ONCE(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.mp_state == KVM_MP_STATE_INIT_RECEIVED);</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;        clear_bit(<a class="code" href="lapic_8h.html#af7a4bf414bb99391b6c9e674d87cdc41">KVM_APIC_SIPI</a>, &amp;apic-&gt;<a class="code" href="structkvm__lapic.html#ade63c790c3a1363b7af1853b98bacf1a">pending_events</a>);</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;    }</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160; </div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;    <span class="keywordflow">if</span> (test_and_clear_bit(<a class="code" href="lapic_8h.html#a3b7d7d35c001fcefc23520569c5d81d7">KVM_APIC_INIT</a>, &amp;apic-&gt;<a class="code" href="structkvm__lapic.html#ade63c790c3a1363b7af1853b98bacf1a">pending_events</a>)) {</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;        <a class="code" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91">kvm_vcpu_reset</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="x86_8c.html#af6eb1db390415efc982dfd7701f0e619">kvm_vcpu_is_bsp</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>))</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;            <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.mp_state = KVM_MP_STATE_RUNNABLE;</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;            <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.mp_state = KVM_MP_STATE_INIT_RECEIVED;</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;    }</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;    <span class="keywordflow">if</span> (test_and_clear_bit(<a class="code" href="lapic_8h.html#af7a4bf414bb99391b6c9e674d87cdc41">KVM_APIC_SIPI</a>, &amp;apic-&gt;<a class="code" href="structkvm__lapic.html#ade63c790c3a1363b7af1853b98bacf1a">pending_events</a>)) {</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.mp_state == KVM_MP_STATE_INIT_RECEIVED) {</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;            <span class="comment">/* evaluate pending_events before reading the vector */</span></div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;            smp_rmb();</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;            <a class="code" href="structkvm__lapic.html#a9122fb8adbd131d159cb064fe6a3f01e">sipi_vector</a> = apic-&gt;<a class="code" href="structkvm__lapic.html#a9122fb8adbd131d159cb064fe6a3f01e">sipi_vector</a>;</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;            static_call(kvm_x86_vcpu_deliver_sipi_vector)(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, <a class="code" href="structkvm__lapic.html#a9122fb8adbd131d159cb064fe6a3f01e">sipi_vector</a>);</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;            <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.mp_state = KVM_MP_STATE_RUNNABLE;</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;        }</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;    }</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;}</div>
<div class="ttc" id="akvm__cache__regs_8h_html_afbcfc413ceedb460734eb5fd7c5c4fbc"><div class="ttname"><a href="kvm__cache__regs_8h.html#afbcfc413ceedb460734eb5fd7c5c4fbc">is_guest_mode</a></div><div class="ttdeci">static bool is_guest_mode(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__cache__regs_8h_source.html#l00226">kvm_cache_regs.h:226</a></div></div>
<div class="ttc" id="alapic_8h_html_a106127db5f69d94e5ea9d6d2982c23fd"><div class="ttname"><a href="lapic_8h.html#a106127db5f69d94e5ea9d6d2982c23fd">kvm_apic_has_pending_init_or_sipi</a></div><div class="ttdeci">static bool kvm_apic_has_pending_init_or_sipi(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00231">lapic.h:231</a></div></div>
<div class="ttc" id="alapic_8h_html_a3b7d7d35c001fcefc23520569c5d81d7"><div class="ttname"><a href="lapic_8h.html#a3b7d7d35c001fcefc23520569c5d81d7">KVM_APIC_INIT</a></div><div class="ttdeci">#define KVM_APIC_INIT</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00012">lapic.h:12</a></div></div>
<div class="ttc" id="alapic_8h_html_a58bae1ee856b1b5c5c44903c9f83a4f7"><div class="ttname"><a href="lapic_8h.html#a58bae1ee856b1b5c5c44903c9f83a4f7">kvm_apic_init_sipi_allowed</a></div><div class="ttdeci">static bool kvm_apic_init_sipi_allowed(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00236">lapic.h:236</a></div></div>
<div class="ttc" id="alapic_8h_html_af7a4bf414bb99391b6c9e674d87cdc41"><div class="ttname"><a href="lapic_8h.html#af7a4bf414bb99391b6c9e674d87cdc41">KVM_APIC_SIPI</a></div><div class="ttdeci">#define KVM_APIC_SIPI</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00013">lapic.h:13</a></div></div>
<div class="ttc" id="astructkvm__lapic_html"><div class="ttname"><a href="structkvm__lapic.html">kvm_lapic</a></div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00059">lapic.h:59</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_a9122fb8adbd131d159cb064fe6a3f01e"><div class="ttname"><a href="structkvm__lapic.html#a9122fb8adbd131d159cb064fe6a3f01e">kvm_lapic::sipi_vector</a></div><div class="ttdeci">unsigned int sipi_vector</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00082">lapic.h:82</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_ade63c790c3a1363b7af1853b98bacf1a"><div class="ttname"><a href="structkvm__lapic.html#ade63c790c3a1363b7af1853b98bacf1a">kvm_lapic::pending_events</a></div><div class="ttdeci">unsigned long pending_events</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00081">lapic.h:81</a></div></div>
<div class="ttc" id="ax86_8c_html_a2694456104c02a7204796d89d13a1e91"><div class="ttname"><a href="x86_8c.html#a2694456104c02a7204796d89d13a1e91">kvm_vcpu_reset</a></div><div class="ttdeci">void kvm_vcpu_reset(struct kvm_vcpu *vcpu, bool init_event)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l12224">x86.c:12224</a></div></div>
<div class="ttc" id="ax86_8c_html_a52623517d65c58a92d84f08015198d20"><div class="ttname"><a href="x86_8c.html#a52623517d65c58a92d84f08015198d20">kvm_check_nested_events</a></div><div class="ttdeci">int kvm_check_nested_events(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l10197">x86.c:10197</a></div></div>
<div class="ttc" id="ax86_8c_html_af6eb1db390415efc982dfd7701f0e619"><div class="ttname"><a href="x86_8c.html#af6eb1db390415efc982dfd7701f0e619">kvm_vcpu_is_bsp</a></div><div class="ttdeci">bool kvm_vcpu_is_bsp(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l12493">x86.c:12493</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a27836a2bcd51ebcfe2ca478e9ad7aa04_cgraph.png" border="0" usemap="#alapic_8h_a27836a2bcd51ebcfe2ca478e9ad7aa04_cgraph" alt=""/></div>
<map name="alapic_8h_a27836a2bcd51ebcfe2ca478e9ad7aa04_cgraph" id="alapic_8h_a27836a2bcd51ebcfe2ca478e9ad7aa04_cgraph">
<area shape="rect" title=" " alt="" coords="5,653,192,679"/>
<area shape="rect" href="kvm__cache__regs_8h.html#afbcfc413ceedb460734eb5fd7c5c4fbc" title=" " alt="" coords="524,175,644,202"/>
<area shape="rect" href="lapic_8h.html#a106127db5f69d94e5ea9d6d2982c23fd" title=" " alt="" coords="252,99,427,140"/>
<area shape="rect" href="lapic_8h.html#a58bae1ee856b1b5c5c44903c9f83a4f7" title=" " alt="" coords="268,421,411,463"/>
<area shape="rect" href="x86_8c.html#a52623517d65c58a92d84f08015198d20" title=" " alt="" coords="240,733,439,759"/>
<area shape="rect" href="x86_8c.html#af6eb1db390415efc982dfd7701f0e619" title=" " alt="" coords="271,783,408,810"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="275,682,404,709"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1003,87,1122,114"/>
<area shape="rect" href="smm_8h.html#aa0d6bb14bef67edc441fccd36d205a67" title=" " alt="" coords="547,226,621,253"/>
<area shape="rect" href="x86_8c.html#ad0df6b04ae08eb6eec89da2d81e465cd" title=" " alt="" coords="522,783,646,810"/>
<area shape="rect" href="x86_8c.html#a8543429a9ca5c6d3d88560ccd84bbccd" title=" " alt="" coords="525,834,643,861"/>
<area shape="rect" href="x86_8c.html#ad850a917f349195334a4ef07b53ca379" title=" " alt="" coords="487,885,681,911"/>
<area shape="rect" href="async__pf_8c.html#ad351bddfe80f107dfc95c6ab2768fe4f" title=" " alt="" coords="507,936,661,977"/>
<area shape="rect" href="x86_8h.html#acdc826b0cd2ce8b958a826c8faa306b4" title=" " alt="" coords="503,1001,665,1043"/>
<area shape="rect" href="x86_8h.html#a9dbf3d5bc7a0735443e0e21e00802160" title=" " alt="" coords="507,1067,661,1108"/>
<area shape="rect" href="cpuid_8c.html#aae0475609eefc48bb151ef5a631670c0" title=" " alt="" coords="501,1133,667,1159"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="519,277,649,303"/>
<area shape="rect" href="x86_8c.html#ab8771c02486ef5edb9fe0008df56ce1a" title=" " alt="" coords="511,1183,657,1210"/>
<area shape="rect" href="x86_8c.html#a5a8141aa63a4bf45916d2adeab6504a1" title=" " alt="" coords="505,1234,663,1261"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="490,1285,678,1311"/>
<area shape="rect" href="x86_8h.html#a5523aac5838b664e939f6560ae882d9e" title=" " alt="" coords="505,1335,663,1362"/>
<area shape="rect" href="x86_8c.html#aca7d72d338b3f1e73445d7b2ed0b1673" title=" " alt="" coords="509,1386,659,1413"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a66188c5384cbd688acd880f8de16fbff" title=" " alt="" coords="527,327,641,354"/>
<area shape="rect" href="kvm__cache__regs_8h.html#aa80de2ba11d877ef825788b0c9768378" title=" " alt="" coords="527,378,641,405"/>
<area shape="rect" href="kvm__cache__regs_8h.html#ad479d598f0b5de90bd6062237ccb9eba" title=" " alt="" coords="527,429,641,455"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a0f6830d8a03ec49d8ac457e2a9c1d687" title=" " alt="" coords="491,479,677,506"/>
<area shape="rect" href="kvm__cache__regs_8h.html#aa70071fd3a98f236b0b57a30cbec124f" title=" " alt="" coords="527,530,641,557"/>
<area shape="rect" href="x86_8c.html#a12826c3f941e4dbf381d4d085ce42110" title=" " alt="" coords="523,581,645,607"/>
<area shape="rect" href="x86_8c.html#a7f55b680840b47f6503d94801f44f2d0" title=" " alt="" coords="507,631,661,658"/>
<area shape="rect" href="x86_8c.html#afed36c545d27cca59caddf31fdfd054a" title=" " alt="" coords="519,682,649,709"/>
<area shape="rect" href="x86_8c.html#a2ed72da9144cd3c6d136a2ce6e1a76cb" title=" " alt="" coords="521,733,647,759"/>
<area shape="rect" href="cpuid_8h.html#ad8c2a90f2f099af1d7ca23750d9d2eb9" title=" " alt="" coords="997,315,1128,342"/>
<area shape="rect" href="cpuid_8h.html#aa35dee13971a1366be933e974552a02d" title=" " alt="" coords="757,721,912,747"/>
<area shape="rect" href="x86_8h.html#af9a5d53e18d888ed043578916e51cc55" title=" " alt="" coords="743,822,927,849"/>
<area shape="rect" href="x86_8h.html#af360aa7bd1f33ab25089b12431f11773" title=" " alt="" coords="988,797,1137,823"/>
<area shape="rect" href="cpuid_8c.html#a537512099e11c7ab0553aeae5e38d9ea" title=" " alt="" coords="733,873,936,899"/>
<area shape="rect" href="async__pf_8c.html#a5b03475159778ff1b6a78dbbfc913a01" title=" " alt="" coords="758,936,911,977"/>
<area shape="rect" href="cpuid_8c.html#a7220f0f9a6d0047aef7619e272fa9518" title=" " alt="" coords="766,1133,903,1159"/>
<area shape="rect" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1" title=" " alt="" coords="729,87,940,114"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="779,138,890,165"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="769,645,900,671"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="990,594,1135,621"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="770,239,899,266"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="763,290,906,317"/>
<area shape="rect" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4" title=" " alt="" coords="766,341,903,367"/>
<area shape="rect" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554" title=" " alt="" coords="767,391,903,418"/>
<area shape="rect" href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf" title=" " alt="" coords="751,189,918,215"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="748,442,921,469"/>
<area shape="rect" href="lapic_8c.html#a5468339c2df08ca538b77d4d48915c35" title=" " alt="" coords="745,493,924,519"/>
<area shape="rect" href="x86_8h.html#adf8330176a8805826ed4711a51ce93cf" title=" " alt="" coords="751,37,918,63"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a27836a2bcd51ebcfe2ca478e9ad7aa04_icgraph.png" border="0" usemap="#alapic_8h_a27836a2bcd51ebcfe2ca478e9ad7aa04_icgraph" alt=""/></div>
<map name="alapic_8h_a27836a2bcd51ebcfe2ca478e9ad7aa04_icgraph" id="alapic_8h_a27836a2bcd51ebcfe2ca478e9ad7aa04_icgraph">
<area shape="rect" title=" " alt="" coords="804,97,991,123"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="412,5,571,47"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,71,364,98"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="640,122,735,149"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="619,173,756,199"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,46,129,73"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="451,122,532,149"/>
</map>
</div>

</div>
</div>
<a id="a1f4df169625f9c4c2cb06f7443698af4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f4df169625f9c4c2cb06f7443698af4">&#9670;&nbsp;</a></span>kvm_apic_accept_pic_intr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_apic_accept_pic_intr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02872">2872</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;{</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;    u32 lvt0 = <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(vcpu-&gt;arch.apic, APIC_LVT0);</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160; </div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4">kvm_apic_hw_enabled</a>(vcpu-&gt;arch.apic))</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;    <span class="keywordflow">if</span> ((lvt0 &amp; APIC_LVT_MASKED) == 0 &amp;&amp;</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;        GET_APIC_DELIVERY_MODE(lvt0) == APIC_MODE_EXTINT)</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;}</div>
<div class="ttc" id="alapic_8h_html_a1d8660ecbda996b11b10b179013e52d4"><div class="ttname"><a href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4">kvm_apic_hw_enabled</a></div><div class="ttdeci">static bool kvm_apic_hw_enabled(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00195">lapic.h:195</a></div></div>
<div class="ttc" id="alapic_8h_html_a8cd1df8b4c079c23a522d09c964da0ee"><div class="ttname"><a href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a></div><div class="ttdeci">static u32 kvm_lapic_get_reg(struct kvm_lapic *apic, int reg_off)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00179">lapic.h:179</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a1f4df169625f9c4c2cb06f7443698af4_cgraph.png" border="0" usemap="#alapic_8h_a1f4df169625f9c4c2cb06f7443698af4_cgraph" alt=""/></div>
<map name="alapic_8h_a1f4df169625f9c4c2cb06f7443698af4_cgraph" id="alapic_8h_a1f4df169625f9c4c2cb06f7443698af4_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,196,57"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="244,5,415,32"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="257,56,402,83"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="463,56,621,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a1f4df169625f9c4c2cb06f7443698af4_icgraph.png" border="0" usemap="#alapic_8h_a1f4df169625f9c4c2cb06f7443698af4_icgraph" alt=""/></div>
<map name="alapic_8h_a1f4df169625f9c4c2cb06f7443698af4_icgraph" id="alapic_8h_a1f4df169625f9c4c2cb06f7443698af4_icgraph">
<area shape="rect" title=" " alt="" coords="2232,354,2423,381"/>
<area shape="rect" href="x86_8c.html#aebdfa8be7e8542163f8396cf93a82398" title=" " alt="" coords="1179,151,1367,178"/>
<area shape="rect" href="irq_8c.html#a0ba50d6865653a9d307102d8f0b36630" title=" " alt="" coords="1445,335,1601,362"/>
<area shape="rect" href="i8259_8c.html#a20f0eb17c76875b81e91fd32b0badc04" title=" " alt="" coords="1697,481,1814,507"/>
<area shape="rect" href="i8259_8c.html#a1f534b69587aeb30f8853f3eb4a35071" title=" " alt="" coords="2093,810,2184,837"/>
<area shape="rect" href="x86_8c.html#a05909279b3ddd330600a9c5d506c85da" title=" " alt="" coords="460,5,619,47"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="471,71,608,98"/>
<area shape="rect" href="x86_8c.html#aced999ac2c84f5838ddf0279cbf4c8e7" title=" " alt="" coords="240,13,392,39"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="275,63,357,90"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="5,38,192,65"/>
<area shape="rect" href="irq_8c.html#a0fe12d1697f3fa0b54c4a62c7be020e9" title=" " alt="" coords="1196,506,1351,533"/>
<area shape="rect" href="irq_8c.html#a82ee83566d2724a298b67f23f481976b" title=" " alt="" coords="1168,335,1379,362"/>
<area shape="rect" href="irq_8c.html#ae3151f072a1bb4a732ee3854ab6cf619" title=" " alt="" coords="1186,443,1361,470"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="935,586,1107,613"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="695,469,866,511"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="703,586,858,613"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="440,561,639,587"/>
<area shape="rect" href="svm_8c.html#a5c26f1ceaa6cc778d986bd33629dc539" title=" " alt="" coords="971,266,1072,293"/>
<area shape="rect" href="svm_8c.html#a4a2beb03d1ef1d9e803c22570b5806d1" title=" " alt="" coords="715,114,846,141"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="691,165,870,191"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="462,342,617,369"/>
<area shape="rect" href="svm_8c.html#a0a2c47b46c5f4c14c1ae6a64119bcb60" title=" " alt="" coords="715,215,846,242"/>
<area shape="rect" href="svm_8c.html#a5df90c8772700a60441f2ba19472f726" title=" " alt="" coords="725,317,836,343"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="697,266,865,293"/>
<area shape="rect" href="x86_8c.html#a54ec69b24c80207e4e6122994db0a466" title=" " alt="" coords="936,418,1107,445"/>
<area shape="rect" href="svm_2nested_8c.html#a3286f29b650004d599595557d310136e" title=" " alt="" coords="923,469,1120,495"/>
<area shape="rect" href="x86_8c.html#a951bd40e58d87204d565c6cb5fc664e6" title=" " alt="" coords="687,418,875,445"/>
<area shape="rect" href="i8259_8c.html#a23bf40906f1f0a0a84ce4af0956a8b2a" title=" " alt="" coords="1459,633,1586,659"/>
<area shape="rect" href="i8259_8c.html#ad3cc418e9d82e9cca43e01425f76b366" title=" " alt="" coords="1221,781,1326,807"/>
<area shape="rect" href="i8259_8c.html#a1dc9bd64afa719e7b8253ee3db6fa85b" title=" " alt="" coords="953,730,1089,757"/>
<area shape="rect" href="i8259_8c.html#af278e56bd6082ee3f6573cf2e4f23543" title=" " alt="" coords="942,781,1101,807"/>
<area shape="rect" href="i8259_8c.html#a64b171826283830f6a0b3ed866b7931c" title=" " alt="" coords="948,831,1095,858"/>
<area shape="rect" href="i8259_8c.html#a4fef735273cc243ab0c60985526cf753" title=" " alt="" coords="1899,937,2038,963"/>
<area shape="rect" href="i8259_8c.html#a6f84274a6b9f1ae6381e9e5f413dd481" title=" " alt="" coords="1454,506,1591,533"/>
<area shape="rect" href="i8259_8c.html#a1488ed2670af0e636f7384f69e1894a9" title=" " alt="" coords="1905,1013,2033,1039"/>
<area shape="rect" href="i8259_8c.html#a6620b725f8a47ecc7341e68ca3660df5" title=" " alt="" coords="1892,886,2045,913"/>
<area shape="rect" href="i8259_8c.html#a72eab34ac8b4a80698a92f06b8afe71e" title=" " alt="" coords="1917,582,2020,609"/>
<area shape="rect" href="i8259_8c.html#a1484dfc37fa586b115d6645c7dcc88b2" title=" " alt="" coords="1918,759,2019,786"/>
<area shape="rect" href="irq__comm_8c.html#affd624d06afb4fc277fb7a08e06bd942" title=" " alt="" coords="1667,937,1844,963"/>
<area shape="rect" href="i8254_8c.html#a13a38debbd4e494ffd488ef8abb5406c" title=" " alt="" coords="1461,937,1584,963"/>
<area shape="rect" href="i8254_8c.html#a2a7ca7f5194b378ba7f0ae7a38cc26ba" title=" " alt="" coords="1469,987,1577,1014"/>
<area shape="rect" href="x86_8c.html#a10224987f77e7370dd9f2b80352544ab" title=" " alt="" coords="1199,911,1348,938"/>
<area shape="rect" href="irq__comm_8c.html#a1a4786be0e9713da805fb63743a7f340" title=" " alt="" coords="1691,1013,1819,1039"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="1437,1038,1609,1065"/>
<area shape="rect" href="x86_8c.html#a9c81b1b4617fffe8115b748bf5f13860" title=" " alt="" coords="1427,886,1619,913"/>
<area shape="rect" href="i8259_8c.html#a1ba411d40431f30cb5876e8a911e65a0" title=" " alt="" coords="1711,531,1799,558"/>
<area shape="rect" href="i8259_8c.html#adf97ac474f6610c461ba9cfad24f315a" title=" " alt="" coords="1701,582,1809,609"/>
<area shape="rect" href="i8259_8c.html#a90b8b13ef894f381c91ad0a92ef4b2c9" title=" " alt="" coords="1689,683,1821,710"/>
<area shape="rect" href="i8259_8c.html#ac8a7faf6a5b5c72ce0ecf20f7beda6ba" title=" " alt="" coords="1678,734,1833,761"/>
<area shape="rect" href="i8259_8c.html#a6dcc0815ffa7a5cc6aa28327488d8f82" title=" " alt="" coords="1684,785,1827,811"/>
</map>
</div>

</div>
</div>
<a id="a200be826b3634c1b5a377464f35d540f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a200be826b3634c1b5a377464f35d540f">&#9670;&nbsp;</a></span>kvm_apic_after_set_mcg_cap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_apic_after_set_mcg_cap </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00596">596</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;{</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordtype">int</span> nr_lvt_entries = <a class="code" href="lapic_8c.html#a6426046939a33f96b6df7b185cafb171">kvm_apic_calc_nr_lvt_entries</a>(vcpu);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>) || <a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a> == apic-&gt;<a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a>)</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="comment">/* Initialize/mask any &quot;new&quot; LVT entries. */</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keywordflow">for</span> (i = apic-&gt;<a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a>; i &lt; <a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a>; i++)</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, <a class="code" href="lapic_8h.html#ae54f52b3c96453d38d44e36bc8d3c00c">APIC_LVTx</a>(i), APIC_LVT_MASKED);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a> = <a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160; </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="comment">/* The number of LVT entries is reflected in the version register. */</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <a class="code" href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf">kvm_apic_set_version</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a6426046939a33f96b6df7b185cafb171"><div class="ttname"><a href="lapic_8c.html#a6426046939a33f96b6df7b185cafb171">kvm_apic_calc_nr_lvt_entries</a></div><div class="ttdeci">static int kvm_apic_calc_nr_lvt_entries(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00568">lapic.c:568</a></div></div>
<div class="ttc" id="alapic_8c_html_aaa6716cc0b30bec513d223fbfdecfdcf"><div class="ttname"><a href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf">kvm_apic_set_version</a></div><div class="ttdeci">void kvm_apic_set_version(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00573">lapic.c:573</a></div></div>
<div class="ttc" id="alapic_8c_html_ab2ee275fa1bc17aa0bfde435723b8f48"><div class="ttname"><a href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a></div><div class="ttdeci">static void kvm_lapic_set_reg(struct kvm_lapic *apic, int reg_off, u32 val)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00077">lapic.c:77</a></div></div>
<div class="ttc" id="alapic_8h_html_a1d8c9378fcbf62390a89dc3b7f0bdbd4"><div class="ttname"><a href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a></div><div class="ttdeci">static bool lapic_in_kernel(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00186">lapic.h:186</a></div></div>
<div class="ttc" id="alapic_8h_html_ae54f52b3c96453d38d44e36bc8d3c00c"><div class="ttname"><a href="lapic_8h.html#ae54f52b3c96453d38d44e36bc8d3c00c">APIC_LVTx</a></div><div class="ttdeci">#define APIC_LVTx(x)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00044">lapic.h:44</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_ae2b24a1af6e2a89bda594f08d3382267"><div class="ttname"><a href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">kvm_lapic::nr_lvt_entries</a></div><div class="ttdeci">int nr_lvt_entries</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00083">lapic.h:83</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a200be826b3634c1b5a377464f35d540f_cgraph.png" border="0" usemap="#alapic_8h_a200be826b3634c1b5a377464f35d540f_cgraph" alt=""/></div>
<map name="alapic_8h_a200be826b3634c1b5a377464f35d540f_cgraph" id="alapic_8h_a200be826b3634c1b5a377464f35d540f_cgraph">
<area shape="rect" title=" " alt="" coords="5,162,155,203"/>
<area shape="rect" href="lapic_8c.html#a6426046939a33f96b6df7b185cafb171" title=" " alt="" coords="205,78,367,119"/>
<area shape="rect" href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf" title=" " alt="" coords="203,144,369,171"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="417,195,561,221"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="430,245,549,272"/>
<area shape="rect" href="cpuid_8h.html#ad8c2a90f2f099af1d7ca23750d9d2eb9" title=" " alt="" coords="424,93,555,120"/>
<area shape="rect" href="ioapic_8h.html#a5efb8a822bd7119cfc8db075f12bf452" title=" " alt="" coords="426,144,553,171"/>
<area shape="rect" href="reverse__cpuid_8h.html#aeac4cdaa1c8b53f46ea791f355b1d08c" title=" " alt="" coords="873,5,980,32"/>
<area shape="rect" href="cpuid_8h.html#af2af2645f203b5d9bad2088af0da5c1e" title=" " alt="" coords="609,93,795,120"/>
<area shape="rect" href="reverse__cpuid_8h.html#a76ac51b62ef170b755204cb8b958e585" title=" " alt="" coords="1265,56,1413,83"/>
<area shape="rect" href="reverse__cpuid_8h.html#ae10c1644e90cb8443e5a32554acfd700" title=" " alt="" coords="1059,56,1217,83"/>
<area shape="rect" href="reverse__cpuid_8h.html#adf3299d46978c685ba9b46ebb1536680" title=" " alt="" coords="843,56,1011,83"/>
<area shape="rect" href="cpuid_8h.html#a638557b30255883157acafa55a351d0d" title=" " alt="" coords="844,158,1009,199"/>
<area shape="rect" href="reverse__cpuid_8h.html#a3f7e53c68e5610be44d760fd4854f892" title=" " alt="" coords="855,107,998,133"/>
<area shape="rect" href="cpuid_8c.html#a7220f0f9a6d0047aef7619e272fa9518" title=" " alt="" coords="1069,165,1207,192"/>
<area shape="rect" href="reverse__cpuid_8h.html#a8f6dc89865c6af98e621e1ddcf401cae" title=" " alt="" coords="1081,107,1195,133"/>
<area shape="rect" href="irq_8h.html#aeedc8b3b9e709414b2db2436224b75e8" title=" " alt="" coords="645,144,759,171"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="623,195,781,221"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a200be826b3634c1b5a377464f35d540f_icgraph.png" border="0" usemap="#alapic_8h_a200be826b3634c1b5a377464f35d540f_icgraph" alt=""/></div>
<map name="alapic_8h_a200be826b3634c1b5a377464f35d540f_icgraph" id="alapic_8h_a200be826b3634c1b5a377464f35d540f_icgraph">
<area shape="rect" title=" " alt="" coords="587,5,736,47"/>
<area shape="rect" href="x86_8c.html#a10dfde66dc94e352514570cc4a2beaa2" title=" " alt="" coords="384,5,539,47"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,13,336,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="ad608730f208932f64d2c98c762fce85c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad608730f208932f64d2c98c762fce85c">&#9670;&nbsp;</a></span>kvm_apic_clear_irr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_apic_clear_irr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00738">738</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;{</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <a class="code" href="lapic_8c.html#ad2b5e2187414c65e1a5876e641fee3fc">apic_clear_irr</a>(vec, vcpu-&gt;arch.apic);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_ad2b5e2187414c65e1a5876e641fee3fc"><div class="ttname"><a href="lapic_8c.html#ad2b5e2187414c65e1a5876e641fee3fc">apic_clear_irr</a></div><div class="ttdeci">static void apic_clear_irr(int vec, struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00723">lapic.c:723</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_ad608730f208932f64d2c98c762fce85c_cgraph.png" border="0" usemap="#alapic_8h_ad608730f208932f64d2c98c762fce85c_cgraph" alt=""/></div>
<map name="alapic_8h_ad608730f208932f64d2c98c762fce85c_cgraph" id="alapic_8h_ad608730f208932f64d2c98c762fce85c_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,151,83"/>
<area shape="rect" href="lapic_8c.html#ad2b5e2187414c65e1a5876e641fee3fc" title=" " alt="" coords="199,56,308,83"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="366,5,522,32"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="580,31,700,57"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="356,107,532,133"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="748,31,897,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_ad608730f208932f64d2c98c762fce85c_icgraph.png" border="0" usemap="#alapic_8h_ad608730f208932f64d2c98c762fce85c_icgraph" alt=""/></div>
<map name="alapic_8h_ad608730f208932f64d2c98c762fce85c_icgraph" id="alapic_8h_ad608730f208932f64d2c98c762fce85c_icgraph">
<area shape="rect" title=" " alt="" coords="768,31,913,57"/>
<area shape="rect" href="vmx_2nested_8c.html#add1e82c32385142c0fca04a1db8cbc3a" title=" " alt="" coords="589,31,720,57"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fecee9010894e3a1513a0924e24dd6" title=" " alt="" coords="401,5,539,32"/>
<area shape="rect" href="vmx_2nested_8c.html#a23e3de8c964e87404eea818be6f70154" title=" " alt="" coords="399,56,541,83"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="180,23,351,65"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="5,31,132,57"/>
</map>
</div>

</div>
</div>
<a id="a47d52843df792ef8e7bffdfb66a3b40b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47d52843df792ef8e7bffdfb66a3b40b">&#9670;&nbsp;</a></span>kvm_apic_compare_prio()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_apic_compare_prio </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01432">1432</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;{</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="keywordflow">return</span> vcpu1-&gt;arch.apic_arb_prio - vcpu2-&gt;arch.apic_arb_prio;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a47d52843df792ef8e7bffdfb66a3b40b_icgraph.png" border="0" usemap="#alapic_8h_a47d52843df792ef8e7bffdfb66a3b40b_icgraph" alt=""/></div>
<map name="alapic_8h_a47d52843df792ef8e7bffdfb66a3b40b_icgraph" id="alapic_8h_a47d52843df792ef8e7bffdfb66a3b40b_icgraph">
<area shape="rect" title=" " alt="" coords="2064,516,2245,543"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="1832,538,2016,579"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1388,455,1577,481"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="1625,506,1784,547"/>
<area shape="rect" href="lapic_8c.html#a8620b1c89f8cf017f7827024fc95ac92" title=" " alt="" coords="1633,571,1777,613"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="1627,658,1782,699"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="919,107,1077,133"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="676,81,823,108"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="1391,579,1574,605"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="1179,627,1311,653"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="1169,576,1320,603"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="923,639,1073,665"/>
<area shape="rect" href="irq__comm_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="897,795,1099,821"/>
<area shape="rect" href="xen_8c.html#a7ba53f4f869b74569192380f1adfd40c" title=" " alt="" coords="1401,678,1564,719"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="1187,208,1302,235"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="1171,460,1318,487"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="1164,521,1325,548"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1190,385,1299,412"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="1191,56,1298,83"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="942,259,1054,285"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="895,157,1101,184"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="895,208,1101,235"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="668,233,831,260"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="675,284,823,311"/>
<area shape="rect" href="ioapic_8c.html#a477f1b98bf8d9dfcd1e51c743d79ac47" title=" " alt="" coords="453,233,577,260"/>
<area shape="rect" href="irq__comm_8c.html#ae12bd4085acdb92be18af95ac983d5a5" title=" " alt="" coords="441,284,589,311"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="205,309,377,336"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="5,309,157,336"/>
<area shape="rect" href="ioapic_8c.html#a21c528e901ef596bba3f882ed5ac9597" title=" " alt="" coords="687,132,812,159"/>
<area shape="rect" href="x86_8c.html#a10224987f77e7370dd9f2b80352544ab" title=" " alt="" coords="440,132,589,159"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="661,183,837,209"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="433,183,596,209"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="439,429,591,470"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="919,487,1077,513"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="916,537,1080,564"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="682,436,817,463"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="652,537,847,564"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="669,588,830,615"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="678,487,821,513"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="425,537,604,564"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="672,639,827,681"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="909,588,1087,615"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="901,385,1095,412"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="915,56,1081,83"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="927,5,1069,32"/>
<area shape="rect" href="hyperv_8c.html#a3bfbf343eefc11963b210ba8322f6826" title=" " alt="" coords="681,5,818,32"/>
<area shape="rect" href="xen_8c.html#a0fb0356e88890003922daf35627420a8" title=" " alt="" coords="1153,678,1336,719"/>
<area shape="rect" href="xen_8c.html#a48738df3c98025631e2412d90758136c" title=" " alt="" coords="1149,744,1340,771"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="957,689,1039,716"/>
<area shape="rect" href="xen_8c.html#a59091fb436633f85ba3e28187f5794d0" title=" " alt="" coords="919,744,1077,771"/>
</map>
</div>

</div>
</div>
<a id="a623f02f0875b0883fd65e82c565c9a18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a623f02f0875b0883fd65e82c565c9a18">&#9670;&nbsp;</a></span>kvm_apic_get_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_apic_get_state </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_lapic_state *&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02970">2970</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;{</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;    memcpy(s-&gt;regs, vcpu-&gt;arch.apic-&gt;regs, <span class="keyword">sizeof</span>(*s));</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160; </div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;<span class="comment">     * Get calculated timer current count for remaining timer period (if</span></div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;<span class="comment">     * any) and store it in the returned register set.</span></div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;    <a class="code" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e">__kvm_lapic_set_reg</a>(s-&gt;regs, APIC_TMCCT,</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;                <a class="code" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3">__apic_read</a>(vcpu-&gt;arch.apic, APIC_TMCCT));</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160; </div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#a5862d5df95ddd956a652f1dd3f319706">kvm_apic_state_fixup</a>(vcpu, s, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a5862d5df95ddd956a652f1dd3f319706"><div class="ttname"><a href="lapic_8c.html#a5862d5df95ddd956a652f1dd3f319706">kvm_apic_state_fixup</a></div><div class="ttdeci">static int kvm_apic_state_fixup(struct kvm_vcpu *vcpu, struct kvm_lapic_state *s, bool set)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02932">lapic.c:2932</a></div></div>
<div class="ttc" id="alapic_8c_html_a5de365e734b929b65e2d75f62cea6f7e"><div class="ttname"><a href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e">__kvm_lapic_set_reg</a></div><div class="ttdeci">static void __kvm_lapic_set_reg(char *regs, int reg_off, u32 val)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00072">lapic.c:72</a></div></div>
<div class="ttc" id="alapic_8c_html_a834f2a3187924d07d18afb6b8d6645f3"><div class="ttname"><a href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3">__apic_read</a></div><div class="ttdeci">static u32 __apic_read(struct kvm_lapic *apic, unsigned int offset)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01566">lapic.c:1566</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a623f02f0875b0883fd65e82c565c9a18_cgraph.png" border="0" usemap="#alapic_8h_a623f02f0875b0883fd65e82c565c9a18_cgraph" alt=""/></div>
<map name="alapic_8h_a623f02f0875b0883fd65e82c565c9a18_cgraph" id="alapic_8h_a623f02f0875b0883fd65e82c565c9a18_cgraph">
<area shape="rect" title=" " alt="" coords="5,176,159,202"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="207,176,305,202"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="989,160,1147,186"/>
<area shape="rect" href="lapic_8c.html#a5862d5df95ddd956a652f1dd3f319706" title=" " alt="" coords="760,328,924,354"/>
<area shape="rect" href="lapic_8c.html#a5bf640da1dfc1be09d89fb23c7f2e954" title=" " alt="" coords="576,226,697,253"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="769,261,915,288"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="353,226,513,253"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="369,125,498,152"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="365,66,502,93"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="989,261,1147,288"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="565,176,708,202"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="565,110,708,151"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="763,210,921,237"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="770,160,914,186"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1234,160,1383,186"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="764,109,920,136"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="1008,109,1128,136"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="561,58,712,85"/>
<area shape="rect" href="kvm__cache__regs_8h.html#ad97ff6b975b461b815e6749d29c65446" title=" " alt="" coords="787,58,897,85"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a5d9eb0563cffb1e3ed1cccebabcf2df6" title=" " alt="" coords="981,58,1155,85"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="1212,58,1405,85"/>
<area shape="rect" href="lapic_8c.html#aa06cb4ebbfa40dbfa494b3b4cd9f8833" title=" " alt="" coords="981,464,1155,490"/>
<area shape="rect" href="lapic_8c.html#a39839decdbbb9e8a6718f3ac7c0b3707" title=" " alt="" coords="981,312,1155,338"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="997,362,1139,389"/>
<area shape="rect" href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f" title=" " alt="" coords="972,413,1164,440"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a623f02f0875b0883fd65e82c565c9a18_icgraph.png" border="0" usemap="#alapic_8h_a623f02f0875b0883fd65e82c565c9a18_icgraph" alt=""/></div>
<map name="alapic_8h_a623f02f0875b0883fd65e82c565c9a18_icgraph" id="alapic_8h_a623f02f0875b0883fd65e82c565c9a18_icgraph">
<area shape="rect" title=" " alt="" coords="584,13,737,39"/>
<area shape="rect" href="x86_8c.html#aca5ab82fb669f6a99e011293efed0d5d" title=" " alt="" coords="384,5,536,47"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,13,336,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="aa421165466ac455ff3fff91fb9afe7bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa421165466ac455ff3fff91fb9afe7bf">&#9670;&nbsp;</a></span>kvm_apic_has_interrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_apic_has_interrupt </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02859">2859</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;{</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    u32 ppr;</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160; </div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4">kvm_apic_present</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>))</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160; </div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    <a class="code" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986">__apic_update_ppr</a>(apic, &amp;ppr);</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0">apic_has_interrupt_for_ppr</a>(apic, ppr);</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a1bb0a1640f9f291f5c3154c6a2c40986"><div class="ttname"><a href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986">__apic_update_ppr</a></div><div class="ttdeci">static bool __apic_update_ppr(struct kvm_lapic *apic, u32 *new_ppr)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00944">lapic.c:944</a></div></div>
<div class="ttc" id="alapic_8c_html_ac1c99098894f4751a556057800e906e0"><div class="ttname"><a href="lapic_8c.html#ac1c99098894f4751a556057800e906e0">apic_has_interrupt_for_ppr</a></div><div class="ttdeci">static int apic_has_interrupt_for_ppr(struct kvm_lapic *apic, u32 ppr)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00932">lapic.c:932</a></div></div>
<div class="ttc" id="alapic_8h_html_ae7e74fde3e4fb01f561634e789b5eab4"><div class="ttname"><a href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4">kvm_apic_present</a></div><div class="ttdeci">static bool kvm_apic_present(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00211">lapic.h:211</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_aa421165466ac455ff3fff91fb9afe7bf_cgraph.png" border="0" usemap="#alapic_8h_aa421165466ac455ff3fff91fb9afe7bf_cgraph" alt=""/></div>
<map name="alapic_8h_aa421165466ac455ff3fff91fb9afe7bf_cgraph" id="alapic_8h_aa421165466ac455ff3fff91fb9afe7bf_cgraph">
<area shape="rect" title=" " alt="" coords="5,156,184,183"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="232,76,375,103"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="232,149,375,190"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="233,215,374,241"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="641,5,800,32"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="435,56,581,83"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="436,107,580,133"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="848,81,997,108"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="641,56,800,83"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="641,107,800,133"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="430,157,586,184"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="661,157,781,184"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="423,212,593,239"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="449,263,567,289"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_aa421165466ac455ff3fff91fb9afe7bf_icgraph.png" border="0" usemap="#alapic_8h_aa421165466ac455ff3fff91fb9afe7bf_icgraph" alt=""/></div>
<map name="alapic_8h_aa421165466ac455ff3fff91fb9afe7bf_icgraph" id="alapic_8h_aa421165466ac455ff3fff91fb9afe7bf_icgraph">
<area shape="rect" title=" " alt="" coords="1888,753,2067,779"/>
<area shape="rect" href="irq_8c.html#a82ee83566d2724a298b67f23f481976b" title=" " alt="" coords="1629,605,1840,631"/>
<area shape="rect" href="irq_8c.html#ae3151f072a1bb4a732ee3854ab6cf619" title=" " alt="" coords="1647,737,1822,763"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="1647,803,1823,830"/>
<area shape="rect" href="vmx_2nested_8c.html#add1e82c32385142c0fca04a1db8cbc3a" title=" " alt="" coords="1202,1337,1333,1363"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="1182,597,1353,639"/>
<area shape="rect" href="svm_8c.html#a5c26f1ceaa6cc778d986bd33629dc539" title=" " alt="" coords="1445,363,1546,390"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="947,566,1084,593"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="709,591,791,618"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="403,591,589,618"/>
<area shape="rect" href="svm_8c.html#a4a2beb03d1ef1d9e803c22570b5806d1" title=" " alt="" coords="1202,211,1333,238"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="661,465,839,491"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="938,275,1093,302"/>
<area shape="rect" href="svm_8c.html#a0a2c47b46c5f4c14c1ae6a64119bcb60" title=" " alt="" coords="1202,313,1333,339"/>
<area shape="rect" href="svm_8c.html#a5df90c8772700a60441f2ba19472f726" title=" " alt="" coords="1212,414,1323,441"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="1183,363,1351,390"/>
<area shape="rect" href="svm_2nested_8c.html#a4ec7e878f6af209e74dd84285ee0198f" title=" " alt="" coords="421,414,571,441"/>
<area shape="rect" href="svm_8c.html#a5d52c93beeb85ba5a99283d4eba589e1" title=" " alt="" coords="200,351,349,378"/>
<area shape="rect" href="svm_8c.html#a1eacc7b79f62ed332056217c35fe3be4" title=" " alt="" coords="5,326,152,353"/>
<area shape="rect" href="svm_2nested_8c.html#a777240cb9ab00451d21a1b204e19c5a6" title=" " alt="" coords="654,97,846,123"/>
<area shape="rect" href="svm_2nested_8c.html#a03b4be7ca82710ecd17bc66f2a20cad8" title=" " alt="" coords="643,283,857,324"/>
<area shape="rect" href="svm_2nested_8c.html#a574acca11f4be4ea5df18f36307f9bf6" title=" " alt="" coords="648,181,852,207"/>
<area shape="rect" href="svm_8h.html#a7b2d87885eea1b11b1bf1045c21c5a8b" title=" " alt="" coords="647,231,853,258"/>
<area shape="rect" href="svm_2hyperv_8c.html#a33efa5fe6a664e9b2a70232b93485645" title=" " alt="" coords="659,348,841,389"/>
<area shape="rect" href="svm_8c.html#a08788d6a633657aa9e7e2f3b09db9b40" title=" " alt="" coords="419,5,573,47"/>
<area shape="rect" href="svm_8c.html#ae135f7d753cde05e6f726fb75e971ddd" title=" " alt="" coords="416,71,576,98"/>
<area shape="rect" href="svm_8c.html#a3f8983432f4aae138a6f4d167c561132" title=" " alt="" coords="429,122,563,149"/>
<area shape="rect" href="svm_2nested_8c.html#a3286f29b650004d599595557d310136e" title=" " alt="" coords="397,290,595,317"/>
<area shape="rect" href="svm_2nested_8c.html#a962af1ea814d32a42ada9f601918cee5" title=" " alt="" coords="411,173,581,215"/>
<area shape="rect" href="svm_2nested_8c.html#ae734b89c5cf3a889380d8136e2ed749e" title=" " alt="" coords="905,414,1125,441"/>
<area shape="rect" href="x86_8c.html#a54ec69b24c80207e4e6122994db0a466" title=" " alt="" coords="1410,705,1581,731"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="651,827,849,854"/>
<area shape="rect" href="x86_8c.html#a951bd40e58d87204d565c6cb5fc664e6" title=" " alt="" coords="1173,693,1361,719"/>
<area shape="rect" href="kvm__main_8c.html#aac20f0d987f71a47c6701c7e93a0e261" title=" " alt="" coords="929,667,1102,694"/>
<area shape="rect" href="kvm__main_8c.html#a3de4d6991bdd1a714e8afa6a55136cdd" title=" " alt="" coords="927,718,1103,745"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="968,617,1063,643"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="1409,819,1581,846"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="1190,1031,1345,1058"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="676,1149,824,1175"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="954,1286,1077,1313"/>
<area shape="rect" href="vmx_2nested_8c.html#a4e307e2bcf664c83265b1442e3fc8da2" title=" " alt="" coords="927,885,1103,927"/>
<area shape="rect" href="vmx_2nested_8c.html#ad3cab9cf8633364513bd6a24caecf41a" title=" " alt="" coords="907,820,1123,861"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fcc88ceee4f57a3dbf23fedb46a5cb" title=" " alt="" coords="940,1053,1091,1095"/>
<area shape="rect" href="vmx_2nested_8c.html#aedc5821e9af5c7bd4aac6c06f4ca046f" title=" " alt="" coords="925,1002,1105,1029"/>
<area shape="rect" href="vmx_2hyperv_8c.html#a937e30dece4579b71b17efcd54c1d910" title=" " alt="" coords="923,1119,1107,1160"/>
<area shape="rect" href="vmx_2nested_8c.html#a64e6550fab681b40c832fe4e2d5e3b95" title=" " alt="" coords="943,1185,1088,1211"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="665,1329,835,1371"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="433,1337,559,1363"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fecee9010894e3a1513a0924e24dd6" title=" " alt="" coords="947,1337,1084,1363"/>
<area shape="rect" href="vmx_2nested_8c.html#a23e3de8c964e87404eea818be6f70154" title=" " alt="" coords="944,1387,1087,1414"/>
</map>
</div>

</div>
</div>
<a id="a106127db5f69d94e5ea9d6d2982c23fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a106127db5f69d94e5ea9d6d2982c23fd">&#9670;&nbsp;</a></span>kvm_apic_has_pending_init_or_sipi()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_apic_has_pending_init_or_sipi </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00231">231</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;{</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(vcpu) &amp;&amp; vcpu-&gt;arch.apic-&gt;pending_events;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a106127db5f69d94e5ea9d6d2982c23fd_cgraph.png" border="0" usemap="#alapic_8h_a106127db5f69d94e5ea9d6d2982c23fd_cgraph" alt=""/></div>
<map name="alapic_8h_a106127db5f69d94e5ea9d6d2982c23fd_cgraph" id="alapic_8h_a106127db5f69d94e5ea9d6d2982c23fd_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,180,47"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="228,13,347,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a106127db5f69d94e5ea9d6d2982c23fd_icgraph.png" border="0" usemap="#alapic_8h_a106127db5f69d94e5ea9d6d2982c23fd_icgraph" alt=""/></div>
<map name="alapic_8h_a106127db5f69d94e5ea9d6d2982c23fd_icgraph" id="alapic_8h_a106127db5f69d94e5ea9d6d2982c23fd_icgraph">
<area shape="rect" title=" " alt="" coords="2491,84,2665,125"/>
<area shape="rect" href="vmx_2nested_8c.html#a4c26f7246065bb8952f345af22487b9c" title=" " alt="" coords="2298,17,2417,43"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="1265,71,1452,98"/>
<area shape="rect" href="x86_8c.html#a54ec69b24c80207e4e6122994db0a466" title=" " alt="" coords="2272,167,2443,194"/>
<area shape="rect" href="svm_8c.html#a5c26f1ceaa6cc778d986bd33629dc539" title=" " alt="" coords="2307,578,2408,605"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="2045,5,2215,47"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="1815,13,1941,39"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="582,24,741,65"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="568,111,755,138"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1073,173,1168,199"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="1052,122,1189,149"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="383,82,507,109"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="851,122,933,149"/>
<area shape="rect" href="x86_8c.html#a951bd40e58d87204d565c6cb5fc664e6" title=" " alt="" coords="2036,186,2224,213"/>
<area shape="rect" href="kvm__main_8c.html#aac20f0d987f71a47c6701c7e93a0e261" title=" " alt="" coords="1791,313,1965,339"/>
<area shape="rect" href="kvm__main_8c.html#a3de4d6991bdd1a714e8afa6a55136cdd" title=" " alt="" coords="1790,223,1966,250"/>
<area shape="rect" href="kvm__main_8c.html#a06ed191cebec13ce2c4a7d15fdeb5a60" title=" " alt="" coords="1543,350,1683,377"/>
<area shape="rect" href="kvm__main_8c.html#a7373edb7b1c787b14e657cd691e64d20" title=" " alt="" coords="1285,375,1432,402"/>
<area shape="rect" href="xen_8c.html#ab8910a0f422594766001b1c5a5f59e6e" title=" " alt="" coords="839,299,945,326"/>
<area shape="rect" href="vmx_8c.html#ab7bde6e336e1ded26fe55a186056b8a6" title=" " alt="" coords="1065,477,1177,503"/>
<area shape="rect" href="hyperv_8c.html#ac96f1fa9ec6ac0ac26c24ca65cc1547e" title=" " alt="" coords="1050,375,1191,402"/>
<area shape="rect" href="svm_8c.html#ad65ceb76375d4e01d2b1e11a9c227b7c" title=" " alt="" coords="1047,426,1194,453"/>
<area shape="rect" href="kvm__main_8c.html#a8e18df0287ddedfd516454aeeb669807" title=" " alt="" coords="1547,223,1678,250"/>
<area shape="rect" href="kvm__main_8c.html#a7256a8615584a9ae83a46c071f6aa0e9" title=" " alt="" coords="1298,274,1419,301"/>
<area shape="rect" href="xen_8c.html#a4bcdab8c7d597fa93d30ff9e9185cbc6" title=" " alt="" coords="1034,274,1207,301"/>
<area shape="rect" href="svm_8c.html#a4a2beb03d1ef1d9e803c22570b5806d1" title=" " alt="" coords="2065,477,2195,503"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="803,666,981,693"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="1801,775,1955,802"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="808,557,976,583"/>
<area shape="rect" href="svm_8c.html#a0a2c47b46c5f4c14c1ae6a64119bcb60" title=" " alt="" coords="2065,683,2195,710"/>
<area shape="rect" href="svm_8c.html#a5df90c8772700a60441f2ba19472f726" title=" " alt="" coords="2075,633,2185,659"/>
<area shape="rect" href="svm_2nested_8c.html#a4ec7e878f6af209e74dd84285ee0198f" title=" " alt="" coords="586,746,737,773"/>
<area shape="rect" href="svm_8c.html#a5d52c93beeb85ba5a99283d4eba589e1" title=" " alt="" coords="371,785,520,811"/>
<area shape="rect" href="svm_8c.html#a1eacc7b79f62ed332056217c35fe3be4" title=" " alt="" coords="176,825,323,851"/>
<area shape="rect" href="svm_8c.html#a7c2323b13a5022aa9f6a9ae5ebe4d830" title=" " alt="" coords="5,825,128,851"/>
<area shape="rect" href="svm_2nested_8c.html#a777240cb9ab00451d21a1b204e19c5a6" title=" " alt="" coords="1517,991,1709,1018"/>
<area shape="rect" href="svm_2nested_8c.html#a03b4be7ca82710ecd17bc66f2a20cad8" title=" " alt="" coords="1505,797,1720,839"/>
<area shape="rect" href="svm_2nested_8c.html#a574acca11f4be4ea5df18f36307f9bf6" title=" " alt="" coords="1511,641,1715,667"/>
<area shape="rect" href="svm_8h.html#a7b2d87885eea1b11b1bf1045c21c5a8b" title=" " alt="" coords="1510,863,1715,890"/>
<area shape="rect" href="svm_2hyperv_8c.html#a33efa5fe6a664e9b2a70232b93485645" title=" " alt="" coords="1521,915,1704,956"/>
<area shape="rect" href="svm_8c.html#a08788d6a633657aa9e7e2f3b09db9b40" title=" " alt="" coords="1282,1055,1435,1096"/>
<area shape="rect" href="svm_8c.html#ae135f7d753cde05e6f726fb75e971ddd" title=" " alt="" coords="1279,953,1439,979"/>
<area shape="rect" href="svm_8c.html#a3f8983432f4aae138a6f4d167c561132" title=" " alt="" coords="1292,1003,1425,1030"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="1061,1062,1180,1089"/>
<area shape="rect" href="svm_8c.html#af2ee2a03530f5b7a02a127d8b779d2ae" title=" " alt="" coords="809,1062,975,1089"/>
<area shape="rect" href="svm_2nested_8c.html#a3286f29b650004d599595557d310136e" title=" " alt="" coords="1260,801,1457,827"/>
<area shape="rect" href="svm_2nested_8c.html#a962af1ea814d32a42ada9f601918cee5" title=" " alt="" coords="1273,629,1444,671"/>
<area shape="rect" href="svm_2nested_8c.html#ab7904bb74631114e0bd5102a52aab4c8" title=" " alt="" coords="1029,629,1212,671"/>
<area shape="rect" href="svm_2nested_8c.html#a387a91a64bb25a25590ee3b019f0e0a2" title=" " alt="" coords="1269,851,1448,878"/>
<area shape="rect" href="svm_2nested_8c.html#ae734b89c5cf3a889380d8136e2ed749e" title=" " alt="" coords="1768,665,1988,691"/>
</map>
</div>

</div>
</div>
<a id="a1d8660ecbda996b11b10b179013e52d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d8660ecbda996b11b10b179013e52d4">&#9670;&nbsp;</a></span>kvm_apic_hw_enabled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_apic_hw_enabled </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00195">195</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;{</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span> (static_branch_unlikely(&amp;<a class="code" href="lapic_8h.html#a65788ee3d09ea041368cd93b3391f3c4">apic_hw_disabled</a>.key))</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">return</span> apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_base &amp; MSR_IA32_APICBASE_ENABLE;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div>
<div class="ttc" id="alapic_8h_html_a65788ee3d09ea041368cd93b3391f3c4"><div class="ttname"><a href="lapic_8h.html#a65788ee3d09ea041368cd93b3391f3c4">apic_hw_disabled</a></div><div class="ttdeci">struct static_key_false_deferred apic_hw_disabled</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a1d8660ecbda996b11b10b179013e52d4_icgraph.png" border="0" usemap="#alapic_8h_a1d8660ecbda996b11b10b179013e52d4_icgraph" alt=""/></div>
<map name="alapic_8h_a1d8660ecbda996b11b10b179013e52d4_icgraph" id="alapic_8h_a1d8660ecbda996b11b10b179013e52d4_icgraph">
<area shape="rect" title=" " alt="" coords="1585,618,1756,645"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1394,181,1502,207"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="869,71,1044,98"/>
<area shape="rect" href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1" title=" " alt="" coords="1383,542,1513,569"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1381,593,1515,619"/>
<area shape="rect" href="lapic_8c.html#a1f4df169625f9c4c2cb06f7443698af4" title=" " alt="" coords="1120,637,1311,663"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="1145,927,1286,954"/>
<area shape="rect" href="lapic_8c.html#a4d28368a44947389f8a7afec1c3288d3" title=" " alt="" coords="1359,782,1537,809"/>
<area shape="rect" href="x86_8c.html#ab018cb259299f63296388b0305b53759" title=" " alt="" coords="1360,706,1536,733"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1147,122,1284,149"/>
<area shape="rect" href="irq_8h.html#afcf66d0c1c15dcbd414e2dbf830d7b29" title=" " alt="" coords="1125,181,1305,207"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="889,122,1025,149"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="595,64,781,105"/>
<area shape="rect" href="pmu_8c.html#a03a16f548326b68245a4bf0555bea777" title=" " alt="" coords="603,231,773,258"/>
<area shape="rect" href="x86_8c.html#a130b6ed14cf18384646cb31251dd104e" title=" " alt="" coords="595,13,781,39"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="361,71,507,98"/>
<area shape="rect" href="irq_8h.html#ac79f0e40ed0e1cde83a09aef506fb373" title=" " alt="" coords="333,122,535,149"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="365,839,503,866"/>
<area shape="rect" href="x86_8c.html#a2de10bf19fee1e2a9cb47b6f491a18b4" title=" " alt="" coords="357,5,511,47"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="593,282,783,309"/>
<area shape="rect" href="irq_8c.html#a78e23e83bece8c269268f3a263fbb114" title=" " alt="" coords="871,173,1042,215"/>
<area shape="rect" href="x86_8c.html#aebdfa8be7e8542163f8396cf93a82398" title=" " alt="" coords="594,687,782,714"/>
<area shape="rect" href="irq_8c.html#a0ba50d6865653a9d307102d8f0b36630" title=" " alt="" coords="879,687,1035,714"/>
<area shape="rect" href="i8259_8c.html#a20f0eb17c76875b81e91fd32b0badc04" title=" " alt="" coords="375,177,493,203"/>
<area shape="rect" href="i8259_8c.html#a1f534b69587aeb30f8853f3eb4a35071" title=" " alt="" coords="911,459,1002,486"/>
<area shape="rect" href="x86_8c.html#a05909279b3ddd330600a9c5d506c85da" title=" " alt="" coords="355,680,513,721"/>
<area shape="rect" href="irq_8c.html#a0fe12d1697f3fa0b54c4a62c7be020e9" title=" " alt="" coords="357,531,511,558"/>
<area shape="rect" href="irq_8c.html#a82ee83566d2724a298b67f23f481976b" title=" " alt="" coords="583,738,793,765"/>
<area shape="rect" href="irq_8c.html#ae3151f072a1bb4a732ee3854ab6cf619" title=" " alt="" coords="601,789,775,815"/>
<area shape="rect" href="i8259_8c.html#a23bf40906f1f0a0a84ce4af0956a8b2a" title=" " alt="" coords="159,227,285,254"/>
<area shape="rect" href="i8259_8c.html#ad3cc418e9d82e9cca43e01425f76b366" title=" " alt="" coords="5,282,111,309"/>
<area shape="rect" href="i8259_8c.html#a4fef735273cc243ab0c60985526cf753" title=" " alt="" coords="619,485,757,511"/>
<area shape="rect" href="i8259_8c.html#a6f84274a6b9f1ae6381e9e5f413dd481" title=" " alt="" coords="619,434,757,461"/>
<area shape="rect" href="i8259_8c.html#a1488ed2670af0e636f7384f69e1894a9" title=" " alt="" coords="624,535,752,562"/>
<area shape="rect" href="i8259_8c.html#a6620b725f8a47ecc7341e68ca3660df5" title=" " alt="" coords="611,586,765,613"/>
<area shape="rect" href="i8259_8c.html#a72eab34ac8b4a80698a92f06b8afe71e" title=" " alt="" coords="637,181,739,207"/>
<area shape="rect" href="i8259_8c.html#a1484dfc37fa586b115d6645c7dcc88b2" title=" " alt="" coords="637,383,739,410"/>
<area shape="rect" href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf" title=" " alt="" coords="867,789,1046,815"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="877,891,1036,932"/>
<area shape="rect" href="lapic_8c.html#af2fa5313476adb8240d3595805d784fc" title=" " alt="" coords="841,1058,1072,1085"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="865,839,1048,866"/>
<area shape="rect" href="lapic_8h.html#ac572ef1ae29ec34adf2d46f7b82cc620" title=" " alt="" coords="883,1109,1031,1135"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="857,957,1057,983"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="841,1007,1072,1034"/>
<area shape="rect" href="x86_8c.html#a8aac590d2b896fcad86c5a2971164c1c" title=" " alt="" coords="889,1159,1025,1186"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="600,941,776,967"/>
<area shape="rect" href="vmx_2nested_8c.html#add1e82c32385142c0fca04a1db8cbc3a" title=" " alt="" coords="623,890,753,917"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="609,991,767,1018"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="601,1058,775,1085"/>
<area shape="rect" href="lapic_8c.html#a94273a31a16c3d074d5722f22474bcbb" title=" " alt="" coords="1129,789,1301,815"/>
</map>
</div>

</div>
</div>
<a id="a58bae1ee856b1b5c5c44903c9f83a4f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58bae1ee856b1b5c5c44903c9f83a4f7">&#9670;&nbsp;</a></span>kvm_apic_init_sipi_allowed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_apic_init_sipi_allowed </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00236">236</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;{</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="smm_8h.html#aa0d6bb14bef67edc441fccd36d205a67">is_smm</a>(vcpu) &amp;&amp;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;           !static_call(kvm_x86_apic_init_signal_blocked)(vcpu);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div>
<div class="ttc" id="asmm_8h_html_aa0d6bb14bef67edc441fccd36d205a67"><div class="ttname"><a href="smm_8h.html#aa0d6bb14bef67edc441fccd36d205a67">is_smm</a></div><div class="ttdeci">static bool is_smm(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="smm_8h_source.html#l00160">smm.h:160</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a58bae1ee856b1b5c5c44903c9f83a4f7_cgraph.png" border="0" usemap="#alapic_8h_a58bae1ee856b1b5c5c44903c9f83a4f7_cgraph" alt=""/></div>
<map name="alapic_8h_a58bae1ee856b1b5c5c44903c9f83a4f7_cgraph" id="alapic_8h_a58bae1ee856b1b5c5c44903c9f83a4f7_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,148,47"/>
<area shape="rect" href="smm_8h.html#aa0d6bb14bef67edc441fccd36d205a67" title=" " alt="" coords="196,13,269,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a58bae1ee856b1b5c5c44903c9f83a4f7_icgraph.png" border="0" usemap="#alapic_8h_a58bae1ee856b1b5c5c44903c9f83a4f7_icgraph" alt=""/></div>
<map name="alapic_8h_a58bae1ee856b1b5c5c44903c9f83a4f7_icgraph" id="alapic_8h_a58bae1ee856b1b5c5c44903c9f83a4f7_icgraph">
<area shape="rect" title=" " alt="" coords="1931,86,2073,127"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="829,93,1016,120"/>
<area shape="rect" href="x86_8c.html#a93a45fe328a7ab7be2e5426ffc845c32" title=" " alt="" coords="1491,6,1649,47"/>
<area shape="rect" href="x86_8c.html#a54ec69b24c80207e4e6122994db0a466" title=" " alt="" coords="1712,144,1883,171"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,43,350,85"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,127,364,153"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="647,195,742,221"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="626,144,763,171"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,51,129,77"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="445,144,527,171"/>
<area shape="rect" href="x86_8c.html#a951bd40e58d87204d565c6cb5fc664e6" title=" " alt="" coords="1476,195,1664,221"/>
<area shape="rect" href="kvm__main_8c.html#aac20f0d987f71a47c6701c7e93a0e261" title=" " alt="" coords="1253,333,1427,360"/>
<area shape="rect" href="kvm__main_8c.html#a3de4d6991bdd1a714e8afa6a55136cdd" title=" " alt="" coords="1252,245,1428,272"/>
<area shape="rect" href="kvm__main_8c.html#a06ed191cebec13ce2c4a7d15fdeb5a60" title=" " alt="" coords="1064,372,1204,399"/>
<area shape="rect" href="kvm__main_8c.html#a7373edb7b1c787b14e657cd691e64d20" title=" " alt="" coords="849,397,996,424"/>
<area shape="rect" href="xen_8c.html#ab8910a0f422594766001b1c5a5f59e6e" title=" " alt="" coords="433,423,539,449"/>
<area shape="rect" href="vmx_8c.html#ab7bde6e336e1ded26fe55a186056b8a6" title=" " alt="" coords="639,397,751,424"/>
<area shape="rect" href="hyperv_8c.html#ac96f1fa9ec6ac0ac26c24ca65cc1547e" title=" " alt="" coords="624,296,765,323"/>
<area shape="rect" href="svm_8c.html#ad65ceb76375d4e01d2b1e11a9c227b7c" title=" " alt="" coords="621,499,768,525"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="181,321,360,348"/>
<area shape="rect" href="xen_8c.html#aaf398a8803a79984b06fbf9e2a64193c" title=" " alt="" coords="412,296,560,323"/>
<area shape="rect" href="kvm__main_8c.html#a8e18df0287ddedfd516454aeeb669807" title=" " alt="" coords="1069,245,1199,272"/>
<area shape="rect" href="kvm__main_8c.html#a7256a8615584a9ae83a46c071f6aa0e9" title=" " alt="" coords="862,296,983,323"/>
<area shape="rect" href="xen_8c.html#a4bcdab8c7d597fa93d30ff9e9185cbc6" title=" " alt="" coords="608,347,781,373"/>
</map>
</div>

</div>
</div>
<a id="ab1ce737e754e319ee93f3d06e197cc50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1ce737e754e319ee93f3d06e197cc50">&#9670;&nbsp;</a></span>kvm_apic_local_deliver()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_apic_local_deliver </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lvt_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02762">2762</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;{</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;    u32 reg = <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, lvt_type);</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;    <span class="keywordtype">int</span> vector, mode, trig_mode;</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;    <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160; </div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4">kvm_apic_hw_enabled</a>(apic) &amp;&amp; !(reg &amp; APIC_LVT_MASKED)) {</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;        vector = reg &amp; APIC_VECTOR_MASK;</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;        mode = reg &amp; APIC_MODE_MASK;</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;        trig_mode = reg &amp; APIC_LVT_LEVEL_TRIGGER;</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160; </div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;        r = <a class="code" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10">__apic_accept_irq</a>(apic, mode, vector, 1, trig_mode, NULL);</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;        <span class="keywordflow">if</span> (r &amp;&amp; lvt_type == APIC_LVTPC &amp;&amp;</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;            <a class="code" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf">guest_cpuid_is_intel_compatible</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>))</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;            <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_LVTPC, reg | APIC_LVT_MASKED);</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    }</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;}</div>
<div class="ttc" id="acpuid_8h_html_a0de02c3fbec1aa3cfd7890fb68d3fabf"><div class="ttname"><a href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf">guest_cpuid_is_intel_compatible</a></div><div class="ttdeci">static bool guest_cpuid_is_intel_compatible(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="cpuid_8h_source.html#l00128">cpuid.h:128</a></div></div>
<div class="ttc" id="alapic_8c_html_a10d887046aaccb6cf4178421594dee10"><div class="ttname"><a href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10">__apic_accept_irq</a></div><div class="ttdeci">static int __apic_accept_irq(struct kvm_lapic *apic, int delivery_mode, int vector, int level, int trig_mode, struct dest_map *dest_map)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01291">lapic.c:1291</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_ab1ce737e754e319ee93f3d06e197cc50_cgraph.png" border="0" usemap="#alapic_8h_ab1ce737e754e319ee93f3d06e197cc50_cgraph" alt=""/></div>
<map name="alapic_8h_ab1ce737e754e319ee93f3d06e197cc50_cgraph" id="alapic_8h_ab1ce737e754e319ee93f3d06e197cc50_cgraph">
<area shape="rect" title=" " alt="" coords="5,419,180,445"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="237,183,374,209"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="673,309,844,336"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="228,411,383,453"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="233,477,378,504"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="233,528,377,555"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="465,208,573,235"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="454,259,583,285"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="455,309,582,336"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="456,5,581,32"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="431,56,607,83"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="437,107,601,133"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="457,157,580,184"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="674,208,843,235"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="655,107,863,133"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="682,157,835,184"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="441,411,596,453"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="439,477,598,504"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="439,528,598,555"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_ab1ce737e754e319ee93f3d06e197cc50_icgraph.png" border="0" usemap="#alapic_8h_ab1ce737e754e319ee93f3d06e197cc50_icgraph" alt=""/></div>
<map name="alapic_8h_ab1ce737e754e319ee93f3d06e197cc50_icgraph" id="alapic_8h_ab1ce737e754e319ee93f3d06e197cc50_icgraph">
<area shape="rect" title=" " alt="" coords="2559,232,2733,259"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="2324,225,2511,266"/>
<area shape="rect" href="pmu_8c.html#a03a16f548326b68245a4bf0555bea777" title=" " alt="" coords="2332,127,2503,153"/>
<area shape="rect" href="x86_8c.html#a130b6ed14cf18384646cb31251dd104e" title=" " alt="" coords="2325,337,2510,364"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="2102,257,2249,284"/>
<area shape="rect" href="irq_8h.html#ac79f0e40ed0e1cde83a09aef506fb373" title=" " alt="" coords="2075,179,2276,205"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1243,191,1411,233"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="1889,359,2006,385"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="1885,257,2010,284"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="1868,308,2027,335"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="985,23,1195,65"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="727,56,917,83"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="719,5,925,32"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="487,56,635,83"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="255,56,389,83"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="503,5,620,32"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1467,359,1609,385"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1255,440,1398,467"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="743,580,901,607"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1245,374,1408,415"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1247,309,1406,350"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1014,405,1166,432"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1026,511,1154,537"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="747,394,897,435"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="482,355,641,381"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="260,323,384,349"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="707,511,937,537"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="494,548,629,575"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="464,599,659,625"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="481,653,642,680"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="490,729,633,756"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="246,587,398,629"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="233,485,411,512"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="252,536,392,563"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="228,653,416,680"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="235,704,409,731"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="5,568,180,595"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="247,755,397,781"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="484,482,639,523"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1011,343,1169,369"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="765,343,879,369"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="778,292,866,319"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="468,292,655,319"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1043,257,1137,284"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="781,191,863,217"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="1683,295,1802,321"/>
<area shape="rect" href="lapic_8c.html#aee4a3e5ae4ed211edf4e463ebacadaa5" title=" " alt="" coords="1459,275,1617,317"/>
<area shape="rect" href="irq_8c.html#a2d54275d9e142ae8e337298689483728" title=" " alt="" coords="1461,141,1615,182"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="1674,96,1811,123"/>
<area shape="rect" href="x86_8c.html#a2de10bf19fee1e2a9cb47b6f491a18b4" title=" " alt="" coords="1665,473,1820,514"/>
</map>
</div>

</div>
</div>
<a id="adb63e5a650d4571316b450d153a3105d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb63e5a650d4571316b450d153a3105d">&#9670;&nbsp;</a></span>kvm_apic_match_dest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_apic_match_dest </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>shorthand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dest_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01067">1067</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;{</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *target = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    u32 mda = <a class="code" href="lapic_8c.html#a8fb87d02d911e49b5793e391702afe7e">kvm_apic_mda</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, dest, source, target);</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160; </div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <a class="code" href="ioapic_8h.html#aca68c0d4ac8df0838e209fb5300f7be3">ASSERT</a>(target);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordflow">switch</span> (shorthand) {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="lapic_8h.html#acc73bace457403e7d23ff22afac7df0f">APIC_DEST_NOSHORT</a>:</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="keywordflow">if</span> (dest_mode == APIC_DEST_PHYSICAL)</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6">kvm_apic_match_physical_addr</a>(target, mda);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#a870119cb74033f360164df90029af75a">kvm_apic_match_logical_addr</a>(target, mda);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">case</span> APIC_DEST_SELF:</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="keywordflow">return</span> target == source;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordflow">case</span> APIC_DEST_ALLINC:</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordflow">case</span> APIC_DEST_ALLBUT:</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <span class="keywordflow">return</span> target != source;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;}</div>
<div class="ttc" id="aioapic_8h_html_aca68c0d4ac8df0838e209fb5300f7be3"><div class="ttname"><a href="ioapic_8h.html#aca68c0d4ac8df0838e209fb5300f7be3">ASSERT</a></div><div class="ttdeci">#define ASSERT(x)</div><div class="ttdef"><b>Definition:</b> <a href="ioapic_8h_source.html#l00101">ioapic.h:101</a></div></div>
<div class="ttc" id="alapic_8c_html_a870119cb74033f360164df90029af75a"><div class="ttname"><a href="lapic_8c.html#a870119cb74033f360164df90029af75a">kvm_apic_match_logical_addr</a></div><div class="ttdeci">static bool kvm_apic_match_logical_addr(struct kvm_lapic *apic, u32 mda)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01013">lapic.c:1013</a></div></div>
<div class="ttc" id="alapic_8c_html_a8fb87d02d911e49b5793e391702afe7e"><div class="ttname"><a href="lapic_8c.html#a8fb87d02d911e49b5793e391702afe7e">kvm_apic_mda</a></div><div class="ttdeci">static u32 kvm_apic_mda(struct kvm_vcpu *vcpu, unsigned int dest_id, struct kvm_lapic *source, struct kvm_lapic *target)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01055">lapic.c:1055</a></div></div>
<div class="ttc" id="alapic_8c_html_ae8c127c0d736bacbfa2cdc6b3fd5c2f6"><div class="ttname"><a href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6">kvm_apic_match_physical_addr</a></div><div class="ttdeci">static bool kvm_apic_match_physical_addr(struct kvm_lapic *apic, u32 mda)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00993">lapic.c:993</a></div></div>
<div class="ttc" id="alapic_8h_html_acc73bace457403e7d23ff22afac7df0f"><div class="ttname"><a href="lapic_8h.html#acc73bace457403e7d23ff22afac7df0f">APIC_DEST_NOSHORT</a></div><div class="ttdeci">#define APIC_DEST_NOSHORT</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00016">lapic.h:16</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_adb63e5a650d4571316b450d153a3105d_cgraph.png" border="0" usemap="#alapic_8h_adb63e5a650d4571316b450d153a3105d_cgraph" alt=""/></div>
<map name="alapic_8h_adb63e5a650d4571316b450d153a3105d_cgraph" id="alapic_8h_adb63e5a650d4571316b450d153a3105d_cgraph">
<area shape="rect" title=" " alt="" coords="5,171,173,197"/>
<area shape="rect" href="lapic_8c.html#a870119cb74033f360164df90029af75a" title=" " alt="" coords="227,95,446,121"/>
<area shape="rect" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6" title=" " alt="" coords="221,171,452,197"/>
<area shape="rect" href="lapic_8c.html#a8fb87d02d911e49b5793e391702afe7e" title=" " alt="" coords="276,272,397,299"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="712,157,855,184"/>
<area shape="rect" href="lapic_8c.html#a98bde25094c754b30e796357ba643ab0" title=" " alt="" coords="500,107,656,133"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="505,5,651,32"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="704,5,863,32"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="518,259,638,285"/>
<area shape="rect" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096" title=" " alt="" coords="522,157,634,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_adb63e5a650d4571316b450d153a3105d_icgraph.png" border="0" usemap="#alapic_8h_adb63e5a650d4571316b450d153a3105d_icgraph" alt=""/></div>
<map name="alapic_8h_adb63e5a650d4571316b450d153a3105d_icgraph" id="alapic_8h_adb63e5a650d4571316b450d153a3105d_icgraph">
<area shape="rect" title=" " alt="" coords="1973,327,2141,354"/>
<area shape="rect" href="ioapic_8c.html#aca4e6c938829fb401b5c01cba3bd19b2" title=" " alt="" coords="1749,93,1913,135"/>
<area shape="rect" href="ioapic_8c.html#a3ec3324d9c7d9168d100c79fc7c19b33" title=" " alt="" coords="793,189,967,215"/>
<area shape="rect" href="avic_8c.html#ad9345a779111a59de8fa4110106c3adf" title=" " alt="" coords="1743,239,1918,266"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="1751,291,1910,332"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="1739,357,1922,383"/>
<area shape="rect" href="ioapic_8c.html#acaaa84ad163291aa716c59fa3bec3715" title=" " alt="" coords="1743,407,1918,434"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1736,759,1925,786"/>
<area shape="rect" href="ioapic_8h.html#a049de3e03383dab21c2cb6c3033e66ae" title=" " alt="" coords="1739,458,1922,485"/>
<area shape="rect" href="ioapic_8c.html#a6a7d0d8b3a3717172c57ed1916318952" title=" " alt="" coords="1525,5,1688,47"/>
<area shape="rect" href="ioapic_8c.html#a6c0258d75d3c40d5674a574997bdd453" title=" " alt="" coords="1525,123,1688,164"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="421,202,584,229"/>
<area shape="rect" href="ioapic_8c.html#a1d24315dec2401b4c45b224469c7379d" title=" " alt="" coords="1301,64,1447,105"/>
<area shape="rect" href="ioapic_8c.html#a477f1b98bf8d9dfcd1e51c743d79ac47" title=" " alt="" coords="237,202,361,229"/>
<area shape="rect" href="ioapic_8c.html#aa590f4d1416bf84560a4e9693c638f55" title=" " alt="" coords="1074,71,1165,98"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="792,315,968,342"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="632,322,744,349"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="429,439,577,466"/>
<area shape="rect" href="irq__comm_8c.html#ae12bd4085acdb92be18af95ac983d5a5" title=" " alt="" coords="225,498,373,525"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="5,678,177,705"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1298,130,1450,157"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1044,123,1195,164"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="804,587,956,628"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="1295,290,1453,317"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="1046,290,1193,317"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="1541,341,1673,367"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="1531,391,1682,418"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="1299,341,1449,367"/>
<area shape="rect" href="x86_8c.html#a8aac590d2b896fcad86c5a2971164c1c" title=" " alt="" coords="1539,442,1675,469"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="1305,391,1443,418"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="1079,391,1160,418"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="1549,493,1664,519"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="1533,734,1680,761"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="1526,810,1687,837"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1552,914,1661,941"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="1553,1015,1660,1042"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="1271,493,1477,519"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="1016,543,1223,570"/>
<area shape="rect" href="ioapic_8c.html#a21c528e901ef596bba3f882ed5ac9597" title=" " alt="" coords="1057,493,1182,519"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1295,721,1453,747"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="1292,771,1456,798"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1052,645,1187,671"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1022,746,1217,773"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1039,797,1200,823"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1048,695,1191,722"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="1042,848,1197,889"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="1285,822,1463,849"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="1277,965,1471,991"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="1291,1015,1457,1042"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="1303,1066,1445,1093"/>
</map>
</div>

</div>
</div>
<a id="a101348a7cc26ee89dac847f02ca917a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a101348a7cc26ee89dac847f02ca917a4">&#9670;&nbsp;</a></span>kvm_apic_mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dff">lapic_mode</a> kvm_apic_mode </td>
          <td>(</td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>apic_base</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00269">269</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;{</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">return</span> apic_base &amp; (MSR_IA32_APICBASE_ENABLE | X2APIC_ENABLE);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a101348a7cc26ee89dac847f02ca917a4_icgraph.png" border="0" usemap="#alapic_8h_a101348a7cc26ee89dac847f02ca917a4_icgraph" alt=""/></div>
<map name="alapic_8h_a101348a7cc26ee89dac847f02ca917a4_icgraph" id="alapic_8h_a101348a7cc26ee89dac847f02ca917a4_icgraph">
<area shape="rect" title=" " alt="" coords="1199,173,1328,199"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="1000,173,1151,199"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="783,122,946,149"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="777,198,952,225"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="625,71,723,98"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="621,122,727,149"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,5,350,47"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="448,71,535,98"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,71,129,98"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,71,364,98"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="412,122,571,149"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="633,173,715,199"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="619,223,729,250"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="619,274,729,301"/>
</map>
</div>

</div>
</div>
<a id="a637f6f499709ab30e61db1b69177ea00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a637f6f499709ab30e61db1b69177ea00">&#9670;&nbsp;</a></span>kvm_apic_pending_eoi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_apic_pending_eoi </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00110">110</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8">apic_test_vector</a>(vector, apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_ISR) ||</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <a class="code" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8">apic_test_vector</a>(vector, apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_IRR);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_ad063ed2f42a913efa82bad52d1b58aa8"><div class="ttname"><a href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8">apic_test_vector</a></div><div class="ttdeci">static int apic_test_vector(int vec, void *bitmap)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00105">lapic.c:105</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_ae3a8009387d4fa77d8bc5ba244f7f6aa"><div class="ttname"><a href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">kvm_lapic::regs</a></div><div class="ttdeci">void * regs</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00078">lapic.h:78</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a637f6f499709ab30e61db1b69177ea00_cgraph.png" border="0" usemap="#alapic_8h_a637f6f499709ab30e61db1b69177ea00_cgraph" alt=""/></div>
<map name="alapic_8h_a637f6f499709ab30e61db1b69177ea00_cgraph" id="alapic_8h_a637f6f499709ab30e61db1b69177ea00_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,176,32"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="224,5,353,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a637f6f499709ab30e61db1b69177ea00_icgraph.png" border="0" usemap="#alapic_8h_a637f6f499709ab30e61db1b69177ea00_icgraph" alt=""/></div>
<map name="alapic_8h_a637f6f499709ab30e61db1b69177ea00_icgraph" id="alapic_8h_a637f6f499709ab30e61db1b69177ea00_icgraph">
<area shape="rect" title=" " alt="" coords="3160,348,3331,375"/>
<area shape="rect" href="ioapic_8c.html#aca4e6c938829fb401b5c01cba3bd19b2" title=" " alt="" coords="2939,310,3103,351"/>
<area shape="rect" href="ioapic_8c.html#a3ec3324d9c7d9168d100c79fc7c19b33" title=" " alt="" coords="2097,280,2271,307"/>
<area shape="rect" href="ioapic_8c.html#acaaa84ad163291aa716c59fa3bec3715" title=" " alt="" coords="2933,377,3108,404"/>
<area shape="rect" href="ioapic_8h.html#a049de3e03383dab21c2cb6c3033e66ae" title=" " alt="" coords="2929,429,3112,456"/>
<area shape="rect" href="ioapic_8c.html#a6a7d0d8b3a3717172c57ed1916318952" title=" " alt="" coords="2719,247,2881,289"/>
<area shape="rect" href="ioapic_8c.html#a6c0258d75d3c40d5674a574997bdd453" title=" " alt="" coords="2719,365,2881,406"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="1645,229,1807,256"/>
<area shape="rect" href="ioapic_8c.html#a1d24315dec2401b4c45b224469c7379d" title=" " alt="" coords="2522,294,2667,335"/>
<area shape="rect" href="ioapic_8c.html#a477f1b98bf8d9dfcd1e51c743d79ac47" title=" " alt="" coords="1412,63,1536,89"/>
<area shape="rect" href="x86_8c.html#a9c81b1b4617fffe8115b748bf5f13860" title=" " alt="" coords="1140,21,1332,48"/>
<area shape="rect" href="x86_8c.html#a10224987f77e7370dd9f2b80352544ab" title=" " alt="" coords="922,5,1071,32"/>
<area shape="rect" href="ioapic_8c.html#aa590f4d1416bf84560a4e9693c638f55" title=" " alt="" coords="2350,301,2441,328"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="2096,331,2272,357"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="1911,280,2023,307"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="1652,280,1800,307"/>
<area shape="rect" href="irq__comm_8c.html#ae12bd4085acdb92be18af95ac983d5a5" title=" " alt="" coords="1400,155,1548,181"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="1150,87,1322,113"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="921,56,1073,83"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="698,56,853,83"/>
<area shape="rect" href="irq_8h.html#aaf23e09ccf4b445556e56ea8598e1311" title=" " alt="" coords="471,49,638,90"/>
<area shape="rect" href="x86_8c.html#aaf3dbbe842e06195f2e46694ea837380" title=" " alt="" coords="219,56,413,83"/>
<area shape="rect" href="kvm__main_8c.html#aaeec02d207c8ce5ca12b1ef2ac36fae0" title=" " alt="" coords="5,49,171,90"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="1885,331,2048,357"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="1675,331,1777,357"/>
<area shape="rect" href="lapic_8c.html#a501cf23b440691f979fad04c87067f93" title=" " alt="" coords="1615,385,1837,412"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="1387,323,1561,365"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1395,272,1553,299"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="1154,374,1318,415"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="928,491,1065,517"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="735,491,816,517"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="461,491,648,517"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="254,465,378,492"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1169,221,1303,248"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1139,167,1333,193"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1155,272,1317,299"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1165,323,1307,349"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="921,158,1073,199"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="907,224,1086,251"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="927,107,1067,133"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="696,213,855,254"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="903,275,1091,301"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="910,325,1083,352"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="709,279,842,305"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="921,376,1072,403"/>
<area shape="rect" href="vmx_8c.html#aa6d0d83d48d1737ca7aa8b2b5a6f066a" title=" " alt="" coords="1381,389,1567,416"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="2519,411,2671,437"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="2320,407,2471,449"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="1887,425,2046,452"/>
<area shape="rect" href="x86_8c.html#a8aac590d2b896fcad86c5a2971164c1c" title=" " alt="" coords="2732,431,2868,457"/>
</map>
</div>

</div>
</div>
<a id="ae7e74fde3e4fb01f561634e789b5eab4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7e74fde3e4fb01f561634e789b5eab4">&#9670;&nbsp;</a></span>kvm_apic_present()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_apic_present </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00211">211</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;{</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(vcpu) &amp;&amp; <a class="code" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4">kvm_apic_hw_enabled</a>(vcpu-&gt;arch.apic);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_ae7e74fde3e4fb01f561634e789b5eab4_cgraph.png" border="0" usemap="#alapic_8h_ae7e74fde3e4fb01f561634e789b5eab4_cgraph" alt=""/></div>
<map name="alapic_8h_ae7e74fde3e4fb01f561634e789b5eab4_cgraph" id="alapic_8h_ae7e74fde3e4fb01f561634e789b5eab4_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,147,57"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="195,5,365,32"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="221,56,339,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_ae7e74fde3e4fb01f561634e789b5eab4_icgraph.png" border="0" usemap="#alapic_8h_ae7e74fde3e4fb01f561634e789b5eab4_icgraph" alt=""/></div>
<map name="alapic_8h_ae7e74fde3e4fb01f561634e789b5eab4_icgraph" id="alapic_8h_ae7e74fde3e4fb01f561634e789b5eab4_icgraph">
<area shape="rect" title=" " alt="" coords="1201,638,1343,664"/>
<area shape="rect" href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf" title=" " alt="" coords="949,371,1127,398"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="959,834,1117,876"/>
<area shape="rect" href="lapic_8c.html#af2fa5313476adb8240d3595805d784fc" title=" " alt="" coords="923,574,1153,600"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="947,638,1129,664"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="943,762,1133,788"/>
<area shape="rect" href="lapic_8h.html#ac572ef1ae29ec34adf2d46f7b82cc620" title=" " alt="" coords="964,168,1112,195"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="938,1114,1138,1140"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="923,1266,1153,1292"/>
<area shape="rect" href="x86_8c.html#a8aac590d2b896fcad86c5a2971164c1c" title=" " alt="" coords="208,42,344,68"/>
<area shape="rect" href="irq_8c.html#a82ee83566d2724a298b67f23f481976b" title=" " alt="" coords="664,447,875,474"/>
<area shape="rect" href="irq_8c.html#ae3151f072a1bb4a732ee3854ab6cf619" title=" " alt="" coords="682,239,857,266"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="681,302,857,328"/>
<area shape="rect" href="vmx_2nested_8c.html#add1e82c32385142c0fca04a1db8cbc3a" title=" " alt="" coords="704,371,835,398"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="191,288,361,329"/>
<area shape="rect" href="svm_8c.html#a5c26f1ceaa6cc778d986bd33629dc539" title=" " alt="" coords="462,447,563,474"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="5,92,143,119"/>
<area shape="rect" href="x86_8c.html#a54ec69b24c80207e4e6122994db0a466" title=" " alt="" coords="427,244,598,271"/>
<area shape="rect" href="svm_2nested_8c.html#a3286f29b650004d599595557d310136e" title=" " alt="" coords="414,143,611,170"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="413,194,612,220"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="427,295,599,322"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fecee9010894e3a1513a0924e24dd6" title=" " alt="" coords="444,346,581,372"/>
<area shape="rect" href="vmx_2nested_8c.html#a23e3de8c964e87404eea818be6f70154" title=" " alt="" coords="441,396,584,423"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="434,802,591,828"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="203,802,349,828"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="682,548,857,575"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="457,548,568,575"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="457,599,568,626"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="703,599,835,626"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="694,650,845,676"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="438,650,587,676"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="712,903,827,930"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="696,1012,843,1039"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="689,700,850,727"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="715,751,824,778"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="716,802,823,828"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="457,954,569,980"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="409,852,616,879"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="409,903,616,930"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="437,1005,589,1046"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="434,1122,591,1148"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="431,1071,595,1098"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="423,700,602,727"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="416,751,609,778"/>
<area shape="rect" href="x86_8c.html#abe891acb00f8f1c0cd67017dc20b89a6" title=" " alt="" coords="680,161,859,202"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="693,1114,845,1140"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="705,1164,834,1191"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="694,1215,845,1242"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="425,1240,600,1267"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="692,1317,847,1358"/>
</map>
</div>

</div>
</div>
<a id="a4b7f12cb3ba68245df79bc30d938b728"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b7f12cb3ba68245df79bc30d938b728">&#9670;&nbsp;</a></span>kvm_apic_send_ipi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_apic_send_ipi </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>icr_low</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>icr_high</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01504">1504</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;{</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="keyword">struct </span>kvm_lapic_irq irq;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160; </div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="comment">/* KVM has no delay and should always clear the BUSY/PENDING flag. */</span></div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    WARN_ON_ONCE(icr_low &amp; APIC_ICR_BUSY);</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160; </div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    irq.vector = icr_low &amp; APIC_VECTOR_MASK;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    irq.delivery_mode = icr_low &amp; APIC_MODE_MASK;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    irq.dest_mode = icr_low &amp; <a class="code" href="lapic_8h.html#a5e58cf75a31cd26e03db7f201861a8e4">APIC_DEST_MASK</a>;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    irq.level = (icr_low &amp; APIC_INT_ASSERT) != 0;</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    irq.trig_mode = icr_low &amp; APIC_INT_LEVELTRIG;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    irq.shorthand = icr_low &amp; <a class="code" href="lapic_8h.html#ad3b78bd2ddd9b9b15390755b6df98d3d">APIC_SHORT_MASK</a>;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    irq.msi_redir_hint = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic))</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        irq.dest_id = icr_high;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        irq.dest_id = GET_XAPIC_DEST_FIELD(icr_high);</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160; </div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    trace_kvm_apic_ipi(icr_low, irq.dest_id);</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160; </div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <a class="code" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210">kvm_irq_delivery_to_apic</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm, apic, &amp;irq, NULL);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;}</div>
<div class="ttc" id="airq_8h_html_a50293a78b5c0b6715243dc7854bcb210"><div class="ttname"><a href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210">kvm_irq_delivery_to_apic</a></div><div class="ttdeci">int kvm_irq_delivery_to_apic(struct kvm *kvm, struct kvm_lapic *src, struct kvm_lapic_irq *irq, struct dest_map *dest_map)</div><div class="ttdef"><b>Definition:</b> <a href="irq__comm_8c_source.html#l00047">irq_comm.c:47</a></div></div>
<div class="ttc" id="alapic_8h_html_a07d3e1e4090a62753325dfa11d232cea"><div class="ttname"><a href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a></div><div class="ttdeci">static int apic_x2apic_mode(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00221">lapic.h:221</a></div></div>
<div class="ttc" id="alapic_8h_html_a5e58cf75a31cd26e03db7f201861a8e4"><div class="ttname"><a href="lapic_8h.html#a5e58cf75a31cd26e03db7f201861a8e4">APIC_DEST_MASK</a></div><div class="ttdeci">#define APIC_DEST_MASK</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00017">lapic.h:17</a></div></div>
<div class="ttc" id="alapic_8h_html_ad3b78bd2ddd9b9b15390755b6df98d3d"><div class="ttname"><a href="lapic_8h.html#ad3b78bd2ddd9b9b15390755b6df98d3d">APIC_SHORT_MASK</a></div><div class="ttdeci">#define APIC_SHORT_MASK</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00015">lapic.h:15</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a4b7f12cb3ba68245df79bc30d938b728_cgraph.png" border="0" usemap="#alapic_8h_a4b7f12cb3ba68245df79bc30d938b728_cgraph" alt=""/></div>
<map name="alapic_8h_a4b7f12cb3ba68245df79bc30d938b728_cgraph" id="alapic_8h_a4b7f12cb3ba68245df79bc30d938b728_cgraph">
<area shape="rect" title=" " alt="" coords="5,259,152,285"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="1231,232,1374,259"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="200,487,389,513"/>
<area shape="rect" href="lapic_8c.html#a47d52843df792ef8e7bffdfb66a3b40b" title=" " alt="" coords="959,409,1140,436"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="437,257,605,284"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="451,105,592,132"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="701,752,837,779"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1458,676,1627,703"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="444,686,599,727"/>
<area shape="rect" href="lapic_8h.html#adfbea71ac96b210fb91bef47c77194f1" title=" " alt="" coords="953,460,1146,487"/>
<area shape="rect" href="x86_8c.html#a47d88660a2a5f8ee22df1253604d1ed7" title=" " alt="" coords="971,511,1128,553"/>
<area shape="rect" href="lapic_8c.html#ac9fecb7d9f4574931650af9abb4b9f4c" title=" " alt="" coords="968,745,1131,772"/>
<area shape="rect" href="lapic_8c.html#a870119cb74033f360164df90029af75a" title=" " alt="" coords="659,295,878,321"/>
<area shape="rect" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6" title=" " alt="" coords="653,156,884,183"/>
<area shape="rect" href="lapic_8c.html#a8fb87d02d911e49b5793e391702afe7e" title=" " alt="" coords="708,219,829,245"/>
<area shape="rect" href="lapic_8c.html#a98bde25094c754b30e796357ba643ab0" title=" " alt="" coords="971,257,1127,284"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="977,359,1122,385"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1223,359,1382,385"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="989,105,1109,132"/>
<area shape="rect" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096" title=" " alt="" coords="993,156,1105,183"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1457,512,1628,539"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="709,105,828,132"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="981,796,1118,823"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1249,593,1357,620"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1238,644,1367,671"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1239,695,1366,721"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1240,745,1365,772"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1215,796,1391,823"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1221,847,1385,873"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1241,948,1364,975"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1439,923,1647,949"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1466,973,1619,1000"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="677,569,861,610"/>
<area shape="rect" href="lapic_8c.html#a079d589509607a9d9baa6bed3eae7fa6" title=" " alt="" coords="957,629,1142,670"/>
<area shape="rect" href="lapic_8c.html#abbce6da431ef5f15d85b5fc741d3ef72" title=" " alt="" coords="945,577,1154,604"/>
<area shape="rect" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3" title=" " alt="" coords="932,695,1167,721"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a4b7f12cb3ba68245df79bc30d938b728_icgraph.png" border="0" usemap="#alapic_8h_a4b7f12cb3ba68245df79bc30d938b728_icgraph" alt=""/></div>
<map name="alapic_8h_a4b7f12cb3ba68245df79bc30d938b728_icgraph" id="alapic_8h_a4b7f12cb3ba68245df79bc30d938b728_icgraph">
<area shape="rect" title=" " alt="" coords="1577,164,1724,191"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="905,158,1057,199"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1369,109,1526,136"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="1365,215,1529,241"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1153,59,1287,85"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1123,215,1317,241"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1139,109,1301,136"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1149,7,1291,33"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="891,224,1070,251"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="911,275,1051,301"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="656,217,815,258"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="887,56,1075,83"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="399,107,572,133"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="669,56,802,83"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,56,584,83"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,81,339,108"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,31,101,57"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,81,115,108"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,132,116,159"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="905,5,1056,32"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="1143,295,1297,337"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="903,326,1058,367"/>
<area shape="rect" href="svm_8c.html#a82c8447e70f06dd52623c696446104b5" title=" " alt="" coords="632,359,839,385"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="632,308,839,335"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="427,359,543,385"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="427,308,544,335"/>
</map>
</div>

</div>
</div>
<a id="a501cf23b440691f979fad04c87067f93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a501cf23b440691f979fad04c87067f93">&#9670;&nbsp;</a></span>kvm_apic_set_eoi_accelerated()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_apic_set_eoi_accelerated </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01493">1493</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;{</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160; </div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    trace_kvm_eoi(apic, vector);</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160; </div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <a class="code" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4">kvm_ioapic_send_eoi</a>(apic, vector);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    kvm_make_request(KVM_REQ_EVENT, apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a5001020f0ca8d6d692c54dd23b40ade4"><div class="ttname"><a href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4">kvm_ioapic_send_eoi</a></div><div class="ttdeci">static void kvm_ioapic_send_eoi(struct kvm_lapic *apic, int vector)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01442">lapic.c:1442</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a501cf23b440691f979fad04c87067f93_cgraph.png" border="0" usemap="#alapic_8h_a501cf23b440691f979fad04c87067f93_cgraph" alt=""/></div>
<map name="alapic_8h_a501cf23b440691f979fad04c87067f93_cgraph" id="alapic_8h_a501cf23b440691f979fad04c87067f93_cgraph">
<area shape="rect" title=" " alt="" coords="5,823,228,849"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="276,823,439,849"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="2146,645,2275,672"/>
<area shape="rect" href="irq_8h.html#a68413268c1f1f354270e9a0de9c2fe44" title=" " alt="" coords="524,848,625,875"/>
<area shape="rect" href="lapic_8c.html#a900c0170b3a9f3c6869d072aa14055d1" title=" " alt="" coords="497,899,652,941"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="487,411,663,437"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="711,411,917,437"/>
<area shape="rect" href="ioapic_8c.html#aa590f4d1416bf84560a4e9693c638f55" title=" " alt="" coords="769,220,859,247"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="981,480,1095,507"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="2138,309,2283,336"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1159,500,1348,527"/>
<area shape="rect" href="lapic_8c.html#a47d52843df792ef8e7bffdfb66a3b40b" title=" " alt="" coords="1867,747,2048,773"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="1616,157,1784,184"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="1407,745,1549,772"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="1632,639,1768,665"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="2366,797,2535,824"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="1401,522,1555,563"/>
<area shape="rect" href="lapic_8h.html#adfbea71ac96b210fb91bef47c77194f1" title=" " alt="" coords="1861,411,2054,437"/>
<area shape="rect" href="x86_8c.html#a47d88660a2a5f8ee22df1253604d1ed7" title=" " alt="" coords="1879,462,2036,503"/>
<area shape="rect" href="lapic_8c.html#ac9fecb7d9f4574931650af9abb4b9f4c" title=" " alt="" coords="1876,696,2039,723"/>
<area shape="rect" href="lapic_8c.html#a870119cb74033f360164df90029af75a" title=" " alt="" coords="1848,208,2067,235"/>
<area shape="rect" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6" title=" " alt="" coords="1842,107,2073,133"/>
<area shape="rect" href="lapic_8c.html#a8fb87d02d911e49b5793e391702afe7e" title=" " alt="" coords="1897,157,2018,184"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="2379,208,2522,235"/>
<area shape="rect" href="lapic_8c.html#a98bde25094c754b30e796357ba643ab0" title=" " alt="" coords="2133,208,2289,235"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="2371,309,2530,336"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="2151,5,2271,32"/>
<area shape="rect" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096" title=" " alt="" coords="2155,56,2267,83"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="2365,975,2536,1001"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1641,745,1759,772"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1889,848,2026,875"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="2157,949,2265,976"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="2147,848,2274,875"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="2148,899,2273,925"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="2123,696,2299,723"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="2129,747,2293,773"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="2149,797,2272,824"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="2347,848,2555,875"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="2374,747,2527,773"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="1608,522,1792,563"/>
<area shape="rect" href="lapic_8c.html#a079d589509607a9d9baa6bed3eae7fa6" title=" " alt="" coords="1865,579,2050,621"/>
<area shape="rect" href="lapic_8c.html#abbce6da431ef5f15d85b5fc741d3ef72" title=" " alt="" coords="1853,528,2062,555"/>
<area shape="rect" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3" title=" " alt="" coords="1840,645,2075,672"/>
<area shape="rect" href="ioapic_8c.html#a1d24315dec2401b4c45b224469c7379d" title=" " alt="" coords="965,193,1111,234"/>
<area shape="rect" href="ioapic_8c.html#a6a7d0d8b3a3717172c57ed1916318952" title=" " alt="" coords="1172,134,1335,175"/>
<area shape="rect" href="ioapic_8c.html#aca4e6c938829fb401b5c01cba3bd19b2" title=" " alt="" coords="1396,193,1560,234"/>
<area shape="rect" href="ioapic_8c.html#a4d9be607caa84875994b688c86711dcc" title=" " alt="" coords="1403,127,1553,169"/>
<area shape="rect" href="lapic_8c.html#a637f6f499709ab30e61db1b69177ea00" title=" " alt="" coords="1615,208,1785,235"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a501cf23b440691f979fad04c87067f93_icgraph.png" border="0" usemap="#alapic_8h_a501cf23b440691f979fad04c87067f93_icgraph" alt=""/></div>
<map name="alapic_8h_a501cf23b440691f979fad04c87067f93_icgraph" id="alapic_8h_a501cf23b440691f979fad04c87067f93_icgraph">
<area shape="rect" title=" " alt="" coords="239,5,461,32"/>
<area shape="rect" href="vmx_8c.html#aa6d0d83d48d1737ca7aa8b2b5a6f066a" title=" " alt="" coords="5,5,191,32"/>
</map>
</div>

</div>
</div>
<a id="a3d272e1b73f22f797955e7ddea84b741"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d272e1b73f22f797955e7ddea84b741">&#9670;&nbsp;</a></span>kvm_apic_set_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_apic_set_irq </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_lapic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdest__map.html">dest_map</a> *&#160;</td>
          <td class="paramname"><em>dest_map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00823">823</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;{</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10">__apic_accept_irq</a>(apic, irq-&gt;delivery_mode, irq-&gt;vector,</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            irq-&gt;level, irq-&gt;trig_mode, <a class="code" href="structdest__map.html">dest_map</a>);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;}</div>
<div class="ttc" id="astructdest__map_html"><div class="ttname"><a href="structdest__map.html">dest_map</a></div><div class="ttdef"><b>Definition:</b> <a href="ioapic_8h_source.html#l00040">ioapic.h:40</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a3d272e1b73f22f797955e7ddea84b741_cgraph.png" border="0" usemap="#alapic_8h_a3d272e1b73f22f797955e7ddea84b741_cgraph" alt=""/></div>
<map name="alapic_8h_a3d272e1b73f22f797955e7ddea84b741_cgraph" id="alapic_8h_a3d272e1b73f22f797955e7ddea84b741_cgraph">
<area shape="rect" title=" " alt="" coords="5,183,141,209"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="189,183,327,209"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="409,31,517,57"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="398,81,527,108"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="399,132,526,159"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="400,183,525,209"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="375,233,551,260"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="381,284,545,311"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="401,335,524,361"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="617,5,788,32"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="618,56,787,83"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="599,309,807,336"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="626,360,779,387"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a3d272e1b73f22f797955e7ddea84b741_icgraph.png" border="0" usemap="#alapic_8h_a3d272e1b73f22f797955e7ddea84b741_icgraph" alt=""/></div>
<map name="alapic_8h_a3d272e1b73f22f797955e7ddea84b741_icgraph" id="alapic_8h_a3d272e1b73f22f797955e7ddea84b741_icgraph">
<area shape="rect" title=" " alt="" coords="1209,642,1345,668"/>
<area shape="rect" href="lapic_8c.html#a33f4e295e9710d133e3e38e0aed35edb" title=" " alt="" coords="1005,530,1119,556"/>
<area shape="rect" href="x86_8c.html#a62f68db08e13f0a4f3d158afda4631b1" title=" " alt="" coords="977,853,1147,894"/>
<area shape="rect" href="hyperv_8c.html#a31df0137f9f8af335cbac3d4179b12a2" title=" " alt="" coords="963,474,1161,500"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="725,568,915,595"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="985,664,1139,705"/>
<area shape="rect" href="hyperv_8c.html#abc5b43adce506bcd416c9e84aa6cf54b" title=" " alt="" coords="986,966,1138,992"/>
<area shape="rect" href="lapic_8c.html#a7195db5c58bcea2e080ee79cdaeae617" title=" " alt="" coords="753,510,887,536"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="5,51,184,78"/>
<area shape="rect" href="async__pf_8c.html#ad9b3dc2e31779a009859785fae9a8ec5" title=" " alt="" coords="751,860,889,887"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="739,946,901,988"/>
<area shape="rect" href="async__pf_8c.html#a55ca283598f3d739a56b50a0f7b908e2" title=" " alt="" coords="503,860,661,887"/>
<area shape="rect" href="mmu_8c.html#a1dfa699dd0b96d4724b718c504e376c9" title=" " alt="" coords="238,852,433,879"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="495,954,669,980"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="267,1055,404,1082"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="295,1004,376,1031"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="281,903,390,930"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="280,954,391,980"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="54,928,135,955"/>
<area shape="rect" href="hyperv_8c.html#a4ca4f7e6e021870753e15fa1072e828d" title=" " alt="" coords="753,456,887,483"/>
<area shape="rect" href="hyperv_8c.html#ac96f1fa9ec6ac0ac26c24ca65cc1547e" title=" " alt="" coords="511,26,653,52"/>
<area shape="rect" href="xen_8c.html#aaf398a8803a79984b06fbf9e2a64193c" title=" " alt="" coords="261,26,409,52"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="525,279,639,306"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="509,468,655,495"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="501,178,663,204"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="527,568,637,595"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="529,638,635,664"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="279,279,391,306"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="257,330,414,356"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="232,178,439,204"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="232,228,439,255"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="13,279,176,306"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="21,330,169,356"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="21,380,168,407"/>
<area shape="rect" href="ioapic_8c.html#a21c528e901ef596bba3f882ed5ac9597" title=" " alt="" coords="32,178,157,204"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="7,228,183,255"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="259,432,411,473"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="257,498,414,524"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="253,380,417,407"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="27,498,162,524"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="239,548,432,575"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="249,599,421,626"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="252,650,419,676"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="264,700,407,727"/>
<area shape="rect" href="irq__comm_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="235,751,436,778"/>
<area shape="rect" href="xen_8c.html#a7ba53f4f869b74569192380f1adfd40c" title=" " alt="" coords="739,740,901,781"/>
<area shape="rect" href="xen_8c.html#a0fb0356e88890003922daf35627420a8" title=" " alt="" coords="491,794,673,836"/>
<area shape="rect" href="xen_8c.html#a48738df3c98025631e2412d90758136c" title=" " alt="" coords="487,743,677,770"/>
<area shape="rect" href="hyperv_8c.html#acbc8238b9eb8f24485d6bc9eefc06474" title=" " alt="" coords="751,1034,889,1060"/>
<area shape="rect" href="hyperv_8c.html#a899d9e3beba5f4a4bdc0f2a9f94d2943" title=" " alt="" coords="489,1055,675,1082"/>
</map>
</div>

</div>
</div>
<a id="a4768d4990380510ec220c3e510d32598"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4768d4990380510ec220c3e510d32598">&#9670;&nbsp;</a></span>kvm_apic_set_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_apic_set_state </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_lapic_state *&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02984">2984</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;{</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;    <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160; </div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;    static_call_cond(kvm_x86_apicv_pre_state_restore)(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160; </div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;    <a class="code" href="lapic_8c.html#a8d747385873e52f47e85179c21521e73">kvm_lapic_set_base</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_base);</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;    <span class="comment">/* set SPIV separately to get count of SW disabled APICs right */</span></div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;    <a class="code" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe">apic_set_spiv</a>(apic, *((u32 *)(s-&gt;regs + APIC_SPIV)));</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160; </div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    r = <a class="code" href="lapic_8c.html#a5862d5df95ddd956a652f1dd3f319706">kvm_apic_state_fixup</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, s, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    <span class="keywordflow">if</span> (r) {</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;        <a class="code" href="lapic_8c.html#a756b707dd502680db2eed7759defde40">kvm_recalculate_apic_map</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm);</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    }</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    memcpy(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic-&gt;regs, s-&gt;regs, <span class="keyword">sizeof</span>(*s));</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160; </div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;    atomic_set_release(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm-&gt;arch.apic_map_dirty, <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a6a4e132eb192a22c351397837d4c082c">DIRTY</a>);</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;    <a class="code" href="lapic_8c.html#a756b707dd502680db2eed7759defde40">kvm_recalculate_apic_map</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm);</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;    <a class="code" href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf">kvm_apic_set_version</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160; </div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;    <a class="code" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab">apic_update_ppr</a>(apic);</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;    <a class="code" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2">cancel_apic_timer</a>(apic);</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a23c6ec12b6c61cf7b3c02ff13099dbcf">expired_tscdeadline</a> = 0;</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;    <a class="code" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d">apic_update_lvtt</a>(apic);</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;    <a class="code" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1">apic_manage_nmi_watchdog</a>(apic, <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_LVT0));</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;    <a class="code" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3">update_divide_count</a>(apic);</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;    <a class="code" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005">__start_apic_timer</a>(apic, APIC_TMCCT);</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_TMCCT, 0);</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;    <a class="code" href="lapic_8c.html#a5468339c2df08ca538b77d4d48915c35">kvm_apic_update_apicv</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;    <span class="keywordflow">if</span> (apic-&gt;<a class="code" href="structkvm__lapic.html#a4642d7f446bbd9ede893aa1ebbcc9c1a">apicv_active</a>) {</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;        static_call_cond(kvm_x86_apicv_post_state_restore)(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;        static_call_cond(kvm_x86_hwapic_irr_update)(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, <a class="code" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79">apic_find_highest_irr</a>(apic));</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;        static_call_cond(kvm_x86_hwapic_isr_update)(<a class="code" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0">apic_find_highest_isr</a>(apic));</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;    }</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;    kvm_make_request(KVM_REQ_EVENT, <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ioapic_8h.html#a5efb8a822bd7119cfc8db075f12bf452">ioapic_in_kernel</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm))</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;        <a class="code" href="ioapic_8c.html#a6c0258d75d3c40d5674a574997bdd453">kvm_rtc_eoi_tracking_restore_one</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160; </div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;    <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_arb_prio = 0;</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160; </div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;}</div>
<div class="ttc" id="aioapic_8c_html_a6c0258d75d3c40d5674a574997bdd453"><div class="ttname"><a href="ioapic_8c.html#a6c0258d75d3c40d5674a574997bdd453">kvm_rtc_eoi_tracking_restore_one</a></div><div class="ttdeci">void kvm_rtc_eoi_tracking_restore_one(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="ioapic_8c_source.html#l00139">ioapic.c:139</a></div></div>
<div class="ttc" id="aioapic_8h_html_a5efb8a822bd7119cfc8db075f12bf452"><div class="ttname"><a href="ioapic_8h.html#a5efb8a822bd7119cfc8db075f12bf452">ioapic_in_kernel</a></div><div class="ttdeci">static int ioapic_in_kernel(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="ioapic_8h_source.html#l00104">ioapic.h:104</a></div></div>
<div class="ttc" id="alapic_8c_html_a108aca5a9980d721f30b333be204d005"><div class="ttname"><a href="lapic_8c.html#a108aca5a9980d721f30b333be204d005">__start_apic_timer</a></div><div class="ttdeci">static void __start_apic_timer(struct kvm_lapic *apic, u32 count_reg)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02216">lapic.c:2216</a></div></div>
<div class="ttc" id="alapic_8c_html_a5468339c2df08ca538b77d4d48915c35"><div class="ttname"><a href="lapic_8c.html#a5468339c2df08ca538b77d4d48915c35">kvm_apic_update_apicv</a></div><div class="ttdeci">void kvm_apic_update_apicv(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02578">lapic.c:2578</a></div></div>
<div class="ttc" id="alapic_8c_html_a756b707dd502680db2eed7759defde40"><div class="ttname"><a href="lapic_8c.html#a756b707dd502680db2eed7759defde40">kvm_recalculate_apic_map</a></div><div class="ttdeci">void kvm_recalculate_apic_map(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00374">lapic.c:374</a></div></div>
<div class="ttc" id="alapic_8c_html_a7cfae0ee851075e6141d0446f4a133ab"><div class="ttname"><a href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab">apic_update_ppr</a></div><div class="ttdeci">static void apic_update_ppr(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00966">lapic.c:966</a></div></div>
<div class="ttc" id="alapic_8c_html_a80d977ac48cfa76440f2961e38b23fd0"><div class="ttname"><a href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0">apic_find_highest_isr</a></div><div class="ttdeci">static int apic_find_highest_isr(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00768">lapic.c:768</a></div></div>
<div class="ttc" id="alapic_8c_html_a8aa5f66b440e07d680f42fdaa211eac2"><div class="ttname"><a href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2">cancel_apic_timer</a></div><div class="ttdeci">static void cancel_apic_timer(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01744">lapic.c:1744</a></div></div>
<div class="ttc" id="alapic_8c_html_a8d747385873e52f47e85179c21521e73"><div class="ttname"><a href="lapic_8c.html#a8d747385873e52f47e85179c21521e73">kvm_lapic_set_base</a></div><div class="ttdeci">void kvm_lapic_set_base(struct kvm_vcpu *vcpu, u64 value)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02530">lapic.c:2530</a></div></div>
<div class="ttc" id="alapic_8c_html_a946cf21407471f7a6ba449b2435055c3"><div class="ttname"><a href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3">update_divide_count</a></div><div class="ttdeci">static void update_divide_count(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01711">lapic.c:1711</a></div></div>
<div class="ttc" id="alapic_8c_html_aaf8fd5f0e57d456151c951e0f3715fc4a6a4e132eb192a22c351397837d4c082c"><div class="ttname"><a href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a6a4e132eb192a22c351397837d4c082c">DIRTY</a></div><div class="ttdeci">@ DIRTY</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00372">lapic.c:371</a></div></div>
<div class="ttc" id="alapic_8c_html_ac7a03b55710bfcc78be7af0609f6f93d"><div class="ttname"><a href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d">apic_update_lvtt</a></div><div class="ttdeci">static void apic_update_lvtt(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01754">lapic.c:1754</a></div></div>
<div class="ttc" id="alapic_8c_html_aeb32a868e76d57da9fab57fce43efdbe"><div class="ttname"><a href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe">apic_set_spiv</a></div><div class="ttdeci">static void apic_set_spiv(struct kvm_lapic *apic, u32 val)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00486">lapic.c:486</a></div></div>
<div class="ttc" id="alapic_8c_html_aebc526fc8720e4db45143f8e05f85c79"><div class="ttname"><a href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79">apic_find_highest_irr</a></div><div class="ttdeci">static int apic_find_highest_irr(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00706">lapic.c:706</a></div></div>
<div class="ttc" id="alapic_8c_html_afefd171448cafa66f80ecb9b9659ebb1"><div class="ttname"><a href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1">apic_manage_nmi_watchdog</a></div><div class="ttdeci">static void apic_manage_nmi_watchdog(struct kvm_lapic *apic, u32 lvt0_val)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02232">lapic.c:2232</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_a2e61dc072b6f41497ade5b4a59b2c52a"><div class="ttname"><a href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">kvm_lapic::lapic_timer</a></div><div class="ttdeci">struct kvm_timer lapic_timer</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00060">lapic.h:62</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_a4642d7f446bbd9ede893aa1ebbcc9c1a"><div class="ttname"><a href="structkvm__lapic.html#a4642d7f446bbd9ede893aa1ebbcc9c1a">kvm_lapic::apicv_active</a></div><div class="ttdeci">bool apicv_active</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00065">lapic.h:65</a></div></div>
<div class="ttc" id="astructkvm__timer_html_a23c6ec12b6c61cf7b3c02ff13099dbcf"><div class="ttname"><a href="structkvm__timer.html#a23c6ec12b6c61cf7b3c02ff13099dbcf">kvm_timer::expired_tscdeadline</a></div><div class="ttdeci">u64 expired_tscdeadline</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00053">lapic.h:53</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a4768d4990380510ec220c3e510d32598_cgraph.png" border="0" usemap="#alapic_8h_a4768d4990380510ec220c3e510d32598_cgraph" alt=""/></div>
<map name="alapic_8h_a4768d4990380510ec220c3e510d32598_cgraph" id="alapic_8h_a4768d4990380510ec220c3e510d32598_cgraph">
<area shape="rect" title=" " alt="" coords="5,712,157,739"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="239,88,382,115"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="751,1067,897,1094"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="752,662,896,688"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="746,307,902,334"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="745,459,903,486"/>
<area shape="rect" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1" title=" " alt="" coords="205,324,416,351"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="255,662,366,688"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="507,408,637,435"/>
<area shape="rect" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2" title=" " alt="" coords="754,358,894,384"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="246,510,375,536"/>
<area shape="rect" href="ioapic_8h.html#a5efb8a822bd7119cfc8db075f12bf452" title=" " alt="" coords="509,814,635,840"/>
<area shape="rect" href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf" title=" " alt="" coords="227,763,394,790"/>
<area shape="rect" href="lapic_8c.html#a5862d5df95ddd956a652f1dd3f319706" title=" " alt="" coords="490,1488,654,1515"/>
<area shape="rect" href="lapic_8c.html#a5468339c2df08ca538b77d4d48915c35" title=" " alt="" coords="221,1098,400,1124"/>
<area shape="rect" href="lapic_8c.html#a8d747385873e52f47e85179c21521e73" title=" " alt="" coords="233,883,388,910"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="211,1270,411,1296"/>
<area shape="rect" href="ioapic_8c.html#a6c0258d75d3c40d5674a574997bdd453" title=" " alt="" coords="229,1321,392,1362"/>
<area shape="rect" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3" title=" " alt="" coords="232,971,389,998"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="755,88,893,115"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="984,88,1111,115"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="753,38,895,64"/>
<area shape="rect" href="lapic_8c.html#a0efcb9037756de47e9d28f0a5ea1009f" title=" " alt="" coords="491,139,653,166"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="747,190,901,232"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="968,1290,1127,1316"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="968,839,1127,866"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="987,307,1107,334"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1175,371,1324,398"/>
<area shape="rect" href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c" title=" " alt="" coords="497,291,647,318"/>
<area shape="rect" href="xen_8h.html#ae436f94d060f3cb8029695c5a9fddc42" title=" " alt="" coords="475,611,669,638"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="744,408,904,435"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="983,358,1112,384"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="501,510,643,536"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="501,342,643,384"/>
<area shape="rect" href="irq_8h.html#aeedc8b3b9e709414b2db2436224b75e8" title=" " alt="" coords="767,814,881,840"/>
<area shape="rect" href="cpuid_8h.html#ad8c2a90f2f099af1d7ca23750d9d2eb9" title=" " alt="" coords="507,763,637,790"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="765,1143,883,1170"/>
<area shape="rect" href="lapic_8c.html#aa06cb4ebbfa40dbfa494b3b4cd9f8833" title=" " alt="" coords="737,1412,911,1439"/>
<area shape="rect" href="lapic_8c.html#a39839decdbbb9e8a6718f3ac7c0b3707" title=" " alt="" coords="737,1463,911,1490"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="753,1280,895,1307"/>
<area shape="rect" href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f" title=" " alt="" coords="728,1219,920,1246"/>
<area shape="rect" href="lapic_8c.html#a40e5c52e8a79166cfc433f413bbe9e36" title=" " alt="" coords="515,1118,629,1144"/>
<area shape="rect" href="lapic_8c.html#a22d25ec6370d0efd4c569b7317d28098" title=" " alt="" coords="481,966,663,992"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="485,864,659,891"/>
<area shape="rect" href="cpuid_8c.html#a537512099e11c7ab0553aeae5e38d9ea" title=" " alt="" coords="471,1016,673,1043"/>
<area shape="rect" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39" title=" " alt="" coords="506,1270,638,1296"/>
<area shape="rect" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44" title=" " alt="" coords="495,1320,649,1347"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="501,1371,643,1398"/>
<area shape="rect" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d" title=" " alt="" coords="483,1422,661,1464"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="464,1219,680,1246"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a4768d4990380510ec220c3e510d32598_icgraph.png" border="0" usemap="#alapic_8h_a4768d4990380510ec220c3e510d32598_icgraph" alt=""/></div>
<map name="alapic_8h_a4768d4990380510ec220c3e510d32598_icgraph" id="alapic_8h_a4768d4990380510ec220c3e510d32598_icgraph">
<area shape="rect" title=" " alt="" coords="583,13,735,39"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="384,5,535,47"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,13,336,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="aaa6716cc0b30bec513d223fbfdecfdcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa6716cc0b30bec513d223fbfdecfdcf">&#9670;&nbsp;</a></span>kvm_apic_set_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_apic_set_version </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00573">573</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;{</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    u32 v = 0;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>))</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    v = <a class="code" href="lapic_8c.html#ab1a256486b56b5660f30be7a7c352672">APIC_VERSION</a> | ((apic-&gt;<a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a> - 1) &lt;&lt; 16);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160; </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">     * KVM emulates 82093AA datasheet (with in-kernel IOAPIC implementation)</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">     * which doesn&#39;t have EOI register; Some buggy OSes (e.g. Windows with</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">     * Hyper-V role) disable EOI broadcast in lapic not checking for IOAPIC</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">     * version first and level-triggered interrupts never get EOIed in</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">     * IOAPIC.</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cpuid_8h.html#ad8c2a90f2f099af1d7ca23750d9d2eb9">guest_cpuid_has</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, X86_FEATURE_X2APIC) &amp;&amp;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        !<a class="code" href="ioapic_8h.html#a5efb8a822bd7119cfc8db075f12bf452">ioapic_in_kernel</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm))</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        v |= APIC_LVR_DIRECTED_EOI;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_LVR, v);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;}</div>
<div class="ttc" id="acpuid_8h_html_ad8c2a90f2f099af1d7ca23750d9d2eb9"><div class="ttname"><a href="cpuid_8h.html#ad8c2a90f2f099af1d7ca23750d9d2eb9">guest_cpuid_has</a></div><div class="ttdeci">static __always_inline bool guest_cpuid_has(struct kvm_vcpu *vcpu, unsigned int x86_feature)</div><div class="ttdef"><b>Definition:</b> <a href="cpuid_8h_source.html#l00083">cpuid.h:83</a></div></div>
<div class="ttc" id="alapic_8c_html_ab1a256486b56b5660f30be7a7c352672"><div class="ttname"><a href="lapic_8c.html#ab1a256486b56b5660f30be7a7c352672">APIC_VERSION</a></div><div class="ttdeci">#define APIC_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00056">lapic.c:56</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_aaa6716cc0b30bec513d223fbfdecfdcf_cgraph.png" border="0" usemap="#alapic_8h_aaa6716cc0b30bec513d223fbfdecfdcf_cgraph" alt=""/></div>
<map name="alapic_8h_aaa6716cc0b30bec513d223fbfdecfdcf_cgraph" id="alapic_8h_aaa6716cc0b30bec513d223fbfdecfdcf_cgraph">
<area shape="rect" title=" " alt="" coords="5,171,172,197"/>
<area shape="rect" href="cpuid_8h.html#ad8c2a90f2f099af1d7ca23750d9d2eb9" title=" " alt="" coords="227,95,357,121"/>
<area shape="rect" href="ioapic_8h.html#a5efb8a822bd7119cfc8db075f12bf452" title=" " alt="" coords="229,145,355,172"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="220,196,364,223"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="233,247,351,273"/>
<area shape="rect" href="reverse__cpuid_8h.html#aeac4cdaa1c8b53f46ea791f355b1d08c" title=" " alt="" coords="676,5,783,32"/>
<area shape="rect" href="cpuid_8h.html#af2af2645f203b5d9bad2088af0da5c1e" title=" " alt="" coords="412,95,597,121"/>
<area shape="rect" href="reverse__cpuid_8h.html#a76ac51b62ef170b755204cb8b958e585" title=" " alt="" coords="1068,31,1216,57"/>
<area shape="rect" href="reverse__cpuid_8h.html#ae10c1644e90cb8443e5a32554acfd700" title=" " alt="" coords="861,31,1020,57"/>
<area shape="rect" href="reverse__cpuid_8h.html#adf3299d46978c685ba9b46ebb1536680" title=" " alt="" coords="645,107,813,133"/>
<area shape="rect" href="cpuid_8h.html#a638557b30255883157acafa55a351d0d" title=" " alt="" coords="647,158,812,199"/>
<area shape="rect" href="reverse__cpuid_8h.html#a3f7e53c68e5610be44d760fd4854f892" title=" " alt="" coords="658,56,801,83"/>
<area shape="rect" href="cpuid_8c.html#a7220f0f9a6d0047aef7619e272fa9518" title=" " alt="" coords="872,165,1009,192"/>
<area shape="rect" href="reverse__cpuid_8h.html#a8f6dc89865c6af98e621e1ddcf401cae" title=" " alt="" coords="883,81,998,108"/>
<area shape="rect" href="irq_8h.html#aeedc8b3b9e709414b2db2436224b75e8" title=" " alt="" coords="448,145,561,172"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="425,196,584,223"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_aaa6716cc0b30bec513d223fbfdecfdcf_icgraph.png" border="0" usemap="#alapic_8h_aaa6716cc0b30bec513d223fbfdecfdcf_icgraph" alt=""/></div>
<map name="alapic_8h_aaa6716cc0b30bec513d223fbfdecfdcf_icgraph" id="alapic_8h_aaa6716cc0b30bec513d223fbfdecfdcf_icgraph">
<area shape="rect" title=" " alt="" coords="1505,149,1672,175"/>
<area shape="rect" href="lapic_8c.html#a200be826b3634c1b5a377464f35d540f" title=" " alt="" coords="1306,173,1455,215"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1305,27,1457,54"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1316,261,1445,287"/>
<area shape="rect" href="cpuid_8c.html#ae8f7489a3e05a9bcd5dfdae82c33d618" title=" " alt="" coords="1304,108,1457,149"/>
<area shape="rect" href="x86_8c.html#a10dfde66dc94e352514570cc4a2beaa2" title=" " alt="" coords="1101,173,1256,215"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="639,122,798,149"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,181,129,207"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1103,5,1254,47"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1114,271,1243,298"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="867,282,1053,309"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="874,358,1046,385"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="875,231,1045,258"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="412,173,571,215"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,261,364,287"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="671,282,766,309"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="650,231,787,258"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="451,261,532,287"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="619,383,819,410"/>
<area shape="rect" href="cpuid_8c.html#a0ff60eac33c1bf95a3889674e34251ad" title=" " alt="" coords="1119,115,1239,142"/>
<area shape="rect" href="cpuid_8c.html#a5066ac0b188677d15925709568a91c9d" title=" " alt="" coords="885,115,1035,156"/>
<area shape="rect" href="cpuid_8c.html#ad4dde50a2939106abd2baf99683ac139" title=" " alt="" coords="885,49,1035,91"/>
</map>
</div>

</div>
</div>
<a id="a447b1b971acaf871dd62669b4aa3116f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a447b1b971acaf871dd62669b4aa3116f">&#9670;&nbsp;</a></span>kvm_apic_sw_enabled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_apic_sw_enabled </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00204">204</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;{</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">if</span> (static_branch_unlikely(&amp;<a class="code" href="lapic_8h.html#a3c2a1bc1bb244452f5338719ef4e73c8">apic_sw_disabled</a>.key))</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">return</span> apic-&gt;<a class="code" href="structkvm__lapic.html#afc6c88da7e5d98be1e6e833ca181dab2">sw_enabled</a>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
<div class="ttc" id="alapic_8h_html_a3c2a1bc1bb244452f5338719ef4e73c8"><div class="ttname"><a href="lapic_8h.html#a3c2a1bc1bb244452f5338719ef4e73c8">apic_sw_disabled</a></div><div class="ttdeci">struct static_key_false_deferred apic_sw_disabled</div></div>
<div class="ttc" id="astructkvm__lapic_html_afc6c88da7e5d98be1e6e833ca181dab2"><div class="ttname"><a href="structkvm__lapic.html#afc6c88da7e5d98be1e6e833ca181dab2">kvm_lapic::sw_enabled</a></div><div class="ttdeci">bool sw_enabled</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00066">lapic.h:66</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a447b1b971acaf871dd62669b4aa3116f_icgraph.png" border="0" usemap="#alapic_8h_a447b1b971acaf871dd62669b4aa3116f_icgraph" alt=""/></div>
<map name="alapic_8h_a447b1b971acaf871dd62669b4aa3116f_icgraph" id="alapic_8h_a447b1b971acaf871dd62669b4aa3116f_icgraph">
<area shape="rect" title=" " alt="" coords="1939,554,2108,581"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1729,201,1837,227"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="962,554,1151,581"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="509,921,666,947"/>
<area shape="rect" href="lapic_8h.html#ac572ef1ae29ec34adf2d46f7b82cc620" title=" " alt="" coords="1217,427,1365,454"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="1675,895,1891,922"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1458,201,1595,227"/>
<area shape="rect" href="irq_8h.html#afcf66d0c1c15dcbd414e2dbf830d7b29" title=" " alt="" coords="1437,33,1617,59"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="1204,117,1379,143"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="1223,259,1359,286"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="963,25,1150,67"/>
<area shape="rect" href="pmu_8c.html#a03a16f548326b68245a4bf0555bea777" title=" " alt="" coords="739,142,909,169"/>
<area shape="rect" href="x86_8c.html#a130b6ed14cf18384646cb31251dd104e" title=" " alt="" coords="964,91,1149,118"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="519,171,656,198"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="298,101,379,127"/>
<area shape="rect" href="lapic_8c.html#a33f4e295e9710d133e3e38e0aed35edb" title=" " alt="" coords="1000,259,1113,286"/>
<area shape="rect" href="x86_8c.html#a62f68db08e13f0a4f3d158afda4631b1" title=" " alt="" coords="971,193,1142,235"/>
<area shape="rect" href="hyperv_8c.html#a31df0137f9f8af335cbac3d4179b12a2" title=" " alt="" coords="957,310,1156,337"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="743,193,905,235"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="767,667,881,694"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="751,769,897,795"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="743,465,905,491"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="769,515,879,542"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="771,566,877,593"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="531,667,643,694"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="509,718,666,745"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="484,769,691,795"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="484,617,691,643"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="23,753,175,795"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="505,870,669,897"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="271,971,406,998"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="241,870,436,897"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="258,921,419,947"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="267,1022,410,1049"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="10,819,189,846"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="29,870,169,897"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="5,921,193,947"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="13,971,186,998"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="24,1022,175,1049"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="498,363,677,390"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="491,465,684,491"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="501,414,673,441"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="504,566,671,593"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="516,515,659,542"/>
<area shape="rect" href="irq_8c.html#a78e23e83bece8c269268f3a263fbb114" title=" " alt="" coords="739,21,909,63"/>
<area shape="rect" href="x86_8c.html#abe891acb00f8f1c0cd67017dc20b89a6" title=" " alt="" coords="967,361,1146,403"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="1427,921,1627,947"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1215,971,1367,998"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1227,870,1356,897"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="1216,921,1367,947"/>
</map>
</div>

</div>
</div>
<a id="a5468339c2df08ca538b77d4d48915c35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5468339c2df08ca538b77d4d48915c35">&#9670;&nbsp;</a></span>kvm_apic_update_apicv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_apic_update_apicv </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02578">2578</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;{</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160; </div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    <span class="keywordflow">if</span> (apic-&gt;<a class="code" href="structkvm__lapic.html#a4642d7f446bbd9ede893aa1ebbcc9c1a">apicv_active</a>) {</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;        <span class="comment">/* irr_pending is always true when apicv is activated. */</span></div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#ada91b44df57789499ad32ad287c21217">irr_pending</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#ad8506269387d80ddd1c6cc8a96c9398a">isr_count</a> = 1;</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;<span class="comment">         * Don&#39;t clear irr_pending, searching the IRR can race with</span></div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;<span class="comment">         * updates from the CPU as APICv is still active from hardware&#39;s</span></div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;<span class="comment">         * perspective.  The flag will be cleared as appropriate when</span></div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;<span class="comment">         * KVM injects the interrupt.</span></div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#ad8506269387d80ddd1c6cc8a96c9398a">isr_count</a> = <a class="code" href="lapic_8c.html#a40e5c52e8a79166cfc433f413bbe9e36">count_vectors</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_ISR);</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    }</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a4b58ed7ed33fe007d319d39271d8d1b9">highest_isr_cache</a> = -1;</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a40e5c52e8a79166cfc433f413bbe9e36"><div class="ttname"><a href="lapic_8c.html#a40e5c52e8a79166cfc433f413bbe9e36">count_vectors</a></div><div class="ttdeci">static u8 count_vectors(void *bitmap)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00640">lapic.c:640</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_a4b58ed7ed33fe007d319d39271d8d1b9"><div class="ttname"><a href="structkvm__lapic.html#a4b58ed7ed33fe007d319d39271d8d1b9">kvm_lapic::highest_isr_cache</a></div><div class="ttdeci">int highest_isr_cache</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00072">lapic.h:72</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_ad8506269387d80ddd1c6cc8a96c9398a"><div class="ttname"><a href="structkvm__lapic.html#ad8506269387d80ddd1c6cc8a96c9398a">kvm_lapic::isr_count</a></div><div class="ttdeci">s16 isr_count</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00070">lapic.h:70</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_ada91b44df57789499ad32ad287c21217"><div class="ttname"><a href="structkvm__lapic.html#ada91b44df57789499ad32ad287c21217">kvm_lapic::irr_pending</a></div><div class="ttdeci">bool irr_pending</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00067">lapic.h:67</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a5468339c2df08ca538b77d4d48915c35_cgraph.png" border="0" usemap="#alapic_8h_a5468339c2df08ca538b77d4d48915c35_cgraph" alt=""/></div>
<map name="alapic_8h_a5468339c2df08ca538b77d4d48915c35_cgraph" id="alapic_8h_a5468339c2df08ca538b77d4d48915c35_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,184,32"/>
<area shape="rect" href="lapic_8c.html#a40e5c52e8a79166cfc433f413bbe9e36" title=" " alt="" coords="232,5,345,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a5468339c2df08ca538b77d4d48915c35_icgraph.png" border="0" usemap="#alapic_8h_a5468339c2df08ca538b77d4d48915c35_icgraph" alt=""/></div>
<map name="alapic_8h_a5468339c2df08ca538b77d4d48915c35_icgraph" id="alapic_8h_a5468339c2df08ca538b77d4d48915c35_icgraph">
<area shape="rect" title=" " alt="" coords="2219,646,2397,673"/>
<area shape="rect" href="x86_8c.html#a87cedb0953e919148694dd8b06c9cb73" title=" " alt="" coords="1973,494,2171,521"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1996,701,2148,727"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="2007,646,2137,673"/>
<area shape="rect" href="x86_8c.html#a384702aafa8cdbab3cf92b3d576bb6fb" title=" " alt="" coords="1743,494,1925,521"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="1757,298,1911,325"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="1263,494,1401,521"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="1052,545,1133,571"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="767,595,953,622"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="581,654,705,681"/>
<area shape="rect" href="svm_2nested_8c.html#a777240cb9ab00451d21a1b204e19c5a6" title=" " alt="" coords="1491,151,1683,178"/>
<area shape="rect" href="svm_2nested_8c.html#a03b4be7ca82710ecd17bc66f2a20cad8" title=" " alt="" coords="1480,356,1695,397"/>
<area shape="rect" href="svm_2nested_8c.html#a574acca11f4be4ea5df18f36307f9bf6" title=" " alt="" coords="1485,42,1689,69"/>
<area shape="rect" href="svm_2nested_8c.html#a4ec7e878f6af209e74dd84285ee0198f" title=" " alt="" coords="568,239,719,266"/>
<area shape="rect" href="svm_8h.html#a7b2d87885eea1b11b1bf1045c21c5a8b" title=" " alt="" coords="1485,422,1690,449"/>
<area shape="rect" href="svm_2hyperv_8c.html#a33efa5fe6a664e9b2a70232b93485645" title=" " alt="" coords="1496,291,1679,332"/>
<area shape="rect" href="svm_8c.html#a08788d6a633657aa9e7e2f3b09db9b40" title=" " alt="" coords="1255,173,1409,215"/>
<area shape="rect" href="svm_8c.html#ae135f7d753cde05e6f726fb75e971ddd" title=" " alt="" coords="1252,71,1412,98"/>
<area shape="rect" href="svm_8c.html#a3f8983432f4aae138a6f4d167c561132" title=" " alt="" coords="1265,122,1399,149"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="1033,181,1152,207"/>
<area shape="rect" href="svm_8c.html#af2ee2a03530f5b7a02a127d8b779d2ae" title=" " alt="" coords="777,181,943,207"/>
<area shape="rect" href="svm_2nested_8c.html#a3286f29b650004d599595557d310136e" title=" " alt="" coords="1233,342,1431,369"/>
<area shape="rect" href="svm_2nested_8c.html#a962af1ea814d32a42ada9f601918cee5" title=" " alt="" coords="1247,5,1417,47"/>
<area shape="rect" href="svm_2nested_8c.html#ab7904bb74631114e0bd5102a52aab4c8" title=" " alt="" coords="1001,39,1184,80"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="771,46,949,73"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="776,97,944,123"/>
<area shape="rect" href="svm_8c.html#a5d52c93beeb85ba5a99283d4eba589e1" title=" " alt="" coords="371,302,520,329"/>
<area shape="rect" href="svm_8c.html#a1eacc7b79f62ed332056217c35fe3be4" title=" " alt="" coords="176,367,323,394"/>
<area shape="rect" href="svm_8c.html#a7c2323b13a5022aa9f6a9ae5ebe4d830" title=" " alt="" coords="5,367,128,394"/>
<area shape="rect" href="svm_2nested_8c.html#a387a91a64bb25a25590ee3b019f0e0a2" title=" " alt="" coords="1243,443,1421,470"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1759,719,1909,760"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="1013,730,1172,757"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1769,646,1899,673"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="1494,595,1681,622"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="1501,697,1673,723"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="1502,646,1673,673"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="1013,647,1172,688"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1285,545,1379,571"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="1232,697,1432,723"/>
</map>
</div>

</div>
</div>
<a id="a922ce0b7b20cf9b9ef4930d3d81e8360"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a922ce0b7b20cf9b9ef4930d3d81e8360">&#9670;&nbsp;</a></span>kvm_apic_update_irr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_apic_update_irr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32 *&#160;</td>
          <td class="paramname"><em>pir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>max_irr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00690">690</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;{</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordtype">bool</span> irr_updated = <a class="code" href="lapic_8c.html#aed305556b8d09cfaa135cca071bd8c22">__kvm_apic_update_irr</a>(<a class="code" href="posted__intr_8h.html#a2707c542febe155b1642f9b9a9c0bc79">pir</a>, apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a>, max_irr);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">if</span> (unlikely(!apic-&gt;<a class="code" href="structkvm__lapic.html#a4642d7f446bbd9ede893aa1ebbcc9c1a">apicv_active</a> &amp;&amp; irr_updated))</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#ada91b44df57789499ad32ad287c21217">irr_pending</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">return</span> irr_updated;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_aed305556b8d09cfaa135cca071bd8c22"><div class="ttname"><a href="lapic_8c.html#aed305556b8d09cfaa135cca071bd8c22">__kvm_apic_update_irr</a></div><div class="ttdeci">bool __kvm_apic_update_irr(u32 *pir, void *regs, int *max_irr)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00654">lapic.c:654</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a922ce0b7b20cf9b9ef4930d3d81e8360_cgraph.png" border="0" usemap="#alapic_8h_a922ce0b7b20cf9b9ef4930d3d81e8360_cgraph" alt=""/></div>
<map name="alapic_8h_a922ce0b7b20cf9b9ef4930d3d81e8360_cgraph" id="alapic_8h_a922ce0b7b20cf9b9ef4930d3d81e8360_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,164,32"/>
<area shape="rect" href="lapic_8c.html#aed305556b8d09cfaa135cca071bd8c22" title=" " alt="" coords="212,5,384,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a922ce0b7b20cf9b9ef4930d3d81e8360_icgraph.png" border="0" usemap="#alapic_8h_a922ce0b7b20cf9b9ef4930d3d81e8360_icgraph" alt=""/></div>
<map name="alapic_8h_a922ce0b7b20cf9b9ef4930d3d81e8360_icgraph" id="alapic_8h_a922ce0b7b20cf9b9ef4930d3d81e8360_icgraph">
<area shape="rect" title=" " alt="" coords="207,5,365,32"/>
<area shape="rect" href="vmx_8c.html#ac2197e1b1fbae590edacaecfd1d0974c" title=" " alt="" coords="5,5,159,32"/>
</map>
</div>

</div>
</div>
<a id="a44fec9a6b84f831af88ffed6b2325545"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44fec9a6b84f831af88ffed6b2325545">&#9670;&nbsp;</a></span>kvm_apic_update_ppr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_apic_update_ppr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00975">975</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;{</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <a class="code" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab">apic_update_ppr</a>(vcpu-&gt;arch.apic);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a44fec9a6b84f831af88ffed6b2325545_cgraph.png" border="0" usemap="#alapic_8h_a44fec9a6b84f831af88ffed6b2325545_cgraph" alt=""/></div>
<map name="alapic_8h_a44fec9a6b84f831af88ffed6b2325545_cgraph" id="alapic_8h_a44fec9a6b84f831af88ffed6b2325545_cgraph">
<area shape="rect" title=" " alt="" coords="5,107,171,133"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="219,107,348,133"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="396,67,539,93"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="396,129,539,170"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="791,5,949,32"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="592,56,737,83"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="593,107,737,133"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="997,81,1147,108"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="791,56,949,83"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="791,107,949,133"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="587,157,743,184"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="810,157,930,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a44fec9a6b84f831af88ffed6b2325545_icgraph.png" border="0" usemap="#alapic_8h_a44fec9a6b84f831af88ffed6b2325545_icgraph" alt=""/></div>
<map name="alapic_8h_a44fec9a6b84f831af88ffed6b2325545_icgraph" id="alapic_8h_a44fec9a6b84f831af88ffed6b2325545_icgraph">
<area shape="rect" title=" " alt="" coords="259,5,424,32"/>
<area shape="rect" href="vmx_8c.html#afb231b1a3b0ccf655edde89034273129" title=" " alt="" coords="5,5,211,32"/>
</map>
</div>

</div>
</div>
<a id="a1b33bb5758d3dd75c7b87e537a5e729e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b33bb5758d3dd75c7b87e537a5e729e">&#9670;&nbsp;</a></span>kvm_apic_write_nodecode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_apic_write_nodecode </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02446">2446</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;{</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160; </div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;<span class="comment">     * ICR is a single 64-bit register when x2APIC is enabled, all others</span></div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;<span class="comment">     * registers hold 32-bit values.  For legacy xAPIC, ICR writes need to</span></div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;<span class="comment">     * go down the common path to get the upper half from ICR2.</span></div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;<span class="comment">     * Note, using the write helpers may incur an unnecessary write to the</span></div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;<span class="comment">     * virtual APIC state, but KVM needs to conditionally modify the value</span></div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;<span class="comment">     * in certain cases, e.g. to clear the ICR busy bit.  The cost of extra</span></div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;<span class="comment">     * conditional branches is likely a wash relative to the cost of the</span></div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;<span class="comment">     * maybe-unecessary write, and both are in the noise anyways.</span></div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic) &amp;&amp; offset == APIC_ICR)</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;        <a class="code" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b">kvm_x2apic_icr_write</a>(apic, <a class="code" href="lapic_8c.html#a378a0961283ea67791303e70114fb10d">kvm_lapic_get_reg64</a>(apic, APIC_ICR));</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;        <a class="code" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491">kvm_lapic_reg_write</a>(apic, offset, <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, offset));</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a378a0961283ea67791303e70114fb10d"><div class="ttname"><a href="lapic_8c.html#a378a0961283ea67791303e70114fb10d">kvm_lapic_get_reg64</a></div><div class="ttdeci">static __always_inline u64 kvm_lapic_get_reg64(struct kvm_lapic *apic, int reg)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00088">lapic.c:88</a></div></div>
<div class="ttc" id="alapic_8c_html_acebc0ffd4530dfd1beb1254d1e4d9491"><div class="ttname"><a href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491">kvm_lapic_reg_write</a></div><div class="ttdeci">static int kvm_lapic_reg_write(struct kvm_lapic *apic, u32 reg, u32 val)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02255">lapic.c:2255</a></div></div>
<div class="ttc" id="alapic_8c_html_adf2487dc76dace6e577b637cc357998b"><div class="ttname"><a href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b">kvm_x2apic_icr_write</a></div><div class="ttdeci">int kvm_x2apic_icr_write(struct kvm_lapic *apic, u64 data)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l03155">lapic.c:3155</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a1b33bb5758d3dd75c7b87e537a5e729e_cgraph.png" border="0" usemap="#alapic_8h_a1b33bb5758d3dd75c7b87e537a5e729e_cgraph" alt=""/></div>
<map name="alapic_8h_a1b33bb5758d3dd75c7b87e537a5e729e_cgraph" id="alapic_8h_a1b33bb5758d3dd75c7b87e537a5e729e_cgraph">
<area shape="rect" title=" " alt="" coords="5,696,200,723"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="996,1320,1139,1347"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="995,240,1140,267"/>
<area shape="rect" href="lapic_8c.html#a378a0961283ea67791303e70114fb10d" title=" " alt="" coords="249,367,411,393"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="251,696,409,723"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="248,1573,412,1600"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1200,240,1359,267"/>
<area shape="rect" href="lapic_8c.html#aa06cb4ebbfa40dbfa494b3b4cd9f8833" title=" " alt="" coords="478,88,653,115"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="747,813,907,840"/>
<area shape="rect" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1" title=" " alt="" coords="460,392,671,419"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="514,493,617,520"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="510,1000,621,1027"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="755,864,899,891"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="515,645,616,672"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="500,595,631,621"/>
<area shape="rect" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2" title=" " alt="" coords="757,712,897,739"/>
<area shape="rect" href="lapic_8c.html#aec07f4595f82e14e1075beb4730b6976" title=" " alt="" coords="510,949,621,976"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="492,1573,639,1600"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="983,1523,1152,1549"/>
<area shape="rect" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4" title=" " alt="" coords="497,747,634,773"/>
<area shape="rect" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554" title=" " alt="" coords="497,797,633,824"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="479,848,652,875"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="473,1101,658,1128"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="465,1291,665,1317"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="497,189,634,216"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="495,240,636,267"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="501,291,629,317"/>
<area shape="rect" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3" title=" " alt="" coords="748,88,905,115"/>
<area shape="rect" href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4" title=" " alt="" coords="472,443,659,469"/>
<area shape="rect" href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c" title=" " alt="" coords="752,240,901,267"/>
<area shape="rect" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843" title=" " alt="" coords="771,443,882,469"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="988,392,1147,419"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="762,763,891,789"/>
<area shape="rect" href="hyperv_8h.html#a7ffceaf3950bd76a9a3a28ff1e836e58" title=" " alt="" coords="730,560,923,587"/>
<area shape="rect" href="hyperv_8c.html#a47f5a157cae898f7a7b370854c3748a4" title=" " alt="" coords="737,611,917,637"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="745,392,908,419"/>
<area shape="rect" href="xen_8h.html#ae436f94d060f3cb8029695c5a9fddc42" title=" " alt="" coords="729,1000,924,1027"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="988,864,1147,891"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="750,494,903,535"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="1003,712,1132,739"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="732,1624,921,1651"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="997,1599,1138,1625"/>
<area shape="rect" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39" title=" " alt="" coords="761,1152,893,1179"/>
<area shape="rect" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44" title=" " alt="" coords="749,1203,904,1229"/>
<area shape="rect" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d" title=" " alt="" coords="738,1254,915,1295"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="719,1421,935,1448"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="1007,1421,1127,1448"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="725,1320,929,1347"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="751,139,902,165"/>
<area shape="rect" href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2" title=" " alt="" coords="485,1624,645,1651"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a1b33bb5758d3dd75c7b87e537a5e729e_icgraph.png" border="0" usemap="#alapic_8h_a1b33bb5758d3dd75c7b87e537a5e729e_icgraph" alt=""/></div>
<map name="alapic_8h_a1b33bb5758d3dd75c7b87e537a5e729e_icgraph" id="alapic_8h_a1b33bb5758d3dd75c7b87e537a5e729e_icgraph">
<area shape="rect" title=" " alt="" coords="439,71,633,98"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="225,5,377,47"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="212,71,391,98"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="231,122,371,149"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="5,64,164,105"/>
</map>
</div>

</div>
</div>
<a id="a42846edfc8630e622bcde943f49559c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42846edfc8630e622bcde943f49559c4">&#9670;&nbsp;</a></span>kvm_bitmap_or_dest_vcpus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_bitmap_or_dest_vcpus </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_lapic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long *&#160;</td>
          <td class="paramname"><em>vcpu_bitmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01394">1394</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;{</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> **dest_vcpu = NULL;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *src = NULL;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="keyword">struct </span>kvm_apic_map *map;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> bitmap, i;</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordtype">int</span> vcpu_idx;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keywordtype">bool</span> ret;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160; </div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    rcu_read_lock();</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    map = rcu_dereference(kvm-&gt;arch.apic_map);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160; </div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    ret = <a class="code" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f">kvm_apic_map_get_dest_lapic</a>(kvm, &amp;src, irq, map, &amp;dest_vcpu,</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;                      &amp;bitmap);</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    <span class="keywordflow">if</span> (ret) {</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        for_each_set_bit(i, &amp;bitmap, 16) {</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;            <span class="keywordflow">if</span> (!dest_vcpu[i])</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;            vcpu_idx = dest_vcpu[i]-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_idx;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;            __set_bit(vcpu_idx, vcpu_bitmap);</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        }</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        kvm_for_each_vcpu(i, vcpu, kvm) {</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4">kvm_apic_present</a>(vcpu))</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d">kvm_apic_match_dest</a>(vcpu, NULL,</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                         irq-&gt;shorthand,</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                         irq-&gt;dest_id,</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                         irq-&gt;dest_mode))</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;            __set_bit(i, vcpu_bitmap);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        }</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    }</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    rcu_read_unlock();</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_adb63e5a650d4571316b450d153a3105d"><div class="ttname"><a href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d">kvm_apic_match_dest</a></div><div class="ttdeci">bool kvm_apic_match_dest(struct kvm_vcpu *vcpu, struct kvm_lapic *source, int shorthand, unsigned int dest, int dest_mode)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01067">lapic.c:1067</a></div></div>
<div class="ttc" id="alapic_8c_html_aee815bad0e899bbf195750d2d9b5470f"><div class="ttname"><a href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f">kvm_apic_map_get_dest_lapic</a></div><div class="ttdeci">static bool kvm_apic_map_get_dest_lapic(struct kvm *kvm, struct kvm_lapic **src, struct kvm_lapic_irq *irq, struct kvm_apic_map *map, struct kvm_lapic ***dst, unsigned long *bitmap)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01142">lapic.c:1142</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a42846edfc8630e622bcde943f49559c4_cgraph.png" border="0" usemap="#alapic_8h_a42846edfc8630e622bcde943f49559c4_cgraph" alt=""/></div>
<map name="alapic_8h_a42846edfc8630e622bcde943f49559c4_cgraph" id="alapic_8h_a42846edfc8630e622bcde943f49559c4_cgraph">
<area shape="rect" title=" " alt="" coords="5,411,164,453"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="212,411,396,453"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="220,183,388,209"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="233,645,375,672"/>
<area shape="rect" href="lapic_8c.html#a47d52843df792ef8e7bffdfb66a3b40b" title=" " alt="" coords="471,360,652,387"/>
<area shape="rect" href="lapic_8c.html#a079d589509607a9d9baa6bed3eae7fa6" title=" " alt="" coords="469,411,654,453"/>
<area shape="rect" href="lapic_8c.html#abbce6da431ef5f15d85b5fc741d3ef72" title=" " alt="" coords="727,419,936,445"/>
<area shape="rect" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3" title=" " alt="" coords="444,309,679,336"/>
<area shape="rect" href="lapic_8h.html#adfbea71ac96b210fb91bef47c77194f1" title=" " alt="" coords="465,528,658,555"/>
<area shape="rect" href="x86_8c.html#a47d88660a2a5f8ee22df1253604d1ed7" title=" " alt="" coords="483,579,640,621"/>
<area shape="rect" href="lapic_8c.html#ac9fecb7d9f4574931650af9abb4b9f4c" title=" " alt="" coords="480,259,643,285"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="992,208,1135,235"/>
<area shape="rect" href="lapic_8c.html#a870119cb74033f360164df90029af75a" title=" " alt="" coords="452,81,671,108"/>
<area shape="rect" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6" title=" " alt="" coords="446,157,677,184"/>
<area shape="rect" href="lapic_8c.html#a8fb87d02d911e49b5793e391702afe7e" title=" " alt="" coords="771,309,892,336"/>
<area shape="rect" href="lapic_8c.html#a98bde25094c754b30e796357ba643ab0" title=" " alt="" coords="753,107,909,133"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="759,5,904,32"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="984,5,1143,32"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="771,157,891,184"/>
<area shape="rect" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096" title=" " alt="" coords="775,259,887,285"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="476,645,647,672"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="502,696,621,723"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a42846edfc8630e622bcde943f49559c4_icgraph.png" border="0" usemap="#alapic_8h_a42846edfc8630e622bcde943f49559c4_icgraph" alt=""/></div>
<map name="alapic_8h_a42846edfc8630e622bcde943f49559c4_icgraph" id="alapic_8h_a42846edfc8630e622bcde943f49559c4_icgraph">
<area shape="rect" title=" " alt="" coords="405,5,564,47"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="200,13,357,39"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="5,13,152,39"/>
</map>
</div>

</div>
</div>
<a id="a2400290b895608d302ecce4ee352ee25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2400290b895608d302ecce4ee352ee25">&#9670;&nbsp;</a></span>kvm_can_use_hv_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_can_use_hv_timer </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00154">154</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;{</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">return</span> kvm_x86_ops.set_hv_timer</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;           &amp;&amp; !(<a class="code" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376">kvm_mwait_in_guest</a>(vcpu-&gt;kvm) ||</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <a class="code" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9">kvm_can_post_timer_interrupt</a>(vcpu));</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_ad7790e6f84a1592b5298b2da79a633a9"><div class="ttname"><a href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9">kvm_can_post_timer_interrupt</a></div><div class="ttdeci">static bool kvm_can_post_timer_interrupt(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00148">lapic.c:148</a></div></div>
<div class="ttc" id="ax86_8h_html_a8a31c0c01a5fe5dc33f7c5675ba4d376"><div class="ttname"><a href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376">kvm_mwait_in_guest</a></div><div class="ttdeci">static bool kvm_mwait_in_guest(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8h_source.html#l00409">x86.h:409</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a2400290b895608d302ecce4ee352ee25_cgraph.png" border="0" usemap="#alapic_8h_a2400290b895608d302ecce4ee352ee25_cgraph" alt=""/></div>
<map name="alapic_8h_a2400290b895608d302ecce4ee352ee25_cgraph" id="alapic_8h_a2400290b895608d302ecce4ee352ee25_cgraph">
<area shape="rect" title=" " alt="" coords="5,83,181,109"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="229,46,388,87"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="445,108,606,135"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="457,5,594,32"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="436,56,615,83"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="663,56,781,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a2400290b895608d302ecce4ee352ee25_icgraph.png" border="0" usemap="#alapic_8h_a2400290b895608d302ecce4ee352ee25_icgraph" alt=""/></div>
<map name="alapic_8h_a2400290b895608d302ecce4ee352ee25_icgraph" id="alapic_8h_a2400290b895608d302ecce4ee352ee25_icgraph">
<area shape="rect" title=" " alt="" coords="2011,438,2187,465"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="681,376,836,417"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="1845,463,1963,490"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="442,391,597,432"/>
<area shape="rect" href="svm_8c.html#a82c8447e70f06dd52623c696446104b5" title=" " alt="" coords="171,398,377,425"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="171,478,377,505"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="6,398,122,425"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="5,478,123,505"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1656,522,1797,549"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1453,551,1595,578"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="941,249,1098,275"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1440,485,1608,527"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1443,725,1605,767"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1445,603,1603,644"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1211,551,1363,578"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1223,333,1351,359"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="944,544,1095,585"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="679,551,838,578"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="904,333,1135,359"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="691,71,826,98"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="661,122,856,149"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="678,223,839,250"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="687,274,830,301"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="443,5,595,47"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="430,71,609,98"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="449,122,589,149"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="195,64,353,105"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="425,173,613,199"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="433,223,606,250"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="207,173,341,199"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="187,274,361,301"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="444,274,595,301"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="1183,485,1392,527"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="924,442,1115,469"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="685,442,833,469"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1208,823,1367,850"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="962,1034,1077,1061"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="975,823,1063,850"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="719,1163,798,1190"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="673,1046,845,1073"/>
<area shape="rect" href="x86_8c.html#a8103751d0c861cfc0c6d0fed892e2454" title=" " alt="" coords="679,1097,838,1139"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="679,653,838,695"/>
<area shape="rect" href="x86_8c.html#a3de7a07b3d9ed3ee68dbdfb0c53dc5d0" title=" " alt="" coords="679,719,838,760"/>
<area shape="rect" href="x86_8c.html#ac6ebab4c3448cdbc79dbcac73e94503b" title=" " alt="" coords="679,784,838,825"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="665,602,852,629"/>
<area shape="rect" href="x86_8c.html#a02f0a60bd0147952e87f6ad38128f748" title=" " alt="" coords="679,849,838,891"/>
<area shape="rect" href="x86_8c.html#ae3d9929c9a77fa2c710befa0a784d4c6" title=" " alt="" coords="679,915,838,956"/>
<area shape="rect" href="x86_8c.html#a93a45fe328a7ab7be2e5426ffc845c32" title=" " alt="" coords="679,980,838,1021"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1240,610,1335,637"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="979,610,1060,637"/>
</map>
</div>

</div>
</div>
<a id="a1d54fd094860a96cad1af17c18f6904c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d54fd094860a96cad1af17c18f6904c">&#9670;&nbsp;</a></span>kvm_create_lapic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_create_lapic </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timer_advance_ns</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02810">2810</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;{</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic;</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160; </div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;    <a class="code" href="ioapic_8h.html#aca68c0d4ac8df0838e209fb5300f7be3">ASSERT</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a> != NULL);</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160; </div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    apic = kzalloc(<span class="keyword">sizeof</span>(*apic), GFP_KERNEL_ACCOUNT);</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    <span class="keywordflow">if</span> (!apic)</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;        <span class="keywordflow">goto</span> nomem;</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160; </div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic = apic;</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160; </div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> = (<span class="keywordtype">void</span> *)get_zeroed_page(GFP_KERNEL_ACCOUNT);</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;    <span class="keywordflow">if</span> (!apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a>) {</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;        printk(KERN_ERR <span class="stringliteral">&quot;malloc apic regs error for vcpu %x\n&quot;</span>,</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;               <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_id);</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;        <span class="keywordflow">goto</span> nomem_free_apic;</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    }</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a> = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>;</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160; </div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a> = <a class="code" href="lapic_8c.html#a6426046939a33f96b6df7b185cafb171">kvm_apic_calc_nr_lvt_entries</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160; </div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    hrtimer_init(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">timer</a>, CLOCK_MONOTONIC,</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;             HRTIMER_MODE_ABS_HARD);</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">timer</a>.function = <a class="code" href="lapic_8c.html#aed93ccaa481ab4fd48af66ccf79499c5">apic_timer_fn</a>;</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;    <span class="keywordflow">if</span> (timer_advance_ns == -1) {</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a02a69390fafe1e1281847530af564ef0">timer_advance_ns</a> = <a class="code" href="lapic_8c.html#aae6931286b2ce84fe7732ae3c6996634">LAPIC_TIMER_ADVANCE_NS_INIT</a>;</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;        lapic_timer_advance_dynamic = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a02a69390fafe1e1281847530af564ef0">timer_advance_ns</a> = timer_advance_ns;</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;        lapic_timer_advance_dynamic = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;    }</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160; </div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;<span class="comment">     * Stuff the APIC ENABLE bit in lieu of temporarily incrementing</span></div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;<span class="comment">     * apic_hw_disabled; the full RESET value is set by kvm_lapic_reset().</span></div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;    <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_base = MSR_IA32_APICBASE_ENABLE;</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;    static_branch_inc(&amp;<a class="code" href="lapic_8h.html#a3c2a1bc1bb244452f5338719ef4e73c8">apic_sw_disabled</a>.key); <span class="comment">/* sw disabled at reset */</span></div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;    kvm_iodevice_init(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a64110f6330456e8272b6e96539d168e1">dev</a>, &amp;<a class="code" href="lapic_8c.html#a61013c760fedb5cc2ce71f0243787f7e">apic_mmio_ops</a>);</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160; </div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;nomem_free_apic:</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;    kfree(apic);</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;    <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic = NULL;</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;nomem:</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;    <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a61013c760fedb5cc2ce71f0243787f7e"><div class="ttname"><a href="lapic_8c.html#a61013c760fedb5cc2ce71f0243787f7e">apic_mmio_ops</a></div><div class="ttdeci">static const struct kvm_io_device_ops apic_mmio_ops</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02782">lapic.c:2790</a></div></div>
<div class="ttc" id="alapic_8c_html_aae6931286b2ce84fe7732ae3c6996634"><div class="ttname"><a href="lapic_8c.html#aae6931286b2ce84fe7732ae3c6996634">LAPIC_TIMER_ADVANCE_NS_INIT</a></div><div class="ttdeci">#define LAPIC_TIMER_ADVANCE_NS_INIT</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00065">lapic.c:65</a></div></div>
<div class="ttc" id="alapic_8c_html_aed93ccaa481ab4fd48af66ccf79499c5"><div class="ttname"><a href="lapic_8c.html#aed93ccaa481ab4fd48af66ccf79499c5">apic_timer_fn</a></div><div class="ttdeci">static enum hrtimer_restart apic_timer_fn(struct hrtimer *data)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02782">lapic.c:2795</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_a64110f6330456e8272b6e96539d168e1"><div class="ttname"><a href="structkvm__lapic.html#a64110f6330456e8272b6e96539d168e1">kvm_lapic::dev</a></div><div class="ttdeci">struct kvm_io_device dev</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00060">lapic.h:61</a></div></div>
<div class="ttc" id="astructkvm__timer_html_a02a69390fafe1e1281847530af564ef0"><div class="ttname"><a href="structkvm__timer.html#a02a69390fafe1e1281847530af564ef0">kvm_timer::timer_advance_ns</a></div><div class="ttdeci">u32 timer_advance_ns</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00054">lapic.h:54</a></div></div>
<div class="ttc" id="astructkvm__timer_html_a31da14cdecf55074bd9ff5af10c3ffa0"><div class="ttname"><a href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">kvm_timer::timer</a></div><div class="ttdeci">struct hrtimer timer</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00276">lapic.h:47</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a1d54fd094860a96cad1af17c18f6904c_cgraph.png" border="0" usemap="#alapic_8h_a1d54fd094860a96cad1af17c18f6904c_cgraph" alt=""/></div>
<map name="alapic_8h_a1d54fd094860a96cad1af17c18f6904c_cgraph" id="alapic_8h_a1d54fd094860a96cad1af17c18f6904c_cgraph">
<area shape="rect" title=" " alt="" coords="5,35,143,61"/>
<area shape="rect" href="lapic_8c.html#aed93ccaa481ab4fd48af66ccf79499c5" title=" " alt="" coords="217,5,327,32"/>
<area shape="rect" href="lapic_8c.html#a6426046939a33f96b6df7b185cafb171" title=" " alt="" coords="191,57,353,98"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a1d54fd094860a96cad1af17c18f6904c_icgraph.png" border="0" usemap="#alapic_8h_a1d54fd094860a96cad1af17c18f6904c_icgraph" alt=""/></div>
<map name="alapic_8h_a1d54fd094860a96cad1af17c18f6904c_icgraph" id="alapic_8h_a1d54fd094860a96cad1af17c18f6904c_icgraph">
<area shape="rect" title=" " alt="" coords="473,5,611,32"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="253,5,425,32"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="5,5,205,32"/>
</map>
</div>

</div>
</div>
<a id="a4b935c2c698d932ceff03cb20f512919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b935c2c698d932ceff03cb20f512919">&#9670;&nbsp;</a></span>kvm_free_lapic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_free_lapic </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02468">2468</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;{</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160; </div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic)</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160; </div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;    hrtimer_cancel(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">timer</a>);</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160; </div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_base &amp; MSR_IA32_APICBASE_ENABLE))</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;        static_branch_slow_dec_deferred(&amp;<a class="code" href="lapic_8h.html#a65788ee3d09ea041368cd93b3391f3c4">apic_hw_disabled</a>);</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160; </div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;    <span class="keywordflow">if</span> (!apic-&gt;<a class="code" href="structkvm__lapic.html#afc6c88da7e5d98be1e6e833ca181dab2">sw_enabled</a>)</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;        static_branch_slow_dec_deferred(&amp;<a class="code" href="lapic_8h.html#a3c2a1bc1bb244452f5338719ef4e73c8">apic_sw_disabled</a>);</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160; </div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    <span class="keywordflow">if</span> (apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a>)</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;        free_page((<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a>);</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160; </div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    kfree(apic);</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a4b935c2c698d932ceff03cb20f512919_icgraph.png" border="0" usemap="#alapic_8h_a4b935c2c698d932ceff03cb20f512919_icgraph" alt=""/></div>
<map name="alapic_8h_a4b935c2c698d932ceff03cb20f512919_icgraph" id="alapic_8h_a4b935c2c698d932ceff03cb20f512919_icgraph">
<area shape="rect" title=" " alt="" coords="1805,132,1928,159"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="1581,107,1753,133"/>
<area shape="rect" href="x86_8c.html#a25d188e4f0871968b9f428c79720a502" title=" " alt="" coords="1577,157,1757,184"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="1329,107,1529,133"/>
<area shape="rect" href="kvm__main_8c.html#a7218df747387e4034ab8442f187306b1" title=" " alt="" coords="1357,157,1502,184"/>
<area shape="rect" href="kvm__main_8c.html#a0fcd9f7671bee7debec1bc05dcd9557b" title=" " alt="" coords="1129,157,1281,184"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="911,157,1081,184"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="553,69,680,96"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="728,183,863,209"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="303,5,497,32"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="559,183,674,209"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="325,56,475,83"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="317,107,483,133"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="323,157,477,184"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="295,208,505,235"/>
<area shape="rect" href="debugfs_8c.html#af0427db3ec1a8c38ea51591abbefde57" title=" " alt="" coords="314,259,486,301"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="333,325,467,352"/>
<area shape="rect" href="sev_8c.html#ad28fd793149997c912b52490f6ca139a" title=" " alt="" coords="329,376,471,403"/>
<area shape="rect" href="sev_8c.html#af1eb77eac84f085b0a943b87f783e30d" title=" " alt="" coords="335,427,465,453"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="47,56,205,83"/>
<area shape="rect" href="sev_8c.html#abe3c569b297da3b78824074b8c08f9a7" title=" " alt="" coords="5,376,247,403"/>
<area shape="rect" href="svm_8c.html#a0e69cefce46e7b11e1e8e056ea5b6561" title=" " alt="" coords="59,427,193,453"/>
</map>
</div>

</div>
</div>
<a id="a62fc68a9f819c5044440e2cf6a7763e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62fc68a9f819c5044440e2cf6a7763e8">&#9670;&nbsp;</a></span>kvm_get_apic_base()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 kvm_get_apic_base </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="x86_8c_source.html#l00474">474</a> of file <a class="el" href="x86_8c_source.html">x86.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;{</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">return</span> vcpu-&gt;arch.apic_base;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a62fc68a9f819c5044440e2cf6a7763e8_icgraph.png" border="0" usemap="#alapic_8h_a62fc68a9f819c5044440e2cf6a7763e8_icgraph" alt=""/></div>
<map name="alapic_8h_a62fc68a9f819c5044440e2cf6a7763e8_icgraph" id="alapic_8h_a62fc68a9f819c5044440e2cf6a7763e8_icgraph">
<area shape="rect" title=" " alt="" coords="1000,133,1151,160"/>
<area shape="rect" href="x86_8c.html#ad00e08e30ec34c0fd7bd1da9acf21519" title=" " alt="" coords="783,57,946,84"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="777,133,952,160"/>
<area shape="rect" href="x86_8c.html#aced999ac2c84f5838ddf0279cbf4c8e7" title=" " alt="" coords="789,196,941,223"/>
<area shape="rect" href="x86_8c.html#aa8b2c6f3e5e8e56fe84a90d66f2d6982" title=" " alt="" coords="625,57,723,84"/>
<area shape="rect" href="x86_8c.html#a0c8605c4aae33c7235b26f4df7cc8f54" title=" " alt="" coords="621,7,727,33"/>
<area shape="rect" href="x86_8c.html#ac6ebab4c3448cdbc79dbcac73e94503b" title=" " alt="" coords="191,55,350,97"/>
<area shape="rect" href="x86_8c.html#aedf3017b9048be5cee8ed8cba72809f0" title=" " alt="" coords="446,119,537,145"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,63,129,89"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,121,364,148"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="412,5,571,32"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="619,159,729,185"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="619,108,729,135"/>
</map>
</div>

</div>
</div>
<a id="ac6d5ae412d8199fc4aceeae42cb80024"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6d5ae412d8199fc4aceeae42cb80024">&#9670;&nbsp;</a></span>kvm_get_apic_interrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_get_apic_interrupt </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02894">2894</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;{</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;    <span class="keywordtype">int</span> vector = <a class="code" href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf">kvm_apic_has_interrupt</a>(vcpu);</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;    u32 ppr;</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160; </div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;    <span class="keywordflow">if</span> (vector == -1)</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160; </div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;<span class="comment">     * We get here even with APIC virtualization enabled, if doing</span></div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;<span class="comment">     * nested virtualization and L1 runs with the &quot;acknowledge interrupt</span></div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;<span class="comment">     * on exit&quot; mode.  Then we cannot inject the interrupt via RVI,</span></div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;<span class="comment">     * because the process would deliver it through the IDT.</span></div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160; </div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;    <a class="code" href="lapic_8c.html#ad2b5e2187414c65e1a5876e641fee3fc">apic_clear_irr</a>(vector, apic);</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="hyperv_8h.html#a8b356fa1a20dafdfd0b2f54c7c345caf">kvm_hv_synic_auto_eoi_set</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, vector)) {</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;<span class="comment">         * For auto-EOI interrupts, there might be another pending</span></div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;<span class="comment">         * interrupt above PPR, so check whether to raise another</span></div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;<span class="comment">         * KVM_REQ_EVENT.</span></div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;        <a class="code" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab">apic_update_ppr</a>(apic);</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;<span class="comment">         * For normal interrupts, PPR has been raised and there cannot</span></div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;<span class="comment">         * be a higher-priority pending interrupt---except if there was</span></div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;<span class="comment">         * a concurrent interrupt injection, but that would have</span></div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;<span class="comment">         * triggered KVM_REQ_EVENT already.</span></div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;        <a class="code" href="lapic_8c.html#acba5fed3ebeb7a85d9cb154d13b7f983">apic_set_isr</a>(vector, apic);</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;        <a class="code" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986">__apic_update_ppr</a>(apic, &amp;ppr);</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;    }</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160; </div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    <span class="keywordflow">return</span> vector;</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;}</div>
<div class="ttc" id="ahyperv_8h_html_a8b356fa1a20dafdfd0b2f54c7c345caf"><div class="ttname"><a href="hyperv_8h.html#a8b356fa1a20dafdfd0b2f54c7c345caf">kvm_hv_synic_auto_eoi_set</a></div><div class="ttdeci">static bool kvm_hv_synic_auto_eoi_set(struct kvm_vcpu *vcpu, int vector)</div><div class="ttdef"><b>Definition:</b> <a href="hyperv_8h_source.html#l00294">hyperv.h:294</a></div></div>
<div class="ttc" id="alapic_8c_html_aa421165466ac455ff3fff91fb9afe7bf"><div class="ttname"><a href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf">kvm_apic_has_interrupt</a></div><div class="ttdeci">int kvm_apic_has_interrupt(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02859">lapic.c:2859</a></div></div>
<div class="ttc" id="alapic_8c_html_acba5fed3ebeb7a85d9cb154d13b7f983"><div class="ttname"><a href="lapic_8c.html#acba5fed3ebeb7a85d9cb154d13b7f983">apic_set_isr</a></div><div class="ttdeci">static void apic_set_isr(int vec, struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00744">lapic.c:744</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_ac6d5ae412d8199fc4aceeae42cb80024_cgraph.png" border="0" usemap="#alapic_8h_ac6d5ae412d8199fc4aceeae42cb80024_cgraph" alt=""/></div>
<map name="alapic_8h_ac6d5ae412d8199fc4aceeae42cb80024_cgraph" id="alapic_8h_ac6d5ae412d8199fc4aceeae42cb80024_cgraph">
<area shape="rect" title=" " alt="" coords="5,208,181,235"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="488,183,631,209"/>
<area shape="rect" href="lapic_8c.html#ad2b5e2187414c65e1a5876e641fee3fc" title=" " alt="" coords="505,48,614,75"/>
<area shape="rect" href="lapic_8c.html#acba5fed3ebeb7a85d9cb154d13b7f983" title=" " alt="" coords="283,284,381,311"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="267,132,397,159"/>
<area shape="rect" href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf" title=" " alt="" coords="243,233,421,260"/>
<area shape="rect" href="hyperv_8h.html#a8b356fa1a20dafdfd0b2f54c7c345caf" title=" " alt="" coords="229,335,435,361"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="908,183,1067,209"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="699,233,845,260"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="700,132,844,159"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1115,132,1264,159"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="908,233,1067,260"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="908,132,1067,159"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="694,81,850,108"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="927,81,1047,108"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="684,31,860,57"/>
<area shape="rect" href="lapic_8c.html#a3fc79a6339260d167eb85050cc787149" title=" " alt="" coords="483,310,636,351"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="488,117,631,158"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="489,259,630,285"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="687,284,857,311"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="713,335,831,361"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_ac6d5ae412d8199fc4aceeae42cb80024_icgraph.png" border="0" usemap="#alapic_8h_ac6d5ae412d8199fc4aceeae42cb80024_icgraph" alt=""/></div>
<map name="alapic_8h_ac6d5ae412d8199fc4aceeae42cb80024_icgraph" id="alapic_8h_ac6d5ae412d8199fc4aceeae42cb80024_icgraph">
<area shape="rect" title=" " alt="" coords="1361,236,1537,263"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="1141,236,1313,263"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="923,99,1093,141"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="931,265,1085,292"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="698,5,835,32"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="471,5,552,32"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="437,83,585,109"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="705,173,828,200"/>
<area shape="rect" href="vmx_2nested_8c.html#a4e307e2bcf664c83265b1442e3fc8da2" title=" " alt="" coords="679,225,855,266"/>
<area shape="rect" href="vmx_2nested_8c.html#ad3cab9cf8633364513bd6a24caecf41a" title=" " alt="" coords="659,290,875,331"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="412,327,611,353"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fcc88ceee4f57a3dbf23fedb46a5cb" title=" " alt="" coords="691,107,842,149"/>
<area shape="rect" href="vmx_2nested_8c.html#aedc5821e9af5c7bd4aac6c06f4ca046f" title=" " alt="" coords="677,407,857,433"/>
<area shape="rect" href="vmx_2hyperv_8c.html#a937e30dece4579b71b17efcd54c1d910" title=" " alt="" coords="675,458,859,499"/>
<area shape="rect" href="vmx_2nested_8c.html#a64e6550fab681b40c832fe4e2d5e3b95" title=" " alt="" coords="694,524,839,551"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="203,83,338,109"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="426,163,597,205"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="207,171,334,197"/>
<area shape="rect" href="vmx_2nested_8c.html#a6a1c45a52fde9844f4431a9db00dbf9f" title=" " alt="" coords="430,229,593,270"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="205,236,336,263"/>
<area shape="rect" href="vmx_2nested_8c.html#a2c53f6d5cd8133df2c8e67ab90b9aa5f" title=" " alt="" coords="425,473,598,500"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="456,524,567,551"/>
<area shape="rect" href="vmx_2nested_8c.html#acee8cb651216e97a9c12b807243ae59a" title=" " alt="" coords="427,575,596,601"/>
<area shape="rect" href="vmx_8c.html#ac1cd58b9f223df9d6b5fe9695c0cbe2b" title=" " alt="" coords="209,473,332,500"/>
</map>
</div>

</div>
</div>
<a id="a8415cd1d2d30e65d505adb5ba75a0338"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8415cd1d2d30e65d505adb5ba75a0338">&#9670;&nbsp;</a></span>kvm_get_apic_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dff">lapic_mode</a> kvm_get_apic_mode </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="x86_8c_source.html#l00474">474</a> of file <a class="el" href="x86_8c_source.html">x86.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;{</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8h.html#a101348a7cc26ee89dac847f02ca917a4">kvm_apic_mode</a>(<a class="code" href="x86_8c.html#a62fc68a9f819c5044440e2cf6a7763e8">kvm_get_apic_base</a>(vcpu));</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;}</div>
<div class="ttc" id="alapic_8h_html_a101348a7cc26ee89dac847f02ca917a4"><div class="ttname"><a href="lapic_8h.html#a101348a7cc26ee89dac847f02ca917a4">kvm_apic_mode</a></div><div class="ttdeci">static enum lapic_mode kvm_apic_mode(u64 apic_base)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00269">lapic.h:271</a></div></div>
<div class="ttc" id="ax86_8c_html_a62fc68a9f819c5044440e2cf6a7763e8"><div class="ttname"><a href="x86_8c.html#a62fc68a9f819c5044440e2cf6a7763e8">kvm_get_apic_base</a></div><div class="ttdeci">u64 kvm_get_apic_base(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l00474">x86.c:474</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a8415cd1d2d30e65d505adb5ba75a0338_icgraph.png" border="0" usemap="#alapic_8h_a8415cd1d2d30e65d505adb5ba75a0338_icgraph" alt=""/></div>
<map name="alapic_8h_a8415cd1d2d30e65d505adb5ba75a0338_icgraph" id="alapic_8h_a8415cd1d2d30e65d505adb5ba75a0338_icgraph">
<area shape="rect" title=" " alt="" coords="1407,468,1564,495"/>
<area shape="rect" href="x86_8c.html#a87cedb0953e919148694dd8b06c9cb73" title=" " alt="" coords="1157,392,1355,419"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="698,392,835,419"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="1181,493,1331,520"/>
<area shape="rect" href="vmx_8c.html#a3f6e91eedb4d7eefd8f4007389aaac7b" title=" " alt="" coords="1153,704,1359,731"/>
<area shape="rect" href="x86_8c.html#a384702aafa8cdbab3cf92b3d576bb6fb" title=" " alt="" coords="923,392,1105,419"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="937,199,1091,225"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="471,443,552,469"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,489,364,516"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,548,129,575"/>
<area shape="rect" href="svm_2nested_8c.html#a777240cb9ab00451d21a1b204e19c5a6" title=" " alt="" coords="671,253,863,280"/>
<area shape="rect" href="svm_2nested_8c.html#a03b4be7ca82710ecd17bc66f2a20cad8" title=" " alt="" coords="659,133,874,174"/>
<area shape="rect" href="svm_2nested_8c.html#a574acca11f4be4ea5df18f36307f9bf6" title=" " alt="" coords="665,199,869,225"/>
<area shape="rect" href="svm_8h.html#a7b2d87885eea1b11b1bf1045c21c5a8b" title=" " alt="" coords="664,81,869,108"/>
<area shape="rect" href="svm_2nested_8c.html#a4ec7e878f6af209e74dd84285ee0198f" title=" " alt="" coords="691,312,842,339"/>
<area shape="rect" href="svm_2hyperv_8c.html#a33efa5fe6a664e9b2a70232b93485645" title=" " alt="" coords="675,15,858,57"/>
<area shape="rect" href="svm_8c.html#a08788d6a633657aa9e7e2f3b09db9b40" title=" " alt="" coords="435,275,588,317"/>
<area shape="rect" href="svm_8c.html#ae135f7d753cde05e6f726fb75e971ddd" title=" " alt="" coords="431,341,591,368"/>
<area shape="rect" href="svm_8c.html#a3f8983432f4aae138a6f4d167c561132" title=" " alt="" coords="445,224,578,251"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="211,283,330,309"/>
<area shape="rect" href="svm_2nested_8c.html#a3286f29b650004d599595557d310136e" title=" " alt="" coords="413,107,610,133"/>
<area shape="rect" href="svm_2nested_8c.html#a962af1ea814d32a42ada9f601918cee5" title=" " alt="" coords="426,158,597,199"/>
<area shape="rect" href="svm_8c.html#a1eacc7b79f62ed332056217c35fe3be4" title=" " alt="" coords="197,144,344,171"/>
<area shape="rect" href="svm_2nested_8c.html#a387a91a64bb25a25590ee3b019f0e0a2" title=" " alt="" coords="422,5,601,32"/>
<area shape="rect" href="svm_8c.html#a5d52c93beeb85ba5a99283d4eba589e1" title=" " alt="" coords="437,392,586,419"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="933,544,1095,571"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="927,493,1101,520"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="717,544,816,571"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="713,645,820,672"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,541,350,582"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="468,493,555,520"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="191,624,350,651"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="726,443,807,469"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="712,493,821,520"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="456,595,567,621"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="937,893,1091,920"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="437,801,585,828"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="705,864,828,891"/>
<area shape="rect" href="vmx_2nested_8c.html#a4e307e2bcf664c83265b1442e3fc8da2" title=" " alt="" coords="679,915,855,957"/>
<area shape="rect" href="vmx_2nested_8c.html#ad3cab9cf8633364513bd6a24caecf41a" title=" " alt="" coords="659,981,875,1022"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="412,1017,611,1044"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fcc88ceee4f57a3dbf23fedb46a5cb" title=" " alt="" coords="691,747,842,789"/>
<area shape="rect" href="vmx_2nested_8c.html#aedc5821e9af5c7bd4aac6c06f4ca046f" title=" " alt="" coords="677,1097,857,1124"/>
<area shape="rect" href="vmx_2hyperv_8c.html#a937e30dece4579b71b17efcd54c1d910" title=" " alt="" coords="675,1149,859,1190"/>
<area shape="rect" href="vmx_2nested_8c.html#a64e6550fab681b40c832fe4e2d5e3b95" title=" " alt="" coords="694,696,839,723"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="203,801,338,828"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="426,855,597,897"/>
<area shape="rect" href="vmx_2nested_8c.html#a6a1c45a52fde9844f4431a9db00dbf9f" title=" " alt="" coords="430,921,593,962"/>
<area shape="rect" href="vmx_2nested_8c.html#a2c53f6d5cd8133df2c8e67ab90b9aa5f" title=" " alt="" coords="425,747,598,773"/>
<area shape="rect" href="vmx_2nested_8c.html#acee8cb651216e97a9c12b807243ae59a" title=" " alt="" coords="427,696,596,723"/>
</map>
</div>

</div>
</div>
<a id="af2fa5313476adb8240d3595805d784fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2fa5313476adb8240d3595805d784fc">&#9670;&nbsp;</a></span>kvm_get_lapic_tscdeadline_msr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 kvm_get_lapic_tscdeadline_msr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02494">2494</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;{</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160; </div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4">kvm_apic_present</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>) || !<a class="code" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0">apic_lvtt_tscdeadline</a>(apic))</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160; </div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    <span class="keywordflow">return</span> apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#acb4ad6bfe6c14982d0a87f4678e92d09">tscdeadline</a>;</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_adaceffbfc91320b193a66d974fb12ce0"><div class="ttname"><a href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0">apic_lvtt_tscdeadline</a></div><div class="ttdeci">static int apic_lvtt_tscdeadline(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00553">lapic.c:553</a></div></div>
<div class="ttc" id="astructkvm__timer_html_acb4ad6bfe6c14982d0a87f4678e92d09"><div class="ttname"><a href="structkvm__timer.html#acb4ad6bfe6c14982d0a87f4678e92d09">kvm_timer::tscdeadline</a></div><div class="ttdeci">u64 tscdeadline</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00052">lapic.h:52</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_af2fa5313476adb8240d3595805d784fc_cgraph.png" border="0" usemap="#alapic_8h_af2fa5313476adb8240d3595805d784fc_cgraph" alt=""/></div>
<map name="alapic_8h_af2fa5313476adb8240d3595805d784fc_cgraph" id="alapic_8h_af2fa5313476adb8240d3595805d784fc_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,236,57"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="284,5,444,32"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="293,56,435,83"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="492,31,663,57"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="518,81,637,108"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_af2fa5313476adb8240d3595805d784fc_icgraph.png" border="0" usemap="#alapic_8h_af2fa5313476adb8240d3595805d784fc_icgraph" alt=""/></div>
<map name="alapic_8h_af2fa5313476adb8240d3595805d784fc_icgraph" id="alapic_8h_af2fa5313476adb8240d3595805d784fc_icgraph">
<area shape="rect" title=" " alt="" coords="387,31,617,57"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="164,31,339,57"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="5,5,116,32"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="5,56,116,83"/>
</map>
</div>

</div>
</div>
<a id="aec25ca9a5ddcfdd5fee6a986826582c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec25ca9a5ddcfdd5fee6a986826582c7">&#9670;&nbsp;</a></span>kvm_hv_vapic_msr_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_hv_vapic_msr_read </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>msr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64 *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03229">3229</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;{</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(vcpu))</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160; </div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da">kvm_lapic_msr_read</a>(vcpu-&gt;arch.apic, reg, data);</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a2913418710d9efa46bbdbb0070b766da"><div class="ttname"><a href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da">kvm_lapic_msr_read</a></div><div class="ttdeci">static int kvm_lapic_msr_read(struct kvm_lapic *apic, u32 reg, u64 *data)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l03165">lapic.c:3165</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_aec25ca9a5ddcfdd5fee6a986826582c7_cgraph.png" border="0" usemap="#alapic_8h_aec25ca9a5ddcfdd5fee6a986826582c7_cgraph" alt=""/></div>
<map name="alapic_8h_aec25ca9a5ddcfdd5fee6a986826582c7_cgraph" id="alapic_8h_aec25ca9a5ddcfdd5fee6a986826582c7_cgraph">
<area shape="rect" title=" " alt="" coords="5,172,189,199"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="237,147,395,173"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="257,197,375,224"/>
<area shape="rect" href="lapic_8c.html#a378a0961283ea67791303e70114fb10d" title=" " alt="" coords="443,116,604,143"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="447,179,600,205"/>
<area shape="rect" href="lapic_8c.html#aa06cb4ebbfa40dbfa494b3b4cd9f8833" title=" " alt="" coords="652,103,827,129"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="690,153,789,180"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="896,259,1039,285"/>
<area shape="rect" href="lapic_8c.html#a4b4d880305f2ddba0ac9fdb398a7611a" title=" " alt="" coords="663,255,816,297"/>
<area shape="rect" href="lapic_8c.html#a5bf640da1dfc1be09d89fb23c7f2e954" title=" " alt="" coords="1123,5,1244,32"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1312,21,1457,48"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="887,107,1047,133"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="903,157,1032,184"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="899,208,1036,235"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1519,21,1677,48"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="1112,107,1255,133"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="1112,158,1255,199"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="1519,72,1677,99"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1313,123,1457,149"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1755,123,1905,149"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1519,123,1677,149"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="1307,173,1463,200"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="1538,173,1658,200"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="1108,224,1259,251"/>
<area shape="rect" href="kvm__cache__regs_8h.html#ad97ff6b975b461b815e6749d29c65446" title=" " alt="" coords="1329,224,1440,251"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a5d9eb0563cffb1e3ed1cccebabcf2df6" title=" " alt="" coords="1511,224,1685,251"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="1733,224,1927,251"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="875,309,1060,336"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_aec25ca9a5ddcfdd5fee6a986826582c7_icgraph.png" border="0" usemap="#alapic_8h_aec25ca9a5ddcfdd5fee6a986826582c7_icgraph" alt=""/></div>
<map name="alapic_8h_aec25ca9a5ddcfdd5fee6a986826582c7_icgraph" id="alapic_8h_aec25ca9a5ddcfdd5fee6a986826582c7_icgraph">
<area shape="rect" title=" " alt="" coords="816,31,1000,57"/>
<area shape="rect" href="hyperv_8c.html#acd3e0dad98bde91068115067f6ec3ae6" title=" " alt="" coords="633,31,768,57"/>
<area shape="rect" href="hyperv_8c.html#a23d197f9ae27f820fa7e977aec518698" title=" " alt="" coords="387,31,585,57"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="164,31,339,57"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="5,5,116,32"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="5,56,116,83"/>
</map>
</div>

</div>
</div>
<a id="a6b13b534cc2764aef8abe2383294fb06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b13b534cc2764aef8abe2383294fb06">&#9670;&nbsp;</a></span>kvm_hv_vapic_msr_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_hv_vapic_msr_write </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>msr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03221">3221</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;{</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(vcpu))</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160; </div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079">kvm_lapic_msr_write</a>(vcpu-&gt;arch.apic, reg, data);</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a1b64be7f231109aa3e0382cc34a64079"><div class="ttname"><a href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079">kvm_lapic_msr_write</a></div><div class="ttdeci">static int kvm_lapic_msr_write(struct kvm_lapic *apic, u32 reg, u64 data)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l03182">lapic.c:3182</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a6b13b534cc2764aef8abe2383294fb06_cgraph.png" border="0" usemap="#alapic_8h_a6b13b534cc2764aef8abe2383294fb06_cgraph" alt=""/></div>
<map name="alapic_8h_a6b13b534cc2764aef8abe2383294fb06_cgraph" id="alapic_8h_a6b13b534cc2764aef8abe2383294fb06_cgraph">
<area shape="rect" title=" " alt="" coords="5,1583,193,1609"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="241,1532,403,1559"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1423,1557,1541,1584"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="454,639,611,665"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="451,1532,615,1559"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="949,832,1109,859"/>
<area shape="rect" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1" title=" " alt="" coords="663,411,873,437"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="717,512,819,539"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="713,360,823,387"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="957,157,1101,184"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="717,461,819,488"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="703,739,833,765"/>
<area shape="rect" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2" title=" " alt="" coords="959,933,1099,960"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1197,781,1343,808"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="1199,1220,1341,1247"/>
<area shape="rect" href="lapic_8c.html#aec07f4595f82e14e1075beb4730b6976" title=" " alt="" coords="713,908,823,935"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="695,1507,841,1533"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1185,1456,1355,1483"/>
<area shape="rect" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4" title=" " alt="" coords="699,309,837,336"/>
<area shape="rect" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554" title=" " alt="" coords="700,157,836,184"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="681,208,855,235"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="675,1405,861,1432"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="668,1111,868,1137"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="699,5,837,32"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="697,56,839,83"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="704,107,832,133"/>
<area shape="rect" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3" title=" " alt="" coords="689,613,847,640"/>
<area shape="rect" href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4" title=" " alt="" coords="675,664,861,691"/>
<area shape="rect" href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c" title=" " alt="" coords="955,259,1104,285"/>
<area shape="rect" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843" title=" " alt="" coords="974,360,1085,387"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="1191,385,1349,412"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="965,309,1094,336"/>
<area shape="rect" href="hyperv_8h.html#a7ffceaf3950bd76a9a3a28ff1e836e58" title=" " alt="" coords="933,563,1126,589"/>
<area shape="rect" href="hyperv_8c.html#a47f5a157cae898f7a7b370854c3748a4" title=" " alt="" coords="939,461,1119,488"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="948,512,1111,539"/>
<area shape="rect" href="xen_8h.html#ae436f94d060f3cb8029695c5a9fddc42" title=" " alt="" coords="932,208,1127,235"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1191,157,1349,184"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="953,715,1106,757"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="1205,933,1335,960"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1403,781,1561,808"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="935,1507,1124,1533"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="1199,1507,1341,1533"/>
<area shape="rect" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39" title=" " alt="" coords="963,1136,1095,1163"/>
<area shape="rect" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44" title=" " alt="" coords="952,1187,1107,1213"/>
<area shape="rect" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d" title=" " alt="" coords="941,1238,1118,1279"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="921,1035,1137,1061"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="1210,1035,1330,1061"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="927,1085,1131,1112"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="954,5,1105,32"/>
<area shape="rect" href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2" title=" " alt="" coords="688,1557,848,1584"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a6b13b534cc2764aef8abe2383294fb06_icgraph.png" border="0" usemap="#alapic_8h_a6b13b534cc2764aef8abe2383294fb06_icgraph" alt=""/></div>
<map name="alapic_8h_a6b13b534cc2764aef8abe2383294fb06_icgraph" id="alapic_8h_a6b13b534cc2764aef8abe2383294fb06_icgraph">
<area shape="rect" title=" " alt="" coords="813,56,1001,83"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="632,56,765,83"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,56,584,83"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,56,339,83"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,5,101,32"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,56,115,83"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,107,116,133"/>
</map>
</div>

</div>
</div>
<a id="a017e57adbc721d98d26099f1a431a22c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a017e57adbc721d98d26099f1a431a22c">&#9670;&nbsp;</a></span>kvm_inhibit_apic_access_page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_inhibit_apic_access_page </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02634">2634</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;{</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;    <span class="keyword">struct </span>kvm *kvm = vcpu-&gt;kvm;</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160; </div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;    <span class="keywordflow">if</span> (!kvm-&gt;arch.apic_access_memslot_enabled)</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160; </div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;    kvm_vcpu_srcu_read_unlock(vcpu);</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160; </div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;    mutex_lock(&amp;kvm-&gt;slots_lock);</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160; </div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;    <span class="keywordflow">if</span> (kvm-&gt;arch.apic_access_memslot_enabled) {</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;        <a class="code" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9">__x86_set_memory_region</a>(kvm, APIC_ACCESS_PAGE_PRIVATE_MEMSLOT, 0, 0);</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;<span class="comment">         * Clear &quot;enabled&quot; after the memslot is deleted so that a</span></div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;<span class="comment">         * different vCPU doesn&#39;t get a false negative when checking</span></div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;<span class="comment">         * the flag out of slots_lock.  No additional memory barrier is</span></div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;<span class="comment">         * needed as modifying memslots requires waiting other vCPUs to</span></div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;<span class="comment">         * drop SRCU (see above), and false positives are ok as the</span></div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;<span class="comment">         * flag is rechecked after acquiring slots_lock.</span></div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;        kvm-&gt;arch.apic_access_memslot_enabled = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160; </div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;<span class="comment">         * Mark the memslot as inhibited to prevent reallocating the</span></div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;<span class="comment">         * memslot during vCPU creation, e.g. if a vCPU is hotplugged.</span></div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;        kvm-&gt;arch.apic_access_memslot_inhibited = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;    }</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160; </div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;    mutex_unlock(&amp;kvm-&gt;slots_lock);</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160; </div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    kvm_vcpu_srcu_read_lock(vcpu);</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a017e57adbc721d98d26099f1a431a22c_cgraph.png" border="0" usemap="#alapic_8h_a017e57adbc721d98d26099f1a431a22c_cgraph" alt=""/></div>
<map name="alapic_8h_a017e57adbc721d98d26099f1a431a22c_cgraph" id="alapic_8h_a017e57adbc721d98d26099f1a431a22c_cgraph">
<area shape="rect" title=" " alt="" coords="5,217,228,243"/>
<area shape="rect" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9" title=" " alt="" coords="276,217,473,243"/>
<area shape="rect" href="kvm__main_8c.html#ac76f506181e49aa4800bb202e11cb2b3" title=" " alt="" coords="521,217,724,243"/>
<area shape="rect" href="kvm__main_8c.html#ab790fe1e5bd86339acfc80a95efddf4c" title=" " alt="" coords="795,100,966,141"/>
<area shape="rect" href="kvm__main_8c.html#a8f5a06af032a1edb199b4ae393b2de8e" title=" " alt="" coords="772,166,989,193"/>
<area shape="rect" href="guest__memfd_8c.html#abaf64b8cb9e32ccb368d1d9c49d0bb02" title=" " alt="" coords="813,217,948,243"/>
<area shape="rect" href="guest__memfd_8c.html#a905ecfa162a290dceb1c7d5678e2a70f" title=" " alt="" coords="1594,267,1745,294"/>
<area shape="rect" href="kvm__main_8c.html#ac81a7d714d0668ccea6d0c2ddfd0fed5" title=" " alt="" coords="809,705,952,731"/>
<area shape="rect" href="guest__memfd_8c.html#a2eab57d9fb8529d3751b5c8179d881c9" title=" " alt="" coords="1861,267,2016,294"/>
<area shape="rect" href="kvm__main_8c.html#a52d56a5dc447602839375289b5bbffb2" title=" " alt="" coords="1319,806,1495,833"/>
<area shape="rect" href="kvm__main_8c.html#a05eed662dd45e4e4f7485e3158d95a3b" title=" " alt="" coords="1037,343,1256,370"/>
<area shape="rect" href="kvm__main_8c.html#a8c9bd99a64bbedb0930e29ed4dcc7897" title=" " alt="" coords="1065,705,1229,731"/>
<area shape="rect" href="kvm__main_8c.html#ac4ce014a99262ed5672a102c6d2ffdbd" title=" " alt="" coords="1065,755,1229,782"/>
<area shape="rect" href="kvm__main_8c.html#aae203bcd73cff0002aeddd37bea71323" title=" " alt="" coords="1313,654,1501,681"/>
<area shape="rect" href="kvm__main_8c.html#afdb5cea8958921b2ea9bd3a29cf9d7a6" title=" " alt="" coords="1067,857,1227,883"/>
<area shape="rect" href="kvm__main_8c.html#a6dd13a049fee9663450eebbf2ac16faa" title=" " alt="" coords="1061,537,1232,579"/>
<area shape="rect" href="kvm__main_8c.html#a192569033b972982f6b53e13666ef82b" title=" " alt="" coords="1043,907,1250,934"/>
<area shape="rect" href="kvm__main_8c.html#aa89329e461345f4a586065895ca072c6" title=" " alt="" coords="1843,1009,2035,1035"/>
<area shape="rect" href="kvm__main_8c.html#a115855e32d0da82706ba0bf22d90d8f1" title=" " alt="" coords="1584,857,1755,883"/>
<area shape="rect" href="kvm__main_8c.html#a6178ec8efee3ce8e53d84403b2a25401" title=" " alt="" coords="1564,781,1775,807"/>
<area shape="rect" href="kvm__main_8c.html#ada893d7e7d49d1023d23653b23944572" title=" " alt="" coords="1858,907,2019,934"/>
<area shape="rect" href="kvm__main_8c.html#a1a0266e85b304bdbde46a83f921d9606" title=" " alt="" coords="1833,806,2044,833"/>
<area shape="rect" href="kvm__main_8c.html#a578857fc65c8fabf9b425ff0b55a5fd3" title=" " alt="" coords="1857,958,2020,985"/>
<area shape="rect" href="kvm__main_8c.html#aa3b1664c58e5dab933e8659d884d56f3" title=" " alt="" coords="1852,857,2025,883"/>
<area shape="rect" href="x86_8c.html#ae7e25dec8e0af366fb3db41dc9881970" title=" " alt="" coords="1829,755,2048,782"/>
<area shape="rect" href="mmu_8c.html#ad4293ab926b1ab16fb8b380a76b9f533" title=" " alt="" coords="2105,748,2269,789"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="2125,814,2248,841"/>
<area shape="rect" href="mmu_8c.html#abd59fd9785b9b5676841e9706c1c6797" title=" " alt="" coords="2325,723,2503,750"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="1304,201,1509,243"/>
<area shape="rect" href="kvm__main_8c.html#aab592fb3a4d6204c86d8f99caa0986ba" title=" " alt="" coords="1571,369,1768,395"/>
<area shape="rect" href="kvm__main_8c.html#ae2d9291adcda0ba0f7a20350dabdd418" title=" " alt="" coords="1332,318,1481,345"/>
<area shape="rect" href="x86_8c.html#a5a34304a4f0ec19e4bce34e0513fc3a4" title=" " alt="" coords="1577,318,1761,345"/>
<area shape="rect" href="mmu_8c.html#a51621e034894e480342d3a5b48735d41" title=" " alt="" coords="1576,201,1763,243"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="1586,77,1753,119"/>
<area shape="rect" href="page__track_8h.html#ad39459f95333b39d77e1b95c99e492d8" title=" " alt="" coords="1565,150,1774,177"/>
<area shape="rect" href="page__track_8c.html#a876b27e07f1856c775d5e2241ac73236" title=" " alt="" coords="1857,319,2020,360"/>
<area shape="rect" href="x86_8c.html#a25b71677a5ab6ea572b8ecc3fd4e5a7c" title=" " alt="" coords="1861,435,2016,462"/>
<area shape="rect" href="mmu_8c.html#aeca903955eae791df4e1e22dcff2671f" title=" " alt="" coords="1854,201,2023,243"/>
<area shape="rect" href="kvm__main_8c.html#a9fbc5527db7bcb223ecfe95c59cf4c70" title=" " alt="" coords="1851,71,2026,112"/>
<area shape="rect" href="mmu_8c.html#acb92068f6e948846797ac6814b3618f1" title=" " alt="" coords="1841,136,2036,177"/>
<area shape="rect" href="mmu_8c.html#a168b7814e68a545abd8bf00fc4466610" title=" " alt="" coords="1849,5,2029,47"/>
<area shape="rect" href="mmu_8c.html#a58fe7b43995ae8c20c597e1bb9c4c007" title=" " alt="" coords="2096,683,2277,724"/>
<area shape="rect" href="kvm__main_8c.html#a31dbd36d8363fc2e5979b3976ebc0dbb" title=" " alt="" coords="1574,588,1765,629"/>
<area shape="rect" href="kvm__main_8c.html#aa87d0b55e37a312b7291fa9b5c83634c" title=" " alt="" coords="1592,654,1747,681"/>
<area shape="rect" href="kvm__main_8c.html#a40ed7705420af10446677d1c99a0978e" title=" " alt="" coords="1317,545,1496,571"/>
<area shape="rect" href="x86_8c.html#a14568e065745512e03b3088070848289" title=" " alt="" coords="1304,479,1509,520"/>
<area shape="rect" href="dirty__ring_8c.html#a38d9bd671fa9181708075184e77eca3a" title=" " alt="" coords="1321,595,1492,622"/>
<area shape="rect" href="x86_8c.html#a1be4ac58e0429946d83b58f98bfe2301" title=" " alt="" coords="1557,486,1781,513"/>
<area shape="rect" href="mmu_8h.html#a6555cf2d510d04ae19bee154d166f778" title=" " alt="" coords="1591,537,1747,563"/>
<area shape="rect" href="page__track_8h.html#a1453d524dfa18fda6888847bab37b66b" title=" " alt="" coords="1589,420,1749,461"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a017e57adbc721d98d26099f1a431a22c_icgraph.png" border="0" usemap="#alapic_8h_a017e57adbc721d98d26099f1a431a22c_icgraph" alt=""/></div>
<map name="alapic_8h_a017e57adbc721d98d26099f1a431a22c_icgraph" id="alapic_8h_a017e57adbc721d98d26099f1a431a22c_icgraph">
<area shape="rect" title=" " alt="" coords="957,5,1180,32"/>
<area shape="rect" href="x86_8c.html#a384702aafa8cdbab3cf92b3d576bb6fb" title=" " alt="" coords="727,5,909,32"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="541,5,679,32"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,5,493,32"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a8620b1c89f8cf017f7827024fc95ac92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8620b1c89f8cf017f7827024fc95ac92">&#9670;&nbsp;</a></span>kvm_intr_is_single_vcpu_fast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_intr_is_single_vcpu_fast </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_lapic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_vcpu **&#160;</td>
          <td class="paramname"><em>dest_vcpu</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01259">1259</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;{</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="keyword">struct </span>kvm_apic_map *map;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> bitmap;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> **dst = NULL;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160; </div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="keywordflow">if</span> (irq-&gt;shorthand)</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160; </div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    rcu_read_lock();</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    map = rcu_dereference(kvm-&gt;arch.apic_map);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160; </div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f">kvm_apic_map_get_dest_lapic</a>(kvm, NULL, irq, map, &amp;dst, &amp;bitmap) &amp;&amp;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            hweight16(bitmap) == 1) {</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i = find_first_bit(&amp;bitmap, 16);</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160; </div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        <span class="keywordflow">if</span> (dst[i]) {</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            *dest_vcpu = dst[i]-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        }</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    }</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160; </div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    rcu_read_unlock();</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a8620b1c89f8cf017f7827024fc95ac92_cgraph.png" border="0" usemap="#alapic_8h_a8620b1c89f8cf017f7827024fc95ac92_cgraph" alt=""/></div>
<map name="alapic_8h_a8620b1c89f8cf017f7827024fc95ac92_cgraph" id="alapic_8h_a8620b1c89f8cf017f7827024fc95ac92_cgraph">
<area shape="rect" title=" " alt="" coords="5,166,149,207"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="197,166,381,207"/>
<area shape="rect" href="lapic_8c.html#a47d52843df792ef8e7bffdfb66a3b40b" title=" " alt="" coords="456,5,637,32"/>
<area shape="rect" href="lapic_8c.html#a079d589509607a9d9baa6bed3eae7fa6" title=" " alt="" coords="454,57,639,98"/>
<area shape="rect" href="lapic_8c.html#abbce6da431ef5f15d85b5fc741d3ef72" title=" " alt="" coords="442,123,651,149"/>
<area shape="rect" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3" title=" " alt="" coords="429,173,664,200"/>
<area shape="rect" href="lapic_8h.html#adfbea71ac96b210fb91bef47c77194f1" title=" " alt="" coords="450,224,643,251"/>
<area shape="rect" href="x86_8c.html#a47d88660a2a5f8ee22df1253604d1ed7" title=" " alt="" coords="468,275,625,317"/>
<area shape="rect" href="lapic_8c.html#ac9fecb7d9f4574931650af9abb4b9f4c" title=" " alt="" coords="465,341,628,368"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="712,123,855,149"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a8620b1c89f8cf017f7827024fc95ac92_icgraph.png" border="0" usemap="#alapic_8h_a8620b1c89f8cf017f7827024fc95ac92_icgraph" alt=""/></div>
<map name="alapic_8h_a8620b1c89f8cf017f7827024fc95ac92_icgraph" id="alapic_8h_a8620b1c89f8cf017f7827024fc95ac92_icgraph">
<area shape="rect" title=" " alt="" coords="632,23,776,65"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="401,31,584,57"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="212,5,344,32"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="203,56,353,83"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="5,5,155,32"/>
</map>
</div>

</div>
</div>
<a id="a17eee4051fa1d41b805b09a195f64045"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17eee4051fa1d41b805b09a195f64045">&#9670;&nbsp;</a></span>kvm_irq_delivery_to_apic_fast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_irq_delivery_to_apic_fast </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_lapic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdest__map.html">dest_map</a> *&#160;</td>
          <td class="paramname"><em>dest_map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01208">1208</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;{</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keyword">struct </span>kvm_apic_map *map;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> bitmap;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> **dst = NULL;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="keywordtype">bool</span> ret;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160; </div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    *r = -1;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160; </div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordflow">if</span> (irq-&gt;shorthand == APIC_DEST_SELF) {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        <span class="keywordflow">if</span> (KVM_BUG_ON(!src, kvm)) {</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;            *r = 0;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        }</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        *r = <a class="code" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741">kvm_apic_set_irq</a>(src-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, irq, <a class="code" href="structdest__map.html">dest_map</a>);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    rcu_read_lock();</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    map = rcu_dereference(kvm-&gt;arch.apic_map);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160; </div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    ret = <a class="code" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f">kvm_apic_map_get_dest_lapic</a>(kvm, &amp;src, irq, map, &amp;dst, &amp;bitmap);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keywordflow">if</span> (ret) {</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        *r = 0;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        for_each_set_bit(i, &amp;bitmap, 16) {</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            <span class="keywordflow">if</span> (!dst[i])</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            *r += <a class="code" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741">kvm_apic_set_irq</a>(dst[i]-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, irq, <a class="code" href="structdest__map.html">dest_map</a>);</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        }</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    }</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    rcu_read_unlock();</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a3d272e1b73f22f797955e7ddea84b741"><div class="ttname"><a href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741">kvm_apic_set_irq</a></div><div class="ttdeci">int kvm_apic_set_irq(struct kvm_vcpu *vcpu, struct kvm_lapic_irq *irq, struct dest_map *dest_map)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00823">lapic.c:823</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a17eee4051fa1d41b805b09a195f64045_cgraph.png" border="0" usemap="#alapic_8h_a17eee4051fa1d41b805b09a195f64045_cgraph" alt=""/></div>
<map name="alapic_8h_a17eee4051fa1d41b805b09a195f64045_cgraph" id="alapic_8h_a17eee4051fa1d41b805b09a195f64045_cgraph">
<area shape="rect" title=" " alt="" coords="5,275,160,317"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="208,191,392,233"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="232,312,368,339"/>
<area shape="rect" href="lapic_8c.html#a47d52843df792ef8e7bffdfb66a3b40b" title=" " alt="" coords="467,5,648,32"/>
<area shape="rect" href="lapic_8c.html#a079d589509607a9d9baa6bed3eae7fa6" title=" " alt="" coords="465,57,650,98"/>
<area shape="rect" href="lapic_8c.html#abbce6da431ef5f15d85b5fc741d3ef72" title=" " alt="" coords="453,123,662,149"/>
<area shape="rect" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3" title=" " alt="" coords="440,173,675,200"/>
<area shape="rect" href="lapic_8h.html#adfbea71ac96b210fb91bef47c77194f1" title=" " alt="" coords="461,224,654,251"/>
<area shape="rect" href="x86_8c.html#a47d88660a2a5f8ee22df1253604d1ed7" title=" " alt="" coords="479,275,636,317"/>
<area shape="rect" href="lapic_8c.html#ac9fecb7d9f4574931650af9abb4b9f4c" title=" " alt="" coords="476,341,639,368"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="739,123,882,149"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="489,392,626,419"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="757,240,865,267"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="746,291,875,317"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="747,341,874,368"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="748,392,873,419"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="723,443,899,469"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="729,493,893,520"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="749,544,872,571"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="965,215,1136,241"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="966,265,1135,292"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="947,519,1155,545"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="974,569,1127,596"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a17eee4051fa1d41b805b09a195f64045_icgraph.png" border="0" usemap="#alapic_8h_a17eee4051fa1d41b805b09a195f64045_icgraph" alt=""/></div>
<map name="alapic_8h_a17eee4051fa1d41b805b09a195f64045_icgraph" id="alapic_8h_a17eee4051fa1d41b805b09a195f64045_icgraph">
<area shape="rect" title=" " alt="" coords="1648,149,1803,190"/>
<area shape="rect" href="irq__comm_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="920,61,1121,88"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1411,588,1600,615"/>
<area shape="rect" href="xen_8c.html#a7ba53f4f869b74569192380f1adfd40c" title=" " alt="" coords="1424,149,1587,190"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="1210,411,1325,437"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="1194,639,1341,665"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="1187,740,1348,767"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1213,563,1322,589"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="1214,824,1321,851"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="965,360,1077,387"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="942,411,1099,437"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="917,284,1124,311"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="917,461,1124,488"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="684,309,847,336"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="691,360,839,387"/>
<area shape="rect" href="ioapic_8c.html#a477f1b98bf8d9dfcd1e51c743d79ac47" title=" " alt="" coords="457,309,581,336"/>
<area shape="rect" href="irq__comm_8c.html#ae12bd4085acdb92be18af95ac983d5a5" title=" " alt="" coords="445,385,593,412"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="205,436,377,463"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="5,436,157,463"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="692,411,839,437"/>
<area shape="rect" href="ioapic_8c.html#a21c528e901ef596bba3f882ed5ac9597" title=" " alt="" coords="703,259,828,285"/>
<area shape="rect" href="x86_8c.html#a10224987f77e7370dd9f2b80352544ab" title=" " alt="" coords="445,208,594,235"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="677,461,853,488"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="438,461,601,488"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="443,582,595,623"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="942,668,1099,695"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="939,719,1103,745"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="698,617,833,644"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="668,719,863,745"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="685,769,846,796"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="694,668,837,695"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="430,719,609,745"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="449,668,589,695"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="425,820,613,847"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="433,769,606,796"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="688,821,843,862"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="931,769,1110,796"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="924,563,1117,589"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="937,824,1104,851"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="949,883,1092,909"/>
<area shape="rect" href="hyperv_8c.html#a3bfbf343eefc11963b210ba8322f6826" title=" " alt="" coords="697,887,834,913"/>
<area shape="rect" href="xen_8c.html#a0fb0356e88890003922daf35627420a8" title=" " alt="" coords="1176,185,1359,226"/>
<area shape="rect" href="xen_8c.html#a48738df3c98025631e2412d90758136c" title=" " alt="" coords="1172,112,1363,139"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="980,197,1061,224"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="672,208,859,235"/>
<area shape="rect" href="xen_8c.html#a59091fb436633f85ba3e28187f5794d0" title=" " alt="" coords="941,112,1100,139"/>
<area shape="rect" href="xen_8c.html#a7432a92fb771aeb9f60ca4d89c10f15b" title=" " alt="" coords="709,5,822,32"/>
<area shape="rect" href="xen_8c.html#a42cb09290dc39689baca95686be1ff69" title=" " alt="" coords="661,56,869,83"/>
<area shape="rect" href="xen_8c.html#a952a322aa5cce4d0bd3fe372d820de13" title=" " alt="" coords="662,157,869,184"/>
<area shape="rect" href="xen_8c.html#ab30962c07569543c2879269c4ec40d70" title=" " alt="" coords="667,107,864,133"/>
</map>
</div>

</div>
</div>
<a id="ada4d7479e3c0f2e45cb1565dab78c198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada4d7479e3c0f2e45cb1565dab78c198">&#9670;&nbsp;</a></span>kvm_lapic_clear_vector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_lapic_clear_vector </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>bitmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00154">154</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;{</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    clear_bit(<a class="code" href="lapic_8h.html#a9c7a9b90f9a68f13aa4b9395a275ca96">VEC_POS</a>(vec), (bitmap) + <a class="code" href="lapic_8h.html#aba88c7489787a27e53b077679ce7b534">REG_POS</a>(vec));</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;}</div>
<div class="ttc" id="alapic_8h_html_a9c7a9b90f9a68f13aa4b9395a275ca96"><div class="ttname"><a href="lapic_8h.html#a9c7a9b90f9a68f13aa4b9395a275ca96">VEC_POS</a></div><div class="ttdeci">#define VEC_POS(v)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00151">lapic.h:151</a></div></div>
<div class="ttc" id="alapic_8h_html_aba88c7489787a27e53b077679ce7b534"><div class="ttname"><a href="lapic_8h.html#aba88c7489787a27e53b077679ce7b534">REG_POS</a></div><div class="ttdeci">#define REG_POS(v)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00152">lapic.h:152</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_ada4d7479e3c0f2e45cb1565dab78c198_icgraph.png" border="0" usemap="#alapic_8h_ada4d7479e3c0f2e45cb1565dab78c198_icgraph" alt=""/></div>
<map name="alapic_8h_ada4d7479e3c0f2e45cb1565dab78c198_icgraph" id="alapic_8h_ada4d7479e3c0f2e45cb1565dab78c198_icgraph">
<area shape="rect" title=" " alt="" coords="1360,600,1536,627"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1175,575,1312,601"/>
<area shape="rect" href="lapic_8c.html#ad2b5e2187414c65e1a5876e641fee3fc" title=" " alt="" coords="1189,625,1298,652"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="951,303,1126,329"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="971,667,1107,693"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="710,206,897,247"/>
<area shape="rect" href="pmu_8c.html#a03a16f548326b68245a4bf0555bea777" title=" " alt="" coords="718,329,889,356"/>
<area shape="rect" href="x86_8c.html#a130b6ed14cf18384646cb31251dd104e" title=" " alt="" coords="711,276,896,303"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="482,107,629,133"/>
<area shape="rect" href="irq_8h.html#ac79f0e40ed0e1cde83a09aef506fb373" title=" " alt="" coords="455,213,656,240"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="235,158,403,199"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="261,5,378,32"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="257,56,382,83"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="240,107,399,133"/>
<area shape="rect" href="irq_8c.html#a2d54275d9e142ae8e337298689483728" title=" " alt="" coords="243,223,396,265"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="54,303,135,329"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="251,373,388,400"/>
<area shape="rect" href="x86_8c.html#a2de10bf19fee1e2a9cb47b6f491a18b4" title=" " alt="" coords="478,265,633,306"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="240,289,399,316"/>
<area shape="rect" href="lapic_8c.html#a33f4e295e9710d133e3e38e0aed35edb" title=" " alt="" coords="747,667,860,693"/>
<area shape="rect" href="x86_8c.html#a62f68db08e13f0a4f3d158afda4631b1" title=" " alt="" coords="718,601,889,642"/>
<area shape="rect" href="hyperv_8c.html#a31df0137f9f8af335cbac3d4179b12a2" title=" " alt="" coords="704,717,903,744"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="461,885,650,912"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="726,781,881,822"/>
<area shape="rect" href="hyperv_8c.html#abc5b43adce506bcd416c9e84aa6cf54b" title=" " alt="" coords="727,524,879,551"/>
<area shape="rect" href="lapic_8c.html#a7195db5c58bcea2e080ee79cdaeae617" title=" " alt="" coords="488,667,623,693"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="5,717,184,744"/>
<area shape="rect" href="async__pf_8c.html#ad9b3dc2e31779a009859785fae9a8ec5" title=" " alt="" coords="486,616,625,643"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="475,550,636,591"/>
<area shape="rect" href="async__pf_8c.html#a55ca283598f3d739a56b50a0f7b908e2" title=" " alt="" coords="240,616,399,643"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="232,557,407,584"/>
<area shape="rect" href="hyperv_8c.html#a4ca4f7e6e021870753e15fa1072e828d" title=" " alt="" coords="488,717,623,744"/>
<area shape="rect" href="hyperv_8c.html#ac96f1fa9ec6ac0ac26c24ca65cc1547e" title=" " alt="" coords="249,717,390,744"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="262,831,377,857"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="246,932,393,959"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="239,772,400,799"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="265,983,374,1009"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="266,881,373,908"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="39,831,151,857"/>
<area shape="rect" href="irq__comm_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="455,768,656,795"/>
<area shape="rect" href="xen_8c.html#a7ba53f4f869b74569192380f1adfd40c" title=" " alt="" coords="474,819,637,861"/>
<area shape="rect" href="hyperv_8c.html#acbc8238b9eb8f24485d6bc9eefc06474" title=" " alt="" coords="487,499,624,525"/>
<area shape="rect" href="lapic_8c.html#ad608730f208932f64d2c98c762fce85c" title=" " alt="" coords="966,827,1111,853"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="951,532,1127,559"/>
<area shape="rect" href="vmx_2nested_8c.html#add1e82c32385142c0fca04a1db8cbc3a" title=" " alt="" coords="738,936,869,963"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fecee9010894e3a1513a0924e24dd6" title=" " alt="" coords="487,936,624,963"/>
<area shape="rect" href="vmx_2nested_8c.html#a23e3de8c964e87404eea818be6f70154" title=" " alt="" coords="484,987,627,1013"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="717,448,889,475"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="470,382,641,423"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="478,448,633,475"/>
</map>
</div>

</div>
</div>
<a id="ac572ef1ae29ec34adf2d46f7b82cc620"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac572ef1ae29ec34adf2d46f7b82cc620">&#9670;&nbsp;</a></span>kvm_lapic_enabled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kvm_lapic_enabled </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00216">216</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;{</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4">kvm_apic_present</a>(vcpu) &amp;&amp; <a class="code" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f">kvm_apic_sw_enabled</a>(vcpu-&gt;arch.apic);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div>
<div class="ttc" id="alapic_8h_html_a447b1b971acaf871dd62669b4aa3116f"><div class="ttname"><a href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f">kvm_apic_sw_enabled</a></div><div class="ttdeci">static bool kvm_apic_sw_enabled(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00204">lapic.h:204</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_ac572ef1ae29ec34adf2d46f7b82cc620_cgraph.png" border="0" usemap="#alapic_8h_ac572ef1ae29ec34adf2d46f7b82cc620_cgraph" alt=""/></div>
<map name="alapic_8h_ac572ef1ae29ec34adf2d46f7b82cc620_cgraph" id="alapic_8h_ac572ef1ae29ec34adf2d46f7b82cc620_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,153,83"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="215,31,357,57"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="201,81,371,108"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="419,5,589,32"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="445,56,563,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_ac572ef1ae29ec34adf2d46f7b82cc620_icgraph.png" border="0" usemap="#alapic_8h_ac572ef1ae29ec34adf2d46f7b82cc620_icgraph" alt=""/></div>
<map name="alapic_8h_ac572ef1ae29ec34adf2d46f7b82cc620_icgraph" id="alapic_8h_ac572ef1ae29ec34adf2d46f7b82cc620_icgraph">
<area shape="rect" title=" " alt="" coords="1229,107,1377,133"/>
<area shape="rect" href="x86_8c.html#abe891acb00f8f1c0cd67017dc20b89a6" title=" " alt="" coords="1003,70,1181,111"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="589,136,727,163"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="793,70,955,111"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="571,67,745,93"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="427,5,508,32"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="413,56,522,83"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="412,107,523,133"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="427,157,508,184"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,157,364,184"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,157,129,184"/>
</map>
</div>

</div>
</div>
<a id="af2d9c133a24e68f345a3fe133bf8bfaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2d9c133a24e68f345a3fe133bf8bfaf">&#9670;&nbsp;</a></span>kvm_lapic_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_exit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03313">3313</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;{</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;    static_key_deferred_flush(&amp;<a class="code" href="lapic_8h.html#a65788ee3d09ea041368cd93b3391f3c4">apic_hw_disabled</a>);</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;    WARN_ON(static_branch_unlikely(&amp;<a class="code" href="lapic_8h.html#a65788ee3d09ea041368cd93b3391f3c4">apic_hw_disabled</a>.key));</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;    static_key_deferred_flush(&amp;<a class="code" href="lapic_8h.html#a3c2a1bc1bb244452f5338719ef4e73c8">apic_sw_disabled</a>);</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;    WARN_ON(static_branch_unlikely(&amp;<a class="code" href="lapic_8h.html#a3c2a1bc1bb244452f5338719ef4e73c8">apic_sw_disabled</a>.key));</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_af2d9c133a24e68f345a3fe133bf8bfaf_icgraph.png" border="0" usemap="#alapic_8h_af2d9c133a24e68f345a3fe133bf8bfaf_icgraph" alt=""/></div>
<map name="alapic_8h_af2d9c133a24e68f345a3fe133bf8bfaf_icgraph" id="alapic_8h_af2d9c133a24e68f345a3fe133bf8bfaf_icgraph">
<area shape="rect" title=" " alt="" coords="495,81,616,108"/>
<area shape="rect" href="x86_8c.html#a6b0e9d5b7fc8842b6316f94643af7023" title=" " alt="" coords="280,81,447,108"/>
<area shape="rect" href="svm_8c.html#a5b14d1e0632116bdfd341cd3c892a5eb" title=" " alt="" coords="136,31,232,57"/>
<area shape="rect" href="vmx_8c.html#acac20580f6f7fdad4ef0e94f2465c889" title=" " alt="" coords="143,81,225,108"/>
<area shape="rect" href="vmx_8c.html#aa8f62a8c3a5a5da29c69565d2645a371" title=" " alt="" coords="145,132,223,159"/>
<area shape="rect" href="svm_8c.html#ae292292ef2cf8cb0d48cfa27ce94ef88" title=" " alt="" coords="5,5,88,32"/>
<area shape="rect" href="svm_8c.html#aa667b0a0f202f83aa1533825aeecb402" title=" " alt="" coords="7,56,86,83"/>
</map>
</div>

</div>
</div>
<a id="a55b40b66655c45769650efd20bf3c26d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55b40b66655c45769650efd20bf3c26d">&#9670;&nbsp;</a></span>kvm_lapic_expired_hv_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_expired_hv_timer </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02171">2171</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;{</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160; </div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;    preempt_disable();</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    <span class="comment">/* If the preempt notifier has already run, it also called apic_timer_expired */</span></div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    <span class="keywordflow">if</span> (!apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a033831ad90c69d7ea4e9af3fd0a6727e">hv_timer_in_use</a>)</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    WARN_ON(kvm_vcpu_is_blocking(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>));</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    <a class="code" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837">apic_timer_expired</a>(apic, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    <a class="code" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae">cancel_hv_timer</a>(apic);</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160; </div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667">apic_lvtt_period</a>(apic) &amp;&amp; apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a>) {</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;        <a class="code" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede">advance_periodic_target_expiration</a>(apic);</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;        <a class="code" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db">restart_apic_timer</a>(apic);</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    }</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;out:</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    preempt_enable();</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a5cff2e426d700ad5b4cc78b9a3ea1ede"><div class="ttname"><a href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede">advance_periodic_target_expiration</a></div><div class="ttdeci">static void advance_periodic_target_expiration(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02042">lapic.c:2042</a></div></div>
<div class="ttc" id="alapic_8c_html_a843b5038a6a8d6c20b11bd97b69bf667"><div class="ttname"><a href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667">apic_lvtt_period</a></div><div class="ttdeci">static int apic_lvtt_period(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00548">lapic.c:548</a></div></div>
<div class="ttc" id="alapic_8c_html_adc5f49f6a4cafac330b1fc370038f837"><div class="ttname"><a href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837">apic_timer_expired</a></div><div class="ttdeci">static void apic_timer_expired(struct kvm_lapic *apic, bool from_timer_fn)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01892">lapic.c:1892</a></div></div>
<div class="ttc" id="alapic_8c_html_ade21404bee3e5dbbe596ff391e0a23db"><div class="ttname"><a href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db">restart_apic_timer</a></div><div class="ttdeci">static void restart_apic_timer(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02158">lapic.c:2158</a></div></div>
<div class="ttc" id="alapic_8c_html_af8cab016891083e066b7e1c086d012ae"><div class="ttname"><a href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae">cancel_hv_timer</a></div><div class="ttdeci">static void cancel_hv_timer(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02091">lapic.c:2091</a></div></div>
<div class="ttc" id="astructkvm__timer_html_a033831ad90c69d7ea4e9af3fd0a6727e"><div class="ttname"><a href="structkvm__timer.html#a033831ad90c69d7ea4e9af3fd0a6727e">kvm_timer::hv_timer_in_use</a></div><div class="ttdeci">bool hv_timer_in_use</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00056">lapic.h:56</a></div></div>
<div class="ttc" id="astructkvm__timer_html_a159bd17861468df061b33cdbd9a6b477"><div class="ttname"><a href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">kvm_timer::period</a></div><div class="ttdeci">s64 period</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00048">lapic.h:48</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a55b40b66655c45769650efd20bf3c26d_cgraph.png" border="0" usemap="#alapic_8h_a55b40b66655c45769650efd20bf3c26d_cgraph" alt=""/></div>
<map name="alapic_8h_a55b40b66655c45769650efd20bf3c26d_cgraph" id="alapic_8h_a55b40b66655c45769650efd20bf3c26d_cgraph">
<area shape="rect" title=" " alt="" coords="5,279,173,321"/>
<area shape="rect" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede" title=" " alt="" coords="784,614,967,655"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="593,287,720,313"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="802,244,949,271"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="592,236,721,263"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="221,287,363,313"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="1271,528,1403,555"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="1501,604,1621,631"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="1502,541,1621,568"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="1739,705,1835,732"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="1015,427,1201,453"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="1257,309,1417,336"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="1015,361,1201,402"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1725,183,1848,209"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="1021,208,1195,235"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="1021,91,1195,133"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="1261,477,1412,504"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="1265,411,1408,453"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="1268,579,1405,605"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="1249,360,1424,387"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1493,361,1630,388"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1941,259,2112,285"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="1484,473,1639,514"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1489,208,1634,235"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1489,415,1633,441"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1733,335,1841,361"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1722,385,1851,412"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1723,436,1850,463"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1724,487,1849,513"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1699,537,1875,564"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1705,284,1869,311"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1942,335,2111,361"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1923,145,2131,172"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1950,196,2103,223"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1709,639,1864,681"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1707,132,1866,159"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1707,588,1866,615"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="1257,57,1416,98"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="1493,107,1630,133"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="1481,5,1642,32"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="1472,56,1651,83"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1727,56,1846,83"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="411,236,529,263"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="411,388,529,415"/>
<area shape="rect" href="lapic_8c.html#a2400290b895608d302ecce4ee352ee25" title=" " alt="" coords="1020,40,1196,67"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="594,501,719,528"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="577,337,736,364"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a55b40b66655c45769650efd20bf3c26d_icgraph.png" border="0" usemap="#alapic_8h_a55b40b66655c45769650efd20bf3c26d_icgraph" alt=""/></div>
<map name="alapic_8h_a55b40b66655c45769650efd20bf3c26d_icgraph" id="alapic_8h_a55b40b66655c45769650efd20bf3c26d_icgraph">
<area shape="rect" title=" " alt="" coords="896,23,1064,65"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="639,23,848,65"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="392,5,583,32"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="384,56,591,83"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="188,5,336,32"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="5,5,140,32"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="203,56,321,83"/>
</map>
</div>

</div>
</div>
<a id="a1e5b22760af617cabb18355a0a373156"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e5b22760af617cabb18355a0a373156">&#9670;&nbsp;</a></span>kvm_lapic_find_highest_irr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_lapic_find_highest_irr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00808">808</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;{</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="comment">/* This may race with setting of irr in __apic_accept_irq() and</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">     * value returned may be wrong, but kvm_vcpu_kick() in __apic_accept_irq</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment">     * will cause vmexit immediately and the value will be recalculated</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">     * on the next vmentry.</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79">apic_find_highest_irr</a>(vcpu-&gt;arch.apic);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a1e5b22760af617cabb18355a0a373156_cgraph.png" border="0" usemap="#alapic_8h_a1e5b22760af617cabb18355a0a373156_cgraph" alt=""/></div>
<map name="alapic_8h_a1e5b22760af617cabb18355a0a373156_cgraph" id="alapic_8h_a1e5b22760af617cabb18355a0a373156_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,201,32"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="249,5,405,32"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="453,5,573,32"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="621,5,771,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a1e5b22760af617cabb18355a0a373156_icgraph.png" border="0" usemap="#alapic_8h_a1e5b22760af617cabb18355a0a373156_icgraph" alt=""/></div>
<map name="alapic_8h_a1e5b22760af617cabb18355a0a373156_icgraph" id="alapic_8h_a1e5b22760af617cabb18355a0a373156_icgraph">
<area shape="rect" title=" " alt="" coords="1191,121,1387,148"/>
<area shape="rect" href="x86_8c.html#af2257f2e81aff845f58e2112c4f46ce7" title=" " alt="" coords="984,96,1143,123"/>
<area shape="rect" href="vmx_8c.html#ac2197e1b1fbae590edacaecfd1d0974c" title=" " alt="" coords="987,147,1140,173"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="773,96,936,123"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="779,9,930,50"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="786,147,923,173"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="623,107,721,133"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="619,56,725,83"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,55,350,97"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="448,111,535,137"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,63,129,89"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,121,364,148"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="412,5,571,32"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="631,157,713,184"/>
</map>
</div>

</div>
</div>
<a id="abb2749600d08d491d91b7d3ce1d0cfaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb2749600d08d491d91b7d3ce1d0cfaf">&#9670;&nbsp;</a></span>kvm_lapic_get_base()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 kvm_lapic_get_base </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3aead5d19fd0505da0197dfc140d6824"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3aead5d19fd0505da0197dfc140d6824">&#9670;&nbsp;</a></span>kvm_lapic_get_cr8()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 kvm_lapic_get_cr8 </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02521">2521</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;{</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;    u64 tpr;</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160; </div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    tpr = (u64) <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(vcpu-&gt;arch.apic, APIC_TASKPRI);</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160; </div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    <span class="keywordflow">return</span> (tpr &amp; 0xf0) &gt;&gt; 4;</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a3aead5d19fd0505da0197dfc140d6824_cgraph.png" border="0" usemap="#alapic_8h_a3aead5d19fd0505da0197dfc140d6824_cgraph" alt=""/></div>
<map name="alapic_8h_a3aead5d19fd0505da0197dfc140d6824_cgraph" id="alapic_8h_a3aead5d19fd0505da0197dfc140d6824_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,149,32"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="197,5,343,32"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="391,5,549,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a3aead5d19fd0505da0197dfc140d6824_icgraph.png" border="0" usemap="#alapic_8h_a3aead5d19fd0505da0197dfc140d6824_icgraph" alt=""/></div>
<map name="alapic_8h_a3aead5d19fd0505da0197dfc140d6824_icgraph" id="alapic_8h_a3aead5d19fd0505da0197dfc140d6824_icgraph">
<area shape="rect" title=" " alt="" coords="1251,223,1395,250"/>
<area shape="rect" href="x86_8c.html#a314ef23ae9439bea8ebd5983055cfad8" title=" " alt="" coords="1070,299,1177,326"/>
<area shape="rect" href="x86_8c.html#af2257f2e81aff845f58e2112c4f46ce7" title=" " alt="" coords="1044,97,1203,123"/>
<area shape="rect" href="x86_8c.html#ad00e08e30ec34c0fd7bd1da9acf21519" title=" " alt="" coords="833,173,996,199"/>
<area shape="rect" href="svm_8c.html#af2ee2a03530f5b7a02a127d8b779d2ae" title=" " alt="" coords="619,451,785,478"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="855,426,974,453"/>
<area shape="rect" href="x86_8c.html#ac807523477f9c6ca1c02dccb6e6eb327" title=" " alt="" coords="851,223,979,250"/>
<area shape="rect" href="vmx_8c.html#aa55ace9429e6e94042e6602716222805" title=" " alt="" coords="872,274,957,301"/>
<area shape="rect" href="x86_8c.html#aced999ac2c84f5838ddf0279cbf4c8e7" title=" " alt="" coords="415,325,567,351"/>
<area shape="rect" href="svm_8c.html#ac7f791888ec3548c8fa076367bbc84d9" title=" " alt="" coords="846,375,983,402"/>
<area shape="rect" href="x86_8c.html#aa8b2c6f3e5e8e56fe84a90d66f2d6982" title=" " alt="" coords="653,274,751,301"/>
<area shape="rect" href="x86_8c.html#a0c8605c4aae33c7235b26f4df7cc8f54" title=" " alt="" coords="649,122,755,149"/>
<area shape="rect" href="x86_8c.html#ac6ebab4c3448cdbc79dbcac73e94503b" title=" " alt="" coords="191,321,350,363"/>
<area shape="rect" href="x86_8c.html#aedf3017b9048be5cee8ed8cba72809f0" title=" " alt="" coords="446,274,537,301"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,186,129,213"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,223,364,250"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="412,71,571,98"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="644,375,760,402"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="833,71,996,98"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="627,5,777,47"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="846,122,983,149"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="653,173,751,199"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="649,71,755,98"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,140,350,181"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="448,173,535,199"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="451,223,532,250"/>
</map>
</div>

</div>
</div>
<a id="a8cd1df8b4c079c23a522d09c964da0ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cd1df8b4c079c23a522d09c964da0ee">&#9670;&nbsp;</a></span>kvm_lapic_get_reg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u32 kvm_lapic_get_reg </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reg_off</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00179">179</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;{</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178">__kvm_lapic_get_reg</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a>, reg_off);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div>
<div class="ttc" id="alapic_8h_html_aa28a43e0f54449e2ec4d25e1f8ecb178"><div class="ttname"><a href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178">__kvm_lapic_get_reg</a></div><div class="ttdeci">static u32 __kvm_lapic_get_reg(char *regs, int reg_off)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00174">lapic.h:174</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a8cd1df8b4c079c23a522d09c964da0ee_cgraph.png" border="0" usemap="#alapic_8h_a8cd1df8b4c079c23a522d09c964da0ee_cgraph" alt=""/></div>
<map name="alapic_8h_a8cd1df8b4c079c23a522d09c964da0ee_cgraph" id="alapic_8h_a8cd1df8b4c079c23a522d09c964da0ee_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,151,32"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="199,5,357,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a8cd1df8b4c079c23a522d09c964da0ee_icgraph.png" border="0" usemap="#alapic_8h_a8cd1df8b4c079c23a522d09c964da0ee_icgraph" alt=""/></div>
<map name="alapic_8h_a8cd1df8b4c079c23a522d09c964da0ee_icgraph" id="alapic_8h_a8cd1df8b4c079c23a522d09c964da0ee_icgraph">
<area shape="rect" title=" " alt="" coords="996,782,1141,808"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="280,72,379,99"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="767,934,910,960"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="253,326,405,352"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="265,452,394,479"/>
<area shape="rect" href="lapic_8c.html#a5bf640da1dfc1be09d89fb23c7f2e954" title=" " alt="" coords="778,98,899,124"/>
<area shape="rect" href="lapic_8c.html#a2800acddbbe439c5ae4fab24c1eaf9ff" title=" " alt="" coords="773,984,905,1011"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="773,427,904,454"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="499,579,657,606"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="232,630,427,656"/>
<area shape="rect" href="avic_8c.html#aaff9720871b696bc298d89cbb27a6dc2" title=" " alt="" coords="489,782,667,808"/>
<area shape="rect" href="avic_8c.html#a6a9ffca6bae1adce86d4495b5caaae2e" title=" " alt="" coords="490,832,666,859"/>
<area shape="rect" href="avic_8c.html#a7cf9fdcdf4f5f6559c099faaab0c2d29" title=" " alt="" coords="475,680,681,707"/>
<area shape="rect" href="avic_8c.html#a2650b353757b538de17a1c843f7308d2" title=" " alt="" coords="782,832,895,859"/>
<area shape="rect" href="lapic_8c.html#a1f4df169625f9c4c2cb06f7443698af4" title=" " alt="" coords="743,1035,934,1062"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="751,1086,926,1112"/>
<area shape="rect" href="lapic_8c.html#a870119cb74033f360164df90029af75a" title=" " alt="" coords="729,731,948,758"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="735,1136,942,1163"/>
<area shape="rect" href="lapic_8c.html#a3aead5d19fd0505da0197dfc140d6824" title=" " alt="" coords="767,174,911,200"/>
<area shape="rect" href="lapic_8c.html#a332060485ef249fcfd9edbf9cf80dd2b" title=" " alt="" coords="745,1187,933,1214"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="731,1238,947,1264"/>
<area shape="rect" href="lapic_8c.html#a4d28368a44947389f8a7afec1c3288d3" title=" " alt="" coords="749,1288,928,1315"/>
<area shape="rect" href="lapic_8c.html#a0efcb9037756de47e9d28f0a5ea1009f" title=" " alt="" coords="758,1339,919,1366"/>
<area shape="rect" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3" title=" " alt="" coords="760,478,917,504"/>
<area shape="rect" href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4" title=" " alt="" coords="745,528,932,555"/>
<area shape="rect" href="vmx_2nested_8c.html#ace6032a8bf541cd49984bb572529dd68" title=" " alt="" coords="745,1390,932,1416"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="18,47,171,74"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="18,98,171,124"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="513,427,643,454"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="241,899,417,926"/>
<area shape="rect" href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf" title=" " alt="" coords="489,934,667,960"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="19,256,170,297"/>
<area shape="rect" href="irq_8h.html#afcf66d0c1c15dcbd414e2dbf830d7b29" title=" " alt="" coords="488,984,668,1011"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="262,579,397,606"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="19,669,171,710"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="5,735,184,762"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="25,618,165,644"/>
<area shape="rect" href="avic_8c.html#ae9f162404fdb37bba372d0c9cdc043ee" title=" " alt="" coords="246,782,413,824"/>
<area shape="rect" href="avic_8c.html#ad9345a779111a59de8fa4110106c3adf" title=" " alt="" coords="242,680,417,707"/>
<area shape="rect" href="x86_8c.html#aebdfa8be7e8542163f8396cf93a82398" title=" " alt="" coords="235,1060,423,1087"/>
<area shape="rect" href="irq_8c.html#a0ba50d6865653a9d307102d8f0b36630" title=" " alt="" coords="500,1086,656,1112"/>
<area shape="rect" href="i8259_8c.html#a20f0eb17c76875b81e91fd32b0badc04" title=" " alt="" coords="519,1136,637,1163"/>
<area shape="rect" href="i8259_8c.html#a1f534b69587aeb30f8853f3eb4a35071" title=" " alt="" coords="533,1187,623,1214"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="485,1238,671,1280"/>
<area shape="rect" href="pmu_8c.html#a03a16f548326b68245a4bf0555bea777" title=" " alt="" coords="493,1304,663,1331"/>
<area shape="rect" href="x86_8c.html#a130b6ed14cf18384646cb31251dd104e" title=" " alt="" coords="485,1355,671,1382"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="494,731,662,758"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="490,1406,666,1432"/>
<area shape="rect" href="x86_8c.html#a314ef23ae9439bea8ebd5983055cfad8" title=" " alt="" coords="525,174,631,200"/>
<area shape="rect" href="x86_8c.html#af2257f2e81aff845f58e2112c4f46ce7" title=" " alt="" coords="250,199,409,226"/>
</map>
</div>

</div>
</div>
<a id="a054dd145c5435c8bfe1dea1adf2ed1e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a054dd145c5435c8bfe1dea1adf2ed1e1">&#9670;&nbsp;</a></span>kvm_lapic_hv_timer_in_use()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_lapic_hv_timer_in_use </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02083">2083</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;{</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(vcpu))</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160; </div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    <span class="keywordflow">return</span> vcpu-&gt;arch.apic-&gt;lapic_timer.hv_timer_in_use;</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a054dd145c5435c8bfe1dea1adf2ed1e1_cgraph.png" border="0" usemap="#alapic_8h_a054dd145c5435c8bfe1dea1adf2ed1e1_cgraph" alt=""/></div>
<map name="alapic_8h_a054dd145c5435c8bfe1dea1adf2ed1e1_cgraph" id="alapic_8h_a054dd145c5435c8bfe1dea1adf2ed1e1_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,160,47"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="208,13,327,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a054dd145c5435c8bfe1dea1adf2ed1e1_icgraph.png" border="0" usemap="#alapic_8h_a054dd145c5435c8bfe1dea1adf2ed1e1_icgraph" alt=""/></div>
<map name="alapic_8h_a054dd145c5435c8bfe1dea1adf2ed1e1_icgraph" id="alapic_8h_a054dd145c5435c8bfe1dea1adf2ed1e1_icgraph">
<area shape="rect" title=" " alt="" coords="1995,1085,2149,1126"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1788,1117,1947,1144"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1820,1067,1915,1093"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="1625,1117,1740,1144"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="1639,623,1727,649"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="1438,1117,1517,1144"/>
<area shape="rect" href="svm_8c.html#aa667b0a0f202f83aa1533825aeecb402" title=" " alt="" coords="1190,1092,1269,1119"/>
<area shape="rect" href="vmx_8c.html#aa8f62a8c3a5a5da29c69565d2645a371" title=" " alt="" coords="1190,1143,1269,1169"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="1391,309,1563,336"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="1398,623,1557,649"/>
<area shape="rect" href="x86_8c.html#a8103751d0c861cfc0c6d0fed892e2454" title=" " alt="" coords="1398,674,1557,715"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="1398,739,1557,781"/>
<area shape="rect" href="x86_8c.html#a3de7a07b3d9ed3ee68dbdfb0c53dc5d0" title=" " alt="" coords="1398,805,1557,846"/>
<area shape="rect" href="x86_8c.html#ac6ebab4c3448cdbc79dbcac73e94503b" title=" " alt="" coords="1398,870,1557,911"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="1384,1067,1571,1093"/>
<area shape="rect" href="x86_8c.html#a02f0a60bd0147952e87f6ad38128f748" title=" " alt="" coords="1398,935,1557,977"/>
<area shape="rect" href="x86_8c.html#ae3d9929c9a77fa2c710befa0a784d4c6" title=" " alt="" coords="1398,1001,1557,1042"/>
<area shape="rect" href="x86_8c.html#a93a45fe328a7ab7be2e5426ffc845c32" title=" " alt="" coords="1398,361,1557,402"/>
<area shape="rect" href="x86_8c.html#af51ba1557e985ebd63f465527cc511b3" title=" " alt="" coords="1398,426,1557,467"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="1398,491,1557,533"/>
<area shape="rect" href="x86_8c.html#aa4fc098aab8bc9588c83cfcb89eceee2" title=" " alt="" coords="1398,557,1557,598"/>
<area shape="rect" href="x86_8c.html#a7491f962c44e4926933a5bd58c521731" title=" " alt="" coords="1377,259,1577,285"/>
<area shape="rect" href="x86_8c.html#aa7dd06e7d0835e6cbf23134ad9fb19d8" title=" " alt="" coords="1387,157,1568,184"/>
<area shape="rect" href="vmx_2nested_8c.html#a2c53f6d5cd8133df2c8e67ab90b9aa5f" title=" " alt="" coords="1391,208,1564,235"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="1129,284,1329,311"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="1167,715,1291,741"/>
<area shape="rect" href="x86_8c.html#a6710e6b26ce720cb1d40113afe17efa7" title=" " alt="" coords="1135,157,1323,184"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="911,157,1081,184"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="553,69,680,96"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="728,183,863,209"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="303,5,497,32"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="559,183,674,209"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="325,107,475,133"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="317,157,483,184"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="323,208,477,235"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="295,259,505,285"/>
<area shape="rect" href="debugfs_8c.html#af0427db3ec1a8c38ea51591abbefde57" title=" " alt="" coords="314,310,486,351"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="333,376,467,403"/>
<area shape="rect" href="sev_8c.html#ad28fd793149997c912b52490f6ca139a" title=" " alt="" coords="329,427,471,453"/>
<area shape="rect" href="sev_8c.html#af1eb77eac84f085b0a943b87f783e30d" title=" " alt="" coords="335,56,465,83"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="47,107,205,133"/>
<area shape="rect" href="sev_8c.html#abe3c569b297da3b78824074b8c08f9a7" title=" " alt="" coords="5,427,247,453"/>
<area shape="rect" href="svm_8c.html#a0e69cefce46e7b11e1e8e056ea5b6561" title=" " alt="" coords="59,56,193,83"/>
<area shape="rect" href="vmx_8c.html#ac1cd58b9f223df9d6b5fe9695c0cbe2b" title=" " alt="" coords="1168,208,1291,235"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="1642,1067,1723,1093"/>
</map>
</div>

</div>
</div>
<a id="a90e371fd128f6bd87e2863ca2d3ed066"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90e371fd128f6bd87e2863ca2d3ed066">&#9670;&nbsp;</a></span>kvm_lapic_latched_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kvm_lapic_latched_init </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00248">248</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;{</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(vcpu) &amp;&amp; test_bit(<a class="code" href="lapic_8h.html#a3b7d7d35c001fcefc23520569c5d81d7">KVM_APIC_INIT</a>, &amp;vcpu-&gt;arch.apic-&gt;pending_events);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a90e371fd128f6bd87e2863ca2d3ed066_cgraph.png" border="0" usemap="#alapic_8h_a90e371fd128f6bd87e2863ca2d3ed066_cgraph" alt=""/></div>
<map name="alapic_8h_a90e371fd128f6bd87e2863ca2d3ed066_cgraph" id="alapic_8h_a90e371fd128f6bd87e2863ca2d3ed066_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,177,32"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="225,5,344,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a90e371fd128f6bd87e2863ca2d3ed066_icgraph.png" border="0" usemap="#alapic_8h_a90e371fd128f6bd87e2863ca2d3ed066_icgraph" alt=""/></div>
<map name="alapic_8h_a90e371fd128f6bd87e2863ca2d3ed066_icgraph" id="alapic_8h_a90e371fd128f6bd87e2863ca2d3ed066_icgraph">
<area shape="rect" title=" " alt="" coords="753,31,925,57"/>
<area shape="rect" href="x86_8c.html#a01b930125151430b8ee3e2fe910ca69f" title=" " alt="" coords="551,23,705,65"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="191,5,350,32"/>
<area shape="rect" href="x86_8c.html#aedf3017b9048be5cee8ed8cba72809f0" title=" " alt="" coords="412,56,503,83"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,31,129,57"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,56,364,83"/>
</map>
</div>

</div>
</div>
<a id="a4b4d880305f2ddba0ac9fdb398a7611a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b4d880305f2ddba0ac9fdb398a7611a">&#9670;&nbsp;</a></span>kvm_lapic_readable_reg_mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 kvm_lapic_readable_reg_mask </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01607">1607</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;{</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <span class="comment">/* Leave bits &#39;0&#39; for reserved and write-only registers. */</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    u64 valid_reg_mask =</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_ID) |</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_LVR) |</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_TASKPRI) |</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_PROCPRI) |</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_LDR) |</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_SPIV) |</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        <a class="code" href="lapic_8c.html#ae7aa698ace6e78ae7890c10e7f8a3388">APIC_REGS_MASK</a>(APIC_ISR, APIC_ISR_NR) |</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;        <a class="code" href="lapic_8c.html#ae7aa698ace6e78ae7890c10e7f8a3388">APIC_REGS_MASK</a>(APIC_TMR, APIC_ISR_NR) |</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        <a class="code" href="lapic_8c.html#ae7aa698ace6e78ae7890c10e7f8a3388">APIC_REGS_MASK</a>(APIC_IRR, APIC_ISR_NR) |</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_ESR) |</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_ICR) |</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_LVTT) |</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_LVTTHMR) |</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_LVTPC) |</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_LVT0) |</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_LVT1) |</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_LVTERR) |</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_TMICT) |</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_TMCCT) |</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_TDCR);</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160; </div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f">kvm_lapic_lvt_supported</a>(apic, <a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda6501a8a1c49c80b439b25520514bbfce">LVT_CMCI</a>))</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        valid_reg_mask |= <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_LVTCMCI);</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160; </div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="comment">/* ARBPRI, DFR, and ICR2 are not valid in x2APIC mode. */</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic))</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        valid_reg_mask |= <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_ARBPRI) |</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;                  <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_DFR) |</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;                  <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_ICR2);</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160; </div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="keywordflow">return</span> valid_reg_mask;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a33962d1576b2caa1a5d1baa88b2a01cf"><div class="ttname"><a href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a></div><div class="ttdeci">#define APIC_REG_MASK(reg)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01603">lapic.c:1603</a></div></div>
<div class="ttc" id="alapic_8c_html_a36de6235abe5d5bd2fd57bf5739c1b5f"><div class="ttname"><a href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f">kvm_lapic_lvt_supported</a></div><div class="ttdeci">static bool kvm_lapic_lvt_supported(struct kvm_lapic *apic, int lvt_index)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00563">lapic.c:563</a></div></div>
<div class="ttc" id="alapic_8c_html_ae7aa698ace6e78ae7890c10e7f8a3388"><div class="ttname"><a href="lapic_8c.html#ae7aa698ace6e78ae7890c10e7f8a3388">APIC_REGS_MASK</a></div><div class="ttdeci">#define APIC_REGS_MASK(first, count)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01604">lapic.c:1604</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a4b4d880305f2ddba0ac9fdb398a7611a_cgraph.png" border="0" usemap="#alapic_8h_a4b4d880305f2ddba0ac9fdb398a7611a_cgraph" alt=""/></div>
<map name="alapic_8h_a4b4d880305f2ddba0ac9fdb398a7611a_cgraph" id="alapic_8h_a4b4d880305f2ddba0ac9fdb398a7611a_cgraph">
<area shape="rect" title=" " alt="" coords="5,23,159,65"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="228,5,371,32"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="207,56,392,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a4b4d880305f2ddba0ac9fdb398a7611a_icgraph.png" border="0" usemap="#alapic_8h_a4b4d880305f2ddba0ac9fdb398a7611a_icgraph" alt=""/></div>
<map name="alapic_8h_a4b4d880305f2ddba0ac9fdb398a7611a_icgraph" id="alapic_8h_a4b4d880305f2ddba0ac9fdb398a7611a_icgraph">
<area shape="rect" title=" " alt="" coords="1624,169,1777,210"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="1405,56,1559,83"/>
<area shape="rect" href="vmx_8c.html#a60eaab2d29aa87878b8dd9b43dadb779" title=" " alt="" coords="1388,198,1576,239"/>
<area shape="rect" href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1" title=" " alt="" coords="1169,5,1300,32"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="1156,56,1313,83"/>
<area shape="rect" href="lapic_8c.html#ae9bd2989ca4c31caf8aa56b8c7dfd248" title=" " alt="" coords="897,5,1081,32"/>
<area shape="rect" href="lapic_8c.html#a179cfc2268db31f40b5bd9b1c247a37b" title=" " alt="" coords="905,56,1074,83"/>
<area shape="rect" href="hyperv_8c.html#acd3e0dad98bde91068115067f6ec3ae6" title=" " alt="" coords="674,5,809,32"/>
<area shape="rect" href="hyperv_8c.html#a23d197f9ae27f820fa7e977aec518698" title=" " alt="" coords="387,5,585,32"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="164,31,339,57"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="5,5,116,32"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="5,56,116,83"/>
<area shape="rect" href="vmx_8c.html#a19fa2c2eb871655a497c1c0c73bd0553" title=" " alt="" coords="1129,205,1340,232"/>
<area shape="rect" href="vmx_8c.html#a3f6e91eedb4d7eefd8f4007389aaac7b" title=" " alt="" coords="1132,301,1337,328"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="912,325,1067,352"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="412,136,560,163"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="680,224,803,251"/>
<area shape="rect" href="vmx_2nested_8c.html#a4e307e2bcf664c83265b1442e3fc8da2" title=" " alt="" coords="653,275,829,317"/>
<area shape="rect" href="vmx_2nested_8c.html#ad3cab9cf8633364513bd6a24caecf41a" title=" " alt="" coords="633,341,849,382"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="387,377,585,404"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fcc88ceee4f57a3dbf23fedb46a5cb" title=" " alt="" coords="666,158,817,199"/>
<area shape="rect" href="vmx_2nested_8c.html#aedc5821e9af5c7bd4aac6c06f4ca046f" title=" " alt="" coords="651,457,831,484"/>
<area shape="rect" href="vmx_2hyperv_8c.html#a937e30dece4579b71b17efcd54c1d910" title=" " alt="" coords="649,509,833,550"/>
<area shape="rect" href="vmx_2nested_8c.html#a64e6550fab681b40c832fe4e2d5e3b95" title=" " alt="" coords="669,575,814,601"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="184,136,319,163"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="401,214,571,255"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="188,221,315,248"/>
<area shape="rect" href="vmx_2nested_8c.html#a6a1c45a52fde9844f4431a9db00dbf9f" title=" " alt="" coords="405,279,567,321"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="186,287,317,313"/>
<area shape="rect" href="vmx_2nested_8c.html#a2c53f6d5cd8133df2c8e67ab90b9aa5f" title=" " alt="" coords="399,524,573,551"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="431,575,541,601"/>
<area shape="rect" href="vmx_2nested_8c.html#acee8cb651216e97a9c12b807243ae59a" title=" " alt="" coords="401,625,571,652"/>
<area shape="rect" href="vmx_8c.html#ac1cd58b9f223df9d6b5fe9695c0cbe2b" title=" " alt="" coords="190,524,313,551"/>
</map>
</div>

</div>
</div>
<a id="a8b8a5d87df5283a20e9aa9b828320552"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b8a5d87df5283a20e9aa9b828320552">&#9670;&nbsp;</a></span>kvm_lapic_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_reset </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>init_event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02669">2669</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;{</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    u64 msr_val;</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160; </div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    static_call_cond(kvm_x86_apicv_pre_state_restore)(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160; </div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    <span class="keywordflow">if</span> (!init_event) {</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;        msr_val = APIC_DEFAULT_PHYS_BASE | MSR_IA32_APICBASE_ENABLE;</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="x86_8c.html#aa47b2c4f1b9b1a9c9cbee8f8476262a2">kvm_vcpu_is_reset_bsp</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>))</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;            msr_val |= MSR_IA32_APICBASE_BSP;</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;        <a class="code" href="lapic_8c.html#a8d747385873e52f47e85179c21521e73">kvm_lapic_set_base</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, msr_val);</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    }</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160; </div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;    <span class="keywordflow">if</span> (!apic)</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160; </div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    <span class="comment">/* Stop the timer in case it&#39;s a reset to an active apic */</span></div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;    hrtimer_cancel(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">timer</a>);</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160; </div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;    <span class="comment">/* The xAPIC ID is set at RESET even if the APIC was already enabled. */</span></div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;    <span class="keywordflow">if</span> (!init_event)</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;        <a class="code" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e">kvm_apic_set_xapic_id</a>(apic, <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_id);</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    <a class="code" href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf">kvm_apic_set_version</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160; </div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; apic-&gt;<a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a>; i++)</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, <a class="code" href="lapic_8h.html#ae54f52b3c96453d38d44e36bc8d3c00c">APIC_LVTx</a>(i), APIC_LVT_MASKED);</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;    <a class="code" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d">apic_update_lvtt</a>(apic);</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="x86_8c.html#aa47b2c4f1b9b1a9c9cbee8f8476262a2">kvm_vcpu_is_reset_bsp</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>) &amp;&amp;</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;        <a class="code" href="x86_8h.html#adf8330176a8805826ed4711a51ce93cf">kvm_check_has_quirk</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm, KVM_X86_QUIRK_LINT0_REENABLED))</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_LVT0,</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;                 SET_APIC_DELIVERY_MODE(0, APIC_MODE_EXTINT));</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;    <a class="code" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1">apic_manage_nmi_watchdog</a>(apic, <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_LVT0));</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160; </div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;    <a class="code" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4">kvm_apic_set_dfr</a>(apic, 0xffffffffU);</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;    <a class="code" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe">apic_set_spiv</a>(apic, 0xff);</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_TASKPRI, 0);</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic))</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;        <a class="code" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554">kvm_apic_set_ldr</a>(apic, 0);</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_ESR, 0);</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic)) {</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_ICR, 0);</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_ICR2, 0);</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;        <a class="code" href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2">kvm_lapic_set_reg64</a>(apic, APIC_ICR, 0);</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;    }</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_TDCR, 0);</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_TMICT, 0);</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 8; i++) {</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_IRR + 0x10 * i, 0);</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_ISR + 0x10 * i, 0);</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_TMR + 0x10 * i, 0);</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    }</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    <a class="code" href="lapic_8c.html#a5468339c2df08ca538b77d4d48915c35">kvm_apic_update_apicv</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    <a class="code" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3">update_divide_count</a>(apic);</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    atomic_set(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a581e6b6fe55055ed8a81d5a1aa258ff7">pending</a>, 0);</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160; </div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.pv_eoi.msr_val = 0;</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;    <a class="code" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab">apic_update_ppr</a>(apic);</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;    <span class="keywordflow">if</span> (apic-&gt;<a class="code" href="structkvm__lapic.html#a4642d7f446bbd9ede893aa1ebbcc9c1a">apicv_active</a>) {</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;        static_call_cond(kvm_x86_apicv_post_state_restore)(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;        static_call_cond(kvm_x86_hwapic_irr_update)(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, -1);</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;        static_call_cond(kvm_x86_hwapic_isr_update)(-1);</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    }</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160; </div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;    <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_arb_prio = 0;</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;    <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_attention = 0;</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160; </div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;    <a class="code" href="lapic_8c.html#a756b707dd502680db2eed7759defde40">kvm_recalculate_apic_map</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm);</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a2a5ccc92c8b75ad6118bdc1b84a43554"><div class="ttname"><a href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554">kvm_apic_set_ldr</a></div><div class="ttdeci">static void kvm_apic_set_ldr(struct kvm_lapic *apic, u32 id)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00515">lapic.c:515</a></div></div>
<div class="ttc" id="alapic_8c_html_a54214770509be207a1c1271e8b48acf4"><div class="ttname"><a href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4">kvm_apic_set_dfr</a></div><div class="ttdeci">static void kvm_apic_set_dfr(struct kvm_lapic *apic, u32 val)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00521">lapic.c:521</a></div></div>
<div class="ttc" id="alapic_8c_html_a8c69ed3d074907a7adcee84e8570ebb2"><div class="ttname"><a href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2">kvm_lapic_set_reg64</a></div><div class="ttdeci">static __always_inline void kvm_lapic_set_reg64(struct kvm_lapic *apic, int reg, u64 val)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00099">lapic.c:99</a></div></div>
<div class="ttc" id="alapic_8c_html_ab24997de83c3fd44d1cd7520a615883e"><div class="ttname"><a href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e">kvm_apic_set_xapic_id</a></div><div class="ttdeci">static void kvm_apic_set_xapic_id(struct kvm_lapic *apic, u8 id)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00509">lapic.c:509</a></div></div>
<div class="ttc" id="astructkvm__timer_html_a581e6b6fe55055ed8a81d5a1aa258ff7"><div class="ttname"><a href="structkvm__timer.html#a581e6b6fe55055ed8a81d5a1aa258ff7">kvm_timer::pending</a></div><div class="ttdeci">atomic_t pending</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00055">lapic.h:55</a></div></div>
<div class="ttc" id="ax86_8c_html_aa47b2c4f1b9b1a9c9cbee8f8476262a2"><div class="ttname"><a href="x86_8c.html#aa47b2c4f1b9b1a9c9cbee8f8476262a2">kvm_vcpu_is_reset_bsp</a></div><div class="ttdeci">bool kvm_vcpu_is_reset_bsp(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l12488">x86.c:12488</a></div></div>
<div class="ttc" id="ax86_8h_html_adf8330176a8805826ed4711a51ce93cf"><div class="ttname"><a href="x86_8h.html#adf8330176a8805826ed4711a51ce93cf">kvm_check_has_quirk</a></div><div class="ttdeci">static bool kvm_check_has_quirk(struct kvm *kvm, u64 quirk)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8h_source.html#l00288">x86.h:288</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a8b8a5d87df5283a20e9aa9b828320552_cgraph.png" border="0" usemap="#alapic_8h_a8b8a5d87df5283a20e9aa9b828320552_cgraph" alt=""/></div>
<map name="alapic_8h_a8b8a5d87df5283a20e9aa9b828320552_cgraph" id="alapic_8h_a8b8a5d87df5283a20e9aa9b828320552_cgraph">
<area shape="rect" title=" " alt="" coords="5,565,135,592"/>
<area shape="rect" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1" title=" " alt="" coords="183,17,393,44"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="233,388,343,415"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="729,489,873,516"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="484,68,615,95"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="729,173,874,200"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="223,287,353,313"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="730,1164,873,1191"/>
<area shape="rect" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4" title=" " alt="" coords="219,489,357,516"/>
<area shape="rect" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554" title=" " alt="" coords="220,540,356,567"/>
<area shape="rect" href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf" title=" " alt="" coords="466,692,633,719"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="463,641,636,668"/>
<area shape="rect" href="lapic_8c.html#a5468339c2df08ca538b77d4d48915c35" title=" " alt="" coords="199,591,377,617"/>
<area shape="rect" href="x86_8h.html#adf8330176a8805826ed4711a51ce93cf" title=" " alt="" coords="205,743,371,769"/>
<area shape="rect" href="lapic_8c.html#a8d747385873e52f47e85179c21521e73" title=" " alt="" coords="211,793,365,820"/>
<area shape="rect" href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2" title=" " alt="" coords="208,844,368,871"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="188,996,388,1023"/>
<area shape="rect" href="x86_8c.html#aa47b2c4f1b9b1a9c9cbee8f8476262a2" title=" " alt="" coords="199,1047,377,1073"/>
<area shape="rect" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3" title=" " alt="" coords="209,203,367,229"/>
<area shape="rect" href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c" title=" " alt="" coords="475,17,624,44"/>
<area shape="rect" href="xen_8h.html#ae436f94d060f3cb8029695c5a9fddc42" title=" " alt="" coords="452,337,647,364"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="959,489,1117,516"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="721,123,881,149"/>
<area shape="rect" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2" title=" " alt="" coords="731,5,871,32"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="725,57,878,98"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="973,5,1103,32"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="959,173,1117,200"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="975,64,1101,91"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="478,287,621,313"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="478,221,621,262"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="722,287,881,313"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="723,228,879,255"/>
<area shape="rect" href="cpuid_8h.html#ad8c2a90f2f099af1d7ca23750d9d2eb9" title=" " alt="" coords="736,717,867,744"/>
<area shape="rect" href="ioapic_8h.html#a5efb8a822bd7119cfc8db075f12bf452" title=" " alt="" coords="738,667,865,693"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="742,844,861,871"/>
<area shape="rect" href="reverse__cpuid_8h.html#aeac4cdaa1c8b53f46ea791f355b1d08c" title=" " alt="" coords="985,717,1091,744"/>
<area shape="rect" href="cpuid_8h.html#af2af2645f203b5d9bad2088af0da5c1e" title=" " alt="" coords="945,768,1131,795"/>
<area shape="rect" href="irq_8h.html#aeedc8b3b9e709414b2db2436224b75e8" title=" " alt="" coords="981,667,1095,693"/>
<area shape="rect" href="lapic_8c.html#a40e5c52e8a79166cfc433f413bbe9e36" title=" " alt="" coords="493,591,606,617"/>
<area shape="rect" href="lapic_8c.html#a22d25ec6370d0efd4c569b7317d28098" title=" " alt="" coords="459,793,640,820"/>
<area shape="rect" href="cpuid_8c.html#a537512099e11c7ab0553aeae5e38d9ea" title=" " alt="" coords="448,743,651,769"/>
<area shape="rect" href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f" title=" " alt="" coords="705,996,897,1023"/>
<area shape="rect" href="lapic_8c.html#a39839decdbbb9e8a6718f3ac7c0b3707" title=" " alt="" coords="462,844,637,871"/>
<area shape="rect" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39" title=" " alt="" coords="483,1215,615,1241"/>
<area shape="rect" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44" title=" " alt="" coords="472,895,627,921"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="479,945,620,972"/>
<area shape="rect" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d" title=" " alt="" coords="461,1047,638,1089"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="441,996,657,1023"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="741,1113,861,1140"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="447,1164,651,1191"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a8b8a5d87df5283a20e9aa9b828320552_icgraph.png" border="0" usemap="#alapic_8h_a8b8a5d87df5283a20e9aa9b828320552_icgraph" alt=""/></div>
<map name="alapic_8h_a8b8a5d87df5283a20e9aa9b828320552_icgraph" id="alapic_8h_a8b8a5d87df5283a20e9aa9b828320552_icgraph">
<area shape="rect" title=" " alt="" coords="1279,198,1408,225"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1101,198,1231,225"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="867,122,1053,149"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="874,198,1046,225"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="875,249,1045,275"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="412,5,571,47"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,71,364,98"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="671,122,766,149"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="650,173,787,199"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,46,129,73"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="451,122,532,149"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="619,223,819,250"/>
</map>
</div>

</div>
</div>
<a id="ab785e74943a17874760f3d4b6b5359d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab785e74943a17874760f3d4b6b5359d0">&#9670;&nbsp;</a></span>kvm_lapic_restart_hv_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_restart_hv_timer </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02208">2208</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;{</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160; </div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    WARN_ON(!apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a033831ad90c69d7ea4e9af3fd0a6727e">hv_timer_in_use</a>);</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    <a class="code" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db">restart_apic_timer</a>(apic);</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_ab785e74943a17874760f3d4b6b5359d0_cgraph.png" border="0" usemap="#alapic_8h_ab785e74943a17874760f3d4b6b5359d0_cgraph" alt=""/></div>
<map name="alapic_8h_ab785e74943a17874760f3d4b6b5359d0_cgraph" id="alapic_8h_ab785e74943a17874760f3d4b6b5359d0_cgraph">
<area shape="rect" title=" " alt="" coords="5,567,168,609"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="216,575,357,601"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="588,600,715,627"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="406,625,523,652"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="405,499,524,525"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="779,499,925,525"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="587,549,716,576"/>
<area shape="rect" href="lapic_8c.html#a2400290b895608d302ecce4ee352ee25" title=" " alt="" coords="979,755,1155,781"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="973,587,1160,613"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="1215,317,1375,344"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="973,251,1160,293"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1684,411,1807,437"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="980,536,1153,563"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="979,638,1154,679"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="1220,587,1371,613"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="1224,521,1367,562"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="1229,637,1361,664"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="1460,519,1580,545"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="1461,620,1579,647"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="1697,620,1793,647"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="1227,200,1364,227"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="1208,255,1383,281"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1451,251,1589,277"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1900,81,2071,108"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="1443,302,1597,343"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1447,368,1593,395"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1448,5,1592,32"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1691,157,1799,184"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1681,208,1810,235"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1682,259,1809,285"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1683,309,1808,336"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1657,360,1833,387"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1663,107,1827,133"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1901,157,2070,184"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1881,385,2089,412"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1909,436,2062,463"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1668,462,1823,503"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1666,528,1825,555"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1666,5,1825,32"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="1216,706,1375,747"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="1451,721,1589,748"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="1439,772,1601,799"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="1431,671,1609,697"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1686,671,1805,697"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="589,448,714,475"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="572,499,731,525"/>
<area shape="rect" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede" title=" " alt="" coords="975,470,1158,511"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_ab785e74943a17874760f3d4b6b5359d0_icgraph.png" border="0" usemap="#alapic_8h_ab785e74943a17874760f3d4b6b5359d0_icgraph" alt=""/></div>
<map name="alapic_8h_ab785e74943a17874760f3d4b6b5359d0_icgraph" id="alapic_8h_ab785e74943a17874760f3d4b6b5359d0_icgraph">
<area shape="rect" title=" " alt="" coords="1995,475,2157,517"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1788,483,1947,509"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="1625,251,1740,277"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="1639,508,1727,535"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="1438,43,1517,69"/>
<area shape="rect" href="svm_8c.html#aa667b0a0f202f83aa1533825aeecb402" title=" " alt="" coords="1190,5,1269,32"/>
<area shape="rect" href="vmx_8c.html#aa8f62a8c3a5a5da29c69565d2645a371" title=" " alt="" coords="1190,56,1269,83"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="1391,93,1563,120"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="1398,195,1557,221"/>
<area shape="rect" href="x86_8c.html#a8103751d0c861cfc0c6d0fed892e2454" title=" " alt="" coords="1398,246,1557,287"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="1398,311,1557,353"/>
<area shape="rect" href="x86_8c.html#a3de7a07b3d9ed3ee68dbdfb0c53dc5d0" title=" " alt="" coords="1398,377,1557,418"/>
<area shape="rect" href="x86_8c.html#ac6ebab4c3448cdbc79dbcac73e94503b" title=" " alt="" coords="1398,442,1557,483"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="1384,508,1571,535"/>
<area shape="rect" href="x86_8c.html#a02f0a60bd0147952e87f6ad38128f748" title=" " alt="" coords="1398,559,1557,601"/>
<area shape="rect" href="x86_8c.html#ae3d9929c9a77fa2c710befa0a784d4c6" title=" " alt="" coords="1398,625,1557,666"/>
<area shape="rect" href="x86_8c.html#a93a45fe328a7ab7be2e5426ffc845c32" title=" " alt="" coords="1398,690,1557,731"/>
<area shape="rect" href="x86_8c.html#af51ba1557e985ebd63f465527cc511b3" title=" " alt="" coords="1398,755,1557,797"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="1398,821,1557,862"/>
<area shape="rect" href="x86_8c.html#aa4fc098aab8bc9588c83cfcb89eceee2" title=" " alt="" coords="1398,886,1557,927"/>
<area shape="rect" href="x86_8c.html#a7491f962c44e4926933a5bd58c521731" title=" " alt="" coords="1377,144,1577,171"/>
<area shape="rect" href="x86_8c.html#aa7dd06e7d0835e6cbf23134ad9fb19d8" title=" " alt="" coords="1387,952,1568,979"/>
<area shape="rect" href="vmx_2nested_8c.html#a2c53f6d5cd8133df2c8e67ab90b9aa5f" title=" " alt="" coords="1391,1003,1564,1029"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="1129,132,1329,159"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="1167,537,1291,564"/>
<area shape="rect" href="x86_8c.html#a6710e6b26ce720cb1d40113afe17efa7" title=" " alt="" coords="1135,952,1323,979"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="911,952,1081,979"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="553,864,680,891"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="728,977,863,1004"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="303,800,497,827"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="559,977,674,1004"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="325,851,475,877"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="317,901,483,928"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="323,952,477,979"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="295,1003,505,1029"/>
<area shape="rect" href="debugfs_8c.html#af0427db3ec1a8c38ea51591abbefde57" title=" " alt="" coords="314,1054,486,1095"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="333,1120,467,1147"/>
<area shape="rect" href="sev_8c.html#ad28fd793149997c912b52490f6ca139a" title=" " alt="" coords="329,1171,471,1197"/>
<area shape="rect" href="sev_8c.html#af1eb77eac84f085b0a943b87f783e30d" title=" " alt="" coords="335,1221,465,1248"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="47,851,205,877"/>
<area shape="rect" href="sev_8c.html#abe3c569b297da3b78824074b8c08f9a7" title=" " alt="" coords="5,1171,247,1197"/>
<area shape="rect" href="svm_8c.html#a0e69cefce46e7b11e1e8e056ea5b6561" title=" " alt="" coords="59,1221,193,1248"/>
<area shape="rect" href="vmx_8c.html#ac1cd58b9f223df9d6b5fe9695c0cbe2b" title=" " alt="" coords="1168,1003,1291,1029"/>
</map>
</div>

</div>
</div>
<a id="a8d747385873e52f47e85179c21521e73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d747385873e52f47e85179c21521e73">&#9670;&nbsp;</a></span>kvm_lapic_set_base()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_set_base </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02530">2530</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;{</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    u64 old_value = vcpu-&gt;arch.apic_base;</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160; </div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_base = value;</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160; </div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    <span class="keywordflow">if</span> ((old_value ^ value) &amp; MSR_IA32_APICBASE_ENABLE)</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;        <a class="code" href="cpuid_8c.html#a537512099e11c7ab0553aeae5e38d9ea">kvm_update_cpuid_runtime</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160; </div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    <span class="keywordflow">if</span> (!apic)</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160; </div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    <span class="comment">/* update jump label if enable bit changes */</span></div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    <span class="keywordflow">if</span> ((old_value ^ value) &amp; MSR_IA32_APICBASE_ENABLE) {</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;        <span class="keywordflow">if</span> (value &amp; MSR_IA32_APICBASE_ENABLE) {</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;            <a class="code" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e">kvm_apic_set_xapic_id</a>(apic, <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_id);</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;            static_branch_slow_dec_deferred(&amp;<a class="code" href="lapic_8h.html#a65788ee3d09ea041368cd93b3391f3c4">apic_hw_disabled</a>);</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;            <span class="comment">/* Check if there are APF page ready requests pending */</span></div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;            kvm_make_request(KVM_REQ_APF_READY, <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;            static_branch_inc(&amp;<a class="code" href="lapic_8h.html#a65788ee3d09ea041368cd93b3391f3c4">apic_hw_disabled</a>.key);</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;            atomic_set_release(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm-&gt;arch.apic_map_dirty, <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a6a4e132eb192a22c351397837d4c082c">DIRTY</a>);</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;        }</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    }</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160; </div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    <span class="keywordflow">if</span> ((old_value ^ value) &amp; X2APIC_ENABLE) {</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;        <span class="keywordflow">if</span> (value &amp; X2APIC_ENABLE)</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;            <a class="code" href="lapic_8c.html#a22d25ec6370d0efd4c569b7317d28098">kvm_apic_set_x2apic_id</a>(apic, <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_id);</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value &amp; MSR_IA32_APICBASE_ENABLE)</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;            <a class="code" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e">kvm_apic_set_xapic_id</a>(apic, <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_id);</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    }</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160; </div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    <span class="keywordflow">if</span> ((old_value ^ value) &amp; (MSR_IA32_APICBASE_ENABLE | X2APIC_ENABLE)) {</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;        kvm_make_request(KVM_REQ_APICV_UPDATE, <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;        static_call_cond(kvm_x86_set_virtual_apic_mode)(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;    }</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160; </div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a830e2e9bd5c55c17f48b72a0157a6fa2">base_address</a> = apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_base &amp;</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;                 MSR_IA32_APICBASE_BASE;</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160; </div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    <span class="keywordflow">if</span> ((value &amp; MSR_IA32_APICBASE_ENABLE) &amp;&amp;</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;         apic-&gt;<a class="code" href="structkvm__lapic.html#a830e2e9bd5c55c17f48b72a0157a6fa2">base_address</a> != APIC_DEFAULT_PHYS_BASE) {</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;        kvm_set_apicv_inhibit(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm,</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;                      APICV_INHIBIT_REASON_APIC_BASE_MODIFIED);</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;    }</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;}</div>
<div class="ttc" id="acpuid_8c_html_a537512099e11c7ab0553aeae5e38d9ea"><div class="ttname"><a href="cpuid_8c.html#a537512099e11c7ab0553aeae5e38d9ea">kvm_update_cpuid_runtime</a></div><div class="ttdeci">void kvm_update_cpuid_runtime(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="cpuid_8c_source.html#l00309">cpuid.c:309</a></div></div>
<div class="ttc" id="alapic_8c_html_a22d25ec6370d0efd4c569b7317d28098"><div class="ttname"><a href="lapic_8c.html#a22d25ec6370d0efd4c569b7317d28098">kvm_apic_set_x2apic_id</a></div><div class="ttdeci">static void kvm_apic_set_x2apic_id(struct kvm_lapic *apic, u32 id)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00527">lapic.c:527</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_a830e2e9bd5c55c17f48b72a0157a6fa2"><div class="ttname"><a href="structkvm__lapic.html#a830e2e9bd5c55c17f48b72a0157a6fa2">kvm_lapic::base_address</a></div><div class="ttdeci">unsigned long base_address</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00060">lapic.h:60</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a8d747385873e52f47e85179c21521e73_cgraph.png" border="0" usemap="#alapic_8h_a8d747385873e52f47e85179c21521e73_cgraph" alt=""/></div>
<map name="alapic_8h_a8d747385873e52f47e85179c21521e73_cgraph" id="alapic_8h_a8d747385873e52f47e85179c21521e73_cgraph">
<area shape="rect" title=" " alt="" coords="5,160,160,187"/>
<area shape="rect" href="lapic_8c.html#a22d25ec6370d0efd4c569b7317d28098" title=" " alt="" coords="219,109,400,136"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="223,160,396,187"/>
<area shape="rect" href="cpuid_8c.html#a537512099e11c7ab0553aeae5e38d9ea" title=" " alt="" coords="208,212,411,239"/>
<area shape="rect" href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f" title=" " alt="" coords="459,83,651,109"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="483,133,627,160"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="707,5,865,32"/>
<area shape="rect" href="cpuid_8c.html#aba2a2f99dbe3b8848b6ffc19effa6294" title=" " alt="" coords="475,209,634,250"/>
<area shape="rect" href="cpuid_8c.html#a57e37154fafc08d4400cac72d0a0b91d" title=" " alt="" coords="699,209,873,250"/>
<area shape="rect" href="cpuid_8c.html#a7220f0f9a6d0047aef7619e272fa9518" title=" " alt="" coords="929,245,1066,272"/>
<area shape="rect" href="reverse__cpuid_8h.html#a9ca8b41f0d18f3dac63b62e545077db4" title=" " alt="" coords="921,376,1073,403"/>
<area shape="rect" href="reverse__cpuid_8h.html#a748960fccca789bf432536205fdf9826" title=" " alt="" coords="722,325,850,352"/>
<area shape="rect" href="x86_8h.html#adf8330176a8805826ed4711a51ce93cf" title=" " alt="" coords="703,427,869,453"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="717,56,855,83"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a2b779657b20f7afa44c0172b1478ac65" title=" " alt="" coords="713,107,859,133"/>
<area shape="rect" href="cpuid_8c.html#aad06d21707fd0abb109028612ea7514c" title=" " alt="" coords="707,157,865,184"/>
<area shape="rect" href="reverse__cpuid_8h.html#aeac4cdaa1c8b53f46ea791f355b1d08c" title=" " alt="" coords="1393,376,1500,403"/>
<area shape="rect" href="reverse__cpuid_8h.html#a08df87ae84991c96655f367379fad9b1" title=" " alt="" coords="1141,300,1295,327"/>
<area shape="rect" href="reverse__cpuid_8h.html#a76ac51b62ef170b755204cb8b958e585" title=" " alt="" coords="1785,325,1933,352"/>
<area shape="rect" href="reverse__cpuid_8h.html#ae10c1644e90cb8443e5a32554acfd700" title=" " alt="" coords="1579,325,1737,352"/>
<area shape="rect" href="reverse__cpuid_8h.html#adf3299d46978c685ba9b46ebb1536680" title=" " alt="" coords="1363,325,1531,352"/>
<area shape="rect" href="reverse__cpuid_8h.html#a3f7e53c68e5610be44d760fd4854f892" title=" " alt="" coords="1375,275,1518,301"/>
<area shape="rect" href="reverse__cpuid_8h.html#a8f6dc89865c6af98e621e1ddcf401cae" title=" " alt="" coords="1601,275,1715,301"/>
<area shape="rect" href="reverse__cpuid_8h.html#a5c0c9322094b13d5fff76b5ab593339a" title=" " alt="" coords="934,325,1061,352"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a24ffc81fe5ed7998e29134351275b4dd" title=" " alt="" coords="925,107,1070,133"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="1121,107,1315,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a8d747385873e52f47e85179c21521e73_icgraph.png" border="0" usemap="#alapic_8h_a8d747385873e52f47e85179c21521e73_icgraph" alt=""/></div>
<map name="alapic_8h_a8d747385873e52f47e85179c21521e73_icgraph" id="alapic_8h_a8d747385873e52f47e85179c21521e73_icgraph">
<area shape="rect" title=" " alt="" coords="1500,143,1655,170"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1300,89,1452,115"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1311,194,1441,221"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="1101,143,1252,170"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1101,5,1252,47"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="412,45,571,71"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,297,129,323"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1112,273,1241,299"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="867,399,1053,426"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="874,298,1046,325"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="875,247,1045,274"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,424,350,465"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,326,364,353"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="671,399,766,426"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="650,349,787,375"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="451,349,532,375"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="619,298,819,325"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="879,95,1041,122"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="873,179,1047,206"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="669,95,768,122"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="665,45,772,71"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,167,350,208"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="448,259,535,286"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="678,247,759,274"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="664,146,773,173"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="663,197,774,223"/>
</map>
</div>

</div>
</div>
<a id="ab6d8f3638f580c8d6dcd091512c49768"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6d8f3638f580c8d6dcd091512c49768">&#9670;&nbsp;</a></span>kvm_lapic_set_eoi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_set_eoi </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02439">2439</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;{</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;    <a class="code" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491">kvm_lapic_reg_write</a>(vcpu-&gt;arch.apic, APIC_EOI, 0);</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_ab6d8f3638f580c8d6dcd091512c49768_cgraph.png" border="0" usemap="#alapic_8h_ab6d8f3638f580c8d6dcd091512c49768_cgraph" alt=""/></div>
<map name="alapic_8h_ab6d8f3638f580c8d6dcd091512c49768_cgraph" id="alapic_8h_ab6d8f3638f580c8d6dcd091512c49768_cgraph">
<area shape="rect" title=" " alt="" coords="5,740,148,767"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="196,740,353,767"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="1348,572,1508,599"/>
<area shape="rect" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1" title=" " alt="" coords="401,81,612,108"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="455,208,558,235"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="451,335,562,361"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="696,436,840,463"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="456,284,557,311"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="441,639,572,665"/>
<area shape="rect" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2" title=" " alt="" coords="698,623,838,649"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="936,816,1081,843"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="937,1297,1080,1324"/>
<area shape="rect" href="lapic_8c.html#aec07f4595f82e14e1075beb4730b6976" title=" " alt="" coords="451,689,562,716"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="433,1145,580,1172"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="924,1120,1093,1147"/>
<area shape="rect" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4" title=" " alt="" coords="438,487,575,513"/>
<area shape="rect" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554" title=" " alt="" coords="439,537,575,564"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="420,385,593,412"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="414,993,599,1020"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="407,1399,607,1425"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="438,1559,575,1585"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="938,943,1079,969"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="443,1044,571,1071"/>
<area shape="rect" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3" title=" " alt="" coords="428,892,585,919"/>
<area shape="rect" href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4" title=" " alt="" coords="413,791,600,817"/>
<area shape="rect" href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c" title=" " alt="" coords="693,5,843,32"/>
<area shape="rect" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843" title=" " alt="" coords="713,157,823,184"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="929,183,1088,209"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="703,309,833,336"/>
<area shape="rect" href="hyperv_8h.html#a7ffceaf3950bd76a9a3a28ff1e836e58" title=" " alt="" coords="671,259,865,285"/>
<area shape="rect" href="hyperv_8c.html#a47f5a157cae898f7a7b370854c3748a4" title=" " alt="" coords="678,56,858,83"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="687,107,849,133"/>
<area shape="rect" href="xen_8h.html#ae436f94d060f3cb8029695c5a9fddc42" title=" " alt="" coords="671,360,865,387"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="929,436,1088,463"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="691,674,845,715"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="1363,841,1493,868"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1141,791,1300,817"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="1365,892,1491,919"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="673,1120,863,1147"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="938,1171,1079,1197"/>
<area shape="rect" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39" title=" " alt="" coords="702,1373,834,1400"/>
<area shape="rect" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44" title=" " alt="" coords="691,1475,845,1501"/>
<area shape="rect" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d" title=" " alt="" coords="679,1526,857,1567"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="660,1221,876,1248"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="949,1424,1069,1451"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="666,1424,870,1451"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="693,1643,843,1669"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="1162,892,1279,919"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="1161,841,1280,868"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="697,993,839,1020"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_ab6d8f3638f580c8d6dcd091512c49768_icgraph.png" border="0" usemap="#alapic_8h_ab6d8f3638f580c8d6dcd091512c49768_icgraph" alt=""/></div>
<map name="alapic_8h_ab6d8f3638f580c8d6dcd091512c49768_icgraph" id="alapic_8h_ab6d8f3638f580c8d6dcd091512c49768_icgraph">
<area shape="rect" title=" " alt="" coords="204,5,347,32"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="5,5,156,32"/>
</map>
</div>

</div>
</div>
<a id="a12227432ca4a620c3a4e249cbb28ecbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12227432ca4a620c3a4e249cbb28ecbe">&#9670;&nbsp;</a></span>kvm_lapic_set_irr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_lapic_set_irr </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00164">164</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;{</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019">kvm_lapic_set_vector</a>(vec, apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_IRR);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">     * irr_pending must be true if any interrupt is pending; set it after</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">     * APIC_IRR to avoid race with apic_clear_irr</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#ada91b44df57789499ad32ad287c21217">irr_pending</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div>
<div class="ttc" id="alapic_8h_html_aecd6ca5347dbb81047584149b2291019"><div class="ttname"><a href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019">kvm_lapic_set_vector</a></div><div class="ttdeci">static void kvm_lapic_set_vector(int vec, void *bitmap)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00159">lapic.h:159</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a12227432ca4a620c3a4e249cbb28ecbe_cgraph.png" border="0" usemap="#alapic_8h_a12227432ca4a620c3a4e249cbb28ecbe_cgraph" alt=""/></div>
<map name="alapic_8h_a12227432ca4a620c3a4e249cbb28ecbe_cgraph" id="alapic_8h_a12227432ca4a620c3a4e249cbb28ecbe_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,143,32"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="191,5,355,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a12227432ca4a620c3a4e249cbb28ecbe_icgraph.png" border="0" usemap="#alapic_8h_a12227432ca4a620c3a4e249cbb28ecbe_icgraph" alt=""/></div>
<map name="alapic_8h_a12227432ca4a620c3a4e249cbb28ecbe_icgraph" id="alapic_8h_a12227432ca4a620c3a4e249cbb28ecbe_icgraph">
<area shape="rect" title=" " alt="" coords="220,31,357,57"/>
<area shape="rect" href="svm_8c.html#a501d86bb28fd272f1ab52b8689b5f948" title=" " alt="" coords="6,5,171,32"/>
<area shape="rect" href="vmx_8c.html#a3afe971a56576ffd3b5f09d1c5f0189b" title=" " alt="" coords="5,56,172,83"/>
</map>
</div>

</div>
</div>
<a id="a9c3f4680631c7f6cb33a6a5c4c001750"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c3f4680631c7f6cb33a6a5c4c001750">&#9670;&nbsp;</a></span>kvm_lapic_set_pv_eoi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_lapic_set_pv_eoi </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03237">3237</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;{</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;    u64 addr = data &amp; ~KVM_MSR_ENABLED;</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    <span class="keyword">struct </span>gfn_to_hva_cache *ghc = &amp;vcpu-&gt;arch.pv_eoi.data;</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> new_len;</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160; </div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;    <span class="keywordflow">if</span> (!IS_ALIGNED(addr, 4))</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160; </div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;    <span class="keywordflow">if</span> (data &amp; KVM_MSR_ENABLED) {</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;        <span class="keywordflow">if</span> (addr == ghc-&gt;gpa &amp;&amp; len &lt;= ghc-&gt;len)</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;            new_len = ghc-&gt;len;</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;            new_len = len;</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160; </div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;        ret = <a class="code" href="kvm__main_8c.html#ac6c49245c7b6995e95ebe7128b7d1c80">kvm_gfn_to_hva_cache_init</a>(vcpu-&gt;kvm, ghc, addr, new_len);</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;        <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;    }</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160; </div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;    vcpu-&gt;arch.pv_eoi.msr_val = data;</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160; </div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_ac6c49245c7b6995e95ebe7128b7d1c80"><div class="ttname"><a href="kvm__main_8c.html#ac6c49245c7b6995e95ebe7128b7d1c80">kvm_gfn_to_hva_cache_init</a></div><div class="ttdeci">int kvm_gfn_to_hva_cache_init(struct kvm *kvm, struct gfn_to_hva_cache *ghc, gpa_t gpa, unsigned long len)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l03532">kvm_main.c:3532</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a9c3f4680631c7f6cb33a6a5c4c001750_cgraph.png" border="0" usemap="#alapic_8h_a9c3f4680631c7f6cb33a6a5c4c001750_cgraph" alt=""/></div>
<map name="alapic_8h_a9c3f4680631c7f6cb33a6a5c4c001750_cgraph" id="alapic_8h_a9c3f4680631c7f6cb33a6a5c4c001750_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,172,32"/>
<area shape="rect" href="kvm__main_8c.html#ac6c49245c7b6995e95ebe7128b7d1c80" title=" " alt="" coords="220,5,423,32"/>
<area shape="rect" href="kvm__main_8c.html#afb33e9a5cfe88ab45367ba7f6043666d" title=" " alt="" coords="471,5,688,32"/>
<area shape="rect" href="kvm__main_8c.html#ae374ebe48072080788db56075dd9a762" title=" " alt="" coords="736,5,875,32"/>
<area shape="rect" href="kvm__main_8c.html#ab58025ccc253a102c64561fa61c2a514" title=" " alt="" coords="923,5,1075,32"/>
<area shape="rect" href="kvm__main_8c.html#a77ec4b9140d69a05f3b4e7836cc03a96" title=" " alt="" coords="1123,5,1285,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a9c3f4680631c7f6cb33a6a5c4c001750_icgraph.png" border="0" usemap="#alapic_8h_a9c3f4680631c7f6cb33a6a5c4c001750_icgraph" alt=""/></div>
<map name="alapic_8h_a9c3f4680631c7f6cb33a6a5c4c001750_icgraph" id="alapic_8h_a9c3f4680631c7f6cb33a6a5c4c001750_icgraph">
<area shape="rect" title=" " alt="" coords="813,56,980,83"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="632,31,765,57"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,56,339,83"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,31,584,57"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,5,101,32"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,56,115,83"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,107,116,133"/>
</map>
</div>

</div>
</div>
<a id="aee34622e495b500817e0b0905bfd0d4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee34622e495b500817e0b0905bfd0d4c">&#9670;&nbsp;</a></span>kvm_lapic_set_tpr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_set_tpr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>cr8</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02516">2516</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;{</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;    <a class="code" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1">apic_set_tpr</a>(vcpu-&gt;arch.apic, (cr8 &amp; 0x0f) &lt;&lt; 4);</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a02bd03bf711be3200ea2316ced434ff1"><div class="ttname"><a href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1">apic_set_tpr</a></div><div class="ttdeci">static void apic_set_tpr(struct kvm_lapic *apic, u32 tpr)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00981">lapic.c:981</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_aee34622e495b500817e0b0905bfd0d4c_cgraph.png" border="0" usemap="#alapic_8h_aee34622e495b500817e0b0905bfd0d4c_cgraph" alt=""/></div>
<map name="alapic_8h_aee34622e495b500817e0b0905bfd0d4c_cgraph" id="alapic_8h_aee34622e495b500817e0b0905bfd0d4c_cgraph">
<area shape="rect" title=" " alt="" coords="5,132,147,159"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="195,132,296,159"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="344,107,473,133"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="718,157,862,184"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="521,107,664,133"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="521,19,664,61"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="916,107,1075,133"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="717,56,863,83"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1123,56,1272,83"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="916,56,1075,83"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="916,157,1075,184"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="712,5,868,32"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="935,5,1055,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_aee34622e495b500817e0b0905bfd0d4c_icgraph.png" border="0" usemap="#alapic_8h_aee34622e495b500817e0b0905bfd0d4c_icgraph" alt=""/></div>
<map name="alapic_8h_aee34622e495b500817e0b0905bfd0d4c_icgraph" id="alapic_8h_aee34622e495b500817e0b0905bfd0d4c_icgraph">
<area shape="rect" title=" " alt="" coords="1197,288,1339,315"/>
<area shape="rect" href="x86_8c.html#a120377d5a571d3fb86660cd5f6cd982d" title=" " alt="" coords="1044,288,1149,315"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="833,85,996,112"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,121,364,148"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="855,212,974,239"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="881,263,948,289"/>
<area shape="rect" href="x86_8c.html#a86812e4228865668099921709e1c2f26" title=" " alt="" coords="851,313,978,340"/>
<area shape="rect" href="vmx_8c.html#aa55ace9429e6e94042e6602716222805" title=" " alt="" coords="872,364,957,391"/>
<area shape="rect" href="svm_8c.html#a640846de1c48f3e408644fcb85a6004b" title=" " alt="" coords="846,415,983,441"/>
<area shape="rect" href="vmx_8c.html#a8d0fa5e317cbd0eb67ebdc9fa5ec70ce" title=" " alt="" coords="850,465,979,492"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="653,85,751,112"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="649,20,755,47"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,55,350,97"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="448,111,535,137"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,63,129,89"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="412,5,571,32"/>
<area shape="rect" href="svm_8c.html#af2ee2a03530f5b7a02a127d8b779d2ae" title=" " alt="" coords="619,212,785,239"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="644,415,760,441"/>
</map>
</div>

</div>
</div>
<a id="ad0f76b010d3d80125e88dc3d819f115b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0f76b010d3d80125e88dc3d819f115b">&#9670;&nbsp;</a></span>kvm_lapic_set_vapic_addr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_lapic_set_vapic_addr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpa_t&#160;</td>
          <td class="paramname"><em>vapic_addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03139">3139</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;{</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;    <span class="keywordflow">if</span> (vapic_addr) {</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="kvm__main_8c.html#ac6c49245c7b6995e95ebe7128b7d1c80">kvm_gfn_to_hva_cache_init</a>(vcpu-&gt;kvm,</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;                    &amp;vcpu-&gt;arch.apic-&gt;vapic_cache,</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;                    vapic_addr, <span class="keyword">sizeof</span>(u32)))</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;            <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;        __set_bit(KVM_APIC_CHECK_VAPIC, &amp;vcpu-&gt;arch.apic_attention);</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;        __clear_bit(KVM_APIC_CHECK_VAPIC, &amp;vcpu-&gt;arch.apic_attention);</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;    }</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160; </div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;    vcpu-&gt;arch.apic-&gt;vapic_addr = vapic_addr;</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_ad0f76b010d3d80125e88dc3d819f115b_cgraph.png" border="0" usemap="#alapic_8h_ad0f76b010d3d80125e88dc3d819f115b_cgraph" alt=""/></div>
<map name="alapic_8h_ad0f76b010d3d80125e88dc3d819f115b_cgraph" id="alapic_8h_ad0f76b010d3d80125e88dc3d819f115b_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,200,32"/>
<area shape="rect" href="kvm__main_8c.html#ac6c49245c7b6995e95ebe7128b7d1c80" title=" " alt="" coords="248,5,451,32"/>
<area shape="rect" href="kvm__main_8c.html#afb33e9a5cfe88ab45367ba7f6043666d" title=" " alt="" coords="499,5,716,32"/>
<area shape="rect" href="kvm__main_8c.html#ae374ebe48072080788db56075dd9a762" title=" " alt="" coords="764,5,903,32"/>
<area shape="rect" href="kvm__main_8c.html#ab58025ccc253a102c64561fa61c2a514" title=" " alt="" coords="951,5,1103,32"/>
<area shape="rect" href="kvm__main_8c.html#a77ec4b9140d69a05f3b4e7836cc03a96" title=" " alt="" coords="1151,5,1313,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_ad0f76b010d3d80125e88dc3d819f115b_icgraph.png" border="0" usemap="#alapic_8h_ad0f76b010d3d80125e88dc3d819f115b_icgraph" alt=""/></div>
<map name="alapic_8h_ad0f76b010d3d80125e88dc3d819f115b_icgraph" id="alapic_8h_ad0f76b010d3d80125e88dc3d819f115b_icgraph">
<area shape="rect" title=" " alt="" coords="384,5,579,32"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,5,336,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="aecd6ca5347dbb81047584149b2291019"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecd6ca5347dbb81047584149b2291019">&#9670;&nbsp;</a></span>kvm_lapic_set_vector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_lapic_set_vector </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>bitmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00159">159</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;{</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    set_bit(<a class="code" href="lapic_8h.html#a9c7a9b90f9a68f13aa4b9395a275ca96">VEC_POS</a>(vec), (bitmap) + <a class="code" href="lapic_8h.html#aba88c7489787a27e53b077679ce7b534">REG_POS</a>(vec));</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_aecd6ca5347dbb81047584149b2291019_icgraph.png" border="0" usemap="#alapic_8h_aecd6ca5347dbb81047584149b2291019_icgraph" alt=""/></div>
<map name="alapic_8h_aecd6ca5347dbb81047584149b2291019_icgraph" id="alapic_8h_aecd6ca5347dbb81047584149b2291019_icgraph">
<area shape="rect" title=" " alt="" coords="1387,634,1551,661"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1201,609,1339,635"/>
<area shape="rect" href="lapic_8h.html#a12227432ca4a620c3a4e249cbb28ecbe" title=" " alt="" coords="1201,659,1339,686"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="979,317,1153,343"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="998,609,1134,635"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="738,220,925,261"/>
<area shape="rect" href="pmu_8c.html#a03a16f548326b68245a4bf0555bea777" title=" " alt="" coords="746,343,917,370"/>
<area shape="rect" href="x86_8c.html#a130b6ed14cf18384646cb31251dd104e" title=" " alt="" coords="739,290,924,317"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="510,122,657,149"/>
<area shape="rect" href="irq_8h.html#ac79f0e40ed0e1cde83a09aef506fb373" title=" " alt="" coords="483,227,684,254"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="263,5,431,47"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="289,71,406,98"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="285,122,410,149"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="268,173,427,199"/>
<area shape="rect" href="irq_8c.html#a2d54275d9e142ae8e337298689483728" title=" " alt="" coords="271,224,424,265"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="68,289,149,315"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="279,345,416,371"/>
<area shape="rect" href="x86_8c.html#a2de10bf19fee1e2a9cb47b6f491a18b4" title=" " alt="" coords="506,279,661,320"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="268,290,427,317"/>
<area shape="rect" href="lapic_8c.html#a33f4e295e9710d133e3e38e0aed35edb" title=" " alt="" coords="775,794,888,821"/>
<area shape="rect" href="x86_8c.html#a62f68db08e13f0a4f3d158afda4631b1" title=" " alt="" coords="746,601,917,643"/>
<area shape="rect" href="hyperv_8c.html#a31df0137f9f8af335cbac3d4179b12a2" title=" " alt="" coords="732,743,931,770"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="489,681,678,707"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="754,476,909,517"/>
<area shape="rect" href="hyperv_8c.html#abc5b43adce506bcd416c9e84aa6cf54b" title=" " alt="" coords="755,545,907,571"/>
<area shape="rect" href="lapic_8c.html#a7195db5c58bcea2e080ee79cdaeae617" title=" " alt="" coords="516,858,651,885"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="19,833,198,859"/>
<area shape="rect" href="async__pf_8c.html#ad9b3dc2e31779a009859785fae9a8ec5" title=" " alt="" coords="514,630,653,657"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="503,564,664,605"/>
<area shape="rect" href="async__pf_8c.html#a55ca283598f3d739a56b50a0f7b908e2" title=" " alt="" coords="268,525,427,551"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="260,474,435,501"/>
<area shape="rect" href="hyperv_8c.html#a4ca4f7e6e021870753e15fa1072e828d" title=" " alt="" coords="516,757,651,783"/>
<area shape="rect" href="hyperv_8c.html#ac96f1fa9ec6ac0ac26c24ca65cc1547e" title=" " alt="" coords="277,833,418,859"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="290,575,405,602"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="274,630,421,657"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="267,782,428,809"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="293,681,402,707"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="294,731,401,758"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="53,474,165,501"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="30,525,187,551"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="5,575,212,602"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="5,423,212,450"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="33,627,185,668"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="30,693,187,719"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="27,743,191,770"/>
<area shape="rect" href="irq__comm_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="483,462,684,489"/>
<area shape="rect" href="xen_8c.html#a7ba53f4f869b74569192380f1adfd40c" title=" " alt="" coords="502,396,665,437"/>
<area shape="rect" href="hyperv_8c.html#acbc8238b9eb8f24485d6bc9eefc06474" title=" " alt="" coords="515,513,652,539"/>
<area shape="rect" href="svm_8c.html#a501d86bb28fd272f1ab52b8689b5f948" title=" " alt="" coords="983,659,1149,686"/>
<area shape="rect" href="vmx_8c.html#a3afe971a56576ffd3b5f09d1c5f0189b" title=" " alt="" coords="983,710,1149,737"/>
</map>
</div>

</div>
</div>
<a id="a973c3bd2856958a514e5ae2f49b14821"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a973c3bd2856958a514e5ae2f49b14821">&#9670;&nbsp;</a></span>kvm_lapic_switch_to_hv_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_switch_to_hv_timer </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02192">2192</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;{</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    <a class="code" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db">restart_apic_timer</a>(vcpu-&gt;arch.apic);</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a973c3bd2856958a514e5ae2f49b14821_cgraph.png" border="0" usemap="#alapic_8h_a973c3bd2856958a514e5ae2f49b14821_cgraph" alt=""/></div>
<map name="alapic_8h_a973c3bd2856958a514e5ae2f49b14821_cgraph" id="alapic_8h_a973c3bd2856958a514e5ae2f49b14821_cgraph">
<area shape="rect" title=" " alt="" coords="5,567,164,609"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="212,575,353,601"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="584,600,711,627"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="402,625,519,652"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="401,499,520,525"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="775,499,921,525"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="583,549,712,576"/>
<area shape="rect" href="lapic_8c.html#a2400290b895608d302ecce4ee352ee25" title=" " alt="" coords="975,755,1151,781"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="969,587,1156,613"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="1211,317,1371,344"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="969,251,1156,293"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1680,411,1803,437"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="976,536,1149,563"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="975,638,1150,679"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="1216,587,1367,613"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="1220,521,1363,562"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="1225,637,1357,664"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="1456,519,1576,545"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="1457,620,1575,647"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="1693,620,1789,647"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="1223,200,1360,227"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="1204,255,1379,281"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1447,251,1585,277"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1896,81,2067,108"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="1439,302,1593,343"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1443,368,1589,395"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1444,5,1588,32"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1687,157,1795,184"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1677,208,1806,235"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1678,259,1805,285"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1679,309,1804,336"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1653,360,1829,387"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1659,107,1823,133"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1897,157,2066,184"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1877,385,2085,412"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1905,436,2058,463"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1664,462,1819,503"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1662,528,1821,555"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1662,5,1821,32"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="1212,706,1371,747"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="1447,721,1585,748"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="1435,772,1597,799"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="1427,671,1605,697"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1682,671,1801,697"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="585,448,710,475"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="568,499,727,525"/>
<area shape="rect" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede" title=" " alt="" coords="971,470,1154,511"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a973c3bd2856958a514e5ae2f49b14821_icgraph.png" border="0" usemap="#alapic_8h_a973c3bd2856958a514e5ae2f49b14821_icgraph" alt=""/></div>
<map name="alapic_8h_a973c3bd2856958a514e5ae2f49b14821_icgraph" id="alapic_8h_a973c3bd2856958a514e5ae2f49b14821_icgraph">
<area shape="rect" title=" " alt="" coords="684,5,843,47"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="541,13,636,39"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,13,493,39"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,13,364,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="aee4a3e5ae4ed211edf4e463ebacadaa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee4a3e5ae4ed211edf4e463ebacadaa5">&#9670;&nbsp;</a></span>kvm_lapic_switch_to_sw_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_switch_to_sw_timer </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02197">2197</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;{</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160; </div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    preempt_disable();</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    <span class="comment">/* Possibly the TSC deadline timer is not enabled yet */</span></div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    <span class="keywordflow">if</span> (apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a033831ad90c69d7ea4e9af3fd0a6727e">hv_timer_in_use</a>)</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;        <a class="code" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8">start_sw_timer</a>(apic);</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    preempt_enable();</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_af723244d8a4013a14d7eaa2bca2765e8"><div class="ttname"><a href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8">start_sw_timer</a></div><div class="ttdeci">static void start_sw_timer(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02141">lapic.c:2141</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_aee4a3e5ae4ed211edf4e463ebacadaa5_cgraph.png" border="0" usemap="#alapic_8h_aee4a3e5ae4ed211edf4e463ebacadaa5_cgraph" alt=""/></div>
<map name="alapic_8h_aee4a3e5ae4ed211edf4e463ebacadaa5_cgraph" id="alapic_8h_aee4a3e5ae4ed211edf4e463ebacadaa5_cgraph">
<area shape="rect" title=" " alt="" coords="5,380,164,421"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="212,387,331,414"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="1033,122,1171,149"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="395,463,521,490"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="1022,253,1182,279"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="393,514,523,541"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="395,362,521,389"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="379,413,537,439"/>
<area shape="rect" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede" title=" " alt="" coords="782,355,965,396"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="585,417,732,443"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="1036,426,1168,453"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="1267,375,1387,402"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="1267,459,1386,486"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="1504,578,1600,605"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="780,471,967,498"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="780,187,967,228"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1491,527,1613,554"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="787,421,960,447"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="786,652,961,693"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="1027,375,1177,402"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="1031,477,1173,519"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="1015,173,1189,199"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1258,325,1395,351"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1707,274,1877,301"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="1249,5,1404,47"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1254,71,1399,98"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1255,122,1399,149"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1498,426,1606,453"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1487,477,1617,503"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1489,223,1615,250"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1489,274,1615,301"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1464,325,1640,351"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1470,375,1634,402"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1707,426,1877,453"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1688,502,1896,529"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1715,553,1869,579"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1475,5,1629,47"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1473,71,1631,98"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1473,122,1631,149"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="1023,665,1181,707"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="1258,726,1395,753"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="1246,675,1407,702"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="1237,625,1416,651"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1493,629,1611,655"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_aee4a3e5ae4ed211edf4e463ebacadaa5_icgraph.png" border="0" usemap="#alapic_8h_aee4a3e5ae4ed211edf4e463ebacadaa5_icgraph" alt=""/></div>
<map name="alapic_8h_aee4a3e5ae4ed211edf4e463ebacadaa5_icgraph" id="alapic_8h_aee4a3e5ae4ed211edf4e463ebacadaa5_icgraph">
<area shape="rect" title=" " alt="" coords="684,5,843,47"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="541,13,636,39"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,13,493,39"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,13,364,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="aa63139efcde3eb7b7548e5792d7cf63d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa63139efcde3eb7b7548e5792d7cf63d">&#9670;&nbsp;</a></span>kvm_lapic_sync_from_vapic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_sync_from_vapic </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03072">3072</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;{</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;    u32 data;</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160; </div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;    <span class="keywordflow">if</span> (test_bit(KVM_APIC_PV_EOI_PENDING, &amp;vcpu-&gt;arch.apic_attention))</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;        <a class="code" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9">apic_sync_pv_eoi_from_guest</a>(vcpu, vcpu-&gt;arch.apic);</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160; </div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;    <span class="keywordflow">if</span> (!test_bit(KVM_APIC_CHECK_VAPIC, &amp;vcpu-&gt;arch.apic_attention))</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160; </div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="kvm__main_8c.html#aa1c62238734b7293ce70a2710a8f2b05">kvm_read_guest_cached</a>(vcpu-&gt;kvm, &amp;vcpu-&gt;arch.apic-&gt;vapic_cache, &amp;data,</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;                  <span class="keyword">sizeof</span>(u32)))</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160; </div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;    <a class="code" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1">apic_set_tpr</a>(vcpu-&gt;arch.apic, data &amp; 0xff);</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_aa1c62238734b7293ce70a2710a8f2b05"><div class="ttname"><a href="kvm__main_8c.html#aa1c62238734b7293ce70a2710a8f2b05">kvm_read_guest_cached</a></div><div class="ttdeci">int kvm_read_guest_cached(struct kvm *kvm, struct gfn_to_hva_cache *ghc, void *data, unsigned long len)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l03608">kvm_main.c:3608</a></div></div>
<div class="ttc" id="alapic_8c_html_a651f3e8a2def4f70e3750464ea4904a9"><div class="ttname"><a href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9">apic_sync_pv_eoi_from_guest</a></div><div class="ttdeci">static void apic_sync_pv_eoi_from_guest(struct kvm_vcpu *vcpu, struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l03049">lapic.c:3049</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_aa63139efcde3eb7b7548e5792d7cf63d_cgraph.png" border="0" usemap="#alapic_8h_aa63139efcde3eb7b7548e5792d7cf63d_cgraph" alt=""/></div>
<map name="alapic_8h_aa63139efcde3eb7b7548e5792d7cf63d_cgraph" id="alapic_8h_aa63139efcde3eb7b7548e5792d7cf63d_cgraph">
<area shape="rect" title=" " alt="" coords="5,639,169,681"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="465,116,566,143"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="217,639,392,681"/>
<area shape="rect" href="kvm__main_8c.html#aa1c62238734b7293ce70a2710a8f2b05" title=" " alt="" coords="886,756,1069,783"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="671,116,800,143"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1154,5,1298,32"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="906,116,1049,143"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="906,50,1049,91"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="1147,167,1305,193"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1413,261,1559,288"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1653,115,1802,141"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1648,261,1807,288"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1407,5,1565,32"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="1148,61,1304,88"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="1426,76,1546,103"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="464,276,567,303"/>
<area shape="rect" href="lapic_8c.html#a9f87e777fe7602fff9557bbfbd630791" title=" " alt="" coords="453,705,577,732"/>
<area shape="rect" href="lapic_8c.html#aa9449652b89a95fb90ca1b00dffac32d" title=" " alt="" coords="440,639,591,681"/>
<area shape="rect" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843" title=" " alt="" coords="680,276,791,303"/>
<area shape="rect" href="hyperv_8h.html#a7ffceaf3950bd76a9a3a28ff1e836e58" title=" " alt="" coords="639,225,832,252"/>
<area shape="rect" href="hyperv_8c.html#a47f5a157cae898f7a7b370854c3748a4" title=" " alt="" coords="645,576,825,603"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="654,385,817,412"/>
<area shape="rect" href="lapic_8c.html#a33d332d149d0b1dd33e02b2ab98009a9" title=" " alt="" coords="895,269,1060,310"/>
<area shape="rect" href="hyperv_8c.html#a7432d42dbbd06907d83cbe1cf9479295" title=" " alt="" coords="880,655,1075,681"/>
<area shape="rect" href="hyperv_8c.html#af4c599ff6e5b1b327daf618845547c0d" title=" " alt="" coords="896,604,1059,631"/>
<area shape="rect" href="hyperv_8c.html#a5ea15c685a7e3e1abca91772c3cc3a52" title=" " alt="" coords="916,553,1039,580"/>
<area shape="rect" href="hyperv_8c.html#a88a2493dc6ffeea51c4325f080d797d4" title=" " alt="" coords="1144,647,1308,673"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1425,647,1547,673"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="913,335,1042,361"/>
<area shape="rect" href="irq_8h.html#a68413268c1f1f354270e9a0de9c2fe44" title=" " alt="" coords="927,385,1028,412"/>
<area shape="rect" href="lapic_8c.html#a900c0170b3a9f3c6869d072aa14055d1" title=" " alt="" coords="900,437,1055,478"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="889,503,1065,529"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="1123,356,1329,383"/>
<area shape="rect" href="ioapic_8c.html#aa590f4d1416bf84560a4e9693c638f55" title=" " alt="" coords="1181,503,1271,529"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="1429,356,1543,383"/>
<area shape="rect" href="ioapic_8c.html#a1d24315dec2401b4c45b224469c7379d" title=" " alt="" coords="1413,495,1559,537"/>
<area shape="rect" href="lapic_8c.html#a664d20f44962ff67555d95cdf987eb9b" title=" " alt="" coords="671,701,799,728"/>
<area shape="rect" href="lapic_8c.html#a46a725e66a6b75af27a208acd463153a" title=" " alt="" coords="671,649,799,676"/>
<area shape="rect" href="kvm__main_8c.html#ae902cad56e0551f3e6bf26df088f1b84" title=" " alt="" coords="1139,763,1313,805"/>
<area shape="rect" href="kvm__main_8c.html#afb33e9a5cfe88ab45367ba7f6043666d" title=" " alt="" coords="1377,752,1595,779"/>
<area shape="rect" href="kvm__main_8c.html#a3cc887a9ecfdd6e9f5ab90dc2ce8de4a" title=" " alt="" coords="1421,803,1551,829"/>
<area shape="rect" href="kvm__main_8c.html#ae374ebe48072080788db56075dd9a762" title=" " alt="" coords="1658,727,1797,753"/>
<area shape="rect" href="kvm__main_8c.html#ab58025ccc253a102c64561fa61c2a514" title=" " alt="" coords="1875,727,2027,753"/>
<area shape="rect" href="kvm__main_8c.html#a2a95905782c4136bdf6d9861f937b0ef" title=" " alt="" coords="1643,828,1812,855"/>
<area shape="rect" href="kvm__main_8c.html#a03aae88de564edba8a3a2d10bc5e7b20" title=" " alt="" coords="1670,777,1785,804"/>
<area shape="rect" href="kvm__main_8c.html#acc4698e3f076cdbbd5d8ca788a94decf" title=" " alt="" coords="1860,803,2043,829"/>
<area shape="rect" href="kvm__main_8c.html#a7c20e0f654f0b4472c3833f0a563e11e" title=" " alt="" coords="1887,853,2015,880"/>
<area shape="rect" href="kvm__main_8c.html#abc966ec55b5101c293dabe1eb29e2b82" title=" " alt="" coords="884,705,1071,732"/>
<area shape="rect" href="kvm__main_8c.html#ace1d8e8c746cb64f9ce515fe8807db98" title=" " alt="" coords="1137,698,1315,739"/>
<area shape="rect" href="kvm__main_8c.html#a1cf9d9c864cd7f9b5b32fc880c0872ab" title=" " alt="" coords="1419,701,1553,728"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_aa63139efcde3eb7b7548e5792d7cf63d_icgraph.png" border="0" usemap="#alapic_8h_aa63139efcde3eb7b7548e5792d7cf63d_icgraph" alt=""/></div>
<map name="alapic_8h_aa63139efcde3eb7b7548e5792d7cf63d_icgraph" id="alapic_8h_aa63139efcde3eb7b7548e5792d7cf63d_icgraph">
<area shape="rect" title=" " alt="" coords="727,5,891,47"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="541,13,679,39"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,13,493,39"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,13,364,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="a332060485ef249fcfd9edbf9cf80dd2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a332060485ef249fcfd9edbf9cf80dd2b">&#9670;&nbsp;</a></span>kvm_lapic_sync_to_vapic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_sync_to_vapic </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03115">3115</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;{</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;    u32 data, tpr;</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    <span class="keywordtype">int</span> max_irr, max_isr;</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160; </div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;    <a class="code" href="lapic_8c.html#ac56f15a70a1339e966c89b349b3f7850">apic_sync_pv_eoi_to_guest</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, apic);</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160; </div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;    <span class="keywordflow">if</span> (!test_bit(KVM_APIC_CHECK_VAPIC, &amp;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_attention))</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160; </div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;    tpr = <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_TASKPRI) &amp; 0xff;</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;    max_irr = <a class="code" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79">apic_find_highest_irr</a>(apic);</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;    <span class="keywordflow">if</span> (max_irr &lt; 0)</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;        max_irr = 0;</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;    max_isr = <a class="code" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0">apic_find_highest_isr</a>(apic);</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;    <span class="keywordflow">if</span> (max_isr &lt; 0)</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;        max_isr = 0;</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;    data = (tpr &amp; 0xff) | ((max_isr &amp; 0xf0) &lt;&lt; 8) | (max_irr &lt;&lt; 24);</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160; </div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;    <a class="code" href="kvm__main_8c.html#abc966ec55b5101c293dabe1eb29e2b82">kvm_write_guest_cached</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm, &amp;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic-&gt;vapic_cache, &amp;data,</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;                <span class="keyword">sizeof</span>(u32));</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_abc966ec55b5101c293dabe1eb29e2b82"><div class="ttname"><a href="kvm__main_8c.html#abc966ec55b5101c293dabe1eb29e2b82">kvm_write_guest_cached</a></div><div class="ttdeci">int kvm_write_guest_cached(struct kvm *kvm, struct gfn_to_hva_cache *ghc, void *data, unsigned long len)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l03571">kvm_main.c:3571</a></div></div>
<div class="ttc" id="alapic_8c_html_ac56f15a70a1339e966c89b349b3f7850"><div class="ttname"><a href="lapic_8c.html#ac56f15a70a1339e966c89b349b3f7850">apic_sync_pv_eoi_to_guest</a></div><div class="ttdeci">static void apic_sync_pv_eoi_to_guest(struct kvm_vcpu *vcpu, struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l03095">lapic.c:3095</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a332060485ef249fcfd9edbf9cf80dd2b_cgraph.png" border="0" usemap="#alapic_8h_a332060485ef249fcfd9edbf9cf80dd2b_cgraph" alt=""/></div>
<map name="alapic_8h_a332060485ef249fcfd9edbf9cf80dd2b_cgraph" id="alapic_8h_a332060485ef249fcfd9edbf9cf80dd2b_cgraph">
<area shape="rect" title=" " alt="" coords="5,173,193,200"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="243,20,399,47"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="241,85,400,112"/>
<area shape="rect" href="lapic_8c.html#ac56f15a70a1339e966c89b349b3f7850" title=" " alt="" coords="243,166,399,207"/>
<area shape="rect" href="kvm__main_8c.html#abc966ec55b5101c293dabe1eb29e2b82" title=" " alt="" coords="852,249,1039,276"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="248,325,393,352"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="467,5,587,32"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="655,31,804,57"/>
<area shape="rect" href="lapic_8c.html#a900c0170b3a9f3c6869d072aa14055d1" title=" " alt="" coords="450,107,605,149"/>
<area shape="rect" href="lapic_8c.html#a9f87e777fe7602fff9557bbfbd630791" title=" " alt="" coords="465,173,589,200"/>
<area shape="rect" href="lapic_8c.html#a1ea4e066578d706e217136c8baf247b3" title=" " alt="" coords="452,224,603,251"/>
<area shape="rect" href="lapic_8c.html#a46a725e66a6b75af27a208acd463153a" title=" " alt="" coords="665,224,793,251"/>
<area shape="rect" href="kvm__main_8c.html#ace1d8e8c746cb64f9ce515fe8807db98" title=" " alt="" coords="1087,242,1265,283"/>
<area shape="rect" href="kvm__main_8c.html#afb33e9a5cfe88ab45367ba7f6043666d" title=" " alt="" coords="1313,173,1531,200"/>
<area shape="rect" href="kvm__main_8c.html#a1cf9d9c864cd7f9b5b32fc880c0872ab" title=" " alt="" coords="1355,249,1489,276"/>
<area shape="rect" href="kvm__main_8c.html#ae4806d9a69b751639c175cb98e468f15" title=" " alt="" coords="2035,303,2217,329"/>
<area shape="rect" href="kvm__main_8c.html#ae374ebe48072080788db56075dd9a762" title=" " alt="" coords="2283,168,2421,195"/>
<area shape="rect" href="kvm__main_8c.html#ab58025ccc253a102c64561fa61c2a514" title=" " alt="" coords="2507,168,2659,195"/>
<area shape="rect" href="kvm__main_8c.html#a77ec4b9140d69a05f3b4e7836cc03a96" title=" " alt="" coords="2727,168,2889,195"/>
<area shape="rect" href="kvm__main_8c.html#a49ed988e062d259a8706411f619bf1f7" title=" " alt="" coords="1579,211,1752,237"/>
<area shape="rect" href="kvm__main_8c.html#a03aae88de564edba8a3a2d10bc5e7b20" title=" " alt="" coords="1608,261,1723,288"/>
<area shape="rect" href="kvm__main_8c.html#a7079b0256c7572c701a6e1526f58fdac" title=" " alt="" coords="1800,211,1987,237"/>
<area shape="rect" href="kvm__main_8c.html#a7c20e0f654f0b4472c3833f0a563e11e" title=" " alt="" coords="1829,261,1957,288"/>
<area shape="rect" href="kvm__main_8c.html#a04c9651c5f9a0485fd1e7152bdb01353" title=" " alt="" coords="2047,211,2205,237"/>
<area shape="rect" href="dirty__ring_8c.html#ac1878b63f1f337e93cf186ebd4fffcc4" title=" " alt="" coords="2266,237,2438,278"/>
<area shape="rect" href="dirty__ring_8c.html#a81ebbf462440ed5392d6d3412a859ae7" title=" " alt="" coords="2273,303,2431,329"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="2265,353,2439,380"/>
<area shape="rect" href="dirty__ring_8c.html#ad6e626257c739b2ac3d397119a7cf798" title=" " alt="" coords="2487,252,2679,279"/>
<area shape="rect" href="dirty__ring_8c.html#a6fe5cd75b9bac6497e1ae7340f2a5f7b" title=" " alt="" coords="2509,303,2657,329"/>
<area shape="rect" href="dirty__ring_8c.html#a22c9a239acf3463a8599a21c0a756538" title=" " alt="" coords="2493,353,2672,380"/>
<area shape="rect" href="dirty__ring_8c.html#acd0a1e586324b4c49b429c7a392db73f" title=" " alt="" coords="2729,328,2887,355"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="448,325,607,352"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a332060485ef249fcfd9edbf9cf80dd2b_icgraph.png" border="0" usemap="#alapic_8h_a332060485ef249fcfd9edbf9cf80dd2b_icgraph" alt=""/></div>
<map name="alapic_8h_a332060485ef249fcfd9edbf9cf80dd2b_icgraph" id="alapic_8h_a332060485ef249fcfd9edbf9cf80dd2b_icgraph">
<area shape="rect" title=" " alt="" coords="727,5,915,32"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="541,5,679,32"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,5,493,32"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="adfbea71ac96b210fb91bef47c77194f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfbea71ac96b210fb91bef47c77194f1">&#9670;&nbsp;</a></span>kvm_lowest_prio_delivery()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_lowest_prio_delivery </td>
          <td>(</td>
          <td class="paramtype">struct kvm_lapic_irq *&#160;</td>
          <td class="paramname"><em>irq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00242">242</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">return</span> (irq-&gt;delivery_mode == APIC_DM_LOWEST ||</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            irq-&gt;msi_redir_hint);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_adfbea71ac96b210fb91bef47c77194f1_icgraph.png" border="0" usemap="#alapic_8h_adfbea71ac96b210fb91bef47c77194f1_icgraph" alt=""/></div>
<map name="alapic_8h_adfbea71ac96b210fb91bef47c77194f1_icgraph" id="alapic_8h_adfbea71ac96b210fb91bef47c77194f1_icgraph">
<area shape="rect" title=" " alt="" coords="2064,516,2257,543"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="1832,538,2016,579"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1388,455,1577,481"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="1625,506,1784,547"/>
<area shape="rect" href="lapic_8c.html#a8620b1c89f8cf017f7827024fc95ac92" title=" " alt="" coords="1633,571,1777,613"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="1627,658,1782,699"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="919,107,1077,133"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="676,81,823,108"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="1391,579,1574,605"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="1179,627,1311,653"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="1169,576,1320,603"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="923,639,1073,665"/>
<area shape="rect" href="irq__comm_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="897,795,1099,821"/>
<area shape="rect" href="xen_8c.html#a7ba53f4f869b74569192380f1adfd40c" title=" " alt="" coords="1401,678,1564,719"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="1187,208,1302,235"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="1171,460,1318,487"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="1164,521,1325,548"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1190,385,1299,412"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="1191,56,1298,83"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="942,259,1054,285"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="895,157,1101,184"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="895,208,1101,235"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="668,233,831,260"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="675,284,823,311"/>
<area shape="rect" href="ioapic_8c.html#a477f1b98bf8d9dfcd1e51c743d79ac47" title=" " alt="" coords="453,233,577,260"/>
<area shape="rect" href="irq__comm_8c.html#ae12bd4085acdb92be18af95ac983d5a5" title=" " alt="" coords="441,284,589,311"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="205,309,377,336"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="5,309,157,336"/>
<area shape="rect" href="ioapic_8c.html#a21c528e901ef596bba3f882ed5ac9597" title=" " alt="" coords="687,132,812,159"/>
<area shape="rect" href="x86_8c.html#a10224987f77e7370dd9f2b80352544ab" title=" " alt="" coords="440,132,589,159"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="661,183,837,209"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="433,183,596,209"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="439,429,591,470"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="919,487,1077,513"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="916,537,1080,564"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="682,436,817,463"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="652,537,847,564"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="669,588,830,615"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="678,487,821,513"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="425,537,604,564"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="672,639,827,681"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="909,588,1087,615"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="901,385,1095,412"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="915,56,1081,83"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="927,5,1069,32"/>
<area shape="rect" href="hyperv_8c.html#a3bfbf343eefc11963b210ba8322f6826" title=" " alt="" coords="681,5,818,32"/>
<area shape="rect" href="xen_8c.html#a0fb0356e88890003922daf35627420a8" title=" " alt="" coords="1153,678,1336,719"/>
<area shape="rect" href="xen_8c.html#a48738df3c98025631e2412d90758136c" title=" " alt="" coords="1149,744,1340,771"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="957,689,1039,716"/>
<area shape="rect" href="xen_8c.html#a59091fb436633f85ba3e28187f5794d0" title=" " alt="" coords="919,744,1077,771"/>
</map>
</div>

</div>
</div>
<a id="a756b707dd502680db2eed7759defde40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a756b707dd502680db2eed7759defde40">&#9670;&nbsp;</a></span>kvm_recalculate_apic_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_recalculate_apic_map </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00374">374</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;{</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keyword">struct </span>kvm_apic_map *<span class="keyword">new</span>, *old = NULL;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    u32 max_id = 255; <span class="comment">/* enough space for any xAPIC ID */</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordtype">bool</span> xapic_id_mismatch;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">/* Read kvm-&gt;arch.apic_map_dirty before kvm-&gt;arch.apic_map.  */</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">if</span> (atomic_read_acquire(&amp;kvm-&gt;arch.apic_map_dirty) == <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a66c5c37af65c297c098d96df666bf6da">CLEAN</a>)</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    WARN_ONCE(!<a class="code" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39">irqchip_in_kernel</a>(kvm),</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;          <span class="stringliteral">&quot;Dirty APIC map without an in-kernel local APIC&quot;</span>);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    mutex_lock(&amp;kvm-&gt;arch.apic_map_lock);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;retry:</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">     * Read kvm-&gt;arch.apic_map_dirty before kvm-&gt;arch.apic_map (if clean)</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">     * or the APIC registers (if dirty).  Note, on retry the map may have</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">     * not yet been marked dirty by whatever task changed a vCPU&#39;s x2APIC</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">     * ID, i.e. the map may still show up as in-progress.  In that case</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">     * this task still needs to retry and complete its calculation.</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">if</span> (atomic_cmpxchg_acquire(&amp;kvm-&gt;arch.apic_map_dirty,</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                   <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a6a4e132eb192a22c351397837d4c082c">DIRTY</a>, <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4ac2b52587c19144a2fdd6253248a08414">UPDATE_IN_PROGRESS</a>) == <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a66c5c37af65c297c098d96df666bf6da">CLEAN</a>) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="comment">/* Someone else has updated the map. */</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        mutex_unlock(&amp;kvm-&gt;arch.apic_map_lock);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">     * Reset the mismatch flag between attempts so that KVM does the right</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">     * thing if a vCPU changes its xAPIC ID, but do NOT reset max_id, i.e.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">     * keep max_id strictly increasing.  Disallowing max_id from shrinking</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">     * ensures KVM won&#39;t get stuck in an infinite loop, e.g. if the vCPU</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">     * with the highest x2APIC ID is toggling its APIC on and off.</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    xapic_id_mismatch = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    kvm_for_each_vcpu(i, vcpu, kvm)</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4">kvm_apic_present</a>(vcpu))</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            max_id = max(max_id, <a class="code" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718">kvm_x2apic_id</a>(vcpu-&gt;arch.apic));</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keyword">new</span> = kvzalloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> kvm_apic_map) +</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                       <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structkvm__lapic.html">kvm_lapic</a> *) * ((u64)max_id + 1),</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;               GFP_KERNEL_ACCOUNT);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">if</span> (!<span class="keyword">new</span>)</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keyword">new</span>-&gt;max_apic_id = max_id;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keyword">new</span>-&gt;logical_mode = KVM_APIC_MODE_SW_DISABLED;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    kvm_for_each_vcpu(i, vcpu, kvm) {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4">kvm_apic_present</a>(vcpu))</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        r = <a class="code" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44">kvm_recalculate_phys_map</a>(<span class="keyword">new</span>, vcpu, &amp;xapic_id_mismatch);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">if</span> (r) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            kvfree(<span class="keyword">new</span>);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="keyword">new</span> = NULL;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <span class="keywordflow">if</span> (r == -E2BIG) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                cond_resched();</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                <span class="keywordflow">goto</span> retry;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <a class="code" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49">kvm_recalculate_logical_map</a>(<span class="keyword">new</span>, vcpu);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;out:</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">     * The optimized map is effectively KVM&#39;s internal version of APICv,</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">     * and all unwanted aliasing that results in disabling the optimized</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">     * map also applies to APICv.</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">if</span> (!<span class="keyword">new</span>)</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        kvm_set_apicv_inhibit(kvm, APICV_INHIBIT_REASON_PHYSICAL_ID_ALIASED);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        kvm_clear_apicv_inhibit(kvm, APICV_INHIBIT_REASON_PHYSICAL_ID_ALIASED);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">if</span> (!<span class="keyword">new</span> || new-&gt;logical_mode == KVM_APIC_MODE_MAP_DISABLED)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        kvm_set_apicv_inhibit(kvm, APICV_INHIBIT_REASON_LOGICAL_ID_ALIASED);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        kvm_clear_apicv_inhibit(kvm, APICV_INHIBIT_REASON_LOGICAL_ID_ALIASED);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">if</span> (xapic_id_mismatch)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        kvm_set_apicv_inhibit(kvm, APICV_INHIBIT_REASON_APIC_ID_MODIFIED);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        kvm_clear_apicv_inhibit(kvm, APICV_INHIBIT_REASON_APIC_ID_MODIFIED);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    old = rcu_dereference_protected(kvm-&gt;arch.apic_map,</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            lockdep_is_held(&amp;kvm-&gt;arch.apic_map_lock));</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    rcu_assign_pointer(kvm-&gt;arch.apic_map, <span class="keyword">new</span>);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">     * Write kvm-&gt;arch.apic_map before clearing apic-&gt;apic_map_dirty.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">     * If another update has come in, leave it DIRTY.</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    atomic_cmpxchg_release(&amp;kvm-&gt;arch.apic_map_dirty,</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                   <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4ac2b52587c19144a2fdd6253248a08414">UPDATE_IN_PROGRESS</a>, <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a66c5c37af65c297c098d96df666bf6da">CLEAN</a>);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    mutex_unlock(&amp;kvm-&gt;arch.apic_map_lock);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">if</span> (old)</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        call_rcu(&amp;old-&gt;rcu, <a class="code" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44">kvm_apic_map_free</a>);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <a class="code" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d">kvm_make_scan_ioapic_request</a>(kvm);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;}</div>
<div class="ttc" id="airq_8h_html_a96951e3a1bfa402d8bee67713e267b39"><div class="ttname"><a href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39">irqchip_in_kernel</a></div><div class="ttdeci">static int irqchip_in_kernel(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="irq_8h_source.html#l00090">irq.h:90</a></div></div>
<div class="ttc" id="alapic_8c_html_a43e03cb9e082150ad2bda64ee2761a44"><div class="ttname"><a href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44">kvm_recalculate_phys_map</a></div><div class="ttdeci">static int kvm_recalculate_phys_map(struct kvm_apic_map *new, struct kvm_vcpu *vcpu, bool *xapic_id_mismatch)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00218">lapic.c:218</a></div></div>
<div class="ttc" id="alapic_8c_html_a84c432a3d433d6afbd54bff4e5806d49"><div class="ttname"><a href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49">kvm_recalculate_logical_map</a></div><div class="ttdeci">static void kvm_recalculate_logical_map(struct kvm_apic_map *new, struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00294">lapic.c:294</a></div></div>
<div class="ttc" id="alapic_8c_html_a8bdd67ff70db633e45cce412fb4c7718"><div class="ttname"><a href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718">kvm_x2apic_id</a></div><div class="ttdeci">static u32 kvm_x2apic_id(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00143">lapic.c:143</a></div></div>
<div class="ttc" id="alapic_8c_html_aaf8fd5f0e57d456151c951e0f3715fc4a66c5c37af65c297c098d96df666bf6da"><div class="ttname"><a href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a66c5c37af65c297c098d96df666bf6da">CLEAN</a></div><div class="ttdeci">@ CLEAN</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00369">lapic.c:369</a></div></div>
<div class="ttc" id="alapic_8c_html_aaf8fd5f0e57d456151c951e0f3715fc4ac2b52587c19144a2fdd6253248a08414"><div class="ttname"><a href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4ac2b52587c19144a2fdd6253248a08414">UPDATE_IN_PROGRESS</a></div><div class="ttdeci">@ UPDATE_IN_PROGRESS</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00370">lapic.c:370</a></div></div>
<div class="ttc" id="alapic_8c_html_adb9d56c06c989c570d48eaad39212e44"><div class="ttname"><a href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44">kvm_apic_map_free</a></div><div class="ttdeci">static void kvm_apic_map_free(struct rcu_head *rcu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00211">lapic.c:211</a></div></div>
<div class="ttc" id="ax86_8c_html_a3e31b97e32a42bf14848541e9e71688d"><div class="ttname"><a href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d">kvm_make_scan_ioapic_request</a></div><div class="ttdeci">void kvm_make_scan_ioapic_request(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l10520">x86.c:10520</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a756b707dd502680db2eed7759defde40_cgraph.png" border="0" usemap="#alapic_8h_a756b707dd502680db2eed7759defde40_cgraph" alt=""/></div>
<map name="alapic_8h_a756b707dd502680db2eed7759defde40_cgraph" id="alapic_8h_a756b707dd502680db2eed7759defde40_cgraph">
<area shape="rect" title=" " alt="" coords="5,165,205,192"/>
<area shape="rect" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39" title=" " alt="" coords="295,5,427,32"/>
<area shape="rect" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44" title=" " alt="" coords="284,56,439,83"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="291,107,432,133"/>
<area shape="rect" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d" title=" " alt="" coords="273,158,450,199"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="253,376,469,403"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="575,224,695,251"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="259,275,463,301"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="549,60,720,87"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="575,111,694,137"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="529,165,740,192"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="800,158,1011,199"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="1069,140,1236,167"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="1059,191,1247,217"/>
<area shape="rect" href="kvm__main_8c.html#a7682302871243c20a5dd16214655db15" title=" " alt="" coords="1343,140,1422,167"/>
<area shape="rect" href="kvm__main_8c.html#a9316cc70360fb39d920d5c76a2e41f35" title=" " alt="" coords="1295,241,1471,268"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1306,191,1459,217"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="563,325,706,352"/>
<area shape="rect" href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f" title=" " alt="" coords="539,477,731,504"/>
<area shape="rect" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3" title=" " alt="" coords="517,528,752,555"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="550,376,719,403"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="562,427,707,453"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="826,427,985,453"/>
<area shape="rect" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096" title=" " alt="" coords="579,275,691,301"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a756b707dd502680db2eed7759defde40_icgraph.png" border="0" usemap="#alapic_8h_a756b707dd502680db2eed7759defde40_icgraph" alt=""/></div>
<map name="alapic_8h_a756b707dd502680db2eed7759defde40_icgraph" id="alapic_8h_a756b707dd502680db2eed7759defde40_icgraph">
<area shape="rect" title=" " alt="" coords="1589,384,1789,411"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1387,409,1539,436"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1384,563,1541,589"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1398,256,1527,283"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="1163,352,1314,379"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1163,403,1314,445"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="431,309,590,336"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,205,129,232"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1171,613,1306,640"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1141,668,1336,695"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1158,512,1319,539"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1167,563,1310,589"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="923,665,1075,706"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="910,731,1089,757"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="929,613,1069,640"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="678,723,837,765"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="905,512,1093,539"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="424,461,597,488"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="691,512,824,539"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="412,512,609,539"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="183,461,358,488"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="27,411,108,437"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="13,461,122,488"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="12,512,123,539"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="924,563,1075,589"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1174,183,1303,209"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="906,107,1093,133"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="913,208,1085,235"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="914,157,1085,184"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,162,350,203"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,108,364,135"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="710,5,805,32"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="689,56,826,83"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="470,56,551,83"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="657,208,857,235"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="918,309,1081,336"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="708,259,807,285"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="704,309,811,336"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,233,350,274"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="467,208,554,235"/>
</map>
</div>

</div>
</div>
<a id="a9d9f2a266299bc56c932735db94816d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d9f2a266299bc56c932735db94816d5">&#9670;&nbsp;</a></span>kvm_set_apic_base()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_set_apic_base </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct msr_data *&#160;</td>
          <td class="paramname"><em>msr_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="x86_8c_source.html#l00485">485</a> of file <a class="el" href="x86_8c_source.html">x86.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;{</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keyword">enum</span> <a class="code" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dff">lapic_mode</a> old_mode = <a class="code" href="x86_8c.html#a8415cd1d2d30e65d505adb5ba75a0338">kvm_get_apic_mode</a>(vcpu);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keyword">enum</span> <a class="code" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dff">lapic_mode</a> new_mode = <a class="code" href="lapic_8h.html#a101348a7cc26ee89dac847f02ca917a4">kvm_apic_mode</a>(msr_info-&gt;data);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    u64 reserved_bits = <a class="code" href="cpuid_8c.html#a8bf272b370f8a27bb68bf5bf9e5ae7d5">kvm_vcpu_reserved_gpa_bits_raw</a>(vcpu) | 0x2ff |</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        (<a class="code" href="cpuid_8h.html#ad8c2a90f2f099af1d7ca23750d9d2eb9">guest_cpuid_has</a>(vcpu, X86_FEATURE_X2APIC) ? 0 : X2APIC_ENABLE);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">if</span> ((msr_info-&gt;data &amp; reserved_bits) != 0 || new_mode == <a class="code" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dffacc7944d9d7dbe606acabbf39f2fd9358">LAPIC_MODE_INVALID</a>)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">if</span> (!msr_info-&gt;host_initiated) {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keywordflow">if</span> (old_mode == <a class="code" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dffa995b62067c99e3263b6615a6b44bf092">LAPIC_MODE_X2APIC</a> &amp;&amp; new_mode == <a class="code" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dffaaf077cffd5b7a15d27225db34a95b56c">LAPIC_MODE_XAPIC</a>)</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">if</span> (old_mode == <a class="code" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dffaa085aa594329c377d85feca3872e9d38">LAPIC_MODE_DISABLED</a> &amp;&amp; new_mode == <a class="code" href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dffa995b62067c99e3263b6615a6b44bf092">LAPIC_MODE_X2APIC</a>)</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <a class="code" href="lapic_8c.html#a8d747385873e52f47e85179c21521e73">kvm_lapic_set_base</a>(vcpu, msr_info-&gt;data);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="lapic_8c.html#a756b707dd502680db2eed7759defde40">kvm_recalculate_apic_map</a>(vcpu-&gt;kvm);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;}</div>
<div class="ttc" id="acpuid_8c_html_a8bf272b370f8a27bb68bf5bf9e5ae7d5"><div class="ttname"><a href="cpuid_8c.html#a8bf272b370f8a27bb68bf5bf9e5ae7d5">kvm_vcpu_reserved_gpa_bits_raw</a></div><div class="ttdeci">u64 kvm_vcpu_reserved_gpa_bits_raw(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="cpuid_8c_source.html#l00409">cpuid.c:409</a></div></div>
<div class="ttc" id="alapic_8h_html_a0c04991fb862ed18aaf962dc5eae9dff"><div class="ttname"><a href="lapic_8h.html#a0c04991fb862ed18aaf962dc5eae9dff">lapic_mode</a></div><div class="ttdeci">lapic_mode</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00025">lapic.h:25</a></div></div>
<div class="ttc" id="ax86_8c_html_a8415cd1d2d30e65d505adb5ba75a0338"><div class="ttname"><a href="x86_8c.html#a8415cd1d2d30e65d505adb5ba75a0338">kvm_get_apic_mode</a></div><div class="ttdeci">enum lapic_mode kvm_get_apic_mode(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l00474">x86.c:479</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a9d9f2a266299bc56c932735db94816d5_cgraph.png" border="0" usemap="#alapic_8h_a9d9f2a266299bc56c932735db94816d5_cgraph" alt=""/></div>
<map name="alapic_8h_a9d9f2a266299bc56c932735db94816d5_cgraph" id="alapic_8h_a9d9f2a266299bc56c932735db94816d5_cgraph">
<area shape="rect" title=" " alt="" coords="5,699,156,725"/>
<area shape="rect" href="cpuid_8h.html#ad8c2a90f2f099af1d7ca23750d9d2eb9" title=" " alt="" coords="495,572,625,599"/>
<area shape="rect" href="lapic_8h.html#a101348a7cc26ee89dac847f02ca917a4" title=" " alt="" coords="239,623,369,649"/>
<area shape="rect" href="x86_8c.html#a8415cd1d2d30e65d505adb5ba75a0338" title=" " alt="" coords="225,673,383,700"/>
<area shape="rect" href="lapic_8c.html#a8d747385873e52f47e85179c21521e73" title=" " alt="" coords="227,724,381,751"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="204,1003,404,1029"/>
<area shape="rect" href="cpuid_8c.html#a8bf272b370f8a27bb68bf5bf9e5ae7d5" title=" " alt="" coords="212,1239,396,1281"/>
<area shape="rect" href="reverse__cpuid_8h.html#aeac4cdaa1c8b53f46ea791f355b1d08c" title=" " alt="" coords="1491,172,1597,199"/>
<area shape="rect" href="cpuid_8h.html#af2af2645f203b5d9bad2088af0da5c1e" title=" " alt="" coords="741,139,926,165"/>
<area shape="rect" href="reverse__cpuid_8h.html#a76ac51b62ef170b755204cb8b958e585" title=" " alt="" coords="1883,128,2031,155"/>
<area shape="rect" href="reverse__cpuid_8h.html#ae10c1644e90cb8443e5a32554acfd700" title=" " alt="" coords="1676,128,1835,155"/>
<area shape="rect" href="reverse__cpuid_8h.html#adf3299d46978c685ba9b46ebb1536680" title=" " alt="" coords="1460,5,1628,32"/>
<area shape="rect" href="cpuid_8h.html#a638557b30255883157acafa55a351d0d" title=" " alt="" coords="1021,186,1187,227"/>
<area shape="rect" href="reverse__cpuid_8h.html#a3f7e53c68e5610be44d760fd4854f892" title=" " alt="" coords="1473,81,1615,108"/>
<area shape="rect" href="cpuid_8c.html#a7220f0f9a6d0047aef7619e272fa9518" title=" " alt="" coords="1266,252,1403,279"/>
<area shape="rect" href="reverse__cpuid_8h.html#a8f6dc89865c6af98e621e1ddcf401cae" title=" " alt="" coords="1698,77,1813,104"/>
<area shape="rect" href="lapic_8c.html#a22d25ec6370d0efd4c569b7317d28098" title=" " alt="" coords="469,724,651,751"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="473,673,647,700"/>
<area shape="rect" href="cpuid_8c.html#a537512099e11c7ab0553aeae5e38d9ea" title=" " alt="" coords="459,623,661,649"/>
<area shape="rect" href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f" title=" " alt="" coords="737,724,929,751"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="761,673,905,700"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1025,673,1183,700"/>
<area shape="rect" href="cpuid_8c.html#aba2a2f99dbe3b8848b6ffc19effa6294" title=" " alt="" coords="754,413,913,454"/>
<area shape="rect" href="cpuid_8c.html#a57e37154fafc08d4400cac72d0a0b91d" title=" " alt="" coords="1017,303,1191,345"/>
<area shape="rect" href="reverse__cpuid_8h.html#a9ca8b41f0d18f3dac63b62e545077db4" title=" " alt="" coords="1028,135,1180,161"/>
<area shape="rect" href="reverse__cpuid_8h.html#a748960fccca789bf432536205fdf9826" title=" " alt="" coords="1040,369,1168,396"/>
<area shape="rect" href="x86_8h.html#adf8330176a8805826ed4711a51ce93cf" title=" " alt="" coords="1021,420,1187,447"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="1035,471,1173,497"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a2b779657b20f7afa44c0172b1478ac65" title=" " alt="" coords="1031,521,1177,548"/>
<area shape="rect" href="cpuid_8c.html#aad06d21707fd0abb109028612ea7514c" title=" " alt="" coords="1025,572,1183,599"/>
<area shape="rect" href="reverse__cpuid_8h.html#a08df87ae84991c96655f367379fad9b1" title=" " alt="" coords="1257,33,1412,60"/>
<area shape="rect" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39" title=" " alt="" coords="494,1028,626,1055"/>
<area shape="rect" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44" title=" " alt="" coords="483,1079,637,1105"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="489,1129,631,1156"/>
<area shape="rect" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d" title=" " alt="" coords="471,1181,649,1222"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="452,876,668,903"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="773,977,893,1004"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="458,927,662,953"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="748,1083,919,1109"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="774,1133,893,1160"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="728,1188,939,1215"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="999,1181,1209,1222"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="762,927,905,953"/>
<area shape="rect" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3" title=" " alt="" coords="716,876,951,903"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="749,775,918,801"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="761,825,906,852"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1025,825,1183,852"/>
<area shape="rect" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096" title=" " alt="" coords="777,1028,889,1055"/>
<area shape="rect" href="cpuid_8h.html#a1678e00b10264045277c1abfcb6eec3e" title=" " alt="" coords="487,1247,633,1273"/>
<area shape="rect" href="mmu_8h.html#a20a41b0166b13eb22b15786964f5de9d" title=" " alt="" coords="519,1297,601,1324"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a9d9f2a266299bc56c932735db94816d5_icgraph.png" border="0" usemap="#alapic_8h_a9d9f2a266299bc56c932735db94816d5_icgraph" alt=""/></div>
<map name="alapic_8h_a9d9f2a266299bc56c932735db94816d5_icgraph" id="alapic_8h_a9d9f2a266299bc56c932735db94816d5_icgraph">
<area shape="rect" title=" " alt="" coords="1000,173,1151,199"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="783,122,946,149"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="777,198,952,225"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="625,71,723,98"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="621,122,727,149"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,5,350,47"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="448,71,535,98"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,71,129,98"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,71,364,98"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="412,122,571,149"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="633,173,715,199"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="619,223,729,250"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="619,274,729,301"/>
</map>
</div>

</div>
</div>
<a id="a44881cc17bdbe632a483e8c7c1dd0dfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44881cc17bdbe632a483e8c7c1dd0dfb">&#9670;&nbsp;</a></span>kvm_set_lapic_tscdeadline_msr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_set_lapic_tscdeadline_msr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02504">2504</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;{</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160; </div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4">kvm_apic_present</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>) || !<a class="code" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0">apic_lvtt_tscdeadline</a>(apic))</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160; </div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    hrtimer_cancel(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">timer</a>);</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#acb4ad6bfe6c14982d0a87f4678e92d09">tscdeadline</a> = data;</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    <a class="code" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3">start_apic_timer</a>(apic);</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a5f5c49ce8a579b59663644f0f1a6cbe3"><div class="ttname"><a href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3">start_apic_timer</a></div><div class="ttdeci">static void start_apic_timer(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02227">lapic.c:2227</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a44881cc17bdbe632a483e8c7c1dd0dfb_cgraph.png" border="0" usemap="#alapic_8h_a44881cc17bdbe632a483e8c7c1dd0dfb_cgraph" alt=""/></div>
<map name="alapic_8h_a44881cc17bdbe632a483e8c7c1dd0dfb_cgraph" id="alapic_8h_a44881cc17bdbe632a483e8c7c1dd0dfb_cgraph">
<area shape="rect" title=" " alt="" coords="5,124,236,151"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="1693,267,1853,293"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="1927,5,2068,32"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="284,343,412,369"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="2377,200,2548,227"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="2163,81,2282,108"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="460,499,603,525"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="1704,645,1841,672"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="1266,713,1393,740"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="651,499,792,525"/>
<area shape="rect" href="lapic_8c.html#a0efcb9037756de47e9d28f0a5ea1009f" title=" " alt="" coords="840,932,1001,959"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="1070,409,1187,436"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="861,499,980,525"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="1256,460,1403,487"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="1265,359,1394,385"/>
<area shape="rect" href="lapic_8c.html#a2400290b895608d302ecce4ee352ee25" title=" " alt="" coords="1456,73,1632,100"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="1451,561,1637,588"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="1451,343,1637,385"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="2161,504,2284,531"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="1457,511,1631,537"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="1457,175,1631,217"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="1697,595,1848,621"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="1701,529,1844,570"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="1707,827,1839,853"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="1937,772,2057,799"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="1938,827,2057,853"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="2175,827,2271,853"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="1685,376,1860,403"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1929,343,2066,369"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="1920,394,2075,435"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1925,577,2070,604"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1925,673,2069,700"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="2169,352,2277,379"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="2158,403,2287,429"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="2159,453,2286,480"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="2160,251,2285,277"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="2135,301,2311,328"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="2359,529,2567,556"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="2386,479,2539,505"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="2143,577,2302,604"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="2143,673,2302,700"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="1693,107,1852,149"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="1929,157,2066,184"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="1917,56,2078,83"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="1908,107,2087,133"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="1066,460,1191,487"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="1049,511,1208,537"/>
<area shape="rect" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede" title=" " alt="" coords="1453,765,1635,806"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="1052,765,1205,806"/>
<area shape="rect" href="lapic_8c.html#ab9f4c987f5a9d71b966ec05058380bb4" title=" " alt="" coords="1079,932,1178,959"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a44881cc17bdbe632a483e8c7c1dd0dfb_icgraph.png" border="0" usemap="#alapic_8h_a44881cc17bdbe632a483e8c7c1dd0dfb_icgraph" alt=""/></div>
<map name="alapic_8h_a44881cc17bdbe632a483e8c7c1dd0dfb_icgraph" id="alapic_8h_a44881cc17bdbe632a483e8c7c1dd0dfb_icgraph">
<area shape="rect" title=" " alt="" coords="851,85,1081,112"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="638,37,793,78"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="628,115,803,141"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="425,23,580,65"/>
<area shape="rect" href="svm_8c.html#a82c8447e70f06dd52623c696446104b5" title=" " alt="" coords="171,5,377,32"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="171,56,377,83"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="6,5,122,32"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="5,56,123,83"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="462,89,543,116"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="448,140,557,167"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="447,191,558,217"/>
</map>
</div>

</div>
</div>
<a id="a3af346d02eebff16886d49d3810b5358"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3af346d02eebff16886d49d3810b5358">&#9670;&nbsp;</a></span>kvm_vcpu_apicv_active()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_vcpu_apicv_active </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00226">226</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;{</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(vcpu) &amp;&amp; vcpu-&gt;arch.apic-&gt;apicv_active;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a3af346d02eebff16886d49d3810b5358_cgraph.png" border="0" usemap="#alapic_8h_a3af346d02eebff16886d49d3810b5358_cgraph" alt=""/></div>
<map name="alapic_8h_a3af346d02eebff16886d49d3810b5358_cgraph" id="alapic_8h_a3af346d02eebff16886d49d3810b5358_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,184,32"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="232,5,351,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a3af346d02eebff16886d49d3810b5358_icgraph.png" border="0" usemap="#alapic_8h_a3af346d02eebff16886d49d3810b5358_icgraph" alt=""/></div>
<map name="alapic_8h_a3af346d02eebff16886d49d3810b5358_icgraph" id="alapic_8h_a3af346d02eebff16886d49d3810b5358_icgraph">
<area shape="rect" title=" " alt="" coords="1580,552,1759,579"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="1352,5,1501,32"/>
<area shape="rect" href="avic_8c.html#affcdeac6765016e970e33d6ecff3eebb" title=" " alt="" coords="1096,97,1240,138"/>
<area shape="rect" href="avic_8c.html#a51356c24441683c197e1d4c2555da06d" title=" " alt="" coords="1351,57,1502,98"/>
<area shape="rect" href="avic_8c.html#a056e12caaf24f044fce8545a863dbbce" title=" " alt="" coords="1352,173,1501,200"/>
<area shape="rect" href="avic_8c.html#a7e341d7f17b2f611aca180217cfc6ad3" title=" " alt="" coords="1344,224,1509,251"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="836,13,1015,40"/>
<area shape="rect" href="svm_8c.html#aa3d3185c3eece1cf1e99fd5da3ca3181" title=" " alt="" coords="1383,493,1470,520"/>
<area shape="rect" href="x86_8c.html#af678df58f995d3ede687310a11ff4c2d" title=" " alt="" coords="1327,545,1526,586"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="1347,427,1506,469"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="642,384,779,411"/>
<area shape="rect" href="irq_8c.html#a82ee83566d2724a298b67f23f481976b" title=" " alt="" coords="1321,325,1532,352"/>
<area shape="rect" href="svm_8c.html#ab9e5b464a654de732fe7b0ce81145897" title=" " alt="" coords="1365,611,1488,637"/>
<area shape="rect" href="svm_8c.html#af102e65fa4a28844d0bd7bbb75bd4565" title=" " alt="" coords="1369,661,1485,688"/>
<area shape="rect" href="svm_8c.html#ac7f791888ec3548c8fa076367bbc84d9" title=" " alt="" coords="1358,712,1495,739"/>
<area shape="rect" href="vmx_8c.html#a1df1260e04dab1d1e3ed8e36a6416391" title=" " alt="" coords="1339,763,1514,789"/>
<area shape="rect" href="vmx_8c.html#a78fbf23248c0b31c0aefcd730bca7429" title=" " alt="" coords="1332,931,1521,957"/>
<area shape="rect" href="vmx_8c.html#a19fa2c2eb871655a497c1c0c73bd0553" title=" " alt="" coords="1063,981,1273,1008"/>
<area shape="rect" href="vmx_8c.html#a0670625adecaa6fc71939fdf39129e20" title=" " alt="" coords="1345,814,1508,855"/>
<area shape="rect" href="vmx_8c.html#ac2197e1b1fbae590edacaecfd1d0974c" title=" " alt="" coords="1350,1099,1503,1125"/>
<area shape="rect" href="vmx_8c.html#a64c84ac376758fe29ed11511c01d4140" title=" " alt="" coords="1329,880,1524,907"/>
<area shape="rect" href="vmx_8c.html#a60eaab2d29aa87878b8dd9b43dadb779" title=" " alt="" coords="1333,1033,1521,1074"/>
<area shape="rect" href="svm_2nested_8c.html#a4ec7e878f6af209e74dd84285ee0198f" title=" " alt="" coords="435,153,585,180"/>
<area shape="rect" href="svm_8c.html#a5d52c93beeb85ba5a99283d4eba589e1" title=" " alt="" coords="219,153,368,180"/>
<area shape="rect" href="svm_8c.html#a1eacc7b79f62ed332056217c35fe3be4" title=" " alt="" coords="5,153,152,180"/>
<area shape="rect" href="svm_8c.html#a72a80d54451776cc2794da8564a424fa" title=" " alt="" coords="1104,609,1232,636"/>
<area shape="rect" href="x86_8c.html#a3fb30b274c16da62a7a701c26216d8bf" title=" " alt="" coords="1081,660,1255,687"/>
<area shape="rect" href="irq_8h.html#accb9eec870235e61feeef31a7c0a6084" title=" " alt="" coords="1089,427,1247,469"/>
<area shape="rect" href="lapic_8c.html#a2400290b895608d302ecce4ee352ee25" title=" " alt="" coords="1080,559,1256,585"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="1081,493,1255,534"/>
<area shape="rect" href="irq_8c.html#aa78a0c6512b9fd6015a43326c651fbfb" title=" " alt="" coords="839,435,1011,461"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="469,384,551,411"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="200,384,387,411"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="848,602,1003,643"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="652,525,769,552"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="633,602,788,643"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="852,500,999,527"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="840,318,1011,359"/>
<area shape="rect" href="svm_8c.html#a5c26f1ceaa6cc778d986bd33629dc539" title=" " alt="" coords="1117,235,1219,261"/>
<area shape="rect" href="svm_8c.html#a4a2beb03d1ef1d9e803c22570b5806d1" title=" " alt="" coords="860,64,991,91"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="633,216,788,243"/>
<area shape="rect" href="svm_8c.html#a0a2c47b46c5f4c14c1ae6a64119bcb60" title=" " alt="" coords="860,115,991,141"/>
<area shape="rect" href="svm_8c.html#a5df90c8772700a60441f2ba19472f726" title=" " alt="" coords="870,267,981,293"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="841,165,1009,192"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="1110,712,1226,739"/>
<area shape="rect" href="vmx_8c.html#ad9c0f9053e0fe647a367166a4b6a0c6f" title=" " alt="" coords="1125,880,1211,907"/>
<area shape="rect" href="vmx_8c.html#abd63cf398d1b18c9be4e9c4eae17c64c" title=" " alt="" coords="854,880,997,907"/>
<area shape="rect" href="vmx_8c.html#a8ff77baa2f28fd717210bcac02a13434" title=" " alt="" coords="1091,814,1245,855"/>
<area shape="rect" href="vmx_8c.html#a3f6e91eedb4d7eefd8f4007389aaac7b" title=" " alt="" coords="1065,1040,1271,1067"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="848,1040,1003,1067"/>
</map>
</div>

</div>
</div>
<a id="ac9fecb7d9f4574931650af9abb4b9f4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9fecb7d9f4574931650af9abb4b9f4c">&#9670;&nbsp;</a></span>kvm_vector_to_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_vector_to_index </td>
          <td>(</td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>vector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>dest_vcpus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned long *&#160;</td>
          <td class="paramname"><em>bitmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>bitmap_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01092">1092</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;{</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    u32 mod;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="keywordtype">int</span> i, idx = -1;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    mod = vector % dest_vcpus;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160; </div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt;= mod; i++) {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        idx = find_next_bit(bitmap, bitmap_size, idx + 1);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        BUG_ON(idx == bitmap_size);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    }</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160; </div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keywordflow">return</span> idx;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_ac9fecb7d9f4574931650af9abb4b9f4c_icgraph.png" border="0" usemap="#alapic_8h_ac9fecb7d9f4574931650af9abb4b9f4c_icgraph" alt=""/></div>
<map name="alapic_8h_ac9fecb7d9f4574931650af9abb4b9f4c_icgraph" id="alapic_8h_ac9fecb7d9f4574931650af9abb4b9f4c_icgraph">
<area shape="rect" title=" " alt="" coords="2064,516,2227,543"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="1832,538,2016,579"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1388,455,1577,481"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="1625,506,1784,547"/>
<area shape="rect" href="lapic_8c.html#a8620b1c89f8cf017f7827024fc95ac92" title=" " alt="" coords="1633,571,1777,613"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="1627,658,1782,699"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="919,107,1077,133"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="676,81,823,108"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="1391,579,1574,605"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="1179,627,1311,653"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="1169,576,1320,603"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="923,639,1073,665"/>
<area shape="rect" href="irq__comm_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="897,795,1099,821"/>
<area shape="rect" href="xen_8c.html#a7ba53f4f869b74569192380f1adfd40c" title=" " alt="" coords="1401,678,1564,719"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="1187,208,1302,235"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="1171,460,1318,487"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="1164,521,1325,548"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1190,385,1299,412"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="1191,56,1298,83"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="942,259,1054,285"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="895,157,1101,184"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="895,208,1101,235"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="668,233,831,260"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="675,284,823,311"/>
<area shape="rect" href="ioapic_8c.html#a477f1b98bf8d9dfcd1e51c743d79ac47" title=" " alt="" coords="453,233,577,260"/>
<area shape="rect" href="irq__comm_8c.html#ae12bd4085acdb92be18af95ac983d5a5" title=" " alt="" coords="441,284,589,311"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="205,309,377,336"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="5,309,157,336"/>
<area shape="rect" href="ioapic_8c.html#a21c528e901ef596bba3f882ed5ac9597" title=" " alt="" coords="687,132,812,159"/>
<area shape="rect" href="x86_8c.html#a10224987f77e7370dd9f2b80352544ab" title=" " alt="" coords="440,132,589,159"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="661,183,837,209"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="433,183,596,209"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="439,429,591,470"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="919,487,1077,513"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="916,537,1080,564"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="682,436,817,463"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="652,537,847,564"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="669,588,830,615"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="678,487,821,513"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="425,537,604,564"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="672,639,827,681"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="909,588,1087,615"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="901,385,1095,412"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="915,56,1081,83"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="927,5,1069,32"/>
<area shape="rect" href="hyperv_8c.html#a3bfbf343eefc11963b210ba8322f6826" title=" " alt="" coords="681,5,818,32"/>
<area shape="rect" href="xen_8c.html#a0fb0356e88890003922daf35627420a8" title=" " alt="" coords="1153,678,1336,719"/>
<area shape="rect" href="xen_8c.html#a48738df3c98025631e2412d90758136c" title=" " alt="" coords="1149,744,1340,771"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="957,689,1039,716"/>
<area shape="rect" href="xen_8c.html#a59091fb436633f85ba3e28187f5794d0" title=" " alt="" coords="919,744,1077,771"/>
</map>
</div>

</div>
</div>
<a id="a94273a31a16c3d074d5722f22474bcbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94273a31a16c3d074d5722f22474bcbb">&#9670;&nbsp;</a></span>kvm_wait_lapic_expire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_wait_lapic_expire </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01869">1869</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;{</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(vcpu) &amp;&amp;</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;        vcpu-&gt;arch.apic-&gt;lapic_timer.expired_tscdeadline &amp;&amp;</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        vcpu-&gt;arch.apic-&gt;lapic_timer.timer_advance_ns &amp;&amp;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        <a class="code" href="lapic_8c.html#a4d28368a44947389f8a7afec1c3288d3">lapic_timer_int_injected</a>(vcpu))</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        <a class="code" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367">__kvm_wait_lapic_expire</a>(vcpu);</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a4d28368a44947389f8a7afec1c3288d3"><div class="ttname"><a href="lapic_8c.html#a4d28368a44947389f8a7afec1c3288d3">lapic_timer_int_injected</a></div><div class="ttdeci">static bool lapic_timer_int_injected(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01777">lapic.c:1777</a></div></div>
<div class="ttc" id="alapic_8c_html_aad64663521c2c2f523dce26a339df367"><div class="ttname"><a href="lapic_8c.html#aad64663521c2c2f523dce26a339df367">__kvm_wait_lapic_expire</a></div><div class="ttdeci">static void __kvm_wait_lapic_expire(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01844">lapic.c:1844</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a94273a31a16c3d074d5722f22474bcbb_cgraph.png" border="0" usemap="#alapic_8h_a94273a31a16c3d074d5722f22474bcbb_cgraph" alt=""/></div>
<map name="alapic_8h_a94273a31a16c3d074d5722f22474bcbb_cgraph" id="alapic_8h_a94273a31a16c3d074d5722f22474bcbb_cgraph">
<area shape="rect" title=" " alt="" coords="5,132,177,159"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="225,73,412,100"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="259,132,378,159"/>
<area shape="rect" href="lapic_8c.html#a4d28368a44947389f8a7afec1c3288d3" title=" " alt="" coords="229,199,408,225"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="470,5,621,32"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="474,57,617,98"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="479,123,611,149"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="698,5,818,32"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="699,123,817,149"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="885,123,981,149"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="481,173,610,200"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="460,224,631,251"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="473,275,618,301"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="679,275,837,301"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a94273a31a16c3d074d5722f22474bcbb_icgraph.png" border="0" usemap="#alapic_8h_a94273a31a16c3d074d5722f22474bcbb_icgraph" alt=""/></div>
<map name="alapic_8h_a94273a31a16c3d074d5722f22474bcbb_icgraph" id="alapic_8h_a94273a31a16c3d074d5722f22474bcbb_icgraph">
<area shape="rect" title=" " alt="" coords="171,31,343,57"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="6,5,122,32"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="5,56,123,83"/>
</map>
</div>

</div>
</div>
<a id="adf2487dc76dace6e577b637cc357998b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf2487dc76dace6e577b637cc357998b">&#9670;&nbsp;</a></span>kvm_x2apic_icr_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_x2apic_icr_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03155">3155</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;{</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;    data &amp;= ~APIC_ICR_BUSY;</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160; </div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;    <a class="code" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728">kvm_apic_send_ipi</a>(apic, (u32)data, (u32)(data &gt;&gt; 32));</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;    <a class="code" href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2">kvm_lapic_set_reg64</a>(apic, APIC_ICR, data);</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;    <a class="code" href="trace_8h.html#a4be08c4209b1f0ad26b6f2180d143090">trace_kvm_apic_write</a>(APIC_ICR, data);</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a4b7f12cb3ba68245df79bc30d938b728"><div class="ttname"><a href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728">kvm_apic_send_ipi</a></div><div class="ttdeci">void kvm_apic_send_ipi(struct kvm_lapic *apic, u32 icr_low, u32 icr_high)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01504">lapic.c:1504</a></div></div>
<div class="ttc" id="atrace_8h_html_a4be08c4209b1f0ad26b6f2180d143090"><div class="ttname"><a href="trace_8h.html#a4be08c4209b1f0ad26b6f2180d143090">trace_kvm_apic_write</a></div><div class="ttdeci">#define trace_kvm_apic_write(reg, val)</div><div class="ttdef"><b>Definition:</b> <a href="trace_8h_source.html#l00281">trace.h:281</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_adf2487dc76dace6e577b637cc357998b_cgraph.png" border="0" usemap="#alapic_8h_adf2487dc76dace6e577b637cc357998b_cgraph" alt=""/></div>
<map name="alapic_8h_adf2487dc76dace6e577b637cc357998b_cgraph" id="alapic_8h_adf2487dc76dace6e577b637cc357998b_cgraph">
<area shape="rect" title=" " alt="" coords="5,636,169,663"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="224,611,371,638"/>
<area shape="rect" href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2" title=" " alt="" coords="217,662,377,688"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="1457,187,1599,214"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="425,611,615,638"/>
<area shape="rect" href="lapic_8c.html#a47d52843df792ef8e7bffdfb66a3b40b" title=" " alt="" coords="1184,415,1365,442"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="663,231,831,258"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="676,1038,817,1064"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="926,919,1062,946"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1683,940,1853,967"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="669,853,824,894"/>
<area shape="rect" href="lapic_8h.html#adfbea71ac96b210fb91bef47c77194f1" title=" " alt="" coords="1178,466,1371,492"/>
<area shape="rect" href="x86_8c.html#a47d88660a2a5f8ee22df1253604d1ed7" title=" " alt="" coords="1196,517,1353,558"/>
<area shape="rect" href="lapic_8c.html#ac9fecb7d9f4574931650af9abb4b9f4c" title=" " alt="" coords="1193,751,1356,778"/>
<area shape="rect" href="lapic_8c.html#a870119cb74033f360164df90029af75a" title=" " alt="" coords="885,136,1103,163"/>
<area shape="rect" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6" title=" " alt="" coords="879,263,1109,290"/>
<area shape="rect" href="lapic_8c.html#a8fb87d02d911e49b5793e391702afe7e" title=" " alt="" coords="933,199,1055,226"/>
<area shape="rect" href="lapic_8c.html#a98bde25094c754b30e796357ba643ab0" title=" " alt="" coords="1197,212,1353,239"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1202,60,1347,87"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1449,60,1607,87"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="1215,314,1335,340"/>
<area shape="rect" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096" title=" " alt="" coords="1219,364,1331,391"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1683,1131,1853,1158"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="935,1038,1053,1064"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1206,936,1343,963"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1474,1106,1582,1132"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1463,852,1593,879"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1465,903,1591,930"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1465,954,1591,980"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1440,1004,1616,1031"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1446,1055,1610,1082"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1467,751,1589,778"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1664,726,1872,752"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1691,776,1845,803"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="902,602,1086,644"/>
<area shape="rect" href="lapic_8c.html#a079d589509607a9d9baa6bed3eae7fa6" title=" " alt="" coords="1182,634,1367,676"/>
<area shape="rect" href="lapic_8c.html#abbce6da431ef5f15d85b5fc741d3ef72" title=" " alt="" coords="1170,583,1379,610"/>
<area shape="rect" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3" title=" " alt="" coords="1157,700,1392,727"/>
<area shape="rect" href="lapic_8c.html#a39839decdbbb9e8a6718f3ac7c0b3707" title=" " alt="" coords="433,662,607,688"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_adf2487dc76dace6e577b637cc357998b_icgraph.png" border="0" usemap="#alapic_8h_adf2487dc76dace6e577b637cc357998b_icgraph" alt=""/></div>
<map name="alapic_8h_adf2487dc76dace6e577b637cc357998b_icgraph" id="alapic_8h_adf2487dc76dace6e577b637cc357998b_icgraph">
<area shape="rect" title=" " alt="" coords="1365,155,1529,181"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="1143,57,1297,98"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1123,155,1317,181"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1139,256,1301,283"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="903,23,1058,65"/>
<area shape="rect" href="svm_8c.html#a82c8447e70f06dd52623c696446104b5" title=" " alt="" coords="632,5,839,32"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="632,56,839,83"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="427,5,543,32"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="427,56,544,83"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="905,89,1057,130"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="891,155,1070,181"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="911,205,1051,232"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="656,147,815,189"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="887,256,1075,283"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="399,307,572,333"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="669,256,802,283"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,256,584,283"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,281,339,308"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,231,101,257"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,281,115,308"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,332,116,359"/>
</map>
</div>

</div>
</div>
<a id="a179cfc2268db31f40b5bd9b1c247a37b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a179cfc2268db31f40b5bd9b1c247a37b">&#9670;&nbsp;</a></span>kvm_x2apic_msr_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_x2apic_msr_read </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>msr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64 *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03210">3210</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;{</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;    u32 reg = (msr - APIC_BASE_MSR) &lt;&lt; 4;</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160; </div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>) || !<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic))</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160; </div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da">kvm_lapic_msr_read</a>(apic, reg, data);</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a179cfc2268db31f40b5bd9b1c247a37b_cgraph.png" border="0" usemap="#alapic_8h_a179cfc2268db31f40b5bd9b1c247a37b_cgraph" alt=""/></div>
<map name="alapic_8h_a179cfc2268db31f40b5bd9b1c247a37b_cgraph" id="alapic_8h_a179cfc2268db31f40b5bd9b1c247a37b_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,175,108"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="881,5,1024,32"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="223,81,380,108"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="242,132,361,159"/>
<area shape="rect" href="lapic_8c.html#a378a0961283ea67791303e70114fb10d" title=" " alt="" coords="428,161,589,188"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="432,81,585,108"/>
<area shape="rect" href="lapic_8c.html#aa06cb4ebbfa40dbfa494b3b4cd9f8833" title=" " alt="" coords="637,208,812,235"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="675,157,774,184"/>
<area shape="rect" href="lapic_8c.html#a4b4d880305f2ddba0ac9fdb398a7611a" title=" " alt="" coords="648,74,801,115"/>
<area shape="rect" href="lapic_8c.html#a5bf640da1dfc1be09d89fb23c7f2e954" title=" " alt="" coords="1108,259,1229,285"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1297,259,1443,285"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="873,107,1033,133"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="888,317,1017,344"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="884,157,1021,184"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1504,259,1663,285"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="1097,376,1240,403"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="1097,310,1240,351"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="1504,419,1663,445"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1298,368,1442,395"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1741,368,1890,395"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1504,368,1663,395"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="1292,317,1448,344"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="1523,317,1643,344"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="1093,157,1244,184"/>
<area shape="rect" href="kvm__cache__regs_8h.html#ad97ff6b975b461b815e6749d29c65446" title=" " alt="" coords="1315,157,1425,184"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a5d9eb0563cffb1e3ed1cccebabcf2df6" title=" " alt="" coords="1496,157,1671,184"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="1719,157,1912,184"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="860,56,1045,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a179cfc2268db31f40b5bd9b1c247a37b_icgraph.png" border="0" usemap="#alapic_8h_a179cfc2268db31f40b5bd9b1c247a37b_icgraph" alt=""/></div>
<map name="alapic_8h_a179cfc2268db31f40b5bd9b1c247a37b_icgraph" id="alapic_8h_a179cfc2268db31f40b5bd9b1c247a37b_icgraph">
<area shape="rect" title=" " alt="" coords="387,31,556,57"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="164,31,339,57"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="5,5,116,32"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="5,56,116,83"/>
</map>
</div>

</div>
</div>
<a id="a7d2f3f34c12c8c724fe739cbbc44ad43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d2f3f34c12c8c724fe739cbbc44ad43">&#9670;&nbsp;</a></span>kvm_x2apic_msr_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_x2apic_msr_write </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>msr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03199">3199</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;{</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;    u32 reg = (msr - APIC_BASE_MSR) &lt;&lt; 4;</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160; </div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>) || !<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic))</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160; </div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079">kvm_lapic_msr_write</a>(apic, reg, data);</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a7d2f3f34c12c8c724fe739cbbc44ad43_cgraph.png" border="0" usemap="#alapic_8h_a7d2f3f34c12c8c724fe739cbbc44ad43_cgraph" alt=""/></div>
<map name="alapic_8h_a7d2f3f34c12c8c724fe739cbbc44ad43_cgraph" id="alapic_8h_a7d2f3f34c12c8c724fe739cbbc44ad43_cgraph">
<area shape="rect" title=" " alt="" coords="5,1456,179,1483"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="1184,1203,1327,1229"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="227,1456,388,1483"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1408,1481,1527,1508"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="439,756,597,783"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="436,1456,600,1483"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="935,579,1095,605"/>
<area shape="rect" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1" title=" " alt="" coords="648,56,859,83"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="702,309,805,336"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="698,731,809,757"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="943,781,1087,808"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="703,579,804,605"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="688,629,819,656"/>
<area shape="rect" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2" title=" " alt="" coords="945,680,1085,707"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1183,411,1328,437"/>
<area shape="rect" href="lapic_8c.html#aec07f4595f82e14e1075beb4730b6976" title=" " alt="" coords="698,933,809,960"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="680,1355,827,1381"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1171,1304,1340,1331"/>
<area shape="rect" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4" title=" " alt="" coords="685,984,822,1011"/>
<area shape="rect" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554" title=" " alt="" coords="685,781,821,808"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="667,883,840,909"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="661,1085,846,1112"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="653,1035,853,1061"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="685,1253,822,1280"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="683,157,824,184"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="689,208,817,235"/>
<area shape="rect" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3" title=" " alt="" coords="675,259,832,285"/>
<area shape="rect" href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4" title=" " alt="" coords="660,477,847,504"/>
<area shape="rect" href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c" title=" " alt="" coords="940,5,1089,32"/>
<area shape="rect" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843" title=" " alt="" coords="959,107,1070,133"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="1176,132,1335,159"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="950,461,1079,488"/>
<area shape="rect" href="hyperv_8h.html#a7ffceaf3950bd76a9a3a28ff1e836e58" title=" " alt="" coords="918,208,1111,235"/>
<area shape="rect" href="hyperv_8c.html#a47f5a157cae898f7a7b370854c3748a4" title=" " alt="" coords="925,259,1105,285"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="933,309,1096,336"/>
<area shape="rect" href="xen_8h.html#ae436f94d060f3cb8029695c5a9fddc42" title=" " alt="" coords="917,731,1112,757"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1176,781,1335,808"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="938,513,1091,554"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="1191,680,1320,707"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1388,411,1547,437"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="920,1456,1109,1483"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="1185,1456,1326,1483"/>
<area shape="rect" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39" title=" " alt="" coords="949,933,1081,960"/>
<area shape="rect" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44" title=" " alt="" coords="937,984,1092,1011"/>
<area shape="rect" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d" title=" " alt="" coords="926,1035,1103,1077"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="907,1101,1123,1128"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="1195,883,1315,909"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="913,883,1117,909"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="939,1253,1090,1280"/>
<area shape="rect" href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2" title=" " alt="" coords="673,1456,833,1483"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a7d2f3f34c12c8c724fe739cbbc44ad43_icgraph.png" border="0" usemap="#alapic_8h_a7d2f3f34c12c8c724fe739cbbc44ad43_icgraph" alt=""/></div>
<map name="alapic_8h_a7d2f3f34c12c8c724fe739cbbc44ad43_icgraph" id="alapic_8h_a7d2f3f34c12c8c724fe739cbbc44ad43_icgraph">
<area shape="rect" title=" " alt="" coords="387,56,560,83"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,56,339,83"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,5,101,32"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,56,115,83"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,107,116,133"/>
</map>
</div>

</div>
</div>
<a id="a4f07303d20a06eeb408d4985c5e15096"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f07303d20a06eeb408d4985c5e15096">&#9670;&nbsp;</a></span>kvm_xapic_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u8 kvm_xapic_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00276">276</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;{</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_ID) &gt;&gt; 24;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8h_a4f07303d20a06eeb408d4985c5e15096_icgraph.png" border="0" usemap="#alapic_8h_a4f07303d20a06eeb408d4985c5e15096_icgraph" alt=""/></div>
<map name="alapic_8h_a4f07303d20a06eeb408d4985c5e15096_icgraph" id="alapic_8h_a4f07303d20a06eeb408d4985c5e15096_icgraph">
<area shape="rect" title=" " alt="" coords="1884,375,1996,402"/>
<area shape="rect" href="avic_8c.html#a6a9ffca6bae1adce86d4495b5caaae2e" title=" " alt="" coords="1633,71,1809,98"/>
<area shape="rect" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6" title=" " alt="" coords="1605,375,1836,402"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="1619,594,1823,621"/>
<area shape="rect" href="avic_8c.html#ae9f162404fdb37bba372d0c9cdc043ee" title=" " alt="" coords="1390,5,1557,47"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="212,278,391,305"/>
<area shape="rect" href="avic_8c.html#a51356c24441683c197e1d4c2555da06d" title=" " alt="" coords="1171,5,1322,47"/>
<area shape="rect" href="avic_8c.html#affcdeac6765016e970e33d6ecff3eebb" title=" " alt="" coords="932,5,1076,47"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="5,271,164,312"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="1389,375,1557,402"/>
<area shape="rect" href="ioapic_8c.html#aca4e6c938829fb401b5c01cba3bd19b2" title=" " alt="" coords="1165,511,1329,552"/>
<area shape="rect" href="avic_8c.html#ad9345a779111a59de8fa4110106c3adf" title=" " alt="" coords="681,711,856,738"/>
<area shape="rect" href="ioapic_8c.html#a3ec3324d9c7d9168d100c79fc7c19b33" title=" " alt="" coords="1159,283,1334,310"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="1167,408,1326,449"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="1155,762,1338,789"/>
<area shape="rect" href="ioapic_8c.html#acaaa84ad163291aa716c59fa3bec3715" title=" " alt="" coords="1159,210,1334,237"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1152,346,1341,373"/>
<area shape="rect" href="ioapic_8h.html#a049de3e03383dab21c2cb6c3033e66ae" title=" " alt="" coords="1155,147,1338,174"/>
<area shape="rect" href="ioapic_8c.html#a6a7d0d8b3a3717172c57ed1916318952" title=" " alt="" coords="923,477,1085,519"/>
<area shape="rect" href="ioapic_8c.html#a6c0258d75d3c40d5674a574997bdd453" title=" " alt="" coords="923,645,1085,687"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="455,311,617,338"/>
<area shape="rect" href="ioapic_8c.html#a1d24315dec2401b4c45b224469c7379d" title=" " alt="" coords="696,452,841,493"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="693,762,845,789"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="461,780,611,821"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="225,519,377,560"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="713,286,825,313"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="462,261,610,287"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="690,350,847,377"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="463,362,609,389"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="938,762,1070,789"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="929,813,1079,839"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="694,813,843,839"/>
<area shape="rect" href="x86_8c.html#a8aac590d2b896fcad86c5a2971164c1c" title=" " alt="" coords="936,122,1072,149"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="700,122,837,149"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="947,325,1061,351"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="931,594,1077,621"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="923,375,1085,402"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="949,223,1059,250"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="951,274,1057,301"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="690,611,847,638"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="469,678,603,705"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="439,526,633,553"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="455,577,617,603"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="465,627,607,654"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="904,863,1104,890"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="704,939,833,966"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="693,863,844,890"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="471,947,601,974"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="455,846,617,873"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="449,897,623,923"/>
</map>
</div>

</div>
</div>
<a id="a1d8c9378fcbf62390a89dc3b7f0bdbd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d8c9378fcbf62390a89dc3b7f0bdbd4">&#9670;&nbsp;</a></span>lapic_in_kernel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool lapic_in_kernel </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8h_source.html#l00186">186</a> of file <a class="el" href="lapic_8h_source.html">lapic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;{</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span> (static_branch_unlikely(&amp;kvm_has_noapic_vcpu))</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">return</span> vcpu-&gt;arch.apic;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a65788ee3d09ea041368cd93b3391f3c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65788ee3d09ea041368cd93b3391f3c4">&#9670;&nbsp;</a></span>apic_hw_disabled</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct static_key_false_deferred apic_hw_disabled</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3c2a1bc1bb244452f5338719ef4e73c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c2a1bc1bb244452f5338719ef4e73c8">&#9670;&nbsp;</a></span>apic_sw_disabled</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct static_key_false_deferred apic_sw_disabled</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
