<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KVM: include/kvm/arm_arch_timer.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KVM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_58f50ad22074a1980bc3b7d56b15b27e.html">kvm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">arm_arch_timer.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/clocksource.h&gt;</code><br />
<code>#include &lt;linux/hrtimer.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for arm_arch_timer.h:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h__incl.png" border="0" usemap="#ainclude_2kvm_2arm__arch__timer_8h" alt=""/></div>
<map name="ainclude_2kvm_2arm__arch__timer_8h" id="ainclude_2kvm_2arm__arch__timer_8h">
<area shape="rect" title=" " alt="" coords="73,5,239,47"/>
<area shape="rect" title=" " alt="" coords="5,95,152,121"/>
<area shape="rect" title=" " alt="" coords="176,95,293,121"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h__dep__incl.png" border="0" usemap="#ainclude_2kvm_2arm__arch__timer_8hdep" alt=""/></div>
<map name="ainclude_2kvm_2arm__arch__timer_8hdep" id="ainclude_2kvm_2arm__arch__timer_8hdep">
<area shape="rect" title=" " alt="" coords="295,5,461,47"/>
<area shape="rect" href="arch__timer_8c.html" title=" " alt="" coords="5,259,167,300"/>
<area shape="rect" href="reset_8c.html" title=" " alt="" coords="192,102,369,129"/>
<area shape="rect" href="trace__arm_8h.html" title=" " alt="" coords="393,95,560,136"/>
<area shape="rect" href="vgic-mmio_8c.html" title=" " alt="" coords="585,95,745,136"/>
<area shape="rect" href="arm_8c.html" title=" " alt="" coords="391,184,562,211"/>
<area shape="rect" href="trace_8h.html" title=" " alt="" coords="597,184,775,211"/>
<area shape="rect" href="debug_8c.html" title=" " alt="" coords="191,266,375,293"/>
<area shape="rect" href="guest_8c.html" title=" " alt="" coords="400,266,580,293"/>
<area shape="rect" href="emulate-nested_8c.html" title=" " alt="" coords="605,259,791,300"/>
<area shape="rect" href="mmio_8c.html" title=" " alt="" coords="816,266,999,293"/>
<area shape="rect" href="mmu_8c.html" title=" " alt="" coords="1023,266,1202,293"/>
<area shape="rect" href="sys__regs_8c.html" title=" " alt="" coords="1226,259,1381,300"/>
</map>
</div>
</div>
<p><a href="arm__arch__timer_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structarch__timer__offset.html">arch_timer_offset</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structarch__timer__vm__data.html">arch_timer_vm_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structarch__timer__context.html">arch_timer_context</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtimer__map.html">timer_map</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structarch__timer__cpu.html">arch_timer_cpu</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0a8e9eb158c9a2fbc985fc1f47057b00"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a0a8e9eb158c9a2fbc985fc1f47057b00">vcpu_timer</a>(v)&#160;&#160;&#160;(&amp;(v)-&gt;arch.timer_cpu)</td></tr>
<tr class="separator:a0a8e9eb158c9a2fbc985fc1f47057b00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8605bb196d5ea061e4acefd2b78046d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#ac8605bb196d5ea061e4acefd2b78046d">vcpu_get_timer</a>(v,  t)&#160;&#160;&#160;(&amp;<a class="el" href="arm__arch__timer_8h.html#a0a8e9eb158c9a2fbc985fc1f47057b00">vcpu_timer</a>(v)-&gt;timers[(t)])</td></tr>
<tr class="separator:ac8605bb196d5ea061e4acefd2b78046d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0234ea189669eb84d8263946a9d60d6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#ac0234ea189669eb84d8263946a9d60d6">vcpu_vtimer</a>(v)&#160;&#160;&#160;(&amp;(v)-&gt;arch.timer_cpu.timers[<a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa722734e604137bcd9ea40179b51b2b3c">TIMER_VTIMER</a>])</td></tr>
<tr class="separator:ac0234ea189669eb84d8263946a9d60d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d166b83ceabb05615e40bf0c219cfbc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a4d166b83ceabb05615e40bf0c219cfbc">vcpu_ptimer</a>(v)&#160;&#160;&#160;(&amp;(v)-&gt;arch.timer_cpu.timers[<a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa7463dc5411bf81d52f397ef53551b852">TIMER_PTIMER</a>])</td></tr>
<tr class="separator:a4d166b83ceabb05615e40bf0c219cfbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa36c0380609fa4a76a912afb410024f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#aaa36c0380609fa4a76a912afb410024f">vcpu_hvtimer</a>(v)&#160;&#160;&#160;(&amp;(v)-&gt;arch.timer_cpu.timers[<a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fae3e7d392ed408811b306ebe2edef5b46">TIMER_HVTIMER</a>])</td></tr>
<tr class="separator:aaa36c0380609fa4a76a912afb410024f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5e47541b2bf1738cf450e0b5e00b5eb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#ad5e47541b2bf1738cf450e0b5e00b5eb">vcpu_hptimer</a>(v)&#160;&#160;&#160;(&amp;(v)-&gt;arch.timer_cpu.timers[<a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa4e750a70fd24097ddad55ea2b01a75b7">TIMER_HPTIMER</a>])</td></tr>
<tr class="separator:ad5e47541b2bf1738cf450e0b5e00b5eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab00b3cec76a84a6026b16444312632c4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#ab00b3cec76a84a6026b16444312632c4">arch_timer_ctx_index</a>(ctx)&#160;&#160;&#160;((ctx) - <a class="el" href="arm__arch__timer_8h.html#a0a8e9eb158c9a2fbc985fc1f47057b00">vcpu_timer</a>((ctx)-&gt;vcpu)-&gt;timers)</td></tr>
<tr class="separator:ab00b3cec76a84a6026b16444312632c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af04cfbd4351c9e5914b0addbd1d6caf3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#af04cfbd4351c9e5914b0addbd1d6caf3">timer_vm_data</a>(ctx)&#160;&#160;&#160;(&amp;(ctx)-&gt;vcpu-&gt;kvm-&gt;arch.timer_data)</td></tr>
<tr class="separator:af04cfbd4351c9e5914b0addbd1d6caf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3a36366dd2b9635e5973158fa6414c7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#af3a36366dd2b9635e5973158fa6414c7">timer_irq</a>(ctx)&#160;&#160;&#160;(<a class="el" href="arm__arch__timer_8h.html#af04cfbd4351c9e5914b0addbd1d6caf3">timer_vm_data</a>(ctx)-&gt;ppi[<a class="el" href="arm__arch__timer_8h.html#ab00b3cec76a84a6026b16444312632c4">arch_timer_ctx_index</a>(ctx)])</td></tr>
<tr class="separator:af3a36366dd2b9635e5973158fa6414c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a45e32a5c828e24615921bc1b8fe5d31f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31f">kvm_arch_timers</a> { <br />
&#160;&#160;<a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa7463dc5411bf81d52f397ef53551b852">TIMER_PTIMER</a>
, <a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa722734e604137bcd9ea40179b51b2b3c">TIMER_VTIMER</a>
, <a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa294f3cfe8920d826df5eef9719c1cdf7">NR_KVM_EL0_TIMERS</a>
, <a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fae3e7d392ed408811b306ebe2edef5b46">TIMER_HVTIMER</a> = NR_KVM_EL0_TIMERS
, <br />
&#160;&#160;<a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa4e750a70fd24097ddad55ea2b01a75b7">TIMER_HPTIMER</a>
, <a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa1cdb8b31cc17507227832f027c267e1d">NR_KVM_TIMERS</a>
<br />
 }</td></tr>
<tr class="separator:a45e32a5c828e24615921bc1b8fe5d31f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2af7bc65f7a3380f7bd930614dd1876"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876">kvm_arch_timer_regs</a> { <br />
&#160;&#160;<a class="el" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876ae7d273d51748bdb350680fab17039aed">TIMER_REG_CNT</a>
, <a class="el" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876af4a421c472caa2b4130082881694fe55">TIMER_REG_CVAL</a>
, <a class="el" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876a281f876deda17f10a9dbad780faf7dbb">TIMER_REG_TVAL</a>
, <a class="el" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876a225e0f5c3e8379a2610f2271feb0931a">TIMER_REG_CTL</a>
, <br />
&#160;&#160;<a class="el" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876a077b7f592a320c3d69981cf45f0ee094">TIMER_REG_VOFF</a>
<br />
 }</td></tr>
<tr class="separator:ab2af7bc65f7a3380f7bd930614dd1876"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad7e756ea5077e85e2a10bfe35543ce21"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#ad7e756ea5077e85e2a10bfe35543ce21">get_timer_map</a> (struct kvm_vcpu *vcpu, struct <a class="el" href="structtimer__map.html">timer_map</a> *map)</td></tr>
<tr class="separator:ad7e756ea5077e85e2a10bfe35543ce21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27c9feb35e6d7126c054c3325fea59b0"><td class="memItemLeft" align="right" valign="top">int __init&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a27c9feb35e6d7126c054c3325fea59b0">kvm_timer_hyp_init</a> (bool has_gic)</td></tr>
<tr class="separator:a27c9feb35e6d7126c054c3325fea59b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eb7255c40d5b43938e99918b3d9d06a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a6eb7255c40d5b43938e99918b3d9d06a">kvm_timer_enable</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a6eb7255c40d5b43938e99918b3d9d06a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11b9b6e6338bbec6085332661c934e91"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a11b9b6e6338bbec6085332661c934e91">kvm_timer_vcpu_reset</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a11b9b6e6338bbec6085332661c934e91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7dc50f59c235841d864ef598f814247"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#ab7dc50f59c235841d864ef598f814247">kvm_timer_vcpu_init</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ab7dc50f59c235841d864ef598f814247"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ae73bff466fcdc60319f9726d53b571"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a6ae73bff466fcdc60319f9726d53b571">kvm_timer_sync_user</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a6ae73bff466fcdc60319f9726d53b571"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a939939efd4c7eb8c054ca12e04623358"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a939939efd4c7eb8c054ca12e04623358">kvm_timer_should_notify_user</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a939939efd4c7eb8c054ca12e04623358"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a629de40452a9be84148e3c8442a80db6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a629de40452a9be84148e3c8442a80db6">kvm_timer_update_run</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a629de40452a9be84148e3c8442a80db6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1910c992141ccc5e0753c9440f66292e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a1910c992141ccc5e0753c9440f66292e">kvm_timer_vcpu_terminate</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a1910c992141ccc5e0753c9440f66292e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b851d39d19bcc70062d97e0a24e1290"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a7b851d39d19bcc70062d97e0a24e1290">kvm_timer_init_vm</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a7b851d39d19bcc70062d97e0a24e1290"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4819f39f272366ea5a4e797c0eee9e4e"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a4819f39f272366ea5a4e797c0eee9e4e">kvm_arm_timer_get_reg</a> (struct kvm_vcpu *, u64 regid)</td></tr>
<tr class="separator:a4819f39f272366ea5a4e797c0eee9e4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfd22299b534663306382384fa337d05"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#adfd22299b534663306382384fa337d05">kvm_arm_timer_set_reg</a> (struct kvm_vcpu *, u64 regid, u64 value)</td></tr>
<tr class="separator:adfd22299b534663306382384fa337d05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a143f4cabe1f682a6cfc888d54d85a1ae"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a143f4cabe1f682a6cfc888d54d85a1ae">kvm_arm_timer_set_attr</a> (struct kvm_vcpu *vcpu, struct kvm_device_attr *attr)</td></tr>
<tr class="separator:a143f4cabe1f682a6cfc888d54d85a1ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a653a586574104ddc469f6d4048ac214b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a653a586574104ddc469f6d4048ac214b">kvm_arm_timer_get_attr</a> (struct kvm_vcpu *vcpu, struct kvm_device_attr *attr)</td></tr>
<tr class="separator:a653a586574104ddc469f6d4048ac214b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0d336ce012b8bbb60c3acc93fa7db2c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#af0d336ce012b8bbb60c3acc93fa7db2c">kvm_arm_timer_has_attr</a> (struct kvm_vcpu *vcpu, struct kvm_device_attr *attr)</td></tr>
<tr class="separator:af0d336ce012b8bbb60c3acc93fa7db2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9f7917175f1d6031a77dcbc82f9ee98"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#ac9f7917175f1d6031a77dcbc82f9ee98">kvm_phys_timer_read</a> (void)</td></tr>
<tr class="separator:ac9f7917175f1d6031a77dcbc82f9ee98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bf6ac76380146820b45b06feb3eab27"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a4bf6ac76380146820b45b06feb3eab27">kvm_timer_vcpu_load</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a4bf6ac76380146820b45b06feb3eab27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0006e1b52ff819dd99be6dca260e52d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a0006e1b52ff819dd99be6dca260e52d6">kvm_timer_vcpu_put</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a0006e1b52ff819dd99be6dca260e52d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa42ee7f3aa49455d33441110cea315fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#aa42ee7f3aa49455d33441110cea315fa">kvm_timer_init_vhe</a> (void)</td></tr>
<tr class="separator:aa42ee7f3aa49455d33441110cea315fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b6d62f10023e1b1effbf51b28d46d3c"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a4b6d62f10023e1b1effbf51b28d46d3c">kvm_arm_timer_read_sysreg</a> (struct kvm_vcpu *vcpu, enum <a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31f">kvm_arch_timers</a> tmr, enum <a class="el" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876">kvm_arch_timer_regs</a> treg)</td></tr>
<tr class="separator:a4b6d62f10023e1b1effbf51b28d46d3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0209ad4256c7a1fd5ea70b6abe030954"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a0209ad4256c7a1fd5ea70b6abe030954">kvm_arm_timer_write_sysreg</a> (struct kvm_vcpu *vcpu, enum <a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31f">kvm_arch_timers</a> tmr, enum <a class="el" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876">kvm_arch_timer_regs</a> treg, u64 val)</td></tr>
<tr class="separator:a0209ad4256c7a1fd5ea70b6abe030954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7dab91af9f69654aa27010f96125c13"><td class="memItemLeft" align="right" valign="top">u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#ad7dab91af9f69654aa27010f96125c13">timer_get_ctl</a> (struct <a class="el" href="structarch__timer__context.html">arch_timer_context</a> *ctxt)</td></tr>
<tr class="separator:ad7dab91af9f69654aa27010f96125c13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a848ba80b4ffee7a071e37abb241262cd"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a848ba80b4ffee7a071e37abb241262cd">timer_get_cval</a> (struct <a class="el" href="structarch__timer__context.html">arch_timer_context</a> *ctxt)</td></tr>
<tr class="separator:a848ba80b4ffee7a071e37abb241262cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35495530036f43da928b82e7a1ffee34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a35495530036f43da928b82e7a1ffee34">kvm_timer_cpu_up</a> (void)</td></tr>
<tr class="separator:a35495530036f43da928b82e7a1ffee34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a993c30c61801fad7f3e557bcacbc8638"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a993c30c61801fad7f3e557bcacbc8638">kvm_timer_cpu_down</a> (void)</td></tr>
<tr class="separator:a993c30c61801fad7f3e557bcacbc8638"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a656013ccf6829218e43edc9c3660c414"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arm__arch__timer_8h.html#a656013ccf6829218e43edc9c3660c414">has_cntpoff</a> (void)</td></tr>
<tr class="separator:a656013ccf6829218e43edc9c3660c414"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ab00b3cec76a84a6026b16444312632c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab00b3cec76a84a6026b16444312632c4">&#9670;&nbsp;</a></span>arch_timer_ctx_index</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define arch_timer_ctx_index</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ctx</td><td>)</td>
          <td>&#160;&#160;&#160;((ctx) - <a class="el" href="arm__arch__timer_8h.html#a0a8e9eb158c9a2fbc985fc1f47057b00">vcpu_timer</a>((ctx)-&gt;vcpu)-&gt;timers)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arm__arch__timer_8h_source.html#l00129">129</a> of file <a class="el" href="arm__arch__timer_8h_source.html">arm_arch_timer.h</a>.</p>

</div>
</div>
<a id="af3a36366dd2b9635e5973158fa6414c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3a36366dd2b9635e5973158fa6414c7">&#9670;&nbsp;</a></span>timer_irq</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define timer_irq</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ctx</td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="arm__arch__timer_8h.html#af04cfbd4351c9e5914b0addbd1d6caf3">timer_vm_data</a>(ctx)-&gt;ppi[<a class="el" href="arm__arch__timer_8h.html#ab00b3cec76a84a6026b16444312632c4">arch_timer_ctx_index</a>(ctx)])</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arm__arch__timer_8h_source.html#l00132">132</a> of file <a class="el" href="arm__arch__timer_8h_source.html">arm_arch_timer.h</a>.</p>

</div>
</div>
<a id="af04cfbd4351c9e5914b0addbd1d6caf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af04cfbd4351c9e5914b0addbd1d6caf3">&#9670;&nbsp;</a></span>timer_vm_data</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define timer_vm_data</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ctx</td><td>)</td>
          <td>&#160;&#160;&#160;(&amp;(ctx)-&gt;vcpu-&gt;kvm-&gt;arch.timer_data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arm__arch__timer_8h_source.html#l00131">131</a> of file <a class="el" href="arm__arch__timer_8h_source.html">arm_arch_timer.h</a>.</p>

</div>
</div>
<a id="ac8605bb196d5ea061e4acefd2b78046d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8605bb196d5ea061e4acefd2b78046d">&#9670;&nbsp;</a></span>vcpu_get_timer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define vcpu_get_timer</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">t&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(&amp;<a class="el" href="arm__arch__timer_8h.html#a0a8e9eb158c9a2fbc985fc1f47057b00">vcpu_timer</a>(v)-&gt;timers[(t)])</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arm__arch__timer_8h_source.html#l00123">123</a> of file <a class="el" href="arm__arch__timer_8h_source.html">arm_arch_timer.h</a>.</p>

</div>
</div>
<a id="ad5e47541b2bf1738cf450e0b5e00b5eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5e47541b2bf1738cf450e0b5e00b5eb">&#9670;&nbsp;</a></span>vcpu_hptimer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define vcpu_hptimer</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;(&amp;(v)-&gt;arch.timer_cpu.timers[<a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa4e750a70fd24097ddad55ea2b01a75b7">TIMER_HPTIMER</a>])</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arm__arch__timer_8h_source.html#l00127">127</a> of file <a class="el" href="arm__arch__timer_8h_source.html">arm_arch_timer.h</a>.</p>

</div>
</div>
<a id="aaa36c0380609fa4a76a912afb410024f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa36c0380609fa4a76a912afb410024f">&#9670;&nbsp;</a></span>vcpu_hvtimer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define vcpu_hvtimer</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;(&amp;(v)-&gt;arch.timer_cpu.timers[<a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fae3e7d392ed408811b306ebe2edef5b46">TIMER_HVTIMER</a>])</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arm__arch__timer_8h_source.html#l00126">126</a> of file <a class="el" href="arm__arch__timer_8h_source.html">arm_arch_timer.h</a>.</p>

</div>
</div>
<a id="a4d166b83ceabb05615e40bf0c219cfbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d166b83ceabb05615e40bf0c219cfbc">&#9670;&nbsp;</a></span>vcpu_ptimer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define vcpu_ptimer</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;(&amp;(v)-&gt;arch.timer_cpu.timers[<a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa7463dc5411bf81d52f397ef53551b852">TIMER_PTIMER</a>])</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arm__arch__timer_8h_source.html#l00125">125</a> of file <a class="el" href="arm__arch__timer_8h_source.html">arm_arch_timer.h</a>.</p>

</div>
</div>
<a id="a0a8e9eb158c9a2fbc985fc1f47057b00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a8e9eb158c9a2fbc985fc1f47057b00">&#9670;&nbsp;</a></span>vcpu_timer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define vcpu_timer</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;(&amp;(v)-&gt;arch.timer_cpu)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arm__arch__timer_8h_source.html#l00122">122</a> of file <a class="el" href="arm__arch__timer_8h_source.html">arm_arch_timer.h</a>.</p>

</div>
</div>
<a id="ac0234ea189669eb84d8263946a9d60d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0234ea189669eb84d8263946a9d60d6">&#9670;&nbsp;</a></span>vcpu_vtimer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define vcpu_vtimer</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;(&amp;(v)-&gt;arch.timer_cpu.timers[<a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa722734e604137bcd9ea40179b51b2b3c">TIMER_VTIMER</a>])</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arm__arch__timer_8h_source.html#l00124">124</a> of file <a class="el" href="arm__arch__timer_8h_source.html">arm_arch_timer.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ab2af7bc65f7a3380f7bd930614dd1876"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2af7bc65f7a3380f7bd930614dd1876">&#9670;&nbsp;</a></span>kvm_arch_timer_regs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876">kvm_arch_timer_regs</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ab2af7bc65f7a3380f7bd930614dd1876ae7d273d51748bdb350680fab17039aed"></a>TIMER_REG_CNT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab2af7bc65f7a3380f7bd930614dd1876af4a421c472caa2b4130082881694fe55"></a>TIMER_REG_CVAL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab2af7bc65f7a3380f7bd930614dd1876a281f876deda17f10a9dbad780faf7dbb"></a>TIMER_REG_TVAL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab2af7bc65f7a3380f7bd930614dd1876a225e0f5c3e8379a2610f2271feb0931a"></a>TIMER_REG_CTL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab2af7bc65f7a3380f7bd930614dd1876a077b7f592a320c3d69981cf45f0ee094"></a>TIMER_REG_VOFF&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="arm__arch__timer_8h_source.html#l00022">22</a> of file <a class="el" href="arm__arch__timer_8h_source.html">arm_arch_timer.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;                         {</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <a class="code" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876ae7d273d51748bdb350680fab17039aed">TIMER_REG_CNT</a>,</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <a class="code" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876af4a421c472caa2b4130082881694fe55">TIMER_REG_CVAL</a>,</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <a class="code" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876a281f876deda17f10a9dbad780faf7dbb">TIMER_REG_TVAL</a>,</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <a class="code" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876a225e0f5c3e8379a2610f2271feb0931a">TIMER_REG_CTL</a>,</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <a class="code" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876a077b7f592a320c3d69981cf45f0ee094">TIMER_REG_VOFF</a>,</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;};</div>
<div class="ttc" id="aarm__arch__timer_8h_html_ab2af7bc65f7a3380f7bd930614dd1876a077b7f592a320c3d69981cf45f0ee094"><div class="ttname"><a href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876a077b7f592a320c3d69981cf45f0ee094">TIMER_REG_VOFF</a></div><div class="ttdeci">@ TIMER_REG_VOFF</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00027">arm_arch_timer.h:27</a></div></div>
<div class="ttc" id="aarm__arch__timer_8h_html_ab2af7bc65f7a3380f7bd930614dd1876a225e0f5c3e8379a2610f2271feb0931a"><div class="ttname"><a href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876a225e0f5c3e8379a2610f2271feb0931a">TIMER_REG_CTL</a></div><div class="ttdeci">@ TIMER_REG_CTL</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00026">arm_arch_timer.h:26</a></div></div>
<div class="ttc" id="aarm__arch__timer_8h_html_ab2af7bc65f7a3380f7bd930614dd1876a281f876deda17f10a9dbad780faf7dbb"><div class="ttname"><a href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876a281f876deda17f10a9dbad780faf7dbb">TIMER_REG_TVAL</a></div><div class="ttdeci">@ TIMER_REG_TVAL</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00025">arm_arch_timer.h:25</a></div></div>
<div class="ttc" id="aarm__arch__timer_8h_html_ab2af7bc65f7a3380f7bd930614dd1876ae7d273d51748bdb350680fab17039aed"><div class="ttname"><a href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876ae7d273d51748bdb350680fab17039aed">TIMER_REG_CNT</a></div><div class="ttdeci">@ TIMER_REG_CNT</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00023">arm_arch_timer.h:23</a></div></div>
<div class="ttc" id="aarm__arch__timer_8h_html_ab2af7bc65f7a3380f7bd930614dd1876af4a421c472caa2b4130082881694fe55"><div class="ttname"><a href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876af4a421c472caa2b4130082881694fe55">TIMER_REG_CVAL</a></div><div class="ttdeci">@ TIMER_REG_CVAL</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00024">arm_arch_timer.h:24</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a45e32a5c828e24615921bc1b8fe5d31f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45e32a5c828e24615921bc1b8fe5d31f">&#9670;&nbsp;</a></span>kvm_arch_timers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31f">kvm_arch_timers</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a45e32a5c828e24615921bc1b8fe5d31fa7463dc5411bf81d52f397ef53551b852"></a>TIMER_PTIMER&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a45e32a5c828e24615921bc1b8fe5d31fa722734e604137bcd9ea40179b51b2b3c"></a>TIMER_VTIMER&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a45e32a5c828e24615921bc1b8fe5d31fa294f3cfe8920d826df5eef9719c1cdf7"></a>NR_KVM_EL0_TIMERS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a45e32a5c828e24615921bc1b8fe5d31fae3e7d392ed408811b306ebe2edef5b46"></a>TIMER_HVTIMER&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a45e32a5c828e24615921bc1b8fe5d31fa4e750a70fd24097ddad55ea2b01a75b7"></a>TIMER_HPTIMER&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a45e32a5c828e24615921bc1b8fe5d31fa1cdb8b31cc17507227832f027c267e1d"></a>NR_KVM_TIMERS&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="arm__arch__timer_8h_source.html#l00013">13</a> of file <a class="el" href="arm__arch__timer_8h_source.html">arm_arch_timer.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;                     {</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa7463dc5411bf81d52f397ef53551b852">TIMER_PTIMER</a>,</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa722734e604137bcd9ea40179b51b2b3c">TIMER_VTIMER</a>,</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa294f3cfe8920d826df5eef9719c1cdf7">NR_KVM_EL0_TIMERS</a>,</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fae3e7d392ed408811b306ebe2edef5b46">TIMER_HVTIMER</a> = <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa294f3cfe8920d826df5eef9719c1cdf7">NR_KVM_EL0_TIMERS</a>,</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa4e750a70fd24097ddad55ea2b01a75b7">TIMER_HPTIMER</a>,</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa1cdb8b31cc17507227832f027c267e1d">NR_KVM_TIMERS</a></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;};</div>
<div class="ttc" id="aarm__arch__timer_8h_html_a45e32a5c828e24615921bc1b8fe5d31fa1cdb8b31cc17507227832f027c267e1d"><div class="ttname"><a href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa1cdb8b31cc17507227832f027c267e1d">NR_KVM_TIMERS</a></div><div class="ttdeci">@ NR_KVM_TIMERS</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00020">arm_arch_timer.h:19</a></div></div>
<div class="ttc" id="aarm__arch__timer_8h_html_a45e32a5c828e24615921bc1b8fe5d31fa294f3cfe8920d826df5eef9719c1cdf7"><div class="ttname"><a href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa294f3cfe8920d826df5eef9719c1cdf7">NR_KVM_EL0_TIMERS</a></div><div class="ttdeci">@ NR_KVM_EL0_TIMERS</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00016">arm_arch_timer.h:16</a></div></div>
<div class="ttc" id="aarm__arch__timer_8h_html_a45e32a5c828e24615921bc1b8fe5d31fa4e750a70fd24097ddad55ea2b01a75b7"><div class="ttname"><a href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa4e750a70fd24097ddad55ea2b01a75b7">TIMER_HPTIMER</a></div><div class="ttdeci">@ TIMER_HPTIMER</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00018">arm_arch_timer.h:18</a></div></div>
<div class="ttc" id="aarm__arch__timer_8h_html_a45e32a5c828e24615921bc1b8fe5d31fa722734e604137bcd9ea40179b51b2b3c"><div class="ttname"><a href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa722734e604137bcd9ea40179b51b2b3c">TIMER_VTIMER</a></div><div class="ttdeci">@ TIMER_VTIMER</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00015">arm_arch_timer.h:15</a></div></div>
<div class="ttc" id="aarm__arch__timer_8h_html_a45e32a5c828e24615921bc1b8fe5d31fa7463dc5411bf81d52f397ef53551b852"><div class="ttname"><a href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa7463dc5411bf81d52f397ef53551b852">TIMER_PTIMER</a></div><div class="ttdeci">@ TIMER_PTIMER</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00014">arm_arch_timer.h:14</a></div></div>
<div class="ttc" id="aarm__arch__timer_8h_html_a45e32a5c828e24615921bc1b8fe5d31fae3e7d392ed408811b306ebe2edef5b46"><div class="ttname"><a href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fae3e7d392ed408811b306ebe2edef5b46">TIMER_HVTIMER</a></div><div class="ttdeci">@ TIMER_HVTIMER</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00017">arm_arch_timer.h:17</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad7e756ea5077e85e2a10bfe35543ce21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7e756ea5077e85e2a10bfe35543ce21">&#9670;&nbsp;</a></span>get_timer_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void get_timer_map </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtimer__map.html">timer_map</a> *&#160;</td>
          <td class="paramname"><em>map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l00178">178</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;{</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (vcpu_has_nv(vcpu)) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">if</span> (is_hyp_ctxt(vcpu)) {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            map-&gt;<a class="code" href="structtimer__map.html#a1a657a149bb10d92618fa5409a793e56">direct_vtimer</a> = <a class="code" href="arm__arch__timer_8h.html#aaa36c0380609fa4a76a912afb410024f">vcpu_hvtimer</a>(vcpu);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            map-&gt;<a class="code" href="structtimer__map.html#a1c5c90c0652f7c961e0f2ed7b658986b">direct_ptimer</a> = <a class="code" href="arm__arch__timer_8h.html#ad5e47541b2bf1738cf450e0b5e00b5eb">vcpu_hptimer</a>(vcpu);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            map-&gt;<a class="code" href="structtimer__map.html#ae411a9ed5e6336e94a819017949c3017">emul_vtimer</a> = <a class="code" href="arm__arch__timer_8h.html#ac0234ea189669eb84d8263946a9d60d6">vcpu_vtimer</a>(vcpu);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            map-&gt;<a class="code" href="structtimer__map.html#a59595aeab087b1861cf6b39c284791f1">emul_ptimer</a> = <a class="code" href="arm__arch__timer_8h.html#a4d166b83ceabb05615e40bf0c219cfbc">vcpu_ptimer</a>(vcpu);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            map-&gt;<a class="code" href="structtimer__map.html#a1a657a149bb10d92618fa5409a793e56">direct_vtimer</a> = <a class="code" href="arm__arch__timer_8h.html#ac0234ea189669eb84d8263946a9d60d6">vcpu_vtimer</a>(vcpu);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            map-&gt;<a class="code" href="structtimer__map.html#a1c5c90c0652f7c961e0f2ed7b658986b">direct_ptimer</a> = <a class="code" href="arm__arch__timer_8h.html#a4d166b83ceabb05615e40bf0c219cfbc">vcpu_ptimer</a>(vcpu);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            map-&gt;<a class="code" href="structtimer__map.html#ae411a9ed5e6336e94a819017949c3017">emul_vtimer</a> = <a class="code" href="arm__arch__timer_8h.html#aaa36c0380609fa4a76a912afb410024f">vcpu_hvtimer</a>(vcpu);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            map-&gt;<a class="code" href="structtimer__map.html#a59595aeab087b1861cf6b39c284791f1">emul_ptimer</a> = <a class="code" href="arm__arch__timer_8h.html#ad5e47541b2bf1738cf450e0b5e00b5eb">vcpu_hptimer</a>(vcpu);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (has_vhe()) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        map-&gt;<a class="code" href="structtimer__map.html#a1a657a149bb10d92618fa5409a793e56">direct_vtimer</a> = <a class="code" href="arm__arch__timer_8h.html#ac0234ea189669eb84d8263946a9d60d6">vcpu_vtimer</a>(vcpu);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        map-&gt;<a class="code" href="structtimer__map.html#a1c5c90c0652f7c961e0f2ed7b658986b">direct_ptimer</a> = <a class="code" href="arm__arch__timer_8h.html#a4d166b83ceabb05615e40bf0c219cfbc">vcpu_ptimer</a>(vcpu);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        map-&gt;<a class="code" href="structtimer__map.html#ae411a9ed5e6336e94a819017949c3017">emul_vtimer</a> = NULL;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        map-&gt;<a class="code" href="structtimer__map.html#a59595aeab087b1861cf6b39c284791f1">emul_ptimer</a> = NULL;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        map-&gt;<a class="code" href="structtimer__map.html#a1a657a149bb10d92618fa5409a793e56">direct_vtimer</a> = <a class="code" href="arm__arch__timer_8h.html#ac0234ea189669eb84d8263946a9d60d6">vcpu_vtimer</a>(vcpu);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        map-&gt;<a class="code" href="structtimer__map.html#a1c5c90c0652f7c961e0f2ed7b658986b">direct_ptimer</a> = NULL;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        map-&gt;<a class="code" href="structtimer__map.html#ae411a9ed5e6336e94a819017949c3017">emul_vtimer</a> = NULL;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        map-&gt;<a class="code" href="structtimer__map.html#a59595aeab087b1861cf6b39c284791f1">emul_ptimer</a> = <a class="code" href="arm__arch__timer_8h.html#a4d166b83ceabb05615e40bf0c219cfbc">vcpu_ptimer</a>(vcpu);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    trace_kvm_get_timer_map(vcpu-&gt;vcpu_id, map);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div>
<div class="ttc" id="aarm__arch__timer_8h_html_a4d166b83ceabb05615e40bf0c219cfbc"><div class="ttname"><a href="arm__arch__timer_8h.html#a4d166b83ceabb05615e40bf0c219cfbc">vcpu_ptimer</a></div><div class="ttdeci">#define vcpu_ptimer(v)</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00125">arm_arch_timer.h:125</a></div></div>
<div class="ttc" id="aarm__arch__timer_8h_html_aaa36c0380609fa4a76a912afb410024f"><div class="ttname"><a href="arm__arch__timer_8h.html#aaa36c0380609fa4a76a912afb410024f">vcpu_hvtimer</a></div><div class="ttdeci">#define vcpu_hvtimer(v)</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00126">arm_arch_timer.h:126</a></div></div>
<div class="ttc" id="aarm__arch__timer_8h_html_ac0234ea189669eb84d8263946a9d60d6"><div class="ttname"><a href="arm__arch__timer_8h.html#ac0234ea189669eb84d8263946a9d60d6">vcpu_vtimer</a></div><div class="ttdeci">#define vcpu_vtimer(v)</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00124">arm_arch_timer.h:124</a></div></div>
<div class="ttc" id="aarm__arch__timer_8h_html_ad5e47541b2bf1738cf450e0b5e00b5eb"><div class="ttname"><a href="arm__arch__timer_8h.html#ad5e47541b2bf1738cf450e0b5e00b5eb">vcpu_hptimer</a></div><div class="ttdeci">#define vcpu_hptimer(v)</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00127">arm_arch_timer.h:127</a></div></div>
<div class="ttc" id="astructtimer__map_html_a1a657a149bb10d92618fa5409a793e56"><div class="ttname"><a href="structtimer__map.html#a1a657a149bb10d92618fa5409a793e56">timer_map::direct_vtimer</a></div><div class="ttdeci">struct arch_timer_context * direct_vtimer</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00079">arm_arch_timer.h:79</a></div></div>
<div class="ttc" id="astructtimer__map_html_a1c5c90c0652f7c961e0f2ed7b658986b"><div class="ttname"><a href="structtimer__map.html#a1c5c90c0652f7c961e0f2ed7b658986b">timer_map::direct_ptimer</a></div><div class="ttdeci">struct arch_timer_context * direct_ptimer</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00080">arm_arch_timer.h:80</a></div></div>
<div class="ttc" id="astructtimer__map_html_a59595aeab087b1861cf6b39c284791f1"><div class="ttname"><a href="structtimer__map.html#a59595aeab087b1861cf6b39c284791f1">timer_map::emul_ptimer</a></div><div class="ttdeci">struct arch_timer_context * emul_ptimer</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00082">arm_arch_timer.h:82</a></div></div>
<div class="ttc" id="astructtimer__map_html_ae411a9ed5e6336e94a819017949c3017"><div class="ttname"><a href="structtimer__map.html#ae411a9ed5e6336e94a819017949c3017">timer_map::emul_vtimer</a></div><div class="ttdeci">struct arch_timer_context * emul_vtimer</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00081">arm_arch_timer.h:81</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_ad7e756ea5077e85e2a10bfe35543ce21_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_ad7e756ea5077e85e2a10bfe35543ce21_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_ad7e756ea5077e85e2a10bfe35543ce21_icgraph" id="aarm__arch__timer_8h_ad7e756ea5077e85e2a10bfe35543ce21_icgraph">
<area shape="rect" title=" " alt="" coords="1985,385,2107,412"/>
<area shape="rect" href="vhe_2switch_8c.html#a13dbdaa438ac9e00d7e17a2bd5acc5cf" title=" " alt="" coords="1781,81,1910,108"/>
<area shape="rect" href="vhe_2switch_8c.html#ae0a32b92b674eb6922cbfab5f8d22daf" title=" " alt="" coords="1773,132,1918,159"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="1753,259,1937,285"/>
<area shape="rect" href="arch__timer_8c.html#a4b6d62f10023e1b1effbf51b28d46d3c" title=" " alt="" coords="1764,574,1927,615"/>
<area shape="rect" href="arch__timer_8c.html#a0209ad4256c7a1fd5ea70b6abe030954" title=" " alt="" coords="1762,653,1929,694"/>
<area shape="rect" href="arch__timer_8c.html#a0abce4d3df0f10be896c5ff0cb489041" title=" " alt="" coords="1768,411,1923,437"/>
<area shape="rect" href="arch__timer_8c.html#a0006e1b52ff819dd99be6dca260e52d6" title=" " alt="" coords="1543,360,1701,387"/>
<area shape="rect" href="arch__timer_8c.html#a6eb7255c40d5b43938e99918b3d9d06a" title=" " alt="" coords="1773,516,1917,543"/>
<area shape="rect" href="arch__timer_8c.html#a4bf6ac76380146820b45b06feb3eab27" title=" " alt="" coords="1539,309,1705,336"/>
<area shape="rect" href="arch__timer_8c.html#a11b9b6e6338bbec6085332661c934e91" title=" " alt="" coords="1320,461,1491,488"/>
<area shape="rect" href="vhe_2switch_8c.html#a1e6833f85cd789386b1d4bd05759903d" title=" " alt="" coords="1541,81,1703,108"/>
<area shape="rect" href="vhe_2switch_8c.html#af2f5ac35e771dfefeec346aaa6a850fa" title=" " alt="" coords="1340,5,1471,32"/>
<area shape="rect" href="vhe_2switch_8c.html#a2c3f13ae3d0d6c0cee03845c35c31da8" title=" " alt="" coords="1556,132,1688,159"/>
<area shape="rect" href="vhe_2switch_8c.html#a4253f73e8ba22b83245789d214c4a8ef" title=" " alt="" coords="1361,56,1449,83"/>
<area shape="rect" href="arch__timer_8c.html#a27c9feb35e6d7126c054c3325fea59b0" title=" " alt="" coords="1546,259,1698,285"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="873,107,1001,133"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="648,132,760,159"/>
<area shape="rect" href="sys__regs_8c.html#a9457451d95fa776f653cff6c2a8d31f9" title=" " alt="" coords="1551,664,1693,691"/>
<area shape="rect" href="arm_8c.html#a9235365ce64f215b1e024f26d96537cc" title=" " alt="" coords="1329,360,1481,387"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="1076,309,1272,336"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="1101,360,1247,387"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1109,461,1239,488"/>
<area shape="rect" href="kvm__main_8c.html#a5f5097640155787fc088aa47b94da0a7" title=" " alt="" coords="1112,259,1236,285"/>
<area shape="rect" href="kvm__main_8c.html#a16e0f63dd5f0d556ed1c9c9999256f85" title=" " alt="" coords="896,360,977,387"/>
<area shape="rect" href="handle__exit_8c.html#ae96aab7918301d55b908034db5855e3d" title=" " alt="" coords="637,208,771,235"/>
<area shape="rect" href="emulate-nested_8c.html#af5e2eb745d8ac6415fe941ebe754171d" title=" " alt="" coords="845,259,1028,285"/>
<area shape="rect" href="emulate-nested_8c.html#a5759b383dbf067b5e90235d5fd032ab5" title=" " alt="" coords="617,259,791,285"/>
<area shape="rect" href="handle__exit_8c.html#a5c24d46393da9651d3133e2377fd7a69" title=" " alt="" coords="656,309,752,336"/>
<area shape="rect" href="handle__exit_8c.html#aeaf983f5c40202edc8b07a76603330cd" title=" " alt="" coords="657,360,751,387"/>
<area shape="rect" href="sys__regs_8c.html#a315e661b6f1cb224596267000909a1ac" title=" " alt="" coords="404,259,563,285"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="849,512,1025,539"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="623,504,785,531"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="187,529,346,556"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="856,411,1017,437"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="404,497,563,538"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,529,129,556"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="611,411,797,437"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="897,157,976,184"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,593,356,634"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1326,309,1485,336"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="1117,157,1231,184"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="1130,208,1218,235"/>
</map>
</div>

</div>
</div>
<a id="a656013ccf6829218e43edc9c3660c414"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a656013ccf6829218e43edc9c3660c414">&#9670;&nbsp;</a></span>has_cntpoff()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool has_cntpoff </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arm__arch__timer_8h_source.html#l00150">150</a> of file <a class="el" href="arm__arch__timer_8h_source.html">arm_arch_timer.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">return</span> (has_vhe() &amp;&amp; cpus_have_final_cap(ARM64_HAS_ECV_CNTPOFF));</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a656013ccf6829218e43edc9c3660c414_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a656013ccf6829218e43edc9c3660c414_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a656013ccf6829218e43edc9c3660c414_icgraph" id="aarm__arch__timer_8h_a656013ccf6829218e43edc9c3660c414_icgraph">
<area shape="rect" title=" " alt="" coords="2125,141,2223,168"/>
<area shape="rect" href="vhe_2switch_8c.html#a13dbdaa438ac9e00d7e17a2bd5acc5cf" title=" " alt="" coords="1940,65,2069,92"/>
<area shape="rect" href="vhe_2switch_8c.html#ae0a32b92b674eb6922cbfab5f8d22daf" title=" " alt="" coords="1932,116,2077,143"/>
<area shape="rect" href="arch__timer_8c.html#a6fcfce8307e73b5ae888edca334508aa" title=" " alt="" coords="1957,225,2052,252"/>
<area shape="rect" href="arch__timer_8c.html#af19caca81734fff66363042c1e8e2181" title=" " alt="" coords="1943,167,2067,193"/>
<area shape="rect" href="vhe_2switch_8c.html#a1e6833f85cd789386b1d4bd05759903d" title=" " alt="" coords="1721,65,1884,92"/>
<area shape="rect" href="vhe_2switch_8c.html#af2f5ac35e771dfefeec346aaa6a850fa" title=" " alt="" coords="1525,65,1655,92"/>
<area shape="rect" href="vhe_2switch_8c.html#a2c3f13ae3d0d6c0cee03845c35c31da8" title=" " alt="" coords="1737,116,1869,143"/>
<area shape="rect" href="vhe_2switch_8c.html#a4253f73e8ba22b83245789d214c4a8ef" title=" " alt="" coords="1546,116,1634,143"/>
<area shape="rect" href="arch__timer_8c.html#a7e1e1c3a85e2d375519e32f57a54e301" title=" " alt="" coords="1727,225,1878,252"/>
<area shape="rect" href="arch__timer_8c.html#a08b7dad9cb511eeaec5ab08e2a2ae1af" title=" " alt="" coords="1735,283,1870,309"/>
<area shape="rect" href="arch__timer_8c.html#a4b6d62f10023e1b1effbf51b28d46d3c" title=" " alt="" coords="1509,218,1671,259"/>
<area shape="rect" href="arch__timer_8c.html#a0209ad4256c7a1fd5ea70b6abe030954" title=" " alt="" coords="1507,283,1673,325"/>
<area shape="rect" href="arch__timer_8c.html#a4bf6ac76380146820b45b06feb3eab27" title=" " alt="" coords="1507,167,1673,193"/>
<area shape="rect" href="sys__regs_8c.html#a9457451d95fa776f653cff6c2a8d31f9" title=" " alt="" coords="1308,279,1451,305"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1300,205,1459,232"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="1056,275,1252,301"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="1081,376,1227,403"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1089,109,1219,136"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="1097,224,1211,251"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="873,185,961,212"/>
<area shape="rect" href="handle__exit_8c.html#ae96aab7918301d55b908034db5855e3d" title=" " alt="" coords="617,337,751,364"/>
<area shape="rect" href="emulate-nested_8c.html#af5e2eb745d8ac6415fe941ebe754171d" title=" " alt="" coords="825,388,1008,415"/>
<area shape="rect" href="emulate-nested_8c.html#a5759b383dbf067b5e90235d5fd032ab5" title=" " alt="" coords="597,489,771,516"/>
<area shape="rect" href="handle__exit_8c.html#a5c24d46393da9651d3133e2377fd7a69" title=" " alt="" coords="636,388,732,415"/>
<area shape="rect" href="handle__exit_8c.html#aeaf983f5c40202edc8b07a76603330cd" title=" " alt="" coords="637,439,731,465"/>
<area shape="rect" href="sys__regs_8c.html#a315e661b6f1cb224596267000909a1ac" title=" " alt="" coords="384,489,543,516"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="829,33,1005,60"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="603,25,765,52"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,84,336,111"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="836,135,997,161"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="384,18,543,59"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,97,129,124"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="591,160,777,187"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="877,287,956,313"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="628,287,740,313"/>
<area shape="rect" href="arch__timer_8c.html#a0006e1b52ff819dd99be6dca260e52d6" title=" " alt="" coords="1511,349,1669,376"/>
<area shape="rect" href="arm_8c.html#a9235365ce64f215b1e024f26d96537cc" title=" " alt="" coords="1303,345,1455,372"/>
<area shape="rect" href="kvm__main_8c.html#a5f5097640155787fc088aa47b94da0a7" title=" " alt="" coords="1092,427,1216,453"/>
<area shape="rect" href="kvm__main_8c.html#a16e0f63dd5f0d556ed1c9c9999256f85" title=" " alt="" coords="876,236,957,263"/>
</map>
</div>

</div>
</div>
<a id="a653a586574104ddc469f6d4048ac214b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a653a586574104ddc469f6d4048ac214b">&#9670;&nbsp;</a></span>kvm_arm_timer_get_attr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_arm_timer_get_attr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l01611">1611</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;{</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <span class="keywordtype">int</span> __user *uaddr = (<span class="keywordtype">int</span> __user *)(<span class="keywordtype">long</span>)attr-&gt;addr;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    <span class="keyword">struct </span><a class="code" href="structarch__timer__context.html">arch_timer_context</a> *timer;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structarch__timer__context.html#af6df1e9ba96674e22f7c5f998e777832">irq</a>;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160; </div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="keywordflow">switch</span> (attr-&gt;attr) {</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="keywordflow">case</span> KVM_ARM_VCPU_TIMER_IRQ_VTIMER:</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        timer = <a class="code" href="arm__arch__timer_8h.html#ac0234ea189669eb84d8263946a9d60d6">vcpu_vtimer</a>(<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>);</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <span class="keywordflow">case</span> KVM_ARM_VCPU_TIMER_IRQ_PTIMER:</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        timer = <a class="code" href="arm__arch__timer_8h.html#a4d166b83ceabb05615e40bf0c219cfbc">vcpu_ptimer</a>(<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>);</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <span class="keywordflow">case</span> KVM_ARM_VCPU_TIMER_IRQ_HVTIMER:</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        timer = <a class="code" href="arm__arch__timer_8h.html#aaa36c0380609fa4a76a912afb410024f">vcpu_hvtimer</a>(<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>);</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="keywordflow">case</span> KVM_ARM_VCPU_TIMER_IRQ_HPTIMER:</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;        timer = <a class="code" href="arm__arch__timer_8h.html#ad5e47541b2bf1738cf450e0b5e00b5eb">vcpu_hptimer</a>(<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>);</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    }</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160; </div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <a class="code" href="structarch__timer__context.html#af6df1e9ba96674e22f7c5f998e777832">irq</a> = <a class="code" href="arm__arch__timer_8h.html#af3a36366dd2b9635e5973158fa6414c7">timer_irq</a>(timer);</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="keywordflow">return</span> put_user(<a class="code" href="structarch__timer__context.html#af6df1e9ba96674e22f7c5f998e777832">irq</a>, uaddr);</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;}</div>
<div class="ttc" id="aarm__arch__timer_8h_html_af3a36366dd2b9635e5973158fa6414c7"><div class="ttname"><a href="arm__arch__timer_8h.html#af3a36366dd2b9635e5973158fa6414c7">timer_irq</a></div><div class="ttdeci">#define timer_irq(ctx)</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00132">arm_arch_timer.h:132</a></div></div>
<div class="ttc" id="astructarch__timer__context_html"><div class="ttname"><a href="structarch__timer__context.html">arch_timer_context</a></div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00053">arm_arch_timer.h:53</a></div></div>
<div class="ttc" id="astructarch__timer__context_html_a9541e7a8583e8aa7ce9cbae677c7e595"><div class="ttname"><a href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">arch_timer_context::vcpu</a></div><div class="ttdeci">struct kvm_vcpu * vcpu</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00054">arm_arch_timer.h:54</a></div></div>
<div class="ttc" id="astructarch__timer__context_html_af6df1e9ba96674e22f7c5f998e777832"><div class="ttname"><a href="structarch__timer__context.html#af6df1e9ba96674e22f7c5f998e777832">arch_timer_context::irq</a></div><div class="ttdeci">struct arch_timer_context::@18 irq</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a653a586574104ddc469f6d4048ac214b_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a653a586574104ddc469f6d4048ac214b_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a653a586574104ddc469f6d4048ac214b_icgraph" id="aarm__arch__timer_8h_a653a586574104ddc469f6d4048ac214b_icgraph">
<area shape="rect" title=" " alt="" coords="875,5,1059,32"/>
<area shape="rect" href="guest_8c.html#aa99fc533fb03ffbdc691ecf41ef0ee78" title=" " alt="" coords="612,5,827,32"/>
<area shape="rect" href="arm_8c.html#ac4516032589fef2e518e9ac17c4cc850" title=" " alt="" coords="384,5,564,32"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,5,336,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a4819f39f272366ea5a4e797c0eee9e4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4819f39f272366ea5a4e797c0eee9e4e">&#9670;&nbsp;</a></span>kvm_arm_timer_get_reg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 kvm_arm_timer_get_reg </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>regid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l01107">1107</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;{</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="keywordflow">switch</span> (regid) {</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordflow">case</span> KVM_REG_ARM_TIMER_CTL:</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="arch__timer_8c.html#a3873c5e4f0eb8a0fa2a466d8e2b9a894">kvm_arm_timer_read</a>(vcpu,</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                      <a class="code" href="arm__arch__timer_8h.html#ac0234ea189669eb84d8263946a9d60d6">vcpu_vtimer</a>(vcpu), <a class="code" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876a225e0f5c3e8379a2610f2271feb0931a">TIMER_REG_CTL</a>);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="keywordflow">case</span> KVM_REG_ARM_TIMER_CNT:</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="arch__timer_8c.html#a3873c5e4f0eb8a0fa2a466d8e2b9a894">kvm_arm_timer_read</a>(vcpu,</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                      <a class="code" href="arm__arch__timer_8h.html#ac0234ea189669eb84d8263946a9d60d6">vcpu_vtimer</a>(vcpu), <a class="code" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876ae7d273d51748bdb350680fab17039aed">TIMER_REG_CNT</a>);</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="keywordflow">case</span> KVM_REG_ARM_TIMER_CVAL:</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="arch__timer_8c.html#a3873c5e4f0eb8a0fa2a466d8e2b9a894">kvm_arm_timer_read</a>(vcpu,</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                      <a class="code" href="arm__arch__timer_8h.html#ac0234ea189669eb84d8263946a9d60d6">vcpu_vtimer</a>(vcpu), <a class="code" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876af4a421c472caa2b4130082881694fe55">TIMER_REG_CVAL</a>);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keywordflow">case</span> KVM_REG_ARM_PTIMER_CTL:</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="arch__timer_8c.html#a3873c5e4f0eb8a0fa2a466d8e2b9a894">kvm_arm_timer_read</a>(vcpu,</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                      <a class="code" href="arm__arch__timer_8h.html#a4d166b83ceabb05615e40bf0c219cfbc">vcpu_ptimer</a>(vcpu), <a class="code" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876a225e0f5c3e8379a2610f2271feb0931a">TIMER_REG_CTL</a>);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <span class="keywordflow">case</span> KVM_REG_ARM_PTIMER_CNT:</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="arch__timer_8c.html#a3873c5e4f0eb8a0fa2a466d8e2b9a894">kvm_arm_timer_read</a>(vcpu,</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                      <a class="code" href="arm__arch__timer_8h.html#a4d166b83ceabb05615e40bf0c219cfbc">vcpu_ptimer</a>(vcpu), <a class="code" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876ae7d273d51748bdb350680fab17039aed">TIMER_REG_CNT</a>);</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="keywordflow">case</span> KVM_REG_ARM_PTIMER_CVAL:</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="arch__timer_8c.html#a3873c5e4f0eb8a0fa2a466d8e2b9a894">kvm_arm_timer_read</a>(vcpu,</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                      <a class="code" href="arm__arch__timer_8h.html#a4d166b83ceabb05615e40bf0c219cfbc">vcpu_ptimer</a>(vcpu), <a class="code" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876af4a421c472caa2b4130082881694fe55">TIMER_REG_CVAL</a>);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    }</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="keywordflow">return</span> (u64)-1;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;}</div>
<div class="ttc" id="aarch__timer_8c_html_a3873c5e4f0eb8a0fa2a466d8e2b9a894"><div class="ttname"><a href="arch__timer_8c.html#a3873c5e4f0eb8a0fa2a466d8e2b9a894">kvm_arm_timer_read</a></div><div class="ttdeci">static u64 kvm_arm_timer_read(struct kvm_vcpu *vcpu, struct arch_timer_context *timer, enum kvm_arch_timer_regs treg)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l01132">arch_timer.c:1132</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a4819f39f272366ea5a4e797c0eee9e4e_cgraph.png" border="0" usemap="#aarm__arch__timer_8h_a4819f39f272366ea5a4e797c0eee9e4e_cgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a4819f39f272366ea5a4e797c0eee9e4e_cgraph" id="aarm__arch__timer_8h_a4819f39f272366ea5a4e797c0eee9e4e_cgraph">
<area shape="rect" title=" " alt="" coords="5,105,188,132"/>
<area shape="rect" href="arch__timer_8c.html#a3873c5e4f0eb8a0fa2a466d8e2b9a894" title=" " alt="" coords="236,105,399,132"/>
<area shape="rect" href="arch__timer_8c.html#ac9f7917175f1d6031a77dcbc82f9ee98" title=" " alt="" coords="1075,32,1241,58"/>
<area shape="rect" href="arch__timer_8c.html#a2fb3bc59ad8d869dc692674f2db4bfe9" title=" " alt="" coords="447,80,563,106"/>
<area shape="rect" href="arch__timer_8c.html#a7f5f777b74b5c9ec6e13d4f7576d7f43" title=" " alt="" coords="1093,112,1223,138"/>
<area shape="rect" href="arch__timer_8c.html#a848ba80b4ffee7a071e37abb241262cd" title=" " alt="" coords="882,130,1001,157"/>
<area shape="rect" href="arch__timer_8c.html#aeed64583773b01dafc949df326d17db3" title=" " alt="" coords="611,80,808,106"/>
<area shape="rect" href="arch__timer_8c.html#ad7dab91af9f69654aa27010f96125c13" title=" " alt="" coords="655,29,763,56"/>
<area shape="rect" href="arch__timer_8c.html#a6c290bf8212ea1388cdb4a839eae7228" title=" " alt="" coords="856,64,1027,106"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a4819f39f272366ea5a4e797c0eee9e4e_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a4819f39f272366ea5a4e797c0eee9e4e_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a4819f39f272366ea5a4e797c0eee9e4e_icgraph" id="aarm__arch__timer_8h_a4819f39f272366ea5a4e797c0eee9e4e_icgraph">
<area shape="rect" title=" " alt="" coords="753,31,936,57"/>
<area shape="rect" href="guest_8c.html#a91e885a78ebf3a7c410b4b8ffa443729" title=" " alt="" coords="582,5,695,32"/>
<area shape="rect" href="handle__exit_8c.html#a0b391fc62c2250ecc0bfcdbe1b0a6788" title=" " alt="" coords="572,56,705,83"/>
<area shape="rect" href="guest_8c.html#ad1a71190592cc60155333934b84d1d11" title=" " alt="" coords="384,5,524,32"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,5,336,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="af0d336ce012b8bbb60c3acc93fa7db2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0d336ce012b8bbb60c3acc93fa7db2c">&#9670;&nbsp;</a></span>kvm_arm_timer_has_attr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_arm_timer_has_attr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l01638">1638</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;{</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <span class="keywordflow">switch</span> (attr-&gt;attr) {</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="keywordflow">case</span> KVM_ARM_VCPU_TIMER_IRQ_VTIMER:</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="keywordflow">case</span> KVM_ARM_VCPU_TIMER_IRQ_PTIMER:</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <span class="keywordflow">case</span> KVM_ARM_VCPU_TIMER_IRQ_HVTIMER:</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <span class="keywordflow">case</span> KVM_ARM_VCPU_TIMER_IRQ_HPTIMER:</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    }</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160; </div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_af0d336ce012b8bbb60c3acc93fa7db2c_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_af0d336ce012b8bbb60c3acc93fa7db2c_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_af0d336ce012b8bbb60c3acc93fa7db2c_icgraph" id="aarm__arch__timer_8h_af0d336ce012b8bbb60c3acc93fa7db2c_icgraph">
<area shape="rect" title=" " alt="" coords="880,5,1067,32"/>
<area shape="rect" href="guest_8c.html#a433aea1c6b1de56454d83bdfffea5244" title=" " alt="" coords="615,5,832,32"/>
<area shape="rect" href="arm_8c.html#a0c30ed81235d5fe106242b7be1863342" title=" " alt="" coords="384,5,567,32"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,5,336,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a4b6d62f10023e1b1effbf51b28d46d3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b6d62f10023e1b1effbf51b28d46d3c">&#9670;&nbsp;</a></span>kvm_arm_timer_read_sysreg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 kvm_arm_timer_read_sysreg </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31f">kvm_arch_timers</a>&#160;</td>
          <td class="paramname"><em>tmr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876">kvm_arch_timer_regs</a>&#160;</td>
          <td class="paramname"><em>treg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l01167">1167</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;{</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keyword">struct </span><a class="code" href="structarch__timer__context.html">arch_timer_context</a> *timer;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtimer__map.html">timer_map</a> map;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    u64 val;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160; </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <a class="code" href="arch__timer_8c.html#ad7e756ea5077e85e2a10bfe35543ce21">get_timer_map</a>(vcpu, &amp;map);</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    timer = <a class="code" href="arm__arch__timer_8h.html#ac8605bb196d5ea061e4acefd2b78046d">vcpu_get_timer</a>(vcpu, tmr);</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keywordflow">if</span> (timer == map.emul_vtimer || timer == map.emul_ptimer)</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="arch__timer_8c.html#a3873c5e4f0eb8a0fa2a466d8e2b9a894">kvm_arm_timer_read</a>(vcpu, timer, treg);</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160; </div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    preempt_disable();</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <a class="code" href="arch__timer_8c.html#a08b7dad9cb511eeaec5ab08e2a2ae1af">timer_save_state</a>(timer);</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160; </div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    val = <a class="code" href="arch__timer_8c.html#a3873c5e4f0eb8a0fa2a466d8e2b9a894">kvm_arm_timer_read</a>(vcpu, timer, treg);</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160; </div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <a class="code" href="arch__timer_8c.html#a7e1e1c3a85e2d375519e32f57a54e301">timer_restore_state</a>(timer);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    preempt_enable();</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160; </div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="keywordflow">return</span> val;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;}</div>
<div class="ttc" id="aarch__timer_8c_html_a08b7dad9cb511eeaec5ab08e2a2ae1af"><div class="ttname"><a href="arch__timer_8c.html#a08b7dad9cb511eeaec5ab08e2a2ae1af">timer_save_state</a></div><div class="ttdeci">static void timer_save_state(struct arch_timer_context *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00497">arch_timer.c:497</a></div></div>
<div class="ttc" id="aarch__timer_8c_html_a7e1e1c3a85e2d375519e32f57a54e301"><div class="ttname"><a href="arch__timer_8c.html#a7e1e1c3a85e2d375519e32f57a54e301">timer_restore_state</a></div><div class="ttdeci">static void timer_restore_state(struct arch_timer_context *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00603">arch_timer.c:603</a></div></div>
<div class="ttc" id="aarch__timer_8c_html_ad7e756ea5077e85e2a10bfe35543ce21"><div class="ttname"><a href="arch__timer_8c.html#ad7e756ea5077e85e2a10bfe35543ce21">get_timer_map</a></div><div class="ttdeci">void get_timer_map(struct kvm_vcpu *vcpu, struct timer_map *map)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00178">arch_timer.c:178</a></div></div>
<div class="ttc" id="aarm__arch__timer_8h_html_ac8605bb196d5ea061e4acefd2b78046d"><div class="ttname"><a href="arm__arch__timer_8h.html#ac8605bb196d5ea061e4acefd2b78046d">vcpu_get_timer</a></div><div class="ttdeci">#define vcpu_get_timer(v, t)</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00123">arm_arch_timer.h:123</a></div></div>
<div class="ttc" id="astructtimer__map_html"><div class="ttname"><a href="structtimer__map.html">timer_map</a></div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00078">arm_arch_timer.h:78</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a4b6d62f10023e1b1effbf51b28d46d3c_cgraph.png" border="0" usemap="#aarm__arch__timer_8h_a4b6d62f10023e1b1effbf51b28d46d3c_cgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a4b6d62f10023e1b1effbf51b28d46d3c_cgraph" id="aarm__arch__timer_8h_a4b6d62f10023e1b1effbf51b28d46d3c_cgraph">
<area shape="rect" title=" " alt="" coords="5,203,168,245"/>
<area shape="rect" href="arch__timer_8c.html#ad7e756ea5077e85e2a10bfe35543ce21" title=" " alt="" coords="237,121,358,148"/>
<area shape="rect" href="arch__timer_8c.html#a3873c5e4f0eb8a0fa2a466d8e2b9a894" title=" " alt="" coords="216,172,379,199"/>
<area shape="rect" href="arch__timer_8c.html#a7e1e1c3a85e2d375519e32f57a54e301" title=" " alt="" coords="427,324,577,351"/>
<area shape="rect" href="arch__timer_8c.html#a08b7dad9cb511eeaec5ab08e2a2ae1af" title=" " alt="" coords="435,476,569,503"/>
<area shape="rect" href="arch__timer_8c.html#ac9f7917175f1d6031a77dcbc82f9ee98" title=" " alt="" coords="1105,59,1272,85"/>
<area shape="rect" href="arch__timer_8c.html#a2fb3bc59ad8d869dc692674f2db4bfe9" title=" " alt="" coords="444,96,560,123"/>
<area shape="rect" href="arch__timer_8c.html#a7f5f777b74b5c9ec6e13d4f7576d7f43" title=" " alt="" coords="1124,273,1253,300"/>
<area shape="rect" href="arch__timer_8c.html#a848ba80b4ffee7a071e37abb241262cd" title=" " alt="" coords="905,147,1023,173"/>
<area shape="rect" href="arch__timer_8c.html#aeed64583773b01dafc949df326d17db3" title=" " alt="" coords="625,96,823,123"/>
<area shape="rect" href="arch__timer_8c.html#ad7dab91af9f69654aa27010f96125c13" title=" " alt="" coords="670,248,778,275"/>
<area shape="rect" href="arch__timer_8c.html#a6c290bf8212ea1388cdb4a839eae7228" title=" " alt="" coords="879,81,1049,122"/>
<area shape="rect" href="arch__timer_8c.html#a6fcfce8307e73b5ae888edca334508aa" title=" " alt="" coords="677,400,771,427"/>
<area shape="rect" href="arch__timer_8c.html#a207ce56a4fe08e050e49e49334548e15" title=" " alt="" coords="677,451,771,477"/>
<area shape="rect" href="arm__arch__timer_8h.html#a656013ccf6829218e43edc9c3660c414" title=" " alt="" coords="915,400,1013,427"/>
<area shape="rect" href="nvhe_2timer-sr_8c.html#a73539c3eaa37749e44c40351913b9efb" title=" " alt="" coords="871,451,1057,477"/>
<area shape="rect" href="arch__timer_8c.html#a2e57f3714ec062699e29ae4e13d80dac" title=" " alt="" coords="671,501,777,528"/>
<area shape="rect" href="arch__timer_8c.html#ab50c2af796cc5134fa3942c857dd4fb7" title=" " alt="" coords="665,603,783,629"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a4b6d62f10023e1b1effbf51b28d46d3c_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a4b6d62f10023e1b1effbf51b28d46d3c_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a4b6d62f10023e1b1effbf51b28d46d3c_icgraph" id="aarm__arch__timer_8h_a4b6d62f10023e1b1effbf51b28d46d3c_icgraph">
<area shape="rect" title=" " alt="" coords="196,5,359,47"/>
<area shape="rect" href="sys__regs_8c.html#a9457451d95fa776f653cff6c2a8d31f9" title=" " alt="" coords="5,13,148,39"/>
</map>
</div>

</div>
</div>
<a id="a143f4cabe1f682a6cfc888d54d85a1ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a143f4cabe1f682a6cfc888d54d85a1ae">&#9670;&nbsp;</a></span>kvm_arm_timer_set_attr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_arm_timer_set_attr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l01559">1559</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;{</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <span class="keywordtype">int</span> __user *uaddr = (<span class="keywordtype">int</span> __user *)(<span class="keywordtype">long</span>)attr-&gt;addr;</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <span class="keywordtype">int</span> irq, idx, ret = 0;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160; </div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="arm__vgic_8h.html#a28961fa9a6313f335b274e0fac503bcf">irqchip_in_kernel</a>(vcpu-&gt;kvm))</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160; </div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <span class="keywordflow">if</span> (get_user(irq, uaddr))</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;        <span class="keywordflow">return</span> -EFAULT;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160; </div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="arm__vgic_8h.html#a86535c3eff6bfc9d2e4224c73ebfa57d">irq_is_ppi</a>(irq)))</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160; </div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    mutex_lock(&amp;vcpu-&gt;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160; </div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <span class="keywordflow">if</span> (test_bit(KVM_ARCH_FLAG_TIMER_PPIS_IMMUTABLE,</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;             &amp;vcpu-&gt;kvm-&gt;arch.flags)) {</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        ret = -EBUSY;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    }</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160; </div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    <span class="keywordflow">switch</span> (attr-&gt;attr) {</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <span class="keywordflow">case</span> KVM_ARM_VCPU_TIMER_IRQ_VTIMER:</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        idx = <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa722734e604137bcd9ea40179b51b2b3c">TIMER_VTIMER</a>;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <span class="keywordflow">case</span> KVM_ARM_VCPU_TIMER_IRQ_PTIMER:</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        idx = <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa7463dc5411bf81d52f397ef53551b852">TIMER_PTIMER</a>;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <span class="keywordflow">case</span> KVM_ARM_VCPU_TIMER_IRQ_HVTIMER:</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        idx = <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fae3e7d392ed408811b306ebe2edef5b46">TIMER_HVTIMER</a>;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <span class="keywordflow">case</span> KVM_ARM_VCPU_TIMER_IRQ_HPTIMER:</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        idx = <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa4e750a70fd24097ddad55ea2b01a75b7">TIMER_HPTIMER</a>;</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        ret = -ENXIO;</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    }</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160; </div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;<span class="comment">     * We cannot validate the IRQ unicity before we run, so take it at</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;<span class="comment">     * face value. The verdict will be given on first vcpu run, for each</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;<span class="comment">     * vcpu. Yes this is late. Blame it on the stupid API.</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    vcpu-&gt;kvm-&gt;arch.timer_data.ppi[idx] = irq;</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160; </div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;out:</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    mutex_unlock(&amp;vcpu-&gt;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;}</div>
<div class="ttc" id="aarm__vgic_8h_html_a28961fa9a6313f335b274e0fac503bcf"><div class="ttname"><a href="arm__vgic_8h.html#a28961fa9a6313f335b274e0fac503bcf">irqchip_in_kernel</a></div><div class="ttdeci">#define irqchip_in_kernel(k)</div><div class="ttdef"><b>Definition:</b> <a href="arm__vgic_8h_source.html#l00392">arm_vgic.h:392</a></div></div>
<div class="ttc" id="aarm__vgic_8h_html_a86535c3eff6bfc9d2e4224c73ebfa57d"><div class="ttname"><a href="arm__vgic_8h.html#a86535c3eff6bfc9d2e4224c73ebfa57d">irq_is_ppi</a></div><div class="ttdeci">#define irq_is_ppi(irq)</div><div class="ttdef"><b>Definition:</b> <a href="arm__vgic_8h_source.html#l00034">arm_vgic.h:34</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a143f4cabe1f682a6cfc888d54d85a1ae_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a143f4cabe1f682a6cfc888d54d85a1ae_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a143f4cabe1f682a6cfc888d54d85a1ae_icgraph" id="aarm__arch__timer_8h_a143f4cabe1f682a6cfc888d54d85a1ae_icgraph">
<area shape="rect" title=" " alt="" coords="873,5,1056,32"/>
<area shape="rect" href="guest_8c.html#a932910ec1cc3b5a552da035d4d74a4eb" title=" " alt="" coords="611,5,825,32"/>
<area shape="rect" href="arm_8c.html#adcf63ac6c9c7383fcf0dcb2ce097afbe" title=" " alt="" coords="384,5,563,32"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,5,336,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="adfd22299b534663306382384fa337d05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfd22299b534663306382384fa337d05">&#9670;&nbsp;</a></span>kvm_arm_timer_set_reg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_arm_timer_set_reg </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>regid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l01048">1048</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;{</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="keyword">struct </span><a class="code" href="structarch__timer__context.html">arch_timer_context</a> *timer;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="keywordflow">switch</span> (regid) {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keywordflow">case</span> KVM_REG_ARM_TIMER_CTL:</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        timer = <a class="code" href="arm__arch__timer_8h.html#ac0234ea189669eb84d8263946a9d60d6">vcpu_vtimer</a>(<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        <a class="code" href="arch__timer_8c.html#affb5181064df0b30b53f567189e15771">kvm_arm_timer_write</a>(<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>, timer, <a class="code" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876a225e0f5c3e8379a2610f2271feb0931a">TIMER_REG_CTL</a>, value);</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">case</span> KVM_REG_ARM_TIMER_CNT:</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        <span class="keywordflow">if</span> (!test_bit(KVM_ARCH_FLAG_VM_COUNTER_OFFSET,</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                  &amp;<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>-&gt;kvm-&gt;arch.flags)) {</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            timer = <a class="code" href="arm__arch__timer_8h.html#ac0234ea189669eb84d8263946a9d60d6">vcpu_vtimer</a>(<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            <a class="code" href="arch__timer_8c.html#aafe1b11938ff5abb30a790c16eb77c77">timer_set_offset</a>(timer, <a class="code" href="arch__timer_8c.html#ac9f7917175f1d6031a77dcbc82f9ee98">kvm_phys_timer_read</a>() - value);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        }</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">case</span> KVM_REG_ARM_TIMER_CVAL:</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        timer = <a class="code" href="arm__arch__timer_8h.html#ac0234ea189669eb84d8263946a9d60d6">vcpu_vtimer</a>(<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>);</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        <a class="code" href="arch__timer_8c.html#affb5181064df0b30b53f567189e15771">kvm_arm_timer_write</a>(<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>, timer, <a class="code" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876af4a421c472caa2b4130082881694fe55">TIMER_REG_CVAL</a>, value);</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordflow">case</span> KVM_REG_ARM_PTIMER_CTL:</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        timer = <a class="code" href="arm__arch__timer_8h.html#a4d166b83ceabb05615e40bf0c219cfbc">vcpu_ptimer</a>(<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <a class="code" href="arch__timer_8c.html#affb5181064df0b30b53f567189e15771">kvm_arm_timer_write</a>(<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>, timer, <a class="code" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876a225e0f5c3e8379a2610f2271feb0931a">TIMER_REG_CTL</a>, value);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordflow">case</span> KVM_REG_ARM_PTIMER_CNT:</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <span class="keywordflow">if</span> (!test_bit(KVM_ARCH_FLAG_VM_COUNTER_OFFSET,</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                  &amp;<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>-&gt;kvm-&gt;arch.flags)) {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;            timer = <a class="code" href="arm__arch__timer_8h.html#a4d166b83ceabb05615e40bf0c219cfbc">vcpu_ptimer</a>(<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>);</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;            <a class="code" href="arch__timer_8c.html#aafe1b11938ff5abb30a790c16eb77c77">timer_set_offset</a>(timer, <a class="code" href="arch__timer_8c.html#ac9f7917175f1d6031a77dcbc82f9ee98">kvm_phys_timer_read</a>() - value);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        }</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordflow">case</span> KVM_REG_ARM_PTIMER_CVAL:</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        timer = <a class="code" href="arm__arch__timer_8h.html#a4d166b83ceabb05615e40bf0c219cfbc">vcpu_ptimer</a>(<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <a class="code" href="arch__timer_8c.html#affb5181064df0b30b53f567189e15771">kvm_arm_timer_write</a>(<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>, timer, <a class="code" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876af4a421c472caa2b4130082881694fe55">TIMER_REG_CVAL</a>, value);</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160; </div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    }</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160; </div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;}</div>
<div class="ttc" id="aarch__timer_8c_html_aafe1b11938ff5abb30a790c16eb77c77"><div class="ttname"><a href="arch__timer_8c.html#aafe1b11938ff5abb30a790c16eb77c77">timer_set_offset</a></div><div class="ttdeci">static void timer_set_offset(struct arch_timer_context *ctxt, u64 offset)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00163">arch_timer.c:163</a></div></div>
<div class="ttc" id="aarch__timer_8c_html_ac9f7917175f1d6031a77dcbc82f9ee98"><div class="ttname"><a href="arch__timer_8c.html#ac9f7917175f1d6031a77dcbc82f9ee98">kvm_phys_timer_read</a></div><div class="ttdeci">u64 kvm_phys_timer_read(void)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00173">arch_timer.c:173</a></div></div>
<div class="ttc" id="aarch__timer_8c_html_affb5181064df0b30b53f567189e15771"><div class="ttname"><a href="arch__timer_8c.html#affb5181064df0b30b53f567189e15771">kvm_arm_timer_write</a></div><div class="ttdeci">static void kvm_arm_timer_write(struct kvm_vcpu *vcpu, struct arch_timer_context *timer, enum kvm_arch_timer_regs treg, u64 val)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l01192">arch_timer.c:1192</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_adfd22299b534663306382384fa337d05_cgraph.png" border="0" usemap="#aarm__arch__timer_8h_adfd22299b534663306382384fa337d05_cgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_adfd22299b534663306382384fa337d05_cgraph" id="aarm__arch__timer_8h_adfd22299b534663306382384fa337d05_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,187,83"/>
<area shape="rect" href="arch__timer_8c.html#affb5181064df0b30b53f567189e15771" title=" " alt="" coords="235,56,401,83"/>
<area shape="rect" href="arch__timer_8c.html#ac9f7917175f1d6031a77dcbc82f9ee98" title=" " alt="" coords="449,5,616,32"/>
<area shape="rect" href="arch__timer_8c.html#aafe1b11938ff5abb30a790c16eb77c77" title=" " alt="" coords="254,107,382,133"/>
<area shape="rect" href="arch__timer_8c.html#a7f5f777b74b5c9ec6e13d4f7576d7f43" title=" " alt="" coords="468,56,597,83"/>
<area shape="rect" href="arch__timer_8c.html#a2e57f3714ec062699e29ae4e13d80dac" title=" " alt="" coords="479,107,586,133"/>
<area shape="rect" href="arch__timer_8c.html#ab50c2af796cc5134fa3942c857dd4fb7" title=" " alt="" coords="473,157,592,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_adfd22299b534663306382384fa337d05_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_adfd22299b534663306382384fa337d05_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_adfd22299b534663306382384fa337d05_icgraph" id="aarm__arch__timer_8h_adfd22299b534663306382384fa337d05_icgraph">
<area shape="rect" title=" " alt="" coords="731,5,912,32"/>
<area shape="rect" href="guest_8c.html#acd7401987c2e84cad89f08207d34bf3f" title=" " alt="" coords="571,5,683,32"/>
<area shape="rect" href="guest_8c.html#a8ee5ced2d0c0d538319888057bc58b4a" title=" " alt="" coords="384,5,523,32"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,5,336,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a0209ad4256c7a1fd5ea70b6abe030954"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0209ad4256c7a1fd5ea70b6abe030954">&#9670;&nbsp;</a></span>kvm_arm_timer_write_sysreg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_arm_timer_write_sysreg </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31f">kvm_arch_timers</a>&#160;</td>
          <td class="paramname"><em>tmr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="arm__arch__timer_8h.html#ab2af7bc65f7a3380f7bd930614dd1876">kvm_arch_timer_regs</a>&#160;</td>
          <td class="paramname"><em>treg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l01219">1219</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;{</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keyword">struct </span><a class="code" href="structarch__timer__context.html">arch_timer_context</a> *timer;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtimer__map.html">timer_map</a> map;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160; </div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <a class="code" href="arch__timer_8c.html#ad7e756ea5077e85e2a10bfe35543ce21">get_timer_map</a>(vcpu, &amp;map);</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    timer = <a class="code" href="arm__arch__timer_8h.html#ac8605bb196d5ea061e4acefd2b78046d">vcpu_get_timer</a>(vcpu, tmr);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="keywordflow">if</span> (timer == map.emul_vtimer || timer == map.emul_ptimer) {</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <a class="code" href="arch__timer_8c.html#ad19b9cbace853dd534bf572a35f83710">soft_timer_cancel</a>(&amp;timer-&gt;<a class="code" href="structarch__timer__context.html#a5861cbbfdfd60eb5a5ecc24f4a79005c">hrtimer</a>);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        <a class="code" href="arch__timer_8c.html#affb5181064df0b30b53f567189e15771">kvm_arm_timer_write</a>(vcpu, timer, treg, val);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        <a class="code" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a">timer_emulate</a>(timer);</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        preempt_disable();</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <a class="code" href="arch__timer_8c.html#a08b7dad9cb511eeaec5ab08e2a2ae1af">timer_save_state</a>(timer);</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        <a class="code" href="arch__timer_8c.html#affb5181064df0b30b53f567189e15771">kvm_arm_timer_write</a>(vcpu, timer, treg, val);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        <a class="code" href="arch__timer_8c.html#a7e1e1c3a85e2d375519e32f57a54e301">timer_restore_state</a>(timer);</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        preempt_enable();</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    }</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;}</div>
<div class="ttc" id="aarch__timer_8c_html_acea899fae895cedf39458ed51af3cb1a"><div class="ttname"><a href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a">timer_emulate</a></div><div class="ttdeci">static void timer_emulate(struct arch_timer_context *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00464">arch_timer.c:464</a></div></div>
<div class="ttc" id="aarch__timer_8c_html_ad19b9cbace853dd534bf572a35f83710"><div class="ttname"><a href="arch__timer_8c.html#ad19b9cbace853dd534bf572a35f83710">soft_timer_cancel</a></div><div class="ttdeci">static void soft_timer_cancel(struct hrtimer *hrt)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00219">arch_timer.c:219</a></div></div>
<div class="ttc" id="astructarch__timer__context_html_a5861cbbfdfd60eb5a5ecc24f4a79005c"><div class="ttname"><a href="structarch__timer__context.html#a5861cbbfdfd60eb5a5ecc24f4a79005c">arch_timer_context::hrtimer</a></div><div class="ttdeci">struct hrtimer hrtimer</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00054">arm_arch_timer.h:57</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a0209ad4256c7a1fd5ea70b6abe030954_cgraph.png" border="0" usemap="#aarm__arch__timer_8h_a0209ad4256c7a1fd5ea70b6abe030954_cgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a0209ad4256c7a1fd5ea70b6abe030954_cgraph" id="aarm__arch__timer_8h_a0209ad4256c7a1fd5ea70b6abe030954_cgraph">
<area shape="rect" title=" " alt="" coords="5,651,172,693"/>
<area shape="rect" href="arch__timer_8c.html#ad7e756ea5077e85e2a10bfe35543ce21" title=" " alt="" coords="228,443,349,469"/>
<area shape="rect" href="arch__timer_8c.html#affb5181064df0b30b53f567189e15771" title=" " alt="" coords="421,684,587,711"/>
<area shape="rect" href="arch__timer_8c.html#ad19b9cbace853dd534bf572a35f83710" title=" " alt="" coords="220,633,357,660"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="229,493,348,520"/>
<area shape="rect" href="arch__timer_8c.html#a7e1e1c3a85e2d375519e32f57a54e301" title=" " alt="" coords="429,887,579,913"/>
<area shape="rect" href="arch__timer_8c.html#a08b7dad9cb511eeaec5ab08e2a2ae1af" title=" " alt="" coords="437,785,571,812"/>
<area shape="rect" href="arch__timer_8c.html#ac9f7917175f1d6031a77dcbc82f9ee98" title=" " alt="" coords="883,456,1050,483"/>
<area shape="rect" href="arch__timer_8c.html#a7f5f777b74b5c9ec6e13d4f7576d7f43" title=" " alt="" coords="902,659,1031,685"/>
<area shape="rect" href="arch__timer_8c.html#a2e57f3714ec062699e29ae4e13d80dac" title=" " alt="" coords="685,760,791,787"/>
<area shape="rect" href="arch__timer_8c.html#ab50c2af796cc5134fa3942c857dd4fb7" title=" " alt="" coords="679,709,797,736"/>
<area shape="rect" href="arch__timer_8c.html#aeed64583773b01dafc949df326d17db3" title=" " alt="" coords="405,431,603,457"/>
<area shape="rect" href="arch__timer_8c.html#ae722c5e3eba2098c012b2cdc4d74bf9f" title=" " alt="" coords="651,557,825,584"/>
<area shape="rect" href="arch__timer_8c.html#a64a4d2f3d2a9b83524edda4b27246092" title=" " alt="" coords="419,493,589,520"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="419,288,589,315"/>
<area shape="rect" href="arch__timer_8c.html#a00de950346bea7137e0f06522d67ab2b" title=" " alt="" coords="441,380,567,407"/>
<area shape="rect" href="arch__timer_8c.html#a6c290bf8212ea1388cdb4a839eae7228" title=" " alt="" coords="653,339,823,381"/>
<area shape="rect" href="arch__timer_8c.html#a848ba80b4ffee7a071e37abb241262cd" title=" " alt="" coords="679,405,797,432"/>
<area shape="rect" href="arch__timer_8c.html#ad7dab91af9f69654aa27010f96125c13" title=" " alt="" coords="913,760,1021,787"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="662,237,814,264"/>
<area shape="rect" href="arch__timer_8c.html#a4f7db088b5aab3a8a6013b7f6fd12fa0" title=" " alt="" coords="669,288,807,315"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="916,44,1017,71"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="911,305,1022,332"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="916,372,1017,399"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="881,132,1052,159"/>
<area shape="rect" href="vgic_8c.html#a19d9c44a40cc76ccbd25bd8e0ec38a08" title=" " alt="" coords="881,237,1053,264"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="1139,5,1239,32"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="1355,5,1490,32"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="1151,360,1228,387"/>
<area shape="rect" href="vgic-init_8c.html#a0f9be5cc88c88f6c0180c53b72818d3b" title=" " alt="" coords="1351,259,1495,285"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="1332,578,1513,619"/>
<area shape="rect" href="vgic-init_8c.html#a2eee0060a3bdcd2a9e8fe1451a3a3fc2" title=" " alt="" coords="1335,461,1510,488"/>
<area shape="rect" href="vgic-debug_8c.html#a42534d23071b4f3c441c5f82f9e5c1ce" title=" " alt="" coords="1361,411,1485,437"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e" title=" " alt="" coords="1601,335,1703,361"/>
<area shape="rect" href="vgic-its_8c.html#afd97b5d03d2b30ae4481443cdea2e739" title=" " alt="" coords="1348,513,1497,554"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a839b15883ba8f9de35a03ffce32fdf7f" title=" " alt="" coords="1325,360,1520,387"/>
<area shape="rect" href="vgic-v4_8c.html#a802a906ad744a75b5af33bbd6b31237c" title=" " alt="" coords="1373,208,1473,235"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="1575,585,1729,612"/>
<area shape="rect" href="vgic-v2_8c.html#a4e8ee3d5f7c8fadbf0a645df67a1c5a2" title=" " alt="" coords="1591,461,1713,488"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="1108,527,1271,553"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="1359,644,1487,671"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1128,107,1251,133"/>
<area shape="rect" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247" title=" " alt="" coords="1118,157,1261,184"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1319,56,1527,83"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1346,107,1499,133"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="1365,157,1481,184"/>
<area shape="rect" href="arch__timer_8c.html#a6fcfce8307e73b5ae888edca334508aa" title=" " alt="" coords="691,861,785,888"/>
<area shape="rect" href="arch__timer_8c.html#a207ce56a4fe08e050e49e49334548e15" title=" " alt="" coords="691,912,785,939"/>
<area shape="rect" href="arm__arch__timer_8h.html#a656013ccf6829218e43edc9c3660c414" title=" " alt="" coords="918,861,1015,888"/>
<area shape="rect" href="nvhe_2timer-sr_8c.html#a73539c3eaa37749e44c40351913b9efb" title=" " alt="" coords="873,912,1060,939"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a0209ad4256c7a1fd5ea70b6abe030954_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a0209ad4256c7a1fd5ea70b6abe030954_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a0209ad4256c7a1fd5ea70b6abe030954_icgraph" id="aarm__arch__timer_8h_a0209ad4256c7a1fd5ea70b6abe030954_icgraph">
<area shape="rect" title=" " alt="" coords="196,5,363,47"/>
<area shape="rect" href="sys__regs_8c.html#a9457451d95fa776f653cff6c2a8d31f9" title=" " alt="" coords="5,13,148,39"/>
</map>
</div>

</div>
</div>
<a id="ac9f7917175f1d6031a77dcbc82f9ee98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9f7917175f1d6031a77dcbc82f9ee98">&#9670;&nbsp;</a></span>kvm_phys_timer_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 kvm_phys_timer_read </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l00173">173</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;{</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="arch__timer_8c.html#a35098fc91b751950a191213b1c2e5853">timecounter</a>-&gt;cc-&gt;read(<a class="code" href="arch__timer_8c.html#a35098fc91b751950a191213b1c2e5853">timecounter</a>-&gt;cc);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;}</div>
<div class="ttc" id="aarch__timer_8c_html_a35098fc91b751950a191213b1c2e5853"><div class="ttname"><a href="arch__timer_8c.html#a35098fc91b751950a191213b1c2e5853">timecounter</a></div><div class="ttdeci">static struct timecounter * timecounter</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00026">arch_timer.c:26</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_ac9f7917175f1d6031a77dcbc82f9ee98_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_ac9f7917175f1d6031a77dcbc82f9ee98_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_ac9f7917175f1d6031a77dcbc82f9ee98_icgraph" id="aarm__arch__timer_8h_ac9f7917175f1d6031a77dcbc82f9ee98_icgraph">
<area shape="rect" title=" " alt="" coords="2056,202,2223,228"/>
<area shape="rect" href="arch__timer_8c.html#a3873c5e4f0eb8a0fa2a466d8e2b9a894" title=" " alt="" coords="1104,267,1267,294"/>
<area shape="rect" href="arch__timer_8c.html#aaab6e45ec6d5188b23d96695db532140" title=" " alt="" coords="1600,227,1781,254"/>
<area shape="rect" href="arch__timer_8c.html#affb5181064df0b30b53f567189e15771" title=" " alt="" coords="1839,227,2006,254"/>
<area shape="rect" href="arch__timer_8c.html#a6c290bf8212ea1388cdb4a839eae7228" title=" " alt="" coords="1837,110,2008,152"/>
<area shape="rect" href="arch__timer_8c.html#ab7dc50f59c235841d864ef598f814247" title=" " alt="" coords="1106,12,1265,39"/>
<area shape="rect" href="arch__timer_8c.html#a64a4d2f3d2a9b83524edda4b27246092" title=" " alt="" coords="1605,539,1776,566"/>
<area shape="rect" href="arch__timer_8c.html#aa832b704b06a4b6109f7f3a71f6755cc" title=" " alt="" coords="867,255,1049,282"/>
<area shape="rect" href="arch__timer_8c.html#a4b6d62f10023e1b1effbf51b28d46d3c" title=" " alt="" coords="877,306,1039,348"/>
<area shape="rect" href="guest_8c.html#a91e885a78ebf3a7c410b4b8ffa443729" title=" " alt="" coords="662,256,775,283"/>
<area shape="rect" href="handle__exit_8c.html#a0b391fc62c2250ecc0bfcdbe1b0a6788" title=" " alt="" coords="190,128,323,155"/>
<area shape="rect" href="guest_8c.html#ad1a71190592cc60155333934b84d1d11" title=" " alt="" coords="407,283,547,310"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,359,336,386"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,536,129,563"/>
<area shape="rect" href="sys__regs_8c.html#a9457451d95fa776f653cff6c2a8d31f9" title=" " alt="" coords="647,310,790,336"/>
<area shape="rect" href="guest_8c.html#acd7401987c2e84cad89f08207d34bf3f" title=" " alt="" coords="1377,227,1489,254"/>
<area shape="rect" href="guest_8c.html#a8ee5ced2d0c0d538319888057bc58b4a" title=" " alt="" coords="408,218,547,244"/>
<area shape="rect" href="arch__timer_8c.html#a0209ad4256c7a1fd5ea70b6abe030954" title=" " alt="" coords="1102,364,1269,405"/>
<area shape="rect" href="arch__timer_8c.html#aeed64583773b01dafc949df326d17db3" title=" " alt="" coords="1592,172,1789,199"/>
<area shape="rect" href="arch__timer_8c.html#a9d0120f96e99b20be8023dad5c6a7f0b" title=" " alt="" coords="1635,118,1746,144"/>
<area shape="rect" href="arch__timer_8c.html#aa5109f58e0ef877d3f053d0593359c1e" title=" " alt="" coords="1351,126,1515,152"/>
<area shape="rect" href="arch__timer_8c.html#a2fb3bc59ad8d869dc692674f2db4bfe9" title=" " alt="" coords="1375,176,1491,203"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="1373,379,1492,406"/>
<area shape="rect" href="arm_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="872,12,1044,39"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="619,12,819,39"/>
<area shape="rect" href="arch__timer_8c.html#a4bf6ac76380146820b45b06feb3eab27" title=" " alt="" coords="1102,482,1269,508"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="879,482,1037,508"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="621,512,817,539"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="646,563,791,590"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="413,384,542,411"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="661,614,776,640"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="675,462,763,488"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="384,664,571,691"/>
<area shape="rect" href="arch__timer_8c.html#a78e23e83bece8c269268f3a263fbb114" title=" " alt="" coords="1347,60,1518,101"/>
<area shape="rect" href="kvm__main_8c.html#a3de4d6991bdd1a714e8afa6a55136cdd" title=" " alt="" coords="1097,67,1273,94"/>
<area shape="rect" href="kvm__main_8c.html#a8e18df0287ddedfd516454aeeb669807" title=" " alt="" coords="893,114,1023,140"/>
<area shape="rect" href="kvm__main_8c.html#a7256a8615584a9ae83a46c071f6aa0e9" title=" " alt="" coords="658,103,779,130"/>
<area shape="rect" href="arm_8c.html#a68df8c6f1b7134e9f23857f092d50056" title=" " alt="" coords="420,103,535,130"/>
<area shape="rect" href="arch__timer_8c.html#a25b09c8d95a2582f37a1a2719920e59c" title=" " alt="" coords="1355,649,1511,690"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="1341,430,1525,456"/>
<area shape="rect" href="arch__timer_8c.html#a939939efd4c7eb8c054ca12e04623358" title=" " alt="" coords="1321,766,1544,792"/>
<area shape="rect" href="arch__timer_8c.html#a629de40452a9be84148e3c8442a80db6" title=" " alt="" coords="871,631,1045,658"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="1337,480,1529,507"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="1349,532,1516,573"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="1341,715,1524,742"/>
<area shape="rect" href="arch__timer_8c.html#a27c9feb35e6d7126c054c3325fea59b0" title=" " alt="" coords="1109,430,1261,456"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="894,428,1022,455"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="663,360,775,387"/>
<area shape="rect" href="arm_8c.html#a545524d72330cd45dae4f51a686943c0" title=" " alt="" coords="869,766,1047,792"/>
<area shape="rect" href="arch__timer_8c.html#a6ae73bff466fcdc60319f9726d53b571" title=" " alt="" coords="1103,715,1268,742"/>
</map>
</div>

</div>
</div>
<a id="a993c30c61801fad7f3e557bcacbc8638"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a993c30c61801fad7f3e557bcacbc8638">&#9670;&nbsp;</a></span>kvm_timer_cpu_down()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_timer_cpu_down </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l01041">1041</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;{</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    disable_percpu_irq(<a class="code" href="arch__timer_8c.html#af1df41cdaba1d42a2fd8a5b75c763f16">host_vtimer_irq</a>);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="arch__timer_8c.html#a20d4a341dfd2af12f6b5b19bfde475c1">host_ptimer_irq</a>)</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        disable_percpu_irq(<a class="code" href="arch__timer_8c.html#a20d4a341dfd2af12f6b5b19bfde475c1">host_ptimer_irq</a>);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;}</div>
<div class="ttc" id="aarch__timer_8c_html_a20d4a341dfd2af12f6b5b19bfde475c1"><div class="ttname"><a href="arch__timer_8c.html#a20d4a341dfd2af12f6b5b19bfde475c1">host_ptimer_irq</a></div><div class="ttdeci">static unsigned int host_ptimer_irq</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00028">arch_timer.c:28</a></div></div>
<div class="ttc" id="aarch__timer_8c_html_af1df41cdaba1d42a2fd8a5b75c763f16"><div class="ttname"><a href="arch__timer_8c.html#af1df41cdaba1d42a2fd8a5b75c763f16">host_vtimer_irq</a></div><div class="ttdeci">static unsigned int host_vtimer_irq</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00027">arch_timer.c:27</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a993c30c61801fad7f3e557bcacbc8638_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a993c30c61801fad7f3e557bcacbc8638_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a993c30c61801fad7f3e557bcacbc8638_icgraph" id="aarm__arch__timer_8h_a993c30c61801fad7f3e557bcacbc8638_icgraph">
<area shape="rect" title=" " alt="" coords="261,5,427,32"/>
<area shape="rect" href="arm_8c.html#ad6968510b101877130dc9494f5dc4d4b" title=" " alt="" coords="5,5,213,32"/>
</map>
</div>

</div>
</div>
<a id="a35495530036f43da928b82e7a1ffee34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35495530036f43da928b82e7a1ffee34">&#9670;&nbsp;</a></span>kvm_timer_cpu_up()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_timer_cpu_up </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l01034">1034</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;{</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    enable_percpu_irq(<a class="code" href="arch__timer_8c.html#af1df41cdaba1d42a2fd8a5b75c763f16">host_vtimer_irq</a>, <a class="code" href="arch__timer_8c.html#ad0df8fd11369dad2ecb88bca05586a2a">host_vtimer_irq_flags</a>);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="arch__timer_8c.html#a20d4a341dfd2af12f6b5b19bfde475c1">host_ptimer_irq</a>)</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        enable_percpu_irq(<a class="code" href="arch__timer_8c.html#a20d4a341dfd2af12f6b5b19bfde475c1">host_ptimer_irq</a>, <a class="code" href="arch__timer_8c.html#ade5cd660147808f96da12823ae71454a">host_ptimer_irq_flags</a>);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;}</div>
<div class="ttc" id="aarch__timer_8c_html_ad0df8fd11369dad2ecb88bca05586a2a"><div class="ttname"><a href="arch__timer_8c.html#ad0df8fd11369dad2ecb88bca05586a2a">host_vtimer_irq_flags</a></div><div class="ttdeci">static u32 host_vtimer_irq_flags</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00029">arch_timer.c:29</a></div></div>
<div class="ttc" id="aarch__timer_8c_html_ade5cd660147808f96da12823ae71454a"><div class="ttname"><a href="arch__timer_8c.html#ade5cd660147808f96da12823ae71454a">host_ptimer_irq_flags</a></div><div class="ttdeci">static u32 host_ptimer_irq_flags</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00030">arch_timer.c:30</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a35495530036f43da928b82e7a1ffee34_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a35495530036f43da928b82e7a1ffee34_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a35495530036f43da928b82e7a1ffee34_icgraph" id="aarm__arch__timer_8h_a35495530036f43da928b82e7a1ffee34_icgraph">
<area shape="rect" title=" " alt="" coords="259,5,405,32"/>
<area shape="rect" href="arm_8c.html#ac1582780a8801f86aa06da8b95cbcfe9" title=" " alt="" coords="5,5,211,32"/>
</map>
</div>

</div>
</div>
<a id="a6eb7255c40d5b43938e99918b3d9d06a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6eb7255c40d5b43938e99918b3d9d06a">&#9670;&nbsp;</a></span>kvm_timer_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_timer_enable </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l01506">1506</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;{</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="keyword">struct </span><a class="code" href="structarch__timer__cpu.html">arch_timer_cpu</a> *timer = <a class="code" href="arm__arch__timer_8h.html#a0a8e9eb158c9a2fbc985fc1f47057b00">vcpu_timer</a>(vcpu);</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtimer__map.html">timer_map</a> map;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160; </div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    <span class="keywordflow">if</span> (timer-&gt;<a class="code" href="structarch__timer__cpu.html#a74afd9f2e05c191d58b73bfb53cf9e9d">enabled</a>)</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160; </div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <span class="comment">/* Without a VGIC we do not map virtual IRQs to physical IRQs */</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="arm__vgic_8h.html#a28961fa9a6313f335b274e0fac503bcf">irqchip_in_kernel</a>(vcpu-&gt;kvm))</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;        <span class="keywordflow">goto</span> no_vgic;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160; </div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;<span class="comment">     * At this stage, we have the guarantee that the vgic is both</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="comment">     * available and initialized.</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="arch__timer_8c.html#a7a37a6f350a857f42fe872aeebc8e2e4">timer_irqs_are_valid</a>(vcpu)) {</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        kvm_debug(<span class="stringliteral">&quot;incorrectly configured timer irqs\n&quot;</span>);</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    }</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160; </div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <a class="code" href="arch__timer_8c.html#ad7e756ea5077e85e2a10bfe35543ce21">get_timer_map</a>(vcpu, &amp;map);</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160; </div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    ret = <a class="code" href="vgic_8c.html#ab4243e0ac375259b39c04a6cc6266a9f">kvm_vgic_map_phys_irq</a>(vcpu,</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;                    map.direct_vtimer-&gt;host_timer_irq,</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;                    <a class="code" href="arm__arch__timer_8h.html#af3a36366dd2b9635e5973158fa6414c7">timer_irq</a>(map.direct_vtimer),</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                    &amp;<a class="code" href="arch__timer_8c.html#a3ea143fc77aa4520f032211fd9487ae5">arch_timer_irq_ops</a>);</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160; </div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <span class="keywordflow">if</span> (map.direct_ptimer) {</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;        ret = <a class="code" href="vgic_8c.html#ab4243e0ac375259b39c04a6cc6266a9f">kvm_vgic_map_phys_irq</a>(vcpu,</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                        map.direct_ptimer-&gt;host_timer_irq,</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                        <a class="code" href="arm__arch__timer_8h.html#af3a36366dd2b9635e5973158fa6414c7">timer_irq</a>(map.direct_ptimer),</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                        &amp;<a class="code" href="arch__timer_8c.html#a3ea143fc77aa4520f032211fd9487ae5">arch_timer_irq_ops</a>);</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    }</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160; </div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160; </div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;no_vgic:</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    timer-&gt;<a class="code" href="structarch__timer__cpu.html#a74afd9f2e05c191d58b73bfb53cf9e9d">enabled</a> = 1;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;}</div>
<div class="ttc" id="aarch__timer_8c_html_a3ea143fc77aa4520f032211fd9487ae5"><div class="ttname"><a href="arch__timer_8c.html#a3ea143fc77aa4520f032211fd9487ae5">arch_timer_irq_ops</a></div><div class="ttdeci">static struct irq_ops arch_timer_irq_ops</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00052">arch_timer.c:54</a></div></div>
<div class="ttc" id="aarch__timer_8c_html_a7a37a6f350a857f42fe872aeebc8e2e4"><div class="ttname"><a href="arch__timer_8c.html#a7a37a6f350a857f42fe872aeebc8e2e4">timer_irqs_are_valid</a></div><div class="ttdeci">static bool timer_irqs_are_valid(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l01452">arch_timer.c:1452</a></div></div>
<div class="ttc" id="aarm__arch__timer_8h_html_a0a8e9eb158c9a2fbc985fc1f47057b00"><div class="ttname"><a href="arm__arch__timer_8h.html#a0a8e9eb158c9a2fbc985fc1f47057b00">vcpu_timer</a></div><div class="ttdeci">#define vcpu_timer(v)</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00122">arm_arch_timer.h:122</a></div></div>
<div class="ttc" id="astructarch__timer__cpu_html"><div class="ttname"><a href="structarch__timer__cpu.html">arch_timer_cpu</a></div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00087">arm_arch_timer.h:87</a></div></div>
<div class="ttc" id="astructarch__timer__cpu_html_a74afd9f2e05c191d58b73bfb53cf9e9d"><div class="ttname"><a href="structarch__timer__cpu.html#a74afd9f2e05c191d58b73bfb53cf9e9d">arch_timer_cpu::enabled</a></div><div class="ttdeci">bool enabled</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00094">arm_arch_timer.h:94</a></div></div>
<div class="ttc" id="avgic_8c_html_ab4243e0ac375259b39c04a6cc6266a9f"><div class="ttname"><a href="vgic_8c.html#ab4243e0ac375259b39c04a6cc6266a9f">kvm_vgic_map_phys_irq</a></div><div class="ttdeci">int kvm_vgic_map_phys_irq(struct kvm_vcpu *vcpu, unsigned int host_irq, u32 vintid, struct irq_ops *ops)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8c_source.html#l00514">vgic.c:514</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a6eb7255c40d5b43938e99918b3d9d06a_cgraph.png" border="0" usemap="#aarm__arch__timer_8h_a6eb7255c40d5b43938e99918b3d9d06a_cgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a6eb7255c40d5b43938e99918b3d9d06a_cgraph" id="aarm__arch__timer_8h_a6eb7255c40d5b43938e99918b3d9d06a_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,149,108"/>
<area shape="rect" href="arch__timer_8c.html#ad7e756ea5077e85e2a10bfe35543ce21" title=" " alt="" coords="228,31,349,57"/>
<area shape="rect" href="vgic_8c.html#ab4243e0ac375259b39c04a6cc6266a9f" title=" " alt="" coords="197,81,380,108"/>
<area shape="rect" href="arch__timer_8c.html#a7a37a6f350a857f42fe872aeebc8e2e4" title=" " alt="" coords="211,157,366,184"/>
<area shape="rect" href="vgic_8c.html#a727bab6843a2191df705d005fa7f764f" title=" " alt="" coords="435,107,580,133"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="665,132,767,159"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="457,5,558,32"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="859,132,959,159"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="1021,132,1156,159"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="635,5,797,32"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="845,5,973,32"/>
<area shape="rect" href="vgic_8c.html#a99527df04c2db316d7f8c1733c18d99e" title=" " alt="" coords="428,208,587,235"/>
<area shape="rect" href="arch__timer_8c.html#ad2a704b646b65309708c3a7f6ab70913" title=" " alt="" coords="465,157,549,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a6eb7255c40d5b43938e99918b3d9d06a_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a6eb7255c40d5b43938e99918b3d9d06a_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a6eb7255c40d5b43938e99918b3d9d06a_icgraph" id="aarm__arch__timer_8h_a6eb7255c40d5b43938e99918b3d9d06a_icgraph">
<area shape="rect" title=" " alt="" coords="404,13,548,39"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,5,356,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="a27c9feb35e6d7126c054c3325fea59b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27c9feb35e6d7126c054c3325fea59b0">&#9670;&nbsp;</a></span>kvm_timer_hyp_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __init kvm_timer_hyp_init </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>has_gic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l01367">1367</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;{</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="keyword">struct </span>arch_timer_kvm_info *info;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    info = arch_timer_get_kvm_info();</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <a class="code" href="arch__timer_8c.html#a35098fc91b751950a191213b1c2e5853">timecounter</a> = &amp;info-&gt;timecounter;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160; </div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="arch__timer_8c.html#a35098fc91b751950a191213b1c2e5853">timecounter</a>-&gt;cc) {</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;        kvm_err(<span class="stringliteral">&quot;kvm_arch_timer: uninitialized timecounter\n&quot;</span>);</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        <span class="keywordflow">return</span> -ENODEV;</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    }</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160; </div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    err = <a class="code" href="arch__timer_8c.html#a167e7a9fc4c0e10e12bec622f676e31b">kvm_irq_init</a>(info);</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160; </div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <span class="comment">/* First, do the virtual EL1 timer irq */</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160; </div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    err = request_percpu_irq(<a class="code" href="arch__timer_8c.html#af1df41cdaba1d42a2fd8a5b75c763f16">host_vtimer_irq</a>, <a class="code" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629">kvm_arch_timer_handler</a>,</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;                 <span class="stringliteral">&quot;kvm guest vtimer&quot;</span>, <a class="code" href="kvm__main_8c.html#a1798daf88e30c60711caf936851d823f">kvm_get_running_vcpus</a>());</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        kvm_err(<span class="stringliteral">&quot;kvm_arch_timer: can&#39;t request vtimer interrupt %d (%d)\n&quot;</span>,</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;            <a class="code" href="arch__timer_8c.html#af1df41cdaba1d42a2fd8a5b75c763f16">host_vtimer_irq</a>, err);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    }</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160; </div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keywordflow">if</span> (has_gic) {</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        err = irq_set_vcpu_affinity(<a class="code" href="arch__timer_8c.html#af1df41cdaba1d42a2fd8a5b75c763f16">host_vtimer_irq</a>,</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                        <a class="code" href="kvm__main_8c.html#a1798daf88e30c60711caf936851d823f">kvm_get_running_vcpus</a>());</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;            kvm_err(<span class="stringliteral">&quot;kvm_arch_timer: error setting vcpu affinity\n&quot;</span>);</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;            <span class="keywordflow">goto</span> out_free_vtimer_irq;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160; </div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        static_branch_enable(&amp;has_gic_active_state);</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    }</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160; </div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    kvm_debug(<span class="stringliteral">&quot;virtual timer IRQ%d\n&quot;</span>, <a class="code" href="arch__timer_8c.html#af1df41cdaba1d42a2fd8a5b75c763f16">host_vtimer_irq</a>);</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160; </div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="comment">/* Now let&#39;s do the physical EL1 timer irq */</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160; </div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">if</span> (info-&gt;physical_irq &gt; 0) {</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        err = request_percpu_irq(<a class="code" href="arch__timer_8c.html#a20d4a341dfd2af12f6b5b19bfde475c1">host_ptimer_irq</a>, <a class="code" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629">kvm_arch_timer_handler</a>,</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                     <span class="stringliteral">&quot;kvm guest ptimer&quot;</span>, <a class="code" href="kvm__main_8c.html#a1798daf88e30c60711caf936851d823f">kvm_get_running_vcpus</a>());</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;            kvm_err(<span class="stringliteral">&quot;kvm_arch_timer: can&#39;t request ptimer interrupt %d (%d)\n&quot;</span>,</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                <a class="code" href="arch__timer_8c.html#a20d4a341dfd2af12f6b5b19bfde475c1">host_ptimer_irq</a>, err);</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;            <span class="keywordflow">goto</span> out_free_vtimer_irq;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        }</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160; </div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        <span class="keywordflow">if</span> (has_gic) {</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;            err = irq_set_vcpu_affinity(<a class="code" href="arch__timer_8c.html#a20d4a341dfd2af12f6b5b19bfde475c1">host_ptimer_irq</a>,</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                            <a class="code" href="kvm__main_8c.html#a1798daf88e30c60711caf936851d823f">kvm_get_running_vcpus</a>());</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;            <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                kvm_err(<span class="stringliteral">&quot;kvm_arch_timer: error setting vcpu affinity\n&quot;</span>);</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                <span class="keywordflow">goto</span> out_free_ptimer_irq;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;            }</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        }</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160; </div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        kvm_debug(<span class="stringliteral">&quot;physical timer IRQ%d\n&quot;</span>, <a class="code" href="arch__timer_8c.html#a20d4a341dfd2af12f6b5b19bfde475c1">host_ptimer_irq</a>);</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (has_vhe()) {</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        kvm_err(<span class="stringliteral">&quot;kvm_arch_timer: invalid physical timer IRQ: %d\n&quot;</span>,</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;            info-&gt;physical_irq);</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;        err = -ENODEV;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;        <span class="keywordflow">goto</span> out_free_vtimer_irq;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    }</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160; </div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160; </div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;out_free_ptimer_irq:</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="keywordflow">if</span> (info-&gt;physical_irq &gt; 0)</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        free_percpu_irq(<a class="code" href="arch__timer_8c.html#a20d4a341dfd2af12f6b5b19bfde475c1">host_ptimer_irq</a>, <a class="code" href="kvm__main_8c.html#a1798daf88e30c60711caf936851d823f">kvm_get_running_vcpus</a>());</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;out_free_vtimer_irq:</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    free_percpu_irq(<a class="code" href="arch__timer_8c.html#af1df41cdaba1d42a2fd8a5b75c763f16">host_vtimer_irq</a>, <a class="code" href="kvm__main_8c.html#a1798daf88e30c60711caf936851d823f">kvm_get_running_vcpus</a>());</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;}</div>
<div class="ttc" id="aarch__timer_8c_html_a167e7a9fc4c0e10e12bec622f676e31b"><div class="ttname"><a href="arch__timer_8c.html#a167e7a9fc4c0e10e12bec622f676e31b">kvm_irq_init</a></div><div class="ttdeci">static int kvm_irq_init(struct arch_timer_kvm_info *info)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l01319">arch_timer.c:1319</a></div></div>
<div class="ttc" id="aarch__timer_8c_html_a7d59bcd17bdbce3017dbc041cd6e9629"><div class="ttname"><a href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629">kvm_arch_timer_handler</a></div><div class="ttdeci">static irqreturn_t kvm_arch_timer_handler(int irq, void *dev_id)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00224">arch_timer.c:224</a></div></div>
<div class="ttc" id="akvm__main_8c_html_a1798daf88e30c60711caf936851d823f"><div class="ttname"><a href="kvm__main_8c.html#a1798daf88e30c60711caf936851d823f">kvm_get_running_vcpus</a></div><div class="ttdeci">struct kvm_vcpu *__percpu * kvm_get_running_vcpus(void)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l06353">kvm_main.c:6353</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a27c9feb35e6d7126c054c3325fea59b0_cgraph.png" border="0" usemap="#aarm__arch__timer_8h_a27c9feb35e6d7126c054c3325fea59b0_cgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a27c9feb35e6d7126c054c3325fea59b0_cgraph" id="aarm__arch__timer_8h_a27c9feb35e6d7126c054c3325fea59b0_cgraph">
<area shape="rect" title=" " alt="" coords="5,620,157,647"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="205,569,389,596"/>
<area shape="rect" href="kvm__main_8c.html#a1798daf88e30c60711caf936851d823f" title=" " alt="" coords="207,620,387,647"/>
<area shape="rect" href="arch__timer_8c.html#a167e7a9fc4c0e10e12bec622f676e31b" title=" " alt="" coords="246,671,349,697"/>
<area shape="rect" href="arch__timer_8c.html#ad7e756ea5077e85e2a10bfe35543ce21" title=" " alt="" coords="462,519,583,545"/>
<area shape="rect" href="arch__timer_8c.html#a64a4d2f3d2a9b83524edda4b27246092" title=" " alt="" coords="437,620,608,647"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="438,569,607,596"/>
<area shape="rect" href="arch__timer_8c.html#a4f7db088b5aab3a8a6013b7f6fd12fa0" title=" " alt="" coords="674,468,813,495"/>
<area shape="rect" href="arch__timer_8c.html#ac9f7917175f1d6031a77dcbc82f9ee98" title=" " alt="" coords="660,671,827,697"/>
<area shape="rect" href="arch__timer_8c.html#ae722c5e3eba2098c012b2cdc4d74bf9f" title=" " alt="" coords="656,721,831,748"/>
<area shape="rect" href="arch__timer_8c.html#a848ba80b4ffee7a071e37abb241262cd" title=" " alt="" coords="684,569,803,596"/>
<area shape="rect" href="arch__timer_8c.html#a7f5f777b74b5c9ec6e13d4f7576d7f43" title=" " alt="" coords="679,620,808,647"/>
<area shape="rect" href="arch__timer_8c.html#ad7dab91af9f69654aa27010f96125c13" title=" " alt="" coords="911,721,1019,748"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="667,519,819,545"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="914,595,1015,621"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="909,308,1020,335"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="914,443,1015,469"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="1099,544,1269,571"/>
<area shape="rect" href="vgic_8c.html#a19d9c44a40cc76ccbd25bd8e0ec38a08" title=" " alt="" coords="879,544,1051,571"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="1134,595,1234,621"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="1341,595,1475,621"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="1145,224,1223,251"/>
<area shape="rect" href="vgic-init_8c.html#a0f9be5cc88c88f6c0180c53b72818d3b" title=" " alt="" coords="1336,5,1480,32"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="1317,377,1499,418"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e" title=" " alt="" coords="2534,224,2637,251"/>
<area shape="rect" href="vgic-init_8c.html#a2eee0060a3bdcd2a9e8fe1451a3a3fc2" title=" " alt="" coords="1321,107,1495,133"/>
<area shape="rect" href="vgic-debug_8c.html#a42534d23071b4f3c441c5f82f9e5c1ce" title=" " alt="" coords="1346,325,1470,352"/>
<area shape="rect" href="vgic-its_8c.html#afd97b5d03d2b30ae4481443cdea2e739" title=" " alt="" coords="1333,158,1483,199"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a839b15883ba8f9de35a03ffce32fdf7f" title=" " alt="" coords="2013,224,2208,251"/>
<area shape="rect" href="vgic-v4_8c.html#a802a906ad744a75b5af33bbd6b31237c" title=" " alt="" coords="1358,275,1458,301"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="1561,413,1715,440"/>
<area shape="rect" href="irqchip_8c.html#a5ae37186e6e6d1594767f83df8bab64a" title=" " alt="" coords="1789,413,1954,440"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="1795,544,1947,571"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="2025,544,2197,571"/>
<area shape="rect" href="vgic-irqfd_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="2305,537,2415,564"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="2291,595,2429,621"/>
<area shape="rect" href="vgic-irqfd_8c.html#a93415dbe2d5c7166c8f3f91be7c5d5da" title=" " alt="" coords="2512,537,2659,564"/>
<area shape="rect" href="vgic-v2_8c.html#a4e8ee3d5f7c8fadbf0a645df67a1c5a2" title=" " alt="" coords="1577,157,1699,184"/>
<area shape="rect" href="vgic-v3_8c.html#abe9a2245dfa0d76d61c99b60f714a513" title=" " alt="" coords="1577,107,1699,133"/>
<area shape="rect" href="vgic-v4_8c.html#af99c2f70dd91a57879b3a2f583e49a4a" title=" " alt="" coords="1547,344,1729,371"/>
<area shape="rect" href="vgic-v4_8c.html#ac805e466fa8f454112c11904ef8d41ce" title=" " alt="" coords="1568,275,1708,301"/>
<area shape="rect" href="vgic-v4_8c.html#ac22161596c9858cc700bab08c03fc422" title=" " alt="" coords="1777,349,1965,376"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="2049,391,2172,417"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="2256,403,2464,429"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="2283,352,2437,379"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="1103,443,1265,469"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="1344,443,1472,469"/>
<area shape="rect" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247" title=" " alt="" coords="1337,544,1479,571"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="1580,544,1696,571"/>
<area shape="rect" href="arch__timer_8c.html#a93ca26b238c7b7ccc9f231451e3b44f0" title=" " alt="" coords="447,671,599,697"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a27c9feb35e6d7126c054c3325fea59b0_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a27c9feb35e6d7126c054c3325fea59b0_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a27c9feb35e6d7126c054c3325fea59b0_icgraph" id="aarm__arch__timer_8h_a27c9feb35e6d7126c054c3325fea59b0_icgraph">
<area shape="rect" title=" " alt="" coords="341,5,493,32"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="165,5,293,32"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="5,5,117,32"/>
</map>
</div>

</div>
</div>
<a id="aa42ee7f3aa49455d33441110cea315fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa42ee7f3aa49455d33441110cea315fa">&#9670;&nbsp;</a></span>kvm_timer_init_vhe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_timer_init_vhe </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l01553">1553</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;{</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="keywordflow">if</span> (cpus_have_final_cap(ARM64_HAS_ECV_CNTPOFF))</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;        sysreg_clear_set(cnthctl_el2, 0, CNTHCTL_ECV);</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_aa42ee7f3aa49455d33441110cea315fa_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_aa42ee7f3aa49455d33441110cea315fa_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_aa42ee7f3aa49455d33441110cea315fa_icgraph" id="aarm__arch__timer_8h_aa42ee7f3aa49455d33441110cea315fa_icgraph">
<area shape="rect" title=" " alt="" coords="1028,81,1180,108"/>
<area shape="rect" href="arm_8c.html#a451b50b80474a3cf090fcce753c8c642" title=" " alt="" coords="815,81,980,108"/>
<area shape="rect" href="arm_8c.html#a2dfd4facec6b758ea01c34f9789486d8" title=" " alt="" coords="649,56,767,83"/>
<area shape="rect" href="arm_8c.html#a45a99f5a1905e2b85f69a767313abfd7" title=" " alt="" coords="653,107,763,133"/>
<area shape="rect" href="arm_8c.html#a0769d67e6376c5081aac75ea3783df2f" title=" " alt="" coords="458,56,562,83"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="204,5,332,32"/>
<area shape="rect" href="arm_8c.html#ac1582780a8801f86aa06da8b95cbcfe9" title=" " alt="" coords="165,56,371,83"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="5,56,117,83"/>
<area shape="rect" href="arm_8c.html#a3c73ef13f7491129779b02da5a9a7442" title=" " alt="" coords="419,107,601,133"/>
<area shape="rect" href="arm_8c.html#a289457d5cabd2e7e2cda634bc6277311" title=" " alt="" coords="209,107,327,133"/>
</map>
</div>

</div>
</div>
<a id="a7b851d39d19bcc70062d97e0a24e1290"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b851d39d19bcc70062d97e0a24e1290">&#9670;&nbsp;</a></span>kvm_timer_init_vm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_timer_init_vm </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l01028">1028</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;{</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa1cdb8b31cc17507227832f027c267e1d">NR_KVM_TIMERS</a>; i++)</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        kvm-&gt;arch.timer_data.ppi[i] = <a class="code" href="arch__timer_8c.html#a2f0fe0305f0fed5e43fa92387f3de4b3">default_ppi</a>[i];</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;}</div>
<div class="ttc" id="aarch__timer_8c_html_a2f0fe0305f0fed5e43fa92387f3de4b3"><div class="ttname"><a href="arch__timer_8c.html#a2f0fe0305f0fed5e43fa92387f3de4b3">default_ppi</a></div><div class="ttdeci">static const u8 default_ppi[]</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00034">arch_timer.c:34</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a7b851d39d19bcc70062d97e0a24e1290_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a7b851d39d19bcc70062d97e0a24e1290_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a7b851d39d19bcc70062d97e0a24e1290_icgraph" id="aarm__arch__timer_8h_a7b851d39d19bcc70062d97e0a24e1290_icgraph">
<area shape="rect" title=" " alt="" coords="612,5,761,32"/>
<area shape="rect" href="arm_8c.html#a78b266c18dac3b9edbea80941c96e2cd" title=" " alt="" coords="421,5,564,32"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="247,5,373,32"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="5,5,199,32"/>
</map>
</div>

</div>
</div>
<a id="a939939efd4c7eb8c054ca12e04623358"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a939939efd4c7eb8c054ca12e04623358">&#9670;&nbsp;</a></span>kvm_timer_should_notify_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_timer_should_notify_user </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l00860">860</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;{</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="keyword">struct </span><a class="code" href="structarch__timer__context.html">arch_timer_context</a> *vtimer = <a class="code" href="arm__arch__timer_8h.html#ac0234ea189669eb84d8263946a9d60d6">vcpu_vtimer</a>(<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keyword">struct </span><a class="code" href="structarch__timer__context.html">arch_timer_context</a> *ptimer = <a class="code" href="arm__arch__timer_8h.html#a4d166b83ceabb05615e40bf0c219cfbc">vcpu_ptimer</a>(<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="keyword">struct </span>kvm_sync_regs *sregs = &amp;vcpu-&gt;run-&gt;s.regs;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="keywordtype">bool</span> vlevel, plevel;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160; </div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordflow">if</span> (likely(<a class="code" href="arm__vgic_8h.html#a28961fa9a6313f335b274e0fac503bcf">irqchip_in_kernel</a>(vcpu-&gt;kvm)))</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    vlevel = sregs-&gt;device_irq_level &amp; KVM_ARM_DEV_EL1_VTIMER;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    plevel = sregs-&gt;device_irq_level &amp; KVM_ARM_DEV_EL1_PTIMER;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="arch__timer_8c.html#a64a4d2f3d2a9b83524edda4b27246092">kvm_timer_should_fire</a>(vtimer) != vlevel ||</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;           <a class="code" href="arch__timer_8c.html#a64a4d2f3d2a9b83524edda4b27246092">kvm_timer_should_fire</a>(ptimer) != plevel;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;}</div>
<div class="ttc" id="aarch__timer_8c_html_a64a4d2f3d2a9b83524edda4b27246092"><div class="ttname"><a href="arch__timer_8c.html#a64a4d2f3d2a9b83524edda4b27246092">kvm_timer_should_fire</a></div><div class="ttdeci">static bool kvm_timer_should_fire(struct arch_timer_context *timer_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00380">arch_timer.c:380</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a939939efd4c7eb8c054ca12e04623358_cgraph.png" border="0" usemap="#aarm__arch__timer_8h_a939939efd4c7eb8c054ca12e04623358_cgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a939939efd4c7eb8c054ca12e04623358_cgraph" id="aarm__arch__timer_8h_a939939efd4c7eb8c054ca12e04623358_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,228,108"/>
<area shape="rect" href="arch__timer_8c.html#a64a4d2f3d2a9b83524edda4b27246092" title=" " alt="" coords="276,81,447,108"/>
<area shape="rect" href="arch__timer_8c.html#ac9f7917175f1d6031a77dcbc82f9ee98" title=" " alt="" coords="499,5,665,32"/>
<area shape="rect" href="arch__timer_8c.html#ae722c5e3eba2098c012b2cdc4d74bf9f" title=" " alt="" coords="495,56,669,83"/>
<area shape="rect" href="arch__timer_8c.html#a848ba80b4ffee7a071e37abb241262cd" title=" " alt="" coords="523,107,641,133"/>
<area shape="rect" href="arch__timer_8c.html#a7f5f777b74b5c9ec6e13d4f7576d7f43" title=" " alt="" coords="517,157,647,184"/>
<area shape="rect" href="arch__timer_8c.html#ad7dab91af9f69654aa27010f96125c13" title=" " alt="" coords="717,56,825,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a939939efd4c7eb8c054ca12e04623358_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a939939efd4c7eb8c054ca12e04623358_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a939939efd4c7eb8c054ca12e04623358_icgraph" id="aarm__arch__timer_8h_a939939efd4c7eb8c054ca12e04623358_icgraph">
<area shape="rect" title=" " alt="" coords="637,5,860,32"/>
<area shape="rect" href="arm_8c.html#a545524d72330cd45dae4f51a686943c0" title=" " alt="" coords="412,5,589,32"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a6ae73bff466fcdc60319f9726d53b571"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ae73bff466fcdc60319f9726d53b571">&#9670;&nbsp;</a></span>kvm_timer_sync_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_timer_sync_user </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l00927">927</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;{</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keyword">struct </span><a class="code" href="structarch__timer__cpu.html">arch_timer_cpu</a> *timer = <a class="code" href="arm__arch__timer_8h.html#a0a8e9eb158c9a2fbc985fc1f47057b00">vcpu_timer</a>(vcpu);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160; </div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordflow">if</span> (unlikely(!timer-&gt;<a class="code" href="structarch__timer__cpu.html#a74afd9f2e05c191d58b73bfb53cf9e9d">enabled</a>))</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="keywordflow">if</span> (unlikely(!<a class="code" href="arm__vgic_8h.html#a28961fa9a6313f335b274e0fac503bcf">irqchip_in_kernel</a>(vcpu-&gt;kvm)))</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <a class="code" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0">unmask_vtimer_irq_user</a>(vcpu);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;}</div>
<div class="ttc" id="aarch__timer_8c_html_a7af96c32754607120bf365569aac71c0"><div class="ttname"><a href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0">unmask_vtimer_irq_user</a></div><div class="ttdeci">static void unmask_vtimer_irq_user(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00914">arch_timer.c:914</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a6ae73bff466fcdc60319f9726d53b571_cgraph.png" border="0" usemap="#aarm__arch__timer_8h_a6ae73bff466fcdc60319f9726d53b571_cgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a6ae73bff466fcdc60319f9726d53b571_cgraph" id="aarm__arch__timer_8h_a6ae73bff466fcdc60319f9726d53b571_cgraph">
<area shape="rect" title=" " alt="" coords="5,259,171,285"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="219,259,401,285"/>
<area shape="rect" href="arch__timer_8c.html#a64a4d2f3d2a9b83524edda4b27246092" title=" " alt="" coords="449,107,620,133"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="450,259,619,285"/>
<area shape="rect" href="arch__timer_8c.html#ae906d98d68ae56770507afe2e63ade68" title=" " alt="" coords="461,310,608,351"/>
<area shape="rect" href="arch__timer_8c.html#ac9f7917175f1d6031a77dcbc82f9ee98" title=" " alt="" coords="672,107,839,133"/>
<area shape="rect" href="arch__timer_8c.html#ae722c5e3eba2098c012b2cdc4d74bf9f" title=" " alt="" coords="668,157,843,184"/>
<area shape="rect" href="arch__timer_8c.html#a848ba80b4ffee7a071e37abb241262cd" title=" " alt="" coords="696,5,815,32"/>
<area shape="rect" href="arch__timer_8c.html#a7f5f777b74b5c9ec6e13d4f7576d7f43" title=" " alt="" coords="691,56,820,83"/>
<area shape="rect" href="arch__timer_8c.html#ad7dab91af9f69654aa27010f96125c13" title=" " alt="" coords="923,107,1031,133"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="679,259,831,285"/>
<area shape="rect" href="arch__timer_8c.html#a4f7db088b5aab3a8a6013b7f6fd12fa0" title=" " alt="" coords="686,309,825,336"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="926,208,1027,235"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="921,389,1032,416"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="2833,769,2935,796"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="2799,549,2969,576"/>
<area shape="rect" href="vgic_8c.html#a19d9c44a40cc76ccbd25bd8e0ec38a08" title=" " alt="" coords="891,157,1063,184"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="1957,208,2057,235"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="3031,368,3166,395"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="1111,469,1188,496"/>
<area shape="rect" href="vgic-init_8c.html#a0f9be5cc88c88f6c0180c53b72818d3b" title=" " alt="" coords="1255,645,1399,672"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="1236,579,1417,621"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e" title=" " alt="" coords="2410,528,2513,555"/>
<area shape="rect" href="vgic-init_8c.html#a2eee0060a3bdcd2a9e8fe1451a3a3fc2" title=" " alt="" coords="1239,360,1414,387"/>
<area shape="rect" href="vgic-debug_8c.html#a42534d23071b4f3c441c5f82f9e5c1ce" title=" " alt="" coords="1265,411,1389,437"/>
<area shape="rect" href="vgic-its_8c.html#afd97b5d03d2b30ae4481443cdea2e739" title=" " alt="" coords="1252,462,1401,503"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a839b15883ba8f9de35a03ffce32fdf7f" title=" " alt="" coords="1909,351,2104,377"/>
<area shape="rect" href="vgic-v4_8c.html#a802a906ad744a75b5af33bbd6b31237c" title=" " alt="" coords="1277,696,1377,723"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="1479,587,1634,613"/>
<area shape="rect" href="irqchip_8c.html#a5ae37186e6e6d1594767f83df8bab64a" title=" " alt="" coords="1696,583,1861,609"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="1703,633,1855,660"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="1921,633,2093,660"/>
<area shape="rect" href="vgic-irqfd_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="2191,605,2301,632"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="2177,745,2315,772"/>
<area shape="rect" href="vgic-irqfd_8c.html#a93415dbe2d5c7166c8f3f91be7c5d5da" title=" " alt="" coords="2388,633,2535,660"/>
<area shape="rect" href="vgic-its_8c.html#a53bf66e96dae9553e637fa69e8835365" title=" " alt="" coords="2388,583,2535,609"/>
<area shape="rect" href="vgic-its_8c.html#a352c8627ccf81a8154ae2275c7d50659" title=" " alt="" coords="2583,601,2751,642"/>
<area shape="rect" href="vgic-its_8c.html#ad62375be0591178764e98b79cd7217bf" title=" " alt="" coords="2590,549,2743,576"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="3017,769,3180,796"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="3268,769,3396,796"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="3037,692,3160,719"/>
<area shape="rect" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247" title=" " alt="" coords="3027,549,3170,576"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="3228,692,3436,719"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="3255,641,3409,668"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="3274,549,3390,576"/>
<area shape="rect" href="vgic-v2_8c.html#a4e8ee3d5f7c8fadbf0a645df67a1c5a2" title=" " alt="" coords="1495,411,1618,437"/>
<area shape="rect" href="vgic-v3_8c.html#abe9a2245dfa0d76d61c99b60f714a513" title=" " alt="" coords="1495,360,1618,387"/>
<area shape="rect" href="vgic-v4_8c.html#af99c2f70dd91a57879b3a2f583e49a4a" title=" " alt="" coords="1465,696,1648,723"/>
<area shape="rect" href="vgic-v4_8c.html#ac805e466fa8f454112c11904ef8d41ce" title=" " alt="" coords="1487,645,1627,672"/>
<area shape="rect" href="vgic-v4_8c.html#ac22161596c9858cc700bab08c03fc422" title=" " alt="" coords="2152,693,2340,720"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a6ae73bff466fcdc60319f9726d53b571_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a6ae73bff466fcdc60319f9726d53b571_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a6ae73bff466fcdc60319f9726d53b571_icgraph" id="aarm__arch__timer_8h_a6ae73bff466fcdc60319f9726d53b571_icgraph">
<area shape="rect" title=" " alt="" coords="412,5,577,32"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a629de40452a9be84148e3c8442a80db6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a629de40452a9be84148e3c8442a80db6">&#9670;&nbsp;</a></span>kvm_timer_update_run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_timer_update_run </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l00430">430</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;{</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keyword">struct </span><a class="code" href="structarch__timer__context.html">arch_timer_context</a> *vtimer = <a class="code" href="arm__arch__timer_8h.html#ac0234ea189669eb84d8263946a9d60d6">vcpu_vtimer</a>(<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keyword">struct </span><a class="code" href="structarch__timer__context.html">arch_timer_context</a> *ptimer = <a class="code" href="arm__arch__timer_8h.html#a4d166b83ceabb05615e40bf0c219cfbc">vcpu_ptimer</a>(<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keyword">struct </span>kvm_sync_regs *regs = &amp;vcpu-&gt;run-&gt;s.regs;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="comment">/* Populate the device bitmap with the timer states */</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    regs-&gt;device_irq_level &amp;= ~(KVM_ARM_DEV_EL1_VTIMER |</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                    KVM_ARM_DEV_EL1_PTIMER);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="arch__timer_8c.html#a64a4d2f3d2a9b83524edda4b27246092">kvm_timer_should_fire</a>(vtimer))</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        regs-&gt;device_irq_level |= KVM_ARM_DEV_EL1_VTIMER;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    if (<a class="code" href="arch__timer_8c.html#a64a4d2f3d2a9b83524edda4b27246092">kvm_timer_should_fire</a>(ptimer))</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        regs-&gt;device_irq_level |= KVM_ARM_DEV_EL1_PTIMER;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a629de40452a9be84148e3c8442a80db6_cgraph.png" border="0" usemap="#aarm__arch__timer_8h_a629de40452a9be84148e3c8442a80db6_cgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a629de40452a9be84148e3c8442a80db6_cgraph" id="aarm__arch__timer_8h_a629de40452a9be84148e3c8442a80db6_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,179,108"/>
<area shape="rect" href="arch__timer_8c.html#a64a4d2f3d2a9b83524edda4b27246092" title=" " alt="" coords="227,81,397,108"/>
<area shape="rect" href="arch__timer_8c.html#ac9f7917175f1d6031a77dcbc82f9ee98" title=" " alt="" coords="449,5,616,32"/>
<area shape="rect" href="arch__timer_8c.html#ae722c5e3eba2098c012b2cdc4d74bf9f" title=" " alt="" coords="445,56,620,83"/>
<area shape="rect" href="arch__timer_8c.html#a848ba80b4ffee7a071e37abb241262cd" title=" " alt="" coords="473,107,592,133"/>
<area shape="rect" href="arch__timer_8c.html#a7f5f777b74b5c9ec6e13d4f7576d7f43" title=" " alt="" coords="468,157,597,184"/>
<area shape="rect" href="arch__timer_8c.html#ad7dab91af9f69654aa27010f96125c13" title=" " alt="" coords="668,56,776,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a629de40452a9be84148e3c8442a80db6_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a629de40452a9be84148e3c8442a80db6_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a629de40452a9be84148e3c8442a80db6_icgraph" id="aarm__arch__timer_8h_a629de40452a9be84148e3c8442a80db6_icgraph">
<area shape="rect" title=" " alt="" coords="412,5,585,32"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="ab7dc50f59c235841d864ef598f814247"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7dc50f59c235841d864ef598f814247">&#9670;&nbsp;</a></span>kvm_timer_vcpu_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_timer_vcpu_init </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l01011">1011</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;{</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="keyword">struct </span><a class="code" href="structarch__timer__cpu.html">arch_timer_cpu</a> *timer = <a class="code" href="arm__arch__timer_8h.html#a0a8e9eb158c9a2fbc985fc1f47057b00">vcpu_timer</a>(vcpu);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa1cdb8b31cc17507227832f027c267e1d">NR_KVM_TIMERS</a>; i++)</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <a class="code" href="arch__timer_8c.html#a277ad23da04b884fe1d588984e372943">timer_context_init</a>(vcpu, i);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="comment">/* Synchronize offsets across timers of a VM if not already provided */</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="keywordflow">if</span> (!test_bit(KVM_ARCH_FLAG_VM_COUNTER_OFFSET, &amp;vcpu-&gt;kvm-&gt;arch.flags)) {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <a class="code" href="arch__timer_8c.html#aafe1b11938ff5abb30a790c16eb77c77">timer_set_offset</a>(<a class="code" href="arm__arch__timer_8h.html#ac0234ea189669eb84d8263946a9d60d6">vcpu_vtimer</a>(vcpu), <a class="code" href="arch__timer_8c.html#ac9f7917175f1d6031a77dcbc82f9ee98">kvm_phys_timer_read</a>());</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <a class="code" href="arch__timer_8c.html#aafe1b11938ff5abb30a790c16eb77c77">timer_set_offset</a>(<a class="code" href="arm__arch__timer_8h.html#a4d166b83ceabb05615e40bf0c219cfbc">vcpu_ptimer</a>(vcpu), 0);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160; </div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    hrtimer_init(&amp;timer-&gt;<a class="code" href="structarch__timer__cpu.html#a98d4e6056a6490bbaa1fe859bbbbb80f">bg_timer</a>, CLOCK_MONOTONIC, HRTIMER_MODE_ABS_HARD);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    timer-&gt;<a class="code" href="structarch__timer__cpu.html#a98d4e6056a6490bbaa1fe859bbbbb80f">bg_timer</a>.function = <a class="code" href="arch__timer_8c.html#aa5109f58e0ef877d3f053d0593359c1e">kvm_bg_timer_expire</a>;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;}</div>
<div class="ttc" id="aarch__timer_8c_html_a277ad23da04b884fe1d588984e372943"><div class="ttname"><a href="arch__timer_8c.html#a277ad23da04b884fe1d588984e372943">timer_context_init</a></div><div class="ttdeci">static void timer_context_init(struct kvm_vcpu *vcpu, int timerid)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00984">arch_timer.c:984</a></div></div>
<div class="ttc" id="aarch__timer_8c_html_aa5109f58e0ef877d3f053d0593359c1e"><div class="ttname"><a href="arch__timer_8c.html#aa5109f58e0ef877d3f053d0593359c1e">kvm_bg_timer_expire</a></div><div class="ttdeci">static enum hrtimer_restart kvm_bg_timer_expire(struct hrtimer *hrt)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00307">arch_timer.c:330</a></div></div>
<div class="ttc" id="astructarch__timer__cpu_html_a98d4e6056a6490bbaa1fe859bbbbb80f"><div class="ttname"><a href="structarch__timer__cpu.html#a98d4e6056a6490bbaa1fe859bbbbb80f">arch_timer_cpu::bg_timer</a></div><div class="ttdeci">struct hrtimer bg_timer</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00082">arm_arch_timer.h:91</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_ab7dc50f59c235841d864ef598f814247_cgraph.png" border="0" usemap="#aarm__arch__timer_8h_ab7dc50f59c235841d864ef598f814247_cgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_ab7dc50f59c235841d864ef598f814247_cgraph" id="aarm__arch__timer_8h_ab7dc50f59c235841d864ef598f814247_cgraph">
<area shape="rect" title=" " alt="" coords="5,284,164,311"/>
<area shape="rect" href="arch__timer_8c.html#aa5109f58e0ef877d3f053d0593359c1e" title=" " alt="" coords="212,132,376,159"/>
<area shape="rect" href="arch__timer_8c.html#ac9f7917175f1d6031a77dcbc82f9ee98" title=" " alt="" coords="888,183,1055,209"/>
<area shape="rect" href="arch__timer_8c.html#a277ad23da04b884fe1d588984e372943" title=" " alt="" coords="223,309,365,336"/>
<area shape="rect" href="arch__timer_8c.html#aafe1b11938ff5abb30a790c16eb77c77" title=" " alt="" coords="230,360,358,387"/>
<area shape="rect" href="arch__timer_8c.html#aeed64583773b01dafc949df326d17db3" title=" " alt="" coords="424,107,621,133"/>
<area shape="rect" href="arch__timer_8c.html#ae722c5e3eba2098c012b2cdc4d74bf9f" title=" " alt="" coords="435,157,610,184"/>
<area shape="rect" href="arch__timer_8c.html#ad2a704b646b65309708c3a7f6ab70913" title=" " alt="" coords="481,208,565,235"/>
<area shape="rect" href="arch__timer_8c.html#ad210f5f7b0361777290f8b36f023a518" title=" " alt="" coords="442,5,603,32"/>
<area shape="rect" href="arch__timer_8c.html#a9d0120f96e99b20be8023dad5c6a7f0b" title=" " alt="" coords="467,56,578,83"/>
<area shape="rect" href="arch__timer_8c.html#a6c290bf8212ea1388cdb4a839eae7228" title=" " alt="" coords="669,49,840,90"/>
<area shape="rect" href="arch__timer_8c.html#a848ba80b4ffee7a071e37abb241262cd" title=" " alt="" coords="695,115,814,141"/>
<area shape="rect" href="arch__timer_8c.html#a7f5f777b74b5c9ec6e13d4f7576d7f43" title=" " alt="" coords="907,56,1036,83"/>
<area shape="rect" href="arch__timer_8c.html#ad7dab91af9f69654aa27010f96125c13" title=" " alt="" coords="701,165,809,192"/>
<area shape="rect" href="arch__timer_8c.html#abc4d9a1d61348137665ab9a6b18cfa5b" title=" " alt="" coords="445,309,600,336"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_ab7dc50f59c235841d864ef598f814247_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_ab7dc50f59c235841d864ef598f814247_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_ab7dc50f59c235841d864ef598f814247_icgraph" id="aarm__arch__timer_8h_ab7dc50f59c235841d864ef598f814247_icgraph">
<area shape="rect" title=" " alt="" coords="473,5,632,32"/>
<area shape="rect" href="arm_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="253,5,425,32"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="5,5,205,32"/>
</map>
</div>

</div>
</div>
<a id="a4bf6ac76380146820b45b06feb3eab27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bf6ac76380146820b45b06feb3eab27">&#9670;&nbsp;</a></span>kvm_timer_vcpu_load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_timer_vcpu_load </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l00826">826</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;{</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keyword">struct </span><a class="code" href="structarch__timer__cpu.html">arch_timer_cpu</a> *timer = <a class="code" href="arm__arch__timer_8h.html#a0a8e9eb158c9a2fbc985fc1f47057b00">vcpu_timer</a>(vcpu);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtimer__map.html">timer_map</a> map;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160; </div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordflow">if</span> (unlikely(!timer-&gt;<a class="code" href="structarch__timer__cpu.html#a74afd9f2e05c191d58b73bfb53cf9e9d">enabled</a>))</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <a class="code" href="arch__timer_8c.html#ad7e756ea5077e85e2a10bfe35543ce21">get_timer_map</a>(vcpu, &amp;map);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160; </div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keywordflow">if</span> (static_branch_likely(&amp;has_gic_active_state)) {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <span class="keywordflow">if</span> (vcpu_has_nv(vcpu))</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <a class="code" href="arch__timer_8c.html#a9f34b892b5c9b1e79065006b4353c76e">kvm_timer_vcpu_load_nested_switch</a>(vcpu, &amp;map);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; </div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <a class="code" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf">kvm_timer_vcpu_load_gic</a>(map.direct_vtimer);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        <span class="keywordflow">if</span> (map.direct_ptimer)</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            <a class="code" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf">kvm_timer_vcpu_load_gic</a>(map.direct_ptimer);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <a class="code" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520">kvm_timer_vcpu_load_nogic</a>(vcpu);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160; </div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <a class="code" href="arch__timer_8c.html#aabed21346a0fc6b04d9fc11ee754d19a">kvm_timer_unblocking</a>(vcpu);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <a class="code" href="arch__timer_8c.html#a7e1e1c3a85e2d375519e32f57a54e301">timer_restore_state</a>(map.direct_vtimer);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">if</span> (map.direct_ptimer)</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <a class="code" href="arch__timer_8c.html#a7e1e1c3a85e2d375519e32f57a54e301">timer_restore_state</a>(map.direct_ptimer);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">if</span> (map.emul_vtimer)</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <a class="code" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a">timer_emulate</a>(map.emul_vtimer);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keywordflow">if</span> (map.emul_ptimer)</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <a class="code" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a">timer_emulate</a>(map.emul_ptimer);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <a class="code" href="arch__timer_8c.html#af19caca81734fff66363042c1e8e2181">timer_set_traps</a>(vcpu, &amp;map);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;}</div>
<div class="ttc" id="aarch__timer_8c_html_a1c4f03de391e27f5ba91d10b6dfab0bf"><div class="ttname"><a href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf">kvm_timer_vcpu_load_gic</a></div><div class="ttdeci">static void kvm_timer_vcpu_load_gic(struct arch_timer_context *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00655">arch_timer.c:655</a></div></div>
<div class="ttc" id="aarch__timer_8c_html_a8fb06d125602c5b00fa9c213aa7e2520"><div class="ttname"><a href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520">kvm_timer_vcpu_load_nogic</a></div><div class="ttdeci">static void kvm_timer_vcpu_load_nogic(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00676">arch_timer.c:676</a></div></div>
<div class="ttc" id="aarch__timer_8c_html_a9f34b892b5c9b1e79065006b4353c76e"><div class="ttname"><a href="arch__timer_8c.html#a9f34b892b5c9b1e79065006b4353c76e">kvm_timer_vcpu_load_nested_switch</a></div><div class="ttdeci">static void kvm_timer_vcpu_load_nested_switch(struct kvm_vcpu *vcpu, struct timer_map *map)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00713">arch_timer.c:713</a></div></div>
<div class="ttc" id="aarch__timer_8c_html_aabed21346a0fc6b04d9fc11ee754d19a"><div class="ttname"><a href="arch__timer_8c.html#aabed21346a0fc6b04d9fc11ee754d19a">kvm_timer_unblocking</a></div><div class="ttdeci">static void kvm_timer_unblocking(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00596">arch_timer.c:596</a></div></div>
<div class="ttc" id="aarch__timer_8c_html_af19caca81734fff66363042c1e8e2181"><div class="ttname"><a href="arch__timer_8c.html#af19caca81734fff66363042c1e8e2181">timer_set_traps</a></div><div class="ttdeci">static void timer_set_traps(struct kvm_vcpu *vcpu, struct timer_map *map)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00764">arch_timer.c:764</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a4bf6ac76380146820b45b06feb3eab27_cgraph.png" border="0" usemap="#aarm__arch__timer_8h_a4bf6ac76380146820b45b06feb3eab27_cgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a4bf6ac76380146820b45b06feb3eab27_cgraph" id="aarm__arch__timer_8h_a4bf6ac76380146820b45b06feb3eab27_cgraph">
<area shape="rect" title=" " alt="" coords="5,296,172,323"/>
<area shape="rect" href="arch__timer_8c.html#ad7e756ea5077e85e2a10bfe35543ce21" title=" " alt="" coords="255,64,377,91"/>
<area shape="rect" href="arch__timer_8c.html#aabed21346a0fc6b04d9fc11ee754d19a" title=" " alt="" coords="231,115,401,141"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="220,484,412,511"/>
<area shape="rect" href="arch__timer_8c.html#a9f34b892b5c9b1e79065006b4353c76e" title=" " alt="" coords="475,698,642,739"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="233,418,399,459"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="257,347,375,373"/>
<area shape="rect" href="arch__timer_8c.html#a7e1e1c3a85e2d375519e32f57a54e301" title=" " alt="" coords="483,216,634,243"/>
<area shape="rect" href="arch__timer_8c.html#af19caca81734fff66363042c1e8e2181" title=" " alt="" coords="743,5,867,32"/>
<area shape="rect" href="arch__timer_8c.html#ad19b9cbace853dd534bf572a35f83710" title=" " alt="" coords="490,115,627,141"/>
<area shape="rect" href="arch__timer_8c.html#a64a4d2f3d2a9b83524edda4b27246092" title=" " alt="" coords="473,427,644,453"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="474,480,643,507"/>
<area shape="rect" href="vgic_8c.html#a1273f536f3d378a0b259e76591471f7b" title=" " alt="" coords="711,629,898,656"/>
<area shape="rect" href="arch__timer_8c.html#ae906d98d68ae56770507afe2e63ade68" title=" " alt="" coords="485,582,632,623"/>
<area shape="rect" href="arch__timer_8c.html#ac9f7917175f1d6031a77dcbc82f9ee98" title=" " alt="" coords="962,357,1129,384"/>
<area shape="rect" href="arch__timer_8c.html#ae722c5e3eba2098c012b2cdc4d74bf9f" title=" " alt="" coords="717,427,892,453"/>
<area shape="rect" href="arch__timer_8c.html#a848ba80b4ffee7a071e37abb241262cd" title=" " alt="" coords="745,325,864,352"/>
<area shape="rect" href="arch__timer_8c.html#a7f5f777b74b5c9ec6e13d4f7576d7f43" title=" " alt="" coords="981,212,1110,239"/>
<area shape="rect" href="arch__timer_8c.html#ad7dab91af9f69654aa27010f96125c13" title=" " alt="" coords="991,277,1099,304"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="729,579,881,605"/>
<area shape="rect" href="arch__timer_8c.html#a4f7db088b5aab3a8a6013b7f6fd12fa0" title=" " alt="" coords="735,528,874,555"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="995,629,1096,656"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="990,579,1101,605"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="995,680,1096,707"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="960,528,1131,555"/>
<area shape="rect" href="vgic_8c.html#a19d9c44a40cc76ccbd25bd8e0ec38a08" title=" " alt="" coords="959,477,1131,504"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="1218,604,1318,631"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="1421,464,1555,491"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="1229,655,1307,681"/>
<area shape="rect" href="vgic-init_8c.html#a0f9be5cc88c88f6c0180c53b72818d3b" title=" " alt="" coords="1416,692,1560,719"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="1397,743,1579,785"/>
<area shape="rect" href="vgic-init_8c.html#a2eee0060a3bdcd2a9e8fe1451a3a3fc2" title=" " alt="" coords="1401,540,1575,567"/>
<area shape="rect" href="vgic-debug_8c.html#a42534d23071b4f3c441c5f82f9e5c1ce" title=" " alt="" coords="1426,591,1550,617"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e" title=" " alt="" coords="1437,641,1539,668"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="1187,739,1349,765"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="1424,809,1552,836"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1207,503,1329,529"/>
<area shape="rect" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247" title=" " alt="" coords="1197,553,1339,580"/>
<area shape="rect" href="vgic_8c.html#a0a11de94338771a6d53dd409d4f4c49d" title=" " alt="" coords="730,680,879,707"/>
<area shape="rect" href="vgic_8c.html#ab4243e0ac375259b39c04a6cc6266a9f" title=" " alt="" coords="713,731,896,757"/>
<area shape="rect" href="vgic_8c.html#a4199ace0bb639bc69d06a2ce1ee0d1ff" title=" " alt="" coords="705,781,904,808"/>
<area shape="rect" href="vgic_8c.html#a727bab6843a2191df705d005fa7f764f" title=" " alt="" coords="973,731,1118,757"/>
<area shape="rect" href="vgic_8c.html#aeaf2d7fa188efb40aab886a1e19f14d8" title=" " alt="" coords="965,781,1126,808"/>
<area shape="rect" href="arch__timer_8c.html#aeed64583773b01dafc949df326d17db3" title=" " alt="" coords="460,325,657,352"/>
<area shape="rect" href="arch__timer_8c.html#a00de950346bea7137e0f06522d67ab2b" title=" " alt="" coords="496,275,621,301"/>
<area shape="rect" href="arch__timer_8c.html#a6c290bf8212ea1388cdb4a839eae7228" title=" " alt="" coords="719,259,890,301"/>
<area shape="rect" href="arch__timer_8c.html#a6fcfce8307e73b5ae888edca334508aa" title=" " alt="" coords="757,56,852,83"/>
<area shape="rect" href="arch__timer_8c.html#a207ce56a4fe08e050e49e49334548e15" title=" " alt="" coords="757,107,852,133"/>
<area shape="rect" href="arm__arch__timer_8h.html#a656013ccf6829218e43edc9c3660c414" title=" " alt="" coords="997,31,1094,57"/>
<area shape="rect" href="nvhe_2timer-sr_8c.html#a73539c3eaa37749e44c40351913b9efb" title=" " alt="" coords="952,107,1139,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a4bf6ac76380146820b45b06feb3eab27_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a4bf6ac76380146820b45b06feb3eab27_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a4bf6ac76380146820b45b06feb3eab27_icgraph" id="aarm__arch__timer_8h_a4bf6ac76380146820b45b06feb3eab27_icgraph">
<area shape="rect" title=" " alt="" coords="1469,237,1636,264"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1263,237,1421,264"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="825,31,1021,57"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="1069,136,1215,163"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1077,237,1207,264"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="1085,376,1199,403"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="1098,300,1186,327"/>
<area shape="rect" href="handle__exit_8c.html#ae96aab7918301d55b908034db5855e3d" title=" " alt="" coords="617,5,751,32"/>
<area shape="rect" href="emulate-nested_8c.html#af5e2eb745d8ac6415fe941ebe754171d" title=" " alt="" coords="832,107,1015,133"/>
<area shape="rect" href="emulate-nested_8c.html#a5759b383dbf067b5e90235d5fd032ab5" title=" " alt="" coords="597,157,771,184"/>
<area shape="rect" href="handle__exit_8c.html#a5c24d46393da9651d3133e2377fd7a69" title=" " alt="" coords="636,56,732,83"/>
<area shape="rect" href="handle__exit_8c.html#aeaf983f5c40202edc8b07a76603330cd" title=" " alt="" coords="637,107,731,133"/>
<area shape="rect" href="sys__regs_8c.html#a315e661b6f1cb224596267000909a1ac" title=" " alt="" coords="384,145,543,172"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="835,161,1011,188"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="603,208,765,235"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,263,336,289"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="843,313,1004,340"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="384,197,543,238"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,288,129,315"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="591,313,777,340"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="884,415,963,441"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="628,415,740,441"/>
</map>
</div>

</div>
</div>
<a id="a0006e1b52ff819dd99be6dca260e52d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0006e1b52ff819dd99be6dca260e52d6">&#9670;&nbsp;</a></span>kvm_timer_vcpu_put()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_timer_vcpu_put </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l00877">877</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;{</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keyword">struct </span><a class="code" href="structarch__timer__cpu.html">arch_timer_cpu</a> *timer = <a class="code" href="arm__arch__timer_8h.html#a0a8e9eb158c9a2fbc985fc1f47057b00">vcpu_timer</a>(vcpu);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtimer__map.html">timer_map</a> map;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160; </div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">if</span> (unlikely(!timer-&gt;<a class="code" href="structarch__timer__cpu.html#a74afd9f2e05c191d58b73bfb53cf9e9d">enabled</a>))</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160; </div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <a class="code" href="arch__timer_8c.html#ad7e756ea5077e85e2a10bfe35543ce21">get_timer_map</a>(vcpu, &amp;map);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160; </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <a class="code" href="arch__timer_8c.html#a08b7dad9cb511eeaec5ab08e2a2ae1af">timer_save_state</a>(map.direct_vtimer);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">if</span> (map.direct_ptimer)</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <a class="code" href="arch__timer_8c.html#a08b7dad9cb511eeaec5ab08e2a2ae1af">timer_save_state</a>(map.direct_ptimer);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160; </div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">     * Cancel soft timer emulation, because the only case where we</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">     * need it after a vcpu_put is in the context of a sleeping VCPU, and</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">     * in that case we already factor in the deadline for the physical</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">     * timer when scheduling the bg_timer.</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment">     * In any case, we re-schedule the hrtimer for the physical timer when</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment">     * coming back to the VCPU thread in kvm_timer_vcpu_load().</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="keywordflow">if</span> (map.emul_vtimer)</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <a class="code" href="arch__timer_8c.html#ad19b9cbace853dd534bf572a35f83710">soft_timer_cancel</a>(&amp;map.emul_vtimer-&gt;hrtimer);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keywordflow">if</span> (map.emul_ptimer)</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <a class="code" href="arch__timer_8c.html#ad19b9cbace853dd534bf572a35f83710">soft_timer_cancel</a>(&amp;map.emul_ptimer-&gt;hrtimer);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="keywordflow">if</span> (kvm_vcpu_is_blocking(vcpu))</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        <a class="code" href="arch__timer_8c.html#a0abce4d3df0f10be896c5ff0cb489041">kvm_timer_blocking</a>(vcpu);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;}</div>
<div class="ttc" id="aarch__timer_8c_html_a0abce4d3df0f10be896c5ff0cb489041"><div class="ttname"><a href="arch__timer_8c.html#a0abce4d3df0f10be896c5ff0cb489041">kvm_timer_blocking</a></div><div class="ttdeci">static void kvm_timer_blocking(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00571">arch_timer.c:571</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a0006e1b52ff819dd99be6dca260e52d6_cgraph.png" border="0" usemap="#aarm__arch__timer_8h_a0006e1b52ff819dd99be6dca260e52d6_cgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a0006e1b52ff819dd99be6dca260e52d6_cgraph" id="aarm__arch__timer_8h_a0006e1b52ff819dd99be6dca260e52d6_cgraph">
<area shape="rect" title=" " alt="" coords="5,132,164,159"/>
<area shape="rect" href="arch__timer_8c.html#ad7e756ea5077e85e2a10bfe35543ce21" title=" " alt="" coords="444,5,565,32"/>
<area shape="rect" href="arch__timer_8c.html#a0abce4d3df0f10be896c5ff0cb489041" title=" " alt="" coords="212,107,367,133"/>
<area shape="rect" href="arch__timer_8c.html#ad19b9cbace853dd534bf572a35f83710" title=" " alt="" coords="221,157,358,184"/>
<area shape="rect" href="arch__timer_8c.html#a08b7dad9cb511eeaec5ab08e2a2ae1af" title=" " alt="" coords="222,335,357,361"/>
<area shape="rect" href="arch__timer_8c.html#adbe9b97af2fe25eb9d48e231bba23fcf" title=" " alt="" coords="415,56,595,83"/>
<area shape="rect" href="arch__timer_8c.html#ae722c5e3eba2098c012b2cdc4d74bf9f" title=" " alt="" coords="417,107,592,133"/>
<area shape="rect" href="arch__timer_8c.html#a00de950346bea7137e0f06522d67ab2b" title=" " alt="" coords="442,157,567,184"/>
<area shape="rect" href="arch__timer_8c.html#ad210f5f7b0361777290f8b36f023a518" title=" " alt="" coords="424,208,585,235"/>
<area shape="rect" href="arch__timer_8c.html#ad7dab91af9f69654aa27010f96125c13" title=" " alt="" coords="682,107,790,133"/>
<area shape="rect" href="arch__timer_8c.html#a6fcfce8307e73b5ae888edca334508aa" title=" " alt="" coords="457,259,552,285"/>
<area shape="rect" href="arch__timer_8c.html#a207ce56a4fe08e050e49e49334548e15" title=" " alt="" coords="457,309,552,336"/>
<area shape="rect" href="arch__timer_8c.html#a7f5f777b74b5c9ec6e13d4f7576d7f43" title=" " alt="" coords="440,360,569,387"/>
<area shape="rect" href="arch__timer_8c.html#a2e57f3714ec062699e29ae4e13d80dac" title=" " alt="" coords="451,411,558,437"/>
<area shape="rect" href="arch__timer_8c.html#ab50c2af796cc5134fa3942c857dd4fb7" title=" " alt="" coords="445,461,564,488"/>
<area shape="rect" href="arm__arch__timer_8h.html#a656013ccf6829218e43edc9c3660c414" title=" " alt="" coords="687,259,785,285"/>
<area shape="rect" href="nvhe_2timer-sr_8c.html#a73539c3eaa37749e44c40351913b9efb" title=" " alt="" coords="643,309,829,336"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a0006e1b52ff819dd99be6dca260e52d6_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a0006e1b52ff819dd99be6dca260e52d6_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a0006e1b52ff819dd99be6dca260e52d6_icgraph" id="aarm__arch__timer_8h_a0006e1b52ff819dd99be6dca260e52d6_icgraph">
<area shape="rect" title=" " alt="" coords="1463,237,1621,264"/>
<area shape="rect" href="arm_8c.html#a9235365ce64f215b1e024f26d96537cc" title=" " alt="" coords="1263,237,1415,264"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="825,31,1021,57"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="1069,136,1215,163"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1077,237,1207,264"/>
<area shape="rect" href="kvm__main_8c.html#a5f5097640155787fc088aa47b94da0a7" title=" " alt="" coords="1080,376,1204,403"/>
<area shape="rect" href="kvm__main_8c.html#a16e0f63dd5f0d556ed1c9c9999256f85" title=" " alt="" coords="1101,300,1183,327"/>
<area shape="rect" href="handle__exit_8c.html#ae96aab7918301d55b908034db5855e3d" title=" " alt="" coords="617,5,751,32"/>
<area shape="rect" href="emulate-nested_8c.html#af5e2eb745d8ac6415fe941ebe754171d" title=" " alt="" coords="832,107,1015,133"/>
<area shape="rect" href="emulate-nested_8c.html#a5759b383dbf067b5e90235d5fd032ab5" title=" " alt="" coords="597,157,771,184"/>
<area shape="rect" href="handle__exit_8c.html#a5c24d46393da9651d3133e2377fd7a69" title=" " alt="" coords="636,56,732,83"/>
<area shape="rect" href="handle__exit_8c.html#aeaf983f5c40202edc8b07a76603330cd" title=" " alt="" coords="637,107,731,133"/>
<area shape="rect" href="sys__regs_8c.html#a315e661b6f1cb224596267000909a1ac" title=" " alt="" coords="384,145,543,172"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="835,161,1011,188"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="603,208,765,235"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,263,336,289"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="843,313,1004,340"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="384,197,543,238"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,288,129,315"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="591,313,777,340"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="884,415,963,441"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="628,415,740,441"/>
</map>
</div>

</div>
</div>
<a id="a11b9b6e6338bbec6085332661c934e91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11b9b6e6338bbec6085332661c934e91">&#9670;&nbsp;</a></span>kvm_timer_vcpu_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_timer_vcpu_reset </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l00938">938</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;{</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="keyword">struct </span><a class="code" href="structarch__timer__cpu.html">arch_timer_cpu</a> *timer = <a class="code" href="arm__arch__timer_8h.html#a0a8e9eb158c9a2fbc985fc1f47057b00">vcpu_timer</a>(vcpu);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtimer__map.html">timer_map</a> map;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160; </div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <a class="code" href="arch__timer_8c.html#ad7e756ea5077e85e2a10bfe35543ce21">get_timer_map</a>(vcpu, &amp;map);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160; </div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="comment">     * The bits in CNTV_CTL are architecturally reset to UNKNOWN for ARMv8</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment">     * and to 0 for ARMv7.  We provide an implementation that always</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment">     * resets the timer to be disabled and unmasked and is compliant with</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment">     * the ARMv7 architecture.</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="arch__timer_8c.html#ad2a704b646b65309708c3a7f6ab70913">nr_timers</a>(vcpu); i++)</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <a class="code" href="arch__timer_8c.html#a2e57f3714ec062699e29ae4e13d80dac">timer_set_ctl</a>(<a class="code" href="arm__arch__timer_8h.html#ac8605bb196d5ea061e4acefd2b78046d">vcpu_get_timer</a>(vcpu, i), 0);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160; </div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment">     * A vcpu running at EL2 is in charge of the offset applied to</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment">     * the virtual timer, so use the physical VM offset, and point</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">     * the vcpu offset to CNTVOFF_EL2.</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keywordflow">if</span> (vcpu_has_nv(vcpu)) {</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <span class="keyword">struct </span><a class="code" href="structarch__timer__offset.html">arch_timer_offset</a> *offs = &amp;<a class="code" href="arm__arch__timer_8h.html#ac0234ea189669eb84d8263946a9d60d6">vcpu_vtimer</a>(vcpu)-&gt;offset;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        offs-&gt;<a class="code" href="structarch__timer__offset.html#aef75d8a753f81ef4b91da22e238c8937">vcpu_offset</a> = &amp;__vcpu_sys_reg(vcpu, CNTVOFF_EL2);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        offs-&gt;<a class="code" href="structarch__timer__offset.html#a3965388f4164e1a5ad8ef64b7e17f4df">vm_offset</a> = &amp;vcpu-&gt;kvm-&gt;arch.timer_data.poffset;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    }</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160; </div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="keywordflow">if</span> (timer-&gt;<a class="code" href="structarch__timer__cpu.html#a74afd9f2e05c191d58b73bfb53cf9e9d">enabled</a>) {</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="arch__timer_8c.html#ad2a704b646b65309708c3a7f6ab70913">nr_timers</a>(vcpu); i++)</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;            <a class="code" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f">kvm_timer_update_irq</a>(vcpu, <span class="keyword">false</span>,</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                         <a class="code" href="arm__arch__timer_8h.html#ac8605bb196d5ea061e4acefd2b78046d">vcpu_get_timer</a>(vcpu, i));</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160; </div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="arm__vgic_8h.html#a28961fa9a6313f335b274e0fac503bcf">irqchip_in_kernel</a>(vcpu-&gt;kvm)) {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;            <a class="code" href="vgic_8c.html#a37d0e0f4c579bc38afe8d5f91529a772">kvm_vgic_reset_mapped_irq</a>(vcpu, <a class="code" href="arm__arch__timer_8h.html#af3a36366dd2b9635e5973158fa6414c7">timer_irq</a>(map.direct_vtimer));</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            <span class="keywordflow">if</span> (map.direct_ptimer)</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                <a class="code" href="vgic_8c.html#a37d0e0f4c579bc38afe8d5f91529a772">kvm_vgic_reset_mapped_irq</a>(vcpu, <a class="code" href="arm__arch__timer_8h.html#af3a36366dd2b9635e5973158fa6414c7">timer_irq</a>(map.direct_ptimer));</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        }</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    }</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160; </div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordflow">if</span> (map.emul_vtimer)</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <a class="code" href="arch__timer_8c.html#ad19b9cbace853dd534bf572a35f83710">soft_timer_cancel</a>(&amp;map.emul_vtimer-&gt;hrtimer);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">if</span> (map.emul_ptimer)</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        <a class="code" href="arch__timer_8c.html#ad19b9cbace853dd534bf572a35f83710">soft_timer_cancel</a>(&amp;map.emul_ptimer-&gt;hrtimer);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;}</div>
<div class="ttc" id="aarch__timer_8c_html_a2e57f3714ec062699e29ae4e13d80dac"><div class="ttname"><a href="arch__timer_8c.html#a2e57f3714ec062699e29ae4e13d80dac">timer_set_ctl</a></div><div class="ttdeci">static void timer_set_ctl(struct arch_timer_context *ctxt, u32 ctl)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00119">arch_timer.c:119</a></div></div>
<div class="ttc" id="aarch__timer_8c_html_a5abc04b494763cd0814855753e56671f"><div class="ttname"><a href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f">kvm_timer_update_irq</a></div><div class="ttdeci">static void kvm_timer_update_irq(struct kvm_vcpu *vcpu, bool new_level, struct arch_timer_context *timer_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00445">arch_timer.c:445</a></div></div>
<div class="ttc" id="aarch__timer_8c_html_ad2a704b646b65309708c3a7f6ab70913"><div class="ttname"><a href="arch__timer_8c.html#ad2a704b646b65309708c3a7f6ab70913">nr_timers</a></div><div class="ttdeci">static int nr_timers(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="arch__timer_8c_source.html#l00058">arch_timer.c:58</a></div></div>
<div class="ttc" id="astructarch__timer__offset_html"><div class="ttname"><a href="structarch__timer__offset.html">arch_timer_offset</a></div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00030">arm_arch_timer.h:30</a></div></div>
<div class="ttc" id="astructarch__timer__offset_html_a3965388f4164e1a5ad8ef64b7e17f4df"><div class="ttname"><a href="structarch__timer__offset.html#a3965388f4164e1a5ad8ef64b7e17f4df">arch_timer_offset::vm_offset</a></div><div class="ttdeci">u64 * vm_offset</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00035">arm_arch_timer.h:35</a></div></div>
<div class="ttc" id="astructarch__timer__offset_html_aef75d8a753f81ef4b91da22e238c8937"><div class="ttname"><a href="structarch__timer__offset.html#aef75d8a753f81ef4b91da22e238c8937">arch_timer_offset::vcpu_offset</a></div><div class="ttdeci">u64 * vcpu_offset</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00040">arm_arch_timer.h:40</a></div></div>
<div class="ttc" id="avgic_8c_html_a37d0e0f4c579bc38afe8d5f91529a772"><div class="ttname"><a href="vgic_8c.html#a37d0e0f4c579bc38afe8d5f91529a772">kvm_vgic_reset_mapped_irq</a></div><div class="ttdeci">void kvm_vgic_reset_mapped_irq(struct kvm_vcpu *vcpu, u32 vintid)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8c_source.html#l00540">vgic.c:540</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a11b9b6e6338bbec6085332661c934e91_cgraph.png" border="0" usemap="#aarm__arch__timer_8h_a11b9b6e6338bbec6085332661c934e91_cgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a11b9b6e6338bbec6085332661c934e91_cgraph" id="aarm__arch__timer_8h_a11b9b6e6338bbec6085332661c934e91_cgraph">
<area shape="rect" title=" " alt="" coords="5,620,176,647"/>
<area shape="rect" href="arch__timer_8c.html#ad7e756ea5077e85e2a10bfe35543ce21" title=" " alt="" coords="248,493,369,520"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="224,544,393,571"/>
<area shape="rect" href="vgic_8c.html#a37d0e0f4c579bc38afe8d5f91529a772" title=" " alt="" coords="441,712,651,739"/>
<area shape="rect" href="arch__timer_8c.html#ad2a704b646b65309708c3a7f6ab70913" title=" " alt="" coords="267,645,351,672"/>
<area shape="rect" href="arch__timer_8c.html#ad19b9cbace853dd534bf572a35f83710" title=" " alt="" coords="240,696,377,723"/>
<area shape="rect" href="arch__timer_8c.html#a2e57f3714ec062699e29ae4e13d80dac" title=" " alt="" coords="255,747,362,773"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="470,544,622,571"/>
<area shape="rect" href="arch__timer_8c.html#a4f7db088b5aab3a8a6013b7f6fd12fa0" title=" " alt="" coords="477,493,615,520"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="734,712,835,739"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="729,409,840,436"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="2641,661,2743,688"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="2607,544,2777,571"/>
<area shape="rect" href="vgic_8c.html#a19d9c44a40cc76ccbd25bd8e0ec38a08" title=" " alt="" coords="699,107,871,133"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="1765,712,1865,739"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="2839,603,2974,629"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="919,325,996,352"/>
<area shape="rect" href="vgic-init_8c.html#a0f9be5cc88c88f6c0180c53b72818d3b" title=" " alt="" coords="1063,325,1207,352"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="1044,377,1225,418"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e" title=" " alt="" coords="2641,341,2743,368"/>
<area shape="rect" href="vgic-init_8c.html#a2eee0060a3bdcd2a9e8fe1451a3a3fc2" title=" " alt="" coords="1047,493,1222,520"/>
<area shape="rect" href="vgic-debug_8c.html#a42534d23071b4f3c441c5f82f9e5c1ce" title=" " alt="" coords="1073,208,1197,235"/>
<area shape="rect" href="vgic-its_8c.html#afd97b5d03d2b30ae4481443cdea2e739" title=" " alt="" coords="1060,259,1209,301"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a839b15883ba8f9de35a03ffce32fdf7f" title=" " alt="" coords="1717,107,1912,133"/>
<area shape="rect" href="vgic-v4_8c.html#a802a906ad744a75b5af33bbd6b31237c" title=" " alt="" coords="1085,56,1185,83"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="1287,341,1442,368"/>
<area shape="rect" href="irqchip_8c.html#a5ae37186e6e6d1594767f83df8bab64a" title=" " alt="" coords="1504,341,1669,368"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="1511,291,1663,317"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="1729,291,1901,317"/>
<area shape="rect" href="vgic-irqfd_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1999,333,2109,360"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="1985,275,2123,301"/>
<area shape="rect" href="vgic-irqfd_8c.html#a93415dbe2d5c7166c8f3f91be7c5d5da" title=" " alt="" coords="2196,341,2343,368"/>
<area shape="rect" href="vgic-its_8c.html#a53bf66e96dae9553e637fa69e8835365" title=" " alt="" coords="2196,468,2343,495"/>
<area shape="rect" href="vgic-its_8c.html#a352c8627ccf81a8154ae2275c7d50659" title=" " alt="" coords="2391,595,2559,637"/>
<area shape="rect" href="vgic-its_8c.html#ad62375be0591178764e98b79cd7217bf" title=" " alt="" coords="2398,493,2551,520"/>
<area shape="rect" href="vgic-its_8c.html#a94bbb30efc49ad5494a7f4b1410dbe01" title=" " alt="" coords="2413,443,2536,469"/>
<area shape="rect" href="vgic-its_8c.html#ab8e3bef933af0cc51b05259d801be26d" title=" " alt="" coords="2611,603,2773,629"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="2825,661,2988,688"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="3076,661,3204,688"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="2845,288,2968,315"/>
<area shape="rect" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247" title=" " alt="" coords="2835,544,2978,571"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="3036,263,3244,289"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="3063,313,3217,340"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="3082,544,3198,571"/>
<area shape="rect" href="vgic-its_8c.html#a3fe23d687675cef46a95e36cf14d04e1" title=" " alt="" coords="2617,493,2767,520"/>
<area shape="rect" href="vgic-v2_8c.html#a4e8ee3d5f7c8fadbf0a645df67a1c5a2" title=" " alt="" coords="1303,443,1426,469"/>
<area shape="rect" href="vgic-v3_8c.html#abe9a2245dfa0d76d61c99b60f714a513" title=" " alt="" coords="1303,493,1426,520"/>
<area shape="rect" href="vgic-v4_8c.html#af99c2f70dd91a57879b3a2f583e49a4a" title=" " alt="" coords="1273,5,1456,32"/>
<area shape="rect" href="vgic-v4_8c.html#ac805e466fa8f454112c11904ef8d41ce" title=" " alt="" coords="1295,56,1435,83"/>
<area shape="rect" href="vgic-v4_8c.html#ac22161596c9858cc700bab08c03fc422" title=" " alt="" coords="1960,73,2148,100"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a11b9b6e6338bbec6085332661c934e91_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a11b9b6e6338bbec6085332661c934e91_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a11b9b6e6338bbec6085332661c934e91_icgraph" id="aarm__arch__timer_8h_a11b9b6e6338bbec6085332661c934e91_icgraph">
<area shape="rect" title=" " alt="" coords="1231,81,1401,108"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1053,81,1183,108"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="829,5,1005,32"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="619,48,781,75"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,107,336,133"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="837,157,998,184"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="398,41,557,82"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,132,129,159"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="384,157,571,184"/>
</map>
</div>

</div>
</div>
<a id="a1910c992141ccc5e0753c9440f66292e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1910c992141ccc5e0753c9440f66292e">&#9670;&nbsp;</a></span>kvm_timer_vcpu_terminate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_timer_vcpu_terminate </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l01445">1445</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;{</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="keyword">struct </span><a class="code" href="structarch__timer__cpu.html">arch_timer_cpu</a> *timer = <a class="code" href="arm__arch__timer_8h.html#a0a8e9eb158c9a2fbc985fc1f47057b00">vcpu_timer</a>(vcpu);</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160; </div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <a class="code" href="arch__timer_8c.html#ad19b9cbace853dd534bf572a35f83710">soft_timer_cancel</a>(&amp;timer-&gt;<a class="code" href="structarch__timer__cpu.html#a98d4e6056a6490bbaa1fe859bbbbb80f">bg_timer</a>);</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a1910c992141ccc5e0753c9440f66292e_cgraph.png" border="0" usemap="#aarm__arch__timer_8h_a1910c992141ccc5e0753c9440f66292e_cgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a1910c992141ccc5e0753c9440f66292e_cgraph" id="aarm__arch__timer_8h_a1910c992141ccc5e0753c9440f66292e_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,208,32"/>
<area shape="rect" href="arch__timer_8c.html#ad19b9cbace853dd534bf572a35f83710" title=" " alt="" coords="256,5,393,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a1910c992141ccc5e0753c9440f66292e_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a1910c992141ccc5e0753c9440f66292e_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a1910c992141ccc5e0753c9440f66292e_icgraph" id="aarm__arch__timer_8h_a1910c992141ccc5e0753c9440f66292e_icgraph">
<area shape="rect" title=" " alt="" coords="1705,79,1908,105"/>
<area shape="rect" href="arm_8c.html#a25d188e4f0871968b9f428c79720a502" title=" " alt="" coords="1477,79,1657,105"/>
<area shape="rect" href="kvm__main_8c.html#a7218df747387e4034ab8442f187306b1" title=" " alt="" coords="1257,53,1402,80"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="1229,104,1429,131"/>
<area shape="rect" href="kvm__main_8c.html#a0fcd9f7671bee7debec1bc05dcd9557b" title=" " alt="" coords="1029,53,1181,80"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="811,53,981,80"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="453,9,580,36"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="628,79,763,105"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="212,5,405,32"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="459,104,574,131"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="234,56,383,83"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="226,107,391,133"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="231,157,386,184"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="241,208,376,235"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="5,56,164,83"/>
</map>
</div>

</div>
</div>
<a id="ad7dab91af9f69654aa27010f96125c13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7dab91af9f69654aa27010f96125c13">&#9670;&nbsp;</a></span>timer_get_ctl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u32 timer_get_ctl </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structarch__timer__context.html">arch_timer_context</a> *&#160;</td>
          <td class="paramname"><em>ctxt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l00066">66</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;{</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu = ctxt-&gt;<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="arm__arch__timer_8h.html#ab00b3cec76a84a6026b16444312632c4">arch_timer_ctx_index</a>(ctxt)) {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa722734e604137bcd9ea40179b51b2b3c">TIMER_VTIMER</a>:</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">return</span> __vcpu_sys_reg(vcpu, CNTV_CTL_EL0);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa7463dc5411bf81d52f397ef53551b852">TIMER_PTIMER</a>:</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keywordflow">return</span> __vcpu_sys_reg(vcpu, CNTP_CTL_EL0);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fae3e7d392ed408811b306ebe2edef5b46">TIMER_HVTIMER</a>:</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="keywordflow">return</span> __vcpu_sys_reg(vcpu, CNTHV_CTL_EL2);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa4e750a70fd24097ddad55ea2b01a75b7">TIMER_HPTIMER</a>:</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keywordflow">return</span> __vcpu_sys_reg(vcpu, CNTHP_CTL_EL2);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        WARN_ON(1);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div>
<div class="ttc" id="aarm__arch__timer_8h_html_ab00b3cec76a84a6026b16444312632c4"><div class="ttname"><a href="arm__arch__timer_8h.html#ab00b3cec76a84a6026b16444312632c4">arch_timer_ctx_index</a></div><div class="ttdeci">#define arch_timer_ctx_index(ctx)</div><div class="ttdef"><b>Definition:</b> <a href="arm__arch__timer_8h_source.html#l00129">arm_arch_timer.h:129</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_ad7dab91af9f69654aa27010f96125c13_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_ad7dab91af9f69654aa27010f96125c13_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_ad7dab91af9f69654aa27010f96125c13_icgraph" id="aarm__arch__timer_8h_ad7dab91af9f69654aa27010f96125c13_icgraph">
<area shape="rect" title=" " alt="" coords="2077,557,2185,584"/>
<area shape="rect" href="arch__timer_8c.html#ae722c5e3eba2098c012b2cdc4d74bf9f" title=" " alt="" coords="1855,456,2029,483"/>
<area shape="rect" href="arch__timer_8c.html#a2fb3bc59ad8d869dc692674f2db4bfe9" title=" " alt="" coords="1884,608,2000,635"/>
<area shape="rect" href="arch__timer_8c.html#a7e1e1c3a85e2d375519e32f57a54e301" title=" " alt="" coords="1401,507,1552,533"/>
<area shape="rect" href="arch__timer_8c.html#aa5109f58e0ef877d3f053d0593359c1e" title=" " alt="" coords="1639,456,1803,483"/>
<area shape="rect" href="arch__timer_8c.html#a0abce4d3df0f10be896c5ff0cb489041" title=" " alt="" coords="1644,507,1799,533"/>
<area shape="rect" href="arch__timer_8c.html#a64a4d2f3d2a9b83524edda4b27246092" title=" " alt="" coords="1636,237,1807,264"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="1417,405,1536,432"/>
<area shape="rect" href="arch__timer_8c.html#ab7dc50f59c235841d864ef598f814247" title=" " alt="" coords="1397,456,1556,483"/>
<area shape="rect" href="arm_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="1140,375,1312,401"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="887,375,1087,401"/>
<area shape="rect" href="arch__timer_8c.html#a0006e1b52ff819dd99be6dca260e52d6" title=" " alt="" coords="1147,557,1305,584"/>
<area shape="rect" href="arm_8c.html#a9235365ce64f215b1e024f26d96537cc" title=" " alt="" coords="911,476,1063,503"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="643,273,839,300"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="668,425,813,452"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="676,476,805,503"/>
<area shape="rect" href="kvm__main_8c.html#a5f5097640155787fc088aa47b94da0a7" title=" " alt="" coords="679,324,803,351"/>
<area shape="rect" href="kvm__main_8c.html#a16e0f63dd5f0d556ed1c9c9999256f85" title=" " alt="" coords="463,324,544,351"/>
<area shape="rect" href="handle__exit_8c.html#ae96aab7918301d55b908034db5855e3d" title=" " alt="" coords="203,324,338,351"/>
<area shape="rect" href="emulate-nested_8c.html#af5e2eb745d8ac6415fe941ebe754171d" title=" " alt="" coords="412,425,595,452"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="415,527,591,553"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="189,488,352,515"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="423,375,584,401"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="424,577,583,604"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,172,364,199"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,387,129,413"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="464,273,543,300"/>
<area shape="rect" href="arch__timer_8c.html#a25b09c8d95a2582f37a1a2719920e59c" title=" " alt="" coords="1399,289,1555,330"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="1385,355,1569,381"/>
<area shape="rect" href="arch__timer_8c.html#a939939efd4c7eb8c054ca12e04623358" title=" " alt="" coords="1365,69,1588,96"/>
<area shape="rect" href="arch__timer_8c.html#a629de40452a9be84148e3c8442a80db6" title=" " alt="" coords="417,120,590,147"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="1381,237,1573,264"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="1393,171,1560,213"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="1385,19,1568,45"/>
<area shape="rect" href="arch__timer_8c.html#a27c9feb35e6d7126c054c3325fea59b0" title=" " alt="" coords="1150,324,1302,351"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="923,324,1051,351"/>
<area shape="rect" href="arm_8c.html#a545524d72330cd45dae4f51a686943c0" title=" " alt="" coords="415,69,592,96"/>
<area shape="rect" href="arch__timer_8c.html#a4bf6ac76380146820b45b06feb3eab27" title=" " alt="" coords="1143,273,1309,300"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="907,273,1066,300"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="683,223,798,249"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="697,172,785,199"/>
<area shape="rect" href="arch__timer_8c.html#a0209ad4256c7a1fd5ea70b6abe030954" title=" " alt="" coords="1143,426,1309,467"/>
<area shape="rect" href="sys__regs_8c.html#a9457451d95fa776f653cff6c2a8d31f9" title=" " alt="" coords="915,425,1058,452"/>
<area shape="rect" href="arch__timer_8c.html#a6ae73bff466fcdc60319f9726d53b571" title=" " alt="" coords="904,19,1069,45"/>
<area shape="rect" href="arch__timer_8c.html#a3873c5e4f0eb8a0fa2a466d8e2b9a894" title=" " alt="" coords="1395,608,1558,635"/>
<area shape="rect" href="arch__timer_8c.html#aa832b704b06a4b6109f7f3a71f6755cc" title=" " alt="" coords="1135,608,1317,635"/>
<area shape="rect" href="arch__timer_8c.html#a4b6d62f10023e1b1effbf51b28d46d3c" title=" " alt="" coords="1145,491,1307,533"/>
<area shape="rect" href="guest_8c.html#a91e885a78ebf3a7c410b4b8ffa443729" title=" " alt="" coords="930,577,1043,604"/>
<area shape="rect" href="handle__exit_8c.html#a0b391fc62c2250ecc0bfcdbe1b0a6788" title=" " alt="" coords="920,628,1053,655"/>
<area shape="rect" href="guest_8c.html#ad1a71190592cc60155333934b84d1d11" title=" " alt="" coords="671,577,811,604"/>
</map>
</div>

</div>
</div>
<a id="a848ba80b4ffee7a071e37abb241262cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a848ba80b4ffee7a071e37abb241262cd">&#9670;&nbsp;</a></span>timer_get_cval()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 timer_get_cval </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structarch__timer__context.html">arch_timer_context</a> *&#160;</td>
          <td class="paramname"><em>ctxt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arch__timer_8c_source.html#l00085">85</a> of file <a class="el" href="arch__timer_8c_source.html">arch_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;{</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu = ctxt-&gt;<a class="code" href="structarch__timer__context.html#a9541e7a8583e8aa7ce9cbae677c7e595">vcpu</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="arm__arch__timer_8h.html#ab00b3cec76a84a6026b16444312632c4">arch_timer_ctx_index</a>(ctxt)) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa722734e604137bcd9ea40179b51b2b3c">TIMER_VTIMER</a>:</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">return</span> __vcpu_sys_reg(vcpu, CNTV_CVAL_EL0);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa7463dc5411bf81d52f397ef53551b852">TIMER_PTIMER</a>:</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">return</span> __vcpu_sys_reg(vcpu, CNTP_CVAL_EL0);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fae3e7d392ed408811b306ebe2edef5b46">TIMER_HVTIMER</a>:</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">return</span> __vcpu_sys_reg(vcpu, CNTHV_CVAL_EL2);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="arm__arch__timer_8h.html#a45e32a5c828e24615921bc1b8fe5d31fa4e750a70fd24097ddad55ea2b01a75b7">TIMER_HPTIMER</a>:</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">return</span> __vcpu_sys_reg(vcpu, CNTHP_CVAL_EL2);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        WARN_ON(1);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="arm__arch__timer_8h_a848ba80b4ffee7a071e37abb241262cd_icgraph.png" border="0" usemap="#aarm__arch__timer_8h_a848ba80b4ffee7a071e37abb241262cd_icgraph" alt=""/></div>
<map name="aarm__arch__timer_8h_a848ba80b4ffee7a071e37abb241262cd_icgraph" id="aarm__arch__timer_8h_a848ba80b4ffee7a071e37abb241262cd_icgraph">
<area shape="rect" title=" " alt="" coords="2279,234,2397,260"/>
<area shape="rect" href="arch__timer_8c.html#a3873c5e4f0eb8a0fa2a466d8e2b9a894" title=" " alt="" coords="1550,158,1713,184"/>
<area shape="rect" href="arch__timer_8c.html#aeed64583773b01dafc949df326d17db3" title=" " alt="" coords="2033,158,2231,184"/>
<area shape="rect" href="arch__timer_8c.html#a64a4d2f3d2a9b83524edda4b27246092" title=" " alt="" coords="2047,492,2217,519"/>
<area shape="rect" href="arch__timer_8c.html#a7e1e1c3a85e2d375519e32f57a54e301" title=" " alt="" coords="1799,259,1949,286"/>
<area shape="rect" href="arch__timer_8c.html#aa832b704b06a4b6109f7f3a71f6755cc" title=" " alt="" coords="1317,136,1500,163"/>
<area shape="rect" href="arch__timer_8c.html#a4b6d62f10023e1b1effbf51b28d46d3c" title=" " alt="" coords="1327,188,1490,229"/>
<area shape="rect" href="guest_8c.html#a91e885a78ebf3a7c410b4b8ffa443729" title=" " alt="" coords="1113,139,1226,166"/>
<area shape="rect" href="handle__exit_8c.html#a0b391fc62c2250ecc0bfcdbe1b0a6788" title=" " alt="" coords="1103,88,1236,115"/>
<area shape="rect" href="guest_8c.html#ad1a71190592cc60155333934b84d1d11" title=" " alt="" coords="393,108,533,135"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,290,336,316"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,420,129,447"/>
<area shape="rect" href="sys__regs_8c.html#a9457451d95fa776f653cff6c2a8d31f9" title=" " alt="" coords="1098,194,1241,220"/>
<area shape="rect" href="arch__timer_8c.html#aa5109f58e0ef877d3f053d0593359c1e" title=" " alt="" coords="1792,96,1956,123"/>
<area shape="rect" href="arch__timer_8c.html#a2fb3bc59ad8d869dc692674f2db4bfe9" title=" " alt="" coords="1816,158,1932,184"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="1815,310,1933,336"/>
<area shape="rect" href="arch__timer_8c.html#ab7dc50f59c235841d864ef598f814247" title=" " alt="" coords="1552,87,1711,114"/>
<area shape="rect" href="arm_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="1323,63,1495,90"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="1069,38,1269,64"/>
<area shape="rect" href="arch__timer_8c.html#a0209ad4256c7a1fd5ea70b6abe030954" title=" " alt="" coords="1548,260,1715,301"/>
<area shape="rect" href="arch__timer_8c.html#a4bf6ac76380146820b45b06feb3eab27" title=" " alt="" coords="1548,346,1715,372"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1329,346,1488,372"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="825,83,1021,110"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="1097,295,1242,322"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1105,346,1234,372"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="1112,470,1227,496"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="879,442,967,468"/>
<area shape="rect" href="handle__exit_8c.html#ae96aab7918301d55b908034db5855e3d" title=" " alt="" coords="617,58,751,84"/>
<area shape="rect" href="emulate-nested_8c.html#af5e2eb745d8ac6415fe941ebe754171d" title=" " alt="" coords="832,159,1015,186"/>
<area shape="rect" href="emulate-nested_8c.html#a5759b383dbf067b5e90235d5fd032ab5" title=" " alt="" coords="597,159,771,186"/>
<area shape="rect" href="handle__exit_8c.html#a5c24d46393da9651d3133e2377fd7a69" title=" " alt="" coords="636,210,732,236"/>
<area shape="rect" href="handle__exit_8c.html#aeaf983f5c40202edc8b07a76603330cd" title=" " alt="" coords="637,108,731,135"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="835,340,1011,367"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="603,319,765,346"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="843,391,1004,418"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="384,312,543,353"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="591,496,777,523"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="884,492,963,519"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="628,598,740,624"/>
<area shape="rect" href="arch__timer_8c.html#a25b09c8d95a2582f37a1a2719920e59c" title=" " alt="" coords="1796,426,1952,468"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="1782,695,1966,722"/>
<area shape="rect" href="arch__timer_8c.html#a939939efd4c7eb8c054ca12e04623358" title=" " alt="" coords="1763,594,1985,620"/>
<area shape="rect" href="arch__timer_8c.html#a629de40452a9be84148e3c8442a80db6" title=" " alt="" coords="1322,543,1495,570"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="1778,492,1970,519"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="1791,361,1957,402"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="1783,644,1965,671"/>
<area shape="rect" href="arch__timer_8c.html#a27c9feb35e6d7126c054c3325fea59b0" title=" " alt="" coords="1555,695,1707,722"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="1345,695,1473,722"/>
<area shape="rect" href="arm_8c.html#a545524d72330cd45dae4f51a686943c0" title=" " alt="" coords="835,594,1012,620"/>
<area shape="rect" href="arch__timer_8c.html#a6ae73bff466fcdc60319f9726d53b571" title=" " alt="" coords="1549,644,1714,671"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
