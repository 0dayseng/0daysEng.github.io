<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KVM: arch/arm64/kvm/vgic/vgic.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KVM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_ea9599923402ca8ab47fc3e495999dea.html">arch</a></li><li class="navelem"><a class="el" href="dir_67a9e021ce8db5d46236c6154ee454bc.html">arm64</a></li><li class="navelem"><a class="el" href="dir_42f87ef63ac4150166bf7887f68288e2.html">kvm</a></li><li class="navelem"><a class="el" href="dir_3eb4584ecab9fce570ac1ce102ccba9b.html">vgic</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">vgic.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/irqchip/arm-gic-common.h&gt;</code><br />
<code>#include &lt;asm/kvm_mmu.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for vgic.h:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h__incl.png" border="0" usemap="#aarch_2arm64_2kvm_2vgic_2vgic_8h" alt=""/></div>
<map name="aarch_2arm64_2kvm_2vgic_2vgic_8h" id="aarch_2arm64_2kvm_2vgic_2vgic_8h">
<area shape="rect" title=" " alt="" coords="89,5,249,47"/>
<area shape="rect" title=" " alt="" coords="5,95,161,136"/>
<area shape="rect" title=" " alt="" coords="186,102,322,129"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h__dep__incl.png" border="0" usemap="#aarch_2arm64_2kvm_2vgic_2vgic_8hdep" alt=""/></div>
<map name="aarch_2arm64_2kvm_2vgic_2vgic_8hdep" id="aarch_2arm64_2kvm_2vgic_2vgic_8hdep">
<area shape="rect" title=" " alt="" coords="1109,5,1269,47"/>
<area shape="rect" href="vgic-debug_8c.html" title=" " alt="" coords="5,95,165,136"/>
<area shape="rect" href="vgic-irqfd_8c.html" title=" " alt="" coords="189,95,349,136"/>
<area shape="rect" href="vgic-init_8c.html" title=" " alt="" coords="373,95,533,136"/>
<area shape="rect" href="vgic-mmio-v2_8c.html" title=" " alt="" coords="557,95,717,136"/>
<area shape="rect" href="vgic-v2_8c.html" title=" " alt="" coords="741,95,901,136"/>
<area shape="rect" href="vgic-kvm-device_8c.html" title=" " alt="" coords="925,95,1085,136"/>
<area shape="rect" href="vgic-mmio_8c.html" title=" " alt="" coords="1109,95,1269,136"/>
<area shape="rect" href="vgic-mmio-v3_8c.html" title=" " alt="" coords="1293,95,1453,136"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html" title=" " alt="" coords="1477,95,1637,136"/>
<area shape="rect" href="vgic-v3_8c.html" title=" " alt="" coords="1661,95,1821,136"/>
<area shape="rect" href="vgic_8c.html" title=" " alt="" coords="1845,95,2005,136"/>
<area shape="rect" href="vgic-its_8c.html" title=" " alt="" coords="2029,95,2189,136"/>
<area shape="rect" href="vgic-v4_8c.html" title=" " alt="" coords="2213,95,2373,136"/>
</map>
</div>
</div>
<p><a href="vgic_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvgic__vmcr.html">vgic_vmcr</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvgic__reg__attr.html">vgic_reg_attr</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad05e0f46c5e8032d320745a738a83e0f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ad05e0f46c5e8032d320745a738a83e0f">PRODUCT_ID_KVM</a>&#160;&#160;&#160;0x4b	/* ASCII code K */</td></tr>
<tr class="separator:ad05e0f46c5e8032d320745a738a83e0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe8bc95751010eaeb101c27877164e57"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#abe8bc95751010eaeb101c27877164e57">IMPLEMENTER_ARM</a>&#160;&#160;&#160;0x43b</td></tr>
<tr class="separator:abe8bc95751010eaeb101c27877164e57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac91699b3ab8faf4d5222d998fb64b033"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ac91699b3ab8faf4d5222d998fb64b033">VGIC_ADDR_UNDEF</a>&#160;&#160;&#160;(-1)</td></tr>
<tr class="separator:ac91699b3ab8faf4d5222d998fb64b033"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf701ae1a62928f5d797c6297fcf0364"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#adf701ae1a62928f5d797c6297fcf0364">IS_VGIC_ADDR_UNDEF</a>(_x)&#160;&#160;&#160;((_x) == <a class="el" href="vgic_8h.html#ac91699b3ab8faf4d5222d998fb64b033">VGIC_ADDR_UNDEF</a>)</td></tr>
<tr class="separator:adf701ae1a62928f5d797c6297fcf0364"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9496739994497af3dece67be9ab92959"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a9496739994497af3dece67be9ab92959">INTERRUPT_ID_BITS_SPIS</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:a9496739994497af3dece67be9ab92959"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab80aef098e9cbd5f101c16f926e3f5e8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ab80aef098e9cbd5f101c16f926e3f5e8">INTERRUPT_ID_BITS_ITS</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:ab80aef098e9cbd5f101c16f926e3f5e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ca1aec9664009bf017af6d31b590600"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a4ca1aec9664009bf017af6d31b590600">VGIC_PRI_BITS</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:a4ca1aec9664009bf017af6d31b590600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67cef97460e9a4080ae437e5a30113a7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a67cef97460e9a4080ae437e5a30113a7">vgic_irq_is_sgi</a>(intid)&#160;&#160;&#160;((intid) &lt; VGIC_NR_SGIS)</td></tr>
<tr class="separator:a67cef97460e9a4080ae437e5a30113a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af04e928f828a93a4670abda231d09149"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#af04e928f828a93a4670abda231d09149">VGIC_AFFINITY_0_SHIFT</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:af04e928f828a93a4670abda231d09149"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac56b5835c06562ac14d06f6954516a8c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ac56b5835c06562ac14d06f6954516a8c">VGIC_AFFINITY_0_MASK</a>&#160;&#160;&#160;(0xffUL &lt;&lt; <a class="el" href="vgic_8h.html#af04e928f828a93a4670abda231d09149">VGIC_AFFINITY_0_SHIFT</a>)</td></tr>
<tr class="separator:ac56b5835c06562ac14d06f6954516a8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4061e65dab36e49298c2de378a4f22ad"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a4061e65dab36e49298c2de378a4f22ad">VGIC_AFFINITY_1_SHIFT</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:a4061e65dab36e49298c2de378a4f22ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abca036b49d9b12a63ad588ad892f52ca"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#abca036b49d9b12a63ad588ad892f52ca">VGIC_AFFINITY_1_MASK</a>&#160;&#160;&#160;(0xffUL &lt;&lt; <a class="el" href="vgic_8h.html#a4061e65dab36e49298c2de378a4f22ad">VGIC_AFFINITY_1_SHIFT</a>)</td></tr>
<tr class="separator:abca036b49d9b12a63ad588ad892f52ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48e82a6616273617ae42e30698731f5a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a48e82a6616273617ae42e30698731f5a">VGIC_AFFINITY_2_SHIFT</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:a48e82a6616273617ae42e30698731f5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cd45d3b058c2f8d4537489594d4ab4f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a8cd45d3b058c2f8d4537489594d4ab4f">VGIC_AFFINITY_2_MASK</a>&#160;&#160;&#160;(0xffUL &lt;&lt; <a class="el" href="vgic_8h.html#a48e82a6616273617ae42e30698731f5a">VGIC_AFFINITY_2_SHIFT</a>)</td></tr>
<tr class="separator:a8cd45d3b058c2f8d4537489594d4ab4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9522f86f8127f616052b7c807014336e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a9522f86f8127f616052b7c807014336e">VGIC_AFFINITY_3_SHIFT</a>&#160;&#160;&#160;24</td></tr>
<tr class="separator:a9522f86f8127f616052b7c807014336e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af00d3f73750adafd03d6787ab5f8daa9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#af00d3f73750adafd03d6787ab5f8daa9">VGIC_AFFINITY_3_MASK</a>&#160;&#160;&#160;(0xffUL &lt;&lt; <a class="el" href="vgic_8h.html#a9522f86f8127f616052b7c807014336e">VGIC_AFFINITY_3_SHIFT</a>)</td></tr>
<tr class="separator:af00d3f73750adafd03d6787ab5f8daa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a318016c7ac3592e78d799e9785d4199c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a318016c7ac3592e78d799e9785d4199c">VGIC_AFFINITY_LEVEL</a>(reg,  level)</td></tr>
<tr class="separator:a318016c7ac3592e78d799e9785d4199c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cdd97958d32f8942e038e26dc313540"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a6cdd97958d32f8942e038e26dc313540">VGIC_TO_MPIDR</a>(val)</td></tr>
<tr class="separator:a6cdd97958d32f8942e038e26dc313540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadc1cc47af6d64735df62cea48add713"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#aadc1cc47af6d64735df62cea48add713">KVM_REG_ARM_VGIC_SYSREG_OP0_MASK</a>&#160;&#160;&#160;0x000000000000c000</td></tr>
<tr class="separator:aadc1cc47af6d64735df62cea48add713"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dac2914a3bbc079d215c02d68438d7e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a2dac2914a3bbc079d215c02d68438d7e">KVM_REG_ARM_VGIC_SYSREG_OP0_SHIFT</a>&#160;&#160;&#160;14</td></tr>
<tr class="separator:a2dac2914a3bbc079d215c02d68438d7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a7a986c511d01a46f5da9abfb6cd49b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a6a7a986c511d01a46f5da9abfb6cd49b">KVM_REG_ARM_VGIC_SYSREG_OP1_MASK</a>&#160;&#160;&#160;0x0000000000003800</td></tr>
<tr class="separator:a6a7a986c511d01a46f5da9abfb6cd49b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a385279250f9b5c8b5c02c9ea7dbf1ee0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a385279250f9b5c8b5c02c9ea7dbf1ee0">KVM_REG_ARM_VGIC_SYSREG_OP1_SHIFT</a>&#160;&#160;&#160;11</td></tr>
<tr class="separator:a385279250f9b5c8b5c02c9ea7dbf1ee0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affe2a1ff0c52a5c3cf9e49e58ac587f4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#affe2a1ff0c52a5c3cf9e49e58ac587f4">KVM_REG_ARM_VGIC_SYSREG_CRN_MASK</a>&#160;&#160;&#160;0x0000000000000780</td></tr>
<tr class="separator:affe2a1ff0c52a5c3cf9e49e58ac587f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d96eb3358c776aaeb7160b358f2f54c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a0d96eb3358c776aaeb7160b358f2f54c">KVM_REG_ARM_VGIC_SYSREG_CRN_SHIFT</a>&#160;&#160;&#160;7</td></tr>
<tr class="separator:a0d96eb3358c776aaeb7160b358f2f54c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6780accd06326b08cfd5001824713ffa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a6780accd06326b08cfd5001824713ffa">KVM_REG_ARM_VGIC_SYSREG_CRM_MASK</a>&#160;&#160;&#160;0x0000000000000078</td></tr>
<tr class="separator:a6780accd06326b08cfd5001824713ffa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace25948132c4d625d426da8cbd7e5e68"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ace25948132c4d625d426da8cbd7e5e68">KVM_REG_ARM_VGIC_SYSREG_CRM_SHIFT</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:ace25948132c4d625d426da8cbd7e5e68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7520363d7298e2fbd45760481610bf01"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a7520363d7298e2fbd45760481610bf01">KVM_REG_ARM_VGIC_SYSREG_OP2_MASK</a>&#160;&#160;&#160;0x0000000000000007</td></tr>
<tr class="separator:a7520363d7298e2fbd45760481610bf01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78e22304be093d51d6642655719950ca"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a78e22304be093d51d6642655719950ca">KVM_REG_ARM_VGIC_SYSREG_OP2_SHIFT</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a78e22304be093d51d6642655719950ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a717009464b053fd6081408ceae541cb4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a717009464b053fd6081408ceae541cb4">KVM_DEV_ARM_VGIC_SYSREG_MASK</a></td></tr>
<tr class="separator:a717009464b053fd6081408ceae541cb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88ecb14169b877dd44389e58f679987a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a88ecb14169b877dd44389e58f679987a">KVM_ITS_CTE_VALID_SHIFT</a>&#160;&#160;&#160;63</td></tr>
<tr class="separator:a88ecb14169b877dd44389e58f679987a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12e4604275e4c5bfa4d362d368fe6ac3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a12e4604275e4c5bfa4d362d368fe6ac3">KVM_ITS_CTE_VALID_MASK</a>&#160;&#160;&#160;BIT_ULL(63)</td></tr>
<tr class="separator:a12e4604275e4c5bfa4d362d368fe6ac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb95a5add635c5046b2c023642d5b413"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#acb95a5add635c5046b2c023642d5b413">KVM_ITS_CTE_RDBASE_SHIFT</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:acb95a5add635c5046b2c023642d5b413"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc4cee2ae7e2e246c357c45545a3b9ee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#acc4cee2ae7e2e246c357c45545a3b9ee">KVM_ITS_CTE_ICID_MASK</a>&#160;&#160;&#160;GENMASK_ULL(15, 0)</td></tr>
<tr class="separator:acc4cee2ae7e2e246c357c45545a3b9ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f3f707651e3ef8848f2706f9c19a160"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a6f3f707651e3ef8848f2706f9c19a160">KVM_ITS_ITE_NEXT_SHIFT</a>&#160;&#160;&#160;48</td></tr>
<tr class="separator:a6f3f707651e3ef8848f2706f9c19a160"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afed96368c9fad945eb39065e1e17c251"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#afed96368c9fad945eb39065e1e17c251">KVM_ITS_ITE_PINTID_SHIFT</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:afed96368c9fad945eb39065e1e17c251"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add160ed73ed9fff723a490ea6ef8b348"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#add160ed73ed9fff723a490ea6ef8b348">KVM_ITS_ITE_PINTID_MASK</a>&#160;&#160;&#160;GENMASK_ULL(47, 16)</td></tr>
<tr class="separator:add160ed73ed9fff723a490ea6ef8b348"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4aeed767cf1ed73c4812c33d60dcf378"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a4aeed767cf1ed73c4812c33d60dcf378">KVM_ITS_ITE_ICID_MASK</a>&#160;&#160;&#160;GENMASK_ULL(15, 0)</td></tr>
<tr class="separator:a4aeed767cf1ed73c4812c33d60dcf378"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afff324cdc5d54484b34d01fb204f7ea3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#afff324cdc5d54484b34d01fb204f7ea3">KVM_ITS_DTE_VALID_SHIFT</a>&#160;&#160;&#160;63</td></tr>
<tr class="separator:afff324cdc5d54484b34d01fb204f7ea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a306573c16d534b8ae6298d7e3d00242a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a306573c16d534b8ae6298d7e3d00242a">KVM_ITS_DTE_VALID_MASK</a>&#160;&#160;&#160;BIT_ULL(63)</td></tr>
<tr class="separator:a306573c16d534b8ae6298d7e3d00242a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08bc3a888f7ff27f991f4260dfc5f9de"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a08bc3a888f7ff27f991f4260dfc5f9de">KVM_ITS_DTE_NEXT_SHIFT</a>&#160;&#160;&#160;49</td></tr>
<tr class="separator:a08bc3a888f7ff27f991f4260dfc5f9de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9763661f6d0c274c8d24582c0872553"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ae9763661f6d0c274c8d24582c0872553">KVM_ITS_DTE_NEXT_MASK</a>&#160;&#160;&#160;GENMASK_ULL(62, 49)</td></tr>
<tr class="separator:ae9763661f6d0c274c8d24582c0872553"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad0a81897092a04e660feb7071b76289"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#aad0a81897092a04e660feb7071b76289">KVM_ITS_DTE_ITTADDR_SHIFT</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:aad0a81897092a04e660feb7071b76289"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab245a2ab0fccf0b039373866aee7143f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ab245a2ab0fccf0b039373866aee7143f">KVM_ITS_DTE_ITTADDR_MASK</a>&#160;&#160;&#160;GENMASK_ULL(48, 5)</td></tr>
<tr class="separator:ab245a2ab0fccf0b039373866aee7143f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f3cff3bea9695479b00d472c801416f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a4f3cff3bea9695479b00d472c801416f">KVM_ITS_DTE_SIZE_MASK</a>&#160;&#160;&#160;GENMASK_ULL(4, 0)</td></tr>
<tr class="separator:a4f3cff3bea9695479b00d472c801416f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac750d8dbf9ac75d0e7a90ec348b0152d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ac750d8dbf9ac75d0e7a90ec348b0152d">KVM_ITS_L1E_VALID_MASK</a>&#160;&#160;&#160;BIT_ULL(63)</td></tr>
<tr class="separator:ac750d8dbf9ac75d0e7a90ec348b0152d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4eb880023dbbaa20c58673b306b5e0e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ad4eb880023dbbaa20c58673b306b5e0e">KVM_ITS_L1E_ADDR_MASK</a>&#160;&#160;&#160;GENMASK_ULL(51, 16)</td></tr>
<tr class="separator:ad4eb880023dbbaa20c58673b306b5e0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a780883d6e28680682a1dcd73b716eb78"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a780883d6e28680682a1dcd73b716eb78">KVM_VGIC_V3_RDIST_INDEX_MASK</a>&#160;&#160;&#160;GENMASK_ULL(11, 0)</td></tr>
<tr class="separator:a780883d6e28680682a1dcd73b716eb78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae06d384979afe3ae035989ac1973f56a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ae06d384979afe3ae035989ac1973f56a">KVM_VGIC_V3_RDIST_FLAGS_MASK</a>&#160;&#160;&#160;GENMASK_ULL(15, 12)</td></tr>
<tr class="separator:ae06d384979afe3ae035989ac1973f56a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd36d8c7265e3cb59ba4563490bf64c4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#abd36d8c7265e3cb59ba4563490bf64c4">KVM_VGIC_V3_RDIST_FLAGS_SHIFT</a>&#160;&#160;&#160;12</td></tr>
<tr class="separator:abd36d8c7265e3cb59ba4563490bf64c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b3d85861547e0e8a06a9d459b8bc1f5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a4b3d85861547e0e8a06a9d459b8bc1f5">KVM_VGIC_V3_RDIST_BASE_MASK</a>&#160;&#160;&#160;GENMASK_ULL(51, 16)</td></tr>
<tr class="separator:a4b3d85861547e0e8a06a9d459b8bc1f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39abc101c3e1c37577cc5140b5a6a0c5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a39abc101c3e1c37577cc5140b5a6a0c5">KVM_VGIC_V3_RDIST_COUNT_MASK</a>&#160;&#160;&#160;GENMASK_ULL(63, 52)</td></tr>
<tr class="separator:a39abc101c3e1c37577cc5140b5a6a0c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e7ccc903e0370ac380bc78fbfae3d2b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a5e7ccc903e0370ac380bc78fbfae3d2b">KVM_VGIC_V3_RDIST_COUNT_SHIFT</a>&#160;&#160;&#160;52</td></tr>
<tr class="separator:a5e7ccc903e0370ac380bc78fbfae3d2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e2b76dd7108772ed1441b1e64f0be4b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a0e2b76dd7108772ed1441b1e64f0be4b">DEBUG_SPINLOCK_BUG_ON</a>(p)</td></tr>
<tr class="separator:a0e2b76dd7108772ed1441b1e64f0be4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad2152e71d96ef44532516eb9fb65da36"><td class="memItemLeft" align="right" valign="top">static u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ad2152e71d96ef44532516eb9fb65da36">vgic_get_implementation_rev</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ad2152e71d96ef44532516eb9fb65da36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1109d873011f89a4acb4fd461f9f0a45"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45">irq_is_pending</a> (struct vgic_irq *irq)</td></tr>
<tr class="separator:a1109d873011f89a4acb4fd461f9f0a45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c8f3a32a17b2384ea1cc0c6e0340ad7"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a9c8f3a32a17b2384ea1cc0c6e0340ad7">vgic_irq_is_mapped_level</a> (struct vgic_irq *irq)</td></tr>
<tr class="separator:a9c8f3a32a17b2384ea1cc0c6e0340ad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bdd8f789c7055ff9681448eecde7072"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a9bdd8f789c7055ff9681448eecde7072">vgic_irq_get_lr_count</a> (struct vgic_irq *irq)</td></tr>
<tr class="separator:a9bdd8f789c7055ff9681448eecde7072"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03246bc81a56f8f77c3ee4ea6e27047d"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a03246bc81a56f8f77c3ee4ea6e27047d">vgic_irq_is_multi_sgi</a> (struct vgic_irq *irq)</td></tr>
<tr class="separator:a03246bc81a56f8f77c3ee4ea6e27047d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb188bad2393aaaf40808283d5565b8a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#abb188bad2393aaaf40808283d5565b8a">vgic_write_guest_lock</a> (struct kvm *kvm, gpa_t gpa, const void *data, unsigned long len)</td></tr>
<tr class="separator:abb188bad2393aaaf40808283d5565b8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae16a58808d1a84f4f378a2ff4343d200"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ae16a58808d1a84f4f378a2ff4343d200">vgic_v3_parse_attr</a> (struct kvm_device *dev, struct kvm_device_attr *attr, struct <a class="el" href="structvgic__reg__attr.html">vgic_reg_attr</a> *reg_attr)</td></tr>
<tr class="separator:ae16a58808d1a84f4f378a2ff4343d200"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6e244467a63a98cec7698162df49572"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#aa6e244467a63a98cec7698162df49572">vgic_v2_parse_attr</a> (struct kvm_device *dev, struct kvm_device_attr *attr, struct <a class="el" href="structvgic__reg__attr.html">vgic_reg_attr</a> *reg_attr)</td></tr>
<tr class="separator:aa6e244467a63a98cec7698162df49572"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af645443cfc0bc59f41881570759adcb5"><td class="memItemLeft" align="right" valign="top">const struct <a class="el" href="structvgic__register__region.html">vgic_register_region</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#af645443cfc0bc59f41881570759adcb5">vgic_get_mmio_region</a> (struct kvm_vcpu *vcpu, struct vgic_io_device *iodev, gpa_t addr, int len)</td></tr>
<tr class="separator:af645443cfc0bc59f41881570759adcb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f38a266ef3def3202e7e04aa40fd516"><td class="memItemLeft" align="right" valign="top">struct vgic_irq *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a7f38a266ef3def3202e7e04aa40fd516">vgic_get_irq</a> (struct kvm *kvm, struct kvm_vcpu *vcpu, u32 intid)</td></tr>
<tr class="separator:a7f38a266ef3def3202e7e04aa40fd516"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affa1a20a5bd9d67dc546c1ccaace3406"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#affa1a20a5bd9d67dc546c1ccaace3406">__vgic_put_lpi_locked</a> (struct kvm *kvm, struct vgic_irq *irq)</td></tr>
<tr class="separator:affa1a20a5bd9d67dc546c1ccaace3406"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac055f2fa0d463d3d287ee975bb80a9c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ac055f2fa0d463d3d287ee975bb80a9c5">vgic_put_irq</a> (struct kvm *kvm, struct vgic_irq *irq)</td></tr>
<tr class="separator:ac055f2fa0d463d3d287ee975bb80a9c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44a31fe53851677c742d5b2a340e2f56"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a44a31fe53851677c742d5b2a340e2f56">vgic_get_phys_line_level</a> (struct vgic_irq *irq)</td></tr>
<tr class="separator:a44a31fe53851677c742d5b2a340e2f56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a63066504dcc87c4250f625d4337ac1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a1a63066504dcc87c4250f625d4337ac1">vgic_irq_set_phys_pending</a> (struct vgic_irq *irq, bool pending)</td></tr>
<tr class="separator:a1a63066504dcc87c4250f625d4337ac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6daedd3eec82ca8b68db82b750a24f67"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a6daedd3eec82ca8b68db82b750a24f67">vgic_irq_set_phys_active</a> (struct vgic_irq *irq, bool active)</td></tr>
<tr class="separator:a6daedd3eec82ca8b68db82b750a24f67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e208ac24f54fa95ba74797758c5b84c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a1e208ac24f54fa95ba74797758c5b84c">vgic_queue_irq_unlock</a> (struct kvm *kvm, struct vgic_irq *irq, unsigned long flags)</td></tr>
<tr class="separator:a1e208ac24f54fa95ba74797758c5b84c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd47a938061d223b085c0ca0bed6aa71"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#afd47a938061d223b085c0ca0bed6aa71">vgic_kick_vcpus</a> (struct kvm *kvm)</td></tr>
<tr class="separator:afd47a938061d223b085c0ca0bed6aa71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19d27bba8dd17f9ae9c8284444df030b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a19d27bba8dd17f9ae9c8284444df030b">vgic_irq_handle_resampling</a> (struct vgic_irq *irq, bool lr_deactivated, bool lr_pending)</td></tr>
<tr class="separator:a19d27bba8dd17f9ae9c8284444df030b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0cfcc44a93abc13df9a7e364c21cf32"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#af0cfcc44a93abc13df9a7e364c21cf32">vgic_check_iorange</a> (struct kvm *kvm, phys_addr_t ioaddr, phys_addr_t addr, phys_addr_t alignment, phys_addr_t <a class="el" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>)</td></tr>
<tr class="separator:af0cfcc44a93abc13df9a7e364c21cf32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7627ef75f37a19085dece7f4d26ad898"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a7627ef75f37a19085dece7f4d26ad898">vgic_v2_fold_lr_state</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a7627ef75f37a19085dece7f4d26ad898"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b6956f55b0732bd8aa6e5cce3b51b34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a9b6956f55b0732bd8aa6e5cce3b51b34">vgic_v2_populate_lr</a> (struct kvm_vcpu *vcpu, struct vgic_irq *irq, int lr)</td></tr>
<tr class="separator:a9b6956f55b0732bd8aa6e5cce3b51b34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bc90abf0cc897ed6f7aeadae6b0d518"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a1bc90abf0cc897ed6f7aeadae6b0d518">vgic_v2_clear_lr</a> (struct kvm_vcpu *vcpu, int lr)</td></tr>
<tr class="separator:a1bc90abf0cc897ed6f7aeadae6b0d518"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bc5185e55ce4c03c9eb43a7c4170f42"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a1bc5185e55ce4c03c9eb43a7c4170f42">vgic_v2_set_underflow</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a1bc5185e55ce4c03c9eb43a7c4170f42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34fc7617393fc3b19fd3ff9220da2cbb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a34fc7617393fc3b19fd3ff9220da2cbb">vgic_v2_has_attr_regs</a> (struct kvm_device *dev, struct kvm_device_attr *attr)</td></tr>
<tr class="separator:a34fc7617393fc3b19fd3ff9220da2cbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a172aa5542cf86982d7d2fc0c9948fa26"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a172aa5542cf86982d7d2fc0c9948fa26">vgic_v2_dist_uaccess</a> (struct kvm_vcpu *vcpu, bool is_write, int offset, u32 *val)</td></tr>
<tr class="separator:a172aa5542cf86982d7d2fc0c9948fa26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47e01844cf58952fedaee31f59b759cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a47e01844cf58952fedaee31f59b759cc">vgic_v2_cpuif_uaccess</a> (struct kvm_vcpu *vcpu, bool is_write, int offset, u32 *val)</td></tr>
<tr class="separator:a47e01844cf58952fedaee31f59b759cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee5662646dba1cb0bceee526547221b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#aee5662646dba1cb0bceee526547221b1">vgic_v2_set_vmcr</a> (struct kvm_vcpu *vcpu, struct <a class="el" href="structvgic__vmcr.html">vgic_vmcr</a> *vmcr)</td></tr>
<tr class="separator:aee5662646dba1cb0bceee526547221b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa740568c7a160fed9d2576ef2908a377"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#aa740568c7a160fed9d2576ef2908a377">vgic_v2_get_vmcr</a> (struct kvm_vcpu *vcpu, struct <a class="el" href="structvgic__vmcr.html">vgic_vmcr</a> *vmcr)</td></tr>
<tr class="separator:aa740568c7a160fed9d2576ef2908a377"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e8ee3d5f7c8fadbf0a645df67a1c5a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a4e8ee3d5f7c8fadbf0a645df67a1c5a2">vgic_v2_enable</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a4e8ee3d5f7c8fadbf0a645df67a1c5a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3e64817232a1ce5658b7f3147f7f554"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#aa3e64817232a1ce5658b7f3147f7f554">vgic_v2_probe</a> (const struct <a class="el" href="vgic-init_8c.html#a7b7c49d17fa603aa8433b0d402f9efe1">gic_kvm_info</a> *info)</td></tr>
<tr class="separator:aa3e64817232a1ce5658b7f3147f7f554"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8de91a1f816dcd3b3edba1d074a1aca"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ac8de91a1f816dcd3b3edba1d074a1aca">vgic_v2_map_resources</a> (struct kvm *kvm)</td></tr>
<tr class="separator:ac8de91a1f816dcd3b3edba1d074a1aca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7837aed499e6011e3a7222ad512c1bf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ab7837aed499e6011e3a7222ad512c1bf">vgic_register_dist_iodev</a> (struct kvm *kvm, gpa_t dist_base_address, enum vgic_type)</td></tr>
<tr class="separator:ab7837aed499e6011e3a7222ad512c1bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e2191b7a20d4cf12614106efac5ced2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a1e2191b7a20d4cf12614106efac5ced2">vgic_v2_init_lrs</a> (void)</td></tr>
<tr class="separator:a1e2191b7a20d4cf12614106efac5ced2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8321cd156f283292cc531c7ca6358193"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a8321cd156f283292cc531c7ca6358193">vgic_v2_load</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a8321cd156f283292cc531c7ca6358193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c82d0c75692973442f9002861867d9c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a7c82d0c75692973442f9002861867d9c">vgic_v2_put</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a7c82d0c75692973442f9002861867d9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa92110fc4f1e453fde0e8e720845854f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#aa92110fc4f1e453fde0e8e720845854f">vgic_v2_vmcr_sync</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:aa92110fc4f1e453fde0e8e720845854f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaef53794d924f0f73627a2b8d3c5b5c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#abaef53794d924f0f73627a2b8d3c5b5c">vgic_v2_save_state</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:abaef53794d924f0f73627a2b8d3c5b5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaed5294c86b04a383f712fbf355f8b35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#aaed5294c86b04a383f712fbf355f8b35">vgic_v2_restore_state</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:aaed5294c86b04a383f712fbf355f8b35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43d39599f0fd2d973c5af8d6045e0f91"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91">vgic_get_irq_kref</a> (struct vgic_irq *irq)</td></tr>
<tr class="separator:a43d39599f0fd2d973c5af8d6045e0f91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d53ba6e7f70704effc37ea2c4b0c04b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a3d53ba6e7f70704effc37ea2c4b0c04b">vgic_v3_fold_lr_state</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a3d53ba6e7f70704effc37ea2c4b0c04b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad978c7773b6b8a81c108e35926ce6f86"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ad978c7773b6b8a81c108e35926ce6f86">vgic_v3_populate_lr</a> (struct kvm_vcpu *vcpu, struct vgic_irq *irq, int lr)</td></tr>
<tr class="separator:ad978c7773b6b8a81c108e35926ce6f86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09a87047453ae4405f560fa3191a05fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a09a87047453ae4405f560fa3191a05fa">vgic_v3_clear_lr</a> (struct kvm_vcpu *vcpu, int lr)</td></tr>
<tr class="separator:a09a87047453ae4405f560fa3191a05fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd14cba7fa93011850c703921e02002b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#afd14cba7fa93011850c703921e02002b">vgic_v3_set_underflow</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:afd14cba7fa93011850c703921e02002b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d43a64942be398908335f3cf50f2ef0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a1d43a64942be398908335f3cf50f2ef0">vgic_v3_set_vmcr</a> (struct kvm_vcpu *vcpu, struct <a class="el" href="structvgic__vmcr.html">vgic_vmcr</a> *vmcr)</td></tr>
<tr class="separator:a1d43a64942be398908335f3cf50f2ef0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fc5537e2afeef239f1f24de942eb46a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a9fc5537e2afeef239f1f24de942eb46a">vgic_v3_get_vmcr</a> (struct kvm_vcpu *vcpu, struct <a class="el" href="structvgic__vmcr.html">vgic_vmcr</a> *vmcr)</td></tr>
<tr class="separator:a9fc5537e2afeef239f1f24de942eb46a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe9a2245dfa0d76d61c99b60f714a513"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#abe9a2245dfa0d76d61c99b60f714a513">vgic_v3_enable</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:abe9a2245dfa0d76d61c99b60f714a513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac418c84cff9542559c426a575c403136"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ac418c84cff9542559c426a575c403136">vgic_v3_probe</a> (const struct <a class="el" href="vgic-init_8c.html#a7b7c49d17fa603aa8433b0d402f9efe1">gic_kvm_info</a> *info)</td></tr>
<tr class="separator:ac418c84cff9542559c426a575c403136"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c2e4753883533516b45a2bbf9dad1ce"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a8c2e4753883533516b45a2bbf9dad1ce">vgic_v3_map_resources</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a8c2e4753883533516b45a2bbf9dad1ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8f115520573cc0407f90177aeccfed9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ac8f115520573cc0407f90177aeccfed9">vgic_v3_lpi_sync_pending_status</a> (struct kvm *kvm, struct vgic_irq *irq)</td></tr>
<tr class="separator:ac8f115520573cc0407f90177aeccfed9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af01c534c811a6787db01c7508a333d7c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#af01c534c811a6787db01c7508a333d7c">vgic_v3_save_pending_tables</a> (struct kvm *kvm)</td></tr>
<tr class="separator:af01c534c811a6787db01c7508a333d7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a15ce4d47dcc08ccabdac23699bd8e0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a4a15ce4d47dcc08ccabdac23699bd8e0">vgic_v3_set_redist_base</a> (struct kvm *kvm, u32 index, u64 addr, u32 count)</td></tr>
<tr class="separator:a4a15ce4d47dcc08ccabdac23699bd8e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c5d9bcbf29cb46bac8622d8bcc145b2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a7c5d9bcbf29cb46bac8622d8bcc145b2">vgic_register_redist_iodev</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a7c5d9bcbf29cb46bac8622d8bcc145b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bfec769cd9fe2bddb14200a6147fccd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a4bfec769cd9fe2bddb14200a6147fccd">vgic_unregister_redist_iodev</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a4bfec769cd9fe2bddb14200a6147fccd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98c28ff2dc6b6965cef76e1be35233b1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a98c28ff2dc6b6965cef76e1be35233b1">vgic_v3_check_base</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a98c28ff2dc6b6965cef76e1be35233b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec2311d8e88bcd485c7baf083b65876e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#aec2311d8e88bcd485c7baf083b65876e">vgic_v3_load</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:aec2311d8e88bcd485c7baf083b65876e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a9931a18504090acd3d559ba25374ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a6a9931a18504090acd3d559ba25374ff">vgic_v3_put</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a6a9931a18504090acd3d559ba25374ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3f97179d90d3ed6a8920d1c57496380"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#aa3f97179d90d3ed6a8920d1c57496380">vgic_v3_vmcr_sync</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:aa3f97179d90d3ed6a8920d1c57496380"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47708b59ddd94e03880996def466067e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a47708b59ddd94e03880996def466067e">vgic_has_its</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a47708b59ddd94e03880996def466067e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50d09aacec778677eb4fb2c550a3bea4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a50d09aacec778677eb4fb2c550a3bea4">kvm_vgic_register_its_device</a> (void)</td></tr>
<tr class="separator:a50d09aacec778677eb4fb2c550a3bea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73bdb46182a608906704071dffe58b3d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a73bdb46182a608906704071dffe58b3d">vgic_enable_lpis</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a73bdb46182a608906704071dffe58b3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a573eb768a56ea0b73e234771e0013ffc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a573eb768a56ea0b73e234771e0013ffc">vgic_flush_pending_lpis</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a573eb768a56ea0b73e234771e0013ffc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53bf66e96dae9553e637fa69e8835365"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a53bf66e96dae9553e637fa69e8835365">vgic_its_inject_msi</a> (struct kvm *kvm, struct kvm_msi *msi)</td></tr>
<tr class="separator:a53bf66e96dae9553e637fa69e8835365"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7ab2fb9c9721de227541e7cc6da7e3e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ab7ab2fb9c9721de227541e7cc6da7e3e">vgic_v3_has_attr_regs</a> (struct kvm_device *dev, struct kvm_device_attr *attr)</td></tr>
<tr class="separator:ab7ab2fb9c9721de227541e7cc6da7e3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a744d3ea323c85b7c3528ccc1a3fd6180"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a744d3ea323c85b7c3528ccc1a3fd6180">vgic_v3_dist_uaccess</a> (struct kvm_vcpu *vcpu, bool is_write, int offset, u32 *val)</td></tr>
<tr class="separator:a744d3ea323c85b7c3528ccc1a3fd6180"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f0acf3ee53ee539acba5f1bce55cea2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a6f0acf3ee53ee539acba5f1bce55cea2">vgic_v3_redist_uaccess</a> (struct kvm_vcpu *vcpu, bool is_write, int offset, u32 *val)</td></tr>
<tr class="separator:a6f0acf3ee53ee539acba5f1bce55cea2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6c5f6437d5d194daa8d1485c3dfe27b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ae6c5f6437d5d194daa8d1485c3dfe27b">vgic_v3_cpu_sysregs_uaccess</a> (struct kvm_vcpu *vcpu, struct kvm_device_attr *attr, bool is_write)</td></tr>
<tr class="separator:ae6c5f6437d5d194daa8d1485c3dfe27b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8d4c0e182ab36b9414c4dcaad810793"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#af8d4c0e182ab36b9414c4dcaad810793">vgic_v3_has_cpu_sysregs_attr</a> (struct kvm_vcpu *vcpu, struct kvm_device_attr *attr)</td></tr>
<tr class="separator:af8d4c0e182ab36b9414c4dcaad810793"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1a045e1729c5781a9c7c03e359da717"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ac1a045e1729c5781a9c7c03e359da717">vgic_v3_line_level_info_uaccess</a> (struct kvm_vcpu *vcpu, bool is_write, u32 intid, u32 *val)</td></tr>
<tr class="separator:ac1a045e1729c5781a9c7c03e359da717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa01e5dcf80e608f64f5428d054d17a84"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#aa01e5dcf80e608f64f5428d054d17a84">kvm_register_vgic_device</a> (unsigned long type)</td></tr>
<tr class="separator:aa01e5dcf80e608f64f5428d054d17a84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33fd399bf664fddf31b1eec1e14c63e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a33fd399bf664fddf31b1eec1e14c63e0">vgic_set_vmcr</a> (struct kvm_vcpu *vcpu, struct <a class="el" href="structvgic__vmcr.html">vgic_vmcr</a> *vmcr)</td></tr>
<tr class="separator:a33fd399bf664fddf31b1eec1e14c63e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad275c2ef6d5f7f0d79f101a7dd6dda3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ad275c2ef6d5f7f0d79f101a7dd6dda3a">vgic_get_vmcr</a> (struct kvm_vcpu *vcpu, struct <a class="el" href="structvgic__vmcr.html">vgic_vmcr</a> *vmcr)</td></tr>
<tr class="separator:ad275c2ef6d5f7f0d79f101a7dd6dda3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c860e1d043352d9a02f4780b58e5af6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a3c860e1d043352d9a02f4780b58e5af6">vgic_lazy_init</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a3c860e1d043352d9a02f4780b58e5af6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39a12fe5ed5534efda33bb215a320a57"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a39a12fe5ed5534efda33bb215a320a57">vgic_init</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a39a12fe5ed5534efda33bb215a320a57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42534d23071b4f3c441c5f82f9e5c1ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a42534d23071b4f3c441c5f82f9e5c1ce">vgic_debug_init</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a42534d23071b4f3c441c5f82f9e5c1ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09b8e6f769f95e9667a93dde826b0e1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a09b8e6f769f95e9667a93dde826b0e1e">vgic_debug_destroy</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a09b8e6f769f95e9667a93dde826b0e1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57d3462d7e7eac5b34b9fcbd18b69643"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a57d3462d7e7eac5b34b9fcbd18b69643">vgic_v3_max_apr_idx</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a57d3462d7e7eac5b34b9fcbd18b69643"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5518fe56ac149d185ee8dc4f1cbedcb"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ab5518fe56ac149d185ee8dc4f1cbedcb">vgic_v3_redist_region_full</a> (struct vgic_redist_region *region)</td></tr>
<tr class="separator:ab5518fe56ac149d185ee8dc4f1cbedcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5e338e56a88bea8fd9eb64214a6866c"><td class="memItemLeft" align="right" valign="top">struct vgic_redist_region *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#af5e338e56a88bea8fd9eb64214a6866c">vgic_v3_rdist_free_slot</a> (struct list_head *rdregs)</td></tr>
<tr class="separator:af5e338e56a88bea8fd9eb64214a6866c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01a6c3c40680e43017d7ba8ec7aadbac"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a01a6c3c40680e43017d7ba8ec7aadbac">vgic_v3_rd_region_size</a> (struct kvm *kvm, struct vgic_redist_region *rdreg)</td></tr>
<tr class="separator:a01a6c3c40680e43017d7ba8ec7aadbac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35e1a5cb345dbcb7d61a55467b083702"><td class="memItemLeft" align="right" valign="top">struct vgic_redist_region *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a35e1a5cb345dbcb7d61a55467b083702">vgic_v3_rdist_region_from_index</a> (struct kvm *kvm, u32 index)</td></tr>
<tr class="separator:a35e1a5cb345dbcb7d61a55467b083702"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2164da472839a705dfb81d3a3c477c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ac2164da472839a705dfb81d3a3c477c5">vgic_v3_free_redist_region</a> (struct vgic_redist_region *rdreg)</td></tr>
<tr class="separator:ac2164da472839a705dfb81d3a3c477c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bd03445507515b9722165814955f6fa"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a8bd03445507515b9722165814955f6fa">vgic_v3_rdist_overlap</a> (struct kvm *kvm, gpa_t <a class="el" href="early__alloc_8c.html#a74f95eab64fb23344e30879684489f6f">base</a>, size_t <a class="el" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>)</td></tr>
<tr class="separator:a8bd03445507515b9722165814955f6fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cdb698c97a7e5292716c24cd5a39d28"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a1cdb698c97a7e5292716c24cd5a39d28">vgic_dist_overlap</a> (struct kvm *kvm, gpa_t <a class="el" href="early__alloc_8c.html#a74f95eab64fb23344e30879684489f6f">base</a>, size_t <a class="el" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>)</td></tr>
<tr class="separator:a1cdb698c97a7e5292716c24cd5a39d28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa37f9ed0ed7921675bc4167d4a9d9261"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#aa37f9ed0ed7921675bc4167d4a9d9261">vgic_lpis_enabled</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:aa37f9ed0ed7921675bc4167d4a9d9261"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40cc55ab76a861e01174f3b73f396afc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a40cc55ab76a861e01174f3b73f396afc">vgic_copy_lpi_list</a> (struct kvm *kvm, struct kvm_vcpu *vcpu, u32 **intid_ptr)</td></tr>
<tr class="separator:a40cc55ab76a861e01174f3b73f396afc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fe23d687675cef46a95e36cf14d04e1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a3fe23d687675cef46a95e36cf14d04e1">vgic_its_resolve_lpi</a> (struct kvm *kvm, struct vgic_its *its, u32 devid, u32 eventid, struct vgic_irq **irq)</td></tr>
<tr class="separator:a3fe23d687675cef46a95e36cf14d04e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94bbb30efc49ad5494a7f4b1410dbe01"><td class="memItemLeft" align="right" valign="top">struct vgic_its *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a94bbb30efc49ad5494a7f4b1410dbe01">vgic_msi_to_its</a> (struct kvm *kvm, struct kvm_msi *msi)</td></tr>
<tr class="separator:a94bbb30efc49ad5494a7f4b1410dbe01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a352c8627ccf81a8154ae2275c7d50659"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a352c8627ccf81a8154ae2275c7d50659">vgic_its_inject_cached_translation</a> (struct kvm *kvm, struct kvm_msi *msi)</td></tr>
<tr class="separator:a352c8627ccf81a8154ae2275c7d50659"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd97b5d03d2b30ae4481443cdea2e739"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#afd97b5d03d2b30ae4481443cdea2e739">vgic_lpi_translation_cache_init</a> (struct kvm *kvm)</td></tr>
<tr class="separator:afd97b5d03d2b30ae4481443cdea2e739"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58207180090221f6c6529d3c4acad96b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a58207180090221f6c6529d3c4acad96b">vgic_lpi_translation_cache_destroy</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a58207180090221f6c6529d3c4acad96b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a922a99eb2d73f90e4fcb4cf7c52f0518"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a922a99eb2d73f90e4fcb4cf7c52f0518">vgic_its_invalidate_cache</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a922a99eb2d73f90e4fcb4cf7c52f0518"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff5a21379ddd3353c5f0a642986e6379"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#aff5a21379ddd3353c5f0a642986e6379">vgic_its_inv_lpi</a> (struct kvm *kvm, struct vgic_irq *irq)</td></tr>
<tr class="separator:aff5a21379ddd3353c5f0a642986e6379"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebd2d2ca133c7abccfd64534c1258020"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#aebd2d2ca133c7abccfd64534c1258020">vgic_its_invall</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:aebd2d2ca133c7abccfd64534c1258020"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a839b15883ba8f9de35a03ffce32fdf7f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a839b15883ba8f9de35a03ffce32fdf7f">vgic_supports_direct_msis</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a839b15883ba8f9de35a03ffce32fdf7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a802a906ad744a75b5af33bbd6b31237c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a802a906ad744a75b5af33bbd6b31237c">vgic_v4_init</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a802a906ad744a75b5af33bbd6b31237c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac805e466fa8f454112c11904ef8d41ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#ac805e466fa8f454112c11904ef8d41ce">vgic_v4_teardown</a> (struct kvm *kvm)</td></tr>
<tr class="separator:ac805e466fa8f454112c11904ef8d41ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a822de9f2b97fbc48164c88a7c0ac68f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a822de9f2b97fbc48164c88a7c0ac68f1">vgic_v4_configure_vsgis</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a822de9f2b97fbc48164c88a7c0ac68f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a783964868bc841487af2392e07060c48"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#a783964868bc841487af2392e07060c48">vgic_v4_get_vlpi_state</a> (struct vgic_irq *irq, bool *val)</td></tr>
<tr class="separator:a783964868bc841487af2392e07060c48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af99c2f70dd91a57879b3a2f583e49a4a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic_8h.html#af99c2f70dd91a57879b3a2f583e49a4a">vgic_v4_request_vpe_irq</a> (struct kvm_vcpu *vcpu, int irq)</td></tr>
<tr class="separator:af99c2f70dd91a57879b3a2f583e49a4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a0e2b76dd7108772ed1441b1e64f0be4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e2b76dd7108772ed1441b1e64f0be4b">&#9670;&nbsp;</a></span>DEBUG_SPINLOCK_BUG_ON</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SPINLOCK_BUG_ON</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00099">99</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="abe8bc95751010eaeb101c27877164e57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe8bc95751010eaeb101c27877164e57">&#9670;&nbsp;</a></span>IMPLEMENTER_ARM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMPLEMENTER_ARM&#160;&#160;&#160;0x43b</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00012">12</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="ab80aef098e9cbd5f101c16f926e3f5e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab80aef098e9cbd5f101c16f926e3f5e8">&#9670;&nbsp;</a></span>INTERRUPT_ID_BITS_ITS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INTERRUPT_ID_BITS_ITS&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00018">18</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a9496739994497af3dece67be9ab92959"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9496739994497af3dece67be9ab92959">&#9670;&nbsp;</a></span>INTERRUPT_ID_BITS_SPIS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INTERRUPT_ID_BITS_SPIS&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00017">17</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="adf701ae1a62928f5d797c6297fcf0364"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf701ae1a62928f5d797c6297fcf0364">&#9670;&nbsp;</a></span>IS_VGIC_ADDR_UNDEF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IS_VGIC_ADDR_UNDEF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_x</td><td>)</td>
          <td>&#160;&#160;&#160;((_x) == <a class="el" href="vgic_8h.html#ac91699b3ab8faf4d5222d998fb64b033">VGIC_ADDR_UNDEF</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00015">15</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a717009464b053fd6081408ceae541cb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a717009464b053fd6081408ceae541cb4">&#9670;&nbsp;</a></span>KVM_DEV_ARM_VGIC_SYSREG_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_DEV_ARM_VGIC_SYSREG_MASK</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">                      (<a class="code" href="vgic_8h.html#aadc1cc47af6d64735df62cea48add713">KVM_REG_ARM_VGIC_SYSREG_OP0_MASK</a> | \</div>
<div class="line">                      KVM_REG_ARM_VGIC_SYSREG_OP1_MASK | \</div>
<div class="line">                      KVM_REG_ARM_VGIC_SYSREG_CRN_MASK | \</div>
<div class="line">                      KVM_REG_ARM_VGIC_SYSREG_CRM_MASK | \</div>
<div class="line">                      KVM_REG_ARM_VGIC_SYSREG_OP2_MASK)</div>
<div class="ttc" id="avgic_8h_html_aadc1cc47af6d64735df62cea48add713"><div class="ttname"><a href="vgic_8h.html#aadc1cc47af6d64735df62cea48add713">KVM_REG_ARM_VGIC_SYSREG_OP0_MASK</a></div><div class="ttdeci">#define KVM_REG_ARM_VGIC_SYSREG_OP0_MASK</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00049">vgic.h:49</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00060">60</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="acc4cee2ae7e2e246c357c45545a3b9ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc4cee2ae7e2e246c357c45545a3b9ee">&#9670;&nbsp;</a></span>KVM_ITS_CTE_ICID_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_ITS_CTE_ICID_MASK&#160;&#160;&#160;GENMASK_ULL(15, 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00073">73</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="acb95a5add635c5046b2c023642d5b413"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb95a5add635c5046b2c023642d5b413">&#9670;&nbsp;</a></span>KVM_ITS_CTE_RDBASE_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_ITS_CTE_RDBASE_SHIFT&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00072">72</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a12e4604275e4c5bfa4d362d368fe6ac3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12e4604275e4c5bfa4d362d368fe6ac3">&#9670;&nbsp;</a></span>KVM_ITS_CTE_VALID_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_ITS_CTE_VALID_MASK&#160;&#160;&#160;BIT_ULL(63)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00071">71</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a88ecb14169b877dd44389e58f679987a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88ecb14169b877dd44389e58f679987a">&#9670;&nbsp;</a></span>KVM_ITS_CTE_VALID_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_ITS_CTE_VALID_SHIFT&#160;&#160;&#160;63</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00070">70</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="ab245a2ab0fccf0b039373866aee7143f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab245a2ab0fccf0b039373866aee7143f">&#9670;&nbsp;</a></span>KVM_ITS_DTE_ITTADDR_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_ITS_DTE_ITTADDR_MASK&#160;&#160;&#160;GENMASK_ULL(48, 5)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00083">83</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="aad0a81897092a04e660feb7071b76289"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad0a81897092a04e660feb7071b76289">&#9670;&nbsp;</a></span>KVM_ITS_DTE_ITTADDR_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_ITS_DTE_ITTADDR_SHIFT&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00082">82</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="ae9763661f6d0c274c8d24582c0872553"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9763661f6d0c274c8d24582c0872553">&#9670;&nbsp;</a></span>KVM_ITS_DTE_NEXT_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_ITS_DTE_NEXT_MASK&#160;&#160;&#160;GENMASK_ULL(62, 49)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00081">81</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a08bc3a888f7ff27f991f4260dfc5f9de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08bc3a888f7ff27f991f4260dfc5f9de">&#9670;&nbsp;</a></span>KVM_ITS_DTE_NEXT_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_ITS_DTE_NEXT_SHIFT&#160;&#160;&#160;49</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00080">80</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a4f3cff3bea9695479b00d472c801416f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f3cff3bea9695479b00d472c801416f">&#9670;&nbsp;</a></span>KVM_ITS_DTE_SIZE_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_ITS_DTE_SIZE_MASK&#160;&#160;&#160;GENMASK_ULL(4, 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00084">84</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a306573c16d534b8ae6298d7e3d00242a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a306573c16d534b8ae6298d7e3d00242a">&#9670;&nbsp;</a></span>KVM_ITS_DTE_VALID_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_ITS_DTE_VALID_MASK&#160;&#160;&#160;BIT_ULL(63)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00079">79</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="afff324cdc5d54484b34d01fb204f7ea3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afff324cdc5d54484b34d01fb204f7ea3">&#9670;&nbsp;</a></span>KVM_ITS_DTE_VALID_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_ITS_DTE_VALID_SHIFT&#160;&#160;&#160;63</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00078">78</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a4aeed767cf1ed73c4812c33d60dcf378"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4aeed767cf1ed73c4812c33d60dcf378">&#9670;&nbsp;</a></span>KVM_ITS_ITE_ICID_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_ITS_ITE_ICID_MASK&#160;&#160;&#160;GENMASK_ULL(15, 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00077">77</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a6f3f707651e3ef8848f2706f9c19a160"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f3f707651e3ef8848f2706f9c19a160">&#9670;&nbsp;</a></span>KVM_ITS_ITE_NEXT_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_ITS_ITE_NEXT_SHIFT&#160;&#160;&#160;48</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00074">74</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="add160ed73ed9fff723a490ea6ef8b348"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add160ed73ed9fff723a490ea6ef8b348">&#9670;&nbsp;</a></span>KVM_ITS_ITE_PINTID_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_ITS_ITE_PINTID_MASK&#160;&#160;&#160;GENMASK_ULL(47, 16)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00076">76</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="afed96368c9fad945eb39065e1e17c251"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afed96368c9fad945eb39065e1e17c251">&#9670;&nbsp;</a></span>KVM_ITS_ITE_PINTID_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_ITS_ITE_PINTID_SHIFT&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00075">75</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="ad4eb880023dbbaa20c58673b306b5e0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4eb880023dbbaa20c58673b306b5e0e">&#9670;&nbsp;</a></span>KVM_ITS_L1E_ADDR_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_ITS_L1E_ADDR_MASK&#160;&#160;&#160;GENMASK_ULL(51, 16)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00087">87</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="ac750d8dbf9ac75d0e7a90ec348b0152d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac750d8dbf9ac75d0e7a90ec348b0152d">&#9670;&nbsp;</a></span>KVM_ITS_L1E_VALID_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_ITS_L1E_VALID_MASK&#160;&#160;&#160;BIT_ULL(63)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00085">85</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a6780accd06326b08cfd5001824713ffa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6780accd06326b08cfd5001824713ffa">&#9670;&nbsp;</a></span>KVM_REG_ARM_VGIC_SYSREG_CRM_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_REG_ARM_VGIC_SYSREG_CRM_MASK&#160;&#160;&#160;0x0000000000000078</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00055">55</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="ace25948132c4d625d426da8cbd7e5e68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace25948132c4d625d426da8cbd7e5e68">&#9670;&nbsp;</a></span>KVM_REG_ARM_VGIC_SYSREG_CRM_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_REG_ARM_VGIC_SYSREG_CRM_SHIFT&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00056">56</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="affe2a1ff0c52a5c3cf9e49e58ac587f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affe2a1ff0c52a5c3cf9e49e58ac587f4">&#9670;&nbsp;</a></span>KVM_REG_ARM_VGIC_SYSREG_CRN_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_REG_ARM_VGIC_SYSREG_CRN_MASK&#160;&#160;&#160;0x0000000000000780</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00053">53</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a0d96eb3358c776aaeb7160b358f2f54c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d96eb3358c776aaeb7160b358f2f54c">&#9670;&nbsp;</a></span>KVM_REG_ARM_VGIC_SYSREG_CRN_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_REG_ARM_VGIC_SYSREG_CRN_SHIFT&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00054">54</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="aadc1cc47af6d64735df62cea48add713"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadc1cc47af6d64735df62cea48add713">&#9670;&nbsp;</a></span>KVM_REG_ARM_VGIC_SYSREG_OP0_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_REG_ARM_VGIC_SYSREG_OP0_MASK&#160;&#160;&#160;0x000000000000c000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00049">49</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a2dac2914a3bbc079d215c02d68438d7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dac2914a3bbc079d215c02d68438d7e">&#9670;&nbsp;</a></span>KVM_REG_ARM_VGIC_SYSREG_OP0_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_REG_ARM_VGIC_SYSREG_OP0_SHIFT&#160;&#160;&#160;14</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00050">50</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a6a7a986c511d01a46f5da9abfb6cd49b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a7a986c511d01a46f5da9abfb6cd49b">&#9670;&nbsp;</a></span>KVM_REG_ARM_VGIC_SYSREG_OP1_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_REG_ARM_VGIC_SYSREG_OP1_MASK&#160;&#160;&#160;0x0000000000003800</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00051">51</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a385279250f9b5c8b5c02c9ea7dbf1ee0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a385279250f9b5c8b5c02c9ea7dbf1ee0">&#9670;&nbsp;</a></span>KVM_REG_ARM_VGIC_SYSREG_OP1_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_REG_ARM_VGIC_SYSREG_OP1_SHIFT&#160;&#160;&#160;11</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00052">52</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a7520363d7298e2fbd45760481610bf01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7520363d7298e2fbd45760481610bf01">&#9670;&nbsp;</a></span>KVM_REG_ARM_VGIC_SYSREG_OP2_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_REG_ARM_VGIC_SYSREG_OP2_MASK&#160;&#160;&#160;0x0000000000000007</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00057">57</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a78e22304be093d51d6642655719950ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78e22304be093d51d6642655719950ca">&#9670;&nbsp;</a></span>KVM_REG_ARM_VGIC_SYSREG_OP2_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_REG_ARM_VGIC_SYSREG_OP2_SHIFT&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00058">58</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a4b3d85861547e0e8a06a9d459b8bc1f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b3d85861547e0e8a06a9d459b8bc1f5">&#9670;&nbsp;</a></span>KVM_VGIC_V3_RDIST_BASE_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_VGIC_V3_RDIST_BASE_MASK&#160;&#160;&#160;GENMASK_ULL(51, 16)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00092">92</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a39abc101c3e1c37577cc5140b5a6a0c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39abc101c3e1c37577cc5140b5a6a0c5">&#9670;&nbsp;</a></span>KVM_VGIC_V3_RDIST_COUNT_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_VGIC_V3_RDIST_COUNT_MASK&#160;&#160;&#160;GENMASK_ULL(63, 52)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00093">93</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a5e7ccc903e0370ac380bc78fbfae3d2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e7ccc903e0370ac380bc78fbfae3d2b">&#9670;&nbsp;</a></span>KVM_VGIC_V3_RDIST_COUNT_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_VGIC_V3_RDIST_COUNT_SHIFT&#160;&#160;&#160;52</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00094">94</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="ae06d384979afe3ae035989ac1973f56a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae06d384979afe3ae035989ac1973f56a">&#9670;&nbsp;</a></span>KVM_VGIC_V3_RDIST_FLAGS_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_VGIC_V3_RDIST_FLAGS_MASK&#160;&#160;&#160;GENMASK_ULL(15, 12)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00090">90</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="abd36d8c7265e3cb59ba4563490bf64c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd36d8c7265e3cb59ba4563490bf64c4">&#9670;&nbsp;</a></span>KVM_VGIC_V3_RDIST_FLAGS_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_VGIC_V3_RDIST_FLAGS_SHIFT&#160;&#160;&#160;12</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00091">91</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a780883d6e28680682a1dcd73b716eb78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a780883d6e28680682a1dcd73b716eb78">&#9670;&nbsp;</a></span>KVM_VGIC_V3_RDIST_INDEX_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KVM_VGIC_V3_RDIST_INDEX_MASK&#160;&#160;&#160;GENMASK_ULL(11, 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00089">89</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="ad05e0f46c5e8032d320745a738a83e0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad05e0f46c5e8032d320745a738a83e0f">&#9670;&nbsp;</a></span>PRODUCT_ID_KVM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PRODUCT_ID_KVM&#160;&#160;&#160;0x4b	/* ASCII code K */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00011">11</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="ac91699b3ab8faf4d5222d998fb64b033"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac91699b3ab8faf4d5222d998fb64b033">&#9670;&nbsp;</a></span>VGIC_ADDR_UNDEF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VGIC_ADDR_UNDEF&#160;&#160;&#160;(-1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00014">14</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="ac56b5835c06562ac14d06f6954516a8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac56b5835c06562ac14d06f6954516a8c">&#9670;&nbsp;</a></span>VGIC_AFFINITY_0_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VGIC_AFFINITY_0_MASK&#160;&#160;&#160;(0xffUL &lt;&lt; <a class="el" href="vgic_8h.html#af04e928f828a93a4670abda231d09149">VGIC_AFFINITY_0_SHIFT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00024">24</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="af04e928f828a93a4670abda231d09149"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af04e928f828a93a4670abda231d09149">&#9670;&nbsp;</a></span>VGIC_AFFINITY_0_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VGIC_AFFINITY_0_SHIFT&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00023">23</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="abca036b49d9b12a63ad588ad892f52ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abca036b49d9b12a63ad588ad892f52ca">&#9670;&nbsp;</a></span>VGIC_AFFINITY_1_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VGIC_AFFINITY_1_MASK&#160;&#160;&#160;(0xffUL &lt;&lt; <a class="el" href="vgic_8h.html#a4061e65dab36e49298c2de378a4f22ad">VGIC_AFFINITY_1_SHIFT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00026">26</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a4061e65dab36e49298c2de378a4f22ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4061e65dab36e49298c2de378a4f22ad">&#9670;&nbsp;</a></span>VGIC_AFFINITY_1_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VGIC_AFFINITY_1_SHIFT&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00025">25</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a8cd45d3b058c2f8d4537489594d4ab4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cd45d3b058c2f8d4537489594d4ab4f">&#9670;&nbsp;</a></span>VGIC_AFFINITY_2_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VGIC_AFFINITY_2_MASK&#160;&#160;&#160;(0xffUL &lt;&lt; <a class="el" href="vgic_8h.html#a48e82a6616273617ae42e30698731f5a">VGIC_AFFINITY_2_SHIFT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00028">28</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a48e82a6616273617ae42e30698731f5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48e82a6616273617ae42e30698731f5a">&#9670;&nbsp;</a></span>VGIC_AFFINITY_2_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VGIC_AFFINITY_2_SHIFT&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00027">27</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="af00d3f73750adafd03d6787ab5f8daa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af00d3f73750adafd03d6787ab5f8daa9">&#9670;&nbsp;</a></span>VGIC_AFFINITY_3_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VGIC_AFFINITY_3_MASK&#160;&#160;&#160;(0xffUL &lt;&lt; <a class="el" href="vgic_8h.html#a9522f86f8127f616052b7c807014336e">VGIC_AFFINITY_3_SHIFT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00030">30</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a9522f86f8127f616052b7c807014336e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9522f86f8127f616052b7c807014336e">&#9670;&nbsp;</a></span>VGIC_AFFINITY_3_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VGIC_AFFINITY_3_SHIFT&#160;&#160;&#160;24</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00029">29</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a318016c7ac3592e78d799e9785d4199c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a318016c7ac3592e78d799e9785d4199c">&#9670;&nbsp;</a></span>VGIC_AFFINITY_LEVEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VGIC_AFFINITY_LEVEL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">reg, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">level&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    ((((reg) &amp; VGIC_AFFINITY_## level ##_MASK) \</div>
<div class="line">    &gt;&gt; VGIC_AFFINITY_## level ##_SHIFT) &lt;&lt; MPIDR_LEVEL_SHIFT(level))</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00032">32</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a67cef97460e9a4080ae437e5a30113a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67cef97460e9a4080ae437e5a30113a7">&#9670;&nbsp;</a></span>vgic_irq_is_sgi</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define vgic_irq_is_sgi</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">intid</td><td>)</td>
          <td>&#160;&#160;&#160;((intid) &lt; VGIC_NR_SGIS)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00021">21</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a4ca1aec9664009bf017af6d31b590600"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ca1aec9664009bf017af6d31b590600">&#9670;&nbsp;</a></span>VGIC_PRI_BITS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VGIC_PRI_BITS&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00019">19</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<a id="a6cdd97958d32f8942e038e26dc313540"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cdd97958d32f8942e038e26dc313540">&#9670;&nbsp;</a></span>VGIC_TO_MPIDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VGIC_TO_MPIDR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">                (<a class="code" href="vgic_8h.html#a318016c7ac3592e78d799e9785d4199c">VGIC_AFFINITY_LEVEL</a>(val, 0) | \</div>
<div class="line">                VGIC_AFFINITY_LEVEL(val, 1) | \</div>
<div class="line">                VGIC_AFFINITY_LEVEL(val, 2) | \</div>
<div class="line">                VGIC_AFFINITY_LEVEL(val, 3))</div>
<div class="ttc" id="avgic_8h_html_a318016c7ac3592e78d799e9785d4199c"><div class="ttname"><a href="vgic_8h.html#a318016c7ac3592e78d799e9785d4199c">VGIC_AFFINITY_LEVEL</a></div><div class="ttdeci">#define VGIC_AFFINITY_LEVEL(reg, level)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00032">vgic.h:32</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00040">40</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="affa1a20a5bd9d67dc546c1ccaace3406"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affa1a20a5bd9d67dc546c1ccaace3406">&#9670;&nbsp;</a></span>__vgic_put_lpi_locked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __vgic_put_lpi_locked </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct vgic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8c_source.html#l00126">126</a> of file <a class="el" href="vgic_8c_source.html">vgic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;{</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keyword">struct </span>vgic_dist *dist = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">if</span> (!kref_put(&amp;irq-&gt;refcount, <a class="code" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797">vgic_irq_release</a>))</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    list_del(&amp;irq-&gt;lpi_list);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    dist-&gt;lpi_list_count--;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    kfree(irq);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div>
<div class="ttc" id="avgic_8c_html_a7d513558f0ea4ecbc012c98b3522f797"><div class="ttname"><a href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797">vgic_irq_release</a></div><div class="ttdeci">static void vgic_irq_release(struct kref *ref)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8c_source.html#l00119">vgic.c:119</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_affa1a20a5bd9d67dc546c1ccaace3406_cgraph.png" border="0" usemap="#avgic_8h_affa1a20a5bd9d67dc546c1ccaace3406_cgraph" alt=""/></div>
<map name="avgic_8h_affa1a20a5bd9d67dc546c1ccaace3406_cgraph" id="avgic_8h_affa1a20a5bd9d67dc546c1ccaace3406_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,168,32"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="216,5,344,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_affa1a20a5bd9d67dc546c1ccaace3406_icgraph.png" border="0" usemap="#avgic_8h_affa1a20a5bd9d67dc546c1ccaace3406_icgraph" alt=""/></div>
<map name="avgic_8h_affa1a20a5bd9d67dc546c1ccaace3406_icgraph" id="avgic_8h_affa1a20a5bd9d67dc546c1ccaace3406_icgraph">
<area shape="rect" title=" " alt="" coords="755,162,917,189"/>
<area shape="rect" href="vgic-its_8c.html#ad9756268e1c22946f868e3255f916aa6" title=" " alt="" coords="512,82,707,109"/>
<area shape="rect" href="vgic-its_8c.html#a922a99eb2d73f90e4fcb4cf7c52f0518" title=" " alt="" coords="287,155,431,196"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="559,1114,660,1141"/>
<area shape="rect" href="vgic-its_8c.html#a3fe23d687675cef46a95e36cf14d04e1" title=" " alt="" coords="284,31,435,58"/>
<area shape="rect" href="vgic-its_8c.html#a4d64251bff41fe2045857ab6c2da7b44" title=" " alt="" coords="27,5,185,47"/>
<area shape="rect" href="vgic-its_8c.html#a5a1b172537c8f671ba45bb8659691a2e" title=" " alt="" coords="5,122,207,149"/>
<area shape="rect" href="vgic-its_8c.html#a3887f6b0b2f941a1254aa6ebfe40595b" title=" " alt="" coords="27,341,185,383"/>
<area shape="rect" href="vgic-its_8c.html#aa05ff0163aa7da52db4a3f766e2f84e3" title=" " alt="" coords="7,173,205,199"/>
<area shape="rect" href="vgic-its_8c.html#a9f17b8d0d381f88b2962db836635c00b" title=" " alt="" coords="29,71,183,98"/>
<area shape="rect" href="vgic-its_8c.html#a58207180090221f6c6529d3c4acad96b" title=" " alt="" coords="31,224,181,265"/>
<area shape="rect" href="vgic-its_8c.html#a5a3faae3829450972ffb2d701407c8fb" title=" " alt="" coords="13,290,199,317"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a2f4cb3a37ad0e3cdd4cfdf827126e369" title=" " alt="" coords="11,686,201,713"/>
<area shape="rect" href="vgic-mmio_8c.html#ac9d250a7a5f4eae6374bd57711e4aa5a" title=" " alt="" coords="296,271,423,298"/>
<area shape="rect" href="vgic-mmio_8c.html#acb8571139852386510e89bd6a9fbf9e6" title=" " alt="" coords="297,322,421,349"/>
<area shape="rect" href="vgic-mmio_8c.html#abbf6cc4053faa7c09c5b99c71a6aaa2a" title=" " alt="" coords="302,373,417,399"/>
<area shape="rect" href="vgic-mmio_8c.html#a25ebace3c89c7b1d2c8cc6e4b41ac351" title=" " alt="" coords="264,423,455,450"/>
<area shape="rect" href="vgic-mmio_8c.html#a4552ff194be4788b6c2d944a201903fc" title=" " alt="" coords="258,474,461,501"/>
<area shape="rect" href="vgic-mmio_8c.html#a512b4b38220c4a8e593935c74ce036c5" title=" " alt="" coords="258,525,461,551"/>
<area shape="rect" href="vgic-its_8c.html#aa29a9fb283aa9dec6b8995c72b3a56ba" title=" " alt="" coords="312,82,407,109"/>
<area shape="rect" href="vgic-its_8c.html#aed468545774ff099d4ef46fb82e51759" title=" " alt="" coords="281,576,438,617"/>
<area shape="rect" href="vgic_8c.html#a0a11de94338771a6d53dd409d4f4c49d" title=" " alt="" coords="285,642,434,669"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="283,693,435,719"/>
<area shape="rect" href="vgic_8c.html#a1273f536f3d378a0b259e76591471f7b" title=" " alt="" coords="266,743,453,770"/>
<area shape="rect" href="vgic_8c.html#ab4243e0ac375259b39c04a6cc6266a9f" title=" " alt="" coords="268,794,451,821"/>
<area shape="rect" href="vgic_8c.html#a37d0e0f4c579bc38afe8d5f91529a772" title=" " alt="" coords="255,845,464,871"/>
<area shape="rect" href="vgic_8c.html#a4199ace0bb639bc69d06a2ce1ee0d1ff" title=" " alt="" coords="260,895,459,922"/>
<area shape="rect" href="vgic-debug_8c.html#a867b28db5803a6daa9723fb112d70deb" title=" " alt="" coords="291,946,428,973"/>
<area shape="rect" href="vgic_8c.html#a573eb768a56ea0b73e234771e0013ffc" title=" " alt="" coords="271,997,447,1023"/>
<area shape="rect" href="vgic-its_8c.html#a352c8627ccf81a8154ae2275c7d50659" title=" " alt="" coords="275,1048,443,1089"/>
<area shape="rect" href="vgic-its_8c.html#aebd2d2ca133c7abccfd64534c1258020" title=" " alt="" coords="302,1114,417,1141"/>
<area shape="rect" href="vgic-mmio_8c.html#a7fac20eacde0df9000d09b67f9300c16" title=" " alt="" coords="271,1165,447,1191"/>
<area shape="rect" href="vgic-mmio_8c.html#ac251d3bc75b5bd5550798715b3f0cf21" title=" " alt="" coords="269,1215,450,1242"/>
<area shape="rect" href="vgic-mmio_8c.html#a76a5cf658fa6075b5aa8de86d9ce4188" title=" " alt="" coords="272,1266,447,1293"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab639844a1b212efe7c1c662fd3b686b6" title=" " alt="" coords="269,1317,449,1343"/>
<area shape="rect" href="vgic-mmio_8c.html#a93fcd4f3757f88fb702332e5abd1d494" title=" " alt="" coords="267,1367,451,1394"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a8004c1add09524cf4aa88e910297dac7" title=" " alt="" coords="265,1418,453,1445"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#aef074302387e8dd60db49de00d523310" title=" " alt="" coords="271,1469,447,1495"/>
<area shape="rect" href="vgic-mmio_8c.html#a2ca5852d154989bbe7d03d88a60b33bd" title=" " alt="" coords="263,1519,455,1546"/>
<area shape="rect" href="vgic-mmio_8c.html#abe0c52fb86ae2728c808545ce2955101" title=" " alt="" coords="269,1570,449,1597"/>
<area shape="rect" href="vgic-mmio_8c.html#a59b486242da411e911332ba64728824d" title=" " alt="" coords="270,1621,449,1647"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#aa268002fc305866e42157249254372cb" title=" " alt="" coords="271,1671,448,1698"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a8207263120fdd08350fa48f0aee44351" title=" " alt="" coords="267,1722,451,1749"/>
<area shape="rect" href="vgic-mmio_8c.html#a654979b0910066eac66257c945040ac1" title=" " alt="" coords="265,1773,453,1799"/>
<area shape="rect" href="vgic-mmio_8c.html#a0c1f43ac9c640684281b61fd45b48a67" title=" " alt="" coords="263,1823,455,1850"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a5dbc7437d7a969cd08af33810777e861" title=" " alt="" coords="260,1874,459,1901"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a2c419211f7bf28a70acb6817236bb232" title=" " alt="" coords="260,1925,459,1951"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a5fbdffc6aa7bf13d7805dd8bd60842ca" title=" " alt="" coords="277,1975,442,2002"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#aee92fc893171f9f1de7b535b0abb93e1" title=" " alt="" coords="269,2026,449,2053"/>
<area shape="rect" href="vgic_8c.html#ae8f3490d589fa019869fe67839e3c748" title=" " alt="" coords="288,2077,431,2103"/>
</map>
</div>

</div>
</div>
<a id="a1109d873011f89a4acb4fd461f9f0a45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1109d873011f89a4acb4fd461f9f0a45">&#9670;&nbsp;</a></span>irq_is_pending()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool irq_is_pending </td>
          <td>(</td>
          <td class="paramtype">struct vgic_irq *&#160;</td>
          <td class="paramname"><em>irq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00108">108</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;{</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">if</span> (irq-&gt;config == VGIC_CONFIG_EDGE)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">return</span> irq-&gt;pending_latch;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">return</span> irq-&gt;pending_latch || irq-&gt;line_level;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a1109d873011f89a4acb4fd461f9f0a45_icgraph.png" border="0" usemap="#avgic_8h_a1109d873011f89a4acb4fd461f9f0a45_icgraph" alt=""/></div>
<map name="avgic_8h_a1109d873011f89a4acb4fd461f9f0a45_icgraph" id="avgic_8h_a1109d873011f89a4acb4fd461f9f0a45_icgraph">
<area shape="rect" title=" " alt="" coords="1721,365,1837,392"/>
<area shape="rect" href="vgic-mmio_8c.html#acb8571139852386510e89bd6a9fbf9e6" title=" " alt="" coords="1508,107,1632,133"/>
<area shape="rect" href="vgic_8c.html#a3059bfcee1ad30f581150d06c07d68e8" title=" " alt="" coords="1467,231,1673,257"/>
<area shape="rect" href="vgic_8c.html#a74a26281729460bffc169b74551c50ad" title=" " alt="" coords="1516,301,1624,328"/>
<area shape="rect" href="vgic_8h.html#a9bdd8f789c7055ff9681448eecde7072" title=" " alt="" coords="1490,365,1650,392"/>
<area shape="rect" href="vgic-v2_8c.html#a9b6956f55b0732bd8aa6e5cce3b51b34" title=" " alt="" coords="995,441,1147,468"/>
<area shape="rect" href="vgic-v3_8c.html#ad978c7773b6b8a81c108e35926ce6f86" title=" " alt="" coords="995,492,1147,519"/>
<area shape="rect" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247" title=" " alt="" coords="757,517,900,544"/>
<area shape="rect" href="vgic-mmio_8c.html#a6235e1f8f727a8a7ba0faf6ed401b04e" title=" " alt="" coords="1223,56,1412,83"/>
<area shape="rect" href="vgic-mmio_8c.html#a39de6f448012602b72fcc09860d1a0a3" title=" " alt="" coords="1216,107,1419,133"/>
<area shape="rect" href="arm_8c.html#ac412fb0d81a53e66d8ac4146e4202f92" title=" " alt="" coords="1223,157,1411,184"/>
<area shape="rect" href="vgic_8c.html#afd47a938061d223b085c0ca0bed6aa71" title=" " alt="" coords="1253,231,1381,257"/>
<area shape="rect" href="kvm__main_8c.html#aac20f0d987f71a47c6701c7e93a0e261" title=" " alt="" coords="984,31,1157,57"/>
<area shape="rect" href="kvm__main_8c.html#a3de4d6991bdd1a714e8afa6a55136cdd" title=" " alt="" coords="983,107,1159,133"/>
<area shape="rect" href="arm_8c.html#ad33fe3df0e24d8ff8cb0a7f4657ec3fa" title=" " alt="" coords="995,157,1146,184"/>
<area shape="rect" href="kvm__main_8c.html#a06ed191cebec13ce2c4a7d15fdeb5a60" title=" " alt="" coords="759,5,899,32"/>
<area shape="rect" href="kvm__main_8c.html#a8e18df0287ddedfd516454aeeb669807" title=" " alt="" coords="763,56,894,83"/>
<area shape="rect" href="kvm__main_8c.html#a7256a8615584a9ae83a46c071f6aa0e9" title=" " alt="" coords="538,84,659,111"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="518,180,679,207"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="12,356,199,383"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a2acb707aa37dccb7a4d021632629f994" title=" " alt="" coords="973,220,1168,247"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a496b87a9bc8e2c1a5aa2d9ba2e13cc10" title=" " alt="" coords="973,277,1168,304"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a86125023f5d85776a3857a2b82dfd2ca" title=" " alt="" coords="732,209,925,250"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a566ddfae78ebf930568f0dcc4a1bea21" title=" " alt="" coords="732,274,925,315"/>
<area shape="rect" href="vgic_8c.html#a33608d0aa45c2f10d84571ecf4475c5d" title=" " alt="" coords="1252,289,1383,316"/>
<area shape="rect" href="vgic_8c.html#a498227d2a82836ba11a046b68857e3a3" title=" " alt="" coords="527,391,670,417"/>
<area shape="rect" href="vgic_8c.html#a5fb6266a1f361c1945f5feb862c1cf31" title=" " alt="" coords="268,356,451,383"/>
<area shape="rect" href="vgic_8c.html#a5d8388f7026d04d501f7188b0b470812" title=" " alt="" coords="1231,340,1404,367"/>
<area shape="rect" href="vgic_8h.html#a03246bc81a56f8f77c3ee4ea6e27047d" title=" " alt="" coords="1238,391,1397,417"/>
<area shape="rect" href="vgic_8c.html#a1d440ccc621cee03cf929f67f1fc5f6a" title=" " alt="" coords="764,441,893,468"/>
<area shape="rect" href="vgic_8c.html#ae8f3490d589fa019869fe67839e3c748" title=" " alt="" coords="527,467,670,493"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="513,844,684,871"/>
<area shape="rect" href="vgic_8c.html#a76c600af416fb73e40611d80115edc03" title=" " alt="" coords="269,407,450,433"/>
<area shape="rect" href="vgic-mmio_8c.html#abbf6cc4053faa7c09c5b99c71a6aaa2a" title=" " alt="" coords="302,457,417,484"/>
<area shape="rect" href="vgic-its_8c.html#aed468545774ff099d4ef46fb82e51759" title=" " alt="" coords="281,509,438,550"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="283,575,435,601"/>
<area shape="rect" href="vgic-v4_8c.html#a48b85c50461cf6bb5b295c722f7e08f1" title=" " alt="" coords="253,625,465,652"/>
<area shape="rect" href="vgic-its_8c.html#a423c5139315e14ce4ec9f66ae4abb88c" title=" " alt="" coords="291,676,427,703"/>
<area shape="rect" href="vgic-its_8c.html#a352c8627ccf81a8154ae2275c7d50659" title=" " alt="" coords="275,727,443,769"/>
<area shape="rect" href="vgic-its_8c.html#ad62375be0591178764e98b79cd7217bf" title=" " alt="" coords="283,793,436,820"/>
<area shape="rect" href="vgic-mmio_8c.html#ae0e687d9272d9f9e52e4356c2732b289" title=" " alt="" coords="262,844,457,871"/>
<area shape="rect" href="vgic-mmio_8c.html#a59b486242da411e911332ba64728824d" title=" " alt="" coords="270,895,449,921"/>
<area shape="rect" href="vgic-mmio_8c.html#a0c1f43ac9c640684281b61fd45b48a67" title=" " alt="" coords="263,945,455,972"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a2c419211f7bf28a70acb6817236bb232" title=" " alt="" coords="260,996,459,1023"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a5fbdffc6aa7bf13d7805dd8bd60842ca" title=" " alt="" coords="277,1047,442,1073"/>
<area shape="rect" href="vgic-mmio_8c.html#ad0d52d06620d3bd5c446a09ae6ddeac0" title=" " alt="" coords="285,1098,433,1139"/>
<area shape="rect" href="vgic-v3_8c.html#ac8f115520573cc0407f90177aeccfed9" title=" " alt="" coords="264,1163,455,1205"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a5039defeee267f93839f5359d7534ff7" title=" " alt="" coords="287,1229,432,1256"/>
<area shape="rect" href="vgic-mmio_8c.html#a28964cd75c2483a30f9743d35507bbce" title=" " alt="" coords="287,1281,431,1322"/>
<area shape="rect" href="vgic-mmio_8c.html#a5a75938ee02f87306de4cc6200b830db" title=" " alt="" coords="5,457,205,484"/>
</map>
</div>

</div>
</div>
<a id="aa01e5dcf80e608f64f5428d054d17a84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa01e5dcf80e608f64f5428d054d17a84">&#9670;&nbsp;</a></span>kvm_register_vgic_device()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_register_vgic_device </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00316">316</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordtype">int</span> ret = -ENODEV;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">switch</span> (type) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_TYPE_ARM_VGIC_V2:</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        ret = <a class="code" href="kvm__main_8c.html#a04cec4716182d98b08f008f317aaf698">kvm_register_device_ops</a>(&amp;<a class="code" href="vgic-kvm-device_8c.html#a5a628c87c18349dd58c792be382a1923">kvm_arm_vgic_v2_ops</a>,</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                          KVM_DEV_TYPE_ARM_VGIC_V2);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_TYPE_ARM_VGIC_V3:</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        ret = <a class="code" href="kvm__main_8c.html#a04cec4716182d98b08f008f317aaf698">kvm_register_device_ops</a>(&amp;<a class="code" href="vgic-kvm-device_8c.html#adad4cc8377a1795f085c0e7824d336a2">kvm_arm_vgic_v3_ops</a>,</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                          KVM_DEV_TYPE_ARM_VGIC_V3);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        ret = <a class="code" href="vgic-its_8c.html#a50d09aacec778677eb4fb2c550a3bea4">kvm_vgic_register_its_device</a>();</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_a04cec4716182d98b08f008f317aaf698"><div class="ttname"><a href="kvm__main_8c.html#a04cec4716182d98b08f008f317aaf698">kvm_register_device_ops</a></div><div class="ttdeci">int kvm_register_device_ops(const struct kvm_device_ops *ops, u32 type)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l04742">kvm_main.c:4742</a></div></div>
<div class="ttc" id="avgic-its_8c_html_a50d09aacec778677eb4fb2c550a3bea4"><div class="ttname"><a href="vgic-its_8c.html#a50d09aacec778677eb4fb2c550a3bea4">kvm_vgic_register_its_device</a></div><div class="ttdeci">int kvm_vgic_register_its_device(void)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l02914">vgic-its.c:2914</a></div></div>
<div class="ttc" id="avgic-kvm-device_8c_html_a5a628c87c18349dd58c792be382a1923"><div class="ttname"><a href="vgic-kvm-device_8c.html#a5a628c87c18349dd58c792be382a1923">kvm_arm_vgic_v2_ops</a></div><div class="ttdeci">struct kvm_device_ops kvm_arm_vgic_v2_ops</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00440">vgic-kvm-device.c:465</a></div></div>
<div class="ttc" id="avgic-kvm-device_8c_html_adad4cc8377a1795f085c0e7824d336a2"><div class="ttname"><a href="vgic-kvm-device_8c.html#adad4cc8377a1795f085c0e7824d336a2">kvm_arm_vgic_v3_ops</a></div><div class="ttdeci">struct kvm_device_ops kvm_arm_vgic_v3_ops</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00626">vgic-kvm-device.c:662</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_aa01e5dcf80e608f64f5428d054d17a84_cgraph.png" border="0" usemap="#avgic_8h_aa01e5dcf80e608f64f5428d054d17a84_cgraph" alt=""/></div>
<map name="avgic_8h_aa01e5dcf80e608f64f5428d054d17a84_cgraph" id="avgic_8h_aa01e5dcf80e608f64f5428d054d17a84_cgraph">
<area shape="rect" title=" " alt="" coords="5,35,197,61"/>
<area shape="rect" href="kvm__main_8c.html#a04cec4716182d98b08f008f317aaf698" title=" " alt="" coords="245,5,433,32"/>
<area shape="rect" href="vgic-its_8c.html#a50d09aacec778677eb4fb2c550a3bea4" title=" " alt="" coords="257,57,422,98"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_aa01e5dcf80e608f64f5428d054d17a84_icgraph.png" border="0" usemap="#avgic_8h_aa01e5dcf80e608f64f5428d054d17a84_icgraph" alt=""/></div>
<map name="avgic_8h_aa01e5dcf80e608f64f5428d054d17a84_icgraph" id="avgic_8h_aa01e5dcf80e608f64f5428d054d17a84_icgraph">
<area shape="rect" title=" " alt="" coords="697,31,889,57"/>
<area shape="rect" href="vgic-v2_8c.html#aa3e64817232a1ce5658b7f3147f7f554" title=" " alt="" coords="533,5,649,32"/>
<area shape="rect" href="vgic-v3_8c.html#ac418c84cff9542559c426a575c403136" title=" " alt="" coords="533,56,649,83"/>
<area shape="rect" href="vgic-init_8c.html#aba3547aa220ca50b1eabca1a39c92943" title=" " alt="" coords="341,31,485,57"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="165,31,293,57"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="5,31,117,57"/>
</map>
</div>

</div>
</div>
<a id="a50d09aacec778677eb4fb2c550a3bea4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50d09aacec778677eb4fb2c550a3bea4">&#9670;&nbsp;</a></span>kvm_vgic_register_its_device()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_vgic_register_its_device </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-its_8c_source.html#l02914">2914</a> of file <a class="el" href="vgic-its_8c_source.html">vgic-its.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;{</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="kvm__main_8c.html#a04cec4716182d98b08f008f317aaf698">kvm_register_device_ops</a>(&amp;<a class="code" href="vgic-its_8c.html#a7e5b58ec4b5195f21018d0b5b499adee">kvm_arm_vgic_its_ops</a>,</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;                       KVM_DEV_TYPE_ARM_VGIC_ITS);</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;}</div>
<div class="ttc" id="avgic-its_8c_html_a7e5b58ec4b5195f21018d0b5b499adee"><div class="ttname"><a href="vgic-its_8c.html#a7e5b58ec4b5195f21018d0b5b499adee">kvm_arm_vgic_its_ops</a></div><div class="ttdeci">static struct kvm_device_ops kvm_arm_vgic_its_ops</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l02871">vgic-its.c:2905</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a50d09aacec778677eb4fb2c550a3bea4_icgraph.png" border="0" usemap="#avgic_8h_a50d09aacec778677eb4fb2c550a3bea4_icgraph" alt=""/></div>
<map name="avgic_8h_a50d09aacec778677eb4fb2c550a3bea4_icgraph" id="avgic_8h_a50d09aacec778677eb4fb2c550a3bea4_icgraph">
<area shape="rect" title=" " alt="" coords="937,23,1103,65"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa01e5dcf80e608f64f5428d054d17a84" title=" " alt="" coords="697,31,889,57"/>
<area shape="rect" href="vgic-v2_8c.html#aa3e64817232a1ce5658b7f3147f7f554" title=" " alt="" coords="533,5,649,32"/>
<area shape="rect" href="vgic-v3_8c.html#ac418c84cff9542559c426a575c403136" title=" " alt="" coords="533,56,649,83"/>
<area shape="rect" href="vgic-init_8c.html#aba3547aa220ca50b1eabca1a39c92943" title=" " alt="" coords="341,31,485,57"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="165,31,293,57"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="5,31,117,57"/>
</map>
</div>

</div>
</div>
<a id="af0cfcc44a93abc13df9a7e364c21cf32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0cfcc44a93abc13df9a7e364c21cf32">&#9670;&nbsp;</a></span>vgic_check_iorange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_check_iorange </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">phys_addr_t&#160;</td>
          <td class="paramname"><em>ioaddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">phys_addr_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">phys_addr_t&#160;</td>
          <td class="paramname"><em>alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">phys_addr_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00017">17</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;{</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="vgic_8h.html#adf701ae1a62928f5d797c6297fcf0364">IS_VGIC_ADDR_UNDEF</a>(ioaddr))</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;        <span class="keywordflow">return</span> -EEXIST;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <span class="keywordflow">if</span> (!IS_ALIGNED(addr, alignment) || !IS_ALIGNED(<a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>, alignment))</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="keywordflow">if</span> (addr + <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a> &lt; addr)</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="keywordflow">if</span> (addr &amp; ~kvm_phys_mask(&amp;kvm-&gt;arch.mmu) ||</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        (addr + <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>) &gt; kvm_phys_size(&amp;kvm-&gt;arch.mmu))</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        <span class="keywordflow">return</span> -E2BIG;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;}</div>
<div class="ttc" id="agen-hyprel_8c_html_a854352f53b148adc24983a58a1866d66"><div class="ttname"><a href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> <a href="gen-hyprel_8c_source.html#l00133">gen-hyprel.c:133</a></div></div>
<div class="ttc" id="avgic_8h_html_adf701ae1a62928f5d797c6297fcf0364"><div class="ttname"><a href="vgic_8h.html#adf701ae1a62928f5d797c6297fcf0364">IS_VGIC_ADDR_UNDEF</a></div><div class="ttdeci">#define IS_VGIC_ADDR_UNDEF(_x)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00015">vgic.h:15</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_af0cfcc44a93abc13df9a7e364c21cf32_icgraph.png" border="0" usemap="#avgic_8h_af0cfcc44a93abc13df9a7e364c21cf32_icgraph" alt=""/></div>
<map name="avgic_8h_af0cfcc44a93abc13df9a7e364c21cf32_icgraph" id="avgic_8h_af0cfcc44a93abc13df9a7e364c21cf32_icgraph">
<area shape="rect" title=" " alt="" coords="1604,122,1755,149"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a7808d55ba83902bd478febfc33334d5d" title=" " alt="" coords="1393,5,1556,47"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="442,97,563,123"/>
<area shape="rect" href="vgic-its_8c.html#a447c6440b22a131380c55c753c5b9004" title=" " alt="" coords="1410,122,1539,149"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a78fb08dd130c0b8fc504e4725cd4f370" title=" " alt="" coords="1155,139,1309,180"/>
<area shape="rect" href="vgic-v3_8c.html#a98c28ff2dc6b6965cef76e1be35233b1" title=" " alt="" coords="1397,227,1552,254"/>
<area shape="rect" href="arm_8c.html#a18aad074e49e8bedf16bff2daee6fc5d" title=" " alt="" coords="1119,13,1345,39"/>
<area shape="rect" href="arm_8c.html#a10224987f77e7370dd9f2b80352544ab" title=" " alt="" coords="901,13,1050,39"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40" title=" " alt="" coords="184,71,355,98"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="184,122,355,149"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,21,136,47"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,71,136,98"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="6,122,135,149"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,173,135,199"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="651,122,832,149"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a7c5d9bcbf29cb46bac8622d8bcc145b2" title=" " alt="" coords="1157,220,1307,261"/>
<area shape="rect" href="vgic-v3_8c.html#a8c2e4753883533516b45a2bbf9dad1ce" title=" " alt="" coords="1143,287,1321,314"/>
<area shape="rect" href="vgic-init_8c.html#ad052e8c724bfbb39c34281df23166a28" title=" " alt="" coords="900,239,1051,266"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722" title=" " alt="" coords="889,173,1062,215"/>
<area shape="rect" href="arm_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="655,237,827,263"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="403,237,603,263"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="880,291,1071,318"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="652,288,831,329"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="441,295,565,322"/>
</map>
</div>

</div>
</div>
<a id="a40cc55ab76a861e01174f3b73f396afc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40cc55ab76a861e01174f3b73f396afc">&#9670;&nbsp;</a></span>vgic_copy_lpi_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_copy_lpi_list </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32 **&#160;</td>
          <td class="paramname"><em>intid_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-its_8c_source.html#l00319">319</a> of file <a class="el" href="vgic-its_8c_source.html">vgic-its.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;{</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keyword">struct </span>vgic_dist *dist = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keyword">struct </span>vgic_irq *irq;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    u32 *intids;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordtype">int</span> irq_count, i = 0;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">     * There is an obvious race between allocating the array and LPIs</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">     * being mapped/unmapped. If we ended up here as a result of a</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">     * command, we&#39;re safe (locks are held, preventing another</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">     * command). If coming from another path (such as enabling LPIs),</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">     * we must be careful not to overrun the array.</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    irq_count = READ_ONCE(dist-&gt;lpi_list_count);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    intids = kmalloc_array(irq_count, <span class="keyword">sizeof</span>(intids[0]), GFP_KERNEL_ACCOUNT);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">if</span> (!intids)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    raw_spin_lock_irqsave(&amp;dist-&gt;lpi_list_lock, flags);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    list_for_each_entry(irq, &amp;dist-&gt;lpi_list_head, lpi_list) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keywordflow">if</span> (i == irq_count)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="comment">/* We don&#39;t need to &quot;get&quot; the IRQ, as we hold the list lock. */</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">if</span> (vcpu &amp;&amp; irq-&gt;target_vcpu != vcpu)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        intids[i++] = irq-&gt;intid;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    raw_spin_unlock_irqrestore(&amp;dist-&gt;lpi_list_lock, flags);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    *intid_ptr = intids;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a40cc55ab76a861e01174f3b73f396afc_icgraph.png" border="0" usemap="#avgic_8h_a40cc55ab76a861e01174f3b73f396afc_icgraph" alt=""/></div>
<map name="avgic_8h_a40cc55ab76a861e01174f3b73f396afc_icgraph" id="avgic_8h_a40cc55ab76a861e01174f3b73f396afc_icgraph">
<area shape="rect" title=" " alt="" coords="1169,97,1307,124"/>
<area shape="rect" href="vgic-debug_8c.html#a928d5408c16dd088f9efc3adc20afb2a" title=" " alt="" coords="1006,5,1078,32"/>
<area shape="rect" href="vgic-its_8c.html#aed468545774ff099d4ef46fb82e51759" title=" " alt="" coords="963,57,1121,98"/>
<area shape="rect" href="vgic-its_8c.html#a3887f6b0b2f941a1254aa6ebfe40595b" title=" " alt="" coords="963,122,1121,163"/>
<area shape="rect" href="vgic-its_8c.html#aebd2d2ca133c7abccfd64534c1258020" title=" " alt="" coords="985,188,1099,215"/>
<area shape="rect" href="vgic-debug_8c.html#a73f6f973349fab97976b13dcee0cc3ee" title=" " alt="" coords="759,5,893,32"/>
<area shape="rect" href="vgic-its_8c.html#a73bdb46182a608906704071dffe58b3d" title=" " alt="" coords="761,64,891,91"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a2f4cb3a37ad0e3cdd4cfdf827126e369" title=" " alt="" coords="497,64,687,91"/>
<area shape="rect" href="vgic-its_8c.html#aa34e3683d822366f431b02b940f35b47" title=" " alt="" coords="495,159,689,185"/>
<area shape="rect" href="vgic-its_8c.html#a884625a59420fc6638841dcfecfa789f" title=" " alt="" coords="239,159,447,185"/>
<area shape="rect" href="vgic-its_8c.html#a5a3faae3829450972ffb2d701407c8fb" title=" " alt="" coords="5,129,191,156"/>
<area shape="rect" href="vgic-its_8c.html#a9ca22518cb44ebb3e3fadd8563431a41" title=" " alt="" coords="19,181,177,222"/>
<area shape="rect" href="vgic-its_8c.html#aed7b78d235e5b86f40ecb06fb0af0889" title=" " alt="" coords="747,181,905,222"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a14d4cb37d23ef8aaa7174fcc8ed53b47" title=" " alt="" coords="737,247,915,273"/>
</map>
</div>

</div>
</div>
<a id="a09b8e6f769f95e9667a93dde826b0e1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09b8e6f769f95e9667a93dde826b0e1e">&#9670;&nbsp;</a></span>vgic_debug_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_debug_destroy </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-debug_8c_source.html#l00278">278</a> of file <a class="el" href="vgic-debug_8c_source.html">vgic-debug.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;{</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a09b8e6f769f95e9667a93dde826b0e1e_icgraph.png" border="0" usemap="#avgic_8h_a09b8e6f769f95e9667a93dde826b0e1e_icgraph" alt=""/></div>
<map name="avgic_8h_a09b8e6f769f95e9667a93dde826b0e1e_icgraph" id="avgic_8h_a09b8e6f769f95e9667a93dde826b0e1e_icgraph">
<area shape="rect" title=" " alt="" coords="1283,111,1435,137"/>
<area shape="rect" href="vgic-init_8c.html#af08e0c3b0309dbe4472ed185cd2b9e72" title=" " alt="" coords="1093,111,1235,137"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="865,81,1035,108"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="855,136,1045,163"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="453,29,580,56"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="650,81,785,108"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="212,5,405,32"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="459,84,574,111"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="234,56,383,83"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="226,107,391,133"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="231,157,386,184"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="241,208,376,235"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="5,56,164,83"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="628,133,807,174"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="455,140,579,167"/>
</map>
</div>

</div>
</div>
<a id="a42534d23071b4f3c441c5f82f9e5c1ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42534d23071b4f3c441c5f82f9e5c1ce">&#9670;&nbsp;</a></span>vgic_debug_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_debug_init </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-debug_8c_source.html#l00272">272</a> of file <a class="el" href="vgic-debug_8c_source.html">vgic-debug.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;{</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    debugfs_create_file(<span class="stringliteral">&quot;vgic-state&quot;</span>, 0444, kvm-&gt;debugfs_dentry, kvm,</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                &amp;vgic_debug_fops);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a42534d23071b4f3c441c5f82f9e5c1ce_icgraph.png" border="0" usemap="#avgic_8h_a42534d23071b4f3c441c5f82f9e5c1ce_icgraph" alt=""/></div>
<map name="avgic_8h_a42534d23071b4f3c441c5f82f9e5c1ce_icgraph" id="avgic_8h_a42534d23071b4f3c441c5f82f9e5c1ce_icgraph">
<area shape="rect" title=" " alt="" coords="2821,492,2945,519"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="2696,492,2773,519"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="2499,365,2609,392"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="2469,441,2639,468"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="2460,492,2648,519"/>
<area shape="rect" href="vgic-v2_8c.html#ac8de91a1f816dcd3b3edba1d074a1aca" title=" " alt="" coords="2465,593,2643,620"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="2241,340,2393,367"/>
<area shape="rect" href="pmu-emul_8c.html#ac79256eb94d7599687d3294cd40d10b4" title=" " alt="" coords="1086,411,1265,437"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="2004,213,2173,240"/>
<area shape="rect" href="arm_8c.html#a1cc94da0709805c40af7785f8c5811bf" title=" " alt="" coords="2004,163,2173,189"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="2020,340,2157,367"/>
<area shape="rect" href="pmu-emul_8c.html#ab0f1f020b6774de3fb4ff4c8b4e45a5c" title=" " alt="" coords="845,411,1029,437"/>
<area shape="rect" href="pmu-emul_8c.html#ae6434d5e6ad74c608886c368e56d67bc" title=" " alt="" coords="846,360,1029,387"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="611,309,797,336"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,309,129,336"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="1763,239,1947,265"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="1759,20,1951,47"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="1772,71,1939,113"/>
<area shape="rect" href="arch__timer_8c.html#a11b9b6e6338bbec6085332661c934e91" title=" " alt="" coords="1321,184,1492,211"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="1796,137,1915,164"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="1764,289,1947,316"/>
<area shape="rect" href="arch__timer_8c.html#a27c9feb35e6d7126c054c3325fea59b0" title=" " alt="" coords="1547,249,1699,276"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="1343,259,1471,285"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="1119,259,1231,285"/>
<area shape="rect" href="arch__timer_8c.html#a4bf6ac76380146820b45b06feb3eab27" title=" " alt="" coords="1540,71,1707,97"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1327,75,1486,101"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="1077,5,1273,32"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="1103,56,1248,83"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1111,157,1240,184"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="1118,107,1233,133"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="893,259,981,285"/>
<area shape="rect" href="handle__exit_8c.html#ae96aab7918301d55b908034db5855e3d" title=" " alt="" coords="870,5,1005,32"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="849,107,1025,133"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="623,99,785,125"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,157,336,184"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="857,208,1018,235"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="394,91,553,133"/>
<area shape="rect" href="arch__timer_8c.html#a0209ad4256c7a1fd5ea70b6abe030954" title=" " alt="" coords="1540,122,1707,163"/>
<area shape="rect" href="sys__regs_8c.html#a9457451d95fa776f653cff6c2a8d31f9" title=" " alt="" coords="1335,129,1478,156"/>
<area shape="rect" href="arch__timer_8c.html#a6ae73bff466fcdc60319f9726d53b571" title=" " alt="" coords="1541,305,1706,332"/>
<area shape="rect" href="vgic-irqfd_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="1755,340,1956,367"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="1769,391,1941,417"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="1547,391,1699,417"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="1329,492,1484,519"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="1085,506,1266,547"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="2252,441,2381,468"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="2252,391,2381,417"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="2251,492,2382,519"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="2221,593,2412,620"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="384,462,563,503"/>
</map>
</div>

</div>
</div>
<a id="a1cdb698c97a7e5292716c24cd5a39d28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cdb698c97a7e5292716c24cd5a39d28">&#9670;&nbsp;</a></span>vgic_dist_overlap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool vgic_dist_overlap </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpa_t&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00317">317</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;{</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keyword">struct </span>vgic_dist *d = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="early__alloc_8c.html#a74f95eab64fb23344e30879684489f6f">base</a> + <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a> &gt; d-&gt;vgic_dist_base) &amp;&amp;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        (<a class="code" href="early__alloc_8c.html#a74f95eab64fb23344e30879684489f6f">base</a> &lt; d-&gt;vgic_dist_base + KVM_VGIC_V3_DIST_SIZE);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;}</div>
<div class="ttc" id="aearly__alloc_8c_html_a74f95eab64fb23344e30879684489f6f"><div class="ttname"><a href="early__alloc_8c.html#a74f95eab64fb23344e30879684489f6f">base</a></div><div class="ttdeci">static unsigned long base</div><div class="ttdef"><b>Definition:</b> <a href="early__alloc_8c_source.html#l00015">early_alloc.c:15</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a1cdb698c97a7e5292716c24cd5a39d28_icgraph.png" border="0" usemap="#avgic_8h_a1cdb698c97a7e5292716c24cd5a39d28_icgraph" alt=""/></div>
<map name="avgic_8h_a1cdb698c97a7e5292716c24cd5a39d28_icgraph" id="avgic_8h_a1cdb698c97a7e5292716c24cd5a39d28_icgraph">
<area shape="rect" title=" " alt="" coords="1004,81,1140,108"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a78fb08dd130c0b8fc504e4725cd4f370" title=" " alt="" coords="801,74,956,115"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="572,81,753,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="403,81,524,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40" title=" " alt="" coords="184,56,355,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="184,107,355,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,56,136,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="6,107,135,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,157,135,184"/>
</map>
</div>

</div>
</div>
<a id="a73bdb46182a608906704071dffe58b3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73bdb46182a608906704071dffe58b3d">&#9670;&nbsp;</a></span>vgic_enable_lpis()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_enable_lpis </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-its_8c_source.html#l01866">1866</a> of file <a class="el" href="vgic-its_8c_source.html">vgic-its.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;{</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    <span class="keywordflow">if</span> (!(vcpu-&gt;arch.vgic_cpu.pendbaser &amp; GICR_PENDBASER_PTZ))</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        <a class="code" href="vgic-its_8c.html#aed468545774ff099d4ef46fb82e51759">its_sync_lpi_pending_table</a>(vcpu);</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;}</div>
<div class="ttc" id="avgic-its_8c_html_aed468545774ff099d4ef46fb82e51759"><div class="ttname"><a href="vgic-its_8c.html#aed468545774ff099d4ef46fb82e51759">its_sync_lpi_pending_table</a></div><div class="ttdeci">static int its_sync_lpi_pending_table(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l00434">vgic-its.c:434</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a73bdb46182a608906704071dffe58b3d_cgraph.png" border="0" usemap="#avgic_8h_a73bdb46182a608906704071dffe58b3d_cgraph" alt=""/></div>
<map name="avgic_8h_a73bdb46182a608906704071dffe58b3d_cgraph" id="avgic_8h_a73bdb46182a608906704071dffe58b3d_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,136,108"/>
<area shape="rect" href="vgic-its_8c.html#aed468545774ff099d4ef46fb82e51759" title=" " alt="" coords="184,74,341,115"/>
<area shape="rect" href="vgic-its_8c.html#a40cc55ab76a861e01174f3b73f396afc" title=" " alt="" coords="406,5,543,32"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="424,107,525,133"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="424,56,525,83"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="389,183,560,209"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="639,107,739,133"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="855,107,990,133"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="608,56,771,83"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="859,56,987,83"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="628,208,751,235"/>
<area shape="rect" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247" title=" " alt="" coords="618,259,761,285"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="819,157,1027,184"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="846,208,999,235"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="865,259,981,285"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a73bdb46182a608906704071dffe58b3d_icgraph.png" border="0" usemap="#avgic_8h_a73bdb46182a608906704071dffe58b3d_icgraph" alt=""/></div>
<map name="avgic_8h_a73bdb46182a608906704071dffe58b3d_icgraph" id="avgic_8h_a73bdb46182a608906704071dffe58b3d_icgraph">
<area shape="rect" title=" " alt="" coords="244,5,375,32"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a2f4cb3a37ad0e3cdd4cfdf827126e369" title=" " alt="" coords="5,5,196,32"/>
</map>
</div>

</div>
</div>
<a id="a573eb768a56ea0b73e234771e0013ffc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a573eb768a56ea0b73e234771e0013ffc">&#9670;&nbsp;</a></span>vgic_flush_pending_lpis()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_flush_pending_lpis </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8c_source.html#l00152">152</a> of file <a class="el" href="vgic_8c_source.html">vgic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keyword">struct </span>vgic_cpu *vgic_cpu = &amp;vcpu-&gt;arch.vgic_cpu;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keyword">struct </span>vgic_irq *irq, *tmp;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    raw_spin_lock_irqsave(&amp;vgic_cpu-&gt;ap_list_lock, flags);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    list_for_each_entry_safe(irq, tmp, &amp;vgic_cpu-&gt;ap_list_head, ap_list) {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">if</span> (irq-&gt;intid &gt;= VGIC_MIN_LPI) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            raw_spin_lock(&amp;irq-&gt;irq_lock);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            list_del(&amp;irq-&gt;ap_list);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            irq-&gt;vcpu = NULL;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            raw_spin_unlock(&amp;irq-&gt;irq_lock);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <a class="code" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5">vgic_put_irq</a>(vcpu-&gt;kvm, irq);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    raw_spin_unlock_irqrestore(&amp;vgic_cpu-&gt;ap_list_lock, flags);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div>
<div class="ttc" id="avgic_8c_html_ac055f2fa0d463d3d287ee975bb80a9c5"><div class="ttname"><a href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5">vgic_put_irq</a></div><div class="ttdeci">void vgic_put_irq(struct kvm *kvm, struct vgic_irq *irq)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8c_source.html#l00139">vgic.c:139</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a573eb768a56ea0b73e234771e0013ffc_cgraph.png" border="0" usemap="#avgic_8h_a573eb768a56ea0b73e234771e0013ffc_cgraph" alt=""/></div>
<map name="avgic_8h_a573eb768a56ea0b73e234771e0013ffc_cgraph" id="avgic_8h_a573eb768a56ea0b73e234771e0013ffc_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,181,32"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="229,5,331,32"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="379,5,541,32"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="589,5,717,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a573eb768a56ea0b73e234771e0013ffc_icgraph.png" border="0" usemap="#avgic_8h_a573eb768a56ea0b73e234771e0013ffc_icgraph" alt=""/></div>
<map name="avgic_8h_a573eb768a56ea0b73e234771e0013ffc_icgraph" id="avgic_8h_a573eb768a56ea0b73e234771e0013ffc_icgraph">
<area shape="rect" title=" " alt="" coords="2184,109,2360,136"/>
<area shape="rect" href="vgic-init_8c.html#a1002af084b5fbafca1dab97541383180" title=" " alt="" coords="1943,84,2136,111"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a2f4cb3a37ad0e3cdd4cfdf827126e369" title=" " alt="" coords="1944,135,2135,161"/>
<area shape="rect" href="vgic-init_8c.html#af08e0c3b0309dbe4472ed185cd2b9e72" title=" " alt="" coords="1735,56,1876,83"/>
<area shape="rect" href="vgic-init_8c.html#a05d84155ac79f812932547367b4445e4" title=" " alt="" coords="1716,111,1895,137"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="811,56,981,83"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="1477,56,1668,83"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="453,19,580,45"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="628,81,763,108"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="212,5,405,32"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="459,81,574,108"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="234,56,383,83"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="226,107,391,133"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="231,157,386,184"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="241,208,376,235"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="5,56,164,83"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="1240,49,1419,90"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="1043,56,1167,83"/>
<area shape="rect" href="arm_8c.html#a25d188e4f0871968b9f428c79720a502" title=" " alt="" coords="1483,115,1663,141"/>
<area shape="rect" href="kvm__main_8c.html#a7218df747387e4034ab8442f187306b1" title=" " alt="" coords="1257,115,1402,141"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="1229,165,1429,192"/>
<area shape="rect" href="kvm__main_8c.html#a0fcd9f7671bee7debec1bc05dcd9557b" title=" " alt="" coords="1029,111,1181,137"/>
</map>
</div>

</div>
</div>
<a id="ad2152e71d96ef44532516eb9fb65da36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2152e71d96ef44532516eb9fb65da36">&#9670;&nbsp;</a></span>vgic_get_implementation_rev()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u32 vgic_get_implementation_rev </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00102">102</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;{</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">return</span> vcpu-&gt;kvm-&gt;arch.vgic.implementation_rev;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ad2152e71d96ef44532516eb9fb65da36_icgraph.png" border="0" usemap="#avgic_8h_ad2152e71d96ef44532516eb9fb65da36_icgraph" alt=""/></div>
<map name="avgic_8h_ad2152e71d96ef44532516eb9fb65da36_icgraph" id="avgic_8h_ad2152e71d96ef44532516eb9fb65da36_icgraph">
<area shape="rect" title=" " alt="" coords="240,5,456,32"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a60ae745f526cf7471d9889bdcf5ed226" title=" " alt="" coords="5,5,192,32"/>
</map>
</div>

</div>
</div>
<a id="a7f38a266ef3def3202e7e04aa40fd516"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f38a266ef3def3202e7e04aa40fd516">&#9670;&nbsp;</a></span>vgic_get_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct vgic_irq* vgic_get_irq </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>intid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8c_source.html#l00092">92</a> of file <a class="el" href="vgic_8c_source.html">vgic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;{</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">/* SGIs and PPIs */</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (intid &lt;= VGIC_MAX_PRIVATE) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        intid = array_index_nospec(intid, VGIC_MAX_PRIVATE + 1);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">return</span> &amp;vcpu-&gt;arch.vgic_cpu.private_irqs[intid];</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">/* SPIs */</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">if</span> (intid &lt; (kvm-&gt;arch.vgic.nr_spis + VGIC_NR_PRIVATE_IRQS)) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        intid = array_index_nospec(intid, kvm-&gt;arch.vgic.nr_spis + VGIC_NR_PRIVATE_IRQS);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">return</span> &amp;kvm-&gt;arch.vgic.spis[intid - VGIC_NR_PRIVATE_IRQS];</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">/* LPIs */</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span> (intid &gt;= VGIC_MIN_LPI)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617">vgic_get_lpi</a>(kvm, intid);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div>
<div class="ttc" id="avgic_8c_html_afeaf79de85450ed5fb52dbd7bd8c6617"><div class="ttname"><a href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617">vgic_get_lpi</a></div><div class="ttdeci">static struct vgic_irq * vgic_get_lpi(struct kvm *kvm, u32 intid)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8c_source.html#l00060">vgic.c:60</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a7f38a266ef3def3202e7e04aa40fd516_cgraph.png" border="0" usemap="#avgic_8h_a7f38a266ef3def3202e7e04aa40fd516_cgraph" alt=""/></div>
<map name="avgic_8h_a7f38a266ef3def3202e7e04aa40fd516_cgraph" id="avgic_8h_a7f38a266ef3def3202e7e04aa40fd516_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,107,32"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="155,5,255,32"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="303,5,437,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a7f38a266ef3def3202e7e04aa40fd516_icgraph.png" border="0" usemap="#avgic_8h_a7f38a266ef3def3202e7e04aa40fd516_icgraph" alt=""/></div>
<map name="avgic_8h_a7f38a266ef3def3202e7e04aa40fd516_icgraph" id="avgic_8h_a7f38a266ef3def3202e7e04aa40fd516_icgraph">
<area shape="rect" title=" " alt="" coords="513,1219,615,1245"/>
<area shape="rect" href="vgic-mmio_8c.html#ac9d250a7a5f4eae6374bd57711e4aa5a" title=" " alt="" coords="297,64,424,91"/>
<area shape="rect" href="vgic-mmio_8c.html#acb8571139852386510e89bd6a9fbf9e6" title=" " alt="" coords="299,148,423,175"/>
<area shape="rect" href="vgic-mmio_8c.html#abbf6cc4053faa7c09c5b99c71a6aaa2a" title=" " alt="" coords="303,199,418,225"/>
<area shape="rect" href="vgic-mmio_8c.html#a25ebace3c89c7b1d2c8cc6e4b41ac351" title=" " alt="" coords="265,249,456,276"/>
<area shape="rect" href="vgic-mmio_8c.html#a4552ff194be4788b6c2d944a201903fc" title=" " alt="" coords="259,300,462,327"/>
<area shape="rect" href="vgic-mmio_8c.html#a512b4b38220c4a8e593935c74ce036c5" title=" " alt="" coords="259,351,462,377"/>
<area shape="rect" href="vgic-its_8c.html#aed468545774ff099d4ef46fb82e51759" title=" " alt="" coords="282,402,439,443"/>
<area shape="rect" href="vgic_8c.html#a0a11de94338771a6d53dd409d4f4c49d" title=" " alt="" coords="286,468,435,495"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="285,519,437,545"/>
<area shape="rect" href="vgic_8c.html#a1273f536f3d378a0b259e76591471f7b" title=" " alt="" coords="267,569,454,596"/>
<area shape="rect" href="vgic_8c.html#ab4243e0ac375259b39c04a6cc6266a9f" title=" " alt="" coords="269,620,452,647"/>
<area shape="rect" href="vgic_8c.html#a37d0e0f4c579bc38afe8d5f91529a772" title=" " alt="" coords="256,671,465,697"/>
<area shape="rect" href="vgic_8c.html#a99527df04c2db316d7f8c1733c18d99e" title=" " alt="" coords="281,721,440,748"/>
<area shape="rect" href="vgic_8c.html#a4199ace0bb639bc69d06a2ce1ee0d1ff" title=" " alt="" coords="261,772,460,799"/>
<area shape="rect" href="vgic-debug_8c.html#a867b28db5803a6daa9723fb112d70deb" title=" " alt="" coords="292,823,429,849"/>
<area shape="rect" href="vgic-its_8c.html#a3887f6b0b2f941a1254aa6ebfe40595b" title=" " alt="" coords="281,874,440,915"/>
<area shape="rect" href="vgic-its_8c.html#aebd2d2ca133c7abccfd64534c1258020" title=" " alt="" coords="303,940,418,967"/>
<area shape="rect" href="vgic-mmio_8c.html#a7fac20eacde0df9000d09b67f9300c16" title=" " alt="" coords="273,991,449,1017"/>
<area shape="rect" href="vgic-mmio_8c.html#ac251d3bc75b5bd5550798715b3f0cf21" title=" " alt="" coords="270,1041,451,1068"/>
<area shape="rect" href="vgic-mmio_8c.html#a76a5cf658fa6075b5aa8de86d9ce4188" title=" " alt="" coords="273,1092,448,1119"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab639844a1b212efe7c1c662fd3b686b6" title=" " alt="" coords="271,1143,451,1169"/>
<area shape="rect" href="vgic-mmio_8c.html#a93fcd4f3757f88fb702332e5abd1d494" title=" " alt="" coords="269,1193,453,1220"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a8004c1add09524cf4aa88e910297dac7" title=" " alt="" coords="267,1244,455,1271"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#aef074302387e8dd60db49de00d523310" title=" " alt="" coords="273,1295,449,1321"/>
<area shape="rect" href="vgic-mmio_8c.html#a2ca5852d154989bbe7d03d88a60b33bd" title=" " alt="" coords="265,1345,457,1372"/>
<area shape="rect" href="vgic-mmio_8c.html#abe0c52fb86ae2728c808545ce2955101" title=" " alt="" coords="271,1396,451,1423"/>
<area shape="rect" href="vgic-mmio_8c.html#a59b486242da411e911332ba64728824d" title=" " alt="" coords="271,1447,450,1473"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#aa268002fc305866e42157249254372cb" title=" " alt="" coords="272,1497,449,1524"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a8207263120fdd08350fa48f0aee44351" title=" " alt="" coords="269,1548,453,1575"/>
<area shape="rect" href="vgic-mmio_8c.html#a654979b0910066eac66257c945040ac1" title=" " alt="" coords="267,1599,455,1625"/>
<area shape="rect" href="vgic-mmio_8c.html#a0c1f43ac9c640684281b61fd45b48a67" title=" " alt="" coords="265,1649,457,1676"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a5dbc7437d7a969cd08af33810777e861" title=" " alt="" coords="261,1700,460,1727"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a2c419211f7bf28a70acb6817236bb232" title=" " alt="" coords="261,1751,460,1777"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a5fbdffc6aa7bf13d7805dd8bd60842ca" title=" " alt="" coords="278,1801,443,1828"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#aee92fc893171f9f1de7b535b0abb93e1" title=" " alt="" coords="271,1852,451,1879"/>
<area shape="rect" href="vgic-mmio_8c.html#a74de2333a13c0e99b703d65cab9666b3" title=" " alt="" coords="291,1903,431,1945"/>
<area shape="rect" href="vgic-mmio_8c.html#ac4ad4fdde71aa1d4d8f6e36b4be6921b" title=" " alt="" coords="287,1969,435,2010"/>
<area shape="rect" href="vgic-mmio_8c.html#ad0d52d06620d3bd5c446a09ae6ddeac0" title=" " alt="" coords="287,2034,435,2075"/>
<area shape="rect" href="vgic-v2_8c.html#a7627ef75f37a19085dece7f4d26ad898" title=" " alt="" coords="281,2100,441,2127"/>
<area shape="rect" href="vgic-v3_8c.html#a3d53ba6e7f70704effc37ea2c4b0c04b" title=" " alt="" coords="281,2151,441,2177"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a5039defeee267f93839f5359d7534ff7" title=" " alt="" coords="288,2201,433,2228"/>
<area shape="rect" href="vgic-v4_8c.html#a84caa8431645d33bab1cc210aeb17801" title=" " alt="" coords="277,2252,444,2279"/>
<area shape="rect" href="vgic-v4_8c.html#aaa920282fd67f50873ceb0030afafc6a" title=" " alt="" coords="279,2303,443,2329"/>
<area shape="rect" href="vgic-mmio_8c.html#a28964cd75c2483a30f9743d35507bbce" title=" " alt="" coords="289,2354,433,2395"/>
<area shape="rect" href="vgic-mmio_8c.html#a2c19040c027236361c68623a437dd5f2" title=" " alt="" coords="7,5,207,32"/>
<area shape="rect" href="vgic-mmio_8c.html#a86ae5b1e120327acb1e064fc9f983534" title=" " alt="" coords="33,57,181,98"/>
<area shape="rect" href="vgic-mmio_8c.html#a6235e1f8f727a8a7ba0faf6ed401b04e" title=" " alt="" coords="12,123,201,149"/>
<area shape="rect" href="vgic-mmio_8c.html#a39de6f448012602b72fcc09860d1a0a3" title=" " alt="" coords="5,173,208,200"/>
<area shape="rect" href="vgic-mmio_8c.html#a5a75938ee02f87306de4cc6200b830db" title=" " alt="" coords="7,224,207,251"/>
</map>
</div>

</div>
</div>
<a id="a43d39599f0fd2d973c5af8d6045e0f91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43d39599f0fd2d973c5af8d6045e0f91">&#9670;&nbsp;</a></span>vgic_get_irq_kref()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void vgic_get_irq_kref </td>
          <td>(</td>
          <td class="paramtype">struct vgic_irq *&#160;</td>
          <td class="paramname"><em>irq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00223">223</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;{</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">if</span> (irq-&gt;intid &lt; VGIC_MIN_LPI)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    kref_get(&amp;irq-&gt;refcount);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a43d39599f0fd2d973c5af8d6045e0f91_icgraph.png" border="0" usemap="#avgic_8h_a43d39599f0fd2d973c5af8d6045e0f91_icgraph" alt=""/></div>
<map name="avgic_8h_a43d39599f0fd2d973c5af8d6045e0f91_icgraph" id="avgic_8h_a43d39599f0fd2d973c5af8d6045e0f91_icgraph">
<area shape="rect" title=" " alt="" coords="977,351,1112,377"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="782,823,882,849"/>
<area shape="rect" href="vgic-its_8c.html#ad9756268e1c22946f868e3255f916aa6" title=" " alt="" coords="735,91,929,117"/>
<area shape="rect" href="vgic-its_8c.html#ab8e3bef933af0cc51b05259d801be26d" title=" " alt="" coords="751,205,913,232"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="516,407,687,433"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="551,1275,652,1301"/>
<area shape="rect" href="vgic-mmio_8c.html#ac9d250a7a5f4eae6374bd57711e4aa5a" title=" " alt="" coords="299,2025,425,2052"/>
<area shape="rect" href="vgic-mmio_8c.html#acb8571139852386510e89bd6a9fbf9e6" title=" " alt="" coords="300,2076,424,2103"/>
<area shape="rect" href="vgic-mmio_8c.html#abbf6cc4053faa7c09c5b99c71a6aaa2a" title=" " alt="" coords="305,407,419,433"/>
<area shape="rect" href="vgic-mmio_8c.html#a25ebace3c89c7b1d2c8cc6e4b41ac351" title=" " alt="" coords="267,945,457,972"/>
<area shape="rect" href="vgic-mmio_8c.html#a4552ff194be4788b6c2d944a201903fc" title=" " alt="" coords="5,567,208,593"/>
<area shape="rect" href="vgic-mmio_8c.html#a512b4b38220c4a8e593935c74ce036c5" title=" " alt="" coords="5,1097,208,1124"/>
<area shape="rect" href="vgic-its_8c.html#aed468545774ff099d4ef46fb82e51759" title=" " alt="" coords="283,458,441,499"/>
<area shape="rect" href="vgic_8c.html#a0a11de94338771a6d53dd409d4f4c49d" title=" " alt="" coords="287,996,437,1023"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="286,524,438,551"/>
<area shape="rect" href="vgic_8c.html#a1273f536f3d378a0b259e76591471f7b" title=" " alt="" coords="269,1047,455,1073"/>
<area shape="rect" href="vgic_8c.html#ab4243e0ac375259b39c04a6cc6266a9f" title=" " alt="" coords="271,1097,453,1124"/>
<area shape="rect" href="vgic_8c.html#a37d0e0f4c579bc38afe8d5f91529a772" title=" " alt="" coords="257,1148,467,1175"/>
<area shape="rect" href="vgic_8c.html#a99527df04c2db316d7f8c1733c18d99e" title=" " alt="" coords="283,1199,441,1225"/>
<area shape="rect" href="vgic_8c.html#a4199ace0bb639bc69d06a2ce1ee0d1ff" title=" " alt="" coords="263,1300,461,1327"/>
<area shape="rect" href="vgic-debug_8c.html#a867b28db5803a6daa9723fb112d70deb" title=" " alt="" coords="293,1351,431,1377"/>
<area shape="rect" href="vgic-its_8c.html#a3887f6b0b2f941a1254aa6ebfe40595b" title=" " alt="" coords="283,1402,441,1443"/>
<area shape="rect" href="vgic-its_8c.html#aebd2d2ca133c7abccfd64534c1258020" title=" " alt="" coords="49,1612,164,1639"/>
<area shape="rect" href="vgic-mmio_8c.html#a7fac20eacde0df9000d09b67f9300c16" title=" " alt="" coords="274,1468,450,1495"/>
<area shape="rect" href="vgic-mmio_8c.html#ac251d3bc75b5bd5550798715b3f0cf21" title=" " alt="" coords="271,1519,453,1545"/>
<area shape="rect" href="vgic-mmio_8c.html#a76a5cf658fa6075b5aa8de86d9ce4188" title=" " alt="" coords="275,1569,449,1596"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab639844a1b212efe7c1c662fd3b686b6" title=" " alt="" coords="272,1620,452,1647"/>
<area shape="rect" href="vgic-mmio_8c.html#a93fcd4f3757f88fb702332e5abd1d494" title=" " alt="" coords="270,1671,454,1697"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a8004c1add09524cf4aa88e910297dac7" title=" " alt="" coords="268,1721,456,1748"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#aef074302387e8dd60db49de00d523310" title=" " alt="" coords="274,1772,450,1799"/>
<area shape="rect" href="vgic-mmio_8c.html#a2ca5852d154989bbe7d03d88a60b33bd" title=" " alt="" coords="266,1823,458,1849"/>
<area shape="rect" href="vgic-mmio_8c.html#abe0c52fb86ae2728c808545ce2955101" title=" " alt="" coords="272,1873,452,1900"/>
<area shape="rect" href="vgic-mmio_8c.html#a59b486242da411e911332ba64728824d" title=" " alt="" coords="273,575,451,601"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#aa268002fc305866e42157249254372cb" title=" " alt="" coords="273,1924,451,1951"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a8207263120fdd08350fa48f0aee44351" title=" " alt="" coords="270,1975,454,2001"/>
<area shape="rect" href="vgic-mmio_8c.html#a654979b0910066eac66257c945040ac1" title=" " alt="" coords="268,2127,456,2153"/>
<area shape="rect" href="vgic-mmio_8c.html#a0c1f43ac9c640684281b61fd45b48a67" title=" " alt="" coords="266,625,458,652"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a5dbc7437d7a969cd08af33810777e861" title=" " alt="" coords="263,2177,461,2204"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a2c419211f7bf28a70acb6817236bb232" title=" " alt="" coords="263,676,461,703"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a5fbdffc6aa7bf13d7805dd8bd60842ca" title=" " alt="" coords="279,727,445,753"/>
<area shape="rect" href="vgic-mmio_8c.html#ad0d52d06620d3bd5c446a09ae6ddeac0" title=" " alt="" coords="288,778,436,819"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a5039defeee267f93839f5359d7534ff7" title=" " alt="" coords="289,844,435,871"/>
<area shape="rect" href="vgic-mmio_8c.html#a28964cd75c2483a30f9743d35507bbce" title=" " alt="" coords="290,341,434,382"/>
<area shape="rect" href="vgic-its_8c.html#a3fe23d687675cef46a95e36cf14d04e1" title=" " alt="" coords="526,56,677,83"/>
<area shape="rect" href="vgic-v4_8c.html#a48b85c50461cf6bb5b295c722f7e08f1" title=" " alt="" coords="256,5,468,32"/>
<area shape="rect" href="vgic-its_8c.html#ad62375be0591178764e98b79cd7217bf" title=" " alt="" coords="285,56,439,83"/>
<area shape="rect" href="vgic-its_8c.html#a352c8627ccf81a8154ae2275c7d50659" title=" " alt="" coords="278,107,446,149"/>
<area shape="rect" href="vgic-its_8c.html#a423c5139315e14ce4ec9f66ae4abb88c" title=" " alt="" coords="294,289,430,316"/>
<area shape="rect" href="vgic-mmio_8c.html#ae0e687d9272d9f9e52e4356c2732b289" title=" " alt="" coords="265,239,459,265"/>
<area shape="rect" href="vgic-v3_8c.html#ac8f115520573cc0407f90177aeccfed9" title=" " alt="" coords="267,173,457,214"/>
</map>
</div>

</div>
</div>
<a id="af645443cfc0bc59f41881570759adcb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af645443cfc0bc59f41881570759adcb5">&#9670;&nbsp;</a></span>vgic_get_mmio_region()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="structvgic__register__region.html">vgic_register_region</a>* vgic_get_mmio_region </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct vgic_io_device *&#160;</td>
          <td class="paramname"><em>iodev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpa_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-mmio_8c_source.html#l00950">950</a> of file <a class="el" href="vgic-mmio_8c_source.html">vgic-mmio.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;{</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structvgic__register__region.html">vgic_register_region</a> *region;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    region = <a class="code" href="vgic-mmio_8c.html#a340c255c8c139816f1ce975f0bd15c64">vgic_find_mmio_region</a>(iodev-&gt;regions, iodev-&gt;nr_regions,</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                       addr - iodev-&gt;base_addr);</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keywordflow">if</span> (!region || !<a class="code" href="vgic-mmio_8c.html#a296fe3adbc190bcdb6fde5c708193b03">check_region</a>(vcpu-&gt;kvm, region, addr, <a class="code" href="structvgic__register__region.html#a0e994a6218be0ba787c29cfa4477be1d">len</a>))</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="keywordflow">return</span> region;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;}</div>
<div class="ttc" id="astructvgic__register__region_html"><div class="ttname"><a href="structvgic__register__region.html">vgic_register_region</a></div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio_8h_source.html#l00008">vgic-mmio.h:8</a></div></div>
<div class="ttc" id="astructvgic__register__region_html_a0e994a6218be0ba787c29cfa4477be1d"><div class="ttname"><a href="structvgic__register__region.html#a0e994a6218be0ba787c29cfa4477be1d">vgic_register_region::len</a></div><div class="ttdeci">unsigned int len</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio_8h_source.html#l00010">vgic-mmio.h:10</a></div></div>
<div class="ttc" id="avgic-mmio_8c_html_a296fe3adbc190bcdb6fde5c708193b03"><div class="ttname"><a href="vgic-mmio_8c.html#a296fe3adbc190bcdb6fde5c708193b03">check_region</a></div><div class="ttdeci">static bool check_region(const struct kvm *kvm, const struct vgic_register_region *region, gpa_t addr, int len)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio_8c_source.html#l00918">vgic-mmio.c:918</a></div></div>
<div class="ttc" id="avgic-mmio_8c_html_a340c255c8c139816f1ce975f0bd15c64"><div class="ttname"><a href="vgic-mmio_8c.html#a340c255c8c139816f1ce975f0bd15c64">vgic_find_mmio_region</a></div><div class="ttdeci">const struct vgic_register_region * vgic_find_mmio_region(const struct vgic_register_region *regions, int nr_regions, unsigned int offset)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio_8c_source.html#l00836">vgic-mmio.c:836</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_af645443cfc0bc59f41881570759adcb5_cgraph.png" border="0" usemap="#avgic_8h_af645443cfc0bc59f41881570759adcb5_cgraph" alt=""/></div>
<map name="avgic_8h_af645443cfc0bc59f41881570759adcb5_cgraph" id="avgic_8h_af645443cfc0bc59f41881570759adcb5_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,176,57"/>
<area shape="rect" href="vgic-mmio_8c.html#a296fe3adbc190bcdb6fde5c708193b03" title=" " alt="" coords="257,5,365,32"/>
<area shape="rect" href="vgic-mmio_8c.html#a340c255c8c139816f1ce975f0bd15c64" title=" " alt="" coords="224,56,397,83"/>
<area shape="rect" href="vgic-mmio_8c.html#abed6aa21152b65b854d1f9513c4ce647" title=" " alt="" coords="445,56,556,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_af645443cfc0bc59f41881570759adcb5_icgraph.png" border="0" usemap="#avgic_8h_af645443cfc0bc59f41881570759adcb5_icgraph" alt=""/></div>
<map name="avgic_8h_af645443cfc0bc59f41881570759adcb5_icgraph" id="avgic_8h_af645443cfc0bc59f41881570759adcb5_icgraph">
<area shape="rect" title=" " alt="" coords="1013,132,1184,159"/>
<area shape="rect" href="vgic-mmio_8c.html#a9128386eb23453575b0440e422fbb3b9" title=" " alt="" coords="803,5,961,32"/>
<area shape="rect" href="vgic-mmio_8c.html#aad237383d386ad4e61622daa6efed581" title=" " alt="" coords="801,56,963,83"/>
<area shape="rect" href="vgic-mmio_8c.html#ac361bf23479dea11a94946fb36408b29" title=" " alt="" coords="810,107,954,133"/>
<area shape="rect" href="vgic-mmio_8c.html#a9ae5f9a11d1a32e0fddb9409399b1d4a" title=" " alt="" coords="808,157,956,184"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a34fc7617393fc3b19fd3ff9220da2cbb" title=" " alt="" coords="799,208,965,235"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab7ab2fb9c9721de227541e7cc6da7e3e" title=" " alt="" coords="799,259,965,285"/>
<area shape="rect" href="vgic-mmio_8c.html#ae999933ae5e2cc6f0d3910bbe33386ba" title=" " alt="" coords="643,132,751,159"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a47e01844cf58952fedaee31f59b759cc" title=" " alt="" coords="422,56,593,83"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a172aa5542cf86982d7d2fc0c9948fa26" title=" " alt="" coords="426,107,589,133"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a744d3ea323c85b7c3528ccc1a3fd6180" title=" " alt="" coords="426,157,589,184"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a6f0acf3ee53ee539acba5f1bce55cea2" title=" " alt="" coords="420,208,595,235"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="184,85,372,112"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,41,136,68"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="6,92,135,119"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a176e49a1162579b332c8a68ab035e981" title=" " alt="" coords="184,180,372,207"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,155,136,181"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,205,135,232"/>
</map>
</div>

</div>
</div>
<a id="a44a31fe53851677c742d5b2a340e2f56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44a31fe53851677c742d5b2a340e2f56">&#9670;&nbsp;</a></span>vgic_get_phys_line_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vgic_get_phys_line_level </td>
          <td>(</td>
          <td class="paramtype">struct vgic_irq *&#160;</td>
          <td class="paramname"><em>irq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8c_source.html#l00180">180</a> of file <a class="el" href="vgic_8c_source.html">vgic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordtype">bool</span> line_level;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    BUG_ON(!irq-&gt;hw);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">if</span> (irq-&gt;ops &amp;&amp; irq-&gt;ops-&gt;get_input_level)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="keywordflow">return</span> irq-&gt;ops-&gt;get_input_level(irq-&gt;intid);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    WARN_ON(irq_get_irqchip_state(irq-&gt;host_irq,</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                      IRQCHIP_STATE_PENDING,</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                      &amp;line_level));</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">return</span> line_level;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a44a31fe53851677c742d5b2a340e2f56_icgraph.png" border="0" usemap="#avgic_8h_a44a31fe53851677c742d5b2a340e2f56_icgraph" alt=""/></div>
<map name="avgic_8h_a44a31fe53851677c742d5b2a340e2f56_icgraph" id="avgic_8h_a44a31fe53851677c742d5b2a340e2f56_icgraph">
<area shape="rect" title=" " alt="" coords="1329,99,1476,141"/>
<area shape="rect" href="vgic-mmio_8c.html#acb8571139852386510e89bd6a9fbf9e6" title=" " alt="" coords="1117,56,1241,83"/>
<area shape="rect" href="vgic_8c.html#a19d27bba8dd17f9ae9c8284444df030b" title=" " alt="" coords="1077,107,1281,133"/>
<area shape="rect" href="vgic-mmio_8c.html#a0c1f43ac9c640684281b61fd45b48a67" title=" " alt="" coords="1083,157,1275,184"/>
<area shape="rect" href="vgic-mmio_8c.html#a6235e1f8f727a8a7ba0faf6ed401b04e" title=" " alt="" coords="833,5,1023,32"/>
<area shape="rect" href="vgic-mmio_8c.html#a39de6f448012602b72fcc09860d1a0a3" title=" " alt="" coords="827,56,1029,83"/>
<area shape="rect" href="vgic-v2_8c.html#a7627ef75f37a19085dece7f4d26ad898" title=" " alt="" coords="848,107,1008,133"/>
<area shape="rect" href="vgic-v3_8c.html#a3d53ba6e7f70704effc37ea2c4b0c04b" title=" " alt="" coords="848,157,1008,184"/>
<area shape="rect" href="vgic_8c.html#ad42413b2202ba95d0b76067b240b9c52" title=" " alt="" coords="641,132,779,159"/>
<area shape="rect" href="vgic_8c.html#a76c600af416fb73e40611d80115edc03" title=" " alt="" coords="412,132,593,159"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,132,364,159"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,132,129,159"/>
</map>
</div>

</div>
</div>
<a id="ad275c2ef6d5f7f0d79f101a7dd6dda3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad275c2ef6d5f7f0d79f101a7dd6dda3a">&#9670;&nbsp;</a></span>vgic_get_vmcr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_get_vmcr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structvgic__vmcr.html">vgic_vmcr</a> *&#160;</td>
          <td class="paramname"><em>vmcr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-mmio_8c_source.html#l00851">851</a> of file <a class="el" href="vgic-mmio_8c_source.html">vgic-mmio.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;{</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="keywordflow">if</span> (kvm_vgic_global_state.type == VGIC_V2)</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <a class="code" href="vgic-v2_8c.html#aa825011d5b7d02e6b8f6c21746a5af39">vgic_v2_get_vmcr</a>(vcpu, vmcr);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <a class="code" href="vgic-v3_8c.html#a20f69ea757569fa58158ed4f097c1987">vgic_v3_get_vmcr</a>(vcpu, vmcr);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;}</div>
<div class="ttc" id="avgic-v2_8c_html_aa825011d5b7d02e6b8f6c21746a5af39"><div class="ttname"><a href="vgic-v2_8c.html#aa825011d5b7d02e6b8f6c21746a5af39">vgic_v2_get_vmcr</a></div><div class="ttdeci">void vgic_v2_get_vmcr(struct kvm_vcpu *vcpu, struct vgic_vmcr *vmcrp)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v2_8c_source.html#l00232">vgic-v2.c:232</a></div></div>
<div class="ttc" id="avgic-v3_8c_html_a20f69ea757569fa58158ed4f097c1987"><div class="ttname"><a href="vgic-v3_8c.html#a20f69ea757569fa58158ed4f097c1987">vgic_v3_get_vmcr</a></div><div class="ttdeci">void vgic_v3_get_vmcr(struct kvm_vcpu *vcpu, struct vgic_vmcr *vmcrp)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00224">vgic-v3.c:224</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ad275c2ef6d5f7f0d79f101a7dd6dda3a_cgraph.png" border="0" usemap="#avgic_8h_ad275c2ef6d5f7f0d79f101a7dd6dda3a_cgraph" alt=""/></div>
<map name="avgic_8h_ad275c2ef6d5f7f0d79f101a7dd6dda3a_cgraph" id="avgic_8h_ad275c2ef6d5f7f0d79f101a7dd6dda3a_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,123,57"/>
<area shape="rect" href="vgic-v2_8c.html#aa825011d5b7d02e6b8f6c21746a5af39" title=" " alt="" coords="171,5,311,32"/>
<area shape="rect" href="vgic-v3_8c.html#a20f69ea757569fa58158ed4f097c1987" title=" " alt="" coords="171,56,311,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ad275c2ef6d5f7f0d79f101a7dd6dda3a_icgraph.png" border="0" usemap="#avgic_8h_ad275c2ef6d5f7f0d79f101a7dd6dda3a_icgraph" alt=""/></div>
<map name="avgic_8h_ad275c2ef6d5f7f0d79f101a7dd6dda3a_icgraph" id="avgic_8h_ad275c2ef6d5f7f0d79f101a7dd6dda3a_icgraph">
<area shape="rect" title=" " alt="" coords="2572,360,2689,387"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a66220e48f014a2eb167e50df6bc556b9" title=" " alt="" coords="2368,5,2473,32"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#add00c3e7b785796c7d79e285113a13a5" title=" " alt="" coords="2368,56,2473,83"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a008ada66aee21124d80a1d2816ab6cf8" title=" " alt="" coords="2372,107,2469,133"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#abbf917fe24a7fcb7aa2f06fec6016b45" title=" " alt="" coords="2360,157,2481,184"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a1168d377372fe83d0bc82d0f1e70a469" title=" " alt="" coords="2360,208,2481,235"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#aea894bbbe8c470fc8721c81922b98254" title=" " alt="" coords="2369,259,2472,285"/>
<area shape="rect" href="vgic_8c.html#a3059bfcee1ad30f581150d06c07d68e8" title=" " alt="" coords="2317,309,2524,336"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a9a6ff5961084331631a38b15ad56ee3a" title=" " alt="" coords="2369,360,2473,387"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a98e7ca9700748f32119b3df93fb9702a" title=" " alt="" coords="2369,411,2473,437"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a5df87a6d208537d7e190b738b53a7244" title=" " alt="" coords="2373,461,2469,488"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a462776a9a850970c8e333d150e70041f" title=" " alt="" coords="2361,512,2481,539"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#aa54404fe059ee8c201ece8989b41557a" title=" " alt="" coords="2361,563,2481,589"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#ab7ad03ed75b3e3b3388d5aa051fb3b0c" title=" " alt="" coords="2370,613,2471,640"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#acd71668215fc870cc3e736482a827145" title=" " alt="" coords="2332,664,2509,691"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a2f747e0249d94969dc9bb31ca7e39fa2" title=" " alt="" coords="2330,715,2511,741"/>
<area shape="rect" href="arm_8c.html#ac412fb0d81a53e66d8ac4146e4202f92" title=" " alt="" coords="2081,268,2269,295"/>
<area shape="rect" href="vgic_8c.html#afd47a938061d223b085c0ca0bed6aa71" title=" " alt="" coords="2111,352,2239,379"/>
<area shape="rect" href="kvm__main_8c.html#aac20f0d987f71a47c6701c7e93a0e261" title=" " alt="" coords="1849,167,2023,193"/>
<area shape="rect" href="kvm__main_8c.html#a3de4d6991bdd1a714e8afa6a55136cdd" title=" " alt="" coords="1848,243,2024,269"/>
<area shape="rect" href="arm_8c.html#ad33fe3df0e24d8ff8cb0a7f4657ec3fa" title=" " alt="" coords="1019,268,1169,295"/>
<area shape="rect" href="kvm__main_8c.html#a06ed191cebec13ce2c4a7d15fdeb5a60" title=" " alt="" coords="1624,141,1764,168"/>
<area shape="rect" href="kvm__main_8c.html#a7373edb7b1c787b14e657cd691e64d20" title=" " alt="" coords="1233,148,1380,175"/>
<area shape="rect" href="handle__exit_8c.html#a0b391fc62c2250ecc0bfcdbe1b0a6788" title=" " alt="" coords="1027,149,1161,176"/>
<area shape="rect" href="kvm__main_8c.html#a8e18df0287ddedfd516454aeeb669807" title=" " alt="" coords="1629,192,1759,219"/>
<area shape="rect" href="kvm__main_8c.html#a7256a8615584a9ae83a46c071f6aa0e9" title=" " alt="" coords="1428,203,1549,229"/>
<area shape="rect" href="arm_8c.html#a68df8c6f1b7134e9f23857f092d50056" title=" " alt="" coords="1249,203,1364,229"/>
<area shape="rect" href="psci_8c.html#abe7d85200e79143f87dab785a204fb3a" title=" " alt="" coords="1003,203,1185,229"/>
<area shape="rect" href="psci_8c.html#ac7522f6e0d1805f44a3e932397de4582" title=" " alt="" coords="802,203,946,229"/>
<area shape="rect" href="psci_8c.html#a8f59d47a1b54f561b8c42f509798142e" title=" " alt="" coords="580,155,724,181"/>
<area shape="rect" href="psci_8c.html#a3daa8000eb9717dde07d817c306b052b" title=" " alt="" coords="391,192,506,219"/>
<area shape="rect" href="hypercalls_8c.html#a62d0b161cae45d4a2f865203301f7ac4" title=" " alt="" coords="153,192,339,219"/>
<area shape="rect" href="handle__exit_8c.html#a5c24d46393da9651d3133e2377fd7a69" title=" " alt="" coords="7,167,103,193"/>
<area shape="rect" href="handle__exit_8c.html#ad2545fb9f7329ef0604715b9af4a1746" title=" " alt="" coords="5,217,105,244"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="793,268,955,295"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="559,268,745,295"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="387,268,511,295"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a2acb707aa37dccb7a4d021632629f994" title=" " alt="" coords="1839,352,2033,379"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a496b87a9bc8e2c1a5aa2d9ba2e13cc10" title=" " alt="" coords="1839,409,2033,436"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a86125023f5d85776a3857a2b82dfd2ca" title=" " alt="" coords="1597,345,1791,386"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a566ddfae78ebf930568f0dcc4a1bea21" title=" " alt="" coords="1597,410,1791,451"/>
</map>
</div>

</div>
</div>
<a id="a47708b59ddd94e03880996def466067e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47708b59ddd94e03880996def466067e">&#9670;&nbsp;</a></span>vgic_has_its()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vgic_has_its </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-mmio-v3_8c_source.html#l00041">41</a> of file <a class="el" href="vgic-mmio-v3_8c_source.html">vgic-mmio-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keyword">struct </span>vgic_dist *dist = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">if</span> (dist-&gt;vgic_model != KVM_DEV_TYPE_ARM_VGIC_V3)</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">return</span> dist-&gt;has_its;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a47708b59ddd94e03880996def466067e_icgraph.png" border="0" usemap="#avgic_8h_a47708b59ddd94e03880996def466067e_icgraph" alt=""/></div>
<map name="avgic_8h_a47708b59ddd94e03880996def466067e_icgraph" id="avgic_8h_a47708b59ddd94e03880996def466067e_icgraph">
<area shape="rect" title=" " alt="" coords="1885,388,1988,415"/>
<area shape="rect" href="vgic-irqfd_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="408,17,609,44"/>
<area shape="rect" href="vgic-irqfd_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1185,93,1294,120"/>
<area shape="rect" href="vgic-init_8c.html#a814da4f59c826266ad54a8b5aa870de6" title=" " alt="" coords="1412,413,1584,440"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="1459,261,1537,288"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#aba27f5e120883b4c586e84255a236f1c" title=" " alt="" coords="1645,489,1835,516"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#aa7fc716ccd8b634e88f32153df25b03e" title=" " alt="" coords="1661,541,1819,582"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a2f4cb3a37ad0e3cdd4cfdf827126e369" title=" " alt="" coords="1645,607,1835,633"/>
<area shape="rect" href="vgic-its_8c.html#a94bbb30efc49ad5494a7f4b1410dbe01" title=" " alt="" coords="1679,287,1801,313"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a839b15883ba8f9de35a03ffce32fdf7f" title=" " alt="" coords="1643,439,1837,465"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="884,43,1077,69"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="423,119,595,145"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="208,119,360,145"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="5,119,160,145"/>
<area shape="rect" href="vgic-init_8c.html#af08e0c3b0309dbe4472ed185cd2b9e72" title=" " alt="" coords="1169,413,1310,440"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="895,464,1066,491"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="885,413,1076,440"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="683,519,810,545"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="679,468,814,495"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="657,402,836,443"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="447,489,571,516"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="1184,152,1295,179"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="1154,211,1325,237"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="1145,261,1333,288"/>
<area shape="rect" href="vgic-v2_8c.html#ac8de91a1f816dcd3b3edba1d074a1aca" title=" " alt="" coords="1150,312,1329,339"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="905,144,1057,171"/>
<area shape="rect" href="pmu-emul_8c.html#ac79256eb94d7599687d3294cd40d10b4" title=" " alt="" coords="657,195,836,221"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="662,245,831,272"/>
<area shape="rect" href="arm_8c.html#a1cc94da0709805c40af7785f8c5811bf" title=" " alt="" coords="662,296,831,323"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="678,144,815,171"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="916,245,1045,272"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="916,195,1045,221"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="915,296,1046,323"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a566ddfae78ebf930568f0dcc4a1bea21" title=" " alt="" coords="1401,667,1595,709"/>
<area shape="rect" href="vgic-v4_8c.html#a563a18a1e67555a71cb46e17f0abe770" title=" " alt="" coords="1448,312,1548,339"/>
<area shape="rect" href="vgic-its_8c.html#a53bf66e96dae9553e637fa69e8835365" title=" " alt="" coords="1425,193,1571,220"/>
<area shape="rect" href="vgic-v4_8c.html#a48b85c50461cf6bb5b295c722f7e08f1" title=" " alt="" coords="1133,464,1345,491"/>
<area shape="rect" href="vgic-v4_8c.html#a37e5e1c016cf4c05c177edbee4851062" title=" " alt="" coords="1125,363,1353,389"/>
<area shape="rect" href="arm_8c.html#ad039be44476ba96d282643b616303b79" title=" " alt="" coords="899,515,1062,557"/>
<area shape="rect" href="arm_8c.html#af9eeefc9a16f01b4a563c4e7164bb242" title=" " alt="" coords="899,347,1062,389"/>
<area shape="rect" href="vgic_8c.html#a5fb6266a1f361c1945f5feb862c1cf31" title=" " alt="" coords="1407,616,1589,643"/>
<area shape="rect" href="vgic-v4_8c.html#ac2966fbf90610bb8a0525cbd903f7477" title=" " alt="" coords="1445,565,1551,592"/>
<area shape="rect" href="vgic-v4_8c.html#aeafcb3e6b67ea32ed8e59d009252e565" title=" " alt="" coords="1448,515,1548,541"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="887,683,1074,709"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="1159,616,1320,643"/>
<area shape="rect" href="arm_8c.html#a68df8c6f1b7134e9f23857f092d50056" title=" " alt="" coords="1182,565,1297,592"/>
<area shape="rect" href="vgic-v3_8c.html#aec2311d8e88bcd485c7baf083b65876e" title=" " alt="" coords="1186,667,1293,693"/>
<area shape="rect" href="handle__exit_8c.html#a0b391fc62c2250ecc0bfcdbe1b0a6788" title=" " alt="" coords="914,581,1047,608"/>
<area shape="rect" href="psci_8c.html#abe7d85200e79143f87dab785a204fb3a" title=" " alt="" coords="889,632,1072,659"/>
<area shape="rect" href="vgic-v3_8c.html#a6a9931a18504090acd3d559ba25374ff" title=" " alt="" coords="1189,515,1289,541"/>
</map>
</div>

</div>
</div>
<a id="a39a12fe5ed5534efda33bb215a320a57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39a12fe5ed5534efda33bb215a320a57">&#9670;&nbsp;</a></span>vgic_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_init </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-init_8c_source.html#l00262">262</a> of file <a class="el" href="vgic-init_8c_source.html">vgic-init.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;{</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keyword">struct </span>vgic_dist *dist = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordtype">int</span> ret = 0, i;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> idx;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    lockdep_assert_held(&amp;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span> (vgic_initialized(kvm))</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">/* Are we also in the middle of creating a VCPU? */</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">if</span> (kvm-&gt;created_vcpus != atomic_read(&amp;kvm-&gt;online_vcpus))</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordflow">return</span> -EBUSY;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">/* freeze the number of spis */</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">if</span> (!dist-&gt;nr_spis)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        dist-&gt;nr_spis = VGIC_NR_IRQS_LEGACY - VGIC_NR_PRIVATE_IRQS;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    ret = <a class="code" href="vgic-init_8c.html#a0f9be5cc88c88f6c0180c53b72818d3b">kvm_vgic_dist_init</a>(kvm, dist-&gt;nr_spis);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">/* Initialize groups on CPUs created before the VGIC type was known */</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    kvm_for_each_vcpu(idx, vcpu, kvm) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keyword">struct </span>vgic_cpu *vgic_cpu = &amp;vcpu-&gt;arch.vgic_cpu;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; VGIC_NR_PRIVATE_IRQS; i++) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="keyword">struct </span>vgic_irq *irq = &amp;vgic_cpu-&gt;private_irqs[i];</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="keywordflow">switch</span> (dist-&gt;vgic_model) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <span class="keywordflow">case</span> KVM_DEV_TYPE_ARM_VGIC_V3:</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                irq-&gt;group = 1;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                irq-&gt;mpidr = kvm_vcpu_get_mpidr_aff(vcpu);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keywordflow">case</span> KVM_DEV_TYPE_ARM_VGIC_V2:</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                irq-&gt;group = 0;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                irq-&gt;targets = 1U &lt;&lt; idx;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                ret = -EINVAL;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e">vgic_has_its</a>(kvm))</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <a class="code" href="vgic-its_8c.html#afd97b5d03d2b30ae4481443cdea2e739">vgic_lpi_translation_cache_init</a>(kvm);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">     * If we have GICv4.1 enabled, unconditionnaly request enable the</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">     * v4 support so that we get HW-accelerated vSGIs. Otherwise, only</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">     * enable it if we present a virtual ITS to the guest.</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vgic-mmio-v3_8c.html#a839b15883ba8f9de35a03ffce32fdf7f">vgic_supports_direct_msis</a>(kvm)) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        ret = <a class="code" href="vgic-v4_8c.html#a802a906ad744a75b5af33bbd6b31237c">vgic_v4_init</a>(kvm);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    kvm_for_each_vcpu(idx, vcpu, kvm)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <a class="code" href="vgic-init_8c.html#a2eee0060a3bdcd2a9e8fe1451a3a3fc2">kvm_vgic_vcpu_enable</a>(vcpu);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    ret = <a class="code" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71">kvm_vgic_setup_default_irq_routing</a>(kvm);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <a class="code" href="vgic-debug_8c.html#a42534d23071b4f3c441c5f82f9e5c1ce">vgic_debug_init</a>(kvm);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">     * If userspace didn&#39;t set the GIC implementation revision,</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">     * default to the latest and greatest. You know want it.</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">if</span> (!dist-&gt;implementation_rev)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        dist-&gt;implementation_rev = KVM_VGIC_IMP_REV_LATEST;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    dist-&gt;initialized = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;out:</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;}</div>
<div class="ttc" id="avgic-debug_8c_html_a42534d23071b4f3c441c5f82f9e5c1ce"><div class="ttname"><a href="vgic-debug_8c.html#a42534d23071b4f3c441c5f82f9e5c1ce">vgic_debug_init</a></div><div class="ttdeci">void vgic_debug_init(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-debug_8c_source.html#l00272">vgic-debug.c:272</a></div></div>
<div class="ttc" id="avgic-init_8c_html_a0f9be5cc88c88f6c0180c53b72818d3b"><div class="ttname"><a href="vgic-init_8c.html#a0f9be5cc88c88f6c0180c53b72818d3b">kvm_vgic_dist_init</a></div><div class="ttdeci">static int kvm_vgic_dist_init(struct kvm *kvm, unsigned int nr_spis)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-init_8c_source.html#l00140">vgic-init.c:140</a></div></div>
<div class="ttc" id="avgic-init_8c_html_a2eee0060a3bdcd2a9e8fe1451a3a3fc2"><div class="ttname"><a href="vgic-init_8c.html#a2eee0060a3bdcd2a9e8fe1451a3a3fc2">kvm_vgic_vcpu_enable</a></div><div class="ttdeci">static void kvm_vgic_vcpu_enable(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-init_8c_source.html#l00245">vgic-init.c:245</a></div></div>
<div class="ttc" id="avgic-irqfd_8c_html_ab5dcaa98f287aec5083bd60daf115d71"><div class="ttname"><a href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71">kvm_vgic_setup_default_irq_routing</a></div><div class="ttdeci">int kvm_vgic_setup_default_irq_routing(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-irqfd_8c_source.html#l00135">vgic-irqfd.c:135</a></div></div>
<div class="ttc" id="avgic-its_8c_html_afd97b5d03d2b30ae4481443cdea2e739"><div class="ttname"><a href="vgic-its_8c.html#afd97b5d03d2b30ae4481443cdea2e739">vgic_lpi_translation_cache_init</a></div><div class="ttdeci">void vgic_lpi_translation_cache_init(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l01903">vgic-its.c:1903</a></div></div>
<div class="ttc" id="avgic-mmio-v3_8c_html_a47708b59ddd94e03880996def466067e"><div class="ttname"><a href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e">vgic_has_its</a></div><div class="ttdeci">bool vgic_has_its(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v3_8c_source.html#l00041">vgic-mmio-v3.c:41</a></div></div>
<div class="ttc" id="avgic-mmio-v3_8c_html_a839b15883ba8f9de35a03ffce32fdf7f"><div class="ttname"><a href="vgic-mmio-v3_8c.html#a839b15883ba8f9de35a03ffce32fdf7f">vgic_supports_direct_msis</a></div><div class="ttdeci">bool vgic_supports_direct_msis(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v3_8c_source.html#l00051">vgic-mmio-v3.c:51</a></div></div>
<div class="ttc" id="avgic-v4_8c_html_a802a906ad744a75b5af33bbd6b31237c"><div class="ttname"><a href="vgic-v4_8c.html#a802a906ad744a75b5af33bbd6b31237c">vgic_v4_init</a></div><div class="ttdeci">int vgic_v4_init(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v4_8c_source.html#l00239">vgic-v4.c:239</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a39a12fe5ed5534efda33bb215a320a57_cgraph.png" border="0" usemap="#avgic_8h_a39a12fe5ed5534efda33bb215a320a57_cgraph" alt=""/></div>
<map name="avgic_8h_a39a12fe5ed5534efda33bb215a320a57_cgraph" id="avgic_8h_a39a12fe5ed5534efda33bb215a320a57_cgraph">
<area shape="rect" title=" " alt="" coords="5,807,83,833"/>
<area shape="rect" href="vgic-init_8c.html#a0f9be5cc88c88f6c0180c53b72818d3b" title=" " alt="" coords="1843,309,1987,336"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="131,698,312,739"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e" title=" " alt="" coords="2100,647,2203,673"/>
<area shape="rect" href="vgic-init_8c.html#a2eee0060a3bdcd2a9e8fe1451a3a3fc2" title=" " alt="" coords="1827,984,2002,1011"/>
<area shape="rect" href="vgic-debug_8c.html#a42534d23071b4f3c441c5f82f9e5c1ce" title=" " alt="" coords="1853,799,1977,825"/>
<area shape="rect" href="vgic-its_8c.html#afd97b5d03d2b30ae4481443cdea2e739" title=" " alt="" coords="1840,850,1989,891"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a839b15883ba8f9de35a03ffce32fdf7f" title=" " alt="" coords="1817,647,2012,673"/>
<area shape="rect" href="vgic-v4_8c.html#a802a906ad744a75b5af33bbd6b31237c" title=" " alt="" coords="1865,916,1965,943"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="360,697,515,724"/>
<area shape="rect" href="irqchip_8c.html#a5ae37186e6e6d1594767f83df8bab64a" title=" " alt="" coords="563,697,728,724"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="569,571,721,597"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="776,545,948,572"/>
<area shape="rect" href="vgic-irqfd_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1010,545,1119,572"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="996,495,1133,521"/>
<area shape="rect" href="vgic-irqfd_8c.html#a93415dbe2d5c7166c8f3f91be7c5d5da" title=" " alt="" coords="1184,596,1331,623"/>
<area shape="rect" href="vgic-its_8c.html#a53bf66e96dae9553e637fa69e8835365" title=" " alt="" coords="1184,368,1331,395"/>
<area shape="rect" href="vgic-its_8c.html#a352c8627ccf81a8154ae2275c7d50659" title=" " alt="" coords="1601,226,1769,267"/>
<area shape="rect" href="vgic-its_8c.html#ad62375be0591178764e98b79cd7217bf" title=" " alt="" coords="1391,343,1544,369"/>
<area shape="rect" href="vgic-its_8c.html#a94bbb30efc49ad5494a7f4b1410dbe01" title=" " alt="" coords="1406,393,1529,420"/>
<area shape="rect" href="vgic-its_8c.html#ab8e3bef933af0cc51b05259d801be26d" title=" " alt="" coords="1833,259,1996,285"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="1864,5,1965,32"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="1829,461,2000,488"/>
<area shape="rect" href="vgic-its_8c.html#aa5825fcbd841b62853870d25976d018b" title=" " alt="" coords="2063,233,2239,260"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="2084,335,2219,361"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="2070,81,2233,108"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="2321,81,2449,108"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="2527,621,2649,648"/>
<area shape="rect" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247" title=" " alt="" coords="2080,512,2223,539"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="2697,596,2905,623"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="2725,647,2878,673"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="2327,512,2443,539"/>
<area shape="rect" href="vgic-its_8c.html#a3fe23d687675cef46a95e36cf14d04e1" title=" " alt="" coords="1610,157,1761,184"/>
<area shape="rect" href="vgic-its_8c.html#a0fb230e293b92c9fb746ad7b97ac68d5" title=" " alt="" coords="1843,208,1986,235"/>
<area shape="rect" href="vgic-its_8c.html#ae32cde43818922d2ecf800a3de102b75" title=" " alt="" coords="1879,56,1950,83"/>
<area shape="rect" href="vgic-its_8c.html#ad9756268e1c22946f868e3255f916aa6" title=" " alt="" coords="1817,157,2012,184"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#aa37f9ed0ed7921675bc4167d4a9d9261" title=" " alt="" coords="1845,107,1984,133"/>
<area shape="rect" href="kvm__main_8c.html#acb4d46ae6cc918253046320805f63a95" title=" " alt="" coords="1606,343,1765,369"/>
<area shape="rect" href="kvm__main_8c.html#a94bf2e0af8d9af8807a6a92ffb01cc1c" title=" " alt="" coords="1819,360,2010,387"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="1181,495,1333,521"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="1417,444,1518,471"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="1412,748,1523,775"/>
<area shape="rect" href="vgic_8c.html#a19d9c44a40cc76ccbd25bd8e0ec38a08" title=" " alt="" coords="1381,545,1553,572"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="1635,393,1735,420"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="1647,799,1724,825"/>
<area shape="rect" href="vgic-v2_8c.html#a4e8ee3d5f7c8fadbf0a645df67a1c5a2" title=" " alt="" coords="2090,975,2213,1001"/>
<area shape="rect" href="vgic-v3_8c.html#abe9a2245dfa0d76d61c99b60f714a513" title=" " alt="" coords="2090,1025,2213,1052"/>
<area shape="rect" href="vgic-v4_8c.html#af99c2f70dd91a57879b3a2f583e49a4a" title=" " alt="" coords="2060,781,2243,808"/>
<area shape="rect" href="vgic-v4_8c.html#ac805e466fa8f454112c11904ef8d41ce" title=" " alt="" coords="2081,916,2221,943"/>
<area shape="rect" href="vgic-v4_8c.html#ac22161596c9858cc700bab08c03fc422" title=" " alt="" coords="2291,672,2479,699"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a39a12fe5ed5534efda33bb215a320a57_icgraph.png" border="0" usemap="#avgic_8h_a39a12fe5ed5534efda33bb215a320a57_icgraph" alt=""/></div>
<map name="avgic_8h_a39a12fe5ed5534efda33bb215a320a57_icgraph" id="avgic_8h_a39a12fe5ed5534efda33bb215a320a57_icgraph">
<area shape="rect" title=" " alt="" coords="2693,463,2771,489"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="2496,387,2607,413"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="2466,539,2637,565"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="2457,488,2645,515"/>
<area shape="rect" href="vgic-v2_8c.html#ac8de91a1f816dcd3b3edba1d074a1aca" title=" " alt="" coords="2462,437,2641,464"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="2238,260,2390,287"/>
<area shape="rect" href="pmu-emul_8c.html#ac79256eb94d7599687d3294cd40d10b4" title=" " alt="" coords="1091,108,1269,135"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="2001,260,2171,287"/>
<area shape="rect" href="arm_8c.html#a1cc94da0709805c40af7785f8c5811bf" title=" " alt="" coords="2001,311,2171,337"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="2017,56,2155,83"/>
<area shape="rect" href="pmu-emul_8c.html#ab0f1f020b6774de3fb4ff4c8b4e45a5c" title=" " alt="" coords="851,108,1035,135"/>
<area shape="rect" href="pmu-emul_8c.html#ae6434d5e6ad74c608886c368e56d67bc" title=" " alt="" coords="852,57,1035,84"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="611,184,797,211"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,421,129,448"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="1761,209,1945,236"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="1757,260,1949,287"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="1769,311,1936,353"/>
<area shape="rect" href="arch__timer_8c.html#a11b9b6e6338bbec6085332661c934e91" title=" " alt="" coords="1319,456,1489,483"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="1793,377,1912,404"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="1761,159,1944,185"/>
<area shape="rect" href="arch__timer_8c.html#a27c9feb35e6d7126c054c3325fea59b0" title=" " alt="" coords="1545,209,1697,236"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="1340,209,1468,236"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="1124,209,1236,236"/>
<area shape="rect" href="arch__timer_8c.html#a4bf6ac76380146820b45b06feb3eab27" title=" " alt="" coords="1537,319,1704,345"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1325,323,1483,349"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="845,361,1041,388"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="1107,361,1253,388"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1115,463,1245,489"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="1123,260,1237,287"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="899,209,987,236"/>
<area shape="rect" href="handle__exit_8c.html#ae96aab7918301d55b908034db5855e3d" title=" " alt="" coords="637,311,771,337"/>
<area shape="rect" href="emulate-nested_8c.html#af5e2eb745d8ac6415fe941ebe754171d" title=" " alt="" coords="852,260,1035,287"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="855,513,1031,540"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="623,471,785,497"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,421,336,448"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="863,311,1024,337"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="394,463,553,505"/>
<area shape="rect" href="arch__timer_8c.html#a0209ad4256c7a1fd5ea70b6abe030954" title=" " alt="" coords="1537,370,1704,411"/>
<area shape="rect" href="sys__regs_8c.html#a9457451d95fa776f653cff6c2a8d31f9" title=" " alt="" coords="1333,377,1475,404"/>
<area shape="rect" href="arch__timer_8c.html#a6ae73bff466fcdc60319f9726d53b571" title=" " alt="" coords="1538,159,1703,185"/>
<area shape="rect" href="vgic-irqfd_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="1752,5,1953,32"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="1767,56,1939,83"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="1545,55,1697,81"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="1327,53,1481,80"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="1089,42,1271,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="2249,539,2379,565"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="2249,589,2379,616"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="2249,488,2379,515"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="2219,437,2409,464"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="384,542,563,583"/>
</map>
</div>

</div>
</div>
<a id="a9bdd8f789c7055ff9681448eecde7072"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bdd8f789c7055ff9681448eecde7072">&#9670;&nbsp;</a></span>vgic_irq_get_lr_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int vgic_irq_get_lr_count </td>
          <td>(</td>
          <td class="paramtype">struct vgic_irq *&#160;</td>
          <td class="paramname"><em>irq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00121">121</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">/* Account for the active state as an interrupt */</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vgic_8h.html#a67cef97460e9a4080ae437e5a30113a7">vgic_irq_is_sgi</a>(irq-&gt;intid) &amp;&amp; irq-&gt;source)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">return</span> hweight8(irq-&gt;source) + irq-&gt;active;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45">irq_is_pending</a>(irq) || irq-&gt;active;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div>
<div class="ttc" id="avgic_8h_html_a1109d873011f89a4acb4fd461f9f0a45"><div class="ttname"><a href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45">irq_is_pending</a></div><div class="ttdeci">static bool irq_is_pending(struct vgic_irq *irq)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00108">vgic.h:108</a></div></div>
<div class="ttc" id="avgic_8h_html_a67cef97460e9a4080ae437e5a30113a7"><div class="ttname"><a href="vgic_8h.html#a67cef97460e9a4080ae437e5a30113a7">vgic_irq_is_sgi</a></div><div class="ttdeci">#define vgic_irq_is_sgi(intid)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00021">vgic.h:21</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a9bdd8f789c7055ff9681448eecde7072_cgraph.png" border="0" usemap="#avgic_8h_a9bdd8f789c7055ff9681448eecde7072_cgraph" alt=""/></div>
<map name="avgic_8h_a9bdd8f789c7055ff9681448eecde7072_cgraph" id="avgic_8h_a9bdd8f789c7055ff9681448eecde7072_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,165,32"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="213,5,329,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a9bdd8f789c7055ff9681448eecde7072_icgraph.png" border="0" usemap="#avgic_8h_a9bdd8f789c7055ff9681448eecde7072_icgraph" alt=""/></div>
<map name="avgic_8h_a9bdd8f789c7055ff9681448eecde7072_icgraph" id="avgic_8h_a9bdd8f789c7055ff9681448eecde7072_icgraph">
<area shape="rect" title=" " alt="" coords="1461,31,1621,57"/>
<area shape="rect" href="vgic_8c.html#a5d8388f7026d04d501f7188b0b470812" title=" " alt="" coords="833,5,1007,32"/>
<area shape="rect" href="vgic_8h.html#a03246bc81a56f8f77c3ee4ea6e27047d" title=" " alt="" coords="1255,56,1413,83"/>
<area shape="rect" href="vgic_8c.html#a498227d2a82836ba11a046b68857e3a3" title=" " alt="" coords="643,31,785,57"/>
<area shape="rect" href="vgic_8c.html#a5fb6266a1f361c1945f5feb862c1cf31" title=" " alt="" coords="412,31,595,57"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,31,364,57"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,31,129,57"/>
<area shape="rect" href="vgic-v2_8c.html#a9b6956f55b0732bd8aa6e5cce3b51b34" title=" " alt="" coords="1055,56,1207,83"/>
<area shape="rect" href="vgic-v3_8c.html#ad978c7773b6b8a81c108e35926ce6f86" title=" " alt="" coords="1055,107,1207,133"/>
<area shape="rect" href="vgic_8c.html#a1d440ccc621cee03cf929f67f1fc5f6a" title=" " alt="" coords="855,56,985,83"/>
</map>
</div>

</div>
</div>
<a id="a19d27bba8dd17f9ae9c8284444df030b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19d27bba8dd17f9ae9c8284444df030b">&#9670;&nbsp;</a></span>vgic_irq_handle_resampling()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_irq_handle_resampling </td>
          <td>(</td>
          <td class="paramtype">struct vgic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>lr_deactivated</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>lr_pending</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8c_source.html#l01060">1060</a> of file <a class="el" href="vgic_8c_source.html">vgic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;{</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vgic_8h.html#a9c8f3a32a17b2384ea1cc0c6e0340ad7">vgic_irq_is_mapped_level</a>(irq)) {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        <span class="keywordtype">bool</span> resample = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160; </div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        <span class="keywordflow">if</span> (unlikely(vgic_irq_needs_resampling(irq))) {</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            resample = !(irq-&gt;active || irq-&gt;pending_latch);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lr_pending || (lr_deactivated &amp;&amp; irq-&gt;line_level)) {</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;            irq-&gt;line_level = <a class="code" href="vgic_8c.html#a44a31fe53851677c742d5b2a340e2f56">vgic_get_phys_line_level</a>(irq);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;            resample = !irq-&gt;line_level;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        }</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160; </div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <span class="keywordflow">if</span> (resample)</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;            <a class="code" href="vgic_8c.html#a6daedd3eec82ca8b68db82b750a24f67">vgic_irq_set_phys_active</a>(irq, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    }</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;}</div>
<div class="ttc" id="avgic_8c_html_a44a31fe53851677c742d5b2a340e2f56"><div class="ttname"><a href="vgic_8c.html#a44a31fe53851677c742d5b2a340e2f56">vgic_get_phys_line_level</a></div><div class="ttdeci">bool vgic_get_phys_line_level(struct vgic_irq *irq)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8c_source.html#l00180">vgic.c:180</a></div></div>
<div class="ttc" id="avgic_8c_html_a6daedd3eec82ca8b68db82b750a24f67"><div class="ttname"><a href="vgic_8c.html#a6daedd3eec82ca8b68db82b750a24f67">vgic_irq_set_phys_active</a></div><div class="ttdeci">void vgic_irq_set_phys_active(struct vgic_irq *irq, bool active)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8c_source.html#l00196">vgic.c:196</a></div></div>
<div class="ttc" id="avgic_8h_html_a9c8f3a32a17b2384ea1cc0c6e0340ad7"><div class="ttname"><a href="vgic_8h.html#a9c8f3a32a17b2384ea1cc0c6e0340ad7">vgic_irq_is_mapped_level</a></div><div class="ttdeci">static bool vgic_irq_is_mapped_level(struct vgic_irq *irq)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00116">vgic.h:116</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a19d27bba8dd17f9ae9c8284444df030b_cgraph.png" border="0" usemap="#avgic_8h_a19d27bba8dd17f9ae9c8284444df030b_cgraph" alt=""/></div>
<map name="avgic_8h_a19d27bba8dd17f9ae9c8284444df030b_cgraph" id="avgic_8h_a19d27bba8dd17f9ae9c8284444df030b_cgraph">
<area shape="rect" title=" " alt="" coords="5,78,209,105"/>
<area shape="rect" href="vgic_8c.html#a44a31fe53851677c742d5b2a340e2f56" title=" " alt="" coords="277,5,423,47"/>
<area shape="rect" href="vgic_8h.html#a9c8f3a32a17b2384ea1cc0c6e0340ad7" title=" " alt="" coords="275,71,425,112"/>
<area shape="rect" href="vgic_8c.html#a6daedd3eec82ca8b68db82b750a24f67" title=" " alt="" coords="257,137,443,163"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a19d27bba8dd17f9ae9c8284444df030b_icgraph.png" border="0" usemap="#avgic_8h_a19d27bba8dd17f9ae9c8284444df030b_icgraph" alt=""/></div>
<map name="avgic_8h_a19d27bba8dd17f9ae9c8284444df030b_icgraph" id="avgic_8h_a19d27bba8dd17f9ae9c8284444df030b_icgraph">
<area shape="rect" title=" " alt="" coords="1035,31,1239,57"/>
<area shape="rect" href="vgic-v2_8c.html#a7627ef75f37a19085dece7f4d26ad898" title=" " alt="" coords="827,5,987,32"/>
<area shape="rect" href="vgic-v3_8c.html#a3d53ba6e7f70704effc37ea2c4b0c04b" title=" " alt="" coords="827,56,987,83"/>
<area shape="rect" href="vgic_8c.html#ad42413b2202ba95d0b76067b240b9c52" title=" " alt="" coords="641,31,779,57"/>
<area shape="rect" href="vgic_8c.html#a76c600af416fb73e40611d80115edc03" title=" " alt="" coords="412,31,593,57"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,31,364,57"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,31,129,57"/>
</map>
</div>

</div>
</div>
<a id="a9c8f3a32a17b2384ea1cc0c6e0340ad7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c8f3a32a17b2384ea1cc0c6e0340ad7">&#9670;&nbsp;</a></span>vgic_irq_is_mapped_level()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool vgic_irq_is_mapped_level </td>
          <td>(</td>
          <td class="paramtype">struct vgic_irq *&#160;</td>
          <td class="paramname"><em>irq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00116">116</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;{</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">return</span> irq-&gt;config == VGIC_CONFIG_LEVEL &amp;&amp; irq-&gt;hw;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a9c8f3a32a17b2384ea1cc0c6e0340ad7_icgraph.png" border="0" usemap="#avgic_8h_a9c8f3a32a17b2384ea1cc0c6e0340ad7_icgraph" alt=""/></div>
<map name="avgic_8h_a9c8f3a32a17b2384ea1cc0c6e0340ad7_icgraph" id="avgic_8h_a9c8f3a32a17b2384ea1cc0c6e0340ad7_icgraph">
<area shape="rect" title=" " alt="" coords="1336,150,1487,191"/>
<area shape="rect" href="vgic-mmio_8c.html#acb8571139852386510e89bd6a9fbf9e6" title=" " alt="" coords="1124,56,1248,83"/>
<area shape="rect" href="vgic_8c.html#a19d27bba8dd17f9ae9c8284444df030b" title=" " alt="" coords="1084,107,1288,133"/>
<area shape="rect" href="vgic-mmio_8c.html#a0c1f43ac9c640684281b61fd45b48a67" title=" " alt="" coords="1090,157,1282,184"/>
<area shape="rect" href="vgic-v2_8c.html#a9b6956f55b0732bd8aa6e5cce3b51b34" title=" " alt="" coords="1110,208,1262,235"/>
<area shape="rect" href="vgic-v3_8c.html#ad978c7773b6b8a81c108e35926ce6f86" title=" " alt="" coords="1110,259,1262,285"/>
<area shape="rect" href="vgic-mmio_8c.html#a6235e1f8f727a8a7ba0faf6ed401b04e" title=" " alt="" coords="840,5,1029,32"/>
<area shape="rect" href="vgic-mmio_8c.html#a39de6f448012602b72fcc09860d1a0a3" title=" " alt="" coords="833,56,1036,83"/>
<area shape="rect" href="vgic-v2_8c.html#a7627ef75f37a19085dece7f4d26ad898" title=" " alt="" coords="855,107,1015,133"/>
<area shape="rect" href="vgic-v3_8c.html#a3d53ba6e7f70704effc37ea2c4b0c04b" title=" " alt="" coords="855,157,1015,184"/>
<area shape="rect" href="vgic_8c.html#ad42413b2202ba95d0b76067b240b9c52" title=" " alt="" coords="645,157,783,184"/>
<area shape="rect" href="vgic_8c.html#a76c600af416fb73e40611d80115edc03" title=" " alt="" coords="413,157,594,184"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,183,364,209"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,183,129,209"/>
<area shape="rect" href="vgic_8c.html#a1d440ccc621cee03cf929f67f1fc5f6a" title=" " alt="" coords="870,208,999,235"/>
<area shape="rect" href="vgic_8c.html#a498227d2a82836ba11a046b68857e3a3" title=" " alt="" coords="643,208,785,235"/>
<area shape="rect" href="vgic_8c.html#a5fb6266a1f361c1945f5feb862c1cf31" title=" " alt="" coords="412,208,595,235"/>
</map>
</div>

</div>
</div>
<a id="a03246bc81a56f8f77c3ee4ea6e27047d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03246bc81a56f8f77c3ee4ea6e27047d">&#9670;&nbsp;</a></span>vgic_irq_is_multi_sgi()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool vgic_irq_is_multi_sgi </td>
          <td>(</td>
          <td class="paramtype">struct vgic_irq *&#160;</td>
          <td class="paramname"><em>irq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00130">130</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;{</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="vgic_8h.html#a9bdd8f789c7055ff9681448eecde7072">vgic_irq_get_lr_count</a>(irq) &gt; 1;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div>
<div class="ttc" id="avgic_8h_html_a9bdd8f789c7055ff9681448eecde7072"><div class="ttname"><a href="vgic_8h.html#a9bdd8f789c7055ff9681448eecde7072">vgic_irq_get_lr_count</a></div><div class="ttdeci">static int vgic_irq_get_lr_count(struct vgic_irq *irq)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00121">vgic.h:121</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a03246bc81a56f8f77c3ee4ea6e27047d_cgraph.png" border="0" usemap="#avgic_8h_a03246bc81a56f8f77c3ee4ea6e27047d_cgraph" alt=""/></div>
<map name="avgic_8h_a03246bc81a56f8f77c3ee4ea6e27047d_cgraph" id="avgic_8h_a03246bc81a56f8f77c3ee4ea6e27047d_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,164,32"/>
<area shape="rect" href="vgic_8h.html#a9bdd8f789c7055ff9681448eecde7072" title=" " alt="" coords="212,5,372,32"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="420,5,536,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a03246bc81a56f8f77c3ee4ea6e27047d_icgraph.png" border="0" usemap="#avgic_8h_a03246bc81a56f8f77c3ee4ea6e27047d_icgraph" alt=""/></div>
<map name="avgic_8h_a03246bc81a56f8f77c3ee4ea6e27047d_icgraph" id="avgic_8h_a03246bc81a56f8f77c3ee4ea6e27047d_icgraph">
<area shape="rect" title=" " alt="" coords="1211,31,1369,57"/>
<area shape="rect" href="vgic-v2_8c.html#a9b6956f55b0732bd8aa6e5cce3b51b34" title=" " alt="" coords="1011,5,1163,32"/>
<area shape="rect" href="vgic-v3_8c.html#ad978c7773b6b8a81c108e35926ce6f86" title=" " alt="" coords="1011,56,1163,83"/>
<area shape="rect" href="vgic_8c.html#a1d440ccc621cee03cf929f67f1fc5f6a" title=" " alt="" coords="833,31,963,57"/>
<area shape="rect" href="vgic_8c.html#a498227d2a82836ba11a046b68857e3a3" title=" " alt="" coords="643,31,785,57"/>
<area shape="rect" href="vgic_8c.html#a5fb6266a1f361c1945f5feb862c1cf31" title=" " alt="" coords="412,31,595,57"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,31,364,57"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,31,129,57"/>
</map>
</div>

</div>
</div>
<a id="a6daedd3eec82ca8b68db82b750a24f67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6daedd3eec82ca8b68db82b750a24f67">&#9670;&nbsp;</a></span>vgic_irq_set_phys_active()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_irq_set_phys_active </td>
          <td>(</td>
          <td class="paramtype">struct vgic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>active</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8c_source.html#l00196">196</a> of file <a class="el" href="vgic_8c_source.html">vgic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;{</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    BUG_ON(!irq-&gt;hw);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    WARN_ON(irq_set_irqchip_state(irq-&gt;host_irq,</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                      IRQCHIP_STATE_ACTIVE,</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                      active));</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a6daedd3eec82ca8b68db82b750a24f67_icgraph.png" border="0" usemap="#avgic_8h_a6daedd3eec82ca8b68db82b750a24f67_icgraph" alt=""/></div>
<map name="avgic_8h_a6daedd3eec82ca8b68db82b750a24f67_icgraph" id="avgic_8h_a6daedd3eec82ca8b68db82b750a24f67_icgraph">
<area shape="rect" title=" " alt="" coords="1404,265,1589,291"/>
<area shape="rect" href="vgic-mmio_8c.html#abbf6cc4053faa7c09c5b99c71a6aaa2a" title=" " alt="" coords="1197,214,1311,241"/>
<area shape="rect" href="vgic-mmio_8c.html#a159c8e8099d0a63ede755ad8c31da2b0" title=" " alt="" coords="1177,127,1331,168"/>
<area shape="rect" href="vgic-mmio_8c.html#a6f26f277f544d4f19bff333b18a0b727" title=" " alt="" coords="1171,265,1337,291"/>
<area shape="rect" href="vgic_8c.html#a19d27bba8dd17f9ae9c8284444df030b" title=" " alt="" coords="1152,315,1356,342"/>
<area shape="rect" href="vgic-mmio_8c.html#a0c1f43ac9c640684281b61fd45b48a67" title=" " alt="" coords="1158,366,1350,393"/>
<area shape="rect" href="vgic-mmio_8c.html#a5a75938ee02f87306de4cc6200b830db" title=" " alt="" coords="904,163,1104,190"/>
<area shape="rect" href="vgic-mmio_8c.html#a3c1f43b5ec001e615e4d50a3e088997d" title=" " alt="" coords="681,183,829,224"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a597bfc6e392a0f71325a8a7a9643b07a" title=" " alt="" coords="423,264,594,305"/>
<area shape="rect" href="vgic-mmio_8c.html#ae0e687d9272d9f9e52e4356c2732b289" title=" " alt="" coords="907,113,1101,139"/>
<area shape="rect" href="vgic-mmio_8c.html#a4552ff194be4788b6c2d944a201903fc" title=" " alt="" coords="653,71,856,98"/>
<area shape="rect" href="vgic-mmio_8c.html#a512b4b38220c4a8e593935c74ce036c5" title=" " alt="" coords="653,122,856,149"/>
<area shape="rect" href="vgic-mmio_8c.html#a0421c2d1f16b18d43ca3e7c04b8498c9" title=" " alt="" coords="412,5,605,47"/>
<area shape="rect" href="vgic-mmio_8c.html#aa63931731ae20241ae0791e6c37941bd" title=" " alt="" coords="415,71,603,98"/>
<area shape="rect" href="vgic-mmio_8c.html#a1870c72389c4c955f3f5f316f357f8a5" title=" " alt="" coords="412,173,605,215"/>
<area shape="rect" href="vgic-mmio_8c.html#af0464f992e9cc43ef209cfe598d4eb00" title=" " alt="" coords="415,122,603,149"/>
<area shape="rect" href="vgic-mmio_8c.html#ac9d250a7a5f4eae6374bd57711e4aa5a" title=" " alt="" coords="941,265,1067,291"/>
<area shape="rect" href="vgic-mmio_8c.html#a2c19040c027236361c68623a437dd5f2" title=" " alt="" coords="655,249,855,275"/>
<area shape="rect" href="vgic-mmio_8c.html#a86ae5b1e120327acb1e064fc9f983534" title=" " alt="" coords="681,300,829,341"/>
<area shape="rect" href="vgic-v2_8c.html#a7627ef75f37a19085dece7f4d26ad898" title=" " alt="" coords="924,315,1084,342"/>
<area shape="rect" href="vgic-v3_8c.html#a3d53ba6e7f70704effc37ea2c4b0c04b" title=" " alt="" coords="924,366,1084,393"/>
<area shape="rect" href="vgic_8c.html#ad42413b2202ba95d0b76067b240b9c52" title=" " alt="" coords="686,366,823,393"/>
<area shape="rect" href="vgic_8c.html#a76c600af416fb73e40611d80115edc03" title=" " alt="" coords="418,366,599,393"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,366,364,393"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,366,129,393"/>
</map>
</div>

</div>
</div>
<a id="a1a63066504dcc87c4250f625d4337ac1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a63066504dcc87c4250f625d4337ac1">&#9670;&nbsp;</a></span>vgic_irq_set_phys_pending()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_irq_set_phys_pending </td>
          <td>(</td>
          <td class="paramtype">struct vgic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>pending</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8c_source.html#l00173">173</a> of file <a class="el" href="vgic_8c_source.html">vgic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;{</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    WARN_ON(irq_set_irqchip_state(irq-&gt;host_irq,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                      IRQCHIP_STATE_PENDING,</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                      pending));</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a1a63066504dcc87c4250f625d4337ac1_icgraph.png" border="0" usemap="#avgic_8h_a1a63066504dcc87c4250f625d4337ac1_icgraph" alt=""/></div>
<map name="avgic_8h_a1a63066504dcc87c4250f625d4337ac1_icgraph" id="avgic_8h_a1a63066504dcc87c4250f625d4337ac1_icgraph">
<area shape="rect" title=" " alt="" coords="860,35,1057,61"/>
<area shape="rect" href="vgic-mmio_8c.html#a6f26f277f544d4f19bff333b18a0b727" title=" " alt="" coords="647,35,812,61"/>
<area shape="rect" href="vgic-mmio_8c.html#ac9d250a7a5f4eae6374bd57711e4aa5a" title=" " alt="" coords="472,35,599,61"/>
<area shape="rect" href="vgic-mmio_8c.html#a2c19040c027236361c68623a437dd5f2" title=" " alt="" coords="224,5,424,32"/>
<area shape="rect" href="vgic-mmio_8c.html#a86ae5b1e120327acb1e064fc9f983534" title=" " alt="" coords="250,57,398,98"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a597bfc6e392a0f71325a8a7a9643b07a" title=" " alt="" coords="5,57,176,98"/>
</map>
</div>

</div>
</div>
<a id="a352c8627ccf81a8154ae2275c7d50659"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a352c8627ccf81a8154ae2275c7d50659">&#9670;&nbsp;</a></span>vgic_its_inject_cached_translation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_its_inject_cached_translation </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_msi *&#160;</td>
          <td class="paramname"><em>msi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-its_8c_source.html#l00765">765</a> of file <a class="el" href="vgic-its_8c_source.html">vgic-its.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;{</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="keyword">struct </span>vgic_irq *irq;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    phys_addr_t db;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    db = (u64)msi-&gt;address_hi &lt;&lt; 32 | msi-&gt;address_lo;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    irq = <a class="code" href="vgic-its_8c.html#ab8e3bef933af0cc51b05259d801be26d">vgic_its_check_cache</a>(kvm, db, msi-&gt;devid, msi-&gt;data);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">if</span> (!irq)</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <span class="keywordflow">return</span> -EWOULDBLOCK;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    raw_spin_lock_irqsave(&amp;irq-&gt;irq_lock, flags);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    irq-&gt;pending_latch = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <a class="code" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c">vgic_queue_irq_unlock</a>(kvm, irq, flags);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <a class="code" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5">vgic_put_irq</a>(kvm, irq);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;}</div>
<div class="ttc" id="avgic-its_8c_html_ab8e3bef933af0cc51b05259d801be26d"><div class="ttname"><a href="vgic-its_8c.html#ab8e3bef933af0cc51b05259d801be26d">vgic_its_check_cache</a></div><div class="ttdeci">static struct vgic_irq * vgic_its_check_cache(struct kvm *kvm, phys_addr_t db, u32 devid, u32 eventid)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l00588">vgic-its.c:588</a></div></div>
<div class="ttc" id="avgic_8c_html_a1e208ac24f54fa95ba74797758c5b84c"><div class="ttname"><a href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c">vgic_queue_irq_unlock</a></div><div class="ttdeci">bool vgic_queue_irq_unlock(struct kvm *kvm, struct vgic_irq *irq, unsigned long flags)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8c_source.html#l00336">vgic.c:336</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a352c8627ccf81a8154ae2275c7d50659_cgraph.png" border="0" usemap="#avgic_8h_a352c8627ccf81a8154ae2275c7d50659_cgraph" alt=""/></div>
<map name="avgic_8h_a352c8627ccf81a8154ae2275c7d50659_cgraph" id="avgic_8h_a352c8627ccf81a8154ae2275c7d50659_cgraph">
<area shape="rect" title=" " alt="" coords="5,62,173,103"/>
<area shape="rect" href="vgic-its_8c.html#ab8e3bef933af0cc51b05259d801be26d" title=" " alt="" coords="225,69,388,96"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="256,12,357,39"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="221,132,392,159"/>
<area shape="rect" href="vgic-its_8c.html#aa5825fcbd841b62853870d25976d018b" title=" " alt="" coords="440,56,616,83"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="461,107,595,133"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="447,5,609,32"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="704,5,832,32"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="467,208,589,235"/>
<area shape="rect" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247" title=" " alt="" coords="457,157,599,184"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="664,259,872,285"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="691,208,845,235"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="710,157,826,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a352c8627ccf81a8154ae2275c7d50659_icgraph.png" border="0" usemap="#avgic_8h_a352c8627ccf81a8154ae2275c7d50659_icgraph" alt=""/></div>
<map name="avgic_8h_a352c8627ccf81a8154ae2275c7d50659_icgraph" id="avgic_8h_a352c8627ccf81a8154ae2275c7d50659_icgraph">
<area shape="rect" title=" " alt="" coords="3613,14,3781,55"/>
<area shape="rect" href="vgic-irqfd_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="1321,5,1523,32"/>
<area shape="rect" href="vgic-its_8c.html#a53bf66e96dae9553e637fa69e8835365" title=" " alt="" coords="3419,47,3565,73"/>
<area shape="rect" href="vgic-irqfd_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="3261,47,3371,73"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="3020,47,3213,73"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="3031,97,3203,124"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="2820,97,2972,124"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="2617,124,2772,151"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="2388,145,2569,186"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="2263,199,2340,225"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="2065,249,2176,276"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="2035,148,2206,175"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="2027,199,2215,225"/>
<area shape="rect" href="vgic-v2_8c.html#ac8de91a1f816dcd3b3edba1d074a1aca" title=" " alt="" coords="2031,351,2210,377"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="1807,249,1959,276"/>
<area shape="rect" href="pmu-emul_8c.html#ac79256eb94d7599687d3294cd40d10b4" title=" " alt="" coords="653,400,831,427"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="1571,245,1740,272"/>
<area shape="rect" href="arm_8c.html#a1cc94da0709805c40af7785f8c5811bf" title=" " alt="" coords="1571,195,1740,221"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="1587,47,1724,73"/>
<area shape="rect" href="pmu-emul_8c.html#ab0f1f020b6774de3fb4ff4c8b4e45a5c" title=" " alt="" coords="412,441,596,468"/>
<area shape="rect" href="pmu-emul_8c.html#ae6434d5e6ad74c608886c368e56d67bc" title=" " alt="" coords="413,391,595,417"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,363,364,389"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,363,129,389"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="1330,75,1514,101"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="1326,299,1518,325"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="1339,233,1505,274"/>
<area shape="rect" href="arch__timer_8c.html#a11b9b6e6338bbec6085332661c934e91" title=" " alt="" coords="888,129,1059,156"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="1363,181,1481,208"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="1331,349,1513,376"/>
<area shape="rect" href="arch__timer_8c.html#a27c9feb35e6d7126c054c3325fea59b0" title=" " alt="" coords="1114,75,1266,101"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="909,75,1037,101"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="686,75,798,101"/>
<area shape="rect" href="arch__timer_8c.html#a4bf6ac76380146820b45b06feb3eab27" title=" " alt="" coords="1107,243,1273,269"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="894,239,1053,265"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="644,289,840,316"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="669,188,815,215"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="677,137,807,164"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="685,239,799,265"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="416,112,592,139"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="189,151,352,177"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="423,264,585,291"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="191,227,350,253"/>
<area shape="rect" href="arch__timer_8c.html#a0209ad4256c7a1fd5ea70b6abe030954" title=" " alt="" coords="1107,177,1273,218"/>
<area shape="rect" href="sys__regs_8c.html#a9457451d95fa776f653cff6c2a8d31f9" title=" " alt="" coords="902,184,1045,211"/>
<area shape="rect" href="arch__timer_8c.html#a6ae73bff466fcdc60319f9726d53b571" title=" " alt="" coords="1107,345,1273,372"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="1819,148,1948,175"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="1819,97,1948,124"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="1818,199,1949,225"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="1788,412,1979,439"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="181,461,360,502"/>
</map>
</div>

</div>
</div>
<a id="a53bf66e96dae9553e637fa69e8835365"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53bf66e96dae9553e637fa69e8835365">&#9670;&nbsp;</a></span>vgic_its_inject_msi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_its_inject_msi </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_msi *&#160;</td>
          <td class="paramname"><em>msi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-its_8c_source.html#l00790">790</a> of file <a class="el" href="vgic-its_8c_source.html">vgic-its.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;{</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keyword">struct </span>vgic_its *its;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="vgic-its_8c.html#a352c8627ccf81a8154ae2275c7d50659">vgic_its_inject_cached_translation</a>(kvm, msi))</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160; </div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    its = <a class="code" href="vgic-its_8c.html#a94bbb30efc49ad5494a7f4b1410dbe01">vgic_msi_to_its</a>(kvm, msi);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">if</span> (IS_ERR(its))</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="keywordflow">return</span> PTR_ERR(its);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    mutex_lock(&amp;its-&gt;its_lock);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    ret = <a class="code" href="vgic-its_8c.html#ad62375be0591178764e98b79cd7217bf">vgic_its_trigger_msi</a>(kvm, its, msi-&gt;devid, msi-&gt;data);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    mutex_unlock(&amp;its-&gt;its_lock);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160; </div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">     * KVM_SIGNAL_MSI demands a return value &gt; 0 for success and 0</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">     * if the guest has blocked the MSI. So we map any LPI mapping</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment">     * related error to that.</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;}</div>
<div class="ttc" id="avgic-its_8c_html_a352c8627ccf81a8154ae2275c7d50659"><div class="ttname"><a href="vgic-its_8c.html#a352c8627ccf81a8154ae2275c7d50659">vgic_its_inject_cached_translation</a></div><div class="ttdeci">int vgic_its_inject_cached_translation(struct kvm *kvm, struct kvm_msi *msi)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l00765">vgic-its.c:765</a></div></div>
<div class="ttc" id="avgic-its_8c_html_a94bbb30efc49ad5494a7f4b1410dbe01"><div class="ttname"><a href="vgic-its_8c.html#a94bbb30efc49ad5494a7f4b1410dbe01">vgic_msi_to_its</a></div><div class="ttdeci">struct vgic_its * vgic_msi_to_its(struct kvm *kvm, struct kvm_msi *msi)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l00708">vgic-its.c:708</a></div></div>
<div class="ttc" id="avgic-its_8c_html_ad62375be0591178764e98b79cd7217bf"><div class="ttname"><a href="vgic-its_8c.html#ad62375be0591178764e98b79cd7217bf">vgic_its_trigger_msi</a></div><div class="ttdeci">static int vgic_its_trigger_msi(struct kvm *kvm, struct vgic_its *its, u32 devid, u32 eventid)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l00743">vgic-its.c:743</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a53bf66e96dae9553e637fa69e8835365_cgraph.png" border="0" usemap="#avgic_8h_a53bf66e96dae9553e637fa69e8835365_cgraph" alt=""/></div>
<map name="avgic_8h_a53bf66e96dae9553e637fa69e8835365_cgraph" id="avgic_8h_a53bf66e96dae9553e637fa69e8835365_cgraph">
<area shape="rect" title=" " alt="" coords="5,323,152,349"/>
<area shape="rect" href="vgic-its_8c.html#a352c8627ccf81a8154ae2275c7d50659" title=" " alt="" coords="401,201,569,242"/>
<area shape="rect" href="vgic-its_8c.html#ad62375be0591178764e98b79cd7217bf" title=" " alt="" coords="200,272,353,299"/>
<area shape="rect" href="vgic-its_8c.html#a94bbb30efc49ad5494a7f4b1410dbe01" title=" " alt="" coords="215,399,338,425"/>
<area shape="rect" href="vgic-its_8c.html#ab8e3bef933af0cc51b05259d801be26d" title=" " alt="" coords="633,157,796,184"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="664,259,765,285"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="629,107,800,133"/>
<area shape="rect" href="vgic-its_8c.html#aa5825fcbd841b62853870d25976d018b" title=" " alt="" coords="860,208,1036,235"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="881,157,1015,184"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="867,259,1029,285"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="1124,259,1252,285"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="887,56,1009,83"/>
<area shape="rect" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247" title=" " alt="" coords="877,107,1019,133"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1084,56,1292,83"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1111,5,1265,32"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="1130,107,1246,133"/>
<area shape="rect" href="vgic-its_8c.html#a3fe23d687675cef46a95e36cf14d04e1" title=" " alt="" coords="410,309,561,336"/>
<area shape="rect" href="vgic-its_8c.html#a0fb230e293b92c9fb746ad7b97ac68d5" title=" " alt="" coords="643,309,786,336"/>
<area shape="rect" href="vgic-its_8c.html#ae32cde43818922d2ecf800a3de102b75" title=" " alt="" coords="679,411,750,437"/>
<area shape="rect" href="vgic-its_8c.html#ad9756268e1c22946f868e3255f916aa6" title=" " alt="" coords="617,208,812,235"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#aa37f9ed0ed7921675bc4167d4a9d9261" title=" " alt="" coords="645,360,784,387"/>
<area shape="rect" href="vgic-its_8c.html#aeb2ca1f1a8fef2826c3c7e466dad2cb7" title=" " alt="" coords="889,411,1007,437"/>
<area shape="rect" href="kvm__main_8c.html#acb4d46ae6cc918253046320805f63a95" title=" " alt="" coords="406,399,565,425"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e" title=" " alt="" coords="434,449,537,476"/>
<area shape="rect" href="kvm__main_8c.html#a94bf2e0af8d9af8807a6a92ffb01cc1c" title=" " alt="" coords="619,461,810,488"/>
<area shape="rect" href="kvm__main_8c.html#a75ccec7a81fef145fb3c3a3b5479a86f" title=" " alt="" coords="1121,487,1255,513"/>
<area shape="rect" href="kvm__main_8c.html#aa52366417ec3708a05183231a3227d9d" title=" " alt="" coords="865,512,1031,539"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a53bf66e96dae9553e637fa69e8835365_icgraph.png" border="0" usemap="#avgic_8h_a53bf66e96dae9553e637fa69e8835365_icgraph" alt=""/></div>
<map name="avgic_8h_a53bf66e96dae9553e637fa69e8835365_icgraph" id="avgic_8h_a53bf66e96dae9553e637fa69e8835365_icgraph">
<area shape="rect" title=" " alt="" coords="3419,357,3565,383"/>
<area shape="rect" href="vgic-irqfd_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="3261,357,3371,383"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="3020,331,3213,358"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="3031,382,3203,409"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="2820,357,2972,383"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="2617,331,2772,358"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="2388,311,2569,352"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="2263,306,2340,333"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="2065,357,2176,383"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="2035,255,2206,282"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="2027,306,2215,333"/>
<area shape="rect" href="vgic-v2_8c.html#ac8de91a1f816dcd3b3edba1d074a1aca" title=" " alt="" coords="2031,129,2210,155"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="1807,357,1959,383"/>
<area shape="rect" href="pmu-emul_8c.html#ac79256eb94d7599687d3294cd40d10b4" title=" " alt="" coords="653,407,831,434"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="1571,262,1740,289"/>
<area shape="rect" href="arm_8c.html#a1cc94da0709805c40af7785f8c5811bf" title=" " alt="" coords="1571,211,1740,238"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="1587,458,1724,485"/>
<area shape="rect" href="pmu-emul_8c.html#ab0f1f020b6774de3fb4ff4c8b4e45a5c" title=" " alt="" coords="412,458,596,485"/>
<area shape="rect" href="pmu-emul_8c.html#ae6434d5e6ad74c608886c368e56d67bc" title=" " alt="" coords="413,407,595,434"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,331,364,358"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,154,129,181"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="1330,58,1514,85"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="1326,174,1518,201"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="1339,225,1505,267"/>
<area shape="rect" href="arch__timer_8c.html#a11b9b6e6338bbec6085332661c934e91" title=" " alt="" coords="888,114,1059,141"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="1363,291,1481,318"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="1331,346,1513,373"/>
<area shape="rect" href="arch__timer_8c.html#a27c9feb35e6d7126c054c3325fea59b0" title=" " alt="" coords="1114,57,1266,83"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="909,55,1037,82"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="686,53,798,79"/>
<area shape="rect" href="arch__timer_8c.html#a4bf6ac76380146820b45b06feb3eab27" title=" " alt="" coords="1107,226,1273,253"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="894,213,1053,239"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="644,154,840,181"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="669,205,815,231"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="677,103,807,130"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="685,255,799,282"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="460,306,548,333"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="416,53,592,79"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="189,82,352,109"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="423,230,585,257"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="191,154,350,181"/>
<area shape="rect" href="arch__timer_8c.html#a0209ad4256c7a1fd5ea70b6abe030954" title=" " alt="" coords="1107,284,1273,325"/>
<area shape="rect" href="sys__regs_8c.html#a9457451d95fa776f653cff6c2a8d31f9" title=" " alt="" coords="902,291,1045,318"/>
<area shape="rect" href="arch__timer_8c.html#a6ae73bff466fcdc60319f9726d53b571" title=" " alt="" coords="1107,357,1273,383"/>
<area shape="rect" href="vgic-irqfd_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="1321,458,1523,485"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="1819,255,1948,282"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="1819,205,1948,231"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="1818,306,1949,333"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="1788,53,1979,79"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="181,5,360,47"/>
</map>
</div>

</div>
</div>
<a id="aff5a21379ddd3353c5f0a642986e6379"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff5a21379ddd3353c5f0a642986e6379">&#9670;&nbsp;</a></span>vgic_its_inv_lpi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_its_inv_lpi </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct vgic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-its_8c_source.html#l01323">1323</a> of file <a class="el" href="vgic-its_8c_source.html">vgic-its.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;{</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="vgic-its_8c.html#a423c5139315e14ce4ec9f66ae4abb88c">update_lpi_config</a>(kvm, irq, NULL, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;}</div>
<div class="ttc" id="avgic-its_8c_html_a423c5139315e14ce4ec9f66ae4abb88c"><div class="ttname"><a href="vgic-its_8c.html#a423c5139315e14ce4ec9f66ae4abb88c">update_lpi_config</a></div><div class="ttdeci">static int update_lpi_config(struct kvm *kvm, struct vgic_irq *irq, struct kvm_vcpu *filter_vcpu, bool needs_inv)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l00280">vgic-its.c:280</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_aff5a21379ddd3353c5f0a642986e6379_cgraph.png" border="0" usemap="#avgic_8h_aff5a21379ddd3353c5f0a642986e6379_cgraph" alt=""/></div>
<map name="avgic_8h_aff5a21379ddd3353c5f0a642986e6379_cgraph" id="avgic_8h_aff5a21379ddd3353c5f0a642986e6379_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,128,108"/>
<area shape="rect" href="vgic-its_8c.html#a423c5139315e14ce4ec9f66ae4abb88c" title=" " alt="" coords="176,81,312,108"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="360,81,531,108"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="589,31,711,57"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="583,81,717,108"/>
<area shape="rect" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247" title=" " alt="" coords="579,132,721,159"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="769,5,977,32"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="797,56,950,83"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="815,132,931,159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_aff5a21379ddd3353c5f0a642986e6379_icgraph.png" border="0" usemap="#avgic_8h_aff5a21379ddd3353c5f0a642986e6379_icgraph" alt=""/></div>
<map name="avgic_8h_aff5a21379ddd3353c5f0a642986e6379_icgraph" id="avgic_8h_aff5a21379ddd3353c5f0a642986e6379_icgraph">
<area shape="rect" title=" " alt="" coords="971,60,1093,87"/>
<area shape="rect" href="vgic-its_8c.html#a17e42d11e1d03960c5978d7285c7cb93" title=" " alt="" coords="737,35,923,61"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#aa268002fc305866e42157249254372cb" title=" " alt="" coords="741,85,919,112"/>
<area shape="rect" href="vgic-its_8c.html#aa34e3683d822366f431b02b940f35b47" title=" " alt="" coords="495,35,689,61"/>
<area shape="rect" href="vgic-its_8c.html#a884625a59420fc6638841dcfecfa789f" title=" " alt="" coords="239,35,447,61"/>
<area shape="rect" href="vgic-its_8c.html#a5a3faae3829450972ffb2d701407c8fb" title=" " alt="" coords="5,5,191,32"/>
<area shape="rect" href="vgic-its_8c.html#a9ca22518cb44ebb3e3fadd8563431a41" title=" " alt="" coords="19,57,177,98"/>
</map>
</div>

</div>
</div>
<a id="a922a99eb2d73f90e4fcb4cf7c52f0518"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a922a99eb2d73f90e4fcb4cf7c52f0518">&#9670;&nbsp;</a></span>vgic_its_invalidate_cache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_its_invalidate_cache </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-its_8c_source.html#l00659">659</a> of file <a class="el" href="vgic-its_8c_source.html">vgic-its.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;{</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keyword">struct </span>vgic_dist *dist = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keyword">struct </span><a class="code" href="structvgic__translation__cache__entry.html">vgic_translation_cache_entry</a> *cte;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160; </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    raw_spin_lock_irqsave(&amp;dist-&gt;lpi_list_lock, flags);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    list_for_each_entry(cte, &amp;dist-&gt;lpi_translation_cache, <a class="code" href="structvgic__translation__cache__entry.html#a97a1ca8e0d8523621cd0930931c7ed77">entry</a>) {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">         * If we hit a NULL entry, there is nothing after this</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">         * point.</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <span class="keywordflow">if</span> (!cte-&gt;<a class="code" href="structvgic__translation__cache__entry.html#ad7cce9aa5e1f0a024bb698ea6d262f5a">irq</a>)</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <a class="code" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406">__vgic_put_lpi_locked</a>(kvm, cte-&gt;<a class="code" href="structvgic__translation__cache__entry.html#ad7cce9aa5e1f0a024bb698ea6d262f5a">irq</a>);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        cte-&gt;<a class="code" href="structvgic__translation__cache__entry.html#ad7cce9aa5e1f0a024bb698ea6d262f5a">irq</a> = NULL;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    }</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    raw_spin_unlock_irqrestore(&amp;dist-&gt;lpi_list_lock, flags);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;}</div>
<div class="ttc" id="astructvgic__translation__cache__entry_html"><div class="ttname"><a href="structvgic__translation__cache__entry.html">vgic_translation_cache_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l00148">vgic-its.c:148</a></div></div>
<div class="ttc" id="astructvgic__translation__cache__entry_html_a97a1ca8e0d8523621cd0930931c7ed77"><div class="ttname"><a href="structvgic__translation__cache__entry.html#a97a1ca8e0d8523621cd0930931c7ed77">vgic_translation_cache_entry::entry</a></div><div class="ttdeci">struct list_head entry</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l00145">vgic-its.c:149</a></div></div>
<div class="ttc" id="astructvgic__translation__cache__entry_html_ad7cce9aa5e1f0a024bb698ea6d262f5a"><div class="ttname"><a href="structvgic__translation__cache__entry.html#ad7cce9aa5e1f0a024bb698ea6d262f5a">vgic_translation_cache_entry::irq</a></div><div class="ttdeci">struct vgic_irq * irq</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l00153">vgic-its.c:153</a></div></div>
<div class="ttc" id="avgic_8c_html_affa1a20a5bd9d67dc546c1ccaace3406"><div class="ttname"><a href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406">__vgic_put_lpi_locked</a></div><div class="ttdeci">void __vgic_put_lpi_locked(struct kvm *kvm, struct vgic_irq *irq)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8c_source.html#l00126">vgic.c:126</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a922a99eb2d73f90e4fcb4cf7c52f0518_cgraph.png" border="0" usemap="#avgic_8h_a922a99eb2d73f90e4fcb4cf7c52f0518_cgraph" alt=""/></div>
<map name="avgic_8h_a922a99eb2d73f90e4fcb4cf7c52f0518_cgraph" id="avgic_8h_a922a99eb2d73f90e4fcb4cf7c52f0518_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,149,47"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="197,13,360,39"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="408,13,536,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a922a99eb2d73f90e4fcb4cf7c52f0518_icgraph.png" border="0" usemap="#avgic_8h_a922a99eb2d73f90e4fcb4cf7c52f0518_icgraph" alt=""/></div>
<map name="avgic_8h_a922a99eb2d73f90e4fcb4cf7c52f0518_icgraph" id="avgic_8h_a922a99eb2d73f90e4fcb4cf7c52f0518_icgraph">
<area shape="rect" title=" " alt="" coords="1867,187,2011,228"/>
<area shape="rect" href="vgic-its_8c.html#a4d64251bff41fe2045857ab6c2da7b44" title=" " alt="" coords="1391,204,1550,245"/>
<area shape="rect" href="vgic-its_8c.html#a5a3faae3829450972ffb2d701407c8fb" title=" " alt="" coords="633,11,818,38"/>
<area shape="rect" href="vgic-its_8c.html#a5a1b172537c8f671ba45bb8659691a2e" title=" " alt="" coords="1370,51,1571,78"/>
<area shape="rect" href="vgic-its_8c.html#a3887f6b0b2f941a1254aa6ebfe40595b" title=" " alt="" coords="1640,103,1799,144"/>
<area shape="rect" href="vgic-its_8c.html#aa05ff0163aa7da52db4a3f766e2f84e3" title=" " alt="" coords="1620,169,1819,195"/>
<area shape="rect" href="vgic-its_8c.html#a9f17b8d0d381f88b2962db836635c00b" title=" " alt="" coords="1642,270,1797,297"/>
<area shape="rect" href="vgic-its_8c.html#a58207180090221f6c6529d3c4acad96b" title=" " alt="" coords="1645,321,1794,363"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a2f4cb3a37ad0e3cdd4cfdf827126e369" title=" " alt="" coords="1624,387,1815,414"/>
<area shape="rect" href="vgic-its_8c.html#aa34e3683d822366f431b02b940f35b47" title=" " alt="" coords="1127,102,1321,129"/>
<area shape="rect" href="vgic-its_8c.html#a884625a59420fc6638841dcfecfa789f" title=" " alt="" coords="871,81,1079,107"/>
<area shape="rect" href="vgic-its_8c.html#a9ca22518cb44ebb3e3fadd8563431a41" title=" " alt="" coords="647,73,804,115"/>
<area shape="rect" href="vgic-its_8c.html#a5710caeea658bae04af5921ad24d70ff" title=" " alt="" coords="1369,270,1572,297"/>
<area shape="rect" href="vgic-its_8c.html#acc10fdd32e19bedcd91b42e8d531b15e" title=" " alt="" coords="1379,321,1562,347"/>
<area shape="rect" href="vgic-its_8c.html#a4997382710b636b6ed0c42dc45a9619f" title=" " alt="" coords="1394,397,1547,423"/>
<area shape="rect" href="vgic-its_8c.html#aece540aa9abff87b4e56b54a51f397a3" title=" " alt="" coords="1160,245,1288,271"/>
<area shape="rect" href="vgic-its_8c.html#ab831db5919be28a55eee7cbcef428d60" title=" " alt="" coords="1168,295,1280,322"/>
<area shape="rect" href="vgic-its_8c.html#af449d10651b060f351bd851bd8510a89" title=" " alt="" coords="887,389,1062,431"/>
<area shape="rect" href="vgic-its_8c.html#a4d58bbcf55fd798c0d719ba5f124d273" title=" " alt="" coords="1145,179,1303,220"/>
<area shape="rect" href="vgic-its_8c.html#aea4f12030d05c23cceac65c09a759cb0" title=" " alt="" coords="925,295,1025,322"/>
<area shape="rect" href="vgic-its_8c.html#a447c6440b22a131380c55c753c5b9004" title=" " alt="" coords="661,295,790,322"/>
<area shape="rect" href="vgic-its_8c.html#ad36fb1dd1774b0bc3d75922b8c838bf5" title=" " alt="" coords="628,397,823,423"/>
<area shape="rect" href="vgic-its_8c.html#a87b2c73a149f9bc832e5b881d4883ca1" title=" " alt="" coords="1167,397,1281,423"/>
<area shape="rect" href="vgic-init_8c.html#a814da4f59c826266ad54a8b5aa870de6" title=" " alt="" coords="1385,473,1557,499"/>
<area shape="rect" href="vgic-init_8c.html#af08e0c3b0309dbe4472ed185cd2b9e72" title=" " alt="" coords="1153,498,1295,525"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="889,498,1060,525"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="879,553,1070,579"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="453,501,580,527"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="658,447,793,474"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="212,523,405,550"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="459,446,574,473"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="234,371,383,398"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="226,422,391,449"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="231,473,386,499"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="241,321,376,347"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="5,371,164,398"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="636,549,815,591"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="455,557,579,583"/>
</map>
</div>

</div>
</div>
<a id="aebd2d2ca133c7abccfd64534c1258020"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebd2d2ca133c7abccfd64534c1258020">&#9670;&nbsp;</a></span>vgic_its_invall()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_its_invall </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>vgic_its_invall - invalidate all LPIs targetting a given vcpu @vcpu: the vcpu for which the RD is targetted by an invalidation</p>
<p>Contrary to the INVALL command, this targets a RD instead of a collection, and we don't need to hold the its_lock, since no ITS is involved here. </p>

<p class="definition">Definition at line <a class="el" href="vgic-its_8c_source.html#l01355">1355</a> of file <a class="el" href="vgic-its_8c_source.html">vgic-its.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;{</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="keyword">struct </span>kvm *kvm = vcpu-&gt;kvm;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordtype">int</span> irq_count, i = 0;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    u32 *intids;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160; </div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    irq_count = <a class="code" href="vgic-its_8c.html#a40cc55ab76a861e01174f3b73f396afc">vgic_copy_lpi_list</a>(kvm, vcpu, &amp;intids);</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <span class="keywordflow">if</span> (irq_count &lt; 0)</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        <span class="keywordflow">return</span> irq_count;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160; </div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; irq_count; i++) {</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        <span class="keyword">struct </span>vgic_irq *irq = <a class="code" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516">vgic_get_irq</a>(kvm, NULL, intids[i]);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        <span class="keywordflow">if</span> (!irq)</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        <a class="code" href="vgic-its_8c.html#a423c5139315e14ce4ec9f66ae4abb88c">update_lpi_config</a>(kvm, irq, vcpu, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        <a class="code" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5">vgic_put_irq</a>(kvm, irq);</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    }</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160; </div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    kfree(intids);</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160; </div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <span class="keywordflow">if</span> (vcpu-&gt;arch.vgic_cpu.vgic_v3.its_vpe.its_vm)</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;        its_invall_vpe(&amp;vcpu-&gt;arch.vgic_cpu.vgic_v3.its_vpe);</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160; </div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;}</div>
<div class="ttc" id="avgic-its_8c_html_a40cc55ab76a861e01174f3b73f396afc"><div class="ttname"><a href="vgic-its_8c.html#a40cc55ab76a861e01174f3b73f396afc">vgic_copy_lpi_list</a></div><div class="ttdeci">int vgic_copy_lpi_list(struct kvm *kvm, struct kvm_vcpu *vcpu, u32 **intid_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l00319">vgic-its.c:319</a></div></div>
<div class="ttc" id="avgic_8c_html_a7f38a266ef3def3202e7e04aa40fd516"><div class="ttname"><a href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516">vgic_get_irq</a></div><div class="ttdeci">struct vgic_irq * vgic_get_irq(struct kvm *kvm, struct kvm_vcpu *vcpu, u32 intid)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8c_source.html#l00092">vgic.c:92</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_aebd2d2ca133c7abccfd64534c1258020_cgraph.png" border="0" usemap="#avgic_8h_aebd2d2ca133c7abccfd64534c1258020_cgraph" alt=""/></div>
<map name="avgic_8h_aebd2d2ca133c7abccfd64534c1258020_cgraph" id="avgic_8h_aebd2d2ca133c7abccfd64534c1258020_cgraph">
<area shape="rect" title=" " alt="" coords="5,176,120,203"/>
<area shape="rect" href="vgic-its_8c.html#a423c5139315e14ce4ec9f66ae4abb88c" title=" " alt="" coords="169,100,305,127"/>
<area shape="rect" href="vgic-its_8c.html#a40cc55ab76a861e01174f3b73f396afc" title=" " alt="" coords="168,151,305,177"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="186,201,287,228"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="186,252,287,279"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="353,104,524,131"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="582,56,705,83"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="576,164,711,191"/>
<area shape="rect" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247" title=" " alt="" coords="572,107,715,133"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="763,5,971,32"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="790,56,943,83"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="809,107,925,133"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="389,176,489,203"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="357,252,520,279"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="579,252,707,279"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_aebd2d2ca133c7abccfd64534c1258020_icgraph.png" border="0" usemap="#avgic_8h_aebd2d2ca133c7abccfd64534c1258020_icgraph" alt=""/></div>
<map name="avgic_8h_aebd2d2ca133c7abccfd64534c1258020_icgraph" id="avgic_8h_aebd2d2ca133c7abccfd64534c1258020_icgraph">
<area shape="rect" title=" " alt="" coords="963,64,1077,91"/>
<area shape="rect" href="vgic-its_8c.html#aed7b78d235e5b86f40ecb06fb0af0889" title=" " alt="" coords="747,27,905,69"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a14d4cb37d23ef8aaa7174fcc8ed53b47" title=" " alt="" coords="737,93,915,120"/>
<area shape="rect" href="vgic-its_8c.html#aa34e3683d822366f431b02b940f35b47" title=" " alt="" coords="495,35,689,61"/>
<area shape="rect" href="vgic-its_8c.html#a884625a59420fc6638841dcfecfa789f" title=" " alt="" coords="239,35,447,61"/>
<area shape="rect" href="vgic-its_8c.html#a5a3faae3829450972ffb2d701407c8fb" title=" " alt="" coords="5,5,191,32"/>
<area shape="rect" href="vgic-its_8c.html#a9ca22518cb44ebb3e3fadd8563431a41" title=" " alt="" coords="19,57,177,98"/>
</map>
</div>

</div>
</div>
<a id="a3fe23d687675cef46a95e36cf14d04e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fe23d687675cef46a95e36cf14d04e1">&#9670;&nbsp;</a></span>vgic_its_resolve_lpi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_its_resolve_lpi </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct vgic_its *&#160;</td>
          <td class="paramname"><em>its</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>devid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>eventid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct vgic_irq **&#160;</td>
          <td class="paramname"><em>irq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-its_8c_source.html#l00682">682</a> of file <a class="el" href="vgic-its_8c_source.html">vgic-its.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;{</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keyword">struct </span><a class="code" href="structits__ite.html">its_ite</a> *ite;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">if</span> (!its-&gt;enabled)</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="keywordflow">return</span> -EBUSY;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    ite = <a class="code" href="vgic-its_8c.html#ae32cde43818922d2ecf800a3de102b75">find_ite</a>(its, devid, eventid);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordflow">if</span> (!ite || !<a class="code" href="vgic-its_8c.html#aea638a398fb308ffa9e4f1f46e348616">its_is_collection_mapped</a>(ite-&gt;<a class="code" href="structits__ite.html#af0d83c26332bff371130f9092ebc3bb3">collection</a>))</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keywordflow">return</span> E_ITS_INT_UNMAPPED_INTERRUPT;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    vcpu = <a class="code" href="vgic-its_8c.html#a0fb230e293b92c9fb746ad7b97ac68d5">collection_to_vcpu</a>(kvm, ite-&gt;<a class="code" href="structits__ite.html#af0d83c26332bff371130f9092ebc3bb3">collection</a>);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordflow">if</span> (!vcpu)</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <span class="keywordflow">return</span> E_ITS_INT_UNMAPPED_INTERRUPT;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="vgic-mmio-v3_8c.html#aa37f9ed0ed7921675bc4167d4a9d9261">vgic_lpis_enabled</a>(vcpu))</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">return</span> -EBUSY;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <a class="code" href="vgic-its_8c.html#ad9756268e1c22946f868e3255f916aa6">vgic_its_cache_translation</a>(kvm, its, devid, eventid, ite-&gt;<a class="code" href="structits__ite.html#a74dd4db90589f35432c21d20a0f37a80">irq</a>);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    *<a class="code" href="structits__ite.html#a74dd4db90589f35432c21d20a0f37a80">irq</a> = ite-&gt;<a class="code" href="structits__ite.html#a74dd4db90589f35432c21d20a0f37a80">irq</a>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;}</div>
<div class="ttc" id="astructits__ite_html"><div class="ttname"><a href="structits__ite.html">its_ite</a></div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l00140">vgic-its.c:140</a></div></div>
<div class="ttc" id="astructits__ite_html_a74dd4db90589f35432c21d20a0f37a80"><div class="ttname"><a href="structits__ite.html#a74dd4db90589f35432c21d20a0f37a80">its_ite::irq</a></div><div class="ttdeci">struct vgic_irq * irq</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l00143">vgic-its.c:143</a></div></div>
<div class="ttc" id="astructits__ite_html_af0d83c26332bff371130f9092ebc3bb3"><div class="ttname"><a href="structits__ite.html#af0d83c26332bff371130f9092ebc3bb3">its_ite::collection</a></div><div class="ttdeci">struct its_collection * collection</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l00144">vgic-its.c:144</a></div></div>
<div class="ttc" id="avgic-its_8c_html_a0fb230e293b92c9fb746ad7b97ac68d5"><div class="ttname"><a href="vgic-its_8c.html#a0fb230e293b92c9fb746ad7b97ac68d5">collection_to_vcpu</a></div><div class="ttdeci">static struct kvm_vcpu * collection_to_vcpu(struct kvm *kvm, struct its_collection *col)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l00381">vgic-its.c:381</a></div></div>
<div class="ttc" id="avgic-its_8c_html_ad9756268e1c22946f868e3255f916aa6"><div class="ttname"><a href="vgic-its_8c.html#ad9756268e1c22946f868e3255f916aa6">vgic_its_cache_translation</a></div><div class="ttdeci">static void vgic_its_cache_translation(struct kvm *kvm, struct vgic_its *its, u32 devid, u32 eventid, struct vgic_irq *irq)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l00606">vgic-its.c:606</a></div></div>
<div class="ttc" id="avgic-its_8c_html_ae32cde43818922d2ecf800a3de102b75"><div class="ttname"><a href="vgic-its_8c.html#ae32cde43818922d2ecf800a3de102b75">find_ite</a></div><div class="ttdeci">static struct its_ite * find_ite(struct vgic_its *its, u32 device_id, u32 event_id)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l00226">vgic-its.c:226</a></div></div>
<div class="ttc" id="avgic-its_8c_html_aea638a398fb308ffa9e4f1f46e348616"><div class="ttname"><a href="vgic-its_8c.html#aea638a398fb308ffa9e4f1f46e348616">its_is_collection_mapped</a></div><div class="ttdeci">#define its_is_collection_mapped(coll)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l00137">vgic-its.c:137</a></div></div>
<div class="ttc" id="avgic-mmio-v3_8c_html_aa37f9ed0ed7921675bc4167d4a9d9261"><div class="ttname"><a href="vgic-mmio-v3_8c.html#aa37f9ed0ed7921675bc4167d4a9d9261">vgic_lpis_enabled</a></div><div class="ttdeci">bool vgic_lpis_enabled(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v3_8c_source.html#l00238">vgic-mmio-v3.c:238</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a3fe23d687675cef46a95e36cf14d04e1_cgraph.png" border="0" usemap="#avgic_8h_a3fe23d687675cef46a95e36cf14d04e1_cgraph" alt=""/></div>
<map name="avgic_8h_a3fe23d687675cef46a95e36cf14d04e1_cgraph" id="avgic_8h_a3fe23d687675cef46a95e36cf14d04e1_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,156,108"/>
<area shape="rect" href="vgic-its_8c.html#a0fb230e293b92c9fb746ad7b97ac68d5" title=" " alt="" coords="230,5,373,32"/>
<area shape="rect" href="vgic-its_8c.html#ae32cde43818922d2ecf800a3de102b75" title=" " alt="" coords="266,56,337,83"/>
<area shape="rect" href="vgic-its_8c.html#ad9756268e1c22946f868e3255f916aa6" title=" " alt="" coords="204,107,399,133"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#aa37f9ed0ed7921675bc4167d4a9d9261" title=" " alt="" coords="232,157,371,184"/>
<area shape="rect" href="vgic-its_8c.html#aeb2ca1f1a8fef2826c3c7e466dad2cb7" title=" " alt="" coords="475,31,594,57"/>
<area shape="rect" href="vgic-its_8c.html#aa5825fcbd841b62853870d25976d018b" title=" " alt="" coords="447,81,623,108"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="453,132,616,159"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="467,183,602,209"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="671,132,799,159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a3fe23d687675cef46a95e36cf14d04e1_icgraph.png" border="0" usemap="#avgic_8h_a3fe23d687675cef46a95e36cf14d04e1_icgraph" alt=""/></div>
<map name="avgic_8h_a3fe23d687675cef46a95e36cf14d04e1_icgraph" id="avgic_8h_a3fe23d687675cef46a95e36cf14d04e1_icgraph">
<area shape="rect" title=" " alt="" coords="3381,234,3532,261"/>
<area shape="rect" href="vgic-v4_8c.html#a48b85c50461cf6bb5b295c722f7e08f1" title=" " alt="" coords="3113,177,3325,203"/>
<area shape="rect" href="vgic-v4_8c.html#a37e5e1c016cf4c05c177edbee4851062" title=" " alt="" coords="3105,234,3333,261"/>
<area shape="rect" href="vgic-its_8c.html#ad62375be0591178764e98b79cd7217bf" title=" " alt="" coords="3143,293,3296,319"/>
<area shape="rect" href="arm_8c.html#ad039be44476ba96d282643b616303b79" title=" " alt="" coords="2885,161,3047,203"/>
<area shape="rect" href="arm_8c.html#af9eeefc9a16f01b4a563c4e7164bb242" title=" " alt="" coords="2885,227,3047,268"/>
<area shape="rect" href="vgic-its_8c.html#aa8ac1f6e44896244e074a9bd2448dd31" title=" " alt="" coords="2875,293,3057,319"/>
<area shape="rect" href="vgic-its_8c.html#a53bf66e96dae9553e637fa69e8835365" title=" " alt="" coords="2893,343,3039,370"/>
<area shape="rect" href="vgic-its_8c.html#aa34e3683d822366f431b02b940f35b47" title=" " alt="" coords="2632,289,2827,315"/>
<area shape="rect" href="vgic-its_8c.html#a884625a59420fc6638841dcfecfa789f" title=" " alt="" coords="2376,285,2584,311"/>
<area shape="rect" href="vgic-its_8c.html#a5a3faae3829450972ffb2d701407c8fb" title=" " alt="" coords="2143,226,2328,253"/>
<area shape="rect" href="vgic-its_8c.html#a9ca22518cb44ebb3e3fadd8563431a41" title=" " alt="" coords="2157,277,2314,319"/>
<area shape="rect" href="vgic-irqfd_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="2675,343,2784,370"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="2383,394,2577,421"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="2394,343,2566,370"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="2159,343,2311,370"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="1940,293,2095,319"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="1711,260,1892,301"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="1585,242,1663,269"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="1388,191,1499,218"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="1358,242,1529,269"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="1349,293,1537,319"/>
<area shape="rect" href="vgic-v2_8c.html#ac8de91a1f816dcd3b3edba1d074a1aca" title=" " alt="" coords="1354,78,1533,105"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="1130,191,1282,218"/>
<area shape="rect" href="pmu-emul_8c.html#ac79256eb94d7599687d3294cd40d10b4" title=" " alt="" coords="655,103,834,130"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="893,255,1063,282"/>
<area shape="rect" href="arm_8c.html#a1cc94da0709805c40af7785f8c5811bf" title=" " alt="" coords="893,191,1063,218"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="909,394,1047,421"/>
<area shape="rect" href="pmu-emul_8c.html#ab0f1f020b6774de3fb4ff4c8b4e45a5c" title=" " alt="" coords="412,53,596,79"/>
<area shape="rect" href="pmu-emul_8c.html#ae6434d5e6ad74c608886c368e56d67bc" title=" " alt="" coords="413,103,595,130"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,93,364,119"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,53,129,79"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="653,205,837,231"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="649,373,841,399"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="661,307,828,348"/>
<area shape="rect" href="arch__timer_8c.html#a11b9b6e6338bbec6085332661c934e91" title=" " alt="" coords="659,423,830,450"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="685,255,804,282"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="653,154,836,181"/>
<area shape="rect" href="arch__timer_8c.html#a27c9feb35e6d7126c054c3325fea59b0" title=" " alt="" coords="428,205,580,231"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="207,205,335,231"/>
<area shape="rect" href="arch__timer_8c.html#a4bf6ac76380146820b45b06feb3eab27" title=" " alt="" coords="421,322,587,349"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="439,423,569,450"/>
<area shape="rect" href="arch__timer_8c.html#a0209ad4256c7a1fd5ea70b6abe030954" title=" " alt="" coords="421,256,587,297"/>
<area shape="rect" href="arch__timer_8c.html#a6ae73bff466fcdc60319f9726d53b571" title=" " alt="" coords="421,154,587,181"/>
<area shape="rect" href="vgic-irqfd_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="644,474,845,501"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="1141,293,1271,319"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="1141,242,1271,269"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="1141,343,1271,370"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="1111,34,1301,61"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="181,5,360,47"/>
</map>
</div>

</div>
</div>
<a id="afd47a938061d223b085c0ca0bed6aa71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd47a938061d223b085c0ca0bed6aa71">&#9670;&nbsp;</a></span>vgic_kick_vcpus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_kick_vcpus </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8c_source.html#l01005">1005</a> of file <a class="el" href="vgic_8c_source.html">vgic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;{</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> c;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment">     * We&#39;ve injected an interrupt, time to find out who deserves</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment">     * a good kick...</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    kvm_for_each_vcpu(c, vcpu, kvm) {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vgic_8c.html#a3059bfcee1ad30f581150d06c07d68e8">kvm_vgic_vcpu_pending_irq</a>(vcpu)) {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            kvm_make_request(KVM_REQ_IRQ_PENDING, vcpu);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            <a class="code" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44">kvm_vcpu_kick</a>(vcpu);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        }</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    }</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_ac82f28c95da4a0cc137c5a37f08d1f44"><div class="ttname"><a href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44">kvm_vcpu_kick</a></div><div class="ttdeci">void kvm_vcpu_kick(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l03931">kvm_main.c:3931</a></div></div>
<div class="ttc" id="avgic_8c_html_a3059bfcee1ad30f581150d06c07d68e8"><div class="ttname"><a href="vgic_8c.html#a3059bfcee1ad30f581150d06c07d68e8">kvm_vgic_vcpu_pending_irq</a></div><div class="ttdeci">int kvm_vgic_vcpu_pending_irq(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8c_source.html#l00971">vgic.c:971</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_afd47a938061d223b085c0ca0bed6aa71_cgraph.png" border="0" usemap="#avgic_8h_afd47a938061d223b085c0ca0bed6aa71_cgraph" alt=""/></div>
<map name="avgic_8h_afd47a938061d223b085c0ca0bed6aa71_cgraph" id="avgic_8h_afd47a938061d223b085c0ca0bed6aa71_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,133,108"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="223,56,346,83"/>
<area shape="rect" href="vgic_8c.html#a3059bfcee1ad30f581150d06c07d68e8" title=" " alt="" coords="181,107,388,133"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="436,5,644,32"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="463,56,617,83"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="482,107,598,133"/>
<area shape="rect" href="vgic-mmio_8c.html#ad275c2ef6d5f7f0d79f101a7dd6dda3a" title=" " alt="" coords="481,157,599,184"/>
<area shape="rect" href="vgic-v2_8c.html#aa825011d5b7d02e6b8f6c21746a5af39" title=" " alt="" coords="692,132,832,159"/>
<area shape="rect" href="vgic-v3_8c.html#a20f69ea757569fa58158ed4f097c1987" title=" " alt="" coords="692,183,832,209"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_afd47a938061d223b085c0ca0bed6aa71_icgraph.png" border="0" usemap="#avgic_8h_afd47a938061d223b085c0ca0bed6aa71_icgraph" alt=""/></div>
<map name="avgic_8h_afd47a938061d223b085c0ca0bed6aa71_icgraph" id="avgic_8h_afd47a938061d223b085c0ca0bed6aa71_icgraph">
<area shape="rect" title=" " alt="" coords="489,46,617,73"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a2acb707aa37dccb7a4d021632629f994" title=" " alt="" coords="247,17,441,43"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a496b87a9bc8e2c1a5aa2d9ba2e13cc10" title=" " alt="" coords="247,71,441,98"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a86125023f5d85776a3857a2b82dfd2ca" title=" " alt="" coords="5,5,199,47"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a566ddfae78ebf930568f0dcc4a1bea21" title=" " alt="" coords="5,71,199,112"/>
</map>
</div>

</div>
</div>
<a id="a3c860e1d043352d9a02f4780b58e5af6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c860e1d043352d9a02f4780b58e5af6">&#9670;&nbsp;</a></span>vgic_lazy_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_lazy_init </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>vgic_lazy_init: Lazy init is only allowed if the GIC exposed to the guest is a GICv2. A GICv3 must be explicitly initialized by userspace using the KVM_DEV_ARM_VGIC_GRP_CTRL KVM_DEVICE group. @kvm: kvm struct pointer </p>

<p class="definition">Definition at line <a class="el" href="vgic-init_8c_source.html#l00423">423</a> of file <a class="el" href="vgic-init_8c_source.html">vgic-init.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;{</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">if</span> (unlikely(!vgic_initialized(kvm))) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">         * We only provide the automatic initialization of the VGIC</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">         * for the legacy case of a GICv2. Any other type must</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">         * be explicitly initialized once setup with the respective</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">         * KVM device call.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">if</span> (kvm-&gt;arch.vgic.vgic_model != KVM_DEV_TYPE_ARM_VGIC_V2)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <span class="keywordflow">return</span> -EBUSY;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        mutex_lock(&amp;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        ret = <a class="code" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57">vgic_init</a>(kvm);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        mutex_unlock(&amp;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div>
<div class="ttc" id="avgic-init_8c_html_a39a12fe5ed5534efda33bb215a320a57"><div class="ttname"><a href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57">vgic_init</a></div><div class="ttdeci">int vgic_init(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-init_8c_source.html#l00262">vgic-init.c:262</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a3c860e1d043352d9a02f4780b58e5af6_cgraph.png" border="0" usemap="#avgic_8h_a3c860e1d043352d9a02f4780b58e5af6_cgraph" alt=""/></div>
<map name="avgic_8h_a3c860e1d043352d9a02f4780b58e5af6_cgraph" id="avgic_8h_a3c860e1d043352d9a02f4780b58e5af6_cgraph">
<area shape="rect" title=" " alt="" coords="5,477,116,504"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="164,477,241,504"/>
<area shape="rect" href="vgic-init_8c.html#a0f9be5cc88c88f6c0180c53b72818d3b" title=" " alt="" coords="308,5,452,32"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="289,142,471,183"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e" title=" " alt="" coords="1887,157,1989,184"/>
<area shape="rect" href="vgic-init_8c.html#a2eee0060a3bdcd2a9e8fe1451a3a3fc2" title=" " alt="" coords="293,579,467,605"/>
<area shape="rect" href="vgic-debug_8c.html#a42534d23071b4f3c441c5f82f9e5c1ce" title=" " alt="" coords="318,629,442,656"/>
<area shape="rect" href="vgic-its_8c.html#afd97b5d03d2b30ae4481443cdea2e739" title=" " alt="" coords="305,681,455,722"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a839b15883ba8f9de35a03ffce32fdf7f" title=" " alt="" coords="963,56,1157,83"/>
<area shape="rect" href="vgic-v4_8c.html#a802a906ad744a75b5af33bbd6b31237c" title=" " alt="" coords="330,528,430,555"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="533,149,687,176"/>
<area shape="rect" href="irqchip_8c.html#a5ae37186e6e6d1594767f83df8bab64a" title=" " alt="" coords="749,107,915,133"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="756,157,908,184"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="974,157,1146,184"/>
<area shape="rect" href="vgic-irqfd_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1245,157,1354,184"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="1231,320,1368,347"/>
<area shape="rect" href="vgic-irqfd_8c.html#a93415dbe2d5c7166c8f3f91be7c5d5da" title=" " alt="" coords="1441,107,1588,133"/>
<area shape="rect" href="vgic-its_8c.html#a53bf66e96dae9553e637fa69e8835365" title=" " alt="" coords="1441,284,1588,311"/>
<area shape="rect" href="vgic-its_8c.html#a352c8627ccf81a8154ae2275c7d50659" title=" " alt="" coords="1636,361,1804,402"/>
<area shape="rect" href="vgic-its_8c.html#ad62375be0591178764e98b79cd7217bf" title=" " alt="" coords="1643,309,1797,336"/>
<area shape="rect" href="vgic-its_8c.html#a94bbb30efc49ad5494a7f4b1410dbe01" title=" " alt="" coords="1659,259,1781,285"/>
<area shape="rect" href="vgic-its_8c.html#ab8e3bef933af0cc51b05259d801be26d" title=" " alt="" coords="2088,313,2251,340"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="1887,364,1989,391"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="1853,415,2023,441"/>
<area shape="rect" href="vgic-its_8c.html#aa5825fcbd841b62853870d25976d018b" title=" " alt="" coords="2331,263,2507,289"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="2351,364,2486,391"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="2337,313,2500,340"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="2571,313,2699,340"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="2108,604,2231,631"/>
<area shape="rect" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247" title=" " alt="" coords="2098,516,2241,543"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="2315,579,2523,605"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="2342,629,2495,656"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="2361,516,2477,543"/>
<area shape="rect" href="vgic-its_8c.html#a3fe23d687675cef46a95e36cf14d04e1" title=" " alt="" coords="1863,259,2013,285"/>
<area shape="rect" href="vgic-its_8c.html#a0fb230e293b92c9fb746ad7b97ac68d5" title=" " alt="" coords="2098,161,2241,188"/>
<area shape="rect" href="vgic-its_8c.html#ae32cde43818922d2ecf800a3de102b75" title=" " alt="" coords="2134,212,2205,239"/>
<area shape="rect" href="vgic-its_8c.html#ad9756268e1c22946f868e3255f916aa6" title=" " alt="" coords="2072,111,2267,137"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#aa37f9ed0ed7921675bc4167d4a9d9261" title=" " alt="" coords="2100,263,2239,289"/>
<area shape="rect" href="kvm__main_8c.html#acb4d46ae6cc918253046320805f63a95" title=" " alt="" coords="1859,208,2017,235"/>
<area shape="rect" href="kvm__main_8c.html#a94bf2e0af8d9af8807a6a92ffb01cc1c" title=" " alt="" coords="2074,60,2265,87"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="1644,427,1796,453"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="1887,465,1989,492"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="1883,567,1993,593"/>
<area shape="rect" href="vgic_8c.html#a19d9c44a40cc76ccbd25bd8e0ec38a08" title=" " alt="" coords="1852,516,2024,543"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="2119,465,2219,492"/>
<area shape="rect" href="vgic-v2_8c.html#a4e8ee3d5f7c8fadbf0a645df67a1c5a2" title=" " alt="" coords="549,629,671,656"/>
<area shape="rect" href="vgic-v3_8c.html#abe9a2245dfa0d76d61c99b60f714a513" title=" " alt="" coords="549,680,671,707"/>
<area shape="rect" href="vgic-v4_8c.html#af99c2f70dd91a57879b3a2f583e49a4a" title=" " alt="" coords="519,579,701,605"/>
<area shape="rect" href="vgic-v4_8c.html#ac805e466fa8f454112c11904ef8d41ce" title=" " alt="" coords="540,528,680,555"/>
<area shape="rect" href="vgic-v4_8c.html#ac22161596c9858cc700bab08c03fc422" title=" " alt="" coords="1205,600,1393,627"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a3c860e1d043352d9a02f4780b58e5af6_icgraph.png" border="0" usemap="#avgic_8h_a3c860e1d043352d9a02f4780b58e5af6_icgraph" alt=""/></div>
<map name="avgic_8h_a3c860e1d043352d9a02f4780b58e5af6_icgraph" id="avgic_8h_a3c860e1d043352d9a02f4780b58e5af6_icgraph">
<area shape="rect" title=" " alt="" coords="2403,505,2513,532"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="2203,505,2355,532"/>
<area shape="rect" href="pmu-emul_8c.html#ac79256eb94d7599687d3294cd40d10b4" title=" " alt="" coords="1067,56,1246,83"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="1985,419,2155,445"/>
<area shape="rect" href="arm_8c.html#a1cc94da0709805c40af7785f8c5811bf" title=" " alt="" coords="1985,505,2155,532"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="2001,589,2139,616"/>
<area shape="rect" href="pmu-emul_8c.html#ab0f1f020b6774de3fb4ff4c8b4e45a5c" title=" " alt="" coords="827,56,1011,83"/>
<area shape="rect" href="pmu-emul_8c.html#ae6434d5e6ad74c608886c368e56d67bc" title=" " alt="" coords="827,5,1010,32"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="591,132,778,159"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,208,129,235"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="1745,537,1929,564"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="1741,419,1933,445"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="1753,470,1920,511"/>
<area shape="rect" href="arch__timer_8c.html#a11b9b6e6338bbec6085332661c934e91" title=" " alt="" coords="1303,309,1473,336"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="1777,368,1896,395"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="1745,220,1928,247"/>
<area shape="rect" href="arch__timer_8c.html#a27c9feb35e6d7126c054c3325fea59b0" title=" " alt="" coords="1529,544,1681,571"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="1324,551,1452,577"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="629,563,741,589"/>
<area shape="rect" href="arch__timer_8c.html#a4bf6ac76380146820b45b06feb3eab27" title=" " alt="" coords="1521,427,1688,453"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1309,423,1467,449"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="1059,461,1255,488"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="1084,411,1229,437"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1092,309,1221,336"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="1099,512,1214,539"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="1113,208,1201,235"/>
<area shape="rect" href="handle__exit_8c.html#ae96aab7918301d55b908034db5855e3d" title=" " alt="" coords="617,512,752,539"/>
<area shape="rect" href="emulate-nested_8c.html#af5e2eb745d8ac6415fe941ebe754171d" title=" " alt="" coords="827,411,1010,437"/>
<area shape="rect" href="emulate-nested_8c.html#a5759b383dbf067b5e90235d5fd032ab5" title=" " alt="" coords="598,360,771,387"/>
<area shape="rect" href="handle__exit_8c.html#a5c24d46393da9651d3133e2377fd7a69" title=" " alt="" coords="637,411,733,437"/>
<area shape="rect" href="handle__exit_8c.html#aeaf983f5c40202edc8b07a76603330cd" title=" " alt="" coords="637,461,732,488"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="831,360,1007,387"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="603,309,766,336"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,259,336,285"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="838,208,999,235"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="384,310,543,351"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="879,512,958,539"/>
<area shape="rect" href="arch__timer_8c.html#a0209ad4256c7a1fd5ea70b6abe030954" title=" " alt="" coords="1521,361,1688,402"/>
<area shape="rect" href="sys__regs_8c.html#a9457451d95fa776f653cff6c2a8d31f9" title=" " alt="" coords="1317,368,1459,395"/>
<area shape="rect" href="arch__timer_8c.html#a6ae73bff466fcdc60319f9726d53b571" title=" " alt="" coords="1522,144,1687,171"/>
<area shape="rect" href="vgic-irqfd_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="1736,589,1937,616"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="1751,643,1923,669"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="1529,656,1681,683"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="1311,657,1465,684"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="1066,650,1247,691"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="880,664,957,691"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="629,765,740,792"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="599,613,770,640"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="591,664,779,691"/>
<area shape="rect" href="vgic-v2_8c.html#ac8de91a1f816dcd3b3edba1d074a1aca" title=" " alt="" coords="595,715,774,741"/>
</map>
</div>

</div>
</div>
<a id="a58207180090221f6c6529d3c4acad96b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58207180090221f6c6529d3c4acad96b">&#9670;&nbsp;</a></span>vgic_lpi_translation_cache_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_lpi_translation_cache_destroy </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-its_8c_source.html#l01927">1927</a> of file <a class="el" href="vgic-its_8c_source.html">vgic-its.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;{</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <span class="keyword">struct </span>vgic_dist *dist = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    <span class="keyword">struct </span><a class="code" href="structvgic__translation__cache__entry.html">vgic_translation_cache_entry</a> *cte, *tmp;</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160; </div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <a class="code" href="vgic-its_8c.html#a922a99eb2d73f90e4fcb4cf7c52f0518">vgic_its_invalidate_cache</a>(kvm);</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160; </div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    list_for_each_entry_safe(cte, tmp,</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;                 &amp;dist-&gt;lpi_translation_cache, <a class="code" href="structvgic__translation__cache__entry.html#a97a1ca8e0d8523621cd0930931c7ed77">entry</a>) {</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;        list_del(&amp;cte-&gt;<a class="code" href="structvgic__translation__cache__entry.html#a97a1ca8e0d8523621cd0930931c7ed77">entry</a>);</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;        kfree(cte);</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    }</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;}</div>
<div class="ttc" id="avgic-its_8c_html_a922a99eb2d73f90e4fcb4cf7c52f0518"><div class="ttname"><a href="vgic-its_8c.html#a922a99eb2d73f90e4fcb4cf7c52f0518">vgic_its_invalidate_cache</a></div><div class="ttdeci">void vgic_its_invalidate_cache(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l00659">vgic-its.c:659</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a58207180090221f6c6529d3c4acad96b_cgraph.png" border="0" usemap="#avgic_8h_a58207180090221f6c6529d3c4acad96b_cgraph" alt=""/></div>
<map name="avgic_8h_a58207180090221f6c6529d3c4acad96b_cgraph" id="avgic_8h_a58207180090221f6c6529d3c4acad96b_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,155,47"/>
<area shape="rect" href="vgic-its_8c.html#a922a99eb2d73f90e4fcb4cf7c52f0518" title=" " alt="" coords="203,5,347,47"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="395,13,557,39"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="605,13,733,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a58207180090221f6c6529d3c4acad96b_icgraph.png" border="0" usemap="#avgic_8h_a58207180090221f6c6529d3c4acad96b_icgraph" alt=""/></div>
<map name="avgic_8h_a58207180090221f6c6529d3c4acad96b_icgraph" id="avgic_8h_a58207180090221f6c6529d3c4acad96b_icgraph">
<area shape="rect" title=" " alt="" coords="1503,103,1652,145"/>
<area shape="rect" href="vgic-init_8c.html#a814da4f59c826266ad54a8b5aa870de6" title=" " alt="" coords="1283,111,1455,137"/>
<area shape="rect" href="vgic-init_8c.html#af08e0c3b0309dbe4472ed185cd2b9e72" title=" " alt="" coords="1093,111,1235,137"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="865,81,1035,108"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="855,136,1045,163"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="453,29,580,56"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="650,81,785,108"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="212,5,405,32"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="459,84,574,111"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="234,56,383,83"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="226,107,391,133"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="231,157,386,184"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="241,208,376,235"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="5,56,164,83"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="628,133,807,174"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="455,140,579,167"/>
</map>
</div>

</div>
</div>
<a id="afd97b5d03d2b30ae4481443cdea2e739"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd97b5d03d2b30ae4481443cdea2e739">&#9670;&nbsp;</a></span>vgic_lpi_translation_cache_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_lpi_translation_cache_init </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-its_8c_source.html#l01903">1903</a> of file <a class="el" href="vgic-its_8c_source.html">vgic-its.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;{</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <span class="keyword">struct </span>vgic_dist *dist = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sz;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160; </div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    <span class="keywordflow">if</span> (!list_empty(&amp;dist-&gt;lpi_translation_cache))</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160; </div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    sz = atomic_read(&amp;kvm-&gt;online_vcpus) * <a class="code" href="vgic-its_8c.html#a6aea5873ed4b193731fb13854910dcb3">LPI_DEFAULT_PCPU_CACHE_SIZE</a>;</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160; </div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; sz; i++) {</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;        <span class="keyword">struct </span><a class="code" href="structvgic__translation__cache__entry.html">vgic_translation_cache_entry</a> *cte;</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160; </div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;        <span class="comment">/* An allocation failure is not fatal */</span></div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;        cte = kzalloc(<span class="keyword">sizeof</span>(*cte), GFP_KERNEL_ACCOUNT);</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;        <span class="keywordflow">if</span> (WARN_ON(!cte))</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160; </div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;        INIT_LIST_HEAD(&amp;cte-&gt;<a class="code" href="structvgic__translation__cache__entry.html#a97a1ca8e0d8523621cd0930931c7ed77">entry</a>);</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;        list_add(&amp;cte-&gt;<a class="code" href="structvgic__translation__cache__entry.html#a97a1ca8e0d8523621cd0930931c7ed77">entry</a>, &amp;dist-&gt;lpi_translation_cache);</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    }</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;}</div>
<div class="ttc" id="avgic-its_8c_html_a6aea5873ed4b193731fb13854910dcb3"><div class="ttname"><a href="vgic-its_8c.html#a6aea5873ed4b193731fb13854910dcb3">LPI_DEFAULT_PCPU_CACHE_SIZE</a></div><div class="ttdeci">#define LPI_DEFAULT_PCPU_CACHE_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l01901">vgic-its.c:1901</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_afd97b5d03d2b30ae4481443cdea2e739_icgraph.png" border="0" usemap="#avgic_8h_afd97b5d03d2b30ae4481443cdea2e739_icgraph" alt=""/></div>
<map name="avgic_8h_afd97b5d03d2b30ae4481443cdea2e739_icgraph" id="avgic_8h_afd97b5d03d2b30ae4481443cdea2e739_icgraph">
<area shape="rect" title=" " alt="" coords="2864,547,3013,589"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="2717,529,2795,556"/>
<area shape="rect" href="vgic-its_8c.html#a76fe1acacf2cd949bea8091703c249fe" title=" " alt="" coords="2696,580,2816,607"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="2499,403,2609,429"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="2469,631,2639,657"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="2460,580,2648,607"/>
<area shape="rect" href="vgic-v2_8c.html#ac8de91a1f816dcd3b3edba1d074a1aca" title=" " alt="" coords="2465,529,2643,556"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="2241,377,2393,404"/>
<area shape="rect" href="pmu-emul_8c.html#ac79256eb94d7599687d3294cd40d10b4" title=" " alt="" coords="1086,412,1265,439"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="2004,159,2173,185"/>
<area shape="rect" href="arm_8c.html#a1cc94da0709805c40af7785f8c5811bf" title=" " alt="" coords="2004,377,2173,404"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="2020,327,2157,353"/>
<area shape="rect" href="pmu-emul_8c.html#ab0f1f020b6774de3fb4ff4c8b4e45a5c" title=" " alt="" coords="845,419,1029,445"/>
<area shape="rect" href="pmu-emul_8c.html#ae6434d5e6ad74c608886c368e56d67bc" title=" " alt="" coords="846,368,1029,395"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="611,317,797,344"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,317,129,344"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="1763,5,1947,32"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="1759,159,1951,185"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="1772,210,1939,251"/>
<area shape="rect" href="arch__timer_8c.html#a11b9b6e6338bbec6085332661c934e91" title=" " alt="" coords="1321,60,1492,87"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="1796,108,1915,135"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="1764,276,1947,303"/>
<area shape="rect" href="arch__timer_8c.html#a27c9feb35e6d7126c054c3325fea59b0" title=" " alt="" coords="1547,5,1699,32"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="1343,5,1471,32"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="1119,5,1231,32"/>
<area shape="rect" href="arch__timer_8c.html#a4bf6ac76380146820b45b06feb3eab27" title=" " alt="" coords="1540,173,1707,200"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1327,169,1486,196"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="1077,216,1273,243"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="1103,115,1248,141"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1111,64,1240,91"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="1118,165,1233,192"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="893,267,981,293"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="849,28,1025,55"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="623,75,785,101"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,133,336,160"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="857,195,1018,221"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="394,67,553,109"/>
<area shape="rect" href="arch__timer_8c.html#a0209ad4256c7a1fd5ea70b6abe030954" title=" " alt="" coords="1540,107,1707,149"/>
<area shape="rect" href="sys__regs_8c.html#a9457451d95fa776f653cff6c2a8d31f9" title=" " alt="" coords="1335,115,1478,141"/>
<area shape="rect" href="arch__timer_8c.html#a6ae73bff466fcdc60319f9726d53b571" title=" " alt="" coords="855,317,1020,344"/>
<area shape="rect" href="vgic-irqfd_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="1755,327,1956,353"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="1769,377,1941,404"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="1547,377,1699,404"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="1329,377,1484,404"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="1085,463,1266,505"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="2252,631,2381,657"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="2252,681,2381,708"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="2251,580,2382,607"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="2221,529,2412,556"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="384,449,563,490"/>
</map>
</div>

</div>
</div>
<a id="aa37f9ed0ed7921675bc4167d4a9d9261"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa37f9ed0ed7921675bc4167d4a9d9261">&#9670;&nbsp;</a></span>vgic_lpis_enabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vgic_lpis_enabled </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-mmio-v3_8c_source.html#l00238">238</a> of file <a class="el" href="vgic-mmio-v3_8c_source.html">vgic-mmio-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;{</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keyword">struct </span>vgic_cpu *vgic_cpu = &amp;vcpu-&gt;arch.vgic_cpu;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">return</span> atomic_read(&amp;vgic_cpu-&gt;ctlr) == GICR_CTLR_ENABLE_LPIS;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_aa37f9ed0ed7921675bc4167d4a9d9261_icgraph.png" border="0" usemap="#avgic_8h_aa37f9ed0ed7921675bc4167d4a9d9261_icgraph" alt=""/></div>
<map name="avgic_8h_aa37f9ed0ed7921675bc4167d4a9d9261_icgraph" id="avgic_8h_aa37f9ed0ed7921675bc4167d4a9d9261_icgraph">
<area shape="rect" title=" " alt="" coords="3411,258,3549,285"/>
<area shape="rect" href="vgic-its_8c.html#a3fe23d687675cef46a95e36cf14d04e1" title=" " alt="" coords="3185,157,3336,183"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a14d4cb37d23ef8aaa7174fcc8ed53b47" title=" " alt="" coords="3172,207,3349,234"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#aa268002fc305866e42157249254372cb" title=" " alt="" coords="3172,258,3349,285"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a73464061dcd480eca919531655f1fe7d" title=" " alt="" coords="3159,309,3363,335"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a16fe30f43e40da912459753baebddf3d" title=" " alt="" coords="3160,359,3361,386"/>
<area shape="rect" href="vgic-v4_8c.html#a48b85c50461cf6bb5b295c722f7e08f1" title=" " alt="" coords="2891,99,3103,126"/>
<area shape="rect" href="vgic-v4_8c.html#a37e5e1c016cf4c05c177edbee4851062" title=" " alt="" coords="2883,157,3111,183"/>
<area shape="rect" href="vgic-its_8c.html#ad62375be0591178764e98b79cd7217bf" title=" " alt="" coords="2920,215,3073,242"/>
<area shape="rect" href="arm_8c.html#ad039be44476ba96d282643b616303b79" title=" " alt="" coords="2662,84,2825,125"/>
<area shape="rect" href="arm_8c.html#af9eeefc9a16f01b4a563c4e7164bb242" title=" " alt="" coords="2662,149,2825,191"/>
<area shape="rect" href="vgic-its_8c.html#aa8ac1f6e44896244e074a9bd2448dd31" title=" " alt="" coords="2652,215,2835,242"/>
<area shape="rect" href="vgic-its_8c.html#a53bf66e96dae9553e637fa69e8835365" title=" " alt="" coords="2670,266,2817,293"/>
<area shape="rect" href="vgic-its_8c.html#aa34e3683d822366f431b02b940f35b47" title=" " alt="" coords="2409,211,2604,238"/>
<area shape="rect" href="vgic-its_8c.html#a884625a59420fc6638841dcfecfa789f" title=" " alt="" coords="2153,207,2361,234"/>
<area shape="rect" href="vgic-its_8c.html#a5a3faae3829450972ffb2d701407c8fb" title=" " alt="" coords="1920,149,2105,175"/>
<area shape="rect" href="vgic-its_8c.html#a9ca22518cb44ebb3e3fadd8563431a41" title=" " alt="" coords="1934,200,2091,241"/>
<area shape="rect" href="vgic-irqfd_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="2452,266,2561,293"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="2161,317,2354,343"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="2171,266,2343,293"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="1937,266,2089,293"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="1717,215,1872,242"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="1488,183,1669,224"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="1363,165,1440,191"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="1165,114,1276,141"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="1135,165,1306,191"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="1127,215,1315,242"/>
<area shape="rect" href="vgic-v2_8c.html#ac8de91a1f816dcd3b3edba1d074a1aca" title=" " alt="" coords="1131,38,1310,65"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="907,114,1059,141"/>
<area shape="rect" href="pmu-emul_8c.html#ac79256eb94d7599687d3294cd40d10b4" title=" " alt="" coords="661,114,840,141"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="666,266,835,293"/>
<area shape="rect" href="arm_8c.html#a1cc94da0709805c40af7785f8c5811bf" title=" " alt="" coords="666,63,835,90"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="682,317,819,343"/>
<area shape="rect" href="pmu-emul_8c.html#ab0f1f020b6774de3fb4ff4c8b4e45a5c" title=" " alt="" coords="421,114,605,141"/>
<area shape="rect" href="pmu-emul_8c.html#ae6434d5e6ad74c608886c368e56d67bc" title=" " alt="" coords="421,63,604,90"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,71,364,98"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,42,129,69"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="421,317,605,343"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="417,367,609,394"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="429,419,596,460"/>
<area shape="rect" href="arch__timer_8c.html#a11b9b6e6338bbec6085332661c934e91" title=" " alt="" coords="427,165,598,191"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="453,215,572,242"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="421,266,604,293"/>
<area shape="rect" href="arch__timer_8c.html#a27c9feb35e6d7126c054c3325fea59b0" title=" " alt="" coords="195,317,347,343"/>
<area shape="rect" href="vgic-irqfd_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="412,485,613,511"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="919,215,1048,242"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="919,165,1048,191"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="918,266,1049,293"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="888,25,1079,51"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="181,5,360,47"/>
</map>
</div>

</div>
</div>
<a id="a94bbb30efc49ad5494a7f4b1410dbe01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94bbb30efc49ad5494a7f4b1410dbe01">&#9670;&nbsp;</a></span>vgic_msi_to_its()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct vgic_its* vgic_msi_to_its </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_msi *&#160;</td>
          <td class="paramname"><em>msi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-its_8c_source.html#l00708">708</a> of file <a class="el" href="vgic-its_8c_source.html">vgic-its.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;{</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    u64 address;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keyword">struct </span>kvm_io_device *kvm_io_dev;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keyword">struct </span>vgic_io_device *iodev;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160; </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e">vgic_has_its</a>(kvm))</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="keywordflow">return</span> ERR_PTR(-ENODEV);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordflow">if</span> (!(msi-&gt;flags &amp; KVM_MSI_VALID_DEVID))</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="keywordflow">return</span> ERR_PTR(-EINVAL);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    address = (u64)msi-&gt;address_hi &lt;&lt; 32 | msi-&gt;address_lo;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    kvm_io_dev = <a class="code" href="kvm__main_8c.html#acb4d46ae6cc918253046320805f63a95">kvm_io_bus_get_dev</a>(kvm, KVM_MMIO_BUS, address);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">if</span> (!kvm_io_dev)</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="keywordflow">return</span> ERR_PTR(-EINVAL);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">if</span> (kvm_io_dev-&gt;ops != &amp;<a class="code" href="vgic-mmio_8c.html#aec0428e9a13ae48d45af461ec92b8005">kvm_io_gic_ops</a>)</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keywordflow">return</span> ERR_PTR(-EINVAL);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    iodev = container_of(kvm_io_dev, <span class="keyword">struct</span> vgic_io_device, dev);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">if</span> (iodev-&gt;iodev_type != IODEV_ITS)</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keywordflow">return</span> ERR_PTR(-EINVAL);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">return</span> iodev-&gt;its;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_acb4d46ae6cc918253046320805f63a95"><div class="ttname"><a href="kvm__main_8c.html#acb4d46ae6cc918253046320805f63a95">kvm_io_bus_get_dev</a></div><div class="ttdeci">struct kvm_io_device * kvm_io_bus_get_dev(struct kvm *kvm, enum kvm_bus bus_idx, gpa_t addr)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l05989">kvm_main.c:5989</a></div></div>
<div class="ttc" id="avgic-mmio_8c_html_aec0428e9a13ae48d45af461ec92b8005"><div class="ttname"><a href="vgic-mmio_8c.html#aec0428e9a13ae48d45af461ec92b8005">kvm_io_gic_ops</a></div><div class="ttdeci">const struct kvm_io_device_ops kvm_io_gic_ops</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio_8c_source.html#l01046">vgic-mmio.c:1075</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a94bbb30efc49ad5494a7f4b1410dbe01_cgraph.png" border="0" usemap="#avgic_8h_a94bbb30efc49ad5494a7f4b1410dbe01_cgraph" alt=""/></div>
<map name="avgic_8h_a94bbb30efc49ad5494a7f4b1410dbe01_cgraph" id="avgic_8h_a94bbb30efc49ad5494a7f4b1410dbe01_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,128,57"/>
<area shape="rect" href="kvm__main_8c.html#acb4d46ae6cc918253046320805f63a95" title=" " alt="" coords="176,5,335,32"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e" title=" " alt="" coords="204,56,307,83"/>
<area shape="rect" href="kvm__main_8c.html#a94bf2e0af8d9af8807a6a92ffb01cc1c" title=" " alt="" coords="383,5,573,32"/>
<area shape="rect" href="kvm__main_8c.html#a75ccec7a81fef145fb3c3a3b5479a86f" title=" " alt="" coords="836,5,971,32"/>
<area shape="rect" href="kvm__main_8c.html#aa52366417ec3708a05183231a3227d9d" title=" " alt="" coords="621,31,788,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a94bbb30efc49ad5494a7f4b1410dbe01_icgraph.png" border="0" usemap="#avgic_8h_a94bbb30efc49ad5494a7f4b1410dbe01_icgraph" alt=""/></div>
<map name="avgic_8h_a94bbb30efc49ad5494a7f4b1410dbe01_icgraph" id="avgic_8h_a94bbb30efc49ad5494a7f4b1410dbe01_icgraph">
<area shape="rect" title=" " alt="" coords="3723,211,3845,238"/>
<area shape="rect" href="vgic-v4_8c.html#a563a18a1e67555a71cb46e17f0abe770" title=" " alt="" coords="3551,182,3651,209"/>
<area shape="rect" href="vgic-its_8c.html#a53bf66e96dae9553e637fa69e8835365" title=" " alt="" coords="3528,237,3675,263"/>
<area shape="rect" href="vgic-v4_8c.html#a48b85c50461cf6bb5b295c722f7e08f1" title=" " alt="" coords="3260,182,3472,209"/>
<area shape="rect" href="vgic-v4_8c.html#a37e5e1c016cf4c05c177edbee4851062" title=" " alt="" coords="3252,125,3480,151"/>
<area shape="rect" href="arm_8c.html#ad039be44476ba96d282643b616303b79" title=" " alt="" coords="3026,175,3189,216"/>
<area shape="rect" href="arm_8c.html#af9eeefc9a16f01b4a563c4e7164bb242" title=" " alt="" coords="3026,109,3189,151"/>
<area shape="rect" href="vgic-irqfd_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="3311,241,3421,267"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="3011,241,3204,267"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="3021,291,3193,318"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="2811,266,2963,293"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="2608,215,2763,242"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="2379,183,2560,224"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="2253,165,2331,191"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="2056,114,2167,141"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="2026,165,2197,191"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="2017,215,2205,242"/>
<area shape="rect" href="vgic-v2_8c.html#ac8de91a1f816dcd3b3edba1d074a1aca" title=" " alt="" coords="2022,38,2201,65"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="1798,114,1950,141"/>
<area shape="rect" href="pmu-emul_8c.html#ac79256eb94d7599687d3294cd40d10b4" title=" " alt="" coords="644,114,823,141"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="1561,266,1731,293"/>
<area shape="rect" href="arm_8c.html#a1cc94da0709805c40af7785f8c5811bf" title=" " alt="" coords="1561,63,1731,90"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="1577,317,1715,343"/>
<area shape="rect" href="pmu-emul_8c.html#ab0f1f020b6774de3fb4ff4c8b4e45a5c" title=" " alt="" coords="412,63,596,90"/>
<area shape="rect" href="pmu-emul_8c.html#ae6434d5e6ad74c608886c368e56d67bc" title=" " alt="" coords="413,114,595,141"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,139,364,166"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,139,129,166"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="1321,215,1505,242"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="1317,383,1509,410"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="1329,317,1496,359"/>
<area shape="rect" href="arch__timer_8c.html#a11b9b6e6338bbec6085332661c934e91" title=" " alt="" coords="875,405,1045,431"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="1353,266,1472,293"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="1321,165,1504,191"/>
<area shape="rect" href="arch__timer_8c.html#a27c9feb35e6d7126c054c3325fea59b0" title=" " alt="" coords="1105,215,1257,242"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="896,215,1024,242"/>
<area shape="rect" href="arch__timer_8c.html#a4bf6ac76380146820b45b06feb3eab27" title=" " alt="" coords="1097,333,1264,359"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="881,325,1039,351"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="669,325,798,351"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="416,374,592,401"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="189,349,352,375"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="423,217,585,243"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="191,215,350,242"/>
<area shape="rect" href="arch__timer_8c.html#a0209ad4256c7a1fd5ea70b6abe030954" title=" " alt="" coords="1097,267,1264,308"/>
<area shape="rect" href="arch__timer_8c.html#a6ae73bff466fcdc60319f9726d53b571" title=" " alt="" coords="651,165,816,191"/>
<area shape="rect" href="vgic-irqfd_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="1312,485,1513,511"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="1809,215,1939,242"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="1809,165,1939,191"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="1809,266,1939,293"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="1779,26,1969,53"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="871,5,1049,47"/>
</map>
</div>

</div>
</div>
<a id="ac055f2fa0d463d3d287ee975bb80a9c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac055f2fa0d463d3d287ee975bb80a9c5">&#9670;&nbsp;</a></span>vgic_put_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_put_irq </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct vgic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8c_source.html#l00139">139</a> of file <a class="el" href="vgic_8c_source.html">vgic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;{</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keyword">struct </span>vgic_dist *dist = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">if</span> (irq-&gt;intid &lt; VGIC_MIN_LPI)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    raw_spin_lock_irqsave(&amp;dist-&gt;lpi_list_lock, flags);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406">__vgic_put_lpi_locked</a>(kvm, irq);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    raw_spin_unlock_irqrestore(&amp;dist-&gt;lpi_list_lock, flags);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ac055f2fa0d463d3d287ee975bb80a9c5_cgraph.png" border="0" usemap="#avgic_8h_ac055f2fa0d463d3d287ee975bb80a9c5_cgraph" alt=""/></div>
<map name="avgic_8h_ac055f2fa0d463d3d287ee975bb80a9c5_cgraph" id="avgic_8h_ac055f2fa0d463d3d287ee975bb80a9c5_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,107,32"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="155,5,317,32"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="365,5,493,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ac055f2fa0d463d3d287ee975bb80a9c5_icgraph.png" border="0" usemap="#avgic_8h_ac055f2fa0d463d3d287ee975bb80a9c5_icgraph" alt=""/></div>
<map name="avgic_8h_ac055f2fa0d463d3d287ee975bb80a9c5_icgraph" id="avgic_8h_ac055f2fa0d463d3d287ee975bb80a9c5_icgraph">
<area shape="rect" title=" " alt="" coords="511,1247,612,1273"/>
<area shape="rect" href="vgic-mmio_8c.html#ac9d250a7a5f4eae6374bd57711e4aa5a" title=" " alt="" coords="295,35,421,61"/>
<area shape="rect" href="vgic-mmio_8c.html#acb8571139852386510e89bd6a9fbf9e6" title=" " alt="" coords="296,85,420,112"/>
<area shape="rect" href="vgic-mmio_8c.html#abbf6cc4053faa7c09c5b99c71a6aaa2a" title=" " alt="" coords="301,136,415,163"/>
<area shape="rect" href="vgic-mmio_8c.html#a25ebace3c89c7b1d2c8cc6e4b41ac351" title=" " alt="" coords="263,187,453,213"/>
<area shape="rect" href="vgic-mmio_8c.html#a4552ff194be4788b6c2d944a201903fc" title=" " alt="" coords="257,237,459,264"/>
<area shape="rect" href="vgic-mmio_8c.html#a512b4b38220c4a8e593935c74ce036c5" title=" " alt="" coords="257,288,459,315"/>
<area shape="rect" href="vgic-its_8c.html#aa29a9fb283aa9dec6b8995c72b3a56ba" title=" " alt="" coords="311,339,405,365"/>
<area shape="rect" href="vgic-its_8c.html#aed468545774ff099d4ef46fb82e51759" title=" " alt="" coords="279,390,437,431"/>
<area shape="rect" href="vgic_8c.html#a0a11de94338771a6d53dd409d4f4c49d" title=" " alt="" coords="283,456,433,483"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="282,507,434,533"/>
<area shape="rect" href="vgic_8c.html#a1273f536f3d378a0b259e76591471f7b" title=" " alt="" coords="265,557,451,584"/>
<area shape="rect" href="vgic_8c.html#ab4243e0ac375259b39c04a6cc6266a9f" title=" " alt="" coords="267,608,449,635"/>
<area shape="rect" href="vgic_8c.html#a37d0e0f4c579bc38afe8d5f91529a772" title=" " alt="" coords="253,659,463,685"/>
<area shape="rect" href="vgic_8c.html#a4199ace0bb639bc69d06a2ce1ee0d1ff" title=" " alt="" coords="259,709,457,736"/>
<area shape="rect" href="vgic-debug_8c.html#a867b28db5803a6daa9723fb112d70deb" title=" " alt="" coords="289,760,427,787"/>
<area shape="rect" href="vgic_8c.html#a573eb768a56ea0b73e234771e0013ffc" title=" " alt="" coords="270,811,446,837"/>
<area shape="rect" href="vgic-its_8c.html#a3887f6b0b2f941a1254aa6ebfe40595b" title=" " alt="" coords="279,862,437,903"/>
<area shape="rect" href="vgic-its_8c.html#a352c8627ccf81a8154ae2275c7d50659" title=" " alt="" coords="274,927,442,969"/>
<area shape="rect" href="vgic-its_8c.html#aebd2d2ca133c7abccfd64534c1258020" title=" " alt="" coords="301,993,415,1020"/>
<area shape="rect" href="vgic-mmio_8c.html#a7fac20eacde0df9000d09b67f9300c16" title=" " alt="" coords="270,1044,446,1071"/>
<area shape="rect" href="vgic-mmio_8c.html#ac251d3bc75b5bd5550798715b3f0cf21" title=" " alt="" coords="267,1095,449,1121"/>
<area shape="rect" href="vgic-mmio_8c.html#a76a5cf658fa6075b5aa8de86d9ce4188" title=" " alt="" coords="271,1145,445,1172"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab639844a1b212efe7c1c662fd3b686b6" title=" " alt="" coords="268,1196,448,1223"/>
<area shape="rect" href="vgic-mmio_8c.html#a93fcd4f3757f88fb702332e5abd1d494" title=" " alt="" coords="266,1247,450,1273"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a8004c1add09524cf4aa88e910297dac7" title=" " alt="" coords="264,1297,452,1324"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#aef074302387e8dd60db49de00d523310" title=" " alt="" coords="270,1348,446,1375"/>
<area shape="rect" href="vgic-mmio_8c.html#a2ca5852d154989bbe7d03d88a60b33bd" title=" " alt="" coords="262,1399,454,1425"/>
<area shape="rect" href="vgic-mmio_8c.html#abe0c52fb86ae2728c808545ce2955101" title=" " alt="" coords="268,1449,448,1476"/>
<area shape="rect" href="vgic-mmio_8c.html#a59b486242da411e911332ba64728824d" title=" " alt="" coords="269,1500,447,1527"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#aa268002fc305866e42157249254372cb" title=" " alt="" coords="269,1551,447,1577"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a8207263120fdd08350fa48f0aee44351" title=" " alt="" coords="266,1601,450,1628"/>
<area shape="rect" href="vgic-mmio_8c.html#a654979b0910066eac66257c945040ac1" title=" " alt="" coords="264,1652,452,1679"/>
<area shape="rect" href="vgic-mmio_8c.html#a0c1f43ac9c640684281b61fd45b48a67" title=" " alt="" coords="262,1703,454,1729"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a5dbc7437d7a969cd08af33810777e861" title=" " alt="" coords="259,1753,457,1780"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a2c419211f7bf28a70acb6817236bb232" title=" " alt="" coords="259,1804,457,1831"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a5fbdffc6aa7bf13d7805dd8bd60842ca" title=" " alt="" coords="275,1855,441,1881"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#aee92fc893171f9f1de7b535b0abb93e1" title=" " alt="" coords="268,1905,448,1932"/>
<area shape="rect" href="vgic_8c.html#ae8f3490d589fa019869fe67839e3c748" title=" " alt="" coords="287,1956,429,1983"/>
<area shape="rect" href="vgic-mmio_8c.html#a74de2333a13c0e99b703d65cab9666b3" title=" " alt="" coords="288,2007,428,2049"/>
<area shape="rect" href="vgic-mmio_8c.html#ac4ad4fdde71aa1d4d8f6e36b4be6921b" title=" " alt="" coords="284,2073,432,2114"/>
<area shape="rect" href="vgic-mmio_8c.html#ad0d52d06620d3bd5c446a09ae6ddeac0" title=" " alt="" coords="284,2138,432,2179"/>
<area shape="rect" href="vgic-v2_8c.html#a7627ef75f37a19085dece7f4d26ad898" title=" " alt="" coords="278,2204,438,2231"/>
<area shape="rect" href="vgic-v3_8c.html#a3d53ba6e7f70704effc37ea2c4b0c04b" title=" " alt="" coords="278,2255,438,2281"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a5039defeee267f93839f5359d7534ff7" title=" " alt="" coords="285,2305,431,2332"/>
<area shape="rect" href="vgic-v4_8c.html#a84caa8431645d33bab1cc210aeb17801" title=" " alt="" coords="275,2356,441,2383"/>
<area shape="rect" href="vgic-v4_8c.html#aaa920282fd67f50873ceb0030afafc6a" title=" " alt="" coords="276,2407,440,2433"/>
<area shape="rect" href="vgic-mmio_8c.html#a28964cd75c2483a30f9743d35507bbce" title=" " alt="" coords="286,2458,430,2499"/>
<area shape="rect" href="vgic-mmio_8c.html#a2c19040c027236361c68623a437dd5f2" title=" " alt="" coords="5,5,205,32"/>
<area shape="rect" href="vgic-mmio_8c.html#a86ae5b1e120327acb1e064fc9f983534" title=" " alt="" coords="31,57,179,98"/>
</map>
</div>

</div>
</div>
<a id="a1e208ac24f54fa95ba74797758c5b84c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e208ac24f54fa95ba74797758c5b84c">&#9670;&nbsp;</a></span>vgic_queue_irq_unlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vgic_queue_irq_unlock </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct vgic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8c_source.html#l00336">336</a> of file <a class="el" href="vgic_8c_source.html">vgic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;{</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    lockdep_assert_held(&amp;irq-&gt;irq_lock);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;retry:</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    vcpu = <a class="code" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247">vgic_target_oracle</a>(irq);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">if</span> (irq-&gt;vcpu || !vcpu) {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">         * If this IRQ is already on a VCPU&#39;s ap_list, then it</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">         * cannot be moved or modified and there is no more work for</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">         * us to do.</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">         * Otherwise, if the irq is not pending and enabled, it does</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">         * not need to be inserted into an ap_list and there is also</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">         * no more work for us to do.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        raw_spin_unlock_irqrestore(&amp;irq-&gt;irq_lock, flags);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">         * We have to kick the VCPU here, because we could be</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">         * queueing an edge-triggered interrupt for which we</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">         * get no EOI maintenance interrupt. In that case,</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">         * while the IRQ is already on the VCPU&#39;s AP list, the</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">         * VCPU could have EOI&#39;ed the original interrupt and</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">         * won&#39;t see this one until it exits for some other</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">         * reason.</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keywordflow">if</span> (vcpu) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            kvm_make_request(KVM_REQ_IRQ_PENDING, vcpu);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <a class="code" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44">kvm_vcpu_kick</a>(vcpu);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">     * We must unlock the irq lock to take the ap_list_lock where</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">     * we are going to insert this new pending interrupt.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    raw_spin_unlock_irqrestore(&amp;irq-&gt;irq_lock, flags);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="comment">/* someone can do stuff here, which we re-check below */</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    raw_spin_lock_irqsave(&amp;vcpu-&gt;arch.vgic_cpu.ap_list_lock, flags);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    raw_spin_lock(&amp;irq-&gt;irq_lock);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">     * Did something change behind our backs?</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">     * There are two cases:</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">     * 1) The irq lost its pending state or was disabled behind our</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">     *    backs and/or it was queued to another VCPU&#39;s ap_list.</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">     * 2) Someone changed the affinity on this irq behind our</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">     *    backs and we are now holding the wrong ap_list_lock.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">     * In both cases, drop the locks and retry.</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">if</span> (unlikely(irq-&gt;vcpu || vcpu != <a class="code" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247">vgic_target_oracle</a>(irq))) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        raw_spin_unlock(&amp;irq-&gt;irq_lock);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        raw_spin_unlock_irqrestore(&amp;vcpu-&gt;arch.vgic_cpu.ap_list_lock,</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                       flags);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        raw_spin_lock_irqsave(&amp;irq-&gt;irq_lock, flags);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">goto</span> retry;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">     * Grab a reference to the irq to reflect the fact that it is</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">     * now in the ap_list.</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <a class="code" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91">vgic_get_irq_kref</a>(irq);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    list_add_tail(&amp;irq-&gt;ap_list, &amp;vcpu-&gt;arch.vgic_cpu.ap_list_head);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    irq-&gt;vcpu = vcpu;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    raw_spin_unlock(&amp;irq-&gt;irq_lock);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    raw_spin_unlock_irqrestore(&amp;vcpu-&gt;arch.vgic_cpu.ap_list_lock, flags);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    kvm_make_request(KVM_REQ_IRQ_PENDING, vcpu);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <a class="code" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44">kvm_vcpu_kick</a>(vcpu);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div>
<div class="ttc" id="avgic_8c_html_a10a21280f37c620b743df86980f6d247"><div class="ttname"><a href="vgic_8c.html#a10a21280f37c620b743df86980f6d247">vgic_target_oracle</a></div><div class="ttdeci">static struct kvm_vcpu * vgic_target_oracle(struct vgic_irq *irq)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8c_source.html#l00216">vgic.c:216</a></div></div>
<div class="ttc" id="avgic_8h_html_a43d39599f0fd2d973c5af8d6045e0f91"><div class="ttname"><a href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91">vgic_get_irq_kref</a></div><div class="ttdeci">static void vgic_get_irq_kref(struct vgic_irq *irq)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00223">vgic.h:223</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a1e208ac24f54fa95ba74797758c5b84c_cgraph.png" border="0" usemap="#avgic_8h_a1e208ac24f54fa95ba74797758c5b84c_cgraph" alt=""/></div>
<map name="avgic_8h_a1e208ac24f54fa95ba74797758c5b84c_cgraph" id="avgic_8h_a1e208ac24f54fa95ba74797758c5b84c_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,176,108"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="234,31,357,57"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="228,81,363,108"/>
<area shape="rect" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247" title=" " alt="" coords="224,132,367,159"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="415,5,623,32"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="442,56,595,83"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="461,132,577,159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a1e208ac24f54fa95ba74797758c5b84c_icgraph.png" border="0" usemap="#avgic_8h_a1e208ac24f54fa95ba74797758c5b84c_icgraph" alt=""/></div>
<map name="avgic_8h_a1e208ac24f54fa95ba74797758c5b84c_icgraph" id="avgic_8h_a1e208ac24f54fa95ba74797758c5b84c_icgraph">
<area shape="rect" title=" " alt="" coords="765,784,936,811"/>
<area shape="rect" href="vgic-mmio_8c.html#abbf6cc4053faa7c09c5b99c71a6aaa2a" title=" " alt="" coords="554,64,669,91"/>
<area shape="rect" href="vgic-its_8c.html#aed468545774ff099d4ef46fb82e51759" title=" " alt="" coords="533,162,690,203"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="535,363,687,389"/>
<area shape="rect" href="vgic-v4_8c.html#a48b85c50461cf6bb5b295c722f7e08f1" title=" " alt="" coords="505,519,717,545"/>
<area shape="rect" href="vgic-its_8c.html#a423c5139315e14ce4ec9f66ae4abb88c" title=" " alt="" coords="543,708,679,735"/>
<area shape="rect" href="vgic-its_8c.html#a352c8627ccf81a8154ae2275c7d50659" title=" " alt="" coords="527,591,695,633"/>
<area shape="rect" href="vgic-its_8c.html#ad62375be0591178764e98b79cd7217bf" title=" " alt="" coords="535,657,688,684"/>
<area shape="rect" href="vgic-mmio_8c.html#ae0e687d9272d9f9e52e4356c2732b289" title=" " alt="" coords="514,759,709,785"/>
<area shape="rect" href="vgic-mmio_8c.html#a59b486242da411e911332ba64728824d" title=" " alt="" coords="522,809,701,836"/>
<area shape="rect" href="vgic-mmio_8c.html#a0c1f43ac9c640684281b61fd45b48a67" title=" " alt="" coords="515,860,707,887"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a2c419211f7bf28a70acb6817236bb232" title=" " alt="" coords="512,911,711,937"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a5fbdffc6aa7bf13d7805dd8bd60842ca" title=" " alt="" coords="529,961,694,988"/>
<area shape="rect" href="vgic-mmio_8c.html#ad0d52d06620d3bd5c446a09ae6ddeac0" title=" " alt="" coords="537,1013,685,1054"/>
<area shape="rect" href="vgic-v3_8c.html#ac8f115520573cc0407f90177aeccfed9" title=" " alt="" coords="516,1078,707,1119"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a5039defeee267f93839f5359d7534ff7" title=" " alt="" coords="539,1144,684,1171"/>
<area shape="rect" href="vgic-mmio_8c.html#a28964cd75c2483a30f9743d35507bbce" title=" " alt="" coords="539,1195,683,1237"/>
<area shape="rect" href="vgic-mmio_8c.html#a5a75938ee02f87306de4cc6200b830db" title=" " alt="" coords="256,5,456,32"/>
<area shape="rect" href="vgic-mmio_8c.html#a3c1f43b5ec001e615e4d50a3e088997d" title=" " alt="" coords="282,57,430,98"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a597bfc6e392a0f71325a8a7a9643b07a" title=" " alt="" coords="21,18,191,59"/>
<area shape="rect" href="vgic-its_8c.html#a73bdb46182a608906704071dffe58b3d" title=" " alt="" coords="291,135,421,161"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a2f4cb3a37ad0e3cdd4cfdf827126e369" title=" " alt="" coords="11,84,201,111"/>
<area shape="rect" href="pmu-emul_8c.html#ac79256eb94d7599687d3294cd40d10b4" title=" " alt="" coords="267,261,445,288"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="271,363,441,389"/>
<area shape="rect" href="arm_8c.html#a1cc94da0709805c40af7785f8c5811bf" title=" " alt="" coords="271,211,441,237"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="287,439,425,465"/>
<area shape="rect" href="pmu-emul_8c.html#ab0f1f020b6774de3fb4ff4c8b4e45a5c" title=" " alt="" coords="14,185,198,212"/>
<area shape="rect" href="pmu-emul_8c.html#ae6434d5e6ad74c608886c368e56d67bc" title=" " alt="" coords="15,135,197,161"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="14,388,198,415"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="10,439,202,465"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="23,490,189,531"/>
<area shape="rect" href="arch__timer_8c.html#a11b9b6e6338bbec6085332661c934e91" title=" " alt="" coords="21,236,191,263"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="47,287,165,313"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="15,337,197,364"/>
<area shape="rect" href="vgic-irqfd_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="5,607,207,633"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="20,556,192,583"/>
<area shape="rect" href="arm_8c.html#ad039be44476ba96d282643b616303b79" title=" " alt="" coords="275,490,437,531"/>
<area shape="rect" href="vgic-its_8c.html#aff5a21379ddd3353c5f0a642986e6379" title=" " alt="" coords="295,708,417,735"/>
<area shape="rect" href="vgic-its_8c.html#aebd2d2ca133c7abccfd64534c1258020" title=" " alt="" coords="299,759,413,785"/>
<area shape="rect" href="vgic-its_8c.html#a17e42d11e1d03960c5978d7285c7cb93" title=" " alt="" coords="13,657,199,684"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#aa268002fc305866e42157249254372cb" title=" " alt="" coords="17,708,195,735"/>
<area shape="rect" href="vgic-its_8c.html#aed7b78d235e5b86f40ecb06fb0af0889" title=" " alt="" coords="27,759,185,801"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a14d4cb37d23ef8aaa7174fcc8ed53b47" title=" " alt="" coords="17,825,195,852"/>
<area shape="rect" href="vgic-its_8c.html#a53bf66e96dae9553e637fa69e8835365" title=" " alt="" coords="283,607,429,633"/>
<area shape="rect" href="vgic-its_8c.html#aa8ac1f6e44896244e074a9bd2448dd31" title=" " alt="" coords="265,657,447,684"/>
<area shape="rect" href="vgic-mmio_8c.html#a4552ff194be4788b6c2d944a201903fc" title=" " alt="" coords="255,809,457,836"/>
<area shape="rect" href="vgic-mmio_8c.html#a512b4b38220c4a8e593935c74ce036c5" title=" " alt="" coords="255,860,457,887"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#ab0b1532d2260a6b8261802c849495a37" title=" " alt="" coords="259,911,453,953"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a7df84da3229db55762dde7ac4e1b3e96" title=" " alt="" coords="276,1144,436,1171"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ac1a045e1729c5781a9c7c03e359da717" title=" " alt="" coords="285,1195,427,1237"/>
</map>
</div>

</div>
</div>
<a id="ab7837aed499e6011e3a7222ad512c1bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7837aed499e6011e3a7222ad512c1bf">&#9670;&nbsp;</a></span>vgic_register_dist_iodev()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_register_dist_iodev </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpa_t&#160;</td>
          <td class="paramname"><em>dist_base_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum&#160;</td>
          <td class="paramname"><em>vgic_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-mmio_8c_source.html#l01080">1080</a> of file <a class="el" href="vgic-mmio_8c_source.html">vgic-mmio.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;{</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keyword">struct </span>vgic_io_device *io_device = &amp;kvm-&gt;arch.vgic.dist_iodev;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160; </div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="keywordflow">switch</span> (type) {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="keywordflow">case</span> VGIC_V2:</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        len = <a class="code" href="vgic-mmio-v2_8c.html#a99781f95ebe917fea2537d762dded6e9">vgic_v2_init_dist_iodev</a>(io_device);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">case</span> VGIC_V3:</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        len = <a class="code" href="vgic-mmio-v3_8c.html#ab423a52c4f34cfe2d13a8da61cba66cb">vgic_v3_init_dist_iodev</a>(io_device);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        BUG_ON(1);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    }</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160; </div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    io_device-&gt;base_addr = dist_base_address;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    io_device-&gt;iodev_type = IODEV_DIST;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    io_device-&gt;redist_vcpu = NULL;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160; </div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="kvm__main_8c.html#a0afe5ce3e9ff1105328b06ec985e3374">kvm_io_bus_register_dev</a>(kvm, KVM_MMIO_BUS, dist_base_address,</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                       len, &amp;io_device-&gt;dev);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_a0afe5ce3e9ff1105328b06ec985e3374"><div class="ttname"><a href="kvm__main_8c.html#a0afe5ce3e9ff1105328b06ec985e3374">kvm_io_bus_register_dev</a></div><div class="ttdeci">int kvm_io_bus_register_dev(struct kvm *kvm, enum kvm_bus bus_idx, gpa_t addr, int len, struct kvm_io_device *dev)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l05897">kvm_main.c:5897</a></div></div>
<div class="ttc" id="avgic-mmio-v2_8c_html_a99781f95ebe917fea2537d762dded6e9"><div class="ttname"><a href="vgic-mmio-v2_8c.html#a99781f95ebe917fea2537d762dded6e9">vgic_v2_init_dist_iodev</a></div><div class="ttdeci">unsigned int vgic_v2_init_dist_iodev(struct vgic_io_device *dev)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v2_8c_source.html#l00487">vgic-mmio-v2.c:487</a></div></div>
<div class="ttc" id="avgic-mmio-v3_8c_html_ab423a52c4f34cfe2d13a8da61cba66cb"><div class="ttname"><a href="vgic-mmio-v3_8c.html#ab423a52c4f34cfe2d13a8da61cba66cb">vgic_v3_init_dist_iodev</a></div><div class="ttdeci">unsigned int vgic_v3_init_dist_iodev(struct vgic_io_device *dev)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v3_8c_source.html#l00727">vgic-mmio-v3.c:727</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ab7837aed499e6011e3a7222ad512c1bf_cgraph.png" border="0" usemap="#avgic_8h_ab7837aed499e6011e3a7222ad512c1bf_cgraph" alt=""/></div>
<map name="avgic_8h_ab7837aed499e6011e3a7222ad512c1bf_cgraph" id="avgic_8h_ab7837aed499e6011e3a7222ad512c1bf_cgraph">
<area shape="rect" title=" " alt="" coords="5,49,143,90"/>
<area shape="rect" href="kvm__main_8c.html#a0afe5ce3e9ff1105328b06ec985e3374" title=" " alt="" coords="191,5,379,32"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a99781f95ebe917fea2537d762dded6e9" title=" " alt="" coords="197,56,372,83"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab423a52c4f34cfe2d13a8da61cba66cb" title=" " alt="" coords="197,107,372,133"/>
<area shape="rect" href="kvm__main_8c.html#a75ccec7a81fef145fb3c3a3b5479a86f" title=" " alt="" coords="427,5,561,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ab7837aed499e6011e3a7222ad512c1bf_icgraph.png" border="0" usemap="#avgic_8h_ab7837aed499e6011e3a7222ad512c1bf_icgraph" alt=""/></div>
<map name="avgic_8h_ab7837aed499e6011e3a7222ad512c1bf_icgraph" id="avgic_8h_ab7837aed499e6011e3a7222ad512c1bf_icgraph">
<area shape="rect" title=" " alt="" coords="643,5,780,47"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="404,13,595,39"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,5,356,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="a7c5d9bcbf29cb46bac8622d8bcc145b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c5d9bcbf29cb46bac8622d8bcc145b2">&#9670;&nbsp;</a></span>vgic_register_redist_iodev()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_register_redist_iodev </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>vgic_register_redist_iodev - register a single redist iodev @vcpu: The VCPU to which the redistributor belongs</p>
<p>Register a KVM iodev for this VCPU's redistributor using the address provided.</p>
<p>Return 0 on success, -ERRNO otherwise. </p>

<p class="definition">Definition at line <a class="el" href="vgic-mmio-v3_8c_source.html#l00746">746</a> of file <a class="el" href="vgic-mmio-v3_8c_source.html">vgic-mmio-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;{</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keyword">struct </span>kvm *kvm = vcpu-&gt;kvm;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keyword">struct </span>vgic_dist *vgic = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keyword">struct </span>vgic_cpu *vgic_cpu = &amp;vcpu-&gt;arch.vgic_cpu;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keyword">struct </span>vgic_io_device *rd_dev = &amp;vcpu-&gt;arch.vgic_cpu.rd_iodev;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keyword">struct </span>vgic_redist_region *rdreg;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    gpa_t rd_base;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    lockdep_assert_held(&amp;kvm-&gt;slots_lock);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    mutex_lock(&amp;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160; </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="vgic_8h.html#adf701ae1a62928f5d797c6297fcf0364">IS_VGIC_ADDR_UNDEF</a>(vgic_cpu-&gt;rd_iodev.base_addr))</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="keywordflow">goto</span> out_unlock;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">     * We may be creating VCPUs before having set the base address for the</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">     * redistributor region, in which case we will come back to this</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">     * function for all VCPUs when the base address is set.  Just return</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">     * without doing any work for now.</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    rdreg = <a class="code" href="vgic-v3_8c.html#a481ec0006dfd5a7ea125b9913de7ba47">vgic_v3_rdist_free_slot</a>(&amp;vgic-&gt;rd_regions);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="keywordflow">if</span> (!rdreg)</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="keywordflow">goto</span> out_unlock;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160; </div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="vgic-v3_8c.html#a98c28ff2dc6b6965cef76e1be35233b1">vgic_v3_check_base</a>(kvm)) {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        ret = -EINVAL;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <span class="keywordflow">goto</span> out_unlock;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    }</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    vgic_cpu-&gt;rdreg = rdreg;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    vgic_cpu-&gt;rdreg_index = rdreg-&gt;free_index;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160; </div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    rd_base = rdreg-&gt;base + rdreg-&gt;free_index * KVM_VGIC_V3_REDIST_SIZE;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160; </div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    kvm_iodevice_init(&amp;rd_dev-&gt;dev, &amp;<a class="code" href="vgic-mmio_8c.html#aec0428e9a13ae48d45af461ec92b8005">kvm_io_gic_ops</a>);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    rd_dev-&gt;base_addr = rd_base;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    rd_dev-&gt;iodev_type = IODEV_REDIST;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    rd_dev-&gt;regions = <a class="code" href="vgic-mmio-v3_8c.html#a3f49ef93d8249e0e2c38174a69c7d285">vgic_v3_rd_registers</a>;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    rd_dev-&gt;nr_regions = ARRAY_SIZE(<a class="code" href="vgic-mmio-v3_8c.html#a3f49ef93d8249e0e2c38174a69c7d285">vgic_v3_rd_registers</a>);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    rd_dev-&gt;redist_vcpu = vcpu;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160; </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    mutex_unlock(&amp;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160; </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    ret = <a class="code" href="kvm__main_8c.html#a0afe5ce3e9ff1105328b06ec985e3374">kvm_io_bus_register_dev</a>(kvm, KVM_MMIO_BUS, rd_base,</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                      2 * SZ_64K, &amp;rd_dev-&gt;dev);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="comment">/* Protected by slots_lock */</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    rdreg-&gt;free_index++;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;out_unlock:</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    mutex_unlock(&amp;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;}</div>
<div class="ttc" id="avgic-mmio-v3_8c_html_a3f49ef93d8249e0e2c38174a69c7d285"><div class="ttname"><a href="vgic-mmio-v3_8c.html#a3f49ef93d8249e0e2c38174a69c7d285">vgic_v3_rd_registers</a></div><div class="ttdeci">static const struct vgic_register_region vgic_v3_rd_registers[]</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v3_8c_source.html#l00555">vgic-mmio-v3.c:649</a></div></div>
<div class="ttc" id="avgic-v3_8c_html_a481ec0006dfd5a7ea125b9913de7ba47"><div class="ttname"><a href="vgic-v3_8c.html#a481ec0006dfd5a7ea125b9913de7ba47">vgic_v3_rdist_free_slot</a></div><div class="ttdeci">struct vgic_redist_region * vgic_v3_rdist_free_slot(struct list_head *rd_regions)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00513">vgic-v3.c:513</a></div></div>
<div class="ttc" id="avgic-v3_8c_html_a98c28ff2dc6b6965cef76e1be35233b1"><div class="ttname"><a href="vgic-v3_8c.html#a98c28ff2dc6b6965cef76e1be35233b1">vgic_v3_check_base</a></div><div class="ttdeci">bool vgic_v3_check_base(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00477">vgic-v3.c:477</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a7c5d9bcbf29cb46bac8622d8bcc145b2_cgraph.png" border="0" usemap="#avgic_8h_a7c5d9bcbf29cb46bac8622d8bcc145b2_cgraph" alt=""/></div>
<map name="avgic_8h_a7c5d9bcbf29cb46bac8622d8bcc145b2_cgraph" id="avgic_8h_a7c5d9bcbf29cb46bac8622d8bcc145b2_cgraph">
<area shape="rect" title=" " alt="" coords="5,99,156,141"/>
<area shape="rect" href="kvm__main_8c.html#a0afe5ce3e9ff1105328b06ec985e3374" title=" " alt="" coords="204,31,392,57"/>
<area shape="rect" href="vgic-v3_8c.html#a98c28ff2dc6b6965cef76e1be35233b1" title=" " alt="" coords="221,107,375,133"/>
<area shape="rect" href="vgic-v3_8c.html#a481ec0006dfd5a7ea125b9913de7ba47" title=" " alt="" coords="212,183,384,209"/>
<area shape="rect" href="kvm__main_8c.html#a75ccec7a81fef145fb3c3a3b5479a86f" title=" " alt="" coords="469,5,603,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32" title=" " alt="" coords="461,56,611,83"/>
<area shape="rect" href="vgic_8h.html#a01a6c3c40680e43017d7ba8ec7aadbac" title=" " alt="" coords="680,132,853,159"/>
<area shape="rect" href="vgic-v3_8c.html#a8bd03445507515b9722165814955f6fa" title=" " alt="" coords="454,157,618,184"/>
<area shape="rect" href="vgic_8h.html#ab5518fe56ac149d185ee8dc4f1cbedcb" title=" " alt="" coords="440,208,632,235"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a7c5d9bcbf29cb46bac8622d8bcc145b2_icgraph.png" border="0" usemap="#avgic_8h_a7c5d9bcbf29cb46bac8622d8bcc145b2_icgraph" alt=""/></div>
<map name="avgic_8h_a7c5d9bcbf29cb46bac8622d8bcc145b2_icgraph" id="avgic_8h_a7c5d9bcbf29cb46bac8622d8bcc145b2_icgraph">
<area shape="rect" title=" " alt="" coords="1101,45,1252,86"/>
<area shape="rect" href="vgic-init_8c.html#ad052e8c724bfbb39c34281df23166a28" title=" " alt="" coords="891,23,1042,49"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722" title=" " alt="" coords="880,74,1053,115"/>
<area shape="rect" href="arm_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="655,23,827,49"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="403,23,603,49"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="651,81,832,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="442,81,563,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40" title=" " alt="" coords="184,56,355,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="184,107,355,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,56,136,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="6,107,135,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,157,135,184"/>
</map>
</div>

</div>
</div>
<a id="a33fd399bf664fddf31b1eec1e14c63e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33fd399bf664fddf31b1eec1e14c63e0">&#9670;&nbsp;</a></span>vgic_set_vmcr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_set_vmcr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structvgic__vmcr.html">vgic_vmcr</a> *&#160;</td>
          <td class="paramname"><em>vmcr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-mmio_8c_source.html#l00843">843</a> of file <a class="el" href="vgic-mmio_8c_source.html">vgic-mmio.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;{</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keywordflow">if</span> (kvm_vgic_global_state.type == VGIC_V2)</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <a class="code" href="vgic-v2_8c.html#a75b8509d11cad79d5c549793d0d38089">vgic_v2_set_vmcr</a>(vcpu, vmcr);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <a class="code" href="vgic-v3_8c.html#ac04464708c08b34a1e53ff2c30f54a98">vgic_v3_set_vmcr</a>(vcpu, vmcr);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;}</div>
<div class="ttc" id="avgic-v2_8c_html_a75b8509d11cad79d5c549793d0d38089"><div class="ttname"><a href="vgic-v2_8c.html#a75b8509d11cad79d5c549793d0d38089">vgic_v2_set_vmcr</a></div><div class="ttdeci">void vgic_v2_set_vmcr(struct kvm_vcpu *vcpu, struct vgic_vmcr *vmcrp)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v2_8c_source.html#l00205">vgic-v2.c:205</a></div></div>
<div class="ttc" id="avgic-v3_8c_html_ac04464708c08b34a1e53ff2c30f54a98"><div class="ttname"><a href="vgic-v3_8c.html#ac04464708c08b34a1e53ff2c30f54a98">vgic_v3_set_vmcr</a></div><div class="ttdeci">void vgic_v3_set_vmcr(struct kvm_vcpu *vcpu, struct vgic_vmcr *vmcrp)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00194">vgic-v3.c:194</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a33fd399bf664fddf31b1eec1e14c63e0_cgraph.png" border="0" usemap="#avgic_8h_a33fd399bf664fddf31b1eec1e14c63e0_cgraph" alt=""/></div>
<map name="avgic_8h_a33fd399bf664fddf31b1eec1e14c63e0_cgraph" id="avgic_8h_a33fd399bf664fddf31b1eec1e14c63e0_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,121,57"/>
<area shape="rect" href="vgic-v2_8c.html#a75b8509d11cad79d5c549793d0d38089" title=" " alt="" coords="169,5,308,32"/>
<area shape="rect" href="vgic-v3_8c.html#ac04464708c08b34a1e53ff2c30f54a98" title=" " alt="" coords="169,56,308,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a33fd399bf664fddf31b1eec1e14c63e0_icgraph.png" border="0" usemap="#avgic_8h_a33fd399bf664fddf31b1eec1e14c63e0_icgraph" alt=""/></div>
<map name="avgic_8h_a33fd399bf664fddf31b1eec1e14c63e0_icgraph" id="avgic_8h_a33fd399bf664fddf31b1eec1e14c63e0_icgraph">
<area shape="rect" title=" " alt="" coords="235,157,351,184"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a9a6ff5961084331631a38b15ad56ee3a" title=" " alt="" coords="44,5,148,32"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a98e7ca9700748f32119b3df93fb9702a" title=" " alt="" coords="44,56,148,83"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a5df87a6d208537d7e190b738b53a7244" title=" " alt="" coords="48,107,144,133"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a462776a9a850970c8e333d150e70041f" title=" " alt="" coords="36,157,156,184"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#aa54404fe059ee8c201ece8989b41557a" title=" " alt="" coords="36,208,156,235"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#ab7ad03ed75b3e3b3388d5aa051fb3b0c" title=" " alt="" coords="45,259,147,285"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a2f747e0249d94969dc9bb31ca7e39fa2" title=" " alt="" coords="5,309,187,336"/>
</map>
</div>

</div>
</div>
<a id="a839b15883ba8f9de35a03ffce32fdf7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a839b15883ba8f9de35a03ffce32fdf7f">&#9670;&nbsp;</a></span>vgic_supports_direct_msis()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vgic_supports_direct_msis </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-mmio-v3_8c_source.html#l00051">51</a> of file <a class="el" href="vgic-mmio-v3_8c_source.html">vgic-mmio-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;{</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">return</span> (kvm_vgic_global_state.has_gicv4_1 ||</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        (kvm_vgic_global_state.has_gicv4 &amp;&amp; <a class="code" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e">vgic_has_its</a>(kvm)));</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a839b15883ba8f9de35a03ffce32fdf7f_cgraph.png" border="0" usemap="#avgic_8h_a839b15883ba8f9de35a03ffce32fdf7f_cgraph" alt=""/></div>
<map name="avgic_8h_a839b15883ba8f9de35a03ffce32fdf7f_cgraph" id="avgic_8h_a839b15883ba8f9de35a03ffce32fdf7f_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,200,32"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e" title=" " alt="" coords="248,5,351,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a839b15883ba8f9de35a03ffce32fdf7f_icgraph.png" border="0" usemap="#avgic_8h_a839b15883ba8f9de35a03ffce32fdf7f_icgraph" alt=""/></div>
<map name="avgic_8h_a839b15883ba8f9de35a03ffce32fdf7f_icgraph" id="avgic_8h_a839b15883ba8f9de35a03ffce32fdf7f_icgraph">
<area shape="rect" title=" " alt="" coords="1636,579,1831,605"/>
<area shape="rect" href="vgic-init_8c.html#a814da4f59c826266ad54a8b5aa870de6" title=" " alt="" coords="1388,209,1560,236"/>
<area shape="rect" href="vgic_8c.html#a5fb6266a1f361c1945f5feb862c1cf31" title=" " alt="" coords="1383,503,1565,529"/>
<area shape="rect" href="vgic-v4_8c.html#a48b85c50461cf6bb5b295c722f7e08f1" title=" " alt="" coords="1368,796,1580,823"/>
<area shape="rect" href="vgic-v4_8c.html#a37e5e1c016cf4c05c177edbee4851062" title=" " alt="" coords="1360,933,1588,960"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="1435,311,1513,337"/>
<area shape="rect" href="vgic-v4_8c.html#ac2966fbf90610bb8a0525cbd903f7477" title=" " alt="" coords="1421,579,1527,605"/>
<area shape="rect" href="vgic-v4_8c.html#aeafcb3e6b67ea32ed8e59d009252e565" title=" " alt="" coords="1424,701,1524,728"/>
<area shape="rect" href="vgic-init_8c.html#af08e0c3b0309dbe4472ed185cd2b9e72" title=" " alt="" coords="1147,115,1289,141"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="895,56,1066,83"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="885,115,1076,141"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="451,56,578,83"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="681,5,815,32"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="177,44,371,71"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="457,5,572,32"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="185,113,363,154"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,161,129,188"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="181,208,367,235"/>
<area shape="rect" href="arm_8c.html#ad039be44476ba96d282643b616303b79" title=" " alt="" coords="1137,883,1299,925"/>
<area shape="rect" href="arm_8c.html#af9eeefc9a16f01b4a563c4e7164bb242" title=" " alt="" coords="1137,949,1299,990"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="1163,361,1273,388"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="1133,260,1303,287"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="1124,311,1312,337"/>
<area shape="rect" href="vgic-v2_8c.html#ac8de91a1f816dcd3b3edba1d074a1aca" title=" " alt="" coords="1129,180,1307,207"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="905,361,1057,388"/>
<area shape="rect" href="pmu-emul_8c.html#ac79256eb94d7599687d3294cd40d10b4" title=" " alt="" coords="659,208,837,235"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="663,317,833,344"/>
<area shape="rect" href="arm_8c.html#a1cc94da0709805c40af7785f8c5811bf" title=" " alt="" coords="663,368,833,395"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="679,419,817,445"/>
<area shape="rect" href="pmu-emul_8c.html#ab0f1f020b6774de3fb4ff4c8b4e45a5c" title=" " alt="" coords="423,208,607,235"/>
<area shape="rect" href="pmu-emul_8c.html#ae6434d5e6ad74c608886c368e56d67bc" title=" " alt="" coords="423,157,606,184"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="423,427,607,453"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="419,259,611,285"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="431,310,598,351"/>
<area shape="rect" href="arch__timer_8c.html#a11b9b6e6338bbec6085332661c934e91" title=" " alt="" coords="429,376,600,403"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="916,260,1045,287"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="916,209,1045,236"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="915,311,1046,337"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="667,604,829,631"/>
<area shape="rect" href="arm_8c.html#a68df8c6f1b7134e9f23857f092d50056" title=" " alt="" coords="1161,680,1275,707"/>
<area shape="rect" href="vgic-v3_8c.html#aec2311d8e88bcd485c7baf083b65876e" title=" " alt="" coords="1165,528,1271,555"/>
<area shape="rect" href="handle__exit_8c.html#a0b391fc62c2250ecc0bfcdbe1b0a6788" title=" " alt="" coords="914,680,1047,707"/>
<area shape="rect" href="psci_8c.html#abe7d85200e79143f87dab785a204fb3a" title=" " alt="" coords="889,731,1072,757"/>
<area shape="rect" href="arm_8c.html#ad33fe3df0e24d8ff8cb0a7f4657ec3fa" title=" " alt="" coords="905,629,1056,656"/>
<area shape="rect" href="psci_8c.html#ac7522f6e0d1805f44a3e932397de4582" title=" " alt="" coords="676,731,820,757"/>
<area shape="rect" href="vgic_8c.html#a54d5d884ac662357df5661d80f5160e3" title=" " alt="" coords="921,528,1041,555"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="669,528,827,555"/>
<area shape="rect" href="vgic-v3_8c.html#a6a9931a18504090acd3d559ba25374ff" title=" " alt="" coords="1168,832,1268,859"/>
<area shape="rect" href="vgic_8c.html#a96f93a2405989082e3693577b6b2eb5d" title=" " alt="" coords="924,832,1037,859"/>
<area shape="rect" href="arm_8c.html#a9235365ce64f215b1e024f26d96537cc" title=" " alt="" coords="672,832,824,859"/>
</map>
</div>

</div>
</div>
<a id="a4bfec769cd9fe2bddb14200a6147fccd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bfec769cd9fe2bddb14200a6147fccd">&#9670;&nbsp;</a></span>vgic_unregister_redist_iodev()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_unregister_redist_iodev </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-mmio-v3_8c_source.html#l00805">805</a> of file <a class="el" href="vgic-mmio-v3_8c_source.html">vgic-mmio-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;{</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keyword">struct </span>vgic_io_device *rd_dev = &amp;vcpu-&gt;arch.vgic_cpu.rd_iodev;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <a class="code" href="kvm__main_8c.html#a103c02eb7ca545106f3130776c2a8897">kvm_io_bus_unregister_dev</a>(vcpu-&gt;kvm, KVM_MMIO_BUS, &amp;rd_dev-&gt;dev);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_a103c02eb7ca545106f3130776c2a8897"><div class="ttname"><a href="kvm__main_8c.html#a103c02eb7ca545106f3130776c2a8897">kvm_io_bus_unregister_dev</a></div><div class="ttdeci">int kvm_io_bus_unregister_dev(struct kvm *kvm, enum kvm_bus bus_idx, struct kvm_io_device *dev)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l05941">kvm_main.c:5941</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a4bfec769cd9fe2bddb14200a6147fccd_cgraph.png" border="0" usemap="#avgic_8h_a4bfec769cd9fe2bddb14200a6147fccd_cgraph" alt=""/></div>
<map name="avgic_8h_a4bfec769cd9fe2bddb14200a6147fccd_cgraph" id="avgic_8h_a4bfec769cd9fe2bddb14200a6147fccd_cgraph">
<area shape="rect" title=" " alt="" coords="5,23,172,65"/>
<area shape="rect" href="kvm__main_8c.html#a103c02eb7ca545106f3130776c2a8897" title=" " alt="" coords="220,31,424,57"/>
<area shape="rect" href="kvm__main_8c.html#a3089edf2c0e5790aab7e8ed723f34b5b" title=" " alt="" coords="472,5,628,32"/>
<area shape="rect" href="kvm__main_8c.html#aa6d7dea09a0b657f29e92f424e5d0633" title=" " alt="" coords="676,31,863,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a4bfec769cd9fe2bddb14200a6147fccd_icgraph.png" border="0" usemap="#avgic_8h_a4bfec769cd9fe2bddb14200a6147fccd_icgraph" alt=""/></div>
<map name="avgic_8h_a4bfec769cd9fe2bddb14200a6147fccd_icgraph" id="avgic_8h_a4bfec769cd9fe2bddb14200a6147fccd_icgraph">
<area shape="rect" title=" " alt="" coords="2187,165,2353,206"/>
<area shape="rect" href="vgic-init_8c.html#a1002af084b5fbafca1dab97541383180" title=" " alt="" coords="1945,137,2139,164"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722" title=" " alt="" coords="1955,194,2129,235"/>
<area shape="rect" href="vgic-init_8c.html#af08e0c3b0309dbe4472ed185cd2b9e72" title=" " alt="" coords="1736,57,1877,84"/>
<area shape="rect" href="vgic-init_8c.html#a05d84155ac79f812932547367b4445e4" title=" " alt="" coords="1717,137,1896,164"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="811,56,981,83"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="1477,57,1668,84"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="453,19,580,45"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="628,81,763,108"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="212,5,405,32"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="459,81,574,108"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="234,56,383,83"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="226,107,391,133"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="231,157,386,184"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="241,208,376,235"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="5,56,164,83"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="1240,50,1419,91"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="1043,57,1167,84"/>
<area shape="rect" href="arm_8c.html#a25d188e4f0871968b9f428c79720a502" title=" " alt="" coords="1483,137,1663,164"/>
<area shape="rect" href="kvm__main_8c.html#a7218df747387e4034ab8442f187306b1" title=" " alt="" coords="1257,116,1402,143"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="1229,167,1429,193"/>
<area shape="rect" href="kvm__main_8c.html#a0fcd9f7671bee7debec1bc05dcd9557b" title=" " alt="" coords="1029,112,1181,139"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="1716,212,1897,239"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="1512,217,1633,244"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40" title=" " alt="" coords="1244,217,1415,244"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="1244,268,1415,295"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="1040,167,1171,193"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="1040,217,1171,244"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="1041,268,1170,295"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="1041,319,1170,345"/>
</map>
</div>

</div>
</div>
<a id="a1bc90abf0cc897ed6f7aeadae6b0d518"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bc90abf0cc897ed6f7aeadae6b0d518">&#9670;&nbsp;</a></span>vgic_v2_clear_lr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v2_clear_lr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v2_8c_source.html#l00200">200</a> of file <a class="el" href="vgic-v2_8c_source.html">vgic-v2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;{</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    vcpu-&gt;arch.vgic_cpu.vgic_v2.vgic_lr[lr] = 0;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a1bc90abf0cc897ed6f7aeadae6b0d518_icgraph.png" border="0" usemap="#avgic_8h_a1bc90abf0cc897ed6f7aeadae6b0d518_icgraph" alt=""/></div>
<map name="avgic_8h_a1bc90abf0cc897ed6f7aeadae6b0d518_icgraph" id="avgic_8h_a1bc90abf0cc897ed6f7aeadae6b0d518_icgraph">
<area shape="rect" title=" " alt="" coords="985,5,1112,32"/>
<area shape="rect" href="vgic_8c.html#ae96881aedd2816f45a65d54bf223562d" title=" " alt="" coords="833,5,937,32"/>
<area shape="rect" href="vgic_8c.html#a498227d2a82836ba11a046b68857e3a3" title=" " alt="" coords="643,5,785,32"/>
<area shape="rect" href="vgic_8c.html#a5fb6266a1f361c1945f5feb862c1cf31" title=" " alt="" coords="412,5,595,32"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a47e01844cf58952fedaee31f59b759cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47e01844cf58952fedaee31f59b759cc">&#9670;&nbsp;</a></span>vgic_v2_cpuif_uaccess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v2_cpuif_uaccess </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32 *&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-mmio-v2_8c_source.html#l00539">539</a> of file <a class="el" href="vgic-mmio-v2_8c_source.html">vgic-mmio-v2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;{</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keyword">struct </span>vgic_io_device dev = {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        .regions = <a class="code" href="vgic-mmio-v2_8c.html#ac4241542a1457fef0aca460136f5c7ba">vgic_v2_cpu_registers</a>,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        .nr_regions = ARRAY_SIZE(<a class="code" href="vgic-mmio-v2_8c.html#ac4241542a1457fef0aca460136f5c7ba">vgic_v2_cpu_registers</a>),</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        .iodev_type = IODEV_CPUIF,</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    };</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="vgic-mmio_8c.html#ae999933ae5e2cc6f0d3910bbe33386ba">vgic_uaccess</a>(vcpu, &amp;dev, is_write, offset, val);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div>
<div class="ttc" id="avgic-mmio-v2_8c_html_ac4241542a1457fef0aca460136f5c7ba"><div class="ttname"><a href="vgic-mmio-v2_8c.html#ac4241542a1457fef0aca460136f5c7ba">vgic_v2_cpu_registers</a></div><div class="ttdeci">static const struct vgic_register_region vgic_v2_cpu_registers[]</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v2_8c_source.html#l00387">vgic-mmio-v2.c:466</a></div></div>
<div class="ttc" id="avgic-mmio_8c_html_ae999933ae5e2cc6f0d3910bbe33386ba"><div class="ttname"><a href="vgic-mmio_8c.html#ae999933ae5e2cc6f0d3910bbe33386ba">vgic_uaccess</a></div><div class="ttdeci">int vgic_uaccess(struct kvm_vcpu *vcpu, struct vgic_io_device *dev, bool is_write, int offset, u32 *val)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio_8c_source.html#l01005">vgic-mmio.c:1005</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a47e01844cf58952fedaee31f59b759cc_cgraph.png" border="0" usemap="#avgic_8h_a47e01844cf58952fedaee31f59b759cc_cgraph" alt=""/></div>
<map name="avgic_8h_a47e01844cf58952fedaee31f59b759cc_cgraph" id="avgic_8h_a47e01844cf58952fedaee31f59b759cc_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,176,57"/>
<area shape="rect" href="vgic-mmio_8c.html#ae999933ae5e2cc6f0d3910bbe33386ba" title=" " alt="" coords="224,31,332,57"/>
<area shape="rect" href="vgic-mmio_8c.html#ac361bf23479dea11a94946fb36408b29" title=" " alt="" coords="382,5,526,32"/>
<area shape="rect" href="vgic-mmio_8c.html#a9ae5f9a11d1a32e0fddb9409399b1d4a" title=" " alt="" coords="380,56,528,83"/>
<area shape="rect" href="vgic-mmio_8c.html#af645443cfc0bc59f41881570759adcb5" title=" " alt="" coords="576,31,747,57"/>
<area shape="rect" href="vgic-mmio_8c.html#a296fe3adbc190bcdb6fde5c708193b03" title=" " alt="" coords="827,5,935,32"/>
<area shape="rect" href="vgic-mmio_8c.html#a340c255c8c139816f1ce975f0bd15c64" title=" " alt="" coords="795,56,968,83"/>
<area shape="rect" href="vgic-mmio_8c.html#abed6aa21152b65b854d1f9513c4ce647" title=" " alt="" coords="1016,56,1127,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a47e01844cf58952fedaee31f59b759cc_icgraph.png" border="0" usemap="#avgic_8h_a47e01844cf58952fedaee31f59b759cc_icgraph" alt=""/></div>
<map name="avgic_8h_a47e01844cf58952fedaee31f59b759cc_icgraph" id="avgic_8h_a47e01844cf58952fedaee31f59b759cc_icgraph">
<area shape="rect" title=" " alt="" coords="420,31,591,57"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="184,31,372,57"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="6,56,135,83"/>
</map>
</div>

</div>
</div>
<a id="a172aa5542cf86982d7d2fc0c9948fa26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a172aa5542cf86982d7d2fc0c9948fa26">&#9670;&nbsp;</a></span>vgic_v2_dist_uaccess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v2_dist_uaccess </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32 *&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-mmio-v2_8c_source.html#l00551">551</a> of file <a class="el" href="vgic-mmio-v2_8c_source.html">vgic-mmio-v2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;{</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keyword">struct </span>vgic_io_device dev = {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        .regions = <a class="code" href="vgic-mmio-v2_8c.html#aee710f1eefb272d4376680d9f2ecccad">vgic_v2_dist_registers</a>,</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        .nr_regions = ARRAY_SIZE(<a class="code" href="vgic-mmio-v2_8c.html#aee710f1eefb272d4376680d9f2ecccad">vgic_v2_dist_registers</a>),</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        .iodev_type = IODEV_DIST,</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    };</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="vgic-mmio_8c.html#ae999933ae5e2cc6f0d3910bbe33386ba">vgic_uaccess</a>(vcpu, &amp;dev, is_write, offset, val);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;}</div>
<div class="ttc" id="avgic-mmio-v2_8c_html_aee710f1eefb272d4376680d9f2ecccad"><div class="ttname"><a href="vgic-mmio-v2_8c.html#aee710f1eefb272d4376680d9f2ecccad">vgic_v2_dist_registers</a></div><div class="ttdeci">static const struct vgic_register_region vgic_v2_dist_registers[]</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v2_8c_source.html#l00387">vgic-mmio-v2.c:413</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a172aa5542cf86982d7d2fc0c9948fa26_cgraph.png" border="0" usemap="#avgic_8h_a172aa5542cf86982d7d2fc0c9948fa26_cgraph" alt=""/></div>
<map name="avgic_8h_a172aa5542cf86982d7d2fc0c9948fa26_cgraph" id="avgic_8h_a172aa5542cf86982d7d2fc0c9948fa26_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,168,57"/>
<area shape="rect" href="vgic-mmio_8c.html#ae999933ae5e2cc6f0d3910bbe33386ba" title=" " alt="" coords="216,31,324,57"/>
<area shape="rect" href="vgic-mmio_8c.html#ac361bf23479dea11a94946fb36408b29" title=" " alt="" coords="374,5,518,32"/>
<area shape="rect" href="vgic-mmio_8c.html#a9ae5f9a11d1a32e0fddb9409399b1d4a" title=" " alt="" coords="372,56,520,83"/>
<area shape="rect" href="vgic-mmio_8c.html#af645443cfc0bc59f41881570759adcb5" title=" " alt="" coords="568,31,739,57"/>
<area shape="rect" href="vgic-mmio_8c.html#a296fe3adbc190bcdb6fde5c708193b03" title=" " alt="" coords="819,5,927,32"/>
<area shape="rect" href="vgic-mmio_8c.html#a340c255c8c139816f1ce975f0bd15c64" title=" " alt="" coords="787,56,960,83"/>
<area shape="rect" href="vgic-mmio_8c.html#abed6aa21152b65b854d1f9513c4ce647" title=" " alt="" coords="1008,56,1119,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a172aa5542cf86982d7d2fc0c9948fa26_icgraph.png" border="0" usemap="#avgic_8h_a172aa5542cf86982d7d2fc0c9948fa26_icgraph" alt=""/></div>
<map name="avgic_8h_a172aa5542cf86982d7d2fc0c9948fa26_icgraph" id="avgic_8h_a172aa5542cf86982d7d2fc0c9948fa26_icgraph">
<area shape="rect" title=" " alt="" coords="420,31,583,57"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="184,31,372,57"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="6,56,135,83"/>
</map>
</div>

</div>
</div>
<a id="a4e8ee3d5f7c8fadbf0a645df67a1c5a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e8ee3d5f7c8fadbf0a645df67a1c5a2">&#9670;&nbsp;</a></span>vgic_v2_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v2_enable </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v2_8c_source.html#l00260">260</a> of file <a class="el" href="vgic-v2_8c_source.html">vgic-v2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;{</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">     * By forcing VMCR to zero, the GIC will restore the binary</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">     * points to their reset values. Anything else resets to zero</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">     * anyway.</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    vcpu-&gt;arch.vgic_cpu.vgic_v2.vgic_vmcr = 0;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">/* Get the show on the road... */</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    vcpu-&gt;arch.vgic_cpu.vgic_v2.vgic_hcr = GICH_HCR_EN;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a4e8ee3d5f7c8fadbf0a645df67a1c5a2_icgraph.png" border="0" usemap="#avgic_8h_a4e8ee3d5f7c8fadbf0a645df67a1c5a2_icgraph" alt=""/></div>
<map name="avgic_8h_a4e8ee3d5f7c8fadbf0a645df67a1c5a2_icgraph" id="avgic_8h_a4e8ee3d5f7c8fadbf0a645df67a1c5a2_icgraph">
<area shape="rect" title=" " alt="" coords="3044,529,3167,556"/>
<area shape="rect" href="vgic-init_8c.html#a2eee0060a3bdcd2a9e8fe1451a3a3fc2" title=" " alt="" coords="2821,529,2996,556"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="2696,529,2773,556"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="2499,403,2609,429"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="2469,631,2639,657"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="2460,580,2648,607"/>
<area shape="rect" href="vgic-v2_8c.html#ac8de91a1f816dcd3b3edba1d074a1aca" title=" " alt="" coords="2465,529,2643,556"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="2241,377,2393,404"/>
<area shape="rect" href="pmu-emul_8c.html#ac79256eb94d7599687d3294cd40d10b4" title=" " alt="" coords="1086,412,1265,439"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="2004,159,2173,185"/>
<area shape="rect" href="arm_8c.html#a1cc94da0709805c40af7785f8c5811bf" title=" " alt="" coords="2004,377,2173,404"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="2020,327,2157,353"/>
<area shape="rect" href="pmu-emul_8c.html#ab0f1f020b6774de3fb4ff4c8b4e45a5c" title=" " alt="" coords="845,416,1029,443"/>
<area shape="rect" href="pmu-emul_8c.html#ae6434d5e6ad74c608886c368e56d67bc" title=" " alt="" coords="846,365,1029,392"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="611,315,797,341"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,315,129,341"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="1763,5,1947,32"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="1759,159,1951,185"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="1772,210,1939,251"/>
<area shape="rect" href="arch__timer_8c.html#a11b9b6e6338bbec6085332661c934e91" title=" " alt="" coords="1321,59,1492,85"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="1796,108,1915,135"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="1764,276,1947,303"/>
<area shape="rect" href="arch__timer_8c.html#a27c9feb35e6d7126c054c3325fea59b0" title=" " alt="" coords="1547,5,1699,32"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="1343,5,1471,32"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="1119,5,1231,32"/>
<area shape="rect" href="arch__timer_8c.html#a4bf6ac76380146820b45b06feb3eab27" title=" " alt="" coords="1540,173,1707,200"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1327,169,1486,196"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="1077,213,1273,240"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="1103,112,1248,139"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1111,61,1240,88"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="1118,163,1233,189"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="893,264,981,291"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="849,25,1025,52"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="623,72,785,99"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,131,336,157"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="857,192,1018,219"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="394,65,553,106"/>
<area shape="rect" href="arch__timer_8c.html#a0209ad4256c7a1fd5ea70b6abe030954" title=" " alt="" coords="1540,107,1707,149"/>
<area shape="rect" href="sys__regs_8c.html#a9457451d95fa776f653cff6c2a8d31f9" title=" " alt="" coords="1335,115,1478,141"/>
<area shape="rect" href="arch__timer_8c.html#a6ae73bff466fcdc60319f9726d53b571" title=" " alt="" coords="855,315,1020,341"/>
<area shape="rect" href="vgic-irqfd_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="1755,327,1956,353"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="1769,377,1941,404"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="1547,377,1699,404"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="1329,377,1484,404"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="1085,463,1266,505"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="2252,631,2381,657"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="2252,681,2381,708"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="2251,580,2382,607"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="2221,529,2412,556"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="384,446,563,487"/>
</map>
</div>

</div>
</div>
<a id="a7627ef75f37a19085dece7f4d26ad898"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7627ef75f37a19085dece7f4d26ad898">&#9670;&nbsp;</a></span>vgic_v2_fold_lr_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v2_fold_lr_state </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v2_8c_source.html#l00049">49</a> of file <a class="el" href="vgic-v2_8c_source.html">vgic-v2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;{</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keyword">struct </span>vgic_cpu *vgic_cpu = &amp;vcpu-&gt;arch.vgic_cpu;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keyword">struct </span>vgic_v2_cpu_if *cpuif = &amp;vgic_cpu-&gt;vgic_v2;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordtype">int</span> lr;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="vgic_8h.html#a0e2b76dd7108772ed1441b1e64f0be4b">DEBUG_SPINLOCK_BUG_ON</a>(!irqs_disabled());</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    cpuif-&gt;vgic_hcr &amp;= ~GICH_HCR_UIE;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">for</span> (lr = 0; lr &lt; vgic_cpu-&gt;vgic_v2.used_lrs; lr++) {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        u32 val = cpuif-&gt;vgic_lr[lr];</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        u32 cpuid, intid = val &amp; GICH_LR_VIRTUALID;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="keyword">struct </span>vgic_irq *irq;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordtype">bool</span> deactivated;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="comment">/* Extract the source vCPU id from the LR */</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        cpuid = val &amp; GICH_LR_PHYSID_CPUID;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        cpuid &gt;&gt;= GICH_LR_PHYSID_CPUID_SHIFT;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        cpuid &amp;= 7;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="comment">/* Notify fds when the guest EOI&#39;ed a level-triggered SPI */</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vgic-v2_8c.html#adda8c091cf8da54207b9f8e27ddcade7">lr_signals_eoi_mi</a>(val) &amp;&amp; vgic_valid_spi(vcpu-&gt;kvm, intid))</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            kvm_notify_acked_irq(vcpu-&gt;kvm, 0,</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                         intid - VGIC_NR_PRIVATE_IRQS);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        irq = <a class="code" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516">vgic_get_irq</a>(vcpu-&gt;kvm, vcpu, intid);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        raw_spin_lock(&amp;irq-&gt;irq_lock);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="comment">/* Always preserve the active bit, note deactivation */</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        deactivated = irq-&gt;active &amp;&amp; !(val &amp; GICH_LR_ACTIVE_BIT);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        irq-&gt;active = !!(val &amp; GICH_LR_ACTIVE_BIT);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keywordflow">if</span> (irq-&gt;active &amp;&amp; <a class="code" href="vgic_8h.html#a67cef97460e9a4080ae437e5a30113a7">vgic_irq_is_sgi</a>(intid))</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            irq-&gt;active_source = cpuid;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="comment">/* Edge is the only case where we preserve the pending bit */</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        if (irq-&gt;config == VGIC_CONFIG_EDGE &amp;&amp;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            (val &amp; GICH_LR_PENDING_BIT)) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            irq-&gt;pending_latch = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vgic_8h.html#a67cef97460e9a4080ae437e5a30113a7">vgic_irq_is_sgi</a>(intid))</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                irq-&gt;source |= (1 &lt;&lt; cpuid);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">         * Clear soft pending state when level irqs have been acked.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">if</span> (irq-&gt;config == VGIC_CONFIG_LEVEL &amp;&amp; !(val &amp; GICH_LR_STATE))</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            irq-&gt;pending_latch = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="comment">/* Handle resampling for mapped interrupts if required */</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <a class="code" href="vgic_8c.html#a19d27bba8dd17f9ae9c8284444df030b">vgic_irq_handle_resampling</a>(irq, deactivated, val &amp; GICH_LR_PENDING_BIT);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        raw_spin_unlock(&amp;irq-&gt;irq_lock);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <a class="code" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5">vgic_put_irq</a>(vcpu-&gt;kvm, irq);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    cpuif-&gt;used_lrs = 0;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;}</div>
<div class="ttc" id="avgic-v2_8c_html_adda8c091cf8da54207b9f8e27ddcade7"><div class="ttname"><a href="vgic-v2_8c.html#adda8c091cf8da54207b9f8e27ddcade7">lr_signals_eoi_mi</a></div><div class="ttdeci">static bool lr_signals_eoi_mi(u32 lr_val)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v2_8c_source.html#l00036">vgic-v2.c:36</a></div></div>
<div class="ttc" id="avgic_8c_html_a19d27bba8dd17f9ae9c8284444df030b"><div class="ttname"><a href="vgic_8c.html#a19d27bba8dd17f9ae9c8284444df030b">vgic_irq_handle_resampling</a></div><div class="ttdeci">void vgic_irq_handle_resampling(struct vgic_irq *irq, bool lr_deactivated, bool lr_pending)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8c_source.html#l01060">vgic.c:1060</a></div></div>
<div class="ttc" id="avgic_8h_html_a0e2b76dd7108772ed1441b1e64f0be4b"><div class="ttname"><a href="vgic_8h.html#a0e2b76dd7108772ed1441b1e64f0be4b">DEBUG_SPINLOCK_BUG_ON</a></div><div class="ttdeci">#define DEBUG_SPINLOCK_BUG_ON(p)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00099">vgic.h:99</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a7627ef75f37a19085dece7f4d26ad898_cgraph.png" border="0" usemap="#avgic_8h_a7627ef75f37a19085dece7f4d26ad898_cgraph" alt=""/></div>
<map name="avgic_8h_a7627ef75f37a19085dece7f4d26ad898_cgraph" id="avgic_8h_a7627ef75f37a19085dece7f4d26ad898_cgraph">
<area shape="rect" title=" " alt="" coords="5,104,165,131"/>
<area shape="rect" href="vgic-v2_8c.html#adda8c091cf8da54207b9f8e27ddcade7" title=" " alt="" coords="248,28,383,55"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="265,79,366,105"/>
<area shape="rect" href="vgic_8c.html#a19d27bba8dd17f9ae9c8284444df030b" title=" " alt="" coords="213,129,417,156"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="265,209,366,236"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="508,5,608,32"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="699,5,833,32"/>
<area shape="rect" href="vgic_8c.html#a44a31fe53851677c742d5b2a340e2f56" title=" " alt="" coords="485,57,631,98"/>
<area shape="rect" href="vgic_8h.html#a9c8f3a32a17b2384ea1cc0c6e0340ad7" title=" " alt="" coords="483,122,633,163"/>
<area shape="rect" href="vgic_8c.html#a6daedd3eec82ca8b68db82b750a24f67" title=" " alt="" coords="465,188,651,215"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="477,239,639,265"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="702,239,830,265"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a7627ef75f37a19085dece7f4d26ad898_icgraph.png" border="0" usemap="#avgic_8h_a7627ef75f37a19085dece7f4d26ad898_icgraph" alt=""/></div>
<map name="avgic_8h_a7627ef75f37a19085dece7f4d26ad898_icgraph" id="avgic_8h_a7627ef75f37a19085dece7f4d26ad898_icgraph">
<area shape="rect" title=" " alt="" coords="827,5,987,32"/>
<area shape="rect" href="vgic_8c.html#ad42413b2202ba95d0b76067b240b9c52" title=" " alt="" coords="641,5,779,32"/>
<area shape="rect" href="vgic_8c.html#a76c600af416fb73e40611d80115edc03" title=" " alt="" coords="412,5,593,32"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="aa740568c7a160fed9d2576ef2908a377"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa740568c7a160fed9d2576ef2908a377">&#9670;&nbsp;</a></span>vgic_v2_get_vmcr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v2_get_vmcr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structvgic__vmcr.html">vgic_vmcr</a> *&#160;</td>
          <td class="paramname"><em>vmcr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v2_8c_source.html#l00232">232</a> of file <a class="el" href="vgic-v2_8c_source.html">vgic-v2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;{</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keyword">struct </span>vgic_v2_cpu_if *cpu_if = &amp;vcpu-&gt;arch.vgic_cpu.vgic_v2;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    u32 vmcr;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    vmcr = cpu_if-&gt;vgic_vmcr;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    vmcrp-&gt;<a class="code" href="structvgic__vmcr.html#ad62f4acb1c7a492398587a4c8db36536">grpen0</a> = (vmcr &amp; GICH_VMCR_ENABLE_GRP0_MASK) &gt;&gt;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        GICH_VMCR_ENABLE_GRP0_SHIFT;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    vmcrp-&gt;grpen1 = (vmcr &amp; GICH_VMCR_ENABLE_GRP1_MASK) &gt;&gt;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        GICH_VMCR_ENABLE_GRP1_SHIFT;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    vmcrp-&gt;ackctl = (vmcr &amp; GICH_VMCR_ACK_CTL_MASK) &gt;&gt;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        GICH_VMCR_ACK_CTL_SHIFT;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    vmcrp-&gt;fiqen = (vmcr &amp; GICH_VMCR_FIQ_EN_MASK) &gt;&gt;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        GICH_VMCR_FIQ_EN_SHIFT;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    vmcrp-&gt;cbpr = (vmcr &amp; GICH_VMCR_CBPR_MASK) &gt;&gt;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        GICH_VMCR_CBPR_SHIFT;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    vmcrp-&gt;eoim = (vmcr &amp; GICH_VMCR_EOI_MODE_MASK) &gt;&gt;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        GICH_VMCR_EOI_MODE_SHIFT;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    vmcrp-&gt;abpr = (vmcr &amp; GICH_VMCR_ALIAS_BINPOINT_MASK) &gt;&gt;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            GICH_VMCR_ALIAS_BINPOINT_SHIFT;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    vmcrp-&gt;bpr  = (vmcr &amp; GICH_VMCR_BINPOINT_MASK) &gt;&gt;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            GICH_VMCR_BINPOINT_SHIFT;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    vmcrp-&gt;pmr  = ((vmcr &amp; GICH_VMCR_PRIMASK_MASK) &gt;&gt;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            GICH_VMCR_PRIMASK_SHIFT) &lt;&lt; GICV_PMR_PRIORITY_SHIFT;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;}</div>
<div class="ttc" id="astructvgic__vmcr_html_ad62f4acb1c7a492398587a4c8db36536"><div class="ttname"><a href="structvgic__vmcr.html#ad62f4acb1c7a492398587a4c8db36536">vgic_vmcr::grpen0</a></div><div class="ttdeci">u32 grpen0</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00155">vgic.h:155</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_aa740568c7a160fed9d2576ef2908a377_icgraph.png" border="0" usemap="#avgic_8h_aa740568c7a160fed9d2576ef2908a377_icgraph" alt=""/></div>
<map name="avgic_8h_aa740568c7a160fed9d2576ef2908a377_icgraph" id="avgic_8h_aa740568c7a160fed9d2576ef2908a377_icgraph">
<area shape="rect" title=" " alt="" coords="2737,360,2877,387"/>
<area shape="rect" href="vgic-mmio_8c.html#ad275c2ef6d5f7f0d79f101a7dd6dda3a" title=" " alt="" coords="2572,360,2689,387"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a66220e48f014a2eb167e50df6bc556b9" title=" " alt="" coords="2368,5,2473,32"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#add00c3e7b785796c7d79e285113a13a5" title=" " alt="" coords="2368,56,2473,83"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a008ada66aee21124d80a1d2816ab6cf8" title=" " alt="" coords="2372,107,2469,133"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#abbf917fe24a7fcb7aa2f06fec6016b45" title=" " alt="" coords="2360,157,2481,184"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a1168d377372fe83d0bc82d0f1e70a469" title=" " alt="" coords="2360,208,2481,235"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#aea894bbbe8c470fc8721c81922b98254" title=" " alt="" coords="2369,259,2472,285"/>
<area shape="rect" href="vgic_8c.html#a3059bfcee1ad30f581150d06c07d68e8" title=" " alt="" coords="2317,309,2524,336"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a9a6ff5961084331631a38b15ad56ee3a" title=" " alt="" coords="2369,360,2473,387"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a98e7ca9700748f32119b3df93fb9702a" title=" " alt="" coords="2369,411,2473,437"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a5df87a6d208537d7e190b738b53a7244" title=" " alt="" coords="2373,461,2469,488"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a462776a9a850970c8e333d150e70041f" title=" " alt="" coords="2361,512,2481,539"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#aa54404fe059ee8c201ece8989b41557a" title=" " alt="" coords="2361,563,2481,589"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#ab7ad03ed75b3e3b3388d5aa051fb3b0c" title=" " alt="" coords="2370,613,2471,640"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#acd71668215fc870cc3e736482a827145" title=" " alt="" coords="2332,664,2509,691"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a2f747e0249d94969dc9bb31ca7e39fa2" title=" " alt="" coords="2330,715,2511,741"/>
<area shape="rect" href="arm_8c.html#ac412fb0d81a53e66d8ac4146e4202f92" title=" " alt="" coords="2081,268,2269,295"/>
<area shape="rect" href="vgic_8c.html#afd47a938061d223b085c0ca0bed6aa71" title=" " alt="" coords="2111,352,2239,379"/>
<area shape="rect" href="kvm__main_8c.html#aac20f0d987f71a47c6701c7e93a0e261" title=" " alt="" coords="1849,167,2023,193"/>
<area shape="rect" href="kvm__main_8c.html#a3de4d6991bdd1a714e8afa6a55136cdd" title=" " alt="" coords="1848,243,2024,269"/>
<area shape="rect" href="arm_8c.html#ad33fe3df0e24d8ff8cb0a7f4657ec3fa" title=" " alt="" coords="1019,268,1169,295"/>
<area shape="rect" href="kvm__main_8c.html#a06ed191cebec13ce2c4a7d15fdeb5a60" title=" " alt="" coords="1624,141,1764,168"/>
<area shape="rect" href="kvm__main_8c.html#a7373edb7b1c787b14e657cd691e64d20" title=" " alt="" coords="1233,148,1380,175"/>
<area shape="rect" href="handle__exit_8c.html#a0b391fc62c2250ecc0bfcdbe1b0a6788" title=" " alt="" coords="1027,149,1161,176"/>
<area shape="rect" href="kvm__main_8c.html#a8e18df0287ddedfd516454aeeb669807" title=" " alt="" coords="1629,192,1759,219"/>
<area shape="rect" href="kvm__main_8c.html#a7256a8615584a9ae83a46c071f6aa0e9" title=" " alt="" coords="1428,203,1549,229"/>
<area shape="rect" href="arm_8c.html#a68df8c6f1b7134e9f23857f092d50056" title=" " alt="" coords="1249,203,1364,229"/>
<area shape="rect" href="psci_8c.html#abe7d85200e79143f87dab785a204fb3a" title=" " alt="" coords="1003,203,1185,229"/>
<area shape="rect" href="psci_8c.html#ac7522f6e0d1805f44a3e932397de4582" title=" " alt="" coords="802,203,946,229"/>
<area shape="rect" href="psci_8c.html#a8f59d47a1b54f561b8c42f509798142e" title=" " alt="" coords="580,155,724,181"/>
<area shape="rect" href="psci_8c.html#a3daa8000eb9717dde07d817c306b052b" title=" " alt="" coords="391,192,506,219"/>
<area shape="rect" href="hypercalls_8c.html#a62d0b161cae45d4a2f865203301f7ac4" title=" " alt="" coords="153,192,339,219"/>
<area shape="rect" href="handle__exit_8c.html#a5c24d46393da9651d3133e2377fd7a69" title=" " alt="" coords="7,167,103,193"/>
<area shape="rect" href="handle__exit_8c.html#ad2545fb9f7329ef0604715b9af4a1746" title=" " alt="" coords="5,217,105,244"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="793,268,955,295"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="559,268,745,295"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="387,268,511,295"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a2acb707aa37dccb7a4d021632629f994" title=" " alt="" coords="1839,352,2033,379"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a496b87a9bc8e2c1a5aa2d9ba2e13cc10" title=" " alt="" coords="1839,409,2033,436"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a86125023f5d85776a3857a2b82dfd2ca" title=" " alt="" coords="1597,345,1791,386"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a566ddfae78ebf930568f0dcc4a1bea21" title=" " alt="" coords="1597,410,1791,451"/>
</map>
</div>

</div>
</div>
<a id="a34fc7617393fc3b19fd3ff9220da2cbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34fc7617393fc3b19fd3ff9220da2cbb">&#9670;&nbsp;</a></span>vgic_v2_has_attr_regs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v2_has_attr_regs </td>
          <td>(</td>
          <td class="paramtype">struct kvm_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-mmio-v2_8c_source.html#l00497">497</a> of file <a class="el" href="vgic-mmio-v2_8c_source.html">vgic-mmio-v2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;{</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structvgic__register__region.html">vgic_register_region</a> *region;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keyword">struct </span>vgic_io_device iodev;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keyword">struct </span><a class="code" href="structvgic__reg__attr.html">vgic_reg_attr</a> reg_attr;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    gpa_t addr;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    ret = <a class="code" href="vgic-kvm-device_8c.html#aa6e244467a63a98cec7698162df49572">vgic_v2_parse_attr</a>(dev, attr, &amp;reg_attr);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160; </div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    vcpu = reg_attr.vcpu;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    addr = reg_attr.addr;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">switch</span> (attr-&gt;group) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_DIST_REGS:</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        iodev.regions = <a class="code" href="vgic-mmio-v2_8c.html#aee710f1eefb272d4376680d9f2ecccad">vgic_v2_dist_registers</a>;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        iodev.nr_regions = ARRAY_SIZE(<a class="code" href="vgic-mmio-v2_8c.html#aee710f1eefb272d4376680d9f2ecccad">vgic_v2_dist_registers</a>);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        iodev.base_addr = 0;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_CPU_REGS:</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        iodev.regions = <a class="code" href="vgic-mmio-v2_8c.html#ac4241542a1457fef0aca460136f5c7ba">vgic_v2_cpu_registers</a>;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        iodev.nr_regions = ARRAY_SIZE(<a class="code" href="vgic-mmio-v2_8c.html#ac4241542a1457fef0aca460136f5c7ba">vgic_v2_cpu_registers</a>);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        iodev.base_addr = 0;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160; </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="comment">/* We only support aligned 32-bit accesses. */</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">if</span> (addr &amp; 3)</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    region = <a class="code" href="vgic-mmio_8c.html#af645443cfc0bc59f41881570759adcb5">vgic_get_mmio_region</a>(vcpu, &amp;iodev, addr, <span class="keyword">sizeof</span>(u32));</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordflow">if</span> (!region)</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;}</div>
<div class="ttc" id="astructvgic__reg__attr_html"><div class="ttname"><a href="structvgic__reg__attr.html">vgic_reg_attr</a></div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00169">vgic.h:169</a></div></div>
<div class="ttc" id="avgic-kvm-device_8c_html_aa6e244467a63a98cec7698162df49572"><div class="ttname"><a href="vgic-kvm-device_8c.html#aa6e244467a63a98cec7698162df49572">vgic_v2_parse_attr</a></div><div class="ttdeci">int vgic_v2_parse_attr(struct kvm_device *dev, struct kvm_device_attr *attr, struct vgic_reg_attr *reg_attr)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00338">vgic-kvm-device.c:338</a></div></div>
<div class="ttc" id="avgic-mmio_8c_html_af645443cfc0bc59f41881570759adcb5"><div class="ttname"><a href="vgic-mmio_8c.html#af645443cfc0bc59f41881570759adcb5">vgic_get_mmio_region</a></div><div class="ttdeci">const struct vgic_register_region * vgic_get_mmio_region(struct kvm_vcpu *vcpu, struct vgic_io_device *iodev, gpa_t addr, int len)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio_8c_source.html#l00950">vgic-mmio.c:950</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a34fc7617393fc3b19fd3ff9220da2cbb_cgraph.png" border="0" usemap="#avgic_8h_a34fc7617393fc3b19fd3ff9220da2cbb_cgraph" alt=""/></div>
<map name="avgic_8h_a34fc7617393fc3b19fd3ff9220da2cbb_cgraph" id="avgic_8h_a34fc7617393fc3b19fd3ff9220da2cbb_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,172,83"/>
<area shape="rect" href="vgic-mmio_8c.html#af645443cfc0bc59f41881570759adcb5" title=" " alt="" coords="220,31,391,57"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa6e244467a63a98cec7698162df49572" title=" " alt="" coords="233,81,378,108"/>
<area shape="rect" href="vgic-mmio_8c.html#a296fe3adbc190bcdb6fde5c708193b03" title=" " alt="" coords="471,5,579,32"/>
<area shape="rect" href="vgic-mmio_8c.html#a340c255c8c139816f1ce975f0bd15c64" title=" " alt="" coords="439,56,612,83"/>
<area shape="rect" href="vgic-mmio_8c.html#abed6aa21152b65b854d1f9513c4ce647" title=" " alt="" coords="660,56,771,83"/>
</map>
</div>

</div>
</div>
<a id="a1e2191b7a20d4cf12614106efac5ced2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e2191b7a20d4cf12614106efac5ced2">&#9670;&nbsp;</a></span>vgic_v2_init_lrs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v2_init_lrs </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v2_8c_source.html#l00021">21</a> of file <a class="el" href="vgic-v2_8c_source.html">vgic-v2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;{</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; kvm_vgic_global_state.nr_lr; i++)</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        <a class="code" href="vgic-v2_8c.html#ad8c03dce2e41ca3c35de3897603bb9e0">vgic_v2_write_lr</a>(i, 0);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;}</div>
<div class="ttc" id="avgic-v2_8c_html_ad8c03dce2e41ca3c35de3897603bb9e0"><div class="ttname"><a href="vgic-v2_8c.html#ad8c03dce2e41ca3c35de3897603bb9e0">vgic_v2_write_lr</a></div><div class="ttdeci">static void vgic_v2_write_lr(int lr, u32 val)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v2_8c_source.html#l00014">vgic-v2.c:14</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a1e2191b7a20d4cf12614106efac5ced2_cgraph.png" border="0" usemap="#avgic_8h_a1e2191b7a20d4cf12614106efac5ced2_cgraph" alt=""/></div>
<map name="avgic_8h_a1e2191b7a20d4cf12614106efac5ced2_cgraph" id="avgic_8h_a1e2191b7a20d4cf12614106efac5ced2_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,128,32"/>
<area shape="rect" href="vgic-v2_8c.html#ad8c03dce2e41ca3c35de3897603bb9e0" title=" " alt="" coords="176,5,304,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a1e2191b7a20d4cf12614106efac5ced2_icgraph.png" border="0" usemap="#avgic_8h_a1e2191b7a20d4cf12614106efac5ced2_icgraph" alt=""/></div>
<map name="avgic_8h_a1e2191b7a20d4cf12614106efac5ced2_icgraph" id="avgic_8h_a1e2191b7a20d4cf12614106efac5ced2_icgraph">
<area shape="rect" title=" " alt="" coords="1287,81,1409,108"/>
<area shape="rect" href="vgic-init_8c.html#aefd1e0e9cd080919b043406251dfa0b8" title=" " alt="" coords="1028,81,1239,108"/>
<area shape="rect" href="arm_8c.html#a451b50b80474a3cf090fcce753c8c642" title=" " alt="" coords="815,81,980,108"/>
<area shape="rect" href="arm_8c.html#a2dfd4facec6b758ea01c34f9789486d8" title=" " alt="" coords="649,56,767,83"/>
<area shape="rect" href="arm_8c.html#a45a99f5a1905e2b85f69a767313abfd7" title=" " alt="" coords="653,107,763,133"/>
<area shape="rect" href="arm_8c.html#a0769d67e6376c5081aac75ea3783df2f" title=" " alt="" coords="458,56,562,83"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="204,5,332,32"/>
<area shape="rect" href="arm_8c.html#ac1582780a8801f86aa06da8b95cbcfe9" title=" " alt="" coords="165,56,371,83"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="5,56,117,83"/>
<area shape="rect" href="arm_8c.html#a3c73ef13f7491129779b02da5a9a7442" title=" " alt="" coords="419,107,601,133"/>
<area shape="rect" href="arm_8c.html#a289457d5cabd2e7e2cda634bc6277311" title=" " alt="" coords="209,107,327,133"/>
</map>
</div>

</div>
</div>
<a id="a8321cd156f283292cc531c7ca6358193"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8321cd156f283292cc531c7ca6358193">&#9670;&nbsp;</a></span>vgic_v2_load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v2_load </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v2_8c_source.html#l00457">457</a> of file <a class="el" href="vgic-v2_8c_source.html">vgic-v2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;{</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keyword">struct </span>vgic_v2_cpu_if *cpu_if = &amp;vcpu-&gt;arch.vgic_cpu.vgic_v2;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160; </div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    writel_relaxed(cpu_if-&gt;vgic_vmcr,</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;               kvm_vgic_global_state.vctrl_base + GICH_VMCR);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    writel_relaxed(cpu_if-&gt;vgic_apr,</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;               kvm_vgic_global_state.vctrl_base + GICH_APR);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a8321cd156f283292cc531c7ca6358193_icgraph.png" border="0" usemap="#avgic_8h_a8321cd156f283292cc531c7ca6358193_icgraph" alt=""/></div>
<map name="avgic_8h_a8321cd156f283292cc531c7ca6358193_icgraph" id="avgic_8h_a8321cd156f283292cc531c7ca6358193_icgraph">
<area shape="rect" title=" " alt="" coords="1637,237,1744,264"/>
<area shape="rect" href="vgic_8c.html#a54d5d884ac662357df5661d80f5160e3" title=" " alt="" coords="1469,237,1589,264"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1263,237,1421,264"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="825,31,1021,57"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="1069,136,1215,163"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1077,237,1207,264"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="1085,376,1199,403"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="1098,300,1186,327"/>
<area shape="rect" href="handle__exit_8c.html#ae96aab7918301d55b908034db5855e3d" title=" " alt="" coords="617,5,751,32"/>
<area shape="rect" href="emulate-nested_8c.html#af5e2eb745d8ac6415fe941ebe754171d" title=" " alt="" coords="832,107,1015,133"/>
<area shape="rect" href="emulate-nested_8c.html#a5759b383dbf067b5e90235d5fd032ab5" title=" " alt="" coords="597,157,771,184"/>
<area shape="rect" href="handle__exit_8c.html#a5c24d46393da9651d3133e2377fd7a69" title=" " alt="" coords="636,56,732,83"/>
<area shape="rect" href="handle__exit_8c.html#aeaf983f5c40202edc8b07a76603330cd" title=" " alt="" coords="637,107,731,133"/>
<area shape="rect" href="sys__regs_8c.html#a315e661b6f1cb224596267000909a1ac" title=" " alt="" coords="384,145,543,172"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="835,161,1011,188"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="603,208,765,235"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,263,336,289"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="843,313,1004,340"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="384,197,543,238"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,288,129,315"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="591,313,777,340"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="884,415,963,441"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="628,415,740,441"/>
</map>
</div>

</div>
</div>
<a id="ac8de91a1f816dcd3b3edba1d074a1aca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8de91a1f816dcd3b3edba1d074a1aca">&#9670;&nbsp;</a></span>vgic_v2_map_resources()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v2_map_resources </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v2_8c_source.html#l00289">289</a> of file <a class="el" href="vgic-v2_8c_source.html">vgic-v2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;{</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keyword">struct </span>vgic_dist *dist = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vgic_8h.html#adf701ae1a62928f5d797c6297fcf0364">IS_VGIC_ADDR_UNDEF</a>(dist-&gt;vgic_dist_base) ||</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <a class="code" href="vgic_8h.html#adf701ae1a62928f5d797c6297fcf0364">IS_VGIC_ADDR_UNDEF</a>(dist-&gt;vgic_cpu_base)) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        kvm_debug(<span class="stringliteral">&quot;Need to set vgic cpu and dist addresses first\n&quot;</span>);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="vgic-v2_8c.html#a264fb134741ac9d0b075dff21880d8f1">vgic_v2_check_base</a>(dist-&gt;vgic_dist_base, dist-&gt;vgic_cpu_base)) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        kvm_debug(<span class="stringliteral">&quot;VGIC CPU and dist frames overlap\n&quot;</span>);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">     * Initialize the vgic if this hasn&#39;t already been done on demand by</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">     * accessing the vgic state from userspace.</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    ret = <a class="code" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57">vgic_init</a>(kvm);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">if</span> (ret) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        kvm_err(<span class="stringliteral">&quot;Unable to initialize VGIC dynamic data structures\n&quot;</span>);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">if</span> (!static_branch_unlikely(&amp;vgic_v2_cpuif_trap)) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        ret = <a class="code" href="mmu_8c.html#aceb0aaa6f23e8883c4fe0b6ef8001f04">kvm_phys_addr_ioremap</a>(kvm, dist-&gt;vgic_cpu_base,</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                        kvm_vgic_global_state.vcpu_base,</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                        KVM_VGIC_V2_CPU_SIZE, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">if</span> (ret) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            kvm_err(<span class="stringliteral">&quot;Unable to remap VGIC CPU to VCPU\n&quot;</span>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div>
<div class="ttc" id="ammu_8c_html_aceb0aaa6f23e8883c4fe0b6ef8001f04"><div class="ttname"><a href="mmu_8c.html#aceb0aaa6f23e8883c4fe0b6ef8001f04">kvm_phys_addr_ioremap</a></div><div class="ttdeci">int kvm_phys_addr_ioremap(struct kvm *kvm, phys_addr_t guest_ipa, phys_addr_t pa, unsigned long size, bool writable)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l01066">mmu.c:1066</a></div></div>
<div class="ttc" id="avgic-v2_8c_html_a264fb134741ac9d0b075dff21880d8f1"><div class="ttname"><a href="vgic-v2_8c.html#a264fb134741ac9d0b075dff21880d8f1">vgic_v2_check_base</a></div><div class="ttdeci">static bool vgic_v2_check_base(gpa_t dist_base, gpa_t cpu_base)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v2_8c_source.html#l00274">vgic-v2.c:274</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ac8de91a1f816dcd3b3edba1d074a1aca_cgraph.png" border="0" usemap="#avgic_8h_ac8de91a1f816dcd3b3edba1d074a1aca_cgraph" alt=""/></div>
<map name="avgic_8h_ac8de91a1f816dcd3b3edba1d074a1aca_cgraph" id="avgic_8h_ac8de91a1f816dcd3b3edba1d074a1aca_cgraph">
<area shape="rect" title=" " alt="" coords="5,484,184,511"/>
<area shape="rect" href="mmu_8c.html#aceb0aaa6f23e8883c4fe0b6ef8001f04" title=" " alt="" coords="232,337,419,364"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="287,484,364,511"/>
<area shape="rect" href="vgic-v2_8c.html#a264fb134741ac9d0b075dff21880d8f1" title=" " alt="" coords="248,535,403,561"/>
<area shape="rect" href="pgtable_8c.html#aa6720ffb7274162e966c1995acefe084" title=" " alt="" coords="467,240,661,267"/>
<area shape="rect" href="pgtable_8c.html#a2a6ed7242e033a1f32360cbe0e5c2281" title=" " alt="" coords="728,164,873,191"/>
<area shape="rect" href="pgtable_8c.html#a239db42e3530e785e70ec04460752a87" title=" " alt="" coords="958,223,1110,249"/>
<area shape="rect" href="pgtable_8c.html#a0368ee3109cb5510bb12fe6b56e0c7f5" title=" " alt="" coords="723,273,879,300"/>
<area shape="rect" href="pgtable_8c.html#ac74b17e065ba3e68a10f28b594d21e40" title=" " alt="" coords="958,156,1110,183"/>
<area shape="rect" href="pgtable_8c.html#a4819ac158aa1b43844c3a3b5e5a82ac3" title=" " alt="" coords="1201,101,1359,128"/>
<area shape="rect" href="pgtable_8c.html#af01e17f60125c9e093e082e70a43f362" title=" " alt="" coords="1206,156,1354,183"/>
<area shape="rect" href="pgtable_8c.html#a5aa0f5d1f7f2540fea515eb0b198caba" title=" " alt="" coords="1459,56,1615,83"/>
<area shape="rect" href="pgtable_8c.html#ac1a7f01d8f40491309c052bdea628e06" title=" " alt="" coords="1469,107,1604,133"/>
<area shape="rect" href="pgtable_8c.html#a2f4269267d0718905af8540821a6de3d" title=" " alt="" coords="1733,5,1860,32"/>
<area shape="rect" href="pgtable_8c.html#a6207f0c3812f7b386a306b717eb3c230" title=" " alt="" coords="1194,335,1366,361"/>
<area shape="rect" href="pgtable_8c.html#ade0f482b0d10d9aeefa9814ae4a7cf4b" title=" " alt="" coords="1176,219,1384,245"/>
<area shape="rect" href="pgtable_8c.html#acdca989573ec9ed02b9b43a7014140c8" title=" " alt="" coords="1463,392,1610,419"/>
<area shape="rect" href="pgtable_8c.html#a1035b9b6a856794b73334de7cbfb157b" title=" " alt="" coords="1728,595,1865,621"/>
<area shape="rect" href="pgtable_8c.html#a29a6724d2843672cf5db792f2beb968a" title=" " alt="" coords="1432,291,1641,317"/>
<area shape="rect" href="pgtable_8c.html#a1a55037404d4eed23e8e3d0a6dc28dd8" title=" " alt="" coords="1715,544,1878,571"/>
<area shape="rect" href="pgtable_8c.html#a59b91ffe6fadc53223e667c87148c43c" title=" " alt="" coords="1980,645,2151,672"/>
<area shape="rect" href="pgtable_8c.html#a283484eeb78592a5189093e5529e7f8e" title=" " alt="" coords="1985,595,2146,621"/>
<area shape="rect" href="pgtable_8c.html#adcfc585140832fbe68cdf3d3f0a918d4" title=" " alt="" coords="1715,174,1878,215"/>
<area shape="rect" href="pgtable_8c.html#adec3d8cce63231d14b6d3d9e635abf8e" title=" " alt="" coords="1707,240,1886,267"/>
<area shape="rect" href="pgtable_8c.html#a5ab910dc5d47620683abb5d18fb4890f" title=" " alt="" coords="1689,291,1904,317"/>
<area shape="rect" href="pgtable_8c.html#aa480a93c3d8dd6fd53b1105fd604766c" title=" " alt="" coords="2227,308,2373,335"/>
<area shape="rect" href="pgtable_8c.html#a909c28888aa74e4a85ee0c267bb88cc9" title=" " alt="" coords="1715,57,1878,98"/>
<area shape="rect" href="pgtable_8c.html#ab5d02dcf05715a75e3b1a83f4225fa0a" title=" " alt="" coords="1952,123,2179,149"/>
<area shape="rect" href="pgtable_8c.html#ab8689d3ee63e3c9b4f7ce2d27ad083be" title=" " alt="" coords="1713,341,1880,368"/>
<area shape="rect" href="pgtable_8c.html#ad5d5b8e9bcf1629e1c1d47d84878c788" title=" " alt="" coords="1711,392,1883,419"/>
<area shape="rect" href="pgtable_8c.html#a66b14675b92b1a0daa11af2d44d48efe" title=" " alt="" coords="1701,443,1893,469"/>
<area shape="rect" href="nvhe_2tlb_8c.html#ac33897c1b083e65f90d0a3a9d355fc52" title=" " alt="" coords="1968,544,2163,571"/>
<area shape="rect" href="vgic-init_8c.html#a0f9be5cc88c88f6c0180c53b72818d3b" title=" " alt="" coords="492,425,636,452"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="473,477,655,518"/>
<area shape="rect" href="vgic-init_8c.html#a2eee0060a3bdcd2a9e8fe1451a3a3fc2" title=" " alt="" coords="477,543,651,569"/>
<area shape="rect" href="vgic-debug_8c.html#a42534d23071b4f3c441c5f82f9e5c1ce" title=" " alt="" coords="502,593,626,620"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e" title=" " alt="" coords="749,669,852,696"/>
<area shape="rect" href="vgic-its_8c.html#afd97b5d03d2b30ae4481443cdea2e739" title=" " alt="" coords="489,309,639,350"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a839b15883ba8f9de35a03ffce32fdf7f" title=" " alt="" coords="467,644,661,671"/>
<area shape="rect" href="vgic-v4_8c.html#a802a906ad744a75b5af33bbd6b31237c" title=" " alt="" coords="514,375,614,401"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="723,484,878,511"/>
<area shape="rect" href="irqchip_8c.html#a5ae37186e6e6d1594767f83df8bab64a" title=" " alt="" coords="951,511,1117,537"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="958,460,1110,487"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="1194,460,1366,487"/>
<area shape="rect" href="vgic-v2_8c.html#a4e8ee3d5f7c8fadbf0a645df67a1c5a2" title=" " alt="" coords="739,539,862,565"/>
<area shape="rect" href="vgic-v3_8c.html#abe9a2245dfa0d76d61c99b60f714a513" title=" " alt="" coords="739,589,862,616"/>
<area shape="rect" href="vgic-v4_8c.html#af99c2f70dd91a57879b3a2f583e49a4a" title=" " alt="" coords="709,375,892,401"/>
<area shape="rect" href="vgic-v4_8c.html#ac805e466fa8f454112c11904ef8d41ce" title=" " alt="" coords="731,425,871,452"/>
<area shape="rect" href="vgic-v4_8c.html#ac22161596c9858cc700bab08c03fc422" title=" " alt="" coords="940,377,1128,404"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1219,385,1341,412"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ac8de91a1f816dcd3b3edba1d074a1aca_icgraph.png" border="0" usemap="#avgic_8h_ac8de91a1f816dcd3b3edba1d074a1aca_icgraph" alt=""/></div>
<map name="avgic_8h_ac8de91a1f816dcd3b3edba1d074a1aca_icgraph" id="avgic_8h_ac8de91a1f816dcd3b3edba1d074a1aca_icgraph">
<area shape="rect" title=" " alt="" coords="643,13,821,39"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="404,13,595,39"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,5,356,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="aa6e244467a63a98cec7698162df49572"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6e244467a63a98cec7698162df49572">&#9670;&nbsp;</a></span>vgic_v2_parse_attr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v2_parse_attr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structvgic__reg__attr.html">vgic_reg_attr</a> *&#160;</td>
          <td class="paramname"><em>reg_attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00338">338</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;{</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordtype">int</span> cpuid;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    cpuid = FIELD_GET(KVM_DEV_ARM_VGIC_CPUID_MASK, attr-&gt;attr);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    reg_attr-&gt;<a class="code" href="structvgic__reg__attr.html#a0f43e17045dc6b13404b4759e0fccad1">vcpu</a> = kvm_get_vcpu_by_id(dev-&gt;kvm, cpuid);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    reg_attr-&gt;<a class="code" href="structvgic__reg__attr.html#a19ed06c96175609f3d98858c1eceec59">addr</a> = attr-&gt;attr &amp; KVM_DEV_ARM_VGIC_OFFSET_MASK;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div>
<div class="ttc" id="astructvgic__reg__attr_html_a0f43e17045dc6b13404b4759e0fccad1"><div class="ttname"><a href="structvgic__reg__attr.html#a0f43e17045dc6b13404b4759e0fccad1">vgic_reg_attr::vcpu</a></div><div class="ttdeci">struct kvm_vcpu * vcpu</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00170">vgic.h:170</a></div></div>
<div class="ttc" id="astructvgic__reg__attr_html_a19ed06c96175609f3d98858c1eceec59"><div class="ttname"><a href="structvgic__reg__attr.html#a19ed06c96175609f3d98858c1eceec59">vgic_reg_attr::addr</a></div><div class="ttdeci">gpa_t addr</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00171">vgic.h:171</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_aa6e244467a63a98cec7698162df49572_icgraph.png" border="0" usemap="#avgic_8h_aa6e244467a63a98cec7698162df49572_icgraph" alt=""/></div>
<map name="avgic_8h_aa6e244467a63a98cec7698162df49572_icgraph" id="avgic_8h_aa6e244467a63a98cec7698162df49572_icgraph">
<area shape="rect" title=" " alt="" coords="420,56,565,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="184,31,372,57"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a34fc7617393fc3b19fd3ff9220da2cbb" title=" " alt="" coords="195,81,361,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="6,56,135,83"/>
</map>
</div>

</div>
</div>
<a id="a9b6956f55b0732bd8aa6e5cce3b51b34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b6956f55b0732bd8aa6e5cce3b51b34">&#9670;&nbsp;</a></span>vgic_v2_populate_lr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v2_populate_lr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct vgic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v2_8c_source.html#l00122">122</a> of file <a class="el" href="vgic-v2_8c_source.html">vgic-v2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    u32 val = irq-&gt;intid;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordtype">bool</span> allow_pending = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">if</span> (irq-&gt;active) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        val |= GICH_LR_ACTIVE_BIT;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vgic_8h.html#a67cef97460e9a4080ae437e5a30113a7">vgic_irq_is_sgi</a>(irq-&gt;intid))</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            val |= irq-&gt;active_source &lt;&lt; GICH_LR_PHYSID_CPUID_SHIFT;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vgic_8h.html#a03246bc81a56f8f77c3ee4ea6e27047d">vgic_irq_is_multi_sgi</a>(irq)) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            allow_pending = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            val |= GICH_LR_EOI;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">if</span> (irq-&gt;group)</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        val |= GICH_LR_GROUP1;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span> (irq-&gt;hw &amp;&amp; !vgic_irq_needs_resampling(irq)) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        val |= GICH_LR_HW;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        val |= irq-&gt;hwintid &lt;&lt; GICH_LR_PHYSID_CPUID_SHIFT;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">         * Never set pending+active on a HW interrupt, as the</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">         * pending state is kept at the physical distributor</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">         * level.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">if</span> (irq-&gt;active)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            allow_pending = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">if</span> (irq-&gt;config == VGIC_CONFIG_LEVEL) {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            val |= GICH_LR_EOI;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">             * Software resampling doesn&#39;t work very well</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">             * if we allow P+A, so let&#39;s not do that.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordflow">if</span> (irq-&gt;active)</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                allow_pending = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">if</span> (allow_pending &amp;&amp; <a class="code" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45">irq_is_pending</a>(irq)) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        val |= GICH_LR_PENDING_BIT;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordflow">if</span> (irq-&gt;config == VGIC_CONFIG_EDGE)</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            irq-&gt;pending_latch = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vgic_8h.html#a67cef97460e9a4080ae437e5a30113a7">vgic_irq_is_sgi</a>(irq-&gt;intid)) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            u32 src = ffs(irq-&gt;source);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="keywordflow">if</span> (WARN_RATELIMIT(!src, <span class="stringliteral">&quot;No SGI source for INTID %d\n&quot;</span>,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                       irq-&gt;intid))</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            val |= (src - 1) &lt;&lt; GICH_LR_PHYSID_CPUID_SHIFT;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            irq-&gt;source &amp;= ~(1 &lt;&lt; (src - 1));</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">if</span> (irq-&gt;source) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                irq-&gt;pending_latch = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                val |= GICH_LR_EOI;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">     * Level-triggered mapped IRQs are special because we only observe</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">     * rising edges as input to the VGIC.  We therefore lower the line</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">     * level here, so that we can take new virtual IRQs.  See</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">     * vgic_v2_fold_lr_state for more info.</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vgic_8h.html#a9c8f3a32a17b2384ea1cc0c6e0340ad7">vgic_irq_is_mapped_level</a>(irq) &amp;&amp; (val &amp; GICH_LR_PENDING_BIT))</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        irq-&gt;line_level = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="comment">/* The GICv2 LR only holds five bits of priority. */</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    val |= (irq-&gt;priority &gt;&gt; 3) &lt;&lt; GICH_LR_PRIORITY_SHIFT;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    vcpu-&gt;arch.vgic_cpu.vgic_v2.vgic_lr[lr] = val;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div>
<div class="ttc" id="avgic_8h_html_a03246bc81a56f8f77c3ee4ea6e27047d"><div class="ttname"><a href="vgic_8h.html#a03246bc81a56f8f77c3ee4ea6e27047d">vgic_irq_is_multi_sgi</a></div><div class="ttdeci">static bool vgic_irq_is_multi_sgi(struct vgic_irq *irq)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00130">vgic.h:130</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a9b6956f55b0732bd8aa6e5cce3b51b34_cgraph.png" border="0" usemap="#avgic_8h_a9b6956f55b0732bd8aa6e5cce3b51b34_cgraph" alt=""/></div>
<map name="avgic_8h_a9b6956f55b0732bd8aa6e5cce3b51b34_cgraph" id="avgic_8h_a9b6956f55b0732bd8aa6e5cce3b51b34_cgraph">
<area shape="rect" title=" " alt="" coords="5,33,157,60"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="620,33,736,60"/>
<area shape="rect" href="vgic_8h.html#a9c8f3a32a17b2384ea1cc0c6e0340ad7" title=" " alt="" coords="209,26,360,67"/>
<area shape="rect" href="vgic_8h.html#a03246bc81a56f8f77c3ee4ea6e27047d" title=" " alt="" coords="205,92,364,118"/>
<area shape="rect" href="vgic_8h.html#a9bdd8f789c7055ff9681448eecde7072" title=" " alt="" coords="412,58,572,85"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a9b6956f55b0732bd8aa6e5cce3b51b34_icgraph.png" border="0" usemap="#avgic_8h_a9b6956f55b0732bd8aa6e5cce3b51b34_icgraph" alt=""/></div>
<map name="avgic_8h_a9b6956f55b0732bd8aa6e5cce3b51b34_icgraph" id="avgic_8h_a9b6956f55b0732bd8aa6e5cce3b51b34_icgraph">
<area shape="rect" title=" " alt="" coords="1011,5,1163,32"/>
<area shape="rect" href="vgic_8c.html#a1d440ccc621cee03cf929f67f1fc5f6a" title=" " alt="" coords="833,5,963,32"/>
<area shape="rect" href="vgic_8c.html#a498227d2a82836ba11a046b68857e3a3" title=" " alt="" coords="643,5,785,32"/>
<area shape="rect" href="vgic_8c.html#a5fb6266a1f361c1945f5feb862c1cf31" title=" " alt="" coords="412,5,595,32"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="aa3e64817232a1ce5658b7f3147f7f554"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3e64817232a1ce5658b7f3147f7f554">&#9670;&nbsp;</a></span>vgic_v2_probe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v2_probe </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="vgic-init_8c.html#a7b7c49d17fa603aa8433b0d402f9efe1">gic_kvm_info</a> *&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>vgic_v2_probe - probe for a VGICv2 compatible interrupt controller @info: pointer to the GIC description</p>
<p>Returns 0 if the VGICv2 has been probed successfully, returns an error code otherwise </p>

<p class="definition">Definition at line <a class="el" href="vgic-v2_8c_source.html#l00337">337</a> of file <a class="el" href="vgic-v2_8c_source.html">vgic-v2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;{</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    u32 vtr;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">if</span> (is_protected_kvm_enabled()) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        kvm_err(<span class="stringliteral">&quot;GICv2 not supported in protected mode\n&quot;</span>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">if</span> (!info-&gt;vctrl.start) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        kvm_err(<span class="stringliteral">&quot;GICH not present in the firmware table\n&quot;</span>);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span> (!PAGE_ALIGNED(info-&gt;vcpu.start) ||</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        !PAGE_ALIGNED(resource_size(&amp;info-&gt;vcpu))) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        kvm_info(<span class="stringliteral">&quot;GICV region size/alignment is unsafe, using trapping (reduced performance)\n&quot;</span>);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        ret = <a class="code" href="mmu_8c.html#af062326f5ca9b42e66721620681afc52">create_hyp_io_mappings</a>(info-&gt;vcpu.start,</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                         resource_size(&amp;info-&gt;vcpu),</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                         &amp;kvm_vgic_global_state.vcpu_base_va,</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                         &amp;kvm_vgic_global_state.vcpu_hyp_va);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">if</span> (ret) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            kvm_err(<span class="stringliteral">&quot;Cannot map GICV into hyp\n&quot;</span>);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        static_branch_enable(&amp;vgic_v2_cpuif_trap);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    ret = <a class="code" href="mmu_8c.html#af062326f5ca9b42e66721620681afc52">create_hyp_io_mappings</a>(info-&gt;vctrl.start,</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                     resource_size(&amp;info-&gt;vctrl),</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                     &amp;kvm_vgic_global_state.vctrl_base,</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                     &amp;kvm_vgic_global_state.vctrl_hyp);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">if</span> (ret) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        kvm_err(<span class="stringliteral">&quot;Cannot map VCTRL into hyp\n&quot;</span>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    vtr = readl_relaxed(kvm_vgic_global_state.vctrl_base + GICH_VTR);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    kvm_vgic_global_state.nr_lr = (vtr &amp; 0x3f) + 1;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    ret = <a class="code" href="vgic-kvm-device_8c.html#aa01e5dcf80e608f64f5428d054d17a84">kvm_register_vgic_device</a>(KVM_DEV_TYPE_ARM_VGIC_V2);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">if</span> (ret) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        kvm_err(<span class="stringliteral">&quot;Cannot register GICv2 KVM device\n&quot;</span>);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    kvm_vgic_global_state.can_emulate_gicv2 = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    kvm_vgic_global_state.vcpu_base = info-&gt;vcpu.start;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    kvm_vgic_global_state.type = VGIC_V2;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    kvm_vgic_global_state.max_gic_vcpus = VGIC_V2_MAX_CPUS;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    kvm_debug(<span class="stringliteral">&quot;vgic-v2@%llx\n&quot;</span>, info-&gt;vctrl.start);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;out:</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">if</span> (kvm_vgic_global_state.vctrl_base)</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        iounmap(kvm_vgic_global_state.vctrl_base);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">if</span> (kvm_vgic_global_state.vcpu_base_va)</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        iounmap(kvm_vgic_global_state.vcpu_base_va);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;}</div>
<div class="ttc" id="ammu_8c_html_af062326f5ca9b42e66721620681afc52"><div class="ttname"><a href="mmu_8c.html#af062326f5ca9b42e66721620681afc52">create_hyp_io_mappings</a></div><div class="ttdeci">int create_hyp_io_mappings(phys_addr_t phys_addr, size_t size, void __iomem **kaddr, void __iomem **haddr)</div><div class="ttdef"><b>Definition:</b> <a href="mmu_8c_source.html#l00740">mmu.c:740</a></div></div>
<div class="ttc" id="avgic-kvm-device_8c_html_aa01e5dcf80e608f64f5428d054d17a84"><div class="ttname"><a href="vgic-kvm-device_8c.html#aa01e5dcf80e608f64f5428d054d17a84">kvm_register_vgic_device</a></div><div class="ttdeci">int kvm_register_vgic_device(unsigned long type)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00316">vgic-kvm-device.c:316</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_aa3e64817232a1ce5658b7f3147f7f554_cgraph.png" border="0" usemap="#avgic_8h_aa3e64817232a1ce5658b7f3147f7f554_cgraph" alt=""/></div>
<map name="avgic_8h_aa3e64817232a1ce5658b7f3147f7f554_cgraph" id="avgic_8h_aa3e64817232a1ce5658b7f3147f7f554_cgraph">
<area shape="rect" title=" " alt="" coords="5,164,121,191"/>
<area shape="rect" href="mmu_8c.html#af062326f5ca9b42e66721620681afc52" title=" " alt="" coords="173,132,357,159"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa01e5dcf80e608f64f5428d054d17a84" title=" " alt="" coords="169,189,361,216"/>
<area shape="rect" href="mmu_8c.html#ae887a1611ab69f37917bb0f05530e62d" title=" " alt="" coords="423,117,584,158"/>
<area shape="rect" href="mmu_8c.html#a528a37af3e2c56c76872b4113cff0877" title=" " alt="" coords="645,95,824,121"/>
<area shape="rect" href="mmu_8c.html#af214df14aaaac0cc598374356bc3bc5b" title=" " alt="" coords="872,44,1101,71"/>
<area shape="rect" href="mm_8h.html#ae155403ed30abe044479dec517afc378" title=" " alt="" coords="647,146,822,187"/>
<area shape="rect" href="mmu_8c.html#a1a724954ee942f0f1223e75cd475c8e7" title=" " alt="" coords="655,237,815,278"/>
<area shape="rect" href="pgtable_8c.html#ad1a61b3aa251ca1150e9359c5c31a173" title=" " alt="" coords="1149,95,1324,121"/>
<area shape="rect" href="pgtable_8c.html#a06c1f113f067476605d118dffebef6a8" title=" " alt="" coords="1387,44,1519,71"/>
<area shape="rect" href="pgtable_8c.html#ab93223f59cefdfdd0abfb060e97f7b45" title=" " alt="" coords="1385,95,1521,121"/>
<area shape="rect" href="pgtable_8c.html#a2a6ed7242e033a1f32360cbe0e5c2281" title=" " alt="" coords="1381,145,1526,172"/>
<area shape="rect" href="pgtable_8c.html#ae28010caa0eb1b8a51d07679e9d08daa" title=" " alt="" coords="1583,44,1772,71"/>
<area shape="rect" href="pgtable_8c.html#acdca989573ec9ed02b9b43a7014140c8" title=" " alt="" coords="1604,95,1751,121"/>
<area shape="rect" href="pgtable_8c.html#ad78e3b5f65ff7e25e23a1fbb89e39a24" title=" " alt="" coords="1820,5,2049,32"/>
<area shape="rect" href="pgtable_8c.html#adec3d8cce63231d14b6d3d9e635abf8e" title=" " alt="" coords="1845,56,2024,83"/>
<area shape="rect" href="pgtable_8c.html#aa480a93c3d8dd6fd53b1105fd604766c" title=" " alt="" coords="2102,5,2249,32"/>
<area shape="rect" href="pgtable_8c.html#ac74b17e065ba3e68a10f28b594d21e40" title=" " alt="" coords="1601,145,1753,172"/>
<area shape="rect" href="pgtable_8c.html#a4819ac158aa1b43844c3a3b5e5a82ac3" title=" " alt="" coords="1855,132,2014,159"/>
<area shape="rect" href="pgtable_8c.html#af01e17f60125c9e093e082e70a43f362" title=" " alt="" coords="1861,183,2009,209"/>
<area shape="rect" href="pgtable_8c.html#a5aa0f5d1f7f2540fea515eb0b198caba" title=" " alt="" coords="2097,132,2253,159"/>
<area shape="rect" href="pgtable_8c.html#ac1a7f01d8f40491309c052bdea628e06" title=" " alt="" coords="2108,183,2243,209"/>
<area shape="rect" href="pgtable_8c.html#a98293d8aa53e4ee188e8dc42f3dc17e9" title=" " alt="" coords="2317,56,2494,83"/>
<area shape="rect" href="pgtable_8c.html#abfea9e86c1a7e719b3d9e35bb045d795" title=" " alt="" coords="2301,107,2509,133"/>
<area shape="rect" href="pgtable_8c.html#a2f4269267d0718905af8540821a6de3d" title=" " alt="" coords="2342,157,2469,184"/>
<area shape="rect" href="pgtable_8c.html#a6e3f339456d5a01daa47962cc12f080e" title=" " alt="" coords="2346,208,2465,235"/>
<area shape="rect" href="mm_8c.html#a74d2915c3948e76518d945f16a1ede94" title=" " alt="" coords="891,145,1083,172"/>
<area shape="rect" href="mm_8c.html#ac26a679af9d176b079755c60fa2e1ce1" title=" " alt="" coords="911,197,1062,238"/>
<area shape="rect" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9" title=" " alt="" coords="1179,196,1294,223"/>
<area shape="rect" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08" title=" " alt="" coords="1171,145,1302,172"/>
<area shape="rect" href="mm_8c.html#aa76ffe9cd77a903ae9b6e5de1617f3a5" title=" " alt="" coords="1155,247,1319,289"/>
<area shape="rect" href="spinlock_8h.html#ae92c9f4a09d239d6060880c35d12a48b" title=" " alt="" coords="1372,255,1535,281"/>
<area shape="rect" href="mmu_8c.html#a3d84d21823759c9e6d2cd3bbcc5b8f48" title=" " alt="" coords="911,262,1062,303"/>
<area shape="rect" href="kvm__main_8c.html#a04cec4716182d98b08f008f317aaf698" title=" " alt="" coords="409,248,597,275"/>
<area shape="rect" href="vgic-its_8c.html#a50d09aacec778677eb4fb2c550a3bea4" title=" " alt="" coords="421,182,586,223"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_aa3e64817232a1ce5658b7f3147f7f554_icgraph.png" border="0" usemap="#avgic_8h_aa3e64817232a1ce5658b7f3147f7f554_icgraph" alt=""/></div>
<map name="avgic_8h_aa3e64817232a1ce5658b7f3147f7f554_icgraph" id="avgic_8h_aa3e64817232a1ce5658b7f3147f7f554_icgraph">
<area shape="rect" title=" " alt="" coords="533,5,649,32"/>
<area shape="rect" href="vgic-init_8c.html#aba3547aa220ca50b1eabca1a39c92943" title=" " alt="" coords="341,5,485,32"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="165,5,293,32"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="5,5,117,32"/>
</map>
</div>

</div>
</div>
<a id="a7c82d0c75692973442f9002861867d9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c82d0c75692973442f9002861867d9c">&#9670;&nbsp;</a></span>vgic_v2_put()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v2_put </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v2_8c_source.html#l00474">474</a> of file <a class="el" href="vgic-v2_8c_source.html">vgic-v2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;{</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keyword">struct </span>vgic_v2_cpu_if *cpu_if = &amp;vcpu-&gt;arch.vgic_cpu.vgic_v2;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <a class="code" href="vgic-v2_8c.html#aa92110fc4f1e453fde0e8e720845854f">vgic_v2_vmcr_sync</a>(vcpu);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    cpu_if-&gt;vgic_apr = readl_relaxed(kvm_vgic_global_state.vctrl_base + GICH_APR);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;}</div>
<div class="ttc" id="avgic-v2_8c_html_aa92110fc4f1e453fde0e8e720845854f"><div class="ttname"><a href="vgic-v2_8c.html#aa92110fc4f1e453fde0e8e720845854f">vgic_v2_vmcr_sync</a></div><div class="ttdeci">void vgic_v2_vmcr_sync(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v2_8c_source.html#l00467">vgic-v2.c:467</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a7c82d0c75692973442f9002861867d9c_cgraph.png" border="0" usemap="#avgic_8h_a7c82d0c75692973442f9002861867d9c_cgraph" alt=""/></div>
<map name="avgic_8h_a7c82d0c75692973442f9002861867d9c_cgraph" id="avgic_8h_a7c82d0c75692973442f9002861867d9c_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,105,32"/>
<area shape="rect" href="vgic-v2_8c.html#aa92110fc4f1e453fde0e8e720845854f" title=" " alt="" coords="153,5,303,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a7c82d0c75692973442f9002861867d9c_icgraph.png" border="0" usemap="#avgic_8h_a7c82d0c75692973442f9002861867d9c_icgraph" alt=""/></div>
<map name="avgic_8h_a7c82d0c75692973442f9002861867d9c_icgraph" id="avgic_8h_a7c82d0c75692973442f9002861867d9c_icgraph">
<area shape="rect" title=" " alt="" coords="1624,237,1724,264"/>
<area shape="rect" href="vgic_8c.html#a96f93a2405989082e3693577b6b2eb5d" title=" " alt="" coords="1463,237,1576,264"/>
<area shape="rect" href="arm_8c.html#a9235365ce64f215b1e024f26d96537cc" title=" " alt="" coords="1263,237,1415,264"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="825,31,1021,57"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="1069,136,1215,163"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1077,237,1207,264"/>
<area shape="rect" href="kvm__main_8c.html#a5f5097640155787fc088aa47b94da0a7" title=" " alt="" coords="1080,376,1204,403"/>
<area shape="rect" href="kvm__main_8c.html#a16e0f63dd5f0d556ed1c9c9999256f85" title=" " alt="" coords="1101,300,1183,327"/>
<area shape="rect" href="handle__exit_8c.html#ae96aab7918301d55b908034db5855e3d" title=" " alt="" coords="617,5,751,32"/>
<area shape="rect" href="emulate-nested_8c.html#af5e2eb745d8ac6415fe941ebe754171d" title=" " alt="" coords="832,107,1015,133"/>
<area shape="rect" href="emulate-nested_8c.html#a5759b383dbf067b5e90235d5fd032ab5" title=" " alt="" coords="597,157,771,184"/>
<area shape="rect" href="handle__exit_8c.html#a5c24d46393da9651d3133e2377fd7a69" title=" " alt="" coords="636,56,732,83"/>
<area shape="rect" href="handle__exit_8c.html#aeaf983f5c40202edc8b07a76603330cd" title=" " alt="" coords="637,107,731,133"/>
<area shape="rect" href="sys__regs_8c.html#a315e661b6f1cb224596267000909a1ac" title=" " alt="" coords="384,145,543,172"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="835,161,1011,188"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="603,208,765,235"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,263,336,289"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="843,313,1004,340"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="384,197,543,238"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,288,129,315"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="591,313,777,340"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="884,415,963,441"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="628,415,740,441"/>
</map>
</div>

</div>
</div>
<a id="aaed5294c86b04a383f712fbf355f8b35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaed5294c86b04a383f712fbf355f8b35">&#9670;&nbsp;</a></span>vgic_v2_restore_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v2_restore_state </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v2_8c_source.html#l00438">438</a> of file <a class="el" href="vgic-v2_8c_source.html">vgic-v2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;{</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keyword">struct </span>vgic_v2_cpu_if *cpu_if = &amp;vcpu-&gt;arch.vgic_cpu.vgic_v2;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordtype">void</span> __iomem *<a class="code" href="early__alloc_8c.html#a74f95eab64fb23344e30879684489f6f">base</a> = kvm_vgic_global_state.vctrl_base;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    u64 used_lrs = cpu_if-&gt;used_lrs;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="early__alloc_8c.html#a74f95eab64fb23344e30879684489f6f">base</a>)</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">if</span> (used_lrs) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        writel_relaxed(cpu_if-&gt;vgic_hcr, <a class="code" href="early__alloc_8c.html#a74f95eab64fb23344e30879684489f6f">base</a> + GICH_HCR);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; used_lrs; i++) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            writel_relaxed(cpu_if-&gt;vgic_lr[i],</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                       <a class="code" href="early__alloc_8c.html#a74f95eab64fb23344e30879684489f6f">base</a> + GICH_LR0 + (i * 4));</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_aaed5294c86b04a383f712fbf355f8b35_icgraph.png" border="0" usemap="#avgic_8h_aaed5294c86b04a383f712fbf355f8b35_icgraph" alt=""/></div>
<map name="avgic_8h_aaed5294c86b04a383f712fbf355f8b35_icgraph" id="avgic_8h_aaed5294c86b04a383f712fbf355f8b35_icgraph">
<area shape="rect" title=" " alt="" coords="833,5,999,32"/>
<area shape="rect" href="vgic_8c.html#a2c03235bdb8dabad2ac5a43b15b501db" title=" " alt="" coords="643,5,785,32"/>
<area shape="rect" href="vgic_8c.html#a5fb6266a1f361c1945f5feb862c1cf31" title=" " alt="" coords="412,5,595,32"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="abaef53794d924f0f73627a2b8d3c5b5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaef53794d924f0f73627a2b8d3c5b5c">&#9670;&nbsp;</a></span>vgic_v2_save_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v2_save_state </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v2_8c_source.html#l00424">424</a> of file <a class="el" href="vgic-v2_8c_source.html">vgic-v2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;{</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordtype">void</span> __iomem *<a class="code" href="early__alloc_8c.html#a74f95eab64fb23344e30879684489f6f">base</a> = kvm_vgic_global_state.vctrl_base;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    u64 used_lrs = vcpu-&gt;arch.vgic_cpu.vgic_v2.used_lrs;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="early__alloc_8c.html#a74f95eab64fb23344e30879684489f6f">base</a>)</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">if</span> (used_lrs) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <a class="code" href="vgic-v2_8c.html#acfae48b44d62ba6209e60eb041a96b3b">save_lrs</a>(vcpu, <a class="code" href="early__alloc_8c.html#a74f95eab64fb23344e30879684489f6f">base</a>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        writel_relaxed(0, <a class="code" href="early__alloc_8c.html#a74f95eab64fb23344e30879684489f6f">base</a> + GICH_HCR);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div>
<div class="ttc" id="avgic-v2_8c_html_acfae48b44d62ba6209e60eb041a96b3b"><div class="ttname"><a href="vgic-v2_8c.html#acfae48b44d62ba6209e60eb041a96b3b">save_lrs</a></div><div class="ttdeci">static void save_lrs(struct kvm_vcpu *vcpu, void __iomem *base)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v2_8c_source.html#l00403">vgic-v2.c:403</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_abaef53794d924f0f73627a2b8d3c5b5c_cgraph.png" border="0" usemap="#avgic_8h_abaef53794d924f0f73627a2b8d3c5b5c_cgraph" alt=""/></div>
<map name="avgic_8h_abaef53794d924f0f73627a2b8d3c5b5c_cgraph" id="avgic_8h_abaef53794d924f0f73627a2b8d3c5b5c_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,156,32"/>
<area shape="rect" href="vgic-v2_8c.html#acfae48b44d62ba6209e60eb041a96b3b" title=" " alt="" coords="204,5,280,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_abaef53794d924f0f73627a2b8d3c5b5c_icgraph.png" border="0" usemap="#avgic_8h_abaef53794d924f0f73627a2b8d3c5b5c_icgraph" alt=""/></div>
<map name="avgic_8h_abaef53794d924f0f73627a2b8d3c5b5c_icgraph" id="avgic_8h_abaef53794d924f0f73627a2b8d3c5b5c_icgraph">
<area shape="rect" title=" " alt="" coords="816,5,967,32"/>
<area shape="rect" href="vgic_8c.html#a452e7612799aa3bf3f7819ca4c202ef7" title=" " alt="" coords="641,5,768,32"/>
<area shape="rect" href="vgic_8c.html#a76c600af416fb73e40611d80115edc03" title=" " alt="" coords="412,5,593,32"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a1bc5185e55ce4c03c9eb43a7c4170f42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bc5185e55ce4c03c9eb43a7c4170f42">&#9670;&nbsp;</a></span>vgic_v2_set_underflow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v2_set_underflow </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v2_8c_source.html#l00029">29</a> of file <a class="el" href="vgic-v2_8c_source.html">vgic-v2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;{</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keyword">struct </span>vgic_v2_cpu_if *cpuif = &amp;vcpu-&gt;arch.vgic_cpu.vgic_v2;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    cpuif-&gt;vgic_hcr |= GICH_HCR_UIE;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a1bc5185e55ce4c03c9eb43a7c4170f42_icgraph.png" border="0" usemap="#avgic_8h_a1bc5185e55ce4c03c9eb43a7c4170f42_icgraph" alt=""/></div>
<map name="avgic_8h_a1bc5185e55ce4c03c9eb43a7c4170f42_icgraph" id="avgic_8h_a1bc5185e55ce4c03c9eb43a7c4170f42_icgraph">
<area shape="rect" title=" " alt="" coords="1028,5,1199,32"/>
<area shape="rect" href="vgic_8c.html#a8f6bc92a21e40c3c63b10a95cabfcad3" title=" " alt="" coords="833,5,980,32"/>
<area shape="rect" href="vgic_8c.html#a498227d2a82836ba11a046b68857e3a3" title=" " alt="" coords="643,5,785,32"/>
<area shape="rect" href="vgic_8c.html#a5fb6266a1f361c1945f5feb862c1cf31" title=" " alt="" coords="412,5,595,32"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="aee5662646dba1cb0bceee526547221b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee5662646dba1cb0bceee526547221b1">&#9670;&nbsp;</a></span>vgic_v2_set_vmcr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v2_set_vmcr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structvgic__vmcr.html">vgic_vmcr</a> *&#160;</td>
          <td class="paramname"><em>vmcr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v2_8c_source.html#l00205">205</a> of file <a class="el" href="vgic-v2_8c_source.html">vgic-v2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;{</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keyword">struct </span>vgic_v2_cpu_if *cpu_if = &amp;vcpu-&gt;arch.vgic_cpu.vgic_v2;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    u32 vmcr;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    vmcr = (vmcrp-&gt;grpen0 &lt;&lt; GICH_VMCR_ENABLE_GRP0_SHIFT) &amp;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        GICH_VMCR_ENABLE_GRP0_MASK;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    vmcr |= (vmcrp-&gt;grpen1 &lt;&lt; GICH_VMCR_ENABLE_GRP1_SHIFT) &amp;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        GICH_VMCR_ENABLE_GRP1_MASK;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    vmcr |= (vmcrp-&gt;ackctl &lt;&lt; GICH_VMCR_ACK_CTL_SHIFT) &amp;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        GICH_VMCR_ACK_CTL_MASK;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    vmcr |= (vmcrp-&gt;fiqen &lt;&lt; GICH_VMCR_FIQ_EN_SHIFT) &amp;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        GICH_VMCR_FIQ_EN_MASK;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    vmcr |= (vmcrp-&gt;cbpr &lt;&lt; GICH_VMCR_CBPR_SHIFT) &amp;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        GICH_VMCR_CBPR_MASK;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    vmcr |= (vmcrp-&gt;eoim &lt;&lt; GICH_VMCR_EOI_MODE_SHIFT) &amp;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        GICH_VMCR_EOI_MODE_MASK;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    vmcr |= (vmcrp-&gt;abpr &lt;&lt; GICH_VMCR_ALIAS_BINPOINT_SHIFT) &amp;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        GICH_VMCR_ALIAS_BINPOINT_MASK;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    vmcr |= (vmcrp-&gt;bpr &lt;&lt; GICH_VMCR_BINPOINT_SHIFT) &amp;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        GICH_VMCR_BINPOINT_MASK;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    vmcr |= ((vmcrp-&gt;pmr &gt;&gt; GICV_PMR_PRIORITY_SHIFT) &lt;&lt;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;         GICH_VMCR_PRIMASK_SHIFT) &amp; GICH_VMCR_PRIMASK_MASK;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    cpu_if-&gt;vgic_vmcr = vmcr;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_aee5662646dba1cb0bceee526547221b1_icgraph.png" border="0" usemap="#avgic_8h_aee5662646dba1cb0bceee526547221b1_icgraph" alt=""/></div>
<map name="avgic_8h_aee5662646dba1cb0bceee526547221b1_icgraph" id="avgic_8h_aee5662646dba1cb0bceee526547221b1_icgraph">
<area shape="rect" title=" " alt="" coords="399,157,537,184"/>
<area shape="rect" href="vgic-mmio_8c.html#a33fd399bf664fddf31b1eec1e14c63e0" title=" " alt="" coords="235,157,351,184"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a9a6ff5961084331631a38b15ad56ee3a" title=" " alt="" coords="44,5,148,32"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a98e7ca9700748f32119b3df93fb9702a" title=" " alt="" coords="44,56,148,83"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a5df87a6d208537d7e190b738b53a7244" title=" " alt="" coords="48,107,144,133"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a462776a9a850970c8e333d150e70041f" title=" " alt="" coords="36,157,156,184"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#aa54404fe059ee8c201ece8989b41557a" title=" " alt="" coords="36,208,156,235"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#ab7ad03ed75b3e3b3388d5aa051fb3b0c" title=" " alt="" coords="45,259,147,285"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a2f747e0249d94969dc9bb31ca7e39fa2" title=" " alt="" coords="5,309,187,336"/>
</map>
</div>

</div>
</div>
<a id="aa92110fc4f1e453fde0e8e720845854f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa92110fc4f1e453fde0e8e720845854f">&#9670;&nbsp;</a></span>vgic_v2_vmcr_sync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v2_vmcr_sync </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v2_8c_source.html#l00467">467</a> of file <a class="el" href="vgic-v2_8c_source.html">vgic-v2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;{</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keyword">struct </span>vgic_v2_cpu_if *cpu_if = &amp;vcpu-&gt;arch.vgic_cpu.vgic_v2;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    cpu_if-&gt;vgic_vmcr = readl_relaxed(kvm_vgic_global_state.vctrl_base + GICH_VMCR);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_aa92110fc4f1e453fde0e8e720845854f_icgraph.png" border="0" usemap="#avgic_8h_aa92110fc4f1e453fde0e8e720845854f_icgraph" alt=""/></div>
<map name="avgic_8h_aa92110fc4f1e453fde0e8e720845854f_icgraph" id="avgic_8h_aa92110fc4f1e453fde0e8e720845854f_icgraph">
<area shape="rect" title=" " alt="" coords="1893,144,2043,171"/>
<area shape="rect" href="vgic_8c.html#a751661541b39c02532a54736db22a929" title=" " alt="" coords="1683,119,1845,145"/>
<area shape="rect" href="vgic-v2_8c.html#a7c82d0c75692973442f9002861867d9c" title=" " alt="" coords="1714,169,1814,196"/>
<area shape="rect" href="arm_8c.html#a68df8c6f1b7134e9f23857f092d50056" title=" " alt="" coords="1520,81,1635,108"/>
<area shape="rect" href="handle__exit_8c.html#a0b391fc62c2250ecc0bfcdbe1b0a6788" title=" " alt="" coords="1314,5,1447,32"/>
<area shape="rect" href="psci_8c.html#abe7d85200e79143f87dab785a204fb3a" title=" " alt="" coords="1289,56,1472,83"/>
<area shape="rect" href="arm_8c.html#ad33fe3df0e24d8ff8cb0a7f4657ec3fa" title=" " alt="" coords="1305,107,1456,133"/>
<area shape="rect" href="psci_8c.html#ac7522f6e0d1805f44a3e932397de4582" title=" " alt="" coords="1097,56,1241,83"/>
<area shape="rect" href="psci_8c.html#a8f59d47a1b54f561b8c42f509798142e" title=" " alt="" coords="878,5,1022,32"/>
<area shape="rect" href="psci_8c.html#a3daa8000eb9717dde07d817c306b052b" title=" " alt="" coords="653,5,768,32"/>
<area shape="rect" href="hypercalls_8c.html#a62d0b161cae45d4a2f865203301f7ac4" title=" " alt="" coords="384,56,569,83"/>
<area shape="rect" href="handle__exit_8c.html#a5c24d46393da9651d3133e2377fd7a69" title=" " alt="" coords="209,157,305,184"/>
<area shape="rect" href="handle__exit_8c.html#ad2545fb9f7329ef0604715b9af4a1746" title=" " alt="" coords="207,56,307,83"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="869,208,1031,235"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="617,259,804,285"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,335,129,361"/>
<area shape="rect" href="vgic_8c.html#a96f93a2405989082e3693577b6b2eb5d" title=" " alt="" coords="1521,169,1634,196"/>
<area shape="rect" href="arm_8c.html#a9235365ce64f215b1e024f26d96537cc" title=" " alt="" coords="1305,233,1457,260"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="852,107,1048,133"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="1096,208,1241,235"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1104,360,1233,387"/>
<area shape="rect" href="kvm__main_8c.html#a5f5097640155787fc088aa47b94da0a7" title=" " alt="" coords="1107,309,1231,336"/>
<area shape="rect" href="kvm__main_8c.html#a16e0f63dd5f0d556ed1c9c9999256f85" title=" " alt="" coords="1128,259,1209,285"/>
<area shape="rect" href="handle__exit_8c.html#ae96aab7918301d55b908034db5855e3d" title=" " alt="" coords="643,56,778,83"/>
<area shape="rect" href="emulate-nested_8c.html#af5e2eb745d8ac6415fe941ebe754171d" title=" " alt="" coords="859,157,1041,184"/>
<area shape="rect" href="emulate-nested_8c.html#a5759b383dbf067b5e90235d5fd032ab5" title=" " alt="" coords="624,157,797,184"/>
<area shape="rect" href="handle__exit_8c.html#aeaf983f5c40202edc8b07a76603330cd" title=" " alt="" coords="663,107,758,133"/>
<area shape="rect" href="sys__regs_8c.html#a315e661b6f1cb224596267000909a1ac" title=" " alt="" coords="397,157,556,184"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="862,411,1038,437"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="629,419,792,445"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,360,336,387"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="397,411,556,453"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="911,309,989,336"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="655,309,767,336"/>
</map>
</div>

</div>
</div>
<a id="a98c28ff2dc6b6965cef76e1be35233b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98c28ff2dc6b6965cef76e1be35233b1">&#9670;&nbsp;</a></span>vgic_v3_check_base()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vgic_v3_check_base </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v3_8c_source.html#l00477">477</a> of file <a class="el" href="vgic-v3_8c_source.html">vgic-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;{</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keyword">struct </span>vgic_dist *d = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keyword">struct </span>vgic_redist_region *rdreg;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="vgic_8h.html#adf701ae1a62928f5d797c6297fcf0364">IS_VGIC_ADDR_UNDEF</a>(d-&gt;vgic_dist_base) &amp;&amp;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        d-&gt;vgic_dist_base + KVM_VGIC_V3_DIST_SIZE &lt; d-&gt;vgic_dist_base)</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    list_for_each_entry(rdreg, &amp;d-&gt;rd_regions, list) {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keywordtype">size_t</span> sz = <a class="code" href="vgic_8h.html#a01a6c3c40680e43017d7ba8ec7aadbac">vgic_v3_rd_region_size</a>(kvm, rdreg);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32">vgic_check_iorange</a>(kvm, <a class="code" href="vgic_8h.html#ac91699b3ab8faf4d5222d998fb64b033">VGIC_ADDR_UNDEF</a>,</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                       rdreg-&gt;base, SZ_64K, sz))</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    }</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vgic_8h.html#adf701ae1a62928f5d797c6297fcf0364">IS_VGIC_ADDR_UNDEF</a>(d-&gt;vgic_dist_base))</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160; </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="vgic-v3_8c.html#a8bd03445507515b9722165814955f6fa">vgic_v3_rdist_overlap</a>(kvm, d-&gt;vgic_dist_base,</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                      KVM_VGIC_V3_DIST_SIZE);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;}</div>
<div class="ttc" id="avgic-kvm-device_8c_html_af0cfcc44a93abc13df9a7e364c21cf32"><div class="ttname"><a href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32">vgic_check_iorange</a></div><div class="ttdeci">int vgic_check_iorange(struct kvm *kvm, phys_addr_t ioaddr, phys_addr_t addr, phys_addr_t alignment, phys_addr_t size)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00017">vgic-kvm-device.c:17</a></div></div>
<div class="ttc" id="avgic-v3_8c_html_a8bd03445507515b9722165814955f6fa"><div class="ttname"><a href="vgic-v3_8c.html#a8bd03445507515b9722165814955f6fa">vgic_v3_rdist_overlap</a></div><div class="ttdeci">bool vgic_v3_rdist_overlap(struct kvm *kvm, gpa_t base, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00460">vgic-v3.c:460</a></div></div>
<div class="ttc" id="avgic_8h_html_a01a6c3c40680e43017d7ba8ec7aadbac"><div class="ttname"><a href="vgic_8h.html#a01a6c3c40680e43017d7ba8ec7aadbac">vgic_v3_rd_region_size</a></div><div class="ttdeci">static size_t vgic_v3_rd_region_size(struct kvm *kvm, struct vgic_redist_region *rdreg)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00303">vgic.h:303</a></div></div>
<div class="ttc" id="avgic_8h_html_ac91699b3ab8faf4d5222d998fb64b033"><div class="ttname"><a href="vgic_8h.html#ac91699b3ab8faf4d5222d998fb64b033">VGIC_ADDR_UNDEF</a></div><div class="ttdeci">#define VGIC_ADDR_UNDEF</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00014">vgic.h:14</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a98c28ff2dc6b6965cef76e1be35233b1_cgraph.png" border="0" usemap="#avgic_8h_a98c28ff2dc6b6965cef76e1be35233b1_cgraph" alt=""/></div>
<map name="avgic_8h_a98c28ff2dc6b6965cef76e1be35233b1_cgraph" id="avgic_8h_a98c28ff2dc6b6965cef76e1be35233b1_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,160,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32" title=" " alt="" coords="215,5,365,32"/>
<area shape="rect" href="vgic_8h.html#a01a6c3c40680e43017d7ba8ec7aadbac" title=" " alt="" coords="420,81,593,108"/>
<area shape="rect" href="vgic-v3_8c.html#a8bd03445507515b9722165814955f6fa" title=" " alt="" coords="208,107,372,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a98c28ff2dc6b6965cef76e1be35233b1_icgraph.png" border="0" usemap="#avgic_8h_a98c28ff2dc6b6965cef76e1be35233b1_icgraph" alt=""/></div>
<map name="avgic_8h_a98c28ff2dc6b6965cef76e1be35233b1_icgraph" id="avgic_8h_a98c28ff2dc6b6965cef76e1be35233b1_icgraph">
<area shape="rect" title=" " alt="" coords="1345,111,1500,137"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a7c5d9bcbf29cb46bac8622d8bcc145b2" title=" " alt="" coords="1133,74,1283,115"/>
<area shape="rect" href="vgic-v3_8c.html#a8c2e4753883533516b45a2bbf9dad1ce" title=" " alt="" coords="1119,140,1297,167"/>
<area shape="rect" href="vgic-init_8c.html#ad052e8c724bfbb39c34281df23166a28" title=" " alt="" coords="900,23,1051,49"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722" title=" " alt="" coords="889,74,1062,115"/>
<area shape="rect" href="arm_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="655,23,827,49"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="403,23,603,49"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="651,81,832,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="442,81,563,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40" title=" " alt="" coords="184,56,355,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="184,107,355,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,56,136,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="6,107,135,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,157,135,184"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="880,140,1071,167"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="652,133,831,174"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="441,140,565,167"/>
</map>
</div>

</div>
</div>
<a id="a09a87047453ae4405f560fa3191a05fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09a87047453ae4405f560fa3191a05fa">&#9670;&nbsp;</a></span>vgic_v3_clear_lr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v3_clear_lr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v3_8c_source.html#l00189">189</a> of file <a class="el" href="vgic-v3_8c_source.html">vgic-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;{</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    vcpu-&gt;arch.vgic_cpu.vgic_v3.vgic_lr[lr] = 0;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a09a87047453ae4405f560fa3191a05fa_icgraph.png" border="0" usemap="#avgic_8h_a09a87047453ae4405f560fa3191a05fa_icgraph" alt=""/></div>
<map name="avgic_8h_a09a87047453ae4405f560fa3191a05fa_icgraph" id="avgic_8h_a09a87047453ae4405f560fa3191a05fa_icgraph">
<area shape="rect" title=" " alt="" coords="985,5,1112,32"/>
<area shape="rect" href="vgic_8c.html#ae96881aedd2816f45a65d54bf223562d" title=" " alt="" coords="833,5,937,32"/>
<area shape="rect" href="vgic_8c.html#a498227d2a82836ba11a046b68857e3a3" title=" " alt="" coords="643,5,785,32"/>
<area shape="rect" href="vgic_8c.html#a5fb6266a1f361c1945f5feb862c1cf31" title=" " alt="" coords="412,5,595,32"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="ae6c5f6437d5d194daa8d1485c3dfe27b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6c5f6437d5d194daa8d1485c3dfe27b">&#9670;&nbsp;</a></span>vgic_v3_cpu_sysregs_uaccess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v3_cpu_sysregs_uaccess </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_write</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-sys-reg-v3_8c_source.html#l00351">351</a> of file <a class="el" href="vgic-sys-reg-v3_8c_source.html">vgic-sys-reg-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;{</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keyword">struct </span>kvm_one_reg reg = {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        .id = <a class="code" href="vgic-sys-reg-v3_8c.html#a0bc09e2deb4b346bbe5a850747711fbc">attr_to_id</a>(attr-&gt;attr),</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        .addr   = attr-&gt;addr,</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    };</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">if</span> (is_write)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="sys__regs_8c.html#ab29b04a8d34d81f0cce231f94feba038">kvm_sys_reg_set_user</a>(vcpu, &amp;reg, <a class="code" href="vgic-sys-reg-v3_8c.html#a55723e6703dbadb94b39decec419791b">gic_v3_icc_reg_descs</a>,</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                        ARRAY_SIZE(<a class="code" href="vgic-sys-reg-v3_8c.html#a55723e6703dbadb94b39decec419791b">gic_v3_icc_reg_descs</a>));</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="sys__regs_8c.html#a228e61f9390e36b563ab837dfcf03ae2">kvm_sys_reg_get_user</a>(vcpu, &amp;reg, <a class="code" href="vgic-sys-reg-v3_8c.html#a55723e6703dbadb94b39decec419791b">gic_v3_icc_reg_descs</a>,</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                        ARRAY_SIZE(<a class="code" href="vgic-sys-reg-v3_8c.html#a55723e6703dbadb94b39decec419791b">gic_v3_icc_reg_descs</a>));</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div>
<div class="ttc" id="asys__regs_8c_html_a228e61f9390e36b563ab837dfcf03ae2"><div class="ttname"><a href="sys__regs_8c.html#a228e61f9390e36b563ab837dfcf03ae2">kvm_sys_reg_get_user</a></div><div class="ttdeci">int kvm_sys_reg_get_user(struct kvm_vcpu *vcpu, const struct kvm_one_reg *reg, const struct sys_reg_desc table[], unsigned int num)</div><div class="ttdef"><b>Definition:</b> <a href="sys__regs_8c_source.html#l03680">sys_regs.c:3680</a></div></div>
<div class="ttc" id="asys__regs_8c_html_ab29b04a8d34d81f0cce231f94feba038"><div class="ttname"><a href="sys__regs_8c.html#ab29b04a8d34d81f0cce231f94feba038">kvm_sys_reg_set_user</a></div><div class="ttdeci">int kvm_sys_reg_set_user(struct kvm_vcpu *vcpu, const struct kvm_one_reg *reg, const struct sys_reg_desc table[], unsigned int num)</div><div class="ttdef"><b>Definition:</b> <a href="sys__regs_8c_source.html#l03721">sys_regs.c:3721</a></div></div>
<div class="ttc" id="avgic-sys-reg-v3_8c_html_a0bc09e2deb4b346bbe5a850747711fbc"><div class="ttname"><a href="vgic-sys-reg-v3_8c.html#a0bc09e2deb4b346bbe5a850747711fbc">attr_to_id</a></div><div class="ttdeci">static u64 attr_to_id(u64 attr)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-sys-reg-v3_8c_source.html#l00333">vgic-sys-reg-v3.c:333</a></div></div>
<div class="ttc" id="avgic-sys-reg-v3_8c_html_a55723e6703dbadb94b39decec419791b"><div class="ttname"><a href="vgic-sys-reg-v3_8c.html#a55723e6703dbadb94b39decec419791b">gic_v3_icc_reg_descs</a></div><div class="ttdeci">static const struct sys_reg_desc gic_v3_icc_reg_descs[]</div><div class="ttdef"><b>Definition:</b> <a href="vgic-sys-reg-v3_8c_source.html#l00290">vgic-sys-reg-v3.c:300</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ae6c5f6437d5d194daa8d1485c3dfe27b_cgraph.png" border="0" usemap="#avgic_8h_ae6c5f6437d5d194daa8d1485c3dfe27b_cgraph" alt=""/></div>
<map name="avgic_8h_ae6c5f6437d5d194daa8d1485c3dfe27b_cgraph" id="avgic_8h_ae6c5f6437d5d194daa8d1485c3dfe27b_cgraph">
<area shape="rect" title=" " alt="" coords="5,49,164,90"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a0bc09e2deb4b346bbe5a850747711fbc" title=" " alt="" coords="255,5,339,32"/>
<area shape="rect" href="sys__regs_8c.html#a228e61f9390e36b563ab837dfcf03ae2" title=" " alt="" coords="212,56,383,83"/>
<area shape="rect" href="sys__regs_8c.html#ab29b04a8d34d81f0cce231f94feba038" title=" " alt="" coords="212,107,383,133"/>
<area shape="rect" href="sys__regs_8c.html#af212e5241f19483aede7d85e43a93b42" title=" " alt="" coords="432,56,580,83"/>
<area shape="rect" href="sys__regs_8h.html#acb0346a28ca0b3fd59d3c815d4d683a1" title=" " alt="" coords="431,107,581,133"/>
<area shape="rect" href="sys__regs_8c.html#ac41b37ff19cd3eda5658080a3eb8c558" title=" " alt="" coords="667,56,780,83"/>
<area shape="rect" href="sys__regs_8h.html#a1288fc38e8c8e5e2bbf3cfeb9291cef9" title=" " alt="" coords="665,107,781,133"/>
<area shape="rect" href="sys__regs_8h.html#a5478d1284365aa547695b6889e4a05ef" title=" " alt="" coords="895,19,970,45"/>
<area shape="rect" href="sys__regs_8c.html#a000b8bb9ea7247fee0c7acc84817d960" title=" " alt="" coords="865,69,1000,96"/>
<area shape="rect" href="sys__regs_8h.html#aba3abb7cabe45542d03289fe25af9526" title=" " alt="" coords="1048,19,1168,45"/>
<area shape="rect" href="sys__regs_8h.html#ad57e201c718d43223fb293d770c1ef3b" title=" " alt="" coords="869,132,997,159"/>
<area shape="rect" href="sys__regs_8h.html#a95e3e5f281cf82d91e6a522ee3acb4cc" title=" " alt="" coords="629,157,817,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ae6c5f6437d5d194daa8d1485c3dfe27b_icgraph.png" border="0" usemap="#avgic_8h_ae6c5f6437d5d194daa8d1485c3dfe27b_icgraph" alt=""/></div>
<map name="avgic_8h_ae6c5f6437d5d194daa8d1485c3dfe27b_icgraph" id="avgic_8h_ae6c5f6437d5d194daa8d1485c3dfe27b_icgraph">
<area shape="rect" title=" " alt="" coords="420,23,579,65"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a176e49a1162579b332c8a68ab035e981" title=" " alt="" coords="184,31,372,57"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,56,135,83"/>
</map>
</div>

</div>
</div>
<a id="a744d3ea323c85b7c3528ccc1a3fd6180"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a744d3ea323c85b7c3528ccc1a3fd6180">&#9670;&nbsp;</a></span>vgic_v3_dist_uaccess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v3_dist_uaccess </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32 *&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-mmio-v3_8c_source.html#l01095">1095</a> of file <a class="el" href="vgic-mmio-v3_8c_source.html">vgic-mmio-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;{</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="keyword">struct </span>vgic_io_device dev = {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        .regions = <a class="code" href="vgic-mmio-v3_8c.html#a04f164757c56887adde5a7ba053db28f">vgic_v3_dist_registers</a>,</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        .nr_regions = ARRAY_SIZE(<a class="code" href="vgic-mmio-v3_8c.html#a04f164757c56887adde5a7ba053db28f">vgic_v3_dist_registers</a>),</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    };</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160; </div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="vgic-mmio_8c.html#ae999933ae5e2cc6f0d3910bbe33386ba">vgic_uaccess</a>(vcpu, &amp;dev, is_write, offset, val);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;}</div>
<div class="ttc" id="avgic-mmio-v3_8c_html_a04f164757c56887adde5a7ba053db28f"><div class="ttname"><a href="vgic-mmio-v3_8c.html#a04f164757c56887adde5a7ba053db28f">vgic_v3_dist_registers</a></div><div class="ttdeci">static const struct vgic_register_region vgic_v3_dist_registers[]</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v3_8c_source.html#l00555">vgic-mmio-v3.c:594</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a744d3ea323c85b7c3528ccc1a3fd6180_cgraph.png" border="0" usemap="#avgic_8h_a744d3ea323c85b7c3528ccc1a3fd6180_cgraph" alt=""/></div>
<map name="avgic_8h_a744d3ea323c85b7c3528ccc1a3fd6180_cgraph" id="avgic_8h_a744d3ea323c85b7c3528ccc1a3fd6180_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,168,57"/>
<area shape="rect" href="vgic-mmio_8c.html#ae999933ae5e2cc6f0d3910bbe33386ba" title=" " alt="" coords="216,31,324,57"/>
<area shape="rect" href="vgic-mmio_8c.html#ac361bf23479dea11a94946fb36408b29" title=" " alt="" coords="374,5,518,32"/>
<area shape="rect" href="vgic-mmio_8c.html#a9ae5f9a11d1a32e0fddb9409399b1d4a" title=" " alt="" coords="372,56,520,83"/>
<area shape="rect" href="vgic-mmio_8c.html#af645443cfc0bc59f41881570759adcb5" title=" " alt="" coords="568,31,739,57"/>
<area shape="rect" href="vgic-mmio_8c.html#a296fe3adbc190bcdb6fde5c708193b03" title=" " alt="" coords="819,5,927,32"/>
<area shape="rect" href="vgic-mmio_8c.html#a340c255c8c139816f1ce975f0bd15c64" title=" " alt="" coords="787,56,960,83"/>
<area shape="rect" href="vgic-mmio_8c.html#abed6aa21152b65b854d1f9513c4ce647" title=" " alt="" coords="1008,56,1119,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a744d3ea323c85b7c3528ccc1a3fd6180_icgraph.png" border="0" usemap="#avgic_8h_a744d3ea323c85b7c3528ccc1a3fd6180_icgraph" alt=""/></div>
<map name="avgic_8h_a744d3ea323c85b7c3528ccc1a3fd6180_icgraph" id="avgic_8h_a744d3ea323c85b7c3528ccc1a3fd6180_icgraph">
<area shape="rect" title=" " alt="" coords="420,31,583,57"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a176e49a1162579b332c8a68ab035e981" title=" " alt="" coords="184,31,372,57"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,56,135,83"/>
</map>
</div>

</div>
</div>
<a id="abe9a2245dfa0d76d61c99b60f714a513"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe9a2245dfa0d76d61c99b60f714a513">&#9670;&nbsp;</a></span>vgic_v3_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v3_enable </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v3_8c_source.html#l00260">260</a> of file <a class="el" href="vgic-v3_8c_source.html">vgic-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;{</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keyword">struct </span>vgic_v3_cpu_if *vgic_v3 = &amp;vcpu-&gt;arch.vgic_cpu.vgic_v3;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">     * By forcing VMCR to zero, the GIC will restore the binary</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">     * points to their reset values. Anything else resets to zero</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">     * anyway.</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    vgic_v3-&gt;vgic_vmcr = 0;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">     * If we are emulating a GICv3, we do it in an non-GICv2-compatible</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">     * way, so we force SRE to 1 to demonstrate this to the guest.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">     * Also, we don&#39;t support any form of IRQ/FIQ bypass.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">     * This goes with the spec allowing the value to be RAO/WI.</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> (vcpu-&gt;kvm-&gt;arch.vgic.vgic_model == KVM_DEV_TYPE_ARM_VGIC_V3) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        vgic_v3-&gt;vgic_sre = (ICC_SRE_EL1_DIB |</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                     ICC_SRE_EL1_DFB |</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                     ICC_SRE_EL1_SRE);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        vcpu-&gt;arch.vgic_cpu.pendbaser = <a class="code" href="vgic-v3_8c.html#ad7fb32a10259ea4c5234699892d7c61d">INITIAL_PENDBASER_VALUE</a>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        vgic_v3-&gt;vgic_sre = 0;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    vcpu-&gt;arch.vgic_cpu.num_id_bits = (kvm_vgic_global_state.ich_vtr_el2 &amp;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                       ICH_VTR_ID_BITS_MASK) &gt;&gt;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                       ICH_VTR_ID_BITS_SHIFT;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    vcpu-&gt;arch.vgic_cpu.num_pri_bits = ((kvm_vgic_global_state.ich_vtr_el2 &amp;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                        ICH_VTR_PRI_BITS_MASK) &gt;&gt;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                        ICH_VTR_PRI_BITS_SHIFT) + 1;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment">/* Get the show on the road... */</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    vgic_v3-&gt;vgic_hcr = ICH_HCR_EN;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vgic-v3_8c.html#af8ddaf0943092b5321005d73169d9e1a">group0_trap</a>)</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        vgic_v3-&gt;vgic_hcr |= ICH_HCR_TALL0;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vgic-v3_8c.html#a7b0039a454fbd2fd5431f34cae714df1">group1_trap</a>)</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        vgic_v3-&gt;vgic_hcr |= ICH_HCR_TALL1;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vgic-v3_8c.html#ac2e2971fb50344cb3d4589f366f91c2a">common_trap</a>)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        vgic_v3-&gt;vgic_hcr |= ICH_HCR_TC;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vgic-v3_8c.html#ae2e01e6a2a16c42e03f84746c42541e8">dir_trap</a>)</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        vgic_v3-&gt;vgic_hcr |= ICH_HCR_TDIR;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}</div>
<div class="ttc" id="avgic-v3_8c_html_a7b0039a454fbd2fd5431f34cae714df1"><div class="ttname"><a href="vgic-v3_8c.html#a7b0039a454fbd2fd5431f34cae714df1">group1_trap</a></div><div class="ttdeci">static bool group1_trap</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00017">vgic-v3.c:17</a></div></div>
<div class="ttc" id="avgic-v3_8c_html_ac2e2971fb50344cb3d4589f366f91c2a"><div class="ttname"><a href="vgic-v3_8c.html#ac2e2971fb50344cb3d4589f366f91c2a">common_trap</a></div><div class="ttdeci">static bool common_trap</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00018">vgic-v3.c:18</a></div></div>
<div class="ttc" id="avgic-v3_8c_html_ad7fb32a10259ea4c5234699892d7c61d"><div class="ttname"><a href="vgic-v3_8c.html#ad7fb32a10259ea4c5234699892d7c61d">INITIAL_PENDBASER_VALUE</a></div><div class="ttdeci">#define INITIAL_PENDBASER_VALUE</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00255">vgic-v3.c:255</a></div></div>
<div class="ttc" id="avgic-v3_8c_html_ae2e01e6a2a16c42e03f84746c42541e8"><div class="ttname"><a href="vgic-v3_8c.html#ae2e01e6a2a16c42e03f84746c42541e8">dir_trap</a></div><div class="ttdeci">static bool dir_trap</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00019">vgic-v3.c:19</a></div></div>
<div class="ttc" id="avgic-v3_8c_html_af8ddaf0943092b5321005d73169d9e1a"><div class="ttname"><a href="vgic-v3_8c.html#af8ddaf0943092b5321005d73169d9e1a">group0_trap</a></div><div class="ttdeci">static bool group0_trap</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00016">vgic-v3.c:16</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_abe9a2245dfa0d76d61c99b60f714a513_icgraph.png" border="0" usemap="#avgic_8h_abe9a2245dfa0d76d61c99b60f714a513_icgraph" alt=""/></div>
<map name="avgic_8h_abe9a2245dfa0d76d61c99b60f714a513_icgraph" id="avgic_8h_abe9a2245dfa0d76d61c99b60f714a513_icgraph">
<area shape="rect" title=" " alt="" coords="3044,529,3167,556"/>
<area shape="rect" href="vgic-init_8c.html#a2eee0060a3bdcd2a9e8fe1451a3a3fc2" title=" " alt="" coords="2821,529,2996,556"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="2696,529,2773,556"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="2499,403,2609,429"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="2469,631,2639,657"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="2460,580,2648,607"/>
<area shape="rect" href="vgic-v2_8c.html#ac8de91a1f816dcd3b3edba1d074a1aca" title=" " alt="" coords="2465,529,2643,556"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="2241,377,2393,404"/>
<area shape="rect" href="pmu-emul_8c.html#ac79256eb94d7599687d3294cd40d10b4" title=" " alt="" coords="1086,412,1265,439"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="2004,159,2173,185"/>
<area shape="rect" href="arm_8c.html#a1cc94da0709805c40af7785f8c5811bf" title=" " alt="" coords="2004,377,2173,404"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="2020,327,2157,353"/>
<area shape="rect" href="pmu-emul_8c.html#ab0f1f020b6774de3fb4ff4c8b4e45a5c" title=" " alt="" coords="845,416,1029,443"/>
<area shape="rect" href="pmu-emul_8c.html#ae6434d5e6ad74c608886c368e56d67bc" title=" " alt="" coords="846,365,1029,392"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="611,315,797,341"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,315,129,341"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="1763,5,1947,32"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="1759,159,1951,185"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="1772,210,1939,251"/>
<area shape="rect" href="arch__timer_8c.html#a11b9b6e6338bbec6085332661c934e91" title=" " alt="" coords="1321,59,1492,85"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="1796,108,1915,135"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="1764,276,1947,303"/>
<area shape="rect" href="arch__timer_8c.html#a27c9feb35e6d7126c054c3325fea59b0" title=" " alt="" coords="1547,5,1699,32"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="1343,5,1471,32"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="1119,5,1231,32"/>
<area shape="rect" href="arch__timer_8c.html#a4bf6ac76380146820b45b06feb3eab27" title=" " alt="" coords="1540,173,1707,200"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1327,169,1486,196"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="1077,213,1273,240"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="1103,112,1248,139"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1111,61,1240,88"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="1118,163,1233,189"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="893,264,981,291"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="849,25,1025,52"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="623,72,785,99"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,131,336,157"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="857,192,1018,219"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="394,65,553,106"/>
<area shape="rect" href="arch__timer_8c.html#a0209ad4256c7a1fd5ea70b6abe030954" title=" " alt="" coords="1540,107,1707,149"/>
<area shape="rect" href="sys__regs_8c.html#a9457451d95fa776f653cff6c2a8d31f9" title=" " alt="" coords="1335,115,1478,141"/>
<area shape="rect" href="arch__timer_8c.html#a6ae73bff466fcdc60319f9726d53b571" title=" " alt="" coords="855,315,1020,341"/>
<area shape="rect" href="vgic-irqfd_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="1755,327,1956,353"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="1769,377,1941,404"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="1547,377,1699,404"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="1329,377,1484,404"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="1085,463,1266,505"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="2252,631,2381,657"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="2252,681,2381,708"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="2251,580,2382,607"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="2221,529,2412,556"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="384,446,563,487"/>
</map>
</div>

</div>
</div>
<a id="a3d53ba6e7f70704effc37ea2c4b0c04b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d53ba6e7f70704effc37ea2c4b0c04b">&#9670;&nbsp;</a></span>vgic_v3_fold_lr_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v3_fold_lr_state </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v3_8c_source.html#l00035">35</a> of file <a class="el" href="vgic-v3_8c_source.html">vgic-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;{</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keyword">struct </span>vgic_cpu *vgic_cpu = &amp;vcpu-&gt;arch.vgic_cpu;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keyword">struct </span>vgic_v3_cpu_if *cpuif = &amp;vgic_cpu-&gt;vgic_v3;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    u32 model = vcpu-&gt;kvm-&gt;arch.vgic.vgic_model;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordtype">int</span> lr;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="vgic_8h.html#a0e2b76dd7108772ed1441b1e64f0be4b">DEBUG_SPINLOCK_BUG_ON</a>(!irqs_disabled());</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    cpuif-&gt;vgic_hcr &amp;= ~ICH_HCR_UIE;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">for</span> (lr = 0; lr &lt; cpuif-&gt;used_lrs; lr++) {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        u64 val = cpuif-&gt;vgic_lr[lr];</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        u32 intid, cpuid;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keyword">struct </span>vgic_irq *irq;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <span class="keywordtype">bool</span> is_v2_sgi = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="keywordtype">bool</span> deactivated;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        cpuid = val &amp; GICH_LR_PHYSID_CPUID;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        cpuid &gt;&gt;= GICH_LR_PHYSID_CPUID_SHIFT;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="keywordflow">if</span> (model == KVM_DEV_TYPE_ARM_VGIC_V3) {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            intid = val &amp; ICH_LR_VIRTUAL_ID_MASK;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            intid = val &amp; GICH_LR_VIRTUALID;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            is_v2_sgi = <a class="code" href="vgic_8h.html#a67cef97460e9a4080ae437e5a30113a7">vgic_irq_is_sgi</a>(intid);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        }</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="comment">/* Notify fds when the guest EOI&#39;ed a level-triggered IRQ */</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vgic-v3_8c.html#af06b2ebdf897b8d96928fd86e3bca056">lr_signals_eoi_mi</a>(val) &amp;&amp; vgic_valid_spi(vcpu-&gt;kvm, intid))</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            kvm_notify_acked_irq(vcpu-&gt;kvm, 0,</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                         intid - VGIC_NR_PRIVATE_IRQS);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        irq = <a class="code" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516">vgic_get_irq</a>(vcpu-&gt;kvm, vcpu, intid);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordflow">if</span> (!irq)   <span class="comment">/* An LPI could have been unmapped. */</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        raw_spin_lock(&amp;irq-&gt;irq_lock);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="comment">/* Always preserve the active bit, note deactivation */</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        deactivated = irq-&gt;active &amp;&amp; !(val &amp; ICH_LR_ACTIVE_BIT);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        irq-&gt;active = !!(val &amp; ICH_LR_ACTIVE_BIT);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keywordflow">if</span> (irq-&gt;active &amp;&amp; is_v2_sgi)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            irq-&gt;active_source = cpuid;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="comment">/* Edge is the only case where we preserve the pending bit */</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">if</span> (irq-&gt;config == VGIC_CONFIG_EDGE &amp;&amp;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            (val &amp; ICH_LR_PENDING_BIT)) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            irq-&gt;pending_latch = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <span class="keywordflow">if</span> (is_v2_sgi)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                irq-&gt;source |= (1 &lt;&lt; cpuid);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        }</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">         * Clear soft pending state when level irqs have been acked.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">if</span> (irq-&gt;config == VGIC_CONFIG_LEVEL &amp;&amp; !(val &amp; ICH_LR_STATE))</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            irq-&gt;pending_latch = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="comment">/* Handle resampling for mapped interrupts if required */</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <a class="code" href="vgic_8c.html#a19d27bba8dd17f9ae9c8284444df030b">vgic_irq_handle_resampling</a>(irq, deactivated, val &amp; ICH_LR_PENDING_BIT);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        raw_spin_unlock(&amp;irq-&gt;irq_lock);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <a class="code" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5">vgic_put_irq</a>(vcpu-&gt;kvm, irq);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    cpuif-&gt;used_lrs = 0;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div>
<div class="ttc" id="avgic-v3_8c_html_af06b2ebdf897b8d96928fd86e3bca056"><div class="ttname"><a href="vgic-v3_8c.html#af06b2ebdf897b8d96928fd86e3bca056">lr_signals_eoi_mi</a></div><div class="ttdeci">static bool lr_signals_eoi_mi(u64 lr_val)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00029">vgic-v3.c:29</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a3d53ba6e7f70704effc37ea2c4b0c04b_cgraph.png" border="0" usemap="#avgic_8h_a3d53ba6e7f70704effc37ea2c4b0c04b_cgraph" alt=""/></div>
<map name="avgic_8h_a3d53ba6e7f70704effc37ea2c4b0c04b_cgraph" id="avgic_8h_a3d53ba6e7f70704effc37ea2c4b0c04b_cgraph">
<area shape="rect" title=" " alt="" coords="5,104,165,131"/>
<area shape="rect" href="vgic-v3_8c.html#af06b2ebdf897b8d96928fd86e3bca056" title=" " alt="" coords="248,28,383,55"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="265,79,366,105"/>
<area shape="rect" href="vgic_8c.html#a19d27bba8dd17f9ae9c8284444df030b" title=" " alt="" coords="213,129,417,156"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="265,209,366,236"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="508,5,608,32"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="699,5,833,32"/>
<area shape="rect" href="vgic_8c.html#a44a31fe53851677c742d5b2a340e2f56" title=" " alt="" coords="485,57,631,98"/>
<area shape="rect" href="vgic_8h.html#a9c8f3a32a17b2384ea1cc0c6e0340ad7" title=" " alt="" coords="483,122,633,163"/>
<area shape="rect" href="vgic_8c.html#a6daedd3eec82ca8b68db82b750a24f67" title=" " alt="" coords="465,188,651,215"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="477,239,639,265"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="702,239,830,265"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a3d53ba6e7f70704effc37ea2c4b0c04b_icgraph.png" border="0" usemap="#avgic_8h_a3d53ba6e7f70704effc37ea2c4b0c04b_icgraph" alt=""/></div>
<map name="avgic_8h_a3d53ba6e7f70704effc37ea2c4b0c04b_icgraph" id="avgic_8h_a3d53ba6e7f70704effc37ea2c4b0c04b_icgraph">
<area shape="rect" title=" " alt="" coords="827,5,987,32"/>
<area shape="rect" href="vgic_8c.html#ad42413b2202ba95d0b76067b240b9c52" title=" " alt="" coords="641,5,779,32"/>
<area shape="rect" href="vgic_8c.html#a76c600af416fb73e40611d80115edc03" title=" " alt="" coords="412,5,593,32"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="ac2164da472839a705dfb81d3a3c477c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2164da472839a705dfb81d3a3c477c5">&#9670;&nbsp;</a></span>vgic_v3_free_redist_region()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v3_free_redist_region </td>
          <td>(</td>
          <td class="paramtype">struct vgic_redist_region *&#160;</td>
          <td class="paramname"><em>rdreg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-mmio-v3_8c_source.html#l00922">922</a> of file <a class="el" href="vgic-mmio-v3_8c_source.html">vgic-mmio-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;{</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    list_del(&amp;rdreg-&gt;list);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    kfree(rdreg);</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ac2164da472839a705dfb81d3a3c477c5_icgraph.png" border="0" usemap="#avgic_8h_ac2164da472839a705dfb81d3a3c477c5_icgraph" alt=""/></div>
<map name="avgic_8h_ac2164da472839a705dfb81d3a3c477c5_icgraph" id="avgic_8h_ac2164da472839a705dfb81d3a3c477c5_icgraph">
<area shape="rect" title=" " alt="" coords="1512,181,1661,222"/>
<area shape="rect" href="vgic-init_8c.html#a814da4f59c826266ad54a8b5aa870de6" title=" " alt="" coords="1287,148,1459,175"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="1283,213,1464,240"/>
<area shape="rect" href="vgic-init_8c.html#af08e0c3b0309dbe4472ed185cd2b9e72" title=" " alt="" coords="1093,140,1235,167"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="865,81,1035,108"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="855,140,1045,167"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="453,29,580,56"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="650,81,785,108"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="212,5,405,32"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="459,84,574,111"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="234,56,383,83"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="226,107,391,133"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="231,157,386,184"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="241,208,376,235"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="5,56,164,83"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="628,133,807,174"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="455,140,579,167"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="1103,243,1225,269"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40" title=" " alt="" coords="865,243,1035,269"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="865,300,1035,327"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="652,199,783,225"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="652,249,783,276"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="653,300,782,327"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="653,351,782,377"/>
</map>
</div>

</div>
</div>
<a id="a9fc5537e2afeef239f1f24de942eb46a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fc5537e2afeef239f1f24de942eb46a">&#9670;&nbsp;</a></span>vgic_v3_get_vmcr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v3_get_vmcr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structvgic__vmcr.html">vgic_vmcr</a> *&#160;</td>
          <td class="paramname"><em>vmcr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v3_8c_source.html#l00224">224</a> of file <a class="el" href="vgic-v3_8c_source.html">vgic-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;{</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keyword">struct </span>vgic_v3_cpu_if *cpu_if = &amp;vcpu-&gt;arch.vgic_cpu.vgic_v3;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    u32 model = vcpu-&gt;kvm-&gt;arch.vgic.vgic_model;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    u32 vmcr;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    vmcr = cpu_if-&gt;vgic_vmcr;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span> (model == KVM_DEV_TYPE_ARM_VGIC_V2) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        vmcrp-&gt;<a class="code" href="structvgic__vmcr.html#a2600ded00c0ee0c2e2ed6029eea994bd">ackctl</a> = (vmcr &amp; ICH_VMCR_ACK_CTL_MASK) &gt;&gt;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            ICH_VMCR_ACK_CTL_SHIFT;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        vmcrp-&gt;fiqen = (vmcr &amp; ICH_VMCR_FIQ_EN_MASK) &gt;&gt;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            ICH_VMCR_FIQ_EN_SHIFT;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">         * When emulating GICv3 on GICv3 with SRE=1 on the</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">         * VFIQEn bit is RES1 and the VAckCtl bit is RES0.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        vmcrp-&gt;fiqen = 1;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        vmcrp-&gt;ackctl = 0;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    vmcrp-&gt;cbpr = (vmcr &amp; ICH_VMCR_CBPR_MASK) &gt;&gt; ICH_VMCR_CBPR_SHIFT;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    vmcrp-&gt;eoim = (vmcr &amp; ICH_VMCR_EOIM_MASK) &gt;&gt; ICH_VMCR_EOIM_SHIFT;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    vmcrp-&gt;abpr = (vmcr &amp; ICH_VMCR_BPR1_MASK) &gt;&gt; ICH_VMCR_BPR1_SHIFT;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    vmcrp-&gt;bpr  = (vmcr &amp; ICH_VMCR_BPR0_MASK) &gt;&gt; ICH_VMCR_BPR0_SHIFT;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    vmcrp-&gt;pmr  = (vmcr &amp; ICH_VMCR_PMR_MASK) &gt;&gt; ICH_VMCR_PMR_SHIFT;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    vmcrp-&gt;grpen0 = (vmcr &amp; ICH_VMCR_ENG0_MASK) &gt;&gt; ICH_VMCR_ENG0_SHIFT;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    vmcrp-&gt;grpen1 = (vmcr &amp; ICH_VMCR_ENG1_MASK) &gt;&gt; ICH_VMCR_ENG1_SHIFT;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
<div class="ttc" id="astructvgic__vmcr_html_a2600ded00c0ee0c2e2ed6029eea994bd"><div class="ttname"><a href="structvgic__vmcr.html#a2600ded00c0ee0c2e2ed6029eea994bd">vgic_vmcr::ackctl</a></div><div class="ttdeci">u32 ackctl</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00158">vgic.h:158</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a9fc5537e2afeef239f1f24de942eb46a_icgraph.png" border="0" usemap="#avgic_8h_a9fc5537e2afeef239f1f24de942eb46a_icgraph" alt=""/></div>
<map name="avgic_8h_a9fc5537e2afeef239f1f24de942eb46a_icgraph" id="avgic_8h_a9fc5537e2afeef239f1f24de942eb46a_icgraph">
<area shape="rect" title=" " alt="" coords="2737,360,2877,387"/>
<area shape="rect" href="vgic-mmio_8c.html#ad275c2ef6d5f7f0d79f101a7dd6dda3a" title=" " alt="" coords="2572,360,2689,387"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a66220e48f014a2eb167e50df6bc556b9" title=" " alt="" coords="2368,5,2473,32"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#add00c3e7b785796c7d79e285113a13a5" title=" " alt="" coords="2368,56,2473,83"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a008ada66aee21124d80a1d2816ab6cf8" title=" " alt="" coords="2372,107,2469,133"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#abbf917fe24a7fcb7aa2f06fec6016b45" title=" " alt="" coords="2360,157,2481,184"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a1168d377372fe83d0bc82d0f1e70a469" title=" " alt="" coords="2360,208,2481,235"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#aea894bbbe8c470fc8721c81922b98254" title=" " alt="" coords="2369,259,2472,285"/>
<area shape="rect" href="vgic_8c.html#a3059bfcee1ad30f581150d06c07d68e8" title=" " alt="" coords="2317,309,2524,336"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a9a6ff5961084331631a38b15ad56ee3a" title=" " alt="" coords="2369,360,2473,387"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a98e7ca9700748f32119b3df93fb9702a" title=" " alt="" coords="2369,411,2473,437"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a5df87a6d208537d7e190b738b53a7244" title=" " alt="" coords="2373,461,2469,488"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a462776a9a850970c8e333d150e70041f" title=" " alt="" coords="2361,512,2481,539"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#aa54404fe059ee8c201ece8989b41557a" title=" " alt="" coords="2361,563,2481,589"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#ab7ad03ed75b3e3b3388d5aa051fb3b0c" title=" " alt="" coords="2370,613,2471,640"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#acd71668215fc870cc3e736482a827145" title=" " alt="" coords="2332,664,2509,691"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a2f747e0249d94969dc9bb31ca7e39fa2" title=" " alt="" coords="2330,715,2511,741"/>
<area shape="rect" href="arm_8c.html#ac412fb0d81a53e66d8ac4146e4202f92" title=" " alt="" coords="2081,268,2269,295"/>
<area shape="rect" href="vgic_8c.html#afd47a938061d223b085c0ca0bed6aa71" title=" " alt="" coords="2111,352,2239,379"/>
<area shape="rect" href="kvm__main_8c.html#aac20f0d987f71a47c6701c7e93a0e261" title=" " alt="" coords="1849,167,2023,193"/>
<area shape="rect" href="kvm__main_8c.html#a3de4d6991bdd1a714e8afa6a55136cdd" title=" " alt="" coords="1848,243,2024,269"/>
<area shape="rect" href="arm_8c.html#ad33fe3df0e24d8ff8cb0a7f4657ec3fa" title=" " alt="" coords="1019,268,1169,295"/>
<area shape="rect" href="kvm__main_8c.html#a06ed191cebec13ce2c4a7d15fdeb5a60" title=" " alt="" coords="1624,141,1764,168"/>
<area shape="rect" href="kvm__main_8c.html#a7373edb7b1c787b14e657cd691e64d20" title=" " alt="" coords="1233,148,1380,175"/>
<area shape="rect" href="handle__exit_8c.html#a0b391fc62c2250ecc0bfcdbe1b0a6788" title=" " alt="" coords="1027,149,1161,176"/>
<area shape="rect" href="kvm__main_8c.html#a8e18df0287ddedfd516454aeeb669807" title=" " alt="" coords="1629,192,1759,219"/>
<area shape="rect" href="kvm__main_8c.html#a7256a8615584a9ae83a46c071f6aa0e9" title=" " alt="" coords="1428,203,1549,229"/>
<area shape="rect" href="arm_8c.html#a68df8c6f1b7134e9f23857f092d50056" title=" " alt="" coords="1249,203,1364,229"/>
<area shape="rect" href="psci_8c.html#abe7d85200e79143f87dab785a204fb3a" title=" " alt="" coords="1003,203,1185,229"/>
<area shape="rect" href="psci_8c.html#ac7522f6e0d1805f44a3e932397de4582" title=" " alt="" coords="802,203,946,229"/>
<area shape="rect" href="psci_8c.html#a8f59d47a1b54f561b8c42f509798142e" title=" " alt="" coords="580,155,724,181"/>
<area shape="rect" href="psci_8c.html#a3daa8000eb9717dde07d817c306b052b" title=" " alt="" coords="391,192,506,219"/>
<area shape="rect" href="hypercalls_8c.html#a62d0b161cae45d4a2f865203301f7ac4" title=" " alt="" coords="153,192,339,219"/>
<area shape="rect" href="handle__exit_8c.html#a5c24d46393da9651d3133e2377fd7a69" title=" " alt="" coords="7,167,103,193"/>
<area shape="rect" href="handle__exit_8c.html#ad2545fb9f7329ef0604715b9af4a1746" title=" " alt="" coords="5,217,105,244"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="793,268,955,295"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="559,268,745,295"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="387,268,511,295"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a2acb707aa37dccb7a4d021632629f994" title=" " alt="" coords="1839,352,2033,379"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a496b87a9bc8e2c1a5aa2d9ba2e13cc10" title=" " alt="" coords="1839,409,2033,436"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a86125023f5d85776a3857a2b82dfd2ca" title=" " alt="" coords="1597,345,1791,386"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a566ddfae78ebf930568f0dcc4a1bea21" title=" " alt="" coords="1597,410,1791,451"/>
</map>
</div>

</div>
</div>
<a id="ab7ab2fb9c9721de227541e7cc6da7e3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7ab2fb9c9721de227541e7cc6da7e3e">&#9670;&nbsp;</a></span>vgic_v3_has_attr_regs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v3_has_attr_regs </td>
          <td>(</td>
          <td class="paramtype">struct kvm_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-mmio-v3_8c_source.html#l00956">956</a> of file <a class="el" href="vgic-mmio-v3_8c_source.html">vgic-mmio-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;{</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structvgic__register__region.html">vgic_register_region</a> *region;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keyword">struct </span>vgic_io_device iodev;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="keyword">struct </span><a class="code" href="structvgic__reg__attr.html">vgic_reg_attr</a> reg_attr;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    gpa_t addr;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160; </div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    ret = <a class="code" href="vgic-kvm-device_8c.html#ae16a58808d1a84f4f378a2ff4343d200">vgic_v3_parse_attr</a>(dev, attr, &amp;reg_attr);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    vcpu = reg_attr.vcpu;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    addr = reg_attr.addr;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160; </div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">switch</span> (attr-&gt;group) {</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_DIST_REGS:</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        iodev.regions = <a class="code" href="vgic-mmio-v3_8c.html#a04f164757c56887adde5a7ba053db28f">vgic_v3_dist_registers</a>;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        iodev.nr_regions = ARRAY_SIZE(<a class="code" href="vgic-mmio-v3_8c.html#a04f164757c56887adde5a7ba053db28f">vgic_v3_dist_registers</a>);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        iodev.base_addr = 0;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_REDIST_REGS:{</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        iodev.regions = <a class="code" href="vgic-mmio-v3_8c.html#a3f49ef93d8249e0e2c38174a69c7d285">vgic_v3_rd_registers</a>;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        iodev.nr_regions = ARRAY_SIZE(<a class="code" href="vgic-mmio-v3_8c.html#a3f49ef93d8249e0e2c38174a69c7d285">vgic_v3_rd_registers</a>);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        iodev.base_addr = 0;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    }</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_CPU_SYSREGS:</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="vgic_8h.html#af8d4c0e182ab36b9414c4dcaad810793">vgic_v3_has_cpu_sysregs_attr</a>(vcpu, attr);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    }</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="comment">/* We only support aligned 32-bit accesses. */</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keywordflow">if</span> (addr &amp; 3)</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    region = <a class="code" href="vgic-mmio_8c.html#af645443cfc0bc59f41881570759adcb5">vgic_get_mmio_region</a>(vcpu, &amp;iodev, addr, <span class="keyword">sizeof</span>(u32));</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordflow">if</span> (!region)</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;}</div>
<div class="ttc" id="avgic-kvm-device_8c_html_ae16a58808d1a84f4f378a2ff4343d200"><div class="ttname"><a href="vgic-kvm-device_8c.html#ae16a58808d1a84f4f378a2ff4343d200">vgic_v3_parse_attr</a></div><div class="ttdeci">int vgic_v3_parse_attr(struct kvm_device *dev, struct kvm_device_attr *attr, struct vgic_reg_attr *reg_attr)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00474">vgic-kvm-device.c:474</a></div></div>
<div class="ttc" id="avgic_8h_html_af8d4c0e182ab36b9414c4dcaad810793"><div class="ttname"><a href="vgic_8h.html#af8d4c0e182ab36b9414c4dcaad810793">vgic_v3_has_cpu_sysregs_attr</a></div><div class="ttdeci">int vgic_v3_has_cpu_sysregs_attr(struct kvm_vcpu *vcpu, struct kvm_device_attr *attr)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-sys-reg-v3_8c_source.html#l00342">vgic-sys-reg-v3.c:342</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ab7ab2fb9c9721de227541e7cc6da7e3e_cgraph.png" border="0" usemap="#avgic_8h_ab7ab2fb9c9721de227541e7cc6da7e3e_cgraph" alt=""/></div>
<map name="avgic_8h_ab7ab2fb9c9721de227541e7cc6da7e3e_cgraph" id="avgic_8h_ab7ab2fb9c9721de227541e7cc6da7e3e_cgraph">
<area shape="rect" title=" " alt="" coords="5,119,172,145"/>
<area shape="rect" href="vgic-mmio_8c.html#af645443cfc0bc59f41881570759adcb5" title=" " alt="" coords="244,56,415,83"/>
<area shape="rect" href="vgic_8h.html#af8d4c0e182ab36b9414c4dcaad810793" title=" " alt="" coords="220,119,439,145"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ae16a58808d1a84f4f378a2ff4343d200" title=" " alt="" coords="257,195,402,221"/>
<area shape="rect" href="vgic-mmio_8c.html#a296fe3adbc190bcdb6fde5c708193b03" title=" " alt="" coords="519,5,627,32"/>
<area shape="rect" href="vgic-mmio_8c.html#a340c255c8c139816f1ce975f0bd15c64" title=" " alt="" coords="487,56,660,83"/>
<area shape="rect" href="vgic-mmio_8c.html#abed6aa21152b65b854d1f9513c4ce647" title=" " alt="" coords="720,56,831,83"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a0bc09e2deb4b346bbe5a850747711fbc" title=" " alt="" coords="531,107,615,133"/>
<area shape="rect" href="sys__regs_8c.html#ac41b37ff19cd3eda5658080a3eb8c558" title=" " alt="" coords="517,157,630,184"/>
<area shape="rect" href="sys__regs_8h.html#a5478d1284365aa547695b6889e4a05ef" title=" " alt="" coords="738,132,813,159"/>
<area shape="rect" href="sys__regs_8c.html#a000b8bb9ea7247fee0c7acc84817d960" title=" " alt="" coords="708,183,843,209"/>
<area shape="rect" href="sys__regs_8h.html#aba3abb7cabe45542d03289fe25af9526" title=" " alt="" coords="891,132,1011,159"/>
<area shape="rect" href="arm_8c.html#a0be215e1642483c65818bd994b13a421" title=" " alt="" coords="496,208,651,235"/>
</map>
</div>

</div>
</div>
<a id="af8d4c0e182ab36b9414c4dcaad810793"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8d4c0e182ab36b9414c4dcaad810793">&#9670;&nbsp;</a></span>vgic_v3_has_cpu_sysregs_attr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v3_has_cpu_sysregs_attr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-sys-reg-v3_8c_source.html#l00342">342</a> of file <a class="el" href="vgic-sys-reg-v3_8c_source.html">vgic-sys-reg-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;{</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="sys__regs_8c.html#ac41b37ff19cd3eda5658080a3eb8c558">get_reg_by_id</a>(<a class="code" href="vgic-sys-reg-v3_8c.html#a0bc09e2deb4b346bbe5a850747711fbc">attr_to_id</a>(attr-&gt;attr), <a class="code" href="vgic-sys-reg-v3_8c.html#a55723e6703dbadb94b39decec419791b">gic_v3_icc_reg_descs</a>,</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;              ARRAY_SIZE(<a class="code" href="vgic-sys-reg-v3_8c.html#a55723e6703dbadb94b39decec419791b">gic_v3_icc_reg_descs</a>)))</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div>
<div class="ttc" id="asys__regs_8c_html_ac41b37ff19cd3eda5658080a3eb8c558"><div class="ttname"><a href="sys__regs_8c.html#ac41b37ff19cd3eda5658080a3eb8c558">get_reg_by_id</a></div><div class="ttdeci">const struct sys_reg_desc * get_reg_by_id(u64 id, const struct sys_reg_desc table[], unsigned int num)</div><div class="ttdef"><b>Definition:</b> <a href="sys__regs_8c_source.html#l03528">sys_regs.c:3528</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_af8d4c0e182ab36b9414c4dcaad810793_cgraph.png" border="0" usemap="#avgic_8h_af8d4c0e182ab36b9414c4dcaad810793_cgraph" alt=""/></div>
<map name="avgic_8h_af8d4c0e182ab36b9414c4dcaad810793_cgraph" id="avgic_8h_af8d4c0e182ab36b9414c4dcaad810793_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,224,57"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a0bc09e2deb4b346bbe5a850747711fbc" title=" " alt="" coords="287,5,371,32"/>
<area shape="rect" href="sys__regs_8c.html#ac41b37ff19cd3eda5658080a3eb8c558" title=" " alt="" coords="272,56,385,83"/>
<area shape="rect" href="sys__regs_8h.html#a5478d1284365aa547695b6889e4a05ef" title=" " alt="" coords="463,31,538,57"/>
<area shape="rect" href="sys__regs_8c.html#a000b8bb9ea7247fee0c7acc84817d960" title=" " alt="" coords="433,81,568,108"/>
<area shape="rect" href="sys__regs_8h.html#aba3abb7cabe45542d03289fe25af9526" title=" " alt="" coords="616,31,736,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_af8d4c0e182ab36b9414c4dcaad810793_icgraph.png" border="0" usemap="#avgic_8h_af8d4c0e182ab36b9414c4dcaad810793_icgraph" alt=""/></div>
<map name="avgic_8h_af8d4c0e182ab36b9414c4dcaad810793_icgraph" id="avgic_8h_af8d4c0e182ab36b9414c4dcaad810793_icgraph">
<area shape="rect" title=" " alt="" coords="220,5,439,32"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab7ab2fb9c9721de227541e7cc6da7e3e" title=" " alt="" coords="5,5,172,32"/>
</map>
</div>

</div>
</div>
<a id="ac1a045e1729c5781a9c7c03e359da717"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1a045e1729c5781a9c7c03e359da717">&#9670;&nbsp;</a></span>vgic_v3_line_level_info_uaccess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v3_line_level_info_uaccess </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>intid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32 *&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-mmio-v3_8c_source.html#l01117">1117</a> of file <a class="el" href="vgic-mmio-v3_8c_source.html">vgic-mmio-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;{</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="keywordflow">if</span> (intid % 32)</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="keywordflow">if</span> (is_write)</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        <a class="code" href="vgic-mmio_8c.html#a28964cd75c2483a30f9743d35507bbce">vgic_write_irq_line_level_info</a>(vcpu, intid, *val);</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        *val = <a class="code" href="vgic-mmio_8c.html#a74de2333a13c0e99b703d65cab9666b3">vgic_read_irq_line_level_info</a>(vcpu, intid);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160; </div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;}</div>
<div class="ttc" id="avgic-mmio_8c_html_a28964cd75c2483a30f9743d35507bbce"><div class="ttname"><a href="vgic-mmio_8c.html#a28964cd75c2483a30f9743d35507bbce">vgic_write_irq_line_level_info</a></div><div class="ttdeci">void vgic_write_irq_line_level_info(struct kvm_vcpu *vcpu, u32 intid, const u32 val)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio_8c_source.html#l00788">vgic-mmio.c:788</a></div></div>
<div class="ttc" id="avgic-mmio_8c_html_a74de2333a13c0e99b703d65cab9666b3"><div class="ttname"><a href="vgic-mmio_8c.html#a74de2333a13c0e99b703d65cab9666b3">vgic_read_irq_line_level_info</a></div><div class="ttdeci">u32 vgic_read_irq_line_level_info(struct kvm_vcpu *vcpu, u32 intid)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio_8c_source.html#l00766">vgic-mmio.c:766</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ac1a045e1729c5781a9c7c03e359da717_cgraph.png" border="0" usemap="#avgic_8h_ac1a045e1729c5781a9c7c03e359da717_cgraph" alt=""/></div>
<map name="avgic_8h_ac1a045e1729c5781a9c7c03e359da717_cgraph" id="avgic_8h_ac1a045e1729c5781a9c7c03e359da717_cgraph">
<area shape="rect" title=" " alt="" coords="5,39,148,80"/>
<area shape="rect" href="vgic-mmio_8c.html#a74de2333a13c0e99b703d65cab9666b3" title=" " alt="" coords="198,5,338,47"/>
<area shape="rect" href="vgic-mmio_8c.html#a28964cd75c2483a30f9743d35507bbce" title=" " alt="" coords="196,71,340,112"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="423,63,524,90"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="423,13,524,39"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="638,63,738,90"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="854,89,989,115"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="607,13,769,39"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="857,13,985,39"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="388,139,559,166"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="627,215,749,242"/>
<area shape="rect" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247" title=" " alt="" coords="617,165,759,191"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="817,266,1025,293"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="845,215,998,242"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="863,165,979,191"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ac1a045e1729c5781a9c7c03e359da717_icgraph.png" border="0" usemap="#avgic_8h_ac1a045e1729c5781a9c7c03e359da717_icgraph" alt=""/></div>
<map name="avgic_8h_ac1a045e1729c5781a9c7c03e359da717_icgraph" id="avgic_8h_ac1a045e1729c5781a9c7c03e359da717_icgraph">
<area shape="rect" title=" " alt="" coords="420,23,563,65"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a176e49a1162579b332c8a68ab035e981" title=" " alt="" coords="184,31,372,57"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,56,135,83"/>
</map>
</div>

</div>
</div>
<a id="aec2311d8e88bcd485c7baf083b65876e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec2311d8e88bcd485c7baf083b65876e">&#9670;&nbsp;</a></span>vgic_v3_load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v3_load </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v3_8c_source.html#l00720">720</a> of file <a class="el" href="vgic-v3_8c_source.html">vgic-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;{</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keyword">struct </span>vgic_v3_cpu_if *cpu_if = &amp;vcpu-&gt;arch.vgic_cpu.vgic_v3;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; </div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">     * If dealing with a GICv2 emulation on GICv3, VMCR_EL2.VFIQen</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">     * is dependent on ICC_SRE_EL1.SRE, and we have to perform the</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">     * VMCR_EL2 save/restore in the world switch.</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">if</span> (likely(cpu_if-&gt;vgic_sre))</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        kvm_call_hyp(<a class="code" href="vgic-v3-sr_8c.html#a6a35b1067c29b8d7f96ed309bfc06fd6">__vgic_v3_write_vmcr</a>, cpu_if-&gt;vgic_vmcr);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    kvm_call_hyp(<a class="code" href="vgic-v3-sr_8c.html#a1f2bd7ee89ce38236b148eed5aaffbe3">__vgic_v3_restore_aprs</a>, cpu_if);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160; </div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">if</span> (has_vhe())</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <a class="code" href="vgic-v3-sr_8c.html#acd3f57089d359ed44e778793fe5aeef0">__vgic_v3_activate_traps</a>(cpu_if);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    WARN_ON(<a class="code" href="vgic-v4_8c.html#ac2966fbf90610bb8a0525cbd903f7477">vgic_v4_load</a>(vcpu));</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;}</div>
<div class="ttc" id="avgic-v3-sr_8c_html_a1f2bd7ee89ce38236b148eed5aaffbe3"><div class="ttname"><a href="vgic-v3-sr_8c.html#a1f2bd7ee89ce38236b148eed5aaffbe3">__vgic_v3_restore_aprs</a></div><div class="ttdeci">void __vgic_v3_restore_aprs(struct vgic_v3_cpu_if *cpu_if)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3-sr_8c_source.html#l00366">vgic-v3-sr.c:366</a></div></div>
<div class="ttc" id="avgic-v3-sr_8c_html_a6a35b1067c29b8d7f96ed309bfc06fd6"><div class="ttname"><a href="vgic-v3-sr_8c.html#a6a35b1067c29b8d7f96ed309bfc06fd6">__vgic_v3_write_vmcr</a></div><div class="ttdeci">void __vgic_v3_write_vmcr(u32 vmcr)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3-sr_8c_source.html#l00463">vgic-v3-sr.c:463</a></div></div>
<div class="ttc" id="avgic-v3-sr_8c_html_acd3f57089d359ed44e778793fe5aeef0"><div class="ttname"><a href="vgic-v3-sr_8c.html#acd3f57089d359ed44e778793fe5aeef0">__vgic_v3_activate_traps</a></div><div class="ttdeci">void __vgic_v3_activate_traps(struct vgic_v3_cpu_if *cpu_if)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3-sr_8c_source.html#l00260">vgic-v3-sr.c:260</a></div></div>
<div class="ttc" id="avgic-v4_8c_html_ac2966fbf90610bb8a0525cbd903f7477"><div class="ttname"><a href="vgic-v4_8c.html#ac2966fbf90610bb8a0525cbd903f7477">vgic_v4_load</a></div><div class="ttdeci">int vgic_v4_load(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v4_8c_source.html#l00349">vgic-v4.c:349</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_aec2311d8e88bcd485c7baf083b65876e_cgraph.png" border="0" usemap="#avgic_8h_aec2311d8e88bcd485c7baf083b65876e_cgraph" alt=""/></div>
<map name="avgic_8h_aec2311d8e88bcd485c7baf083b65876e_cgraph" id="avgic_8h_aec2311d8e88bcd485c7baf083b65876e_cgraph">
<area shape="rect" title=" " alt="" coords="5,97,112,123"/>
<area shape="rect" href="vgic-v3-sr_8c.html#acd3f57089d359ed44e778793fe5aeef0" title=" " alt="" coords="174,5,321,47"/>
<area shape="rect" href="vgic-v3-sr_8c.html#a1f2bd7ee89ce38236b148eed5aaffbe3" title=" " alt="" coords="160,71,335,98"/>
<area shape="rect" href="vgic-v3-sr_8c.html#a6a35b1067c29b8d7f96ed309bfc06fd6" title=" " alt="" coords="164,122,331,149"/>
<area shape="rect" href="vgic-v4_8c.html#ac2966fbf90610bb8a0525cbd903f7477" title=" " alt="" coords="194,173,301,199"/>
<area shape="rect" href="vgic-v3-sr_8c.html#a44c5fd3a3265bb4f95b52804ed0c3380" title=" " alt="" coords="395,46,565,73"/>
<area shape="rect" href="vgic-v3-sr_8c.html#a7cc50aa837f3ea2e35953e2e5c48e83a" title=" " alt="" coords="395,97,565,123"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a839b15883ba8f9de35a03ffce32fdf7f" title=" " alt="" coords="383,173,577,199"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e" title=" " alt="" coords="625,173,728,199"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_aec2311d8e88bcd485c7baf083b65876e_icgraph.png" border="0" usemap="#avgic_8h_aec2311d8e88bcd485c7baf083b65876e_icgraph" alt=""/></div>
<map name="avgic_8h_aec2311d8e88bcd485c7baf083b65876e_icgraph" id="avgic_8h_aec2311d8e88bcd485c7baf083b65876e_icgraph">
<area shape="rect" title=" " alt="" coords="1637,237,1744,264"/>
<area shape="rect" href="vgic_8c.html#a54d5d884ac662357df5661d80f5160e3" title=" " alt="" coords="1469,237,1589,264"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1263,237,1421,264"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="825,31,1021,57"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="1069,136,1215,163"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1077,237,1207,264"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="1085,376,1199,403"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="1098,300,1186,327"/>
<area shape="rect" href="handle__exit_8c.html#ae96aab7918301d55b908034db5855e3d" title=" " alt="" coords="617,5,751,32"/>
<area shape="rect" href="emulate-nested_8c.html#af5e2eb745d8ac6415fe941ebe754171d" title=" " alt="" coords="832,107,1015,133"/>
<area shape="rect" href="emulate-nested_8c.html#a5759b383dbf067b5e90235d5fd032ab5" title=" " alt="" coords="597,157,771,184"/>
<area shape="rect" href="handle__exit_8c.html#a5c24d46393da9651d3133e2377fd7a69" title=" " alt="" coords="636,56,732,83"/>
<area shape="rect" href="handle__exit_8c.html#aeaf983f5c40202edc8b07a76603330cd" title=" " alt="" coords="637,107,731,133"/>
<area shape="rect" href="sys__regs_8c.html#a315e661b6f1cb224596267000909a1ac" title=" " alt="" coords="384,145,543,172"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="835,161,1011,188"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="603,208,765,235"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,263,336,289"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="843,313,1004,340"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="384,197,543,238"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,288,129,315"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="591,313,777,340"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="884,415,963,441"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="628,415,740,441"/>
</map>
</div>

</div>
</div>
<a id="ac8f115520573cc0407f90177aeccfed9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8f115520573cc0407f90177aeccfed9">&#9670;&nbsp;</a></span>vgic_v3_lpi_sync_pending_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v3_lpi_sync_pending_status </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct vgic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v3_8c_source.html#l00305">305</a> of file <a class="el" href="vgic-v3_8c_source.html">vgic-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;{</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordtype">int</span> byte_offset, bit_nr;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    gpa_t pendbase, ptr;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordtype">bool</span> status;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    u8 val;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;retry:</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    vcpu = irq-&gt;target_vcpu;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">if</span> (!vcpu)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    pendbase = GICR_PENDBASER_ADDRESS(vcpu-&gt;arch.vgic_cpu.pendbaser);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    byte_offset = irq-&gt;intid / BITS_PER_BYTE;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    bit_nr = irq-&gt;intid % BITS_PER_BYTE;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    ptr = pendbase + byte_offset;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    ret = kvm_read_guest_lock(kvm, ptr, &amp;val, 1);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    status = val &amp; (1 &lt;&lt; bit_nr);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    raw_spin_lock_irqsave(&amp;irq-&gt;irq_lock, flags);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">if</span> (irq-&gt;target_vcpu != vcpu) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        raw_spin_unlock_irqrestore(&amp;irq-&gt;irq_lock, flags);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">goto</span> retry;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    irq-&gt;pending_latch = status;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c">vgic_queue_irq_unlock</a>(vcpu-&gt;kvm, irq, flags);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">if</span> (status) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="comment">/* clear consumed data */</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        val &amp;= ~(1 &lt;&lt; bit_nr);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        ret = <a class="code" href="vgic_8h.html#abb188bad2393aaaf40808283d5565b8a">vgic_write_guest_lock</a>(kvm, ptr, &amp;val, 1);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div>
<div class="ttc" id="avgic_8h_html_abb188bad2393aaaf40808283d5565b8a"><div class="ttname"><a href="vgic_8h.html#abb188bad2393aaaf40808283d5565b8a">vgic_write_guest_lock</a></div><div class="ttdeci">static int vgic_write_guest_lock(struct kvm *kvm, gpa_t gpa, const void *data, unsigned long len)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00135">vgic.h:135</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ac8f115520573cc0407f90177aeccfed9_cgraph.png" border="0" usemap="#avgic_8h_ac8f115520573cc0407f90177aeccfed9_cgraph" alt=""/></div>
<map name="avgic_8h_ac8f115520573cc0407f90177aeccfed9_cgraph" id="avgic_8h_ac8f115520573cc0407f90177aeccfed9_cgraph">
<area shape="rect" title=" " alt="" coords="5,99,196,141"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="244,81,415,108"/>
<area shape="rect" href="vgic_8h.html#abb188bad2393aaaf40808283d5565b8a" title=" " alt="" coords="246,132,413,159"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="473,31,595,57"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="467,81,601,108"/>
<area shape="rect" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247" title=" " alt="" coords="463,132,605,159"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="653,5,861,32"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="681,56,834,83"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="699,132,815,159"/>
</map>
</div>

</div>
</div>
<a id="a8c2e4753883533516b45a2bbf9dad1ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c2e4753883533516b45a2bbf9dad1ce">&#9670;&nbsp;</a></span>vgic_v3_map_resources()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v3_map_resources </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v3_8c_source.html#l00538">538</a> of file <a class="el" href="vgic-v3_8c_source.html">vgic-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;{</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keyword">struct </span>vgic_dist *dist = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> c;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    kvm_for_each_vcpu(c, vcpu, kvm) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keyword">struct </span>vgic_cpu *vgic_cpu = &amp;vcpu-&gt;arch.vgic_cpu;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vgic_8h.html#adf701ae1a62928f5d797c6297fcf0364">IS_VGIC_ADDR_UNDEF</a>(vgic_cpu-&gt;rd_iodev.base_addr)) {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            kvm_debug(<span class="stringliteral">&quot;vcpu %ld redistributor base not set\n&quot;</span>, c);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    }</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vgic_8h.html#adf701ae1a62928f5d797c6297fcf0364">IS_VGIC_ADDR_UNDEF</a>(dist-&gt;vgic_dist_base)) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        kvm_debug(<span class="stringliteral">&quot;Need to set vgic distributor addresses first\n&quot;</span>);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="vgic-v3_8c.html#a98c28ff2dc6b6965cef76e1be35233b1">vgic_v3_check_base</a>(kvm)) {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        kvm_debug(<span class="stringliteral">&quot;VGIC redist and dist frames overlap\n&quot;</span>);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">     * For a VGICv3 we require the userland to explicitly initialize</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">     * the VGIC before we need to use it.</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">if</span> (!vgic_initialized(kvm)) {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="keywordflow">return</span> -EBUSY;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    }</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">if</span> (kvm_vgic_global_state.has_gicv4_1)</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <a class="code" href="vgic-v4_8c.html#a822de9f2b97fbc48164c88a7c0ac68f1">vgic_v4_configure_vsgis</a>(kvm);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160; </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;}</div>
<div class="ttc" id="avgic-v4_8c_html_a822de9f2b97fbc48164c88a7c0ac68f1"><div class="ttname"><a href="vgic-v4_8c.html#a822de9f2b97fbc48164c88a7c0ac68f1">vgic_v4_configure_vsgis</a></div><div class="ttdeci">void vgic_v4_configure_vsgis(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v4_8c_source.html#l00187">vgic-v4.c:187</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a8c2e4753883533516b45a2bbf9dad1ce_cgraph.png" border="0" usemap="#avgic_8h_a8c2e4753883533516b45a2bbf9dad1ce_cgraph" alt=""/></div>
<map name="avgic_8h_a8c2e4753883533516b45a2bbf9dad1ce_cgraph" id="avgic_8h_a8c2e4753883533516b45a2bbf9dad1ce_cgraph">
<area shape="rect" title=" " alt="" coords="5,157,184,184"/>
<area shape="rect" href="vgic-v3_8c.html#a98c28ff2dc6b6965cef76e1be35233b1" title=" " alt="" coords="245,81,399,108"/>
<area shape="rect" href="vgic-v4_8c.html#a822de9f2b97fbc48164c88a7c0ac68f1" title=" " alt="" coords="232,208,412,235"/>
<area shape="rect" href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32" title=" " alt="" coords="476,5,627,32"/>
<area shape="rect" href="vgic_8h.html#a01a6c3c40680e43017d7ba8ec7aadbac" title=" " alt="" coords="709,81,883,108"/>
<area shape="rect" href="vgic-v3_8c.html#a8bd03445507515b9722165814955f6fa" title=" " alt="" coords="469,56,633,83"/>
<area shape="rect" href="arm_8c.html#a9cb9c824750594d8a51e8501bf5ad239" title=" " alt="" coords="472,157,631,184"/>
<area shape="rect" href="arm_8c.html#a19ccb22603ed9366d148065038f59de3" title=" " alt="" coords="460,259,643,285"/>
<area shape="rect" href="vgic-v4_8c.html#a84caa8431645d33bab1cc210aeb17801" title=" " alt="" coords="468,309,635,336"/>
<area shape="rect" href="vgic-v4_8c.html#aaa920282fd67f50873ceb0030afafc6a" title=" " alt="" coords="469,208,633,235"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="691,157,901,184"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="949,150,1160,191"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="1219,132,1385,159"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="1208,183,1396,209"/>
<area shape="rect" href="kvm__main_8c.html#a7682302871243c20a5dd16214655db15" title=" " alt="" coords="1493,132,1571,159"/>
<area shape="rect" href="kvm__main_8c.html#a9316cc70360fb39d920d5c76a2e41f35" title=" " alt="" coords="1444,233,1620,260"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1455,183,1609,209"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="745,309,847,336"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="745,259,847,285"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="1005,309,1105,336"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="1235,309,1369,336"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="973,259,1136,285"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="1238,259,1366,285"/>
<area shape="rect" href="vgic-v4_8c.html#a52ef6dc22d433838a0e9db0353a69cb1" title=" " alt="" coords="705,208,887,235"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a8c2e4753883533516b45a2bbf9dad1ce_icgraph.png" border="0" usemap="#avgic_8h_a8c2e4753883533516b45a2bbf9dad1ce_icgraph" alt=""/></div>
<map name="avgic_8h_a8c2e4753883533516b45a2bbf9dad1ce_icgraph" id="avgic_8h_a8c2e4753883533516b45a2bbf9dad1ce_icgraph">
<area shape="rect" title=" " alt="" coords="643,13,821,39"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="404,13,595,39"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,5,356,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="a57d3462d7e7eac5b34b9fcbd18b69643"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57d3462d7e7eac5b34b9fcbd18b69643">&#9670;&nbsp;</a></span>vgic_v3_max_apr_idx()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int vgic_v3_max_apr_idx </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00275">275</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;{</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keyword">struct </span>vgic_cpu *cpu_if = &amp;vcpu-&gt;arch.vgic_cpu;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">     * num_pri_bits are initialized with HW supported values.</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">     * We can rely safely on num_pri_bits even if VM has not</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">     * restored ICC_CTLR_EL1 before restoring APnR registers.</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">switch</span> (cpu_if-&gt;num_pri_bits) {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">case</span> 7: <span class="keywordflow">return</span> 3;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">case</span> 6: <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">default</span>: <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a57d3462d7e7eac5b34b9fcbd18b69643_icgraph.png" border="0" usemap="#avgic_8h_a57d3462d7e7eac5b34b9fcbd18b69643_icgraph" alt=""/></div>
<map name="avgic_8h_a57d3462d7e7eac5b34b9fcbd18b69643_icgraph" id="avgic_8h_a57d3462d7e7eac5b34b9fcbd18b69643_icgraph">
<area shape="rect" title=" " alt="" coords="216,132,379,159"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a253cf92005dcf83aab0d49de0ab9007c" title=" " alt="" coords="34,5,139,32"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a6f6b5f8ddbc0ba45a4902bc237592721" title=" " alt="" coords="34,56,139,83"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#afdbf64fc0855cbca157d62ac67ef8064" title=" " alt="" coords="35,107,139,133"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#ad862ac32fd6d5e675d36b953fe7e2831" title=" " alt="" coords="35,157,139,184"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#ae5832db6b6c9428fd39a2a501c829639" title=" " alt="" coords="7,208,166,235"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a6b5e2096a2a1152b34723a63b9ed8e7a" title=" " alt="" coords="5,259,168,285"/>
</map>
</div>

</div>
</div>
<a id="ae16a58808d1a84f4f378a2ff4343d200"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae16a58808d1a84f4f378a2ff4343d200">&#9670;&nbsp;</a></span>vgic_v3_parse_attr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v3_parse_attr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structvgic__reg__attr.html">vgic_reg_attr</a> *&#160;</td>
          <td class="paramname"><em>reg_attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00474">474</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;{</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> vgic_mpidr, mpidr_reg;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">     * For KVM_DEV_ARM_VGIC_GRP_DIST_REGS group,</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">     * attr might not hold MPIDR. Hence assume vcpu0.</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">if</span> (attr-&gt;group != KVM_DEV_ARM_VGIC_GRP_DIST_REGS) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        vgic_mpidr = (attr-&gt;attr &amp; KVM_DEV_ARM_VGIC_V3_MPIDR_MASK) &gt;&gt;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                  KVM_DEV_ARM_VGIC_V3_MPIDR_SHIFT;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        mpidr_reg = <a class="code" href="vgic_8h.html#a6cdd97958d32f8942e038e26dc313540">VGIC_TO_MPIDR</a>(vgic_mpidr);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        reg_attr-&gt;<a class="code" href="structvgic__reg__attr.html#a0f43e17045dc6b13404b4759e0fccad1">vcpu</a> = <a class="code" href="arm_8c.html#a0be215e1642483c65818bd994b13a421">kvm_mpidr_to_vcpu</a>(dev-&gt;kvm, mpidr_reg);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        reg_attr-&gt;<a class="code" href="structvgic__reg__attr.html#a0f43e17045dc6b13404b4759e0fccad1">vcpu</a> = kvm_get_vcpu(dev-&gt;kvm, 0);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">if</span> (!reg_attr-&gt;<a class="code" href="structvgic__reg__attr.html#a0f43e17045dc6b13404b4759e0fccad1">vcpu</a>)</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    reg_attr-&gt;<a class="code" href="structvgic__reg__attr.html#a19ed06c96175609f3d98858c1eceec59">addr</a> = attr-&gt;attr &amp; KVM_DEV_ARM_VGIC_OFFSET_MASK;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;}</div>
<div class="ttc" id="aarm_8c_html_a0be215e1642483c65818bd994b13a421"><div class="ttname"><a href="arm_8c.html#a0be215e1642483c65818bd994b13a421">kvm_mpidr_to_vcpu</a></div><div class="ttdeci">struct kvm_vcpu * kvm_mpidr_to_vcpu(struct kvm *kvm, unsigned long mpidr)</div><div class="ttdef"><b>Definition:</b> <a href="arm_8c_source.html#l02460">arm.c:2460</a></div></div>
<div class="ttc" id="avgic_8h_html_a6cdd97958d32f8942e038e26dc313540"><div class="ttname"><a href="vgic_8h.html#a6cdd97958d32f8942e038e26dc313540">VGIC_TO_MPIDR</a></div><div class="ttdeci">#define VGIC_TO_MPIDR(val)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00040">vgic.h:40</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ae16a58808d1a84f4f378a2ff4343d200_cgraph.png" border="0" usemap="#avgic_8h_ae16a58808d1a84f4f378a2ff4343d200_cgraph" alt=""/></div>
<map name="avgic_8h_ae16a58808d1a84f4f378a2ff4343d200_cgraph" id="avgic_8h_ae16a58808d1a84f4f378a2ff4343d200_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,151,32"/>
<area shape="rect" href="arm_8c.html#a0be215e1642483c65818bd994b13a421" title=" " alt="" coords="199,5,353,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ae16a58808d1a84f4f378a2ff4343d200_icgraph.png" border="0" usemap="#avgic_8h_ae16a58808d1a84f4f378a2ff4343d200_icgraph" alt=""/></div>
<map name="avgic_8h_ae16a58808d1a84f4f378a2ff4343d200_icgraph" id="avgic_8h_ae16a58808d1a84f4f378a2ff4343d200_icgraph">
<area shape="rect" title=" " alt="" coords="420,56,565,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a176e49a1162579b332c8a68ab035e981" title=" " alt="" coords="184,31,372,57"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab7ab2fb9c9721de227541e7cc6da7e3e" title=" " alt="" coords="195,81,361,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,56,135,83"/>
</map>
</div>

</div>
</div>
<a id="ad978c7773b6b8a81c108e35926ce6f86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad978c7773b6b8a81c108e35926ce6f86">&#9670;&nbsp;</a></span>vgic_v3_populate_lr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v3_populate_lr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct vgic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v3_8c_source.html#l00107">107</a> of file <a class="el" href="vgic-v3_8c_source.html">vgic-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;{</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    u32 model = vcpu-&gt;kvm-&gt;arch.vgic.vgic_model;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    u64 val = irq-&gt;intid;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordtype">bool</span> allow_pending = <span class="keyword">true</span>, is_v2_sgi;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    is_v2_sgi = (<a class="code" href="vgic_8h.html#a67cef97460e9a4080ae437e5a30113a7">vgic_irq_is_sgi</a>(irq-&gt;intid) &amp;&amp;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;             model == KVM_DEV_TYPE_ARM_VGIC_V2);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">if</span> (irq-&gt;active) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        val |= ICH_LR_ACTIVE_BIT;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">if</span> (is_v2_sgi)</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            val |= irq-&gt;active_source &lt;&lt; GICH_LR_PHYSID_CPUID_SHIFT;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vgic_8h.html#a03246bc81a56f8f77c3ee4ea6e27047d">vgic_irq_is_multi_sgi</a>(irq)) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            allow_pending = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            val |= ICH_LR_EOI;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">if</span> (irq-&gt;hw &amp;&amp; !vgic_irq_needs_resampling(irq)) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        val |= ICH_LR_HW;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        val |= ((u64)irq-&gt;hwintid) &lt;&lt; ICH_LR_PHYS_ID_SHIFT;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">         * Never set pending+active on a HW interrupt, as the</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">         * pending state is kept at the physical distributor</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">         * level.</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">if</span> (irq-&gt;active)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            allow_pending = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">if</span> (irq-&gt;config == VGIC_CONFIG_LEVEL) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            val |= ICH_LR_EOI;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">             * Software resampling doesn&#39;t work very well</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">             * if we allow P+A, so let&#39;s not do that.</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <span class="keywordflow">if</span> (irq-&gt;active)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                allow_pending = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> (allow_pending &amp;&amp; <a class="code" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45">irq_is_pending</a>(irq)) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        val |= ICH_LR_PENDING_BIT;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keywordflow">if</span> (irq-&gt;config == VGIC_CONFIG_EDGE)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            irq-&gt;pending_latch = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vgic_8h.html#a67cef97460e9a4080ae437e5a30113a7">vgic_irq_is_sgi</a>(irq-&gt;intid) &amp;&amp;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            model == KVM_DEV_TYPE_ARM_VGIC_V2) {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            u32 src = ffs(irq-&gt;source);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="keywordflow">if</span> (WARN_RATELIMIT(!src, <span class="stringliteral">&quot;No SGI source for INTID %d\n&quot;</span>,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                       irq-&gt;intid))</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            val |= (src - 1) &lt;&lt; GICH_LR_PHYSID_CPUID_SHIFT;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            irq-&gt;source &amp;= ~(1 &lt;&lt; (src - 1));</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="keywordflow">if</span> (irq-&gt;source) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                irq-&gt;pending_latch = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                val |= ICH_LR_EOI;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">     * Level-triggered mapped IRQs are special because we only observe</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">     * rising edges as input to the VGIC.  We therefore lower the line</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">     * level here, so that we can take new virtual IRQs.  See</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">     * vgic_v3_fold_lr_state for more info.</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vgic_8h.html#a9c8f3a32a17b2384ea1cc0c6e0340ad7">vgic_irq_is_mapped_level</a>(irq) &amp;&amp; (val &amp; ICH_LR_PENDING_BIT))</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        irq-&gt;line_level = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">if</span> (irq-&gt;group)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        val |= ICH_LR_GROUP;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    val |= (u64)irq-&gt;priority &lt;&lt; ICH_LR_PRIORITY_SHIFT;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    vcpu-&gt;arch.vgic_cpu.vgic_v3.vgic_lr[lr] = val;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ad978c7773b6b8a81c108e35926ce6f86_cgraph.png" border="0" usemap="#avgic_8h_ad978c7773b6b8a81c108e35926ce6f86_cgraph" alt=""/></div>
<map name="avgic_8h_ad978c7773b6b8a81c108e35926ce6f86_cgraph" id="avgic_8h_ad978c7773b6b8a81c108e35926ce6f86_cgraph">
<area shape="rect" title=" " alt="" coords="5,33,157,60"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="620,33,736,60"/>
<area shape="rect" href="vgic_8h.html#a9c8f3a32a17b2384ea1cc0c6e0340ad7" title=" " alt="" coords="209,26,360,67"/>
<area shape="rect" href="vgic_8h.html#a03246bc81a56f8f77c3ee4ea6e27047d" title=" " alt="" coords="205,92,364,118"/>
<area shape="rect" href="vgic_8h.html#a9bdd8f789c7055ff9681448eecde7072" title=" " alt="" coords="412,58,572,85"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ad978c7773b6b8a81c108e35926ce6f86_icgraph.png" border="0" usemap="#avgic_8h_ad978c7773b6b8a81c108e35926ce6f86_icgraph" alt=""/></div>
<map name="avgic_8h_ad978c7773b6b8a81c108e35926ce6f86_icgraph" id="avgic_8h_ad978c7773b6b8a81c108e35926ce6f86_icgraph">
<area shape="rect" title=" " alt="" coords="1011,5,1163,32"/>
<area shape="rect" href="vgic_8c.html#a1d440ccc621cee03cf929f67f1fc5f6a" title=" " alt="" coords="833,5,963,32"/>
<area shape="rect" href="vgic_8c.html#a498227d2a82836ba11a046b68857e3a3" title=" " alt="" coords="643,5,785,32"/>
<area shape="rect" href="vgic_8c.html#a5fb6266a1f361c1945f5feb862c1cf31" title=" " alt="" coords="412,5,595,32"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="ac418c84cff9542559c426a575c403136"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac418c84cff9542559c426a575c403136">&#9670;&nbsp;</a></span>vgic_v3_probe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v3_probe </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="vgic-init_8c.html#a7b7c49d17fa603aa8433b0d402f9efe1">gic_kvm_info</a> *&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>vgic_v3_probe - probe for a VGICv3 compatible interrupt controller @info: pointer to the GIC description</p>
<p>Returns 0 if the VGICv3 has been probed successfully, returns an error code otherwise </p>

<p class="definition">Definition at line <a class="el" href="vgic-v3_8c_source.html#l00632">632</a> of file <a class="el" href="vgic-v3_8c_source.html">vgic-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;{</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    u64 ich_vtr_el2 = kvm_call_hyp_ret(<a class="code" href="vgic-v3-sr_8c.html#ab2ac0bafd09093cb3c702166b2615c31">__vgic_v3_get_gic_config</a>);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordtype">bool</span> has_v2;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    has_v2 = ich_vtr_el2 &gt;&gt; 63;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    ich_vtr_el2 = (u32)ich_vtr_el2;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">     * The ListRegs field is 5 bits, but there is an architectural</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">     * maximum of 16 list registers. Just ignore bit 4...</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    kvm_vgic_global_state.nr_lr = (ich_vtr_el2 &amp; 0xf) + 1;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    kvm_vgic_global_state.can_emulate_gicv2 = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    kvm_vgic_global_state.ich_vtr_el2 = ich_vtr_el2;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="comment">/* GICv4 support? */</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">if</span> (info-&gt;has_v4) {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        kvm_vgic_global_state.has_gicv4 = <a class="code" href="vgic-v3_8c.html#a393351fe9ca2ee7a89b01c6d2b77673a">gicv4_enable</a>;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        kvm_vgic_global_state.has_gicv4_1 = info-&gt;has_v4_1 &amp;&amp; <a class="code" href="vgic-v3_8c.html#a393351fe9ca2ee7a89b01c6d2b77673a">gicv4_enable</a>;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        kvm_info(<span class="stringliteral">&quot;GICv4%s support %sabled\n&quot;</span>,</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;             kvm_vgic_global_state.has_gicv4_1 ? <span class="stringliteral">&quot;.1&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;             <a class="code" href="vgic-v3_8c.html#a393351fe9ca2ee7a89b01c6d2b77673a">gicv4_enable</a> ? <span class="stringliteral">&quot;en&quot;</span> : <span class="stringliteral">&quot;dis&quot;</span>);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    kvm_vgic_global_state.vcpu_base = 0;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordflow">if</span> (!info-&gt;vcpu.start) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        kvm_info(<span class="stringliteral">&quot;GICv3: no GICV resource entry\n&quot;</span>);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!has_v2) {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        pr_warn(FW_BUG <span class="stringliteral">&quot;CPU interface incapable of MMIO access\n&quot;</span>);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!PAGE_ALIGNED(info-&gt;vcpu.start)) {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        pr_warn(<span class="stringliteral">&quot;GICV physical address 0x%llx not page aligned\n&quot;</span>,</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)info-&gt;vcpu.start);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="arm_8c.html#ade8fdddf9949d1e1fcc2cea2dc5a7133">kvm_get_mode</a>() != KVM_MODE_PROTECTED) {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        kvm_vgic_global_state.vcpu_base = info-&gt;vcpu.start;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        kvm_vgic_global_state.can_emulate_gicv2 = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        ret = <a class="code" href="vgic-kvm-device_8c.html#aa01e5dcf80e608f64f5428d054d17a84">kvm_register_vgic_device</a>(KVM_DEV_TYPE_ARM_VGIC_V2);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">if</span> (ret) {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            kvm_err(<span class="stringliteral">&quot;Cannot register GICv2 KVM device.\n&quot;</span>);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        kvm_info(<span class="stringliteral">&quot;vgic-v2@%llx\n&quot;</span>, info-&gt;vcpu.start);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    ret = <a class="code" href="vgic-kvm-device_8c.html#aa01e5dcf80e608f64f5428d054d17a84">kvm_register_vgic_device</a>(KVM_DEV_TYPE_ARM_VGIC_V3);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">if</span> (ret) {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        kvm_err(<span class="stringliteral">&quot;Cannot register GICv3 KVM device.\n&quot;</span>);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <a class="code" href="kvm__main_8c.html#a9a59affaa1c06f4ea56e33679ba52ae2">kvm_unregister_device_ops</a>(KVM_DEV_TYPE_ARM_VGIC_V2);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    }</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">if</span> (kvm_vgic_global_state.vcpu_base == 0)</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        kvm_info(<span class="stringliteral">&quot;disabling GICv2 emulation\n&quot;</span>);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160; </div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="keywordflow">if</span> (cpus_have_final_cap(ARM64_WORKAROUND_CAVIUM_30115)) {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <a class="code" href="vgic-v3_8c.html#af8ddaf0943092b5321005d73169d9e1a">group0_trap</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <a class="code" href="vgic-v3_8c.html#a7b0039a454fbd2fd5431f34cae714df1">group1_trap</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vgic-v3_8c.html#a723b88e9568c712a3b969224cda48a8c">vgic_v3_broken_seis</a>()) {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        kvm_info(<span class="stringliteral">&quot;GICv3 with broken locally generated SEI\n&quot;</span>);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        kvm_vgic_global_state.ich_vtr_el2 &amp;= ~ICH_VTR_SEIS_MASK;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <a class="code" href="vgic-v3_8c.html#af8ddaf0943092b5321005d73169d9e1a">group0_trap</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <a class="code" href="vgic-v3_8c.html#a7b0039a454fbd2fd5431f34cae714df1">group1_trap</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="keywordflow">if</span> (ich_vtr_el2 &amp; ICH_VTR_TDS_MASK)</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            <a class="code" href="vgic-v3_8c.html#ae2e01e6a2a16c42e03f84746c42541e8">dir_trap</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            <a class="code" href="vgic-v3_8c.html#ac2e2971fb50344cb3d4589f366f91c2a">common_trap</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vgic-v3_8c.html#af8ddaf0943092b5321005d73169d9e1a">group0_trap</a> || <a class="code" href="vgic-v3_8c.html#a7b0039a454fbd2fd5431f34cae714df1">group1_trap</a> || <a class="code" href="vgic-v3_8c.html#ac2e2971fb50344cb3d4589f366f91c2a">common_trap</a> | <a class="code" href="vgic-v3_8c.html#ae2e01e6a2a16c42e03f84746c42541e8">dir_trap</a>) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        kvm_info(<span class="stringliteral">&quot;GICv3 sysreg trapping enabled ([%s%s%s%s], reduced performance)\n&quot;</span>,</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;             <a class="code" href="vgic-v3_8c.html#af8ddaf0943092b5321005d73169d9e1a">group0_trap</a> ? <span class="stringliteral">&quot;G0&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;             <a class="code" href="vgic-v3_8c.html#a7b0039a454fbd2fd5431f34cae714df1">group1_trap</a> ? <span class="stringliteral">&quot;G1&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;             <a class="code" href="vgic-v3_8c.html#ac2e2971fb50344cb3d4589f366f91c2a">common_trap</a> ? <span class="stringliteral">&quot;C&quot;</span>  : <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;             <a class="code" href="vgic-v3_8c.html#ae2e01e6a2a16c42e03f84746c42541e8">dir_trap</a>    ? <span class="stringliteral">&quot;D&quot;</span>  : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        static_branch_enable(&amp;vgic_v3_cpuif_trap);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160; </div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    kvm_vgic_global_state.vctrl_base = NULL;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    kvm_vgic_global_state.type = VGIC_V3;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    kvm_vgic_global_state.max_gic_vcpus = VGIC_V3_MAX_CPUS;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;}</div>
<div class="ttc" id="aarm_8c_html_ade8fdddf9949d1e1fcc2cea2dc5a7133"><div class="ttname"><a href="arm_8c.html#ade8fdddf9949d1e1fcc2cea2dc5a7133">kvm_get_mode</a></div><div class="ttdeci">enum kvm_mode kvm_get_mode(void)</div><div class="ttdef"><b>Definition:</b> <a href="arm_8c_source.html#l02655">arm.c:2657</a></div></div>
<div class="ttc" id="akvm__main_8c_html_a9a59affaa1c06f4ea56e33679ba52ae2"><div class="ttname"><a href="kvm__main_8c.html#a9a59affaa1c06f4ea56e33679ba52ae2">kvm_unregister_device_ops</a></div><div class="ttdeci">void kvm_unregister_device_ops(u32 type)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l04754">kvm_main.c:4754</a></div></div>
<div class="ttc" id="avgic-v3-sr_8c_html_ab2ac0bafd09093cb3c702166b2615c31"><div class="ttname"><a href="vgic-v3-sr_8c.html#ab2ac0bafd09093cb3c702166b2615c31">__vgic_v3_get_gic_config</a></div><div class="ttdeci">u64 __vgic_v3_get_gic_config(void)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3-sr_8c_source.html#l00414">vgic-v3-sr.c:414</a></div></div>
<div class="ttc" id="avgic-v3_8c_html_a393351fe9ca2ee7a89b01c6d2b77673a"><div class="ttname"><a href="vgic-v3_8c.html#a393351fe9ca2ee7a89b01c6d2b77673a">gicv4_enable</a></div><div class="ttdeci">static bool gicv4_enable</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00020">vgic-v3.c:20</a></div></div>
<div class="ttc" id="avgic-v3_8c_html_a723b88e9568c712a3b969224cda48a8c"><div class="ttname"><a href="vgic-v3_8c.html#a723b88e9568c712a3b969224cda48a8c">vgic_v3_broken_seis</a></div><div class="ttdeci">static bool vgic_v3_broken_seis(void)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00619">vgic-v3.c:619</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ac418c84cff9542559c426a575c403136_cgraph.png" border="0" usemap="#avgic_8h_ac418c84cff9542559c426a575c403136_cgraph" alt=""/></div>
<map name="avgic_8h_ac418c84cff9542559c426a575c403136_cgraph" id="avgic_8h_ac418c84cff9542559c426a575c403136_cgraph">
<area shape="rect" title=" " alt="" coords="5,107,121,133"/>
<area shape="rect" href="vgic-v3-sr_8c.html#ab2ac0bafd09093cb3c702166b2615c31" title=" " alt="" coords="178,5,365,32"/>
<area shape="rect" href="arm_8c.html#ade8fdddf9949d1e1fcc2cea2dc5a7133" title=" " alt="" coords="210,56,333,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa01e5dcf80e608f64f5428d054d17a84" title=" " alt="" coords="175,107,367,133"/>
<area shape="rect" href="kvm__main_8c.html#a9a59affaa1c06f4ea56e33679ba52ae2" title=" " alt="" coords="169,157,373,184"/>
<area shape="rect" href="vgic-v3_8c.html#a723b88e9568c712a3b969224cda48a8c" title=" " alt="" coords="193,208,349,235"/>
<area shape="rect" href="kvm__main_8c.html#a04cec4716182d98b08f008f317aaf698" title=" " alt="" coords="421,77,609,104"/>
<area shape="rect" href="vgic-its_8c.html#a50d09aacec778677eb4fb2c550a3bea4" title=" " alt="" coords="433,129,598,170"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ac418c84cff9542559c426a575c403136_icgraph.png" border="0" usemap="#avgic_8h_ac418c84cff9542559c426a575c403136_icgraph" alt=""/></div>
<map name="avgic_8h_ac418c84cff9542559c426a575c403136_icgraph" id="avgic_8h_ac418c84cff9542559c426a575c403136_icgraph">
<area shape="rect" title=" " alt="" coords="533,5,649,32"/>
<area shape="rect" href="vgic-init_8c.html#aba3547aa220ca50b1eabca1a39c92943" title=" " alt="" coords="341,5,485,32"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="165,5,293,32"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="5,5,117,32"/>
</map>
</div>

</div>
</div>
<a id="a6a9931a18504090acd3d559ba25374ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a9931a18504090acd3d559ba25374ff">&#9670;&nbsp;</a></span>vgic_v3_put()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v3_put </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v3_8c_source.html#l00748">748</a> of file <a class="el" href="vgic-v3_8c_source.html">vgic-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;{</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keyword">struct </span>vgic_v3_cpu_if *cpu_if = &amp;vcpu-&gt;arch.vgic_cpu.vgic_v3;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160; </div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    WARN_ON(<a class="code" href="vgic-v4_8c.html#aeafcb3e6b67ea32ed8e59d009252e565">vgic_v4_put</a>(vcpu));</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <a class="code" href="vgic-v3_8c.html#aa3f97179d90d3ed6a8920d1c57496380">vgic_v3_vmcr_sync</a>(vcpu);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    kvm_call_hyp(<a class="code" href="vgic-v3-sr_8c.html#a6809b3241d8a98933f3df9eec4948e8b">__vgic_v3_save_aprs</a>, cpu_if);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordflow">if</span> (has_vhe())</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <a class="code" href="vgic-v3-sr_8c.html#ab70e80f7429729196f62308bdcdb9825">__vgic_v3_deactivate_traps</a>(cpu_if);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;}</div>
<div class="ttc" id="avgic-v3-sr_8c_html_a6809b3241d8a98933f3df9eec4948e8b"><div class="ttname"><a href="vgic-v3-sr_8c.html#a6809b3241d8a98933f3df9eec4948e8b">__vgic_v3_save_aprs</a></div><div class="ttdeci">void __vgic_v3_save_aprs(struct vgic_v3_cpu_if *cpu_if)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3-sr_8c_source.html#l00333">vgic-v3-sr.c:333</a></div></div>
<div class="ttc" id="avgic-v3-sr_8c_html_ab70e80f7429729196f62308bdcdb9825"><div class="ttname"><a href="vgic-v3-sr_8c.html#ab70e80f7429729196f62308bdcdb9825">__vgic_v3_deactivate_traps</a></div><div class="ttdeci">void __vgic_v3_deactivate_traps(struct vgic_v3_cpu_if *cpu_if)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3-sr_8c_source.html#l00307">vgic-v3-sr.c:307</a></div></div>
<div class="ttc" id="avgic-v3_8c_html_aa3f97179d90d3ed6a8920d1c57496380"><div class="ttname"><a href="vgic-v3_8c.html#aa3f97179d90d3ed6a8920d1c57496380">vgic_v3_vmcr_sync</a></div><div class="ttdeci">void vgic_v3_vmcr_sync(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00740">vgic-v3.c:740</a></div></div>
<div class="ttc" id="avgic-v4_8c_html_aeafcb3e6b67ea32ed8e59d009252e565"><div class="ttname"><a href="vgic-v4_8c.html#aeafcb3e6b67ea32ed8e59d009252e565">vgic_v4_put</a></div><div class="ttdeci">int vgic_v4_put(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v4_8c_source.html#l00339">vgic-v4.c:339</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a6a9931a18504090acd3d559ba25374ff_cgraph.png" border="0" usemap="#avgic_8h_a6a9931a18504090acd3d559ba25374ff_cgraph" alt=""/></div>
<map name="avgic_8h_a6a9931a18504090acd3d559ba25374ff_cgraph" id="avgic_8h_a6a9931a18504090acd3d559ba25374ff_cgraph">
<area shape="rect" title=" " alt="" coords="5,97,105,123"/>
<area shape="rect" href="vgic-v3-sr_8c.html#ab70e80f7429729196f62308bdcdb9825" title=" " alt="" coords="153,5,316,47"/>
<area shape="rect" href="vgic-v3-sr_8c.html#a6809b3241d8a98933f3df9eec4948e8b" title=" " alt="" coords="155,71,314,98"/>
<area shape="rect" href="vgic-v3_8c.html#aa3f97179d90d3ed6a8920d1c57496380" title=" " alt="" coords="160,122,309,149"/>
<area shape="rect" href="vgic-v4_8c.html#aeafcb3e6b67ea32ed8e59d009252e565" title=" " alt="" coords="185,173,285,199"/>
<area shape="rect" href="vgic-v3-sr_8c.html#a2a8d56dbda4d0bbd01772b003db6e8cf" title=" " alt="" coords="378,21,545,47"/>
<area shape="rect" href="vgic-v3-sr_8c.html#a0ef2cefc965498ba77c24811c45723be" title=" " alt="" coords="378,71,545,98"/>
<area shape="rect" href="vgic-v3-sr_8c.html#a4c7049da2b551848d3e39293c881f329" title=" " alt="" coords="380,122,543,149"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a839b15883ba8f9de35a03ffce32fdf7f" title=" " alt="" coords="364,173,559,199"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e" title=" " alt="" coords="607,173,709,199"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a6a9931a18504090acd3d559ba25374ff_icgraph.png" border="0" usemap="#avgic_8h_a6a9931a18504090acd3d559ba25374ff_icgraph" alt=""/></div>
<map name="avgic_8h_a6a9931a18504090acd3d559ba25374ff_icgraph" id="avgic_8h_a6a9931a18504090acd3d559ba25374ff_icgraph">
<area shape="rect" title=" " alt="" coords="1624,237,1724,264"/>
<area shape="rect" href="vgic_8c.html#a96f93a2405989082e3693577b6b2eb5d" title=" " alt="" coords="1463,237,1576,264"/>
<area shape="rect" href="arm_8c.html#a9235365ce64f215b1e024f26d96537cc" title=" " alt="" coords="1263,237,1415,264"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="825,31,1021,57"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="1069,136,1215,163"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1077,237,1207,264"/>
<area shape="rect" href="kvm__main_8c.html#a5f5097640155787fc088aa47b94da0a7" title=" " alt="" coords="1080,376,1204,403"/>
<area shape="rect" href="kvm__main_8c.html#a16e0f63dd5f0d556ed1c9c9999256f85" title=" " alt="" coords="1101,300,1183,327"/>
<area shape="rect" href="handle__exit_8c.html#ae96aab7918301d55b908034db5855e3d" title=" " alt="" coords="617,5,751,32"/>
<area shape="rect" href="emulate-nested_8c.html#af5e2eb745d8ac6415fe941ebe754171d" title=" " alt="" coords="832,107,1015,133"/>
<area shape="rect" href="emulate-nested_8c.html#a5759b383dbf067b5e90235d5fd032ab5" title=" " alt="" coords="597,157,771,184"/>
<area shape="rect" href="handle__exit_8c.html#a5c24d46393da9651d3133e2377fd7a69" title=" " alt="" coords="636,56,732,83"/>
<area shape="rect" href="handle__exit_8c.html#aeaf983f5c40202edc8b07a76603330cd" title=" " alt="" coords="637,107,731,133"/>
<area shape="rect" href="sys__regs_8c.html#a315e661b6f1cb224596267000909a1ac" title=" " alt="" coords="384,145,543,172"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="835,161,1011,188"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="603,208,765,235"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,263,336,289"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="843,313,1004,340"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="384,197,543,238"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,288,129,315"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="591,313,777,340"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="884,415,963,441"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="628,415,740,441"/>
</map>
</div>

</div>
</div>
<a id="a01a6c3c40680e43017d7ba8ec7aadbac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01a6c3c40680e43017d7ba8ec7aadbac">&#9670;&nbsp;</a></span>vgic_v3_rd_region_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t vgic_v3_rd_region_size </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct vgic_redist_region *&#160;</td>
          <td class="paramname"><em>rdreg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00303">303</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;{</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">if</span> (!rdreg-&gt;count)</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">return</span> atomic_read(&amp;kvm-&gt;online_vcpus) * KVM_VGIC_V3_REDIST_SIZE;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">return</span> rdreg-&gt;count * KVM_VGIC_V3_REDIST_SIZE;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a01a6c3c40680e43017d7ba8ec7aadbac_icgraph.png" border="0" usemap="#avgic_8h_a01a6c3c40680e43017d7ba8ec7aadbac_icgraph" alt=""/></div>
<map name="avgic_8h_a01a6c3c40680e43017d7ba8ec7aadbac_icgraph" id="avgic_8h_a01a6c3c40680e43017d7ba8ec7aadbac_icgraph">
<area shape="rect" title=" " alt="" coords="1760,139,1933,166"/>
<area shape="rect" href="vgic-v3_8c.html#a98c28ff2dc6b6965cef76e1be35233b1" title=" " alt="" coords="1345,114,1500,141"/>
<area shape="rect" href="vgic-v3_8c.html#a8bd03445507515b9722165814955f6fa" title=" " alt="" coords="1548,165,1712,191"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a7c5d9bcbf29cb46bac8622d8bcc145b2" title=" " alt="" coords="1133,107,1283,148"/>
<area shape="rect" href="vgic-v3_8c.html#a8c2e4753883533516b45a2bbf9dad1ce" title=" " alt="" coords="1119,29,1297,55"/>
<area shape="rect" href="vgic-init_8c.html#ad052e8c724bfbb39c34281df23166a28" title=" " alt="" coords="900,69,1051,95"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722" title=" " alt="" coords="889,120,1062,161"/>
<area shape="rect" href="arm_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="655,71,827,98"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="403,71,603,98"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="651,151,832,178"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="442,151,563,178"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40" title=" " alt="" coords="184,126,355,153"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="184,177,355,203"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,75,136,102"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,126,136,153"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="6,177,135,203"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,227,135,254"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="880,14,1071,41"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="652,5,831,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="441,13,565,39"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a78fb08dd130c0b8fc504e4725cd4f370" title=" " alt="" coords="1345,165,1500,207"/>
</map>
</div>

</div>
</div>
<a id="af5e338e56a88bea8fd9eb64214a6866c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5e338e56a88bea8fd9eb64214a6866c">&#9670;&nbsp;</a></span>vgic_v3_rdist_free_slot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct vgic_redist_region* vgic_v3_rdist_free_slot </td>
          <td>(</td>
          <td class="paramtype">struct list_head *&#160;</td>
          <td class="paramname"><em>rd_regions</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>vgic_v3_rdist_free_slot - Look up registered rdist regions and identify one which has free space to put a new rdist region.</p>
<p>@rd_regions: redistributor region list head</p>
<p>A redistributor regions maps n redistributors, n = region size / (2 x 64kB). Stride between redistributors is 0 and regions are filled in the index order.</p>
<p>Return: the redist region handle, if any, that has space to map a new rdist region. </p>

<p class="definition">Definition at line <a class="el" href="vgic-v3_8c_source.html#l00513">513</a> of file <a class="el" href="vgic-v3_8c_source.html">vgic-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;{</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keyword">struct </span>vgic_redist_region *rdreg;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160; </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    list_for_each_entry(rdreg, rd_regions, list) {</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="vgic_8h.html#ab5518fe56ac149d185ee8dc4f1cbedcb">vgic_v3_redist_region_full</a>(rdreg))</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            <span class="keywordflow">return</span> rdreg;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div>
<div class="ttc" id="avgic_8h_html_ab5518fe56ac149d185ee8dc4f1cbedcb"><div class="ttname"><a href="vgic_8h.html#ab5518fe56ac149d185ee8dc4f1cbedcb">vgic_v3_redist_region_full</a></div><div class="ttdeci">static bool vgic_v3_redist_region_full(struct vgic_redist_region *region)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00292">vgic.h:292</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_af5e338e56a88bea8fd9eb64214a6866c_cgraph.png" border="0" usemap="#avgic_8h_af5e338e56a88bea8fd9eb64214a6866c_cgraph" alt=""/></div>
<map name="avgic_8h_af5e338e56a88bea8fd9eb64214a6866c_cgraph" id="avgic_8h_af5e338e56a88bea8fd9eb64214a6866c_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,177,32"/>
<area shape="rect" href="vgic_8h.html#ab5518fe56ac149d185ee8dc4f1cbedcb" title=" " alt="" coords="225,5,417,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_af5e338e56a88bea8fd9eb64214a6866c_icgraph.png" border="0" usemap="#avgic_8h_af5e338e56a88bea8fd9eb64214a6866c_icgraph" alt=""/></div>
<map name="avgic_8h_af5e338e56a88bea8fd9eb64214a6866c_icgraph" id="avgic_8h_af5e338e56a88bea8fd9eb64214a6866c_icgraph">
<area shape="rect" title=" " alt="" coords="1300,52,1472,79"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a7c5d9bcbf29cb46bac8622d8bcc145b2" title=" " alt="" coords="1101,45,1252,86"/>
<area shape="rect" href="vgic-init_8c.html#ad052e8c724bfbb39c34281df23166a28" title=" " alt="" coords="891,23,1042,49"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722" title=" " alt="" coords="880,74,1053,115"/>
<area shape="rect" href="arm_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="655,23,827,49"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="403,23,603,49"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="651,81,832,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="442,81,563,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40" title=" " alt="" coords="184,56,355,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="184,107,355,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,56,136,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="6,107,135,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,157,135,184"/>
</map>
</div>

</div>
</div>
<a id="a8bd03445507515b9722165814955f6fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bd03445507515b9722165814955f6fa">&#9670;&nbsp;</a></span>vgic_v3_rdist_overlap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vgic_v3_rdist_overlap </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpa_t&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>vgic_v3_rdist_overlap - check if a region overlaps with any existing redistributor region</p>
<p>@kvm: kvm handle @base: base of the region @size: size of region</p>
<p>Return: true if there is an overlap </p>

<p class="definition">Definition at line <a class="el" href="vgic-v3_8c_source.html#l00460">460</a> of file <a class="el" href="vgic-v3_8c_source.html">vgic-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;{</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keyword">struct </span>vgic_dist *d = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keyword">struct </span>vgic_redist_region *rdreg;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    list_for_each_entry(rdreg, &amp;d-&gt;rd_regions, list) {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="early__alloc_8c.html#a74f95eab64fb23344e30879684489f6f">base</a> + <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a> &gt; rdreg-&gt;base) &amp;&amp;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            (base &lt; rdreg-&gt;<a class="code" href="early__alloc_8c.html#a74f95eab64fb23344e30879684489f6f">base</a> + <a class="code" href="vgic_8h.html#a01a6c3c40680e43017d7ba8ec7aadbac">vgic_v3_rd_region_size</a>(kvm, rdreg)))</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a8bd03445507515b9722165814955f6fa_cgraph.png" border="0" usemap="#avgic_8h_a8bd03445507515b9722165814955f6fa_cgraph" alt=""/></div>
<map name="avgic_8h_a8bd03445507515b9722165814955f6fa_cgraph" id="avgic_8h_a8bd03445507515b9722165814955f6fa_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,169,32"/>
<area shape="rect" href="vgic_8h.html#a01a6c3c40680e43017d7ba8ec7aadbac" title=" " alt="" coords="217,5,391,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a8bd03445507515b9722165814955f6fa_icgraph.png" border="0" usemap="#avgic_8h_a8bd03445507515b9722165814955f6fa_icgraph" alt=""/></div>
<map name="avgic_8h_a8bd03445507515b9722165814955f6fa_icgraph" id="avgic_8h_a8bd03445507515b9722165814955f6fa_icgraph">
<area shape="rect" title=" " alt="" coords="1548,119,1712,145"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a78fb08dd130c0b8fc504e4725cd4f370" title=" " alt="" coords="1345,70,1500,111"/>
<area shape="rect" href="vgic-v3_8c.html#a98c28ff2dc6b6965cef76e1be35233b1" title=" " alt="" coords="1345,148,1500,175"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="651,81,832,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="442,81,563,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40" title=" " alt="" coords="184,56,355,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="184,107,355,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,56,136,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="6,107,135,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,157,135,184"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a7c5d9bcbf29cb46bac8622d8bcc145b2" title=" " alt="" coords="1133,141,1283,182"/>
<area shape="rect" href="vgic-v3_8c.html#a8c2e4753883533516b45a2bbf9dad1ce" title=" " alt="" coords="1119,213,1297,240"/>
<area shape="rect" href="vgic-init_8c.html#ad052e8c724bfbb39c34281df23166a28" title=" " alt="" coords="900,169,1051,196"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722" title=" " alt="" coords="889,103,1062,145"/>
<area shape="rect" href="arm_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="655,161,827,188"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="403,161,603,188"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="880,220,1071,247"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="652,213,831,254"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="441,220,565,247"/>
</map>
</div>

</div>
</div>
<a id="a35e1a5cb345dbcb7d61a55467b083702"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35e1a5cb345dbcb7d61a55467b083702">&#9670;&nbsp;</a></span>vgic_v3_rdist_region_from_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct vgic_redist_region* vgic_v3_rdist_region_from_index </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v3_8c_source.html#l00524">524</a> of file <a class="el" href="vgic-v3_8c_source.html">vgic-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;{</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keyword">struct </span>list_head *rd_regions = &amp;kvm-&gt;arch.vgic.rd_regions;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keyword">struct </span>vgic_redist_region *rdreg;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    list_for_each_entry(rdreg, rd_regions, list) {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">if</span> (rdreg-&gt;index == index)</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            <span class="keywordflow">return</span> rdreg;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a35e1a5cb345dbcb7d61a55467b083702_icgraph.png" border="0" usemap="#avgic_8h_a35e1a5cb345dbcb7d61a55467b083702_icgraph" alt=""/></div>
<map name="avgic_8h_a35e1a5cb345dbcb7d61a55467b083702_icgraph" id="avgic_8h_a35e1a5cb345dbcb7d61a55467b083702_icgraph">
<area shape="rect" title=" " alt="" coords="801,74,957,115"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="403,81,524,108"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="572,107,753,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40" title=" " alt="" coords="184,56,355,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="184,107,355,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,56,136,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="6,107,135,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,157,135,184"/>
</map>
</div>

</div>
</div>
<a id="ab5518fe56ac149d185ee8dc4f1cbedcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5518fe56ac149d185ee8dc4f1cbedcb">&#9670;&nbsp;</a></span>vgic_v3_redist_region_full()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool vgic_v3_redist_region_full </td>
          <td>(</td>
          <td class="paramtype">struct vgic_redist_region *&#160;</td>
          <td class="paramname"><em>region</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00292">292</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;{</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">if</span> (!region-&gt;count)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">return</span> (region-&gt;free_index &gt;= region-&gt;count);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ab5518fe56ac149d185ee8dc4f1cbedcb_icgraph.png" border="0" usemap="#avgic_8h_ab5518fe56ac149d185ee8dc4f1cbedcb_icgraph" alt=""/></div>
<map name="avgic_8h_ab5518fe56ac149d185ee8dc4f1cbedcb_icgraph" id="avgic_8h_ab5518fe56ac149d185ee8dc4f1cbedcb_icgraph">
<area shape="rect" title=" " alt="" coords="1520,52,1712,79"/>
<area shape="rect" href="vgic-v3_8c.html#a481ec0006dfd5a7ea125b9913de7ba47" title=" " alt="" coords="1300,52,1472,79"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a7c5d9bcbf29cb46bac8622d8bcc145b2" title=" " alt="" coords="1101,45,1252,86"/>
<area shape="rect" href="vgic-init_8c.html#ad052e8c724bfbb39c34281df23166a28" title=" " alt="" coords="891,23,1042,49"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722" title=" " alt="" coords="880,74,1053,115"/>
<area shape="rect" href="arm_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="655,23,827,49"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="403,23,603,49"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="651,81,832,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="442,81,563,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40" title=" " alt="" coords="184,56,355,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="184,107,355,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,56,136,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="6,107,135,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,157,135,184"/>
</map>
</div>

</div>
</div>
<a id="a6f0acf3ee53ee539acba5f1bce55cea2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f0acf3ee53ee539acba5f1bce55cea2">&#9670;&nbsp;</a></span>vgic_v3_redist_uaccess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v3_redist_uaccess </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32 *&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-mmio-v3_8c_source.html#l01106">1106</a> of file <a class="el" href="vgic-mmio-v3_8c_source.html">vgic-mmio-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;{</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="keyword">struct </span>vgic_io_device rd_dev = {</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        .regions = <a class="code" href="vgic-mmio-v3_8c.html#a3f49ef93d8249e0e2c38174a69c7d285">vgic_v3_rd_registers</a>,</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        .nr_regions = ARRAY_SIZE(<a class="code" href="vgic-mmio-v3_8c.html#a3f49ef93d8249e0e2c38174a69c7d285">vgic_v3_rd_registers</a>),</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    };</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160; </div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="vgic-mmio_8c.html#ae999933ae5e2cc6f0d3910bbe33386ba">vgic_uaccess</a>(vcpu, &amp;rd_dev, is_write, offset, val);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a6f0acf3ee53ee539acba5f1bce55cea2_cgraph.png" border="0" usemap="#avgic_8h_a6f0acf3ee53ee539acba5f1bce55cea2_cgraph" alt=""/></div>
<map name="avgic_8h_a6f0acf3ee53ee539acba5f1bce55cea2_cgraph" id="avgic_8h_a6f0acf3ee53ee539acba5f1bce55cea2_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,180,57"/>
<area shape="rect" href="vgic-mmio_8c.html#ae999933ae5e2cc6f0d3910bbe33386ba" title=" " alt="" coords="228,31,336,57"/>
<area shape="rect" href="vgic-mmio_8c.html#ac361bf23479dea11a94946fb36408b29" title=" " alt="" coords="386,5,530,32"/>
<area shape="rect" href="vgic-mmio_8c.html#a9ae5f9a11d1a32e0fddb9409399b1d4a" title=" " alt="" coords="384,56,532,83"/>
<area shape="rect" href="vgic-mmio_8c.html#af645443cfc0bc59f41881570759adcb5" title=" " alt="" coords="580,31,751,57"/>
<area shape="rect" href="vgic-mmio_8c.html#a296fe3adbc190bcdb6fde5c708193b03" title=" " alt="" coords="831,5,939,32"/>
<area shape="rect" href="vgic-mmio_8c.html#a340c255c8c139816f1ce975f0bd15c64" title=" " alt="" coords="799,56,972,83"/>
<area shape="rect" href="vgic-mmio_8c.html#abed6aa21152b65b854d1f9513c4ce647" title=" " alt="" coords="1020,56,1131,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a6f0acf3ee53ee539acba5f1bce55cea2_icgraph.png" border="0" usemap="#avgic_8h_a6f0acf3ee53ee539acba5f1bce55cea2_icgraph" alt=""/></div>
<map name="avgic_8h_a6f0acf3ee53ee539acba5f1bce55cea2_icgraph" id="avgic_8h_a6f0acf3ee53ee539acba5f1bce55cea2_icgraph">
<area shape="rect" title=" " alt="" coords="420,31,595,57"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a176e49a1162579b332c8a68ab035e981" title=" " alt="" coords="184,31,372,57"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,56,135,83"/>
</map>
</div>

</div>
</div>
<a id="af01c534c811a6787db01c7508a333d7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af01c534c811a6787db01c7508a333d7c">&#9670;&nbsp;</a></span>vgic_v3_save_pending_tables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v3_save_pending_tables </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>vgic_v3_save_pending_tables - Save the pending tables into guest RAM kvm lock and all vcpu lock must be held </p>

<p class="definition">Definition at line <a class="el" href="vgic-v3_8c_source.html#l00377">377</a> of file <a class="el" href="vgic-v3_8c_source.html">vgic-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;{</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keyword">struct </span>vgic_dist *dist = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keyword">struct </span>vgic_irq *irq;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    gpa_t last_ptr = ~(gpa_t)0;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordtype">bool</span> vlpi_avail = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    u8 val;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">if</span> (unlikely(!vgic_initialized(kvm)))</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">     * A preparation for getting any VLPI states.</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">     * The above vgic initialized check also ensures that the allocation</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">     * and enabling of the doorbells have already been done.</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">if</span> (kvm_vgic_global_state.has_gicv4_1) {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <a class="code" href="vgic-v3_8c.html#aedeeaec282ec4507c45c8580a6cd3ff8">unmap_all_vpes</a>(kvm);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        vlpi_avail = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    list_for_each_entry(irq, &amp;dist-&gt;lpi_list_head, lpi_list) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordtype">int</span> byte_offset, bit_nr;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keyword">struct </span>kvm_vcpu *vcpu;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        gpa_t pendbase, ptr;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keywordtype">bool</span> is_pending;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keywordtype">bool</span> stored;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        vcpu = irq-&gt;target_vcpu;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keywordflow">if</span> (!vcpu)</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        pendbase = GICR_PENDBASER_ADDRESS(vcpu-&gt;arch.vgic_cpu.pendbaser);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        byte_offset = irq-&gt;intid / BITS_PER_BYTE;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        bit_nr = irq-&gt;intid % BITS_PER_BYTE;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        ptr = pendbase + byte_offset;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">if</span> (ptr != last_ptr) {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            ret = kvm_read_guest_lock(kvm, ptr, &amp;val, 1);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            last_ptr = ptr;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        stored = val &amp; (1U &lt;&lt; bit_nr);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        is_pending = irq-&gt;pending_latch;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">if</span> (irq-&gt;hw &amp;&amp; vlpi_avail)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <a class="code" href="vgic-v4_8c.html#a783964868bc841487af2392e07060c48">vgic_v4_get_vlpi_state</a>(irq, &amp;is_pending);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">if</span> (stored == is_pending)</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="keywordflow">if</span> (is_pending)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            val |= 1 &lt;&lt; bit_nr;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            val &amp;= ~(1 &lt;&lt; bit_nr);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        ret = <a class="code" href="vgic_8h.html#abb188bad2393aaaf40808283d5565b8a">vgic_write_guest_lock</a>(kvm, ptr, &amp;val, 1);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;out:</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">if</span> (vlpi_avail)</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <a class="code" href="vgic-v3_8c.html#a62e3f2f0c8415cb67dc4117d1976f686">map_all_vpes</a>(kvm);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;}</div>
<div class="ttc" id="avgic-v3_8c_html_a62e3f2f0c8415cb67dc4117d1976f686"><div class="ttname"><a href="vgic-v3_8c.html#a62e3f2f0c8415cb67dc4117d1976f686">map_all_vpes</a></div><div class="ttdeci">static void map_all_vpes(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00363">vgic-v3.c:363</a></div></div>
<div class="ttc" id="avgic-v3_8c_html_aedeeaec282ec4507c45c8580a6cd3ff8"><div class="ttname"><a href="vgic-v3_8c.html#aedeeaec282ec4507c45c8580a6cd3ff8">unmap_all_vpes</a></div><div class="ttdeci">static void unmap_all_vpes(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00354">vgic-v3.c:354</a></div></div>
<div class="ttc" id="avgic-v4_8c_html_a783964868bc841487af2392e07060c48"><div class="ttname"><a href="vgic-v4_8c.html#a783964868bc841487af2392e07060c48">vgic_v4_get_vlpi_state</a></div><div class="ttdeci">void vgic_v4_get_vlpi_state(struct vgic_irq *irq, bool *val)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v4_8c_source.html#l00213">vgic-v4.c:213</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_af01c534c811a6787db01c7508a333d7c_cgraph.png" border="0" usemap="#avgic_8h_af01c534c811a6787db01c7508a333d7c_cgraph" alt=""/></div>
<map name="avgic_8h_af01c534c811a6787db01c7508a333d7c_cgraph" id="avgic_8h_af01c534c811a6787db01c7508a333d7c_cgraph">
<area shape="rect" title=" " alt="" coords="5,99,175,141"/>
<area shape="rect" href="vgic-v3_8c.html#a62e3f2f0c8415cb67dc4117d1976f686" title=" " alt="" coords="252,31,364,57"/>
<area shape="rect" href="vgic-v3_8c.html#aedeeaec282ec4507c45c8580a6cd3ff8" title=" " alt="" coords="244,81,372,108"/>
<area shape="rect" href="vgic-v4_8c.html#a783964868bc841487af2392e07060c48" title=" " alt="" coords="223,132,393,159"/>
<area shape="rect" href="vgic_8h.html#abb188bad2393aaaf40808283d5565b8a" title=" " alt="" coords="225,183,391,209"/>
<area shape="rect" href="vgic-v4_8c.html#af99c2f70dd91a57879b3a2f583e49a4a" title=" " alt="" coords="441,31,624,57"/>
<area shape="rect" href="vgic-v4_8c.html#ac22161596c9858cc700bab08c03fc422" title=" " alt="" coords="672,31,860,57"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="908,31,1031,57"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1079,5,1287,32"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1106,56,1259,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_af01c534c811a6787db01c7508a333d7c_icgraph.png" border="0" usemap="#avgic_8h_af01c534c811a6787db01c7508a333d7c_icgraph" alt=""/></div>
<map name="avgic_8h_af01c534c811a6787db01c7508a333d7c_icgraph" id="avgic_8h_af01c534c811a6787db01c7508a333d7c_icgraph">
<area shape="rect" title=" " alt="" coords="401,23,571,65"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="183,31,353,57"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="5,5,135,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="5,56,135,83"/>
</map>
</div>

</div>
</div>
<a id="a4a15ce4d47dcc08ccabdac23699bd8e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a15ce4d47dcc08ccabdac23699bd8e0">&#9670;&nbsp;</a></span>vgic_v3_set_redist_base()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v3_set_redist_base </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-mmio-v3_8c_source.html#l00928">928</a> of file <a class="el" href="vgic-mmio-v3_8c_source.html">vgic-mmio-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;{</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160; </div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    mutex_lock(&amp;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    ret = <a class="code" href="vgic-mmio-v3_8c.html#a78fb08dd130c0b8fc504e4725cd4f370">vgic_v3_alloc_redist_region</a>(kvm, index, addr, count);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    mutex_unlock(&amp;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment">     * Register iodevs for each existing VCPU.  Adding more VCPUs</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment">     * afterwards will register the iodevs when needed.</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    ret = <a class="code" href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722">vgic_register_all_redist_iodevs</a>(kvm);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordflow">if</span> (ret) {</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <span class="keyword">struct </span>vgic_redist_region *rdreg;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160; </div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        mutex_lock(&amp;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        rdreg = <a class="code" href="vgic-v3_8c.html#a35e1a5cb345dbcb7d61a55467b083702">vgic_v3_rdist_region_from_index</a>(kvm, index);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        <a class="code" href="vgic-mmio-v3_8c.html#ac2164da472839a705dfb81d3a3c477c5">vgic_v3_free_redist_region</a>(rdreg);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        mutex_unlock(&amp;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    }</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160; </div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;}</div>
<div class="ttc" id="avgic-mmio-v3_8c_html_a78fb08dd130c0b8fc504e4725cd4f370"><div class="ttname"><a href="vgic-mmio-v3_8c.html#a78fb08dd130c0b8fc504e4725cd4f370">vgic_v3_alloc_redist_region</a></div><div class="ttdeci">static int vgic_v3_alloc_redist_region(struct kvm *kvm, uint32_t index, gpa_t base, uint32_t count)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v3_8c_source.html#l00854">vgic-mmio-v3.c:854</a></div></div>
<div class="ttc" id="avgic-mmio-v3_8c_html_ab4506f3b3c9cd6a9a7bf0a909f93a722"><div class="ttname"><a href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722">vgic_register_all_redist_iodevs</a></div><div class="ttdeci">static int vgic_register_all_redist_iodevs(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v3_8c_source.html#l00812">vgic-mmio-v3.c:812</a></div></div>
<div class="ttc" id="avgic-mmio-v3_8c_html_ac2164da472839a705dfb81d3a3c477c5"><div class="ttname"><a href="vgic-mmio-v3_8c.html#ac2164da472839a705dfb81d3a3c477c5">vgic_v3_free_redist_region</a></div><div class="ttdeci">void vgic_v3_free_redist_region(struct vgic_redist_region *rdreg)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v3_8c_source.html#l00922">vgic-mmio-v3.c:922</a></div></div>
<div class="ttc" id="avgic-v3_8c_html_a35e1a5cb345dbcb7d61a55467b083702"><div class="ttname"><a href="vgic-v3_8c.html#a35e1a5cb345dbcb7d61a55467b083702">vgic_v3_rdist_region_from_index</a></div><div class="ttdeci">struct vgic_redist_region * vgic_v3_rdist_region_from_index(struct kvm *kvm, u32 index)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00524">vgic-v3.c:524</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a4a15ce4d47dcc08ccabdac23699bd8e0_cgraph.png" border="0" usemap="#avgic_8h_a4a15ce4d47dcc08ccabdac23699bd8e0_cgraph" alt=""/></div>
<map name="avgic_8h_a4a15ce4d47dcc08ccabdac23699bd8e0_cgraph" id="avgic_8h_a4a15ce4d47dcc08ccabdac23699bd8e0_cgraph">
<area shape="rect" title=" " alt="" coords="5,241,187,268"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722" title=" " alt="" coords="235,201,408,242"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a78fb08dd130c0b8fc504e4725cd4f370" title=" " alt="" coords="695,59,850,101"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ac2164da472839a705dfb81d3a3c477c5" title=" " alt="" coords="247,266,396,307"/>
<area shape="rect" href="vgic-v3_8c.html#a35e1a5cb345dbcb7d61a55467b083702" title=" " alt="" coords="243,331,399,373"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a7c5d9bcbf29cb46bac8622d8bcc145b2" title=" " alt="" coords="464,201,615,242"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4bfec769cd9fe2bddb14200a6147fccd" title=" " alt="" coords="456,283,623,325"/>
<area shape="rect" href="kvm__main_8c.html#a0afe5ce3e9ff1105328b06ec985e3374" title=" " alt="" coords="679,208,867,235"/>
<area shape="rect" href="vgic-v3_8c.html#a98c28ff2dc6b6965cef76e1be35233b1" title=" " alt="" coords="695,136,850,163"/>
<area shape="rect" href="vgic-v3_8c.html#a481ec0006dfd5a7ea125b9913de7ba47" title=" " alt="" coords="687,259,859,285"/>
<area shape="rect" href="kvm__main_8c.html#a75ccec7a81fef145fb3c3a3b5479a86f" title=" " alt="" coords="951,208,1086,235"/>
<area shape="rect" href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32" title=" " alt="" coords="943,107,1094,133"/>
<area shape="rect" href="vgic_8h.html#a01a6c3c40680e43017d7ba8ec7aadbac" title=" " alt="" coords="1169,107,1343,133"/>
<area shape="rect" href="vgic-v3_8c.html#a8bd03445507515b9722165814955f6fa" title=" " alt="" coords="937,56,1101,83"/>
<area shape="rect" href="vgic_8h.html#ab5518fe56ac149d185ee8dc4f1cbedcb" title=" " alt="" coords="923,259,1115,285"/>
<area shape="rect" href="kvm__main_8c.html#a103c02eb7ca545106f3130776c2a8897" title=" " alt="" coords="671,309,875,336"/>
<area shape="rect" href="kvm__main_8c.html#a3089edf2c0e5790aab7e8ed723f34b5b" title=" " alt="" coords="941,309,1097,336"/>
<area shape="rect" href="kvm__main_8c.html#aa6d7dea09a0b657f29e92f424e5d0633" title=" " alt="" coords="1163,335,1349,361"/>
<area shape="rect" href="vgic_8h.html#a1cdb698c97a7e5292716c24cd5a39d28" title=" " alt="" coords="951,5,1087,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a4a15ce4d47dcc08ccabdac23699bd8e0_icgraph.png" border="0" usemap="#avgic_8h_a4a15ce4d47dcc08ccabdac23699bd8e0_icgraph" alt=""/></div>
<map name="avgic_8h_a4a15ce4d47dcc08ccabdac23699bd8e0_icgraph" id="avgic_8h_a4a15ce4d47dcc08ccabdac23699bd8e0_icgraph">
<area shape="rect" title=" " alt="" coords="572,81,753,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="403,81,524,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40" title=" " alt="" coords="184,56,355,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="184,107,355,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,56,136,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="6,107,135,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,157,135,184"/>
</map>
</div>

</div>
</div>
<a id="afd14cba7fa93011850c703921e02002b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd14cba7fa93011850c703921e02002b">&#9670;&nbsp;</a></span>vgic_v3_set_underflow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v3_set_underflow </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v3_8c_source.html#l00022">22</a> of file <a class="el" href="vgic-v3_8c_source.html">vgic-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;{</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <span class="keyword">struct </span>vgic_v3_cpu_if *cpuif = &amp;vcpu-&gt;arch.vgic_cpu.vgic_v3;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    cpuif-&gt;vgic_hcr |= ICH_HCR_UIE;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_afd14cba7fa93011850c703921e02002b_icgraph.png" border="0" usemap="#avgic_8h_afd14cba7fa93011850c703921e02002b_icgraph" alt=""/></div>
<map name="avgic_8h_afd14cba7fa93011850c703921e02002b_icgraph" id="avgic_8h_afd14cba7fa93011850c703921e02002b_icgraph">
<area shape="rect" title=" " alt="" coords="1028,5,1199,32"/>
<area shape="rect" href="vgic_8c.html#a8f6bc92a21e40c3c63b10a95cabfcad3" title=" " alt="" coords="833,5,980,32"/>
<area shape="rect" href="vgic_8c.html#a498227d2a82836ba11a046b68857e3a3" title=" " alt="" coords="643,5,785,32"/>
<area shape="rect" href="vgic_8c.html#a5fb6266a1f361c1945f5feb862c1cf31" title=" " alt="" coords="412,5,595,32"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a1d43a64942be398908335f3cf50f2ef0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d43a64942be398908335f3cf50f2ef0">&#9670;&nbsp;</a></span>vgic_v3_set_vmcr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v3_set_vmcr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structvgic__vmcr.html">vgic_vmcr</a> *&#160;</td>
          <td class="paramname"><em>vmcr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v3_8c_source.html#l00194">194</a> of file <a class="el" href="vgic-v3_8c_source.html">vgic-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;{</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keyword">struct </span>vgic_v3_cpu_if *cpu_if = &amp;vcpu-&gt;arch.vgic_cpu.vgic_v3;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    u32 model = vcpu-&gt;kvm-&gt;arch.vgic.vgic_model;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    u32 vmcr;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span> (model == KVM_DEV_TYPE_ARM_VGIC_V2) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        vmcr = (vmcrp-&gt;ackctl &lt;&lt; ICH_VMCR_ACK_CTL_SHIFT) &amp;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            ICH_VMCR_ACK_CTL_MASK;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        vmcr |= (vmcrp-&gt;fiqen &lt;&lt; ICH_VMCR_FIQ_EN_SHIFT) &amp;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            ICH_VMCR_FIQ_EN_MASK;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">         * When emulating GICv3 on GICv3 with SRE=1 on the</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">         * VFIQEn bit is RES1 and the VAckCtl bit is RES0.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        vmcr = ICH_VMCR_FIQ_EN_MASK;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    vmcr |= (vmcrp-&gt;cbpr &lt;&lt; ICH_VMCR_CBPR_SHIFT) &amp; ICH_VMCR_CBPR_MASK;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    vmcr |= (vmcrp-&gt;eoim &lt;&lt; ICH_VMCR_EOIM_SHIFT) &amp; ICH_VMCR_EOIM_MASK;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    vmcr |= (vmcrp-&gt;abpr &lt;&lt; ICH_VMCR_BPR1_SHIFT) &amp; ICH_VMCR_BPR1_MASK;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    vmcr |= (vmcrp-&gt;bpr &lt;&lt; ICH_VMCR_BPR0_SHIFT) &amp; ICH_VMCR_BPR0_MASK;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    vmcr |= (vmcrp-&gt;pmr &lt;&lt; ICH_VMCR_PMR_SHIFT) &amp; ICH_VMCR_PMR_MASK;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    vmcr |= (vmcrp-&gt;grpen0 &lt;&lt; ICH_VMCR_ENG0_SHIFT) &amp; ICH_VMCR_ENG0_MASK;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    vmcr |= (vmcrp-&gt;grpen1 &lt;&lt; ICH_VMCR_ENG1_SHIFT) &amp; ICH_VMCR_ENG1_MASK;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    cpu_if-&gt;vgic_vmcr = vmcr;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a1d43a64942be398908335f3cf50f2ef0_icgraph.png" border="0" usemap="#avgic_8h_a1d43a64942be398908335f3cf50f2ef0_icgraph" alt=""/></div>
<map name="avgic_8h_a1d43a64942be398908335f3cf50f2ef0_icgraph" id="avgic_8h_a1d43a64942be398908335f3cf50f2ef0_icgraph">
<area shape="rect" title=" " alt="" coords="399,157,537,184"/>
<area shape="rect" href="vgic-mmio_8c.html#a33fd399bf664fddf31b1eec1e14c63e0" title=" " alt="" coords="235,157,351,184"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a9a6ff5961084331631a38b15ad56ee3a" title=" " alt="" coords="44,5,148,32"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a98e7ca9700748f32119b3df93fb9702a" title=" " alt="" coords="44,56,148,83"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a5df87a6d208537d7e190b738b53a7244" title=" " alt="" coords="48,107,144,133"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a462776a9a850970c8e333d150e70041f" title=" " alt="" coords="36,157,156,184"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#aa54404fe059ee8c201ece8989b41557a" title=" " alt="" coords="36,208,156,235"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#ab7ad03ed75b3e3b3388d5aa051fb3b0c" title=" " alt="" coords="45,259,147,285"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a2f747e0249d94969dc9bb31ca7e39fa2" title=" " alt="" coords="5,309,187,336"/>
</map>
</div>

</div>
</div>
<a id="aa3f97179d90d3ed6a8920d1c57496380"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3f97179d90d3ed6a8920d1c57496380">&#9670;&nbsp;</a></span>vgic_v3_vmcr_sync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v3_vmcr_sync </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v3_8c_source.html#l00740">740</a> of file <a class="el" href="vgic-v3_8c_source.html">vgic-v3.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;{</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keyword">struct </span>vgic_v3_cpu_if *cpu_if = &amp;vcpu-&gt;arch.vgic_cpu.vgic_v3;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160; </div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">if</span> (likely(cpu_if-&gt;vgic_sre))</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        cpu_if-&gt;vgic_vmcr = kvm_call_hyp_ret(<a class="code" href="vgic-v3-sr_8c.html#a4c7049da2b551848d3e39293c881f329">__vgic_v3_read_vmcr</a>);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;}</div>
<div class="ttc" id="avgic-v3-sr_8c_html_a4c7049da2b551848d3e39293c881f329"><div class="ttname"><a href="vgic-v3-sr_8c.html#a4c7049da2b551848d3e39293c881f329">__vgic_v3_read_vmcr</a></div><div class="ttdeci">u64 __vgic_v3_read_vmcr(void)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3-sr_8c_source.html#l00458">vgic-v3-sr.c:458</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_aa3f97179d90d3ed6a8920d1c57496380_cgraph.png" border="0" usemap="#avgic_8h_aa3f97179d90d3ed6a8920d1c57496380_cgraph" alt=""/></div>
<map name="avgic_8h_aa3f97179d90d3ed6a8920d1c57496380_cgraph" id="avgic_8h_aa3f97179d90d3ed6a8920d1c57496380_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,155,32"/>
<area shape="rect" href="vgic-v3-sr_8c.html#a4c7049da2b551848d3e39293c881f329" title=" " alt="" coords="203,5,365,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_aa3f97179d90d3ed6a8920d1c57496380_icgraph.png" border="0" usemap="#avgic_8h_aa3f97179d90d3ed6a8920d1c57496380_icgraph" alt=""/></div>
<map name="avgic_8h_aa3f97179d90d3ed6a8920d1c57496380_icgraph" id="avgic_8h_aa3f97179d90d3ed6a8920d1c57496380_icgraph">
<area shape="rect" title=" " alt="" coords="1893,144,2043,171"/>
<area shape="rect" href="vgic_8c.html#a751661541b39c02532a54736db22a929" title=" " alt="" coords="1683,119,1845,145"/>
<area shape="rect" href="vgic-v3_8c.html#a6a9931a18504090acd3d559ba25374ff" title=" " alt="" coords="1714,169,1814,196"/>
<area shape="rect" href="arm_8c.html#a68df8c6f1b7134e9f23857f092d50056" title=" " alt="" coords="1520,81,1635,108"/>
<area shape="rect" href="handle__exit_8c.html#a0b391fc62c2250ecc0bfcdbe1b0a6788" title=" " alt="" coords="1314,5,1447,32"/>
<area shape="rect" href="psci_8c.html#abe7d85200e79143f87dab785a204fb3a" title=" " alt="" coords="1289,56,1472,83"/>
<area shape="rect" href="arm_8c.html#ad33fe3df0e24d8ff8cb0a7f4657ec3fa" title=" " alt="" coords="1305,107,1456,133"/>
<area shape="rect" href="psci_8c.html#ac7522f6e0d1805f44a3e932397de4582" title=" " alt="" coords="1097,56,1241,83"/>
<area shape="rect" href="psci_8c.html#a8f59d47a1b54f561b8c42f509798142e" title=" " alt="" coords="878,5,1022,32"/>
<area shape="rect" href="psci_8c.html#a3daa8000eb9717dde07d817c306b052b" title=" " alt="" coords="653,5,768,32"/>
<area shape="rect" href="hypercalls_8c.html#a62d0b161cae45d4a2f865203301f7ac4" title=" " alt="" coords="384,56,569,83"/>
<area shape="rect" href="handle__exit_8c.html#a5c24d46393da9651d3133e2377fd7a69" title=" " alt="" coords="209,157,305,184"/>
<area shape="rect" href="handle__exit_8c.html#ad2545fb9f7329ef0604715b9af4a1746" title=" " alt="" coords="207,56,307,83"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="869,208,1031,235"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="617,259,804,285"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,335,129,361"/>
<area shape="rect" href="vgic_8c.html#a96f93a2405989082e3693577b6b2eb5d" title=" " alt="" coords="1521,169,1634,196"/>
<area shape="rect" href="arm_8c.html#a9235365ce64f215b1e024f26d96537cc" title=" " alt="" coords="1305,233,1457,260"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="852,107,1048,133"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="1096,208,1241,235"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1104,360,1233,387"/>
<area shape="rect" href="kvm__main_8c.html#a5f5097640155787fc088aa47b94da0a7" title=" " alt="" coords="1107,309,1231,336"/>
<area shape="rect" href="kvm__main_8c.html#a16e0f63dd5f0d556ed1c9c9999256f85" title=" " alt="" coords="1128,259,1209,285"/>
<area shape="rect" href="handle__exit_8c.html#ae96aab7918301d55b908034db5855e3d" title=" " alt="" coords="643,56,778,83"/>
<area shape="rect" href="emulate-nested_8c.html#af5e2eb745d8ac6415fe941ebe754171d" title=" " alt="" coords="859,157,1041,184"/>
<area shape="rect" href="emulate-nested_8c.html#a5759b383dbf067b5e90235d5fd032ab5" title=" " alt="" coords="624,157,797,184"/>
<area shape="rect" href="handle__exit_8c.html#aeaf983f5c40202edc8b07a76603330cd" title=" " alt="" coords="663,107,758,133"/>
<area shape="rect" href="sys__regs_8c.html#a315e661b6f1cb224596267000909a1ac" title=" " alt="" coords="397,157,556,184"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="862,411,1038,437"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="629,419,792,445"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,360,336,387"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="397,411,556,453"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="911,309,989,336"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="655,309,767,336"/>
</map>
</div>

</div>
</div>
<a id="a822de9f2b97fbc48164c88a7c0ac68f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a822de9f2b97fbc48164c88a7c0ac68f1">&#9670;&nbsp;</a></span>vgic_v4_configure_vsgis()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v4_configure_vsgis </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v4_8c_source.html#l00187">187</a> of file <a class="el" href="vgic-v4_8c_source.html">vgic-v4.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;{</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keyword">struct </span>vgic_dist *dist = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    lockdep_assert_held(&amp;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="arm_8c.html#a9cb9c824750594d8a51e8501bf5ad239">kvm_arm_halt_guest</a>(kvm);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    kvm_for_each_vcpu(i, vcpu, kvm) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">if</span> (dist-&gt;nassgireq)</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <a class="code" href="vgic-v4_8c.html#aaa920282fd67f50873ceb0030afafc6a">vgic_v4_enable_vsgis</a>(vcpu);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <a class="code" href="vgic-v4_8c.html#a84caa8431645d33bab1cc210aeb17801">vgic_v4_disable_vsgis</a>(vcpu);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="arm_8c.html#a19ccb22603ed9366d148065038f59de3">kvm_arm_resume_guest</a>(kvm);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div>
<div class="ttc" id="aarm_8c_html_a19ccb22603ed9366d148065038f59de3"><div class="ttname"><a href="arm_8c.html#a19ccb22603ed9366d148065038f59de3">kvm_arm_resume_guest</a></div><div class="ttdeci">void kvm_arm_resume_guest(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="arm_8c_source.html#l00729">arm.c:729</a></div></div>
<div class="ttc" id="aarm_8c_html_a9cb9c824750594d8a51e8501bf5ad239"><div class="ttname"><a href="arm_8c.html#a9cb9c824750594d8a51e8501bf5ad239">kvm_arm_halt_guest</a></div><div class="ttdeci">void kvm_arm_halt_guest(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="arm_8c_source.html#l00719">arm.c:719</a></div></div>
<div class="ttc" id="avgic-v4_8c_html_a84caa8431645d33bab1cc210aeb17801"><div class="ttname"><a href="vgic-v4_8c.html#a84caa8431645d33bab1cc210aeb17801">vgic_v4_disable_vsgis</a></div><div class="ttdeci">static void vgic_v4_disable_vsgis(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v4_8c_source.html#l00158">vgic-v4.c:158</a></div></div>
<div class="ttc" id="avgic-v4_8c_html_aaa920282fd67f50873ceb0030afafc6a"><div class="ttname"><a href="vgic-v4_8c.html#aaa920282fd67f50873ceb0030afafc6a">vgic_v4_enable_vsgis</a></div><div class="ttdeci">static void vgic_v4_enable_vsgis(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v4_8c_source.html#l00115">vgic-v4.c:115</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a822de9f2b97fbc48164c88a7c0ac68f1_cgraph.png" border="0" usemap="#avgic_8h_a822de9f2b97fbc48164c88a7c0ac68f1_cgraph" alt=""/></div>
<map name="avgic_8h_a822de9f2b97fbc48164c88a7c0ac68f1_cgraph" id="avgic_8h_a822de9f2b97fbc48164c88a7c0ac68f1_cgraph">
<area shape="rect" title=" " alt="" coords="5,107,185,133"/>
<area shape="rect" href="arm_8c.html#a9cb9c824750594d8a51e8501bf5ad239" title=" " alt="" coords="245,31,404,57"/>
<area shape="rect" href="arm_8c.html#a19ccb22603ed9366d148065038f59de3" title=" " alt="" coords="233,81,416,108"/>
<area shape="rect" href="vgic-v4_8c.html#a84caa8431645d33bab1cc210aeb17801" title=" " alt="" coords="241,132,408,159"/>
<area shape="rect" href="vgic-v4_8c.html#aaa920282fd67f50873ceb0030afafc6a" title=" " alt="" coords="243,183,407,209"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="464,31,675,57"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="723,23,933,65"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="992,5,1159,32"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="981,56,1169,83"/>
<area shape="rect" href="kvm__main_8c.html#a7682302871243c20a5dd16214655db15" title=" " alt="" coords="1266,5,1345,32"/>
<area shape="rect" href="kvm__main_8c.html#a9316cc70360fb39d920d5c76a2e41f35" title=" " alt="" coords="1217,107,1393,133"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1229,56,1382,83"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="519,132,620,159"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="519,183,620,209"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="778,132,878,159"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="1008,132,1143,159"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="747,183,909,209"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="1011,183,1139,209"/>
<area shape="rect" href="vgic-v4_8c.html#a52ef6dc22d433838a0e9db0353a69cb1" title=" " alt="" coords="479,233,660,260"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a822de9f2b97fbc48164c88a7c0ac68f1_icgraph.png" border="0" usemap="#avgic_8h_a822de9f2b97fbc48164c88a7c0ac68f1_icgraph" alt=""/></div>
<map name="avgic_8h_a822de9f2b97fbc48164c88a7c0ac68f1_icgraph" id="avgic_8h_a822de9f2b97fbc48164c88a7c0ac68f1_icgraph">
<area shape="rect" title=" " alt="" coords="888,42,1068,69"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a496b87a9bc8e2c1a5aa2d9ba2e13cc10" title=" " alt="" coords="645,15,840,42"/>
<area shape="rect" href="vgic-v3_8c.html#a8c2e4753883533516b45a2bbf9dad1ce" title=" " alt="" coords="653,67,832,94"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a566ddfae78ebf930568f0dcc4a1bea21" title=" " alt="" coords="404,5,597,47"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="405,71,596,98"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,64,356,105"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,71,129,98"/>
</map>
</div>

</div>
</div>
<a id="a783964868bc841487af2392e07060c48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a783964868bc841487af2392e07060c48">&#9670;&nbsp;</a></span>vgic_v4_get_vlpi_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v4_get_vlpi_state </td>
          <td>(</td>
          <td class="paramtype">struct vgic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v4_8c_source.html#l00213">213</a> of file <a class="el" href="vgic-v4_8c_source.html">vgic-v4.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;{</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keyword">struct </span>its_vpe *vpe = &amp;irq-&gt;target_vcpu-&gt;arch.vgic_cpu.vgic_v3.its_vpe;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordtype">int</span> mask = BIT(irq-&gt;intid % BITS_PER_BYTE);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordtype">void</span> *va;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    u8 *ptr;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    va = page_address(vpe-&gt;vpt_page);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    ptr = va + irq-&gt;intid / BITS_PER_BYTE;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    *val = !!(*ptr &amp; mask);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a783964868bc841487af2392e07060c48_icgraph.png" border="0" usemap="#avgic_8h_a783964868bc841487af2392e07060c48_icgraph" alt=""/></div>
<map name="avgic_8h_a783964868bc841487af2392e07060c48_icgraph" id="avgic_8h_a783964868bc841487af2392e07060c48_icgraph">
<area shape="rect" title=" " alt="" coords="619,31,789,57"/>
<area shape="rect" href="vgic-v3_8c.html#af01c534c811a6787db01c7508a333d7c" title=" " alt="" coords="401,23,571,65"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="183,31,353,57"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="5,5,135,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="5,56,135,83"/>
</map>
</div>

</div>
</div>
<a id="a802a906ad744a75b5af33bbd6b31237c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a802a906ad744a75b5af33bbd6b31237c">&#9670;&nbsp;</a></span>vgic_v4_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v4_init </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>vgic_v4_init - Initialize the GICv4 data structures @kvm: Pointer to the VM being initialized</p>
<p>We may be called each time a vITS is created, or when the vgic is initialized. In both cases, the number of vcpus should now be fixed. </p>

<p class="definition">Definition at line <a class="el" href="vgic-v4_8c_source.html#l00239">239</a> of file <a class="el" href="vgic-v4_8c_source.html">vgic-v4.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;{</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keyword">struct </span>vgic_dist *dist = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordtype">int</span> nr_vcpus, ret;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    lockdep_assert_held(&amp;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">if</span> (!kvm_vgic_global_state.has_gicv4)</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">return</span> 0; <span class="comment">/* Nothing to see here... move along. */</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">if</span> (dist-&gt;its_vm.vpes)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    nr_vcpus = atomic_read(&amp;kvm-&gt;online_vcpus);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    dist-&gt;its_vm.vpes = kcalloc(nr_vcpus, <span class="keyword">sizeof</span>(*dist-&gt;its_vm.vpes),</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                    GFP_KERNEL_ACCOUNT);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span> (!dist-&gt;its_vm.vpes)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    dist-&gt;its_vm.nr_vpes = nr_vcpus;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    kvm_for_each_vcpu(i, vcpu, kvm)</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        dist-&gt;its_vm.vpes[i] = &amp;vcpu-&gt;arch.vgic_cpu.vgic_v3.its_vpe;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    ret = its_alloc_vcpu_irqs(&amp;dist-&gt;its_vm);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        kvm_err(<span class="stringliteral">&quot;VPE IRQ allocation failure\n&quot;</span>);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        kfree(dist-&gt;its_vm.vpes);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        dist-&gt;its_vm.nr_vpes = 0;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        dist-&gt;its_vm.vpes = NULL;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    kvm_for_each_vcpu(i, vcpu, kvm) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordtype">int</span> irq = dist-&gt;its_vm.vpes[i]-&gt;irq;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> irq_flags = <a class="code" href="vgic-v4_8c.html#a599b1e60768602692a7a390f1dcf6225">DB_IRQ_FLAGS</a>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">         * Don&#39;t automatically enable the doorbell, as we&#39;re</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">         * flipping it back and forth when the vcpu gets</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">         * blocked. Also disable the lazy disabling, as the</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">         * doorbell could kick us out of the guest too</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">         * early...</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">         * On GICv4.1, the doorbell is managed in HW and must</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">         * be left enabled.</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">if</span> (kvm_vgic_global_state.has_gicv4_1)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            irq_flags &amp;= ~IRQ_NOAUTOEN;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        irq_set_status_flags(irq, irq_flags);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        ret = <a class="code" href="vgic-v4_8c.html#af99c2f70dd91a57879b3a2f583e49a4a">vgic_v4_request_vpe_irq</a>(vcpu, irq);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keywordflow">if</span> (ret) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            kvm_err(<span class="stringliteral">&quot;failed to allocate vcpu IRQ%d\n&quot;</span>, irq);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">             * Trick: adjust the number of vpes so we know</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">             * how many to nuke on teardown...</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            dist-&gt;its_vm.nr_vpes = i;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <a class="code" href="vgic-v4_8c.html#ac805e466fa8f454112c11904ef8d41ce">vgic_v4_teardown</a>(kvm);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div>
<div class="ttc" id="avgic-v4_8c_html_a599b1e60768602692a7a390f1dcf6225"><div class="ttname"><a href="vgic-v4_8c.html#a599b1e60768602692a7a390f1dcf6225">DB_IRQ_FLAGS</a></div><div class="ttdeci">#define DB_IRQ_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v4_8c_source.html#l00082">vgic-v4.c:82</a></div></div>
<div class="ttc" id="avgic-v4_8c_html_ac805e466fa8f454112c11904ef8d41ce"><div class="ttname"><a href="vgic-v4_8c.html#ac805e466fa8f454112c11904ef8d41ce">vgic_v4_teardown</a></div><div class="ttdeci">void vgic_v4_teardown(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v4_8c_source.html#l00315">vgic-v4.c:315</a></div></div>
<div class="ttc" id="avgic-v4_8c_html_af99c2f70dd91a57879b3a2f583e49a4a"><div class="ttname"><a href="vgic-v4_8c.html#af99c2f70dd91a57879b3a2f583e49a4a">vgic_v4_request_vpe_irq</a></div><div class="ttdeci">int vgic_v4_request_vpe_irq(struct kvm_vcpu *vcpu, int irq)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v4_8c_source.html#l00226">vgic-v4.c:226</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a802a906ad744a75b5af33bbd6b31237c_cgraph.png" border="0" usemap="#avgic_8h_a802a906ad744a75b5af33bbd6b31237c_cgraph" alt=""/></div>
<map name="avgic_8h_a802a906ad744a75b5af33bbd6b31237c_cgraph" id="avgic_8h_a802a906ad744a75b5af33bbd6b31237c_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,105,83"/>
<area shape="rect" href="vgic-v4_8c.html#af99c2f70dd91a57879b3a2f583e49a4a" title=" " alt="" coords="153,31,336,57"/>
<area shape="rect" href="vgic-v4_8c.html#ac805e466fa8f454112c11904ef8d41ce" title=" " alt="" coords="175,81,315,108"/>
<area shape="rect" href="vgic-v4_8c.html#ac22161596c9858cc700bab08c03fc422" title=" " alt="" coords="384,31,572,57"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="620,31,743,57"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="791,5,999,32"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="818,56,971,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_a802a906ad744a75b5af33bbd6b31237c_icgraph.png" border="0" usemap="#avgic_8h_a802a906ad744a75b5af33bbd6b31237c_icgraph" alt=""/></div>
<map name="avgic_8h_a802a906ad744a75b5af33bbd6b31237c_icgraph" id="avgic_8h_a802a906ad744a75b5af33bbd6b31237c_icgraph">
<area shape="rect" title=" " alt="" coords="2864,555,2964,581"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="2717,529,2795,556"/>
<area shape="rect" href="vgic-its_8c.html#a76fe1acacf2cd949bea8091703c249fe" title=" " alt="" coords="2696,580,2816,607"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="2499,403,2609,429"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="2469,631,2639,657"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="2460,580,2648,607"/>
<area shape="rect" href="vgic-v2_8c.html#ac8de91a1f816dcd3b3edba1d074a1aca" title=" " alt="" coords="2465,529,2643,556"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="2241,377,2393,404"/>
<area shape="rect" href="pmu-emul_8c.html#ac79256eb94d7599687d3294cd40d10b4" title=" " alt="" coords="1086,412,1265,439"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="2004,159,2173,185"/>
<area shape="rect" href="arm_8c.html#a1cc94da0709805c40af7785f8c5811bf" title=" " alt="" coords="2004,377,2173,404"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="2020,327,2157,353"/>
<area shape="rect" href="pmu-emul_8c.html#ab0f1f020b6774de3fb4ff4c8b4e45a5c" title=" " alt="" coords="845,419,1029,445"/>
<area shape="rect" href="pmu-emul_8c.html#ae6434d5e6ad74c608886c368e56d67bc" title=" " alt="" coords="846,368,1029,395"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="611,317,797,344"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,317,129,344"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="1763,5,1947,32"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="1759,159,1951,185"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="1772,210,1939,251"/>
<area shape="rect" href="arch__timer_8c.html#a11b9b6e6338bbec6085332661c934e91" title=" " alt="" coords="1321,60,1492,87"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="1796,108,1915,135"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="1764,276,1947,303"/>
<area shape="rect" href="arch__timer_8c.html#a27c9feb35e6d7126c054c3325fea59b0" title=" " alt="" coords="1547,5,1699,32"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="1343,5,1471,32"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="1119,5,1231,32"/>
<area shape="rect" href="arch__timer_8c.html#a4bf6ac76380146820b45b06feb3eab27" title=" " alt="" coords="1540,173,1707,200"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1327,169,1486,196"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="1077,216,1273,243"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="1103,115,1248,141"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="1111,64,1240,91"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="1118,165,1233,192"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="893,267,981,293"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="849,28,1025,55"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="623,75,785,101"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,133,336,160"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="857,195,1018,221"/>
<area shape="rect" href="arm_8c.html#ad66c8d00e8adc8315c45170fa270304b" title=" " alt="" coords="394,67,553,109"/>
<area shape="rect" href="arch__timer_8c.html#a0209ad4256c7a1fd5ea70b6abe030954" title=" " alt="" coords="1540,107,1707,149"/>
<area shape="rect" href="sys__regs_8c.html#a9457451d95fa776f653cff6c2a8d31f9" title=" " alt="" coords="1335,115,1478,141"/>
<area shape="rect" href="arch__timer_8c.html#a6ae73bff466fcdc60319f9726d53b571" title=" " alt="" coords="855,317,1020,344"/>
<area shape="rect" href="vgic-irqfd_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="1755,327,1956,353"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="1769,377,1941,404"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="1547,377,1699,404"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="1329,377,1484,404"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="1085,463,1266,505"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="2252,631,2381,657"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="2252,681,2381,708"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="2251,580,2382,607"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="2221,529,2412,556"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="384,449,563,490"/>
</map>
</div>

</div>
</div>
<a id="af99c2f70dd91a57879b3a2f583e49a4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af99c2f70dd91a57879b3a2f583e49a4a">&#9670;&nbsp;</a></span>vgic_v4_request_vpe_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v4_request_vpe_irq </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>irq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-v4_8c_source.html#l00226">226</a> of file <a class="el" href="vgic-v4_8c_source.html">vgic-v4.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;{</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">return</span> request_irq(irq, <a class="code" href="vgic-v4_8c.html#ac22161596c9858cc700bab08c03fc422">vgic_v4_doorbell_handler</a>, 0, <span class="stringliteral">&quot;vcpu&quot;</span>, vcpu);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div>
<div class="ttc" id="avgic-v4_8c_html_ac22161596c9858cc700bab08c03fc422"><div class="ttname"><a href="vgic-v4_8c.html#ac22161596c9858cc700bab08c03fc422">vgic_v4_doorbell_handler</a></div><div class="ttdeci">static irqreturn_t vgic_v4_doorbell_handler(int irq, void *info)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v4_8c_source.html#l00084">vgic-v4.c:84</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_af99c2f70dd91a57879b3a2f583e49a4a_cgraph.png" border="0" usemap="#avgic_8h_af99c2f70dd91a57879b3a2f583e49a4a_cgraph" alt=""/></div>
<map name="avgic_8h_af99c2f70dd91a57879b3a2f583e49a4a_cgraph" id="avgic_8h_af99c2f70dd91a57879b3a2f583e49a4a_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,188,57"/>
<area shape="rect" href="vgic-v4_8c.html#ac22161596c9858cc700bab08c03fc422" title=" " alt="" coords="236,31,424,57"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="472,31,595,57"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="643,5,851,32"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="670,56,823,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_af99c2f70dd91a57879b3a2f583e49a4a_icgraph.png" border="0" usemap="#avgic_8h_af99c2f70dd91a57879b3a2f583e49a4a_icgraph" alt=""/></div>
<map name="avgic_8h_af99c2f70dd91a57879b3a2f583e49a4a_icgraph" id="avgic_8h_af99c2f70dd91a57879b3a2f583e49a4a_icgraph">
<area shape="rect" title=" " alt="" coords="2640,81,2823,108"/>
<area shape="rect" href="vgic-v3_8c.html#a62e3f2f0c8415cb67dc4117d1976f686" title=" " alt="" coords="2480,52,2592,79"/>
<area shape="rect" href="vgic-v4_8c.html#a802a906ad744a75b5af33bbd6b31237c" title=" " alt="" coords="2486,107,2586,133"/>
<area shape="rect" href="vgic-v3_8c.html#af01c534c811a6787db01c7508a333d7c" title=" " alt="" coords="2263,41,2432,82"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="2035,52,2206,79"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="1819,56,1948,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="1819,5,1948,32"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="2309,157,2386,184"/>
<area shape="rect" href="vgic-its_8c.html#a76fe1acacf2cd949bea8091703c249fe" title=" " alt="" coords="2287,107,2407,133"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="2065,259,2176,285"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="2027,107,2215,133"/>
<area shape="rect" href="vgic-v2_8c.html#ac8de91a1f816dcd3b3edba1d074a1aca" title=" " alt="" coords="2031,157,2210,184"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="1807,309,1959,336"/>
<area shape="rect" href="pmu-emul_8c.html#ac79256eb94d7599687d3294cd40d10b4" title=" " alt="" coords="653,157,831,184"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="1571,309,1740,336"/>
<area shape="rect" href="arm_8c.html#a1cc94da0709805c40af7785f8c5811bf" title=" " alt="" coords="1571,360,1740,387"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="1587,528,1724,555"/>
<area shape="rect" href="pmu-emul_8c.html#ab0f1f020b6774de3fb4ff4c8b4e45a5c" title=" " alt="" coords="412,107,596,133"/>
<area shape="rect" href="pmu-emul_8c.html#ae6434d5e6ad74c608886c368e56d67bc" title=" " alt="" coords="413,157,595,184"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,185,364,212"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,185,129,212"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="1330,259,1514,285"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="1326,411,1518,437"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="1339,462,1505,503"/>
<area shape="rect" href="arch__timer_8c.html#a11b9b6e6338bbec6085332661c934e91" title=" " alt="" coords="888,309,1059,336"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="1363,360,1481,387"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="1331,208,1513,235"/>
<area shape="rect" href="arch__timer_8c.html#a27c9feb35e6d7126c054c3325fea59b0" title=" " alt="" coords="1114,259,1266,285"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="909,259,1037,285"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="686,259,798,285"/>
<area shape="rect" href="arch__timer_8c.html#a4bf6ac76380146820b45b06feb3eab27" title=" " alt="" coords="1107,427,1273,453"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="894,423,1053,449"/>
<area shape="rect" href="emulate-nested_8c.html#a1920c02a997dd9975bec0ee02f6ae2c4" title=" " alt="" coords="644,473,840,500"/>
<area shape="rect" href="emulate-nested_8c.html#a1c3e31bd85e9c0590a018ada20a5e4bf" title=" " alt="" coords="669,372,815,399"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="677,315,807,341"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="685,423,799,449"/>
<area shape="rect" href="arm_8c.html#ae1c5fe27678796057c4ea914a9a6897b" title=" " alt="" coords="416,411,592,437"/>
<area shape="rect" href="arm_8c.html#a91790a6a024c83b103717f37a8f0f504" title=" " alt="" coords="189,385,352,412"/>
<area shape="rect" href="arm_8c.html#a05fa4e97677ca3190089071bfce82825" title=" " alt="" coords="423,259,585,285"/>
<area shape="rect" href="arm_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="191,261,350,288"/>
<area shape="rect" href="arch__timer_8c.html#a0209ad4256c7a1fd5ea70b6abe030954" title=" " alt="" coords="1107,361,1273,402"/>
<area shape="rect" href="sys__regs_8c.html#a9457451d95fa776f653cff6c2a8d31f9" title=" " alt="" coords="902,368,1045,395"/>
<area shape="rect" href="arch__timer_8c.html#a6ae73bff466fcdc60319f9726d53b571" title=" " alt="" coords="1107,208,1273,235"/>
<area shape="rect" href="vgic-irqfd_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="1321,579,1523,605"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="1336,528,1508,555"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="1114,528,1266,555"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="896,528,1051,555"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="1818,107,1949,133"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="1788,157,1979,184"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="181,73,360,114"/>
</map>
</div>

</div>
</div>
<a id="ac805e466fa8f454112c11904ef8d41ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac805e466fa8f454112c11904ef8d41ce">&#9670;&nbsp;</a></span>vgic_v4_teardown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vgic_v4_teardown </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>vgic_v4_teardown - Free the GICv4 data structures @kvm: Pointer to the VM being destroyed </p>

<p class="definition">Definition at line <a class="el" href="vgic-v4_8c_source.html#l00315">315</a> of file <a class="el" href="vgic-v4_8c_source.html">vgic-v4.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;{</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keyword">struct </span>its_vm *its_vm = &amp;kvm-&gt;arch.vgic.its_vm;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    lockdep_assert_held(&amp;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">if</span> (!its_vm-&gt;vpes)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; its_vm-&gt;nr_vpes; i++) {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keyword">struct </span>kvm_vcpu *vcpu = kvm_get_vcpu(kvm, i);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordtype">int</span> irq = its_vm-&gt;vpes[i]-&gt;irq;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        irq_clear_status_flags(irq, <a class="code" href="vgic-v4_8c.html#a599b1e60768602692a7a390f1dcf6225">DB_IRQ_FLAGS</a>);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        free_irq(irq, vcpu);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    its_free_vcpu_irqs(its_vm);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    kfree(its_vm-&gt;vpes);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    its_vm-&gt;nr_vpes = 0;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    its_vm-&gt;vpes = NULL;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_ac805e466fa8f454112c11904ef8d41ce_icgraph.png" border="0" usemap="#avgic_8h_ac805e466fa8f454112c11904ef8d41ce_icgraph" alt=""/></div>
<map name="avgic_8h_ac805e466fa8f454112c11904ef8d41ce_icgraph" id="avgic_8h_ac805e466fa8f454112c11904ef8d41ce_icgraph">
<area shape="rect" title=" " alt="" coords="2000,284,2140,311"/>
<area shape="rect" href="vgic-init_8c.html#a814da4f59c826266ad54a8b5aa870de6" title=" " alt="" coords="1780,259,1952,285"/>
<area shape="rect" href="vgic-v4_8c.html#a802a906ad744a75b5af33bbd6b31237c" title=" " alt="" coords="1816,309,1916,336"/>
<area shape="rect" href="vgic-init_8c.html#af08e0c3b0309dbe4472ed185cd2b9e72" title=" " alt="" coords="1591,259,1732,285"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="1363,208,1534,235"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="1116,259,1307,285"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="920,208,1047,235"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="1144,145,1279,172"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="653,208,847,235"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="926,120,1041,147"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="675,157,825,184"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="667,5,833,32"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="673,56,827,83"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="683,107,817,133"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="430,157,589,184"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="187,262,365,303"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="8,309,132,336"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="1623,360,1700,387"/>
<area shape="rect" href="vgic-its_8c.html#a76fe1acacf2cd949bea8091703c249fe" title=" " alt="" coords="1601,309,1721,336"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="1393,461,1504,488"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="1363,360,1534,387"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="1355,411,1543,437"/>
<area shape="rect" href="vgic-v2_8c.html#ac8de91a1f816dcd3b3edba1d074a1aca" title=" " alt="" coords="1359,309,1538,336"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="1135,461,1287,488"/>
<area shape="rect" href="pmu-emul_8c.html#ac79256eb94d7599687d3294cd40d10b4" title=" " alt="" coords="661,360,839,387"/>
<area shape="rect" href="arch__timer_8c.html#a5abc04b494763cd0814855753e56671f" title=" " alt="" coords="899,512,1068,539"/>
<area shape="rect" href="arm_8c.html#a1cc94da0709805c40af7785f8c5811bf" title=" " alt="" coords="899,461,1068,488"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="915,731,1052,757"/>
<area shape="rect" href="pmu-emul_8c.html#ab0f1f020b6774de3fb4ff4c8b4e45a5c" title=" " alt="" coords="417,360,601,387"/>
<area shape="rect" href="pmu-emul_8c.html#ae6434d5e6ad74c608886c368e56d67bc" title=" " alt="" coords="418,309,601,336"/>
<area shape="rect" href="arm_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="183,349,369,376"/>
<area shape="rect" href="arch__timer_8c.html#a7d59bcd17bdbce3017dbc041cd6e9629" title=" " alt="" coords="658,461,842,488"/>
<area shape="rect" href="arch__timer_8c.html#a1c4f03de391e27f5ba91d10b6dfab0bf" title=" " alt="" coords="654,680,846,707"/>
<area shape="rect" href="arch__timer_8c.html#a8fb06d125602c5b00fa9c213aa7e2520" title=" " alt="" coords="667,614,833,655"/>
<area shape="rect" href="arch__timer_8c.html#a11b9b6e6338bbec6085332661c934e91" title=" " alt="" coords="191,528,361,555"/>
<area shape="rect" href="arch__timer_8c.html#acea899fae895cedf39458ed51af3cb1a" title=" " alt="" coords="691,563,809,589"/>
<area shape="rect" href="arch__timer_8c.html#a7af96c32754607120bf365569aac71c0" title=" " alt="" coords="659,411,841,437"/>
<area shape="rect" href="arch__timer_8c.html#a27c9feb35e6d7126c054c3325fea59b0" title=" " alt="" coords="433,461,585,488"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="212,461,340,488"/>
<area shape="rect" href="arch__timer_8c.html#a4bf6ac76380146820b45b06feb3eab27" title=" " alt="" coords="426,629,593,656"/>
<area shape="rect" href="arm_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="197,612,355,639"/>
<area shape="rect" href="reset_8c.html#a124698ccde953ff74d270ddd091fc3a9" title=" " alt="" coords="5,553,135,580"/>
<area shape="rect" href="arch__timer_8c.html#a0209ad4256c7a1fd5ea70b6abe030954" title=" " alt="" coords="426,563,593,605"/>
<area shape="rect" href="arch__timer_8c.html#a6ae73bff466fcdc60319f9726d53b571" title=" " alt="" coords="427,411,592,437"/>
<area shape="rect" href="vgic-irqfd_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="649,781,851,808"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="664,731,836,757"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="433,731,585,757"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="1147,360,1276,387"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="1147,309,1276,336"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="1146,411,1277,437"/>
</map>
</div>

</div>
</div>
<a id="abb188bad2393aaaf40808283d5565b8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb188bad2393aaaf40808283d5565b8a">&#9670;&nbsp;</a></span>vgic_write_guest_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int vgic_write_guest_lock </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpa_t&#160;</td>
          <td class="paramname"><em>gpa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic_8h_source.html#l00135">135</a> of file <a class="el" href="vgic_8h_source.html">vgic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;{</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keyword">struct </span>vgic_dist *dist = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    dist-&gt;table_write_in_progress = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    ret = kvm_write_guest_lock(kvm, gpa, data, len);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    dist-&gt;table_write_in_progress = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic_8h_abb188bad2393aaaf40808283d5565b8a_icgraph.png" border="0" usemap="#avgic_8h_abb188bad2393aaaf40808283d5565b8a_icgraph" alt=""/></div>
<map name="avgic_8h_abb188bad2393aaaf40808283d5565b8a_icgraph" id="avgic_8h_abb188bad2393aaaf40808283d5565b8a_icgraph">
<area shape="rect" title=" " alt="" coords="908,111,1075,138"/>
<area shape="rect" href="vgic-its_8c.html#a8a03f1d07606707af4d357f2b759f9d0" title=" " alt="" coords="441,20,621,61"/>
<area shape="rect" href="vgic-its_8c.html#a29ad3f092d78f66cc21dc28d140e9bc6" title=" " alt="" coords="696,35,833,62"/>
<area shape="rect" href="vgic-its_8c.html#ad7065e4b36f13d2206191274d330d971" title=" " alt="" coords="462,86,601,112"/>
<area shape="rect" href="vgic-its_8c.html#a8055bc2862ea9ec6d9c793e6a9e2b8b2" title=" " alt="" coords="697,136,832,163"/>
<area shape="rect" href="vgic-v3_8c.html#ac8f115520573cc0407f90177aeccfed9" title=" " alt="" coords="669,188,860,229"/>
<area shape="rect" href="vgic-v3_8c.html#af01c534c811a6787db01c7508a333d7c" title=" " alt="" coords="680,253,849,294"/>
<area shape="rect" href="vgic-its_8c.html#ab852aed5f1f8b7b3d84cca646c022bdb" title=" " alt="" coords="5,56,185,83"/>
<area shape="rect" href="vgic-its_8c.html#a9eace9249f0a8c2b817137cabc9b02a4" title=" " alt="" coords="233,78,393,120"/>
<area shape="rect" href="vgic-its_8c.html#ade77ec707a24e1b2482e57ff119719f8" title=" " alt="" coords="466,136,597,163"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="446,260,617,287"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="249,235,378,262"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="249,286,378,312"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
