<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KVM: arch/arm64/kvm/hyp/nvhe/pkvm.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KVM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_ea9599923402ca8ab47fc3e495999dea.html">arch</a></li><li class="navelem"><a class="el" href="dir_67a9e021ce8db5d46236c6154ee454bc.html">arm64</a></li><li class="navelem"><a class="el" href="dir_42f87ef63ac4150166bf7887f68288e2.html">kvm</a></li><li class="navelem"><a class="el" href="dir_478c73b493f5da08054e18cfdaadae60.html">hyp</a></li><li class="navelem"><a class="el" href="dir_8c5482a8acebf1af3f04411f5a7a76ca.html">nvhe</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">pkvm.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/kvm_host.h&gt;</code><br />
<code>#include &lt;linux/mm.h&gt;</code><br />
<code>#include &lt;<a class="el" href="fixed__config_8h_source.html">nvhe/fixed_config.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="mem__protect_8h_source.html">nvhe/mem_protect.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="memory_8h_source.html">nvhe/memory.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="pkvm_8h_source.html">nvhe/pkvm.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="trap__handler_8h_source.html">nvhe/trap_handler.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for pkvm.c:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c__incl.png" border="0" usemap="#aarch_2arm64_2kvm_2hyp_2nvhe_2pkvm_8c" alt=""/></div>
<map name="aarch_2arm64_2kvm_2hyp_2nvhe_2pkvm_8c" id="aarch_2arm64_2kvm_2hyp_2nvhe_2pkvm_8c">
<area shape="rect" title=" " alt="" coords="544,5,701,47"/>
<area shape="rect" title=" " alt="" coords="57,169,191,196"/>
<area shape="rect" title=" " alt="" coords="660,95,756,121"/>
<area shape="rect" href="fixed__config_8h.html" title=" " alt="" coords="813,95,960,121"/>
<area shape="rect" href="mem__protect_8h.html" title=" " alt="" coords="361,95,519,121"/>
<area shape="rect" href="pkvm_8h.html" title=" " alt="" coords="757,169,864,196"/>
<area shape="rect" href="memory_8h.html" title=" " alt="" coords="153,319,276,345"/>
<area shape="rect" href="trap__handler_8h.html" title=" " alt="" coords="1002,95,1153,121"/>
<area shape="rect" title=" " alt="" coords="888,169,997,196"/>
<area shape="rect" title=" " alt="" coords="267,169,394,196"/>
<area shape="rect" title=" " alt="" coords="5,393,141,420"/>
<area shape="rect" title=" " alt="" coords="470,169,621,196"/>
<area shape="rect" title=" " alt="" coords="645,169,733,196"/>
<area shape="rect" href="spinlock_8h.html" title=" " alt="" coords="494,319,618,345"/>
<area shape="rect" title=" " alt="" coords="741,244,880,271"/>
<area shape="rect" href="gfp_8h.html" title=" " alt="" coords="304,244,395,271"/>
<area shape="rect" title=" " alt="" coords="304,319,395,345"/>
<area shape="rect" title=" " alt="" coords="165,393,264,420"/>
<area shape="rect" title=" " alt="" coords="288,393,395,420"/>
<area shape="rect" title=" " alt="" coords="419,393,557,420"/>
<area shape="rect" title=" " alt="" coords="581,393,667,420"/>
<area shape="rect" title=" " alt="" coords="691,393,805,420"/>
<area shape="rect" title=" " alt="" coords="1021,169,1152,196"/>
</map>
</div>
</div>
<p><a href="hyp_2nvhe_2pkvm_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9f888e8ea8c4543274825aab6b2240c6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a9f888e8ea8c4543274825aab6b2240c6">HANDLE_OFFSET</a>&#160;&#160;&#160;0x1000</td></tr>
<tr class="separator:a9f888e8ea8c4543274825aab6b2240c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a81840b7e3e40654eac6693c681f950b8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a81840b7e3e40654eac6693c681f950b8">pvm_init_traps_aa64pfr0</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a81840b7e3e40654eac6693c681f950b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1035306787a17597876ffc0865ae6870"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a1035306787a17597876ffc0865ae6870">pvm_init_traps_aa64pfr1</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a1035306787a17597876ffc0865ae6870"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1a7661621ee51e8b98bd0704204354c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#ad1a7661621ee51e8b98bd0704204354c">pvm_init_traps_aa64dfr0</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ad1a7661621ee51e8b98bd0704204354c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9e37c10b8d46b0fbfbaae3f7903f4d3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#ae9e37c10b8d46b0fbfbaae3f7903f4d3">pvm_init_traps_aa64mmfr0</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ae9e37c10b8d46b0fbfbaae3f7903f4d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37f233e1c63f92218366e6ecc49769a5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a37f233e1c63f92218366e6ecc49769a5">pvm_init_traps_aa64mmfr1</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a37f233e1c63f92218366e6ecc49769a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a954a18c9d50dc1d5a81ff9ddae22f9b4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a954a18c9d50dc1d5a81ff9ddae22f9b4">pvm_init_trap_regs</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a954a18c9d50dc1d5a81ff9ddae22f9b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c91d65c0fb66dd5f7fbfb8a85e8c5a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a6c91d65c0fb66dd5f7fbfb8a85e8c5a2">__pkvm_vcpu_init_traps</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a6c91d65c0fb66dd5f7fbfb8a85e8c5a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44f3b33f9c9af29ae5def49898ff81dd"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a44f3b33f9c9af29ae5def49898ff81dd">vm_handle_to_idx</a> (pkvm_handle_t handle)</td></tr>
<tr class="separator:a44f3b33f9c9af29ae5def49898ff81dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d9f0046f5027226ee083947e55ef151"><td class="memItemLeft" align="right" valign="top">static pkvm_handle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a5d9f0046f5027226ee083947e55ef151">idx_to_vm_handle</a> (unsigned int idx)</td></tr>
<tr class="separator:a5d9f0046f5027226ee083947e55ef151"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6101b658c1156fa996cae0cf5fac8c7"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#ae6101b658c1156fa996cae0cf5fac8c7">DEFINE_HYP_SPINLOCK</a> (vm_table_lock)</td></tr>
<tr class="separator:ae6101b658c1156fa996cae0cf5fac8c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a465d3fd1802ee92a75147953f36f685e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a465d3fd1802ee92a75147953f36f685e">pkvm_hyp_vm_table_init</a> (void *tbl)</td></tr>
<tr class="separator:a465d3fd1802ee92a75147953f36f685e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3a9f8da5f6f1ac6c51d8b4cf7be26ca"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structpkvm__hyp__vm.html">pkvm_hyp_vm</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#af3a9f8da5f6f1ac6c51d8b4cf7be26ca">get_vm_by_handle</a> (pkvm_handle_t handle)</td></tr>
<tr class="separator:af3a9f8da5f6f1ac6c51d8b4cf7be26ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26c97c43a67f2b519b95a2d4f3f3e56d"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structpkvm__hyp__vcpu.html">pkvm_hyp_vcpu</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a26c97c43a67f2b519b95a2d4f3f3e56d">pkvm_load_hyp_vcpu</a> (pkvm_handle_t handle, unsigned int vcpu_idx)</td></tr>
<tr class="separator:a26c97c43a67f2b519b95a2d4f3f3e56d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af533677cbf7e0a82423e25e6ab146d3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#af533677cbf7e0a82423e25e6ab146d3a">pkvm_put_hyp_vcpu</a> (struct <a class="el" href="structpkvm__hyp__vcpu.html">pkvm_hyp_vcpu</a> *hyp_vcpu)</td></tr>
<tr class="separator:af533677cbf7e0a82423e25e6ab146d3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9503b9e29dd4b2337feef252f5a57103"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a9503b9e29dd4b2337feef252f5a57103">unpin_host_vcpu</a> (struct kvm_vcpu *host_vcpu)</td></tr>
<tr class="separator:a9503b9e29dd4b2337feef252f5a57103"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fb5ca8500d8ba2e1c140f3dd549d832"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a9fb5ca8500d8ba2e1c140f3dd549d832">unpin_host_vcpus</a> (struct <a class="el" href="structpkvm__hyp__vcpu.html">pkvm_hyp_vcpu</a> *hyp_vcpus[], unsigned int nr_vcpus)</td></tr>
<tr class="separator:a9fb5ca8500d8ba2e1c140f3dd549d832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad91b8ef9f472d054091ac0d0c7f1d249"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#ad91b8ef9f472d054091ac0d0c7f1d249">init_pkvm_hyp_vm</a> (struct kvm *host_kvm, struct <a class="el" href="structpkvm__hyp__vm.html">pkvm_hyp_vm</a> *hyp_vm, unsigned int nr_vcpus)</td></tr>
<tr class="separator:ad91b8ef9f472d054091ac0d0c7f1d249"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62e6bc810202341dfe789a22d676a469"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a62e6bc810202341dfe789a22d676a469">init_pkvm_hyp_vcpu</a> (struct <a class="el" href="structpkvm__hyp__vcpu.html">pkvm_hyp_vcpu</a> *hyp_vcpu, struct <a class="el" href="structpkvm__hyp__vm.html">pkvm_hyp_vm</a> *hyp_vm, struct kvm_vcpu *host_vcpu, unsigned int vcpu_idx)</td></tr>
<tr class="separator:a62e6bc810202341dfe789a22d676a469"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29d3fa50cc8ae1d0b023ca30ab0ceffc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a29d3fa50cc8ae1d0b023ca30ab0ceffc">find_free_vm_table_entry</a> (struct kvm *host_kvm)</td></tr>
<tr class="separator:a29d3fa50cc8ae1d0b023ca30ab0ceffc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c0b7226654c586286248bea9b106540"><td class="memItemLeft" align="right" valign="top">static pkvm_handle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a5c0b7226654c586286248bea9b106540">insert_vm_table_entry</a> (struct kvm *host_kvm, struct <a class="el" href="structpkvm__hyp__vm.html">pkvm_hyp_vm</a> *hyp_vm)</td></tr>
<tr class="separator:a5c0b7226654c586286248bea9b106540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a296892c18e515626259e369403a4d3d0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a296892c18e515626259e369403a4d3d0">remove_vm_table_entry</a> (pkvm_handle_t handle)</td></tr>
<tr class="separator:a296892c18e515626259e369403a4d3d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a424af5862f022dc4c7a63b34219cd0f8"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a424af5862f022dc4c7a63b34219cd0f8">pkvm_get_hyp_vm_size</a> (unsigned int nr_vcpus)</td></tr>
<tr class="separator:a424af5862f022dc4c7a63b34219cd0f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ac0a95585deaa45106e201ede7a21ec"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a9ac0a95585deaa45106e201ede7a21ec">map_donated_memory_noclear</a> (unsigned long host_va, size_t <a class="el" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>)</td></tr>
<tr class="separator:a9ac0a95585deaa45106e201ede7a21ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12992d9e43e154429da5e2a85cf12dd8"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a12992d9e43e154429da5e2a85cf12dd8">map_donated_memory</a> (unsigned long host_va, size_t <a class="el" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>)</td></tr>
<tr class="separator:a12992d9e43e154429da5e2a85cf12dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57ca4bd54f074772ac03c6401856d122"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a57ca4bd54f074772ac03c6401856d122">__unmap_donated_memory</a> (void *va, size_t <a class="el" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>)</td></tr>
<tr class="separator:a57ca4bd54f074772ac03c6401856d122"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f7ab23a4eb39c09d0a5b9f461a6cb9b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a5f7ab23a4eb39c09d0a5b9f461a6cb9b">unmap_donated_memory</a> (void *va, size_t <a class="el" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>)</td></tr>
<tr class="separator:a5f7ab23a4eb39c09d0a5b9f461a6cb9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0206a7c88d213b1ff24538337468249"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#ae0206a7c88d213b1ff24538337468249">unmap_donated_memory_noclear</a> (void *va, size_t <a class="el" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>)</td></tr>
<tr class="separator:ae0206a7c88d213b1ff24538337468249"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a284d0118156922a170aff08dae02356c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a284d0118156922a170aff08dae02356c">__pkvm_init_vm</a> (struct kvm *host_kvm, unsigned long vm_hva, unsigned long pgd_hva)</td></tr>
<tr class="separator:a284d0118156922a170aff08dae02356c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7216bb296fb7f7480fbc91d0fa389b21"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a7216bb296fb7f7480fbc91d0fa389b21">__pkvm_init_vcpu</a> (pkvm_handle_t handle, struct kvm_vcpu *host_vcpu, unsigned long vcpu_hva)</td></tr>
<tr class="separator:a7216bb296fb7f7480fbc91d0fa389b21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a315a65a066329bcea7b74d4eb11c963c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a315a65a066329bcea7b74d4eb11c963c">teardown_donated_memory</a> (struct kvm_hyp_memcache *mc, void *addr, size_t <a class="el" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>)</td></tr>
<tr class="separator:a315a65a066329bcea7b74d4eb11c963c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adedaa2ebee60585a9aab7d80293a5ad2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#adedaa2ebee60585a9aab7d80293a5ad2">__pkvm_teardown_vm</a> (pkvm_handle_t handle)</td></tr>
<tr class="separator:adedaa2ebee60585a9aab7d80293a5ad2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae2599988ca0fec8cc428667b22dcbda6"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#ae2599988ca0fec8cc428667b22dcbda6">__icache_flags</a></td></tr>
<tr class="separator:ae2599988ca0fec8cc428667b22dcbda6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a240552deb4ef09600b87b23ce5cc5906"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a240552deb4ef09600b87b23ce5cc5906">kvm_arm_vmid_bits</a></td></tr>
<tr class="separator:a240552deb4ef09600b87b23ce5cc5906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17425ab40cd41e111f5331be6e644d83"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structpkvm__hyp__vm.html">pkvm_hyp_vm</a> **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hyp_2nvhe_2pkvm_8c.html#a17425ab40cd41e111f5331be6e644d83">vm_table</a></td></tr>
<tr class="separator:a17425ab40cd41e111f5331be6e644d83"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a9f888e8ea8c4543274825aab6b2240c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f888e8ea8c4543274825aab6b2240c6">&#9670;&nbsp;</a></span>HANDLE_OFFSET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HANDLE_OFFSET&#160;&#160;&#160;0x1000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00219">219</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a7216bb296fb7f7480fbc91d0fa389b21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7216bb296fb7f7480fbc91d0fa389b21">&#9670;&nbsp;</a></span>__pkvm_init_vcpu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __pkvm_init_vcpu </td>
          <td>(</td>
          <td class="paramtype">pkvm_handle_t&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>host_vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>vcpu_hva</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00539">539</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;{</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keyword">struct </span><a class="code" href="structpkvm__hyp__vcpu.html">pkvm_hyp_vcpu</a> *hyp_vcpu;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keyword">struct </span><a class="code" href="structpkvm__hyp__vm.html">pkvm_hyp_vm</a> *hyp_vm;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> idx;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    hyp_vcpu = <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a12992d9e43e154429da5e2a85cf12dd8">map_donated_memory</a>(vcpu_hva, <span class="keyword">sizeof</span>(*hyp_vcpu));</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordflow">if</span> (!hyp_vcpu)</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9">hyp_spin_lock</a>(&amp;vm_table_lock);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    hyp_vm = <a class="code" href="hyp_2nvhe_2pkvm_8c.html#af3a9f8da5f6f1ac6c51d8b4cf7be26ca">get_vm_by_handle</a>(handle);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">if</span> (!hyp_vm) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        ret = -ENOENT;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="keywordflow">goto</span> unlock;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    idx = hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a0492fc593f138f3148964a551861a888">nr_vcpus</a>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">if</span> (idx &gt;= hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a19b7e84c5400ed0c05d082ad0c220ef3">kvm</a>.created_vcpus) {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        ret = -EINVAL;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="keywordflow">goto</span> unlock;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    ret = <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a62e6bc810202341dfe789a22d676a469">init_pkvm_hyp_vcpu</a>(hyp_vcpu, hyp_vm, host_vcpu, idx);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordflow">goto</span> unlock;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#af611e6bd4d351599211f2ea0d2799750">vcpus</a>[idx] = hyp_vcpu;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a0492fc593f138f3148964a551861a888">nr_vcpus</a>++;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;unlock:</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <a class="code" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08">hyp_spin_unlock</a>(&amp;vm_table_lock);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160; </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a5f7ab23a4eb39c09d0a5b9f461a6cb9b">unmap_donated_memory</a>(hyp_vcpu, <span class="keyword">sizeof</span>(*hyp_vcpu));</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160; </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;}</div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a12992d9e43e154429da5e2a85cf12dd8"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a12992d9e43e154429da5e2a85cf12dd8">map_donated_memory</a></div><div class="ttdeci">static void * map_donated_memory(unsigned long host_va, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00421">pkvm.c:421</a></div></div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a5f7ab23a4eb39c09d0a5b9f461a6cb9b"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a5f7ab23a4eb39c09d0a5b9f461a6cb9b">unmap_donated_memory</a></div><div class="ttdeci">static void unmap_donated_memory(void *va, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00437">pkvm.c:437</a></div></div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a62e6bc810202341dfe789a22d676a469"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a62e6bc810202341dfe789a22d676a469">init_pkvm_hyp_vcpu</a></div><div class="ttdeci">static int init_pkvm_hyp_vcpu(struct pkvm_hyp_vcpu *hyp_vcpu, struct pkvm_hyp_vm *hyp_vm, struct kvm_vcpu *host_vcpu, unsigned int vcpu_idx)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00313">pkvm.c:313</a></div></div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_af3a9f8da5f6f1ac6c51d8b4cf7be26ca"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#af3a9f8da5f6f1ac6c51d8b4cf7be26ca">get_vm_by_handle</a></div><div class="ttdeci">static struct pkvm_hyp_vm * get_vm_by_handle(pkvm_handle_t handle)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00253">pkvm.c:253</a></div></div>
<div class="ttc" id="aspinlock_8h_html_a2c6e9db70599188dbe031e2ce8ec6b08"><div class="ttname"><a href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08">hyp_spin_unlock</a></div><div class="ttdeci">static void hyp_spin_unlock(hyp_spinlock_t *lock)</div><div class="ttdef"><b>Definition:</b> <a href="spinlock_8h_source.html#l00082">spinlock.h:82</a></div></div>
<div class="ttc" id="aspinlock_8h_html_ae942ff0e878cb0f4d55ddc4cc6275ec9"><div class="ttname"><a href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9">hyp_spin_lock</a></div><div class="ttdeci">static void hyp_spin_lock(hyp_spinlock_t *lock)</div><div class="ttdef"><b>Definition:</b> <a href="spinlock_8h_source.html#l00044">spinlock.h:44</a></div></div>
<div class="ttc" id="astructpkvm__hyp__vcpu_html"><div class="ttname"><a href="structpkvm__hyp__vcpu.html">pkvm_hyp_vcpu</a></div><div class="ttdef"><b>Definition:</b> <a href="pkvm_8h_source.html#l00018">pkvm.h:18</a></div></div>
<div class="ttc" id="astructpkvm__hyp__vm_html"><div class="ttname"><a href="structpkvm__hyp__vm.html">pkvm_hyp_vm</a></div><div class="ttdef"><b>Definition:</b> <a href="pkvm_8h_source.html#l00028">pkvm.h:28</a></div></div>
<div class="ttc" id="astructpkvm__hyp__vm_html_a0492fc593f138f3148964a551861a888"><div class="ttname"><a href="structpkvm__hyp__vm.html#a0492fc593f138f3148964a551861a888">pkvm_hyp_vm::nr_vcpus</a></div><div class="ttdeci">unsigned int nr_vcpus</div><div class="ttdef"><b>Definition:</b> <a href="pkvm_8h_source.html#l00044">pkvm.h:44</a></div></div>
<div class="ttc" id="astructpkvm__hyp__vm_html_a19b7e84c5400ed0c05d082ad0c220ef3"><div class="ttname"><a href="structpkvm__hyp__vm.html#a19b7e84c5400ed0c05d082ad0c220ef3">pkvm_hyp_vm::kvm</a></div><div class="ttdeci">struct kvm kvm</div><div class="ttdef"><b>Definition:</b> <a href="pkvm_8h_source.html#l00022">pkvm.h:29</a></div></div>
<div class="ttc" id="astructpkvm__hyp__vm_html_af611e6bd4d351599211f2ea0d2799750"><div class="ttname"><a href="structpkvm__hyp__vm.html#af611e6bd4d351599211f2ea0d2799750">pkvm_hyp_vm::vcpus</a></div><div class="ttdeci">struct pkvm_hyp_vcpu * vcpus[]</div><div class="ttdef"><b>Definition:</b> <a href="pkvm_8h_source.html#l00047">pkvm.h:47</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a7216bb296fb7f7480fbc91d0fa389b21_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a7216bb296fb7f7480fbc91d0fa389b21_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a7216bb296fb7f7480fbc91d0fa389b21_cgraph" id="ahyp_2nvhe_2pkvm_8c_a7216bb296fb7f7480fbc91d0fa389b21_cgraph">
<area shape="rect" title=" " alt="" coords="5,319,144,345"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#af3a9f8da5f6f1ac6c51d8b4cf7be26ca" title=" " alt="" coords="214,5,359,32"/>
<area shape="rect" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9" title=" " alt="" coords="1155,259,1269,285"/>
<area shape="rect" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08" title=" " alt="" coords="1147,335,1277,361"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a62e6bc810202341dfe789a22d676a469" title=" " alt="" coords="209,293,365,320"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a12992d9e43e154429da5e2a85cf12dd8" title=" " alt="" coords="200,348,373,375"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a5f7ab23a4eb39c09d0a5b9f461a6cb9b" title=" " alt="" coords="192,405,381,432"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a44f3b33f9c9af29ae5def49898ff81dd" title=" " alt="" coords="460,5,601,32"/>
<area shape="rect" href="mem__protect_8h.html#a8d93d64c69622f186ce841ed9b1c608b" title=" " alt="" coords="693,243,858,269"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a9503b9e29dd4b2337feef252f5a57103" title=" " alt="" coords="465,293,596,320"/>
<area shape="rect" href="mem__protect_8c.html#ab45dbaed102ffbf3ccda18c0cc20a6dc" title=" " alt="" coords="1772,110,1960,151"/>
<area shape="rect" href="mem__protect_8c.html#a4ee4815f49f2d2a8397d1e2430193a3e" title=" " alt="" coords="1540,234,1724,275"/>
<area shape="rect" href="mem__protect_8c.html#aa70b12df63f9379efa7fe11ade510b7c" title=" " alt="" coords="927,259,1091,285"/>
<area shape="rect" href="mem__protect_8c.html#a21f32ced99ed31332ac532029100e42d" title=" " alt="" coords="919,411,1099,437"/>
<area shape="rect" href="mem__protect_8c.html#abbc50e372d72deb41a021219c35e3589" title=" " alt="" coords="929,309,1089,336"/>
<area shape="rect" href="memory_8h.html#a52854ece4f50a52b454b91f1a144b189" title=" " alt="" coords="941,107,1077,133"/>
<area shape="rect" href="mem__protect_8c.html#a024de911d90c8e8d57cc96c87fecb4d3" title=" " alt="" coords="921,360,1097,387"/>
<area shape="rect" href="mem__protect_8c.html#a3ea605c8779e3d79d674c81a6d64919c" title=" " alt="" coords="2012,179,2195,205"/>
<area shape="rect" href="mem__protect_8c.html#a39c30c3fbf244570912cbd38c6e5606a" title=" " alt="" coords="2025,117,2182,144"/>
<area shape="rect" href="spinlock_8h.html#ae92c9f4a09d239d6060880c35d12a48b" title=" " alt="" coords="2022,280,2185,307"/>
<area shape="rect" href="mem__protect_8c.html#acef59d69975c27a7815896535bbb4e65" title=" " alt="" coords="2247,171,2400,213"/>
<area shape="rect" href="pgtable_8c.html#a2a6ed7242e033a1f32360cbe0e5c2281" title=" " alt="" coords="2251,284,2396,311"/>
<area shape="rect" href="pgtable_8c.html#ac74b17e065ba3e68a10f28b594d21e40" title=" " alt="" coords="2448,284,2600,311"/>
<area shape="rect" href="pgtable_8c.html#a4819ac158aa1b43844c3a3b5e5a82ac3" title=" " alt="" coords="2648,259,2807,285"/>
<area shape="rect" href="pgtable_8c.html#af01e17f60125c9e093e082e70a43f362" title=" " alt="" coords="2653,309,2801,336"/>
<area shape="rect" href="pgtable_8c.html#a5aa0f5d1f7f2540fea515eb0b198caba" title=" " alt="" coords="2855,259,3011,285"/>
<area shape="rect" href="mem__protect_8c.html#a906b44af03f69892941d0b4e87d52fbd" title=" " alt="" coords="1789,229,1943,256"/>
<area shape="rect" href="mem__protect_8h.html#a16fa0918fd8f50705e15341038d58fd8" title=" " alt="" coords="685,301,866,328"/>
<area shape="rect" href="memory_8h.html#a3cc326fe973add2b2ea91f6b04dd8fde" title=" " alt="" coords="939,208,1079,235"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a9ac0a95585deaa45106e201ede7a21ec" title=" " alt="" coords="444,345,617,386"/>
<area shape="rect" href="mem__protect_8h.html#a0a0107b185016d850cc3912f2cd2cc09" title=" " alt="" coords="680,356,871,383"/>
<area shape="rect" href="mem__protect_8c.html#a7e4a0c65211d20b4e8adc2d323699489" title=" " alt="" coords="963,512,1054,539"/>
<area shape="rect" href="mem__protect_8c.html#a09511b2fc9e756f5849a9a10c21946f2" title=" " alt="" coords="1357,499,1461,525"/>
<area shape="rect" href="mem__protect_8c.html#a4738d2842abcf74309391d6e6c677537" title=" " alt="" coords="1150,385,1274,412"/>
<area shape="rect" href="mem__protect_8c.html#a673fb7f8a0e4a07b1d69687f8e0e0ba1" title=" " alt="" coords="1541,499,1723,525"/>
<area shape="rect" href="mem__protect_8c.html#ad1da243415ccdd263b42151ea524c09b" title=" " alt="" coords="1549,549,1715,576"/>
<area shape="rect" href="mem__protect_8c.html#ae4aa540ec02ab30863a99b67f90471e5" title=" " alt="" coords="1543,397,1721,424"/>
<area shape="rect" href="mem__protect_8c.html#a41715fcfd37184a9ffdef5c049390537" title=" " alt="" coords="1551,448,1713,475"/>
<area shape="rect" href="mem__protect_8c.html#afb7f8781ecbfa50324009fac4a8a68a8" title=" " alt="" coords="1779,521,1953,562"/>
<area shape="rect" href="mm_8h.html#a36a82f8cc52bf1bf431f904beddc6c18" title=" " alt="" coords="1777,331,1955,373"/>
<area shape="rect" href="mem__protect_8h.html#a2cf886e3d56ed4cd5ddb78944ac0a152" title=" " alt="" coords="1806,397,1926,424"/>
<area shape="rect" href="pgtable_8c.html#af16196aa505cacc0ca294719f9575ce4" title=" " alt="" coords="2008,389,2199,416"/>
<area shape="rect" href="mem__protect_8c.html#a04ee34c0284691282c8c6b71cd477b6a" title=" " alt="" coords="1337,125,1481,152"/>
<area shape="rect" href="mem__protect_8c.html#a5d4226b7d58b6d55f4d6d7195914f4c2" title=" " alt="" coords="1331,59,1487,101"/>
<area shape="rect" href="mem__protect_8c.html#a14fb7245d65588761a3639a3186f18d2" title=" " alt="" coords="1339,176,1479,203"/>
<area shape="rect" href="mem__protect_8c.html#a9dbbee933218e562a7eca625a3b6695b" title=" " alt="" coords="1325,344,1492,371"/>
<area shape="rect" href="mem__protect_8c.html#a793d27f9ec8b2dabd2c158c94d8b7a43" title=" " alt="" coords="1551,117,1713,144"/>
<area shape="rect" href="mem__protect_8c.html#a89057e6dfc7b241de73b439208bcf7d5" title=" " alt="" coords="1542,169,1722,210"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a57ca4bd54f074772ac03c6401856d122" title=" " alt="" coords="429,411,632,437"/>
<area shape="rect" href="mem__protect_8h.html#ac46723bcc56baf1618eacb213151c926" title=" " alt="" coords="680,409,871,436"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a7216bb296fb7f7480fbc91d0fa389b21_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a7216bb296fb7f7480fbc91d0fa389b21_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a7216bb296fb7f7480fbc91d0fa389b21_icgraph" id="ahyp_2nvhe_2pkvm_8c_a7216bb296fb7f7480fbc91d0fa389b21_icgraph">
<area shape="rect" title=" " alt="" coords="857,38,996,65"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="624,13,804,39"/>
<area shape="rect" href="hyp-main_8c.html#ae49bc086c41cfafcbf8f708aba0fc64b" title=" " alt="" coords="619,63,809,90"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="404,13,571,39"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,5,356,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="a284d0118156922a170aff08dae02356c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a284d0118156922a170aff08dae02356c">&#9670;&nbsp;</a></span>__pkvm_init_vm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __pkvm_init_vm </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>host_kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>vm_hva</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>pgd_hva</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00470">470</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;{</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keyword">struct </span><a class="code" href="structpkvm__hyp__vm.html">pkvm_hyp_vm</a> *hyp_vm = NULL;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordtype">size_t</span> vm_size, pgd_size;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structpkvm__hyp__vm.html#a0492fc593f138f3148964a551861a888">nr_vcpus</a>;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordtype">void</span> *pgd = NULL;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    ret = <a class="code" href="mem__protect_8h.html#a8d93d64c69622f186ce841ed9b1c608b">hyp_pin_shared_mem</a>(<a class="code" href="structpkvm__hyp__vm.html#aabc69503a3c0c2f3aad0ceae78b2f9bf">host_kvm</a>, <a class="code" href="structpkvm__hyp__vm.html#aabc69503a3c0c2f3aad0ceae78b2f9bf">host_kvm</a> + 1);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <a class="code" href="structpkvm__hyp__vm.html#a0492fc593f138f3148964a551861a888">nr_vcpus</a> = READ_ONCE(<a class="code" href="structpkvm__hyp__vm.html#aabc69503a3c0c2f3aad0ceae78b2f9bf">host_kvm</a>-&gt;created_vcpus);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structpkvm__hyp__vm.html#a0492fc593f138f3148964a551861a888">nr_vcpus</a> &lt; 1) {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        ret = -EINVAL;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">goto</span> err_unpin_kvm;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    vm_size = <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a424af5862f022dc4c7a63b34219cd0f8">pkvm_get_hyp_vm_size</a>(<a class="code" href="structpkvm__hyp__vm.html#a0492fc593f138f3148964a551861a888">nr_vcpus</a>);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    pgd_size = <a class="code" href="pgtable_8c.html#ac79c497e1cec1ab3d0b89e4ce87e5f51">kvm_pgtable_stage2_pgd_size</a>(<a class="code" href="structhost__mmu.html">host_mmu</a>.<a class="code" href="structhost__mmu.html#a158be8f20ffaf8467b5b56bd2ba109d1">arch</a>.mmu.vtcr);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    ret = -ENOMEM;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    hyp_vm = <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a12992d9e43e154429da5e2a85cf12dd8">map_donated_memory</a>(vm_hva, vm_size);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">if</span> (!hyp_vm)</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">goto</span> err_remove_mappings;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    pgd = <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a9ac0a95585deaa45106e201ede7a21ec">map_donated_memory_noclear</a>(pgd_hva, pgd_size);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">if</span> (!pgd)</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="keywordflow">goto</span> err_remove_mappings;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#ad91b8ef9f472d054091ac0d0c7f1d249">init_pkvm_hyp_vm</a>(<a class="code" href="structpkvm__hyp__vm.html#aabc69503a3c0c2f3aad0ceae78b2f9bf">host_kvm</a>, hyp_vm, <a class="code" href="structpkvm__hyp__vm.html#a0492fc593f138f3148964a551861a888">nr_vcpus</a>);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <a class="code" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9">hyp_spin_lock</a>(&amp;vm_table_lock);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    ret = <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a5c0b7226654c586286248bea9b106540">insert_vm_table_entry</a>(<a class="code" href="structpkvm__hyp__vm.html#aabc69503a3c0c2f3aad0ceae78b2f9bf">host_kvm</a>, hyp_vm);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="keywordflow">goto</span> err_unlock;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    ret = <a class="code" href="mem__protect_8h.html#aede5343a98d17e8fdc0146e1908c69dd">kvm_guest_prepare_stage2</a>(hyp_vm, pgd);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keywordflow">goto</span> err_remove_vm_table_entry;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <a class="code" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08">hyp_spin_unlock</a>(&amp;vm_table_lock);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">return</span> hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a19b7e84c5400ed0c05d082ad0c220ef3">kvm</a>.arch.pkvm.handle;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;err_remove_vm_table_entry:</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a296892c18e515626259e369403a4d3d0">remove_vm_table_entry</a>(hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a19b7e84c5400ed0c05d082ad0c220ef3">kvm</a>.arch.pkvm.handle);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;err_unlock:</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <a class="code" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08">hyp_spin_unlock</a>(&amp;vm_table_lock);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;err_remove_mappings:</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a5f7ab23a4eb39c09d0a5b9f461a6cb9b">unmap_donated_memory</a>(hyp_vm, vm_size);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a5f7ab23a4eb39c09d0a5b9f461a6cb9b">unmap_donated_memory</a>(pgd, pgd_size);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;err_unpin_kvm:</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <a class="code" href="mem__protect_8h.html#a16fa0918fd8f50705e15341038d58fd8">hyp_unpin_shared_mem</a>(<a class="code" href="structpkvm__hyp__vm.html#aabc69503a3c0c2f3aad0ceae78b2f9bf">host_kvm</a>, <a class="code" href="structpkvm__hyp__vm.html#aabc69503a3c0c2f3aad0ceae78b2f9bf">host_kvm</a> + 1);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;}</div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a296892c18e515626259e369403a4d3d0"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a296892c18e515626259e369403a4d3d0">remove_vm_table_entry</a></div><div class="ttdeci">static void remove_vm_table_entry(pkvm_handle_t handle)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00395">pkvm.c:395</a></div></div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a424af5862f022dc4c7a63b34219cd0f8"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a424af5862f022dc4c7a63b34219cd0f8">pkvm_get_hyp_vm_size</a></div><div class="ttdeci">static size_t pkvm_get_hyp_vm_size(unsigned int nr_vcpus)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00401">pkvm.c:401</a></div></div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a5c0b7226654c586286248bea9b106540"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a5c0b7226654c586286248bea9b106540">insert_vm_table_entry</a></div><div class="ttdeci">static pkvm_handle_t insert_vm_table_entry(struct kvm *host_kvm, struct pkvm_hyp_vm *hyp_vm)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00360">pkvm.c:360</a></div></div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a9ac0a95585deaa45106e201ede7a21ec"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a9ac0a95585deaa45106e201ede7a21ec">map_donated_memory_noclear</a></div><div class="ttdeci">static void * map_donated_memory_noclear(unsigned long host_va, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00407">pkvm.c:407</a></div></div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_ad91b8ef9f472d054091ac0d0c7f1d249"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#ad91b8ef9f472d054091ac0d0c7f1d249">init_pkvm_hyp_vm</a></div><div class="ttdeci">static void init_pkvm_hyp_vm(struct kvm *host_kvm, struct pkvm_hyp_vm *hyp_vm, unsigned int nr_vcpus)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00305">pkvm.c:305</a></div></div>
<div class="ttc" id="amem__protect_8h_html_a16fa0918fd8f50705e15341038d58fd8"><div class="ttname"><a href="mem__protect_8h.html#a16fa0918fd8f50705e15341038d58fd8">hyp_unpin_shared_mem</a></div><div class="ttdeci">void hyp_unpin_shared_mem(void *from, void *to)</div><div class="ttdef"><b>Definition:</b> <a href="mem__protect_8c_source.html#l01246">mem_protect.c:1246</a></div></div>
<div class="ttc" id="amem__protect_8h_html_a8d93d64c69622f186ce841ed9b1c608b"><div class="ttname"><a href="mem__protect_8h.html#a8d93d64c69622f186ce841ed9b1c608b">hyp_pin_shared_mem</a></div><div class="ttdeci">int hyp_pin_shared_mem(void *from, void *to)</div><div class="ttdef"><b>Definition:</b> <a href="mem__protect_8c_source.html#l01216">mem_protect.c:1216</a></div></div>
<div class="ttc" id="amem__protect_8h_html_aede5343a98d17e8fdc0146e1908c69dd"><div class="ttname"><a href="mem__protect_8h.html#aede5343a98d17e8fdc0146e1908c69dd">kvm_guest_prepare_stage2</a></div><div class="ttdeci">int kvm_guest_prepare_stage2(struct pkvm_hyp_vm *vm, void *pgd)</div><div class="ttdef"><b>Definition:</b> <a href="mem__protect_8c_source.html#l00232">mem_protect.c:232</a></div></div>
<div class="ttc" id="apgtable_8c_html_ac79c497e1cec1ab3d0b89e4ce87e5f51"><div class="ttname"><a href="pgtable_8c.html#ac79c497e1cec1ab3d0b89e4ce87e5f51">kvm_pgtable_stage2_pgd_size</a></div><div class="ttdeci">size_t kvm_pgtable_stage2_pgd_size(u64 vtcr)</div><div class="ttdef"><b>Definition:</b> <a href="pgtable_8c_source.html#l01561">pgtable.c:1561</a></div></div>
<div class="ttc" id="astructhost__mmu_html"><div class="ttname"><a href="structhost__mmu.html">host_mmu</a></div><div class="ttdef"><b>Definition:</b> <a href="mem__protect_8h_source.html#l00048">mem_protect.h:48</a></div></div>
<div class="ttc" id="astructhost__mmu_html_a158be8f20ffaf8467b5b56bd2ba109d1"><div class="ttname"><a href="structhost__mmu.html#a158be8f20ffaf8467b5b56bd2ba109d1">host_mmu::arch</a></div><div class="ttdeci">struct kvm_arch arch</div><div class="ttdef"><b>Definition:</b> <a href="mem__protect_8h_source.html#l00086">mem_protect.h:49</a></div></div>
<div class="ttc" id="astructpkvm__hyp__vm_html_aabc69503a3c0c2f3aad0ceae78b2f9bf"><div class="ttname"><a href="structpkvm__hyp__vm.html#aabc69503a3c0c2f3aad0ceae78b2f9bf">pkvm_hyp_vm::host_kvm</a></div><div class="ttdeci">struct kvm * host_kvm</div><div class="ttdef"><b>Definition:</b> <a href="pkvm_8h_source.html#l00032">pkvm.h:32</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a284d0118156922a170aff08dae02356c_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a284d0118156922a170aff08dae02356c_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a284d0118156922a170aff08dae02356c_cgraph" id="ahyp_2nvhe_2pkvm_8c_a284d0118156922a170aff08dae02356c_cgraph">
<area shape="rect" title=" " alt="" coords="5,755,135,782"/>
<area shape="rect" href="mem__protect_8h.html#a8d93d64c69622f186ce841ed9b1c608b" title=" " alt="" coords="697,478,863,504"/>
<area shape="rect" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9" title=" " alt="" coords="1207,528,1322,555"/>
<area shape="rect" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08" title=" " alt="" coords="1199,782,1330,808"/>
<area shape="rect" href="mem__protect_8h.html#a16fa0918fd8f50705e15341038d58fd8" title=" " alt="" coords="689,579,871,606"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#ad91b8ef9f472d054091ac0d0c7f1d249" title=" " alt="" coords="204,1402,351,1428"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a5c0b7226654c586286248bea9b106540" title=" " alt="" coords="193,164,361,191"/>
<area shape="rect" href="mem__protect_8h.html#aede5343a98d17e8fdc0146e1908c69dd" title=" " alt="" coords="420,1000,623,1027"/>
<area shape="rect" href="pgtable_8c.html#ac79c497e1cec1ab3d0b89e4ce87e5f51" title=" " alt="" coords="701,1437,859,1478"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a12992d9e43e154429da5e2a85cf12dd8" title=" " alt="" coords="191,704,364,731"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a9ac0a95585deaa45106e201ede7a21ec" title=" " alt="" coords="435,646,608,688"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a424af5862f022dc4c7a63b34219cd0f8" title=" " alt="" coords="188,1452,367,1479"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a296892c18e515626259e369403a4d3d0" title=" " alt="" coords="187,26,368,52"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a5f7ab23a4eb39c09d0a5b9f461a6cb9b" title=" " alt="" coords="183,1503,372,1530"/>
<area shape="rect" href="mem__protect_8c.html#ab45dbaed102ffbf3ccda18c0cc20a6dc" title=" " alt="" coords="937,245,1125,286"/>
<area shape="rect" href="mem__protect_8c.html#a4ee4815f49f2d2a8397d1e2430193a3e" title=" " alt="" coords="939,310,1123,352"/>
<area shape="rect" href="mem__protect_8c.html#aa70b12df63f9379efa7fe11ade510b7c" title=" " alt="" coords="949,528,1113,555"/>
<area shape="rect" href="mem__protect_8c.html#a21f32ced99ed31332ac532029100e42d" title=" " alt="" coords="941,630,1121,656"/>
<area shape="rect" href="mem__protect_8c.html#abbc50e372d72deb41a021219c35e3589" title=" " alt="" coords="951,478,1111,504"/>
<area shape="rect" href="memory_8h.html#a52854ece4f50a52b454b91f1a144b189" title=" " alt="" coords="963,427,1099,454"/>
<area shape="rect" href="mem__protect_8c.html#a024de911d90c8e8d57cc96c87fecb4d3" title=" " alt="" coords="943,579,1119,606"/>
<area shape="rect" href="mem__protect_8c.html#a3ea605c8779e3d79d674c81a6d64919c" title=" " alt="" coords="1173,302,1356,328"/>
<area shape="rect" href="mem__protect_8c.html#a39c30c3fbf244570912cbd38c6e5606a" title=" " alt="" coords="1186,251,1343,278"/>
<area shape="rect" href="spinlock_8h.html#ae92c9f4a09d239d6060880c35d12a48b" title=" " alt="" coords="1183,196,1346,223"/>
<area shape="rect" href="mem__protect_8c.html#a906b44af03f69892941d0b4e87d52fbd" title=" " alt="" coords="1188,352,1341,379"/>
<area shape="rect" href="memory_8h.html#a3cc326fe973add2b2ea91f6b04dd8fde" title=" " alt="" coords="961,680,1101,707"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a29d3fa50cc8ae1d0b023ca30ab0ceffc" title=" " alt="" coords="448,128,595,169"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a5d9f0046f5027226ee083947e55ef151" title=" " alt="" coords="451,76,592,103"/>
<area shape="rect" href="pgtable_8c.html#a9588301531fc2cca84ebf22bd7e9fd1f" title=" " alt="" coords="680,1386,880,1412"/>
<area shape="rect" href="mem__protect_8c.html#a7b75c96fdca4f9e2423274d19539732e" title=" " alt="" coords="684,1102,876,1128"/>
<area shape="rect" href="mem__protect_8c.html#a908466d681d5e97d3703f5cdbb74195d" title=" " alt="" coords="945,731,1117,758"/>
<area shape="rect" href="mem__protect_8c.html#ae8436f4ddcbf41ee699d5ad641d8b7a1" title=" " alt="" coords="701,681,859,722"/>
<area shape="rect" href="mem__protect_8c.html#a49ffb76aced02bafea21c2db094875f9" title=" " alt="" coords="707,1203,853,1230"/>
<area shape="rect" href="mem__protect_8c.html#aec2e458217e1cf49169b545e7753ff13" title=" " alt="" coords="707,747,853,774"/>
<area shape="rect" href="mem__protect_8c.html#a5b200ee75f7323df4f3906ae2c88ab9f" title=" " alt="" coords="698,1000,862,1027"/>
<area shape="rect" href="memory_8h.html#a14e874dea4f604e8102b20809cc5eae4" title=" " alt="" coords="965,1026,1098,1052"/>
<area shape="rect" href="mem__protect_8c.html#ab632fa704709729b0dd0fca500937c6a" title=" " alt="" coords="695,1254,865,1296"/>
<area shape="rect" href="mem__protect_8c.html#a207ffb88750ad30144dd966ed427151a" title=" " alt="" coords="705,1320,855,1361"/>
<area shape="rect" href="mem__protect_8c.html#ab39943fa5a8f70eca9309055e9a0e46d" title=" " alt="" coords="937,840,1125,867"/>
<area shape="rect" href="memory_8h.html#a3858889abb828afd54e20be3a55947d8" title=" " alt="" coords="716,798,844,824"/>
<area shape="rect" href="gfp_8h.html#a0861db7d9969f386a9a429f7554b8311" title=" " alt="" coords="725,899,835,926"/>
<area shape="rect" href="memory_8h.html#aae436fb2b3f13c0954cde727104e80ac" title=" " alt="" coords="713,950,847,976"/>
<area shape="rect" href="mem__protect_8c.html#aaec0113601639e091ef92762b6dd8651" title=" " alt="" coords="671,1152,889,1179"/>
<area shape="rect" href="pgtable_8c.html#ab68001fdf94eab0c95183a0d99df3576" title=" " alt="" coords="967,1415,1095,1442"/>
<area shape="rect" href="mm_8h.html#ad0da942b8d7da8d3cde5a7c767d025eb" title=" " alt="" coords="964,1152,1099,1179"/>
<area shape="rect" href="mm_8h.html#a0747acdab70dfab415663e73eaae8d92" title=" " alt="" coords="956,1102,1107,1128"/>
<area shape="rect" href="gfp_8h.html#ac66c23236ea3da14d0a38962609014dc" title=" " alt="" coords="975,782,1088,808"/>
<area shape="rect" href="mem__protect_8h.html#a0a0107b185016d850cc3912f2cd2cc09" title=" " alt="" coords="685,528,875,555"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a44f3b33f9c9af29ae5def49898ff81dd" title=" " alt="" coords="451,26,592,52"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a57ca4bd54f074772ac03c6401856d122" title=" " alt="" coords="420,1503,623,1530"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a284d0118156922a170aff08dae02356c_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a284d0118156922a170aff08dae02356c_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a284d0118156922a170aff08dae02356c_icgraph" id="ahyp_2nvhe_2pkvm_8c_a284d0118156922a170aff08dae02356c_icgraph">
<area shape="rect" title=" " alt="" coords="847,38,976,65"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="619,13,799,39"/>
<area shape="rect" href="hyp-main_8c.html#a31ad01bbbb8a492515863ede046e1697" title=" " alt="" coords="619,63,799,90"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="404,13,571,39"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,5,356,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="adedaa2ebee60585a9aab7d80293a5ad2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adedaa2ebee60585a9aab7d80293a5ad2">&#9670;&nbsp;</a></span>__pkvm_teardown_vm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __pkvm_teardown_vm </td>
          <td>(</td>
          <td class="paramtype">pkvm_handle_t&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00592">592</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;{</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keyword">struct </span>kvm_hyp_memcache *mc;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keyword">struct </span><a class="code" href="structpkvm__hyp__vm.html">pkvm_hyp_vm</a> *hyp_vm;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keyword">struct </span>kvm *host_kvm;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> idx;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordtype">size_t</span> vm_size;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <a class="code" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9">hyp_spin_lock</a>(&amp;vm_table_lock);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    hyp_vm = <a class="code" href="hyp_2nvhe_2pkvm_8c.html#af3a9f8da5f6f1ac6c51d8b4cf7be26ca">get_vm_by_handle</a>(handle);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">if</span> (!hyp_vm) {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        err = -ENOENT;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordflow">goto</span> err_unlock;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">if</span> (WARN_ON(<a class="code" href="memory_8h.html#a3858889abb828afd54e20be3a55947d8">hyp_page_count</a>(hyp_vm))) {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        err = -EBUSY;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <span class="keywordflow">goto</span> err_unlock;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    }</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    host_kvm = hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#aabc69503a3c0c2f3aad0ceae78b2f9bf">host_kvm</a>;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="comment">/* Ensure the VMID is clean before it can be reallocated */</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="nvhe_2tlb_8c.html#acd12cf2005a2acf1ce92ff165096726a">__kvm_tlb_flush_vmid</a>(&amp;hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a19b7e84c5400ed0c05d082ad0c220ef3">kvm</a>.arch.mmu);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a296892c18e515626259e369403a4d3d0">remove_vm_table_entry</a>(handle);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <a class="code" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08">hyp_spin_unlock</a>(&amp;vm_table_lock);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="comment">/* Reclaim guest pages (including page-table pages) */</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    mc = &amp;host_kvm-&gt;arch.pkvm.teardown_mc;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <a class="code" href="mem__protect_8h.html#af31ab34b10dfe2d918b3d0aedaaefc90">reclaim_guest_pages</a>(hyp_vm, mc);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a9fb5ca8500d8ba2e1c140f3dd549d832">unpin_host_vcpus</a>(hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#af611e6bd4d351599211f2ea0d2799750">vcpus</a>, hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a0492fc593f138f3148964a551861a888">nr_vcpus</a>);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="comment">/* Push the metadata pages to the teardown memcache */</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">for</span> (idx = 0; idx &lt; hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a0492fc593f138f3148964a551861a888">nr_vcpus</a>; ++idx) {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <span class="keyword">struct </span><a class="code" href="structpkvm__hyp__vcpu.html">pkvm_hyp_vcpu</a> *hyp_vcpu = hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#af611e6bd4d351599211f2ea0d2799750">vcpus</a>[idx];</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a315a65a066329bcea7b74d4eb11c963c">teardown_donated_memory</a>(mc, hyp_vcpu, <span class="keyword">sizeof</span>(*hyp_vcpu));</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    vm_size = <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a424af5862f022dc4c7a63b34219cd0f8">pkvm_get_hyp_vm_size</a>(hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a19b7e84c5400ed0c05d082ad0c220ef3">kvm</a>.created_vcpus);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a315a65a066329bcea7b74d4eb11c963c">teardown_donated_memory</a>(mc, hyp_vm, vm_size);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <a class="code" href="mem__protect_8h.html#a16fa0918fd8f50705e15341038d58fd8">hyp_unpin_shared_mem</a>(host_kvm, host_kvm + 1);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;err_unlock:</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <a class="code" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08">hyp_spin_unlock</a>(&amp;vm_table_lock);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;}</div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a315a65a066329bcea7b74d4eb11c963c"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a315a65a066329bcea7b74d4eb11c963c">teardown_donated_memory</a></div><div class="ttdeci">static void teardown_donated_memory(struct kvm_hyp_memcache *mc, void *addr, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00581">pkvm.c:581</a></div></div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a9fb5ca8500d8ba2e1c140f3dd549d832"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a9fb5ca8500d8ba2e1c140f3dd549d832">unpin_host_vcpus</a></div><div class="ttdeci">static void unpin_host_vcpus(struct pkvm_hyp_vcpu *hyp_vcpus[], unsigned int nr_vcpus)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00296">pkvm.c:296</a></div></div>
<div class="ttc" id="amem__protect_8h_html_af31ab34b10dfe2d918b3d0aedaaefc90"><div class="ttname"><a href="mem__protect_8h.html#af31ab34b10dfe2d918b3d0aedaaefc90">reclaim_guest_pages</a></div><div class="ttdeci">void reclaim_guest_pages(struct pkvm_hyp_vm *vm, struct kvm_hyp_memcache *mc)</div><div class="ttdef"><b>Definition:</b> <a href="mem__protect_8c_source.html#l00269">mem_protect.c:269</a></div></div>
<div class="ttc" id="amemory_8h_html_a3858889abb828afd54e20be3a55947d8"><div class="ttname"><a href="memory_8h.html#a3858889abb828afd54e20be3a55947d8">hyp_page_count</a></div><div class="ttdeci">static int hyp_page_count(void *addr)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00045">memory.h:45</a></div></div>
<div class="ttc" id="anvhe_2tlb_8c_html_acd12cf2005a2acf1ce92ff165096726a"><div class="ttname"><a href="nvhe_2tlb_8c.html#acd12cf2005a2acf1ce92ff165096726a">__kvm_tlb_flush_vmid</a></div><div class="ttdeci">void __kvm_tlb_flush_vmid(struct kvm_s2_mmu *mmu)</div><div class="ttdef"><b>Definition:</b> <a href="nvhe_2tlb_8c_source.html#l00168">tlb.c:168</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_adedaa2ebee60585a9aab7d80293a5ad2_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_adedaa2ebee60585a9aab7d80293a5ad2_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_adedaa2ebee60585a9aab7d80293a5ad2_cgraph" id="ahyp_2nvhe_2pkvm_8c_adedaa2ebee60585a9aab7d80293a5ad2_cgraph">
<area shape="rect" title=" " alt="" coords="5,309,175,336"/>
<area shape="rect" href="nvhe_2tlb_8c.html#acd12cf2005a2acf1ce92ff165096726a" title=" " alt="" coords="242,56,409,83"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#af3a9f8da5f6f1ac6c51d8b4cf7be26ca" title=" " alt="" coords="253,208,398,235"/>
<area shape="rect" href="memory_8h.html#a3858889abb828afd54e20be3a55947d8" title=" " alt="" coords="261,157,389,184"/>
<area shape="rect" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9" title=" " alt="" coords="1468,344,1583,371"/>
<area shape="rect" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08" title=" " alt="" coords="1460,597,1591,624"/>
<area shape="rect" href="mem__protect_8h.html#a16fa0918fd8f50705e15341038d58fd8" title=" " alt="" coords="969,344,1150,371"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a424af5862f022dc4c7a63b34219cd0f8" title=" " alt="" coords="236,360,415,387"/>
<area shape="rect" href="mem__protect_8h.html#af31ab34b10dfe2d918b3d0aedaaefc90" title=" " alt="" coords="735,564,895,591"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a296892c18e515626259e369403a4d3d0" title=" " alt="" coords="235,259,416,285"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a315a65a066329bcea7b74d4eb11c963c" title=" " alt="" coords="223,461,428,488"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a9fb5ca8500d8ba2e1c140f3dd549d832" title=" " alt="" coords="256,309,395,336"/>
<area shape="rect" href="nvhe_2tlb_8c.html#ac4dc226b1ecb9bca38c3096eb27c4c1d" title=" " alt="" coords="488,56,653,83"/>
<area shape="rect" href="nvhe_2tlb_8c.html#afffa64d5f9de2ef7a026837a2b9a0629" title=" " alt="" coords="492,5,649,32"/>
<area shape="rect" href="mem__protect_8h.html#a30e07c8d8daaddaecfb787562883f88d" title=" " alt="" coords="739,5,890,32"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a44f3b33f9c9af29ae5def49898ff81dd" title=" " alt="" coords="500,208,641,235"/>
<area shape="rect" href="mem__protect_8c.html#aa70b12df63f9379efa7fe11ade510b7c" title=" " alt="" coords="1211,293,1375,320"/>
<area shape="rect" href="mem__protect_8c.html#a21f32ced99ed31332ac532029100e42d" title=" " alt="" coords="1203,445,1383,472"/>
<area shape="rect" href="mem__protect_8c.html#abbc50e372d72deb41a021219c35e3589" title=" " alt="" coords="1213,344,1373,371"/>
<area shape="rect" href="memory_8h.html#a3cc326fe973add2b2ea91f6b04dd8fde" title=" " alt="" coords="1223,243,1363,269"/>
<area shape="rect" href="mem__protect_8c.html#a024de911d90c8e8d57cc96c87fecb4d3" title=" " alt="" coords="1205,395,1381,421"/>
<area shape="rect" href="mem__protect_8c.html#ac46723bcc56baf1618eacb213151c926" title=" " alt="" coords="964,496,1155,523"/>
<area shape="rect" href="mem__protect_8c.html#a908466d681d5e97d3703f5cdbb74195d" title=" " alt="" coords="973,547,1145,573"/>
<area shape="rect" href="mem__protect_8c.html#ab39943fa5a8f70eca9309055e9a0e46d" title=" " alt="" coords="965,597,1153,624"/>
<area shape="rect" href="gfp_8h.html#a7a740bb58e275f0307a86b02008f751a" title=" " alt="" coords="1227,699,1358,725"/>
<area shape="rect" href="memory_8h.html#aae436fb2b3f13c0954cde727104e80ac" title=" " alt="" coords="993,445,1126,472"/>
<area shape="rect" href="pgtable_8c.html#ab0ed17e7108aa47fbba6cbdfea0b6606" title=" " alt="" coords="980,855,1139,897"/>
<area shape="rect" href="mem__protect_8c.html#a7e4a0c65211d20b4e8adc2d323699489" title=" " alt="" coords="1247,547,1338,573"/>
<area shape="rect" href="mem__protect_8c.html#a09511b2fc9e756f5849a9a10c21946f2" title=" " alt="" coords="1473,496,1577,523"/>
<area shape="rect" href="mem__protect_8c.html#a4738d2842abcf74309391d6e6c677537" title=" " alt="" coords="1463,547,1587,573"/>
<area shape="rect" href="mem__protect_8c.html#a673fb7f8a0e4a07b1d69687f8e0e0ba1" title=" " alt="" coords="1668,496,1851,523"/>
<area shape="rect" href="page__alloc_8c.html#a8ac88fa38a81f4de49d9e80665b1ffc0" title=" " alt="" coords="1449,648,1601,675"/>
<area shape="rect" href="memory_8h.html#af9e2f139c35baaaccb3e11cfe21cf182" title=" " alt="" coords="1431,699,1620,725"/>
<area shape="rect" href="page__alloc_8c.html#ab41323251ac55b72defe671d568dcce7" title=" " alt="" coords="1469,749,1582,776"/>
<area shape="rect" href="page__alloc_8c.html#ae518629a69c1b296e4ade7f9bd7041b8" title=" " alt="" coords="1675,699,1843,725"/>
<area shape="rect" href="page__alloc_8c.html#a02f9a2f04d282f7c4026c60bc2c8d81c" title=" " alt="" coords="1693,597,1825,624"/>
<area shape="rect" href="page__alloc_8c.html#ab55ed9a753f81792da659a3b165fefee" title=" " alt="" coords="1671,648,1847,675"/>
<area shape="rect" href="pgtable_8c.html#ab68001fdf94eab0c95183a0d99df3576" title=" " alt="" coords="1229,965,1357,992"/>
<area shape="rect" href="pgtable_8c.html#a2a6ed7242e033a1f32360cbe0e5c2281" title=" " alt="" coords="1220,825,1365,852"/>
<area shape="rect" href="pgtable_8c.html#a28c492866ecf19d7caee51ffa130c6cb" title=" " alt="" coords="1218,889,1367,916"/>
<area shape="rect" href="pgtable_8c.html#af01e17f60125c9e093e082e70a43f362" title=" " alt="" coords="1685,901,1833,928"/>
<area shape="rect" href="pgtable_8c.html#ac74b17e065ba3e68a10f28b594d21e40" title=" " alt="" coords="1449,800,1601,827"/>
<area shape="rect" href="pgtable_8c.html#a2f4269267d0718905af8540821a6de3d" title=" " alt="" coords="1462,952,1589,979"/>
<area shape="rect" href="pgtable_8c.html#a6e3f339456d5a01daa47962cc12f080e" title=" " alt="" coords="1466,851,1585,877"/>
<area shape="rect" href="pgtable_8c.html#a59b91ffe6fadc53223e667c87148c43c" title=" " alt="" coords="1440,901,1611,928"/>
<area shape="rect" href="spinlock_8h.html#ae92c9f4a09d239d6060880c35d12a48b" title=" " alt="" coords="489,259,652,285"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#ae0206a7c88d213b1ff24538337468249" title=" " alt="" coords="476,447,665,489"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a57ca4bd54f074772ac03c6401856d122" title=" " alt="" coords="713,451,916,477"/>
<area shape="rect" href="mem__protect_8h.html#ac46723bcc56baf1618eacb213151c926" title=" " alt="" coords="964,395,1155,421"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a9503b9e29dd4b2337feef252f5a57103" title=" " alt="" coords="749,328,880,355"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_adedaa2ebee60585a9aab7d80293a5ad2_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_adedaa2ebee60585a9aab7d80293a5ad2_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_adedaa2ebee60585a9aab7d80293a5ad2_icgraph" id="ahyp_2nvhe_2pkvm_8c_adedaa2ebee60585a9aab7d80293a5ad2_icgraph">
<area shape="rect" title=" " alt="" coords="1569,71,1739,98"/>
<area shape="rect" href="pkvm_8c.html#abd259bb0db17ae7c75a8940360667c32" title=" " alt="" coords="1317,46,1505,73"/>
<area shape="rect" href="hyp-main_8c.html#acd9baa0fe0fe70ef810d8675e69aa87d" title=" " alt="" coords="1301,97,1521,123"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="1073,21,1253,47"/>
<area shape="rect" href="pkvm_8c.html#a0de2dfe512399e7f17c01091bc3e8ae8" title=" " alt="" coords="1076,71,1251,98"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="857,17,1023,43"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="628,5,807,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="455,13,579,39"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="855,71,1025,98"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="453,67,580,94"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="650,133,785,159"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="212,58,405,85"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="459,154,574,181"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="234,109,383,135"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="226,159,391,186"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="231,210,386,237"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="241,261,376,287"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="5,109,164,135"/>
</map>
</div>

</div>
</div>
<a id="a6c91d65c0fb66dd5f7fbfb8a85e8c5a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c91d65c0fb66dd5f7fbfb8a85e8c5a2">&#9670;&nbsp;</a></span>__pkvm_vcpu_init_traps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __pkvm_vcpu_init_traps </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00205">205</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;{</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a954a18c9d50dc1d5a81ff9ddae22f9b4">pvm_init_trap_regs</a>(vcpu);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a81840b7e3e40654eac6693c681f950b8">pvm_init_traps_aa64pfr0</a>(vcpu);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a1035306787a17597876ffc0865ae6870">pvm_init_traps_aa64pfr1</a>(vcpu);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#ad1a7661621ee51e8b98bd0704204354c">pvm_init_traps_aa64dfr0</a>(vcpu);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#ae9e37c10b8d46b0fbfbaae3f7903f4d3">pvm_init_traps_aa64mmfr0</a>(vcpu);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a37f233e1c63f92218366e6ecc49769a5">pvm_init_traps_aa64mmfr1</a>(vcpu);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;}</div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a1035306787a17597876ffc0865ae6870"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a1035306787a17597876ffc0865ae6870">pvm_init_traps_aa64pfr1</a></div><div class="ttdeci">static void pvm_init_traps_aa64pfr1(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00080">pkvm.c:80</a></div></div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a37f233e1c63f92218366e6ecc49769a5"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a37f233e1c63f92218366e6ecc49769a5">pvm_init_traps_aa64mmfr1</a></div><div class="ttdeci">static void pvm_init_traps_aa64mmfr1(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00166">pkvm.c:166</a></div></div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a81840b7e3e40654eac6693c681f950b8"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a81840b7e3e40654eac6693c681f950b8">pvm_init_traps_aa64pfr0</a></div><div class="ttdeci">static void pvm_init_traps_aa64pfr0(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00024">pkvm.c:24</a></div></div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a954a18c9d50dc1d5a81ff9ddae22f9b4"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a954a18c9d50dc1d5a81ff9ddae22f9b4">pvm_init_trap_regs</a></div><div class="ttdeci">static void pvm_init_trap_regs(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00181">pkvm.c:181</a></div></div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_ad1a7661621ee51e8b98bd0704204354c"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#ad1a7661621ee51e8b98bd0704204354c">pvm_init_traps_aa64dfr0</a></div><div class="ttdeci">static void pvm_init_traps_aa64dfr0(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00099">pkvm.c:99</a></div></div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_ae9e37c10b8d46b0fbfbaae3f7903f4d3"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#ae9e37c10b8d46b0fbfbaae3f7903f4d3">pvm_init_traps_aa64mmfr0</a></div><div class="ttdeci">static void pvm_init_traps_aa64mmfr0(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00151">pkvm.c:151</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a6c91d65c0fb66dd5f7fbfb8a85e8c5a2_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a6c91d65c0fb66dd5f7fbfb8a85e8c5a2_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a6c91d65c0fb66dd5f7fbfb8a85e8c5a2_cgraph" id="ahyp_2nvhe_2pkvm_8c_a6c91d65c0fb66dd5f7fbfb8a85e8c5a2_cgraph">
<area shape="rect" title=" " alt="" coords="5,284,184,311"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a954a18c9d50dc1d5a81ff9ddae22f9b4" title=" " alt="" coords="260,157,407,184"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#ad1a7661621ee51e8b98bd0704204354c" title=" " alt="" coords="241,208,425,235"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#ae9e37c10b8d46b0fbfbaae3f7903f4d3" title=" " alt="" coords="232,259,435,285"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a37f233e1c63f92218366e6ecc49769a5" title=" " alt="" coords="232,309,435,336"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a81840b7e3e40654eac6693c681f950b8" title=" " alt="" coords="241,360,425,387"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a1035306787a17597876ffc0865ae6870" title=" " alt="" coords="241,411,425,437"/>
<area shape="rect" href="fixed__config_8h.html#aeee799be730bd2cecf006a103f105ad8" title=" " alt="" coords="483,309,617,336"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a16565c885643b75592947613dc6824ab" title=" " alt="" coords="675,5,837,32"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a431ccdc4f12fd24369e66812c4938473" title=" " alt="" coords="675,56,837,83"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a1f44e7fe98069f3a95734b8150d4d992" title=" " alt="" coords="675,107,837,133"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a18c898ed4b92ef5dca21833a4e642deb" title=" " alt="" coords="675,157,837,184"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a607f14bda83ac5bbaabff652f0f547fd" title=" " alt="" coords="671,208,841,235"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a27d2bced24212ad8f4d36ceefa4d37c6" title=" " alt="" coords="671,259,841,285"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#af0a41d0625aeabe795571f6079797efa" title=" " alt="" coords="671,309,841,336"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a4b22b587a15b36cf919156bc0886c2e4" title=" " alt="" coords="665,360,847,387"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a0ab823a0ff849cce466cb75cc306c589" title=" " alt="" coords="665,411,847,437"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a74e0558b5f9e3e02d01923c3b9619397" title=" " alt="" coords="665,461,847,488"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#addab97b7bce7fdc7fc9b02bdc7fb2ddb" title=" " alt="" coords="675,512,837,539"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#afc17d83045d66e7b8270873059f8bb86" title=" " alt="" coords="675,563,837,589"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a47846f0087626650d7d02ec0f25ed672" title=" " alt="" coords="675,613,837,640"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a8eabe3337ed8c988eb4997424a603f42" title=" " alt="" coords="895,429,1068,470"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a6c91d65c0fb66dd5f7fbfb8a85e8c5a2_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a6c91d65c0fb66dd5f7fbfb8a85e8c5a2_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a6c91d65c0fb66dd5f7fbfb8a85e8c5a2_icgraph" id="ahyp_2nvhe_2pkvm_8c_a6c91d65c0fb66dd5f7fbfb8a85e8c5a2_icgraph">
<area shape="rect" title=" " alt="" coords="404,46,583,73"/>
<area shape="rect" href="hyp-main_8c.html#a0d2e48d97b2c17f9bfb2baf739424e84" title=" " alt="" coords="185,5,348,47"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,71,356,112"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,78,129,105"/>
</map>
</div>

</div>
</div>
<a id="a57ca4bd54f074772ac03c6401856d122"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57ca4bd54f074772ac03c6401856d122">&#9670;&nbsp;</a></span>__unmap_donated_memory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unmap_donated_memory </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>va</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00431">431</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;{</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    WARN_ON(<a class="code" href="mem__protect_8h.html#ac46723bcc56baf1618eacb213151c926">__pkvm_hyp_donate_host</a>(<a class="code" href="memory_8h.html#ae6f771ec6d256fcb464e36c64e3c78fb">hyp_virt_to_pfn</a>(va),</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                       PAGE_ALIGN(<a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>) &gt;&gt; PAGE_SHIFT));</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;}</div>
<div class="ttc" id="agen-hyprel_8c_html_a854352f53b148adc24983a58a1866d66"><div class="ttname"><a href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> <a href="gen-hyprel_8c_source.html#l00133">gen-hyprel.c:133</a></div></div>
<div class="ttc" id="amem__protect_8h_html_ac46723bcc56baf1618eacb213151c926"><div class="ttname"><a href="mem__protect_8h.html#ac46723bcc56baf1618eacb213151c926">__pkvm_hyp_donate_host</a></div><div class="ttdeci">int __pkvm_hyp_donate_host(u64 pfn, u64 nr_pages)</div><div class="ttdef"><b>Definition:</b> <a href="mem__protect_8c_source.html#l01184">mem_protect.c:1184</a></div></div>
<div class="ttc" id="amemory_8h_html_ae6f771ec6d256fcb464e36c64e3c78fb"><div class="ttname"><a href="memory_8h.html#ae6f771ec6d256fcb464e36c64e3c78fb">hyp_virt_to_pfn</a></div><div class="ttdeci">#define hyp_virt_to_pfn(virt)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00034">memory.h:34</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a57ca4bd54f074772ac03c6401856d122_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a57ca4bd54f074772ac03c6401856d122_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a57ca4bd54f074772ac03c6401856d122_cgraph" id="ahyp_2nvhe_2pkvm_8c_a57ca4bd54f074772ac03c6401856d122_cgraph">
<area shape="rect" title=" " alt="" coords="5,421,208,448"/>
<area shape="rect" href="mem__protect_8h.html#ac46723bcc56baf1618eacb213151c926" title=" " alt="" coords="256,421,447,448"/>
<area shape="rect" href="mem__protect_8c.html#a7e4a0c65211d20b4e8adc2d323699489" title=" " alt="" coords="539,320,630,346"/>
<area shape="rect" href="mem__protect_8c.html#aa70b12df63f9379efa7fe11ade510b7c" title=" " alt="" coords="503,370,667,397"/>
<area shape="rect" href="mem__protect_8c.html#a21f32ced99ed31332ac532029100e42d" title=" " alt="" coords="495,472,675,498"/>
<area shape="rect" href="mem__protect_8c.html#abbc50e372d72deb41a021219c35e3589" title=" " alt="" coords="505,421,665,448"/>
<area shape="rect" href="mem__protect_8c.html#a024de911d90c8e8d57cc96c87fecb4d3" title=" " alt="" coords="497,522,673,549"/>
<area shape="rect" href="mem__protect_8c.html#a09511b2fc9e756f5849a9a10c21946f2" title=" " alt="" coords="933,166,1037,193"/>
<area shape="rect" href="mem__protect_8c.html#a4738d2842abcf74309391d6e6c677537" title=" " alt="" coords="726,333,850,360"/>
<area shape="rect" href="mem__protect_8c.html#a673fb7f8a0e4a07b1d69687f8e0e0ba1" title=" " alt="" coords="1117,166,1299,193"/>
<area shape="rect" href="mem__protect_8c.html#ad1da243415ccdd263b42151ea524c09b" title=" " alt="" coords="1125,116,1291,142"/>
<area shape="rect" href="mem__protect_8c.html#ae4aa540ec02ab30863a99b67f90471e5" title=" " alt="" coords="1119,65,1297,92"/>
<area shape="rect" href="mem__protect_8c.html#a41715fcfd37184a9ffdef5c049390537" title=" " alt="" coords="1127,217,1289,244"/>
<area shape="rect" href="mem__protect_8c.html#afb7f8781ecbfa50324009fac4a8a68a8" title=" " alt="" coords="1355,143,1529,184"/>
<area shape="rect" href="pgtable_8c.html#af94796027db211abf5c1e20911100320" title=" " alt="" coords="1600,143,1759,184"/>
<area shape="rect" href="pgtable_8c.html#a2a6ed7242e033a1f32360cbe0e5c2281" title=" " alt="" coords="1827,176,1972,202"/>
<area shape="rect" href="pgtable_8c.html#a239db42e3530e785e70ec04460752a87" title=" " alt="" coords="1823,125,1975,152"/>
<area shape="rect" href="pgtable_8c.html#ac74b17e065ba3e68a10f28b594d21e40" title=" " alt="" coords="2052,176,2204,202"/>
<area shape="rect" href="pgtable_8c.html#a4819ac158aa1b43844c3a3b5e5a82ac3" title=" " alt="" coords="2280,176,2439,202"/>
<area shape="rect" href="pgtable_8c.html#a6207f0c3812f7b386a306b717eb3c230" title=" " alt="" coords="2042,74,2214,101"/>
<area shape="rect" href="pgtable_8c.html#ade0f482b0d10d9aeefa9814ae4a7cf4b" title=" " alt="" coords="2024,125,2232,152"/>
<area shape="rect" href="pgtable_8c.html#acdca989573ec9ed02b9b43a7014140c8" title=" " alt="" coords="2286,24,2433,50"/>
<area shape="rect" href="pgtable_8c.html#a2f4269267d0718905af8540821a6de3d" title=" " alt="" coords="2296,277,2423,304"/>
<area shape="rect" href="mm_8h.html#a36a82f8cc52bf1bf431f904beddc6c18" title=" " alt="" coords="1353,26,1531,67"/>
<area shape="rect" href="mem__protect_8h.html#a2cf886e3d56ed4cd5ddb78944ac0a152" title=" " alt="" coords="1382,92,1502,118"/>
<area shape="rect" href="spinlock_8h.html#ae92c9f4a09d239d6060880c35d12a48b" title=" " alt="" coords="1598,282,1761,309"/>
<area shape="rect" href="memory_8h.html#aae436fb2b3f13c0954cde727104e80ac" title=" " alt="" coords="1613,84,1746,110"/>
<area shape="rect" href="pgtable_8c.html#ad1a61b3aa251ca1150e9359c5c31a173" title=" " alt="" coords="1592,33,1767,60"/>
<area shape="rect" href="pgtable_8c.html#a06c1f113f067476605d118dffebef6a8" title=" " alt="" coords="1833,16,1965,42"/>
<area shape="rect" href="pgtable_8c.html#ab93223f59cefdfdd0abfb060e97f7b45" title=" " alt="" coords="1831,66,1967,93"/>
<area shape="rect" href="pgtable_8c.html#ae28010caa0eb1b8a51d07679e9d08daa" title=" " alt="" coords="2033,24,2223,50"/>
<area shape="rect" href="pgtable_8c.html#af16196aa505cacc0ca294719f9575ce4" title=" " alt="" coords="1584,209,1775,236"/>
<area shape="rect" href="pgtable_8c.html#a7eb05408bfb8ee8e00dc693bbd018aa9" title=" " alt="" coords="1825,252,1973,278"/>
<area shape="rect" href="pgtable_8c.html#a42620f6fca0390491a59340e88890864" title=" " alt="" coords="2069,277,2187,304"/>
<area shape="rect" href="pgtable_8c.html#a6e3f339456d5a01daa47962cc12f080e" title=" " alt="" coords="2069,226,2187,253"/>
<area shape="rect" href="mem__protect_8c.html#a04ee34c0284691282c8c6b71cd477b6a" title=" " alt="" coords="913,274,1057,301"/>
<area shape="rect" href="mem__protect_8c.html#a5d4226b7d58b6d55f4d6d7195914f4c2" title=" " alt="" coords="907,326,1063,367"/>
<area shape="rect" href="mem__protect_8c.html#a14fb7245d65588761a3639a3186f18d2" title=" " alt="" coords="915,442,1055,469"/>
<area shape="rect" href="mem__protect_8c.html#a9dbbee933218e562a7eca625a3b6695b" title=" " alt="" coords="901,392,1068,418"/>
<area shape="rect" href="mem__protect_8c.html#a793d27f9ec8b2dabd2c158c94d8b7a43" title=" " alt="" coords="1127,274,1289,301"/>
<area shape="rect" href="mem__protect_8c.html#a1557151da412863d13c00a3cf7308990" title=" " alt="" coords="1350,260,1534,302"/>
<area shape="rect" href="mem__protect_8c.html#ab45dbaed102ffbf3ccda18c0cc20a6dc" title=" " alt="" coords="1348,326,1536,367"/>
<area shape="rect" href="mem__protect_8c.html#a3ea605c8779e3d79d674c81a6d64919c" title=" " alt="" coords="1588,384,1771,410"/>
<area shape="rect" href="mem__protect_8c.html#a39c30c3fbf244570912cbd38c6e5606a" title=" " alt="" coords="1601,333,1758,360"/>
<area shape="rect" href="mem__protect_8c.html#acef59d69975c27a7815896535bbb4e65" title=" " alt="" coords="1823,376,1976,418"/>
<area shape="rect" href="mem__protect_8c.html#a89057e6dfc7b241de73b439208bcf7d5" title=" " alt="" coords="1118,475,1298,516"/>
<area shape="rect" href="mem__protect_8c.html#a4ee4815f49f2d2a8397d1e2430193a3e" title=" " alt="" coords="1116,410,1300,451"/>
<area shape="rect" href="mem__protect_8c.html#a906b44af03f69892941d0b4e87d52fbd" title=" " alt="" coords="1365,392,1519,418"/>
<area shape="rect" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9" title=" " alt="" coords="731,409,845,436"/>
<area shape="rect" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08" title=" " alt="" coords="723,497,853,524"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a57ca4bd54f074772ac03c6401856d122_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a57ca4bd54f074772ac03c6401856d122_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a57ca4bd54f074772ac03c6401856d122_icgraph" id="ahyp_2nvhe_2pkvm_8c_a57ca4bd54f074772ac03c6401856d122_icgraph">
<area shape="rect" title=" " alt="" coords="2308,109,2511,136"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a5f7ab23a4eb39c09d0a5b9f461a6cb9b" title=" " alt="" coords="1580,80,1769,107"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#ae0206a7c88d213b1ff24538337468249" title=" " alt="" coords="2071,131,2260,173"/>
<area shape="rect" href="pkvm_8h.html#a7216bb296fb7f7480fbc91d0fa389b21" title=" " alt="" coords="1353,84,1491,111"/>
<area shape="rect" href="pkvm_8h.html#a284d0118156922a170aff08dae02356c" title=" " alt="" coords="1357,33,1487,60"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="1079,59,1259,85"/>
<area shape="rect" href="hyp-main_8c.html#ae49bc086c41cfafcbf8f708aba0fc64b" title=" " alt="" coords="1073,109,1264,136"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="857,59,1023,85"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="628,51,807,93"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="455,59,579,85"/>
<area shape="rect" href="hyp-main_8c.html#a31ad01bbbb8a492515863ede046e1697" title=" " alt="" coords="1079,8,1259,35"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a315a65a066329bcea7b74d4eb11c963c" title=" " alt="" coords="1817,139,2023,165"/>
<area shape="rect" href="pkvm_8h.html#adedaa2ebee60585a9aab7d80293a5ad2" title=" " alt="" coords="1590,139,1759,165"/>
<area shape="rect" href="pkvm_8c.html#abd259bb0db17ae7c75a8940360667c32" title=" " alt="" coords="1328,135,1516,161"/>
<area shape="rect" href="hyp-main_8c.html#acd9baa0fe0fe70ef810d8675e69aa87d" title=" " alt="" coords="1312,185,1532,212"/>
<area shape="rect" href="pkvm_8c.html#a0de2dfe512399e7f17c01091bc3e8ae8" title=" " alt="" coords="1081,160,1256,187"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="855,160,1025,187"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="453,187,580,213"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="650,120,785,147"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="212,208,405,235"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="459,115,574,141"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="234,107,383,133"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="226,157,391,184"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="231,5,386,32"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="241,56,376,83"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="5,107,164,133"/>
</map>
</div>

</div>
</div>
<a id="ae6101b658c1156fa996cae0cf5fac8c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6101b658c1156fa996cae0cf5fac8c7">&#9670;&nbsp;</a></span>DEFINE_HYP_SPINLOCK()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static DEFINE_HYP_SPINLOCK </td>
          <td>(</td>
          <td class="paramtype">vm_table_lock&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a29d3fa50cc8ae1d0b023ca30ab0ceffc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29d3fa50cc8ae1d0b023ca30ab0ceffc">&#9670;&nbsp;</a></span>find_free_vm_table_entry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int find_free_vm_table_entry </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>host_kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00342">342</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;{</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; KVM_MAX_PVMS; ++i) {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="hyp_2nvhe_2pkvm_8c.html#a17425ab40cd41e111f5331be6e644d83">vm_table</a>[i])</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;}</div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a17425ab40cd41e111f5331be6e644d83"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a17425ab40cd41e111f5331be6e644d83">vm_table</a></div><div class="ttdeci">static struct pkvm_hyp_vm ** vm_table</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00242">pkvm.c:242</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a29d3fa50cc8ae1d0b023ca30ab0ceffc_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a29d3fa50cc8ae1d0b023ca30ab0ceffc_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a29d3fa50cc8ae1d0b023ca30ab0ceffc_icgraph" id="ahyp_2nvhe_2pkvm_8c_a29d3fa50cc8ae1d0b023ca30ab0ceffc_icgraph">
<area shape="rect" title=" " alt="" coords="1240,31,1387,72"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a5c0b7226654c586286248bea9b106540" title=" " alt="" coords="1024,38,1192,65"/>
<area shape="rect" href="pkvm_8h.html#a284d0118156922a170aff08dae02356c" title=" " alt="" coords="847,38,976,65"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="619,13,799,39"/>
<area shape="rect" href="hyp-main_8c.html#a31ad01bbbb8a492515863ede046e1697" title=" " alt="" coords="619,63,799,90"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="404,13,571,39"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,5,356,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="af3a9f8da5f6f1ac6c51d8b4cf7be26ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3a9f8da5f6f1ac6c51d8b4cf7be26ca">&#9670;&nbsp;</a></span>get_vm_by_handle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structpkvm__hyp__vm.html">pkvm_hyp_vm</a>* get_vm_by_handle </td>
          <td>(</td>
          <td class="paramtype">pkvm_handle_t&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00253">253</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;{</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> idx = <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a44f3b33f9c9af29ae5def49898ff81dd">vm_handle_to_idx</a>(handle);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">if</span> (unlikely(idx &gt;= KVM_MAX_PVMS))</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a17425ab40cd41e111f5331be6e644d83">vm_table</a>[idx];</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a44f3b33f9c9af29ae5def49898ff81dd"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a44f3b33f9c9af29ae5def49898ff81dd">vm_handle_to_idx</a></div><div class="ttdeci">static unsigned int vm_handle_to_idx(pkvm_handle_t handle)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00221">pkvm.c:221</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_af3a9f8da5f6f1ac6c51d8b4cf7be26ca_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_af3a9f8da5f6f1ac6c51d8b4cf7be26ca_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_af3a9f8da5f6f1ac6c51d8b4cf7be26ca_cgraph" id="ahyp_2nvhe_2pkvm_8c_af3a9f8da5f6f1ac6c51d8b4cf7be26ca_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,151,32"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a44f3b33f9c9af29ae5def49898ff81dd" title=" " alt="" coords="199,5,340,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_af3a9f8da5f6f1ac6c51d8b4cf7be26ca_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_af3a9f8da5f6f1ac6c51d8b4cf7be26ca_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_af3a9f8da5f6f1ac6c51d8b4cf7be26ca_icgraph" id="ahyp_2nvhe_2pkvm_8c_af3a9f8da5f6f1ac6c51d8b4cf7be26ca_icgraph">
<area shape="rect" title=" " alt="" coords="1787,110,1932,137"/>
<area shape="rect" href="pkvm_8h.html#a7216bb296fb7f7480fbc91d0fa389b21" title=" " alt="" coords="1585,47,1723,74"/>
<area shape="rect" href="pkvm_8h.html#adedaa2ebee60585a9aab7d80293a5ad2" title=" " alt="" coords="1569,110,1739,137"/>
<area shape="rect" href="pkvm_8h.html#a26c97c43a67f2b519b95a2d4f3f3e56d" title=" " alt="" coords="1573,186,1735,213"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="1073,13,1253,39"/>
<area shape="rect" href="hyp-main_8c.html#ae49bc086c41cfafcbf8f708aba0fc64b" title=" " alt="" coords="1316,47,1507,74"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="857,13,1023,39"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="628,5,807,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="455,13,579,39"/>
<area shape="rect" href="pkvm_8c.html#abd259bb0db17ae7c75a8940360667c32" title=" " alt="" coords="1317,98,1505,125"/>
<area shape="rect" href="hyp-main_8c.html#acd9baa0fe0fe70ef810d8675e69aa87d" title=" " alt="" coords="1301,149,1521,175"/>
<area shape="rect" href="pkvm_8c.html#a0de2dfe512399e7f17c01091bc3e8ae8" title=" " alt="" coords="1076,98,1251,125"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="855,98,1025,125"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="453,70,580,97"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="650,138,785,165"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="212,61,405,87"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="459,159,574,186"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="234,111,383,138"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="226,162,391,189"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="231,213,386,239"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="241,263,376,290"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="5,111,164,138"/>
<area shape="rect" href="hyp-main_8c.html#a4ee0e6f5a31d21183ee7fea340479a2a" title=" " alt="" coords="1320,199,1503,226"/>
</map>
</div>

</div>
</div>
<a id="a5d9f0046f5027226ee083947e55ef151"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d9f0046f5027226ee083947e55ef151">&#9670;&nbsp;</a></span>idx_to_vm_handle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static pkvm_handle_t idx_to_vm_handle </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>idx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00226">226</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;{</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">return</span> idx + <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a9f888e8ea8c4543274825aab6b2240c6">HANDLE_OFFSET</a>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a9f888e8ea8c4543274825aab6b2240c6"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a9f888e8ea8c4543274825aab6b2240c6">HANDLE_OFFSET</a></div><div class="ttdeci">#define HANDLE_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00219">pkvm.c:219</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a5d9f0046f5027226ee083947e55ef151_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a5d9f0046f5027226ee083947e55ef151_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a5d9f0046f5027226ee083947e55ef151_icgraph" id="ahyp_2nvhe_2pkvm_8c_a5d9f0046f5027226ee083947e55ef151_icgraph">
<area shape="rect" title=" " alt="" coords="1240,38,1381,65"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a5c0b7226654c586286248bea9b106540" title=" " alt="" coords="1024,38,1192,65"/>
<area shape="rect" href="pkvm_8h.html#a284d0118156922a170aff08dae02356c" title=" " alt="" coords="847,38,976,65"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="619,13,799,39"/>
<area shape="rect" href="hyp-main_8c.html#a31ad01bbbb8a492515863ede046e1697" title=" " alt="" coords="619,63,799,90"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="404,13,571,39"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,5,356,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="a62e6bc810202341dfe789a22d676a469"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62e6bc810202341dfe789a22d676a469">&#9670;&nbsp;</a></span>init_pkvm_hyp_vcpu()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int init_pkvm_hyp_vcpu </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpkvm__hyp__vcpu.html">pkvm_hyp_vcpu</a> *&#160;</td>
          <td class="paramname"><em>hyp_vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpkvm__hyp__vm.html">pkvm_hyp_vm</a> *&#160;</td>
          <td class="paramname"><em>hyp_vm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>host_vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>vcpu_idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00313">313</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mem__protect_8h.html#a8d93d64c69622f186ce841ed9b1c608b">hyp_pin_shared_mem</a>(host_vcpu, host_vcpu + 1))</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">return</span> -EBUSY;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">if</span> (host_vcpu-&gt;vcpu_idx != vcpu_idx) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        ret = -EINVAL;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">goto</span> done;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    hyp_vcpu-&gt;<a class="code" href="structpkvm__hyp__vcpu.html#a9b0affdb0c9ee12180c3c2aae044da01">host_vcpu</a> = host_vcpu;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    hyp_vcpu-&gt;<a class="code" href="structpkvm__hyp__vcpu.html#a4c0a73fea5ae1993444129cf102451a6">vcpu</a>.kvm = &amp;hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a19b7e84c5400ed0c05d082ad0c220ef3">kvm</a>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    hyp_vcpu-&gt;<a class="code" href="structpkvm__hyp__vcpu.html#a4c0a73fea5ae1993444129cf102451a6">vcpu</a>.vcpu_id = READ_ONCE(host_vcpu-&gt;vcpu_id);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    hyp_vcpu-&gt;<a class="code" href="structpkvm__hyp__vcpu.html#a4c0a73fea5ae1993444129cf102451a6">vcpu</a>.vcpu_idx = vcpu_idx;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    hyp_vcpu-&gt;<a class="code" href="structpkvm__hyp__vcpu.html#a4c0a73fea5ae1993444129cf102451a6">vcpu</a>.arch.hw_mmu = &amp;hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a19b7e84c5400ed0c05d082ad0c220ef3">kvm</a>.arch.mmu;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    hyp_vcpu-&gt;<a class="code" href="structpkvm__hyp__vcpu.html#a4c0a73fea5ae1993444129cf102451a6">vcpu</a>.arch.cflags = READ_ONCE(host_vcpu-&gt;arch.cflags);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;done:</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a9503b9e29dd4b2337feef252f5a57103">unpin_host_vcpu</a>(host_vcpu);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a9503b9e29dd4b2337feef252f5a57103"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a9503b9e29dd4b2337feef252f5a57103">unpin_host_vcpu</a></div><div class="ttdeci">static void unpin_host_vcpu(struct kvm_vcpu *host_vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00290">pkvm.c:290</a></div></div>
<div class="ttc" id="astructpkvm__hyp__vcpu_html_a4c0a73fea5ae1993444129cf102451a6"><div class="ttname"><a href="structpkvm__hyp__vcpu.html#a4c0a73fea5ae1993444129cf102451a6">pkvm_hyp_vcpu::vcpu</a></div><div class="ttdeci">struct kvm_vcpu vcpu</div><div class="ttdef"><b>Definition:</b> <a href="pkvm_8h_source.html#l00066">pkvm.h:19</a></div></div>
<div class="ttc" id="astructpkvm__hyp__vcpu_html_a9b0affdb0c9ee12180c3c2aae044da01"><div class="ttname"><a href="structpkvm__hyp__vcpu.html#a9b0affdb0c9ee12180c3c2aae044da01">pkvm_hyp_vcpu::host_vcpu</a></div><div class="ttdeci">struct kvm_vcpu * host_vcpu</div><div class="ttdef"><b>Definition:</b> <a href="pkvm_8h_source.html#l00022">pkvm.h:22</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a62e6bc810202341dfe789a22d676a469_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a62e6bc810202341dfe789a22d676a469_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a62e6bc810202341dfe789a22d676a469_cgraph" id="ahyp_2nvhe_2pkvm_8c_a62e6bc810202341dfe789a22d676a469_cgraph">
<area shape="rect" title=" " alt="" coords="5,295,161,321"/>
<area shape="rect" href="mem__protect_8h.html#a8d93d64c69622f186ce841ed9b1c608b" title=" " alt="" coords="396,269,561,296"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a9503b9e29dd4b2337feef252f5a57103" title=" " alt="" coords="209,320,340,347"/>
<area shape="rect" href="mem__protect_8c.html#ab45dbaed102ffbf3ccda18c0cc20a6dc" title=" " alt="" coords="617,127,805,169"/>
<area shape="rect" href="mem__protect_8c.html#a4ee4815f49f2d2a8397d1e2430193a3e" title=" " alt="" coords="619,62,803,103"/>
<area shape="rect" href="mem__protect_8c.html#aa70b12df63f9379efa7fe11ade510b7c" title=" " alt="" coords="629,244,793,271"/>
<area shape="rect" href="mem__protect_8c.html#a21f32ced99ed31332ac532029100e42d" title=" " alt="" coords="621,345,801,372"/>
<area shape="rect" href="mem__protect_8c.html#abbc50e372d72deb41a021219c35e3589" title=" " alt="" coords="631,295,791,321"/>
<area shape="rect" href="memory_8h.html#a52854ece4f50a52b454b91f1a144b189" title=" " alt="" coords="643,193,779,220"/>
<area shape="rect" href="mem__protect_8c.html#a024de911d90c8e8d57cc96c87fecb4d3" title=" " alt="" coords="623,396,799,423"/>
<area shape="rect" href="mem__protect_8c.html#a3ea605c8779e3d79d674c81a6d64919c" title=" " alt="" coords="853,77,1036,104"/>
<area shape="rect" href="mem__protect_8c.html#a39c30c3fbf244570912cbd38c6e5606a" title=" " alt="" coords="866,179,1023,205"/>
<area shape="rect" href="spinlock_8h.html#ae92c9f4a09d239d6060880c35d12a48b" title=" " alt="" coords="863,128,1026,155"/>
<area shape="rect" href="mem__protect_8c.html#acef59d69975c27a7815896535bbb4e65" title=" " alt="" coords="1084,41,1237,82"/>
<area shape="rect" href="pgtable_8c.html#a2a6ed7242e033a1f32360cbe0e5c2281" title=" " alt="" coords="1088,107,1233,133"/>
<area shape="rect" href="pgtable_8c.html#ac74b17e065ba3e68a10f28b594d21e40" title=" " alt="" coords="1285,107,1437,133"/>
<area shape="rect" href="pgtable_8c.html#a4819ac158aa1b43844c3a3b5e5a82ac3" title=" " alt="" coords="1485,81,1644,108"/>
<area shape="rect" href="pgtable_8c.html#af01e17f60125c9e093e082e70a43f362" title=" " alt="" coords="1491,132,1639,159"/>
<area shape="rect" href="pgtable_8c.html#a5aa0f5d1f7f2540fea515eb0b198caba" title=" " alt="" coords="1692,81,1848,108"/>
<area shape="rect" href="pgtable_8c.html#ac1a7f01d8f40491309c052bdea628e06" title=" " alt="" coords="1703,132,1837,159"/>
<area shape="rect" href="pgtable_8c.html#a98293d8aa53e4ee188e8dc42f3dc17e9" title=" " alt="" coords="1911,5,2089,32"/>
<area shape="rect" href="pgtable_8c.html#abfea9e86c1a7e719b3d9e35bb045d795" title=" " alt="" coords="1896,56,2104,83"/>
<area shape="rect" href="pgtable_8c.html#a2f4269267d0718905af8540821a6de3d" title=" " alt="" coords="1937,107,2063,133"/>
<area shape="rect" href="pgtable_8c.html#a6e3f339456d5a01daa47962cc12f080e" title=" " alt="" coords="1941,157,2059,184"/>
<area shape="rect" href="mem__protect_8c.html#a906b44af03f69892941d0b4e87d52fbd" title=" " alt="" coords="868,27,1021,53"/>
<area shape="rect" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9" title=" " alt="" coords="887,283,1002,309"/>
<area shape="rect" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08" title=" " alt="" coords="879,359,1010,385"/>
<area shape="rect" href="mem__protect_8h.html#a16fa0918fd8f50705e15341038d58fd8" title=" " alt="" coords="388,320,569,347"/>
<area shape="rect" href="memory_8h.html#a3cc326fe973add2b2ea91f6b04dd8fde" title=" " alt="" coords="641,447,781,473"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a62e6bc810202341dfe789a22d676a469_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a62e6bc810202341dfe789a22d676a469_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a62e6bc810202341dfe789a22d676a469_icgraph" id="ahyp_2nvhe_2pkvm_8c_a62e6bc810202341dfe789a22d676a469_icgraph">
<area shape="rect" title=" " alt="" coords="1044,38,1200,65"/>
<area shape="rect" href="pkvm_8h.html#a7216bb296fb7f7480fbc91d0fa389b21" title=" " alt="" coords="857,38,996,65"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="624,13,804,39"/>
<area shape="rect" href="hyp-main_8c.html#ae49bc086c41cfafcbf8f708aba0fc64b" title=" " alt="" coords="619,63,809,90"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="404,13,571,39"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,5,356,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="ad91b8ef9f472d054091ac0d0c7f1d249"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad91b8ef9f472d054091ac0d0c7f1d249">&#9670;&nbsp;</a></span>init_pkvm_hyp_vm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void init_pkvm_hyp_vm </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>host_kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpkvm__hyp__vm.html">pkvm_hyp_vm</a> *&#160;</td>
          <td class="paramname"><em>hyp_vm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nr_vcpus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00305">305</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;{</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#aabc69503a3c0c2f3aad0ceae78b2f9bf">host_kvm</a> = host_kvm;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a19b7e84c5400ed0c05d082ad0c220ef3">kvm</a>.created_vcpus = nr_vcpus;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a19b7e84c5400ed0c05d082ad0c220ef3">kvm</a>.arch.mmu.vtcr = <a class="code" href="structhost__mmu.html">host_mmu</a>.<a class="code" href="structhost__mmu.html#a158be8f20ffaf8467b5b56bd2ba109d1">arch</a>.mmu.vtcr;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_ad91b8ef9f472d054091ac0d0c7f1d249_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_ad91b8ef9f472d054091ac0d0c7f1d249_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_ad91b8ef9f472d054091ac0d0c7f1d249_icgraph" id="ahyp_2nvhe_2pkvm_8c_ad91b8ef9f472d054091ac0d0c7f1d249_icgraph">
<area shape="rect" title=" " alt="" coords="1024,38,1171,65"/>
<area shape="rect" href="pkvm_8h.html#a284d0118156922a170aff08dae02356c" title=" " alt="" coords="847,38,976,65"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="619,13,799,39"/>
<area shape="rect" href="hyp-main_8c.html#a31ad01bbbb8a492515863ede046e1697" title=" " alt="" coords="619,63,799,90"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="404,13,571,39"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,5,356,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="a5c0b7226654c586286248bea9b106540"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c0b7226654c586286248bea9b106540">&#9670;&nbsp;</a></span>insert_vm_table_entry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static pkvm_handle_t insert_vm_table_entry </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>host_kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpkvm__hyp__vm.html">pkvm_hyp_vm</a> *&#160;</td>
          <td class="paramname"><em>hyp_vm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00360">360</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;{</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keyword">struct </span>kvm_s2_mmu *mmu = &amp;hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a19b7e84c5400ed0c05d082ad0c220ef3">kvm</a>.arch.mmu;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordtype">int</span> idx;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="spinlock_8h.html#ae92c9f4a09d239d6060880c35d12a48b">hyp_assert_lock_held</a>(&amp;vm_table_lock);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">     * Initializing protected state might have failed, yet a malicious</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">     * host could trigger this function. Thus, ensure that &#39;vm_table&#39;</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">     * exists.</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">if</span> (unlikely(!<a class="code" href="hyp_2nvhe_2pkvm_8c.html#a17425ab40cd41e111f5331be6e644d83">vm_table</a>))</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    idx = <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a29d3fa50cc8ae1d0b023ca30ab0ceffc">find_free_vm_table_entry</a>(host_kvm);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">if</span> (idx &lt; 0)</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">return</span> idx;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a19b7e84c5400ed0c05d082ad0c220ef3">kvm</a>.arch.pkvm.handle = <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a5d9f0046f5027226ee083947e55ef151">idx_to_vm_handle</a>(idx);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">/* VMID 0 is reserved for the host */</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    atomic64_set(&amp;mmu-&gt;vmid.id, idx + 1);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    mmu-&gt;arch = &amp;hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a19b7e84c5400ed0c05d082ad0c220ef3">kvm</a>.arch;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    mmu-&gt;pgt = &amp;hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a74498b8ae536bb1ab92abf0fcb5e1a14">pgt</a>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a17425ab40cd41e111f5331be6e644d83">vm_table</a>[idx] = hyp_vm;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">return</span> hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a19b7e84c5400ed0c05d082ad0c220ef3">kvm</a>.arch.pkvm.handle;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;}</div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a29d3fa50cc8ae1d0b023ca30ab0ceffc"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a29d3fa50cc8ae1d0b023ca30ab0ceffc">find_free_vm_table_entry</a></div><div class="ttdeci">static int find_free_vm_table_entry(struct kvm *host_kvm)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00342">pkvm.c:342</a></div></div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a5d9f0046f5027226ee083947e55ef151"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a5d9f0046f5027226ee083947e55ef151">idx_to_vm_handle</a></div><div class="ttdeci">static pkvm_handle_t idx_to_vm_handle(unsigned int idx)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00226">pkvm.c:226</a></div></div>
<div class="ttc" id="aspinlock_8h_html_ae92c9f4a09d239d6060880c35d12a48b"><div class="ttname"><a href="spinlock_8h.html#ae92c9f4a09d239d6060880c35d12a48b">hyp_assert_lock_held</a></div><div class="ttdeci">static void hyp_assert_lock_held(hyp_spinlock_t *lock)</div><div class="ttdef"><b>Definition:</b> <a href="spinlock_8h_source.html#l00122">spinlock.h:122</a></div></div>
<div class="ttc" id="astructpkvm__hyp__vm_html_a74498b8ae536bb1ab92abf0fcb5e1a14"><div class="ttname"><a href="structpkvm__hyp__vm.html#a74498b8ae536bb1ab92abf0fcb5e1a14">pkvm_hyp_vm::pgt</a></div><div class="ttdeci">struct kvm_pgtable pgt</div><div class="ttdef"><b>Definition:</b> <a href="pkvm_8h_source.html#l00032">pkvm.h:35</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a5c0b7226654c586286248bea9b106540_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a5c0b7226654c586286248bea9b106540_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a5c0b7226654c586286248bea9b106540_cgraph" id="ahyp_2nvhe_2pkvm_8c_a5c0b7226654c586286248bea9b106540_cgraph">
<area shape="rect" title=" " alt="" coords="5,71,173,98"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a29d3fa50cc8ae1d0b023ca30ab0ceffc" title=" " alt="" coords="229,5,376,47"/>
<area shape="rect" href="spinlock_8h.html#ae92c9f4a09d239d6060880c35d12a48b" title=" " alt="" coords="221,71,384,98"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a5d9f0046f5027226ee083947e55ef151" title=" " alt="" coords="232,122,373,149"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a5c0b7226654c586286248bea9b106540_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a5c0b7226654c586286248bea9b106540_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a5c0b7226654c586286248bea9b106540_icgraph" id="ahyp_2nvhe_2pkvm_8c_a5c0b7226654c586286248bea9b106540_icgraph">
<area shape="rect" title=" " alt="" coords="1024,38,1192,65"/>
<area shape="rect" href="pkvm_8h.html#a284d0118156922a170aff08dae02356c" title=" " alt="" coords="847,38,976,65"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="619,13,799,39"/>
<area shape="rect" href="hyp-main_8c.html#a31ad01bbbb8a492515863ede046e1697" title=" " alt="" coords="619,63,799,90"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="404,13,571,39"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,5,356,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="a12992d9e43e154429da5e2a85cf12dd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12992d9e43e154429da5e2a85cf12dd8">&#9670;&nbsp;</a></span>map_donated_memory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* map_donated_memory </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>host_va</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00421">421</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;{</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordtype">void</span> *va = <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a9ac0a95585deaa45106e201ede7a21ec">map_donated_memory_noclear</a>(host_va, <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">if</span> (va)</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        memset(va, 0, <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">return</span> va;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a12992d9e43e154429da5e2a85cf12dd8_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a12992d9e43e154429da5e2a85cf12dd8_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a12992d9e43e154429da5e2a85cf12dd8_cgraph" id="ahyp_2nvhe_2pkvm_8c_a12992d9e43e154429da5e2a85cf12dd8_cgraph">
<area shape="rect" title=" " alt="" coords="5,415,179,441"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a9ac0a95585deaa45106e201ede7a21ec" title=" " alt="" coords="227,407,400,449"/>
<area shape="rect" href="mem__protect_8h.html#a0a0107b185016d850cc3912f2cd2cc09" title=" " alt="" coords="448,415,639,441"/>
<area shape="rect" href="mem__protect_8c.html#a7e4a0c65211d20b4e8adc2d323699489" title=" " alt="" coords="731,313,822,340"/>
<area shape="rect" href="mem__protect_8c.html#aa70b12df63f9379efa7fe11ade510b7c" title=" " alt="" coords="695,364,859,391"/>
<area shape="rect" href="mem__protect_8c.html#a21f32ced99ed31332ac532029100e42d" title=" " alt="" coords="687,465,867,492"/>
<area shape="rect" href="mem__protect_8c.html#abbc50e372d72deb41a021219c35e3589" title=" " alt="" coords="697,415,857,441"/>
<area shape="rect" href="mem__protect_8c.html#a024de911d90c8e8d57cc96c87fecb4d3" title=" " alt="" coords="689,516,865,543"/>
<area shape="rect" href="mem__protect_8c.html#a09511b2fc9e756f5849a9a10c21946f2" title=" " alt="" coords="1125,160,1229,187"/>
<area shape="rect" href="mem__protect_8c.html#a4738d2842abcf74309391d6e6c677537" title=" " alt="" coords="918,327,1042,353"/>
<area shape="rect" href="mem__protect_8c.html#a673fb7f8a0e4a07b1d69687f8e0e0ba1" title=" " alt="" coords="1309,160,1491,187"/>
<area shape="rect" href="mem__protect_8c.html#ad1da243415ccdd263b42151ea524c09b" title=" " alt="" coords="1317,109,1483,136"/>
<area shape="rect" href="mem__protect_8c.html#ae4aa540ec02ab30863a99b67f90471e5" title=" " alt="" coords="1311,59,1489,85"/>
<area shape="rect" href="mem__protect_8c.html#a41715fcfd37184a9ffdef5c049390537" title=" " alt="" coords="1319,211,1481,237"/>
<area shape="rect" href="mem__protect_8c.html#afb7f8781ecbfa50324009fac4a8a68a8" title=" " alt="" coords="1547,137,1721,178"/>
<area shape="rect" href="pgtable_8c.html#af94796027db211abf5c1e20911100320" title=" " alt="" coords="1792,137,1951,178"/>
<area shape="rect" href="pgtable_8c.html#a2a6ed7242e033a1f32360cbe0e5c2281" title=" " alt="" coords="2019,187,2164,213"/>
<area shape="rect" href="pgtable_8c.html#a239db42e3530e785e70ec04460752a87" title=" " alt="" coords="2015,136,2167,163"/>
<area shape="rect" href="pgtable_8c.html#ac74b17e065ba3e68a10f28b594d21e40" title=" " alt="" coords="2244,187,2396,213"/>
<area shape="rect" href="pgtable_8c.html#a6207f0c3812f7b386a306b717eb3c230" title=" " alt="" coords="2234,85,2406,112"/>
<area shape="rect" href="pgtable_8c.html#ade0f482b0d10d9aeefa9814ae4a7cf4b" title=" " alt="" coords="2216,136,2424,163"/>
<area shape="rect" href="pgtable_8c.html#acdca989573ec9ed02b9b43a7014140c8" title=" " alt="" coords="2472,48,2619,75"/>
<area shape="rect" href="pgtable_8c.html#a2f4269267d0718905af8540821a6de3d" title=" " alt="" coords="2482,175,2609,201"/>
<area shape="rect" href="mm_8h.html#a36a82f8cc52bf1bf431f904beddc6c18" title=" " alt="" coords="1545,19,1723,61"/>
<area shape="rect" href="mem__protect_8h.html#a2cf886e3d56ed4cd5ddb78944ac0a152" title=" " alt="" coords="1574,85,1694,112"/>
<area shape="rect" href="spinlock_8h.html#ae92c9f4a09d239d6060880c35d12a48b" title=" " alt="" coords="1790,276,1953,303"/>
<area shape="rect" href="memory_8h.html#aae436fb2b3f13c0954cde727104e80ac" title=" " alt="" coords="1805,77,1938,104"/>
<area shape="rect" href="pgtable_8c.html#ad1a61b3aa251ca1150e9359c5c31a173" title=" " alt="" coords="1784,27,1959,53"/>
<area shape="rect" href="pgtable_8c.html#a06c1f113f067476605d118dffebef6a8" title=" " alt="" coords="2025,5,2157,32"/>
<area shape="rect" href="pgtable_8c.html#ab93223f59cefdfdd0abfb060e97f7b45" title=" " alt="" coords="2023,56,2159,83"/>
<area shape="rect" href="pgtable_8c.html#ae28010caa0eb1b8a51d07679e9d08daa" title=" " alt="" coords="2225,35,2415,61"/>
<area shape="rect" href="pgtable_8c.html#af16196aa505cacc0ca294719f9575ce4" title=" " alt="" coords="1776,203,1967,229"/>
<area shape="rect" href="pgtable_8c.html#a7eb05408bfb8ee8e00dc693bbd018aa9" title=" " alt="" coords="2017,263,2165,289"/>
<area shape="rect" href="pgtable_8c.html#a42620f6fca0390491a59340e88890864" title=" " alt="" coords="2261,339,2379,365"/>
<area shape="rect" href="pgtable_8c.html#a6e3f339456d5a01daa47962cc12f080e" title=" " alt="" coords="2261,237,2379,264"/>
<area shape="rect" href="mem__protect_8c.html#a04ee34c0284691282c8c6b71cd477b6a" title=" " alt="" coords="1105,268,1249,295"/>
<area shape="rect" href="mem__protect_8c.html#a5d4226b7d58b6d55f4d6d7195914f4c2" title=" " alt="" coords="1099,319,1255,361"/>
<area shape="rect" href="mem__protect_8c.html#a14fb7245d65588761a3639a3186f18d2" title=" " alt="" coords="1107,436,1247,463"/>
<area shape="rect" href="mem__protect_8c.html#a9dbbee933218e562a7eca625a3b6695b" title=" " alt="" coords="1093,385,1260,412"/>
<area shape="rect" href="mem__protect_8c.html#a793d27f9ec8b2dabd2c158c94d8b7a43" title=" " alt="" coords="1319,268,1481,295"/>
<area shape="rect" href="mem__protect_8c.html#a1557151da412863d13c00a3cf7308990" title=" " alt="" coords="1542,254,1726,295"/>
<area shape="rect" href="mem__protect_8c.html#ab45dbaed102ffbf3ccda18c0cc20a6dc" title=" " alt="" coords="1540,319,1728,361"/>
<area shape="rect" href="mem__protect_8c.html#a3ea605c8779e3d79d674c81a6d64919c" title=" " alt="" coords="1780,377,1963,404"/>
<area shape="rect" href="mem__protect_8c.html#a39c30c3fbf244570912cbd38c6e5606a" title=" " alt="" coords="1793,327,1950,353"/>
<area shape="rect" href="mem__protect_8c.html#acef59d69975c27a7815896535bbb4e65" title=" " alt="" coords="2015,370,2168,411"/>
<area shape="rect" href="mem__protect_8c.html#a89057e6dfc7b241de73b439208bcf7d5" title=" " alt="" coords="1310,469,1490,510"/>
<area shape="rect" href="mem__protect_8c.html#a4ee4815f49f2d2a8397d1e2430193a3e" title=" " alt="" coords="1308,403,1492,445"/>
<area shape="rect" href="mem__protect_8c.html#a906b44af03f69892941d0b4e87d52fbd" title=" " alt="" coords="1557,385,1711,412"/>
<area shape="rect" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9" title=" " alt="" coords="923,403,1037,429"/>
<area shape="rect" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08" title=" " alt="" coords="915,491,1045,517"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a12992d9e43e154429da5e2a85cf12dd8_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a12992d9e43e154429da5e2a85cf12dd8_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a12992d9e43e154429da5e2a85cf12dd8_icgraph" id="ahyp_2nvhe_2pkvm_8c_a12992d9e43e154429da5e2a85cf12dd8_icgraph">
<area shape="rect" title=" " alt="" coords="1044,56,1217,83"/>
<area shape="rect" href="pkvm_8h.html#a7216bb296fb7f7480fbc91d0fa389b21" title=" " alt="" coords="857,31,996,57"/>
<area shape="rect" href="pkvm_8h.html#a284d0118156922a170aff08dae02356c" title=" " alt="" coords="862,81,991,108"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="624,56,804,83"/>
<area shape="rect" href="hyp-main_8c.html#ae49bc086c41cfafcbf8f708aba0fc64b" title=" " alt="" coords="619,5,809,32"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="404,56,571,83"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,49,356,90"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,56,129,83"/>
<area shape="rect" href="hyp-main_8c.html#a31ad01bbbb8a492515863ede046e1697" title=" " alt="" coords="624,107,804,133"/>
</map>
</div>

</div>
</div>
<a id="a9ac0a95585deaa45106e201ede7a21ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ac0a95585deaa45106e201ede7a21ec">&#9670;&nbsp;</a></span>map_donated_memory_noclear()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* map_donated_memory_noclear </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>host_va</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00407">407</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;{</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordtype">void</span> *va = (<span class="keywordtype">void</span> *)kern_hyp_va(host_va);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">if</span> (!PAGE_ALIGNED(va))</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mem__protect_8h.html#a0a0107b185016d850cc3912f2cd2cc09">__pkvm_host_donate_hyp</a>(<a class="code" href="memory_8h.html#ae6f771ec6d256fcb464e36c64e3c78fb">hyp_virt_to_pfn</a>(va),</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                   PAGE_ALIGN(<a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>) &gt;&gt; PAGE_SHIFT))</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">return</span> va;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;}</div>
<div class="ttc" id="amem__protect_8h_html_a0a0107b185016d850cc3912f2cd2cc09"><div class="ttname"><a href="mem__protect_8h.html#a0a0107b185016d850cc3912f2cd2cc09">__pkvm_host_donate_hyp</a></div><div class="ttdeci">int __pkvm_host_donate_hyp(u64 pfn, u64 nr_pages)</div><div class="ttdef"><b>Definition:</b> <a href="mem__protect_8c_source.html#l01152">mem_protect.c:1152</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a9ac0a95585deaa45106e201ede7a21ec_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a9ac0a95585deaa45106e201ede7a21ec_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a9ac0a95585deaa45106e201ede7a21ec_cgraph" id="ahyp_2nvhe_2pkvm_8c_a9ac0a95585deaa45106e201ede7a21ec_cgraph">
<area shape="rect" title=" " alt="" coords="5,414,179,455"/>
<area shape="rect" href="mem__protect_8h.html#a0a0107b185016d850cc3912f2cd2cc09" title=" " alt="" coords="227,421,417,448"/>
<area shape="rect" href="mem__protect_8c.html#a7e4a0c65211d20b4e8adc2d323699489" title=" " alt="" coords="510,320,601,346"/>
<area shape="rect" href="mem__protect_8c.html#aa70b12df63f9379efa7fe11ade510b7c" title=" " alt="" coords="473,370,637,397"/>
<area shape="rect" href="mem__protect_8c.html#a21f32ced99ed31332ac532029100e42d" title=" " alt="" coords="465,472,645,498"/>
<area shape="rect" href="mem__protect_8c.html#abbc50e372d72deb41a021219c35e3589" title=" " alt="" coords="475,421,635,448"/>
<area shape="rect" href="mem__protect_8c.html#a024de911d90c8e8d57cc96c87fecb4d3" title=" " alt="" coords="467,522,643,549"/>
<area shape="rect" href="mem__protect_8c.html#a09511b2fc9e756f5849a9a10c21946f2" title=" " alt="" coords="903,166,1007,193"/>
<area shape="rect" href="mem__protect_8c.html#a4738d2842abcf74309391d6e6c677537" title=" " alt="" coords="697,333,821,360"/>
<area shape="rect" href="mem__protect_8c.html#a673fb7f8a0e4a07b1d69687f8e0e0ba1" title=" " alt="" coords="1087,166,1270,193"/>
<area shape="rect" href="mem__protect_8c.html#ad1da243415ccdd263b42151ea524c09b" title=" " alt="" coords="1095,116,1262,142"/>
<area shape="rect" href="mem__protect_8c.html#ae4aa540ec02ab30863a99b67f90471e5" title=" " alt="" coords="1089,65,1268,92"/>
<area shape="rect" href="mem__protect_8c.html#a41715fcfd37184a9ffdef5c049390537" title=" " alt="" coords="1097,217,1260,244"/>
<area shape="rect" href="mem__protect_8c.html#afb7f8781ecbfa50324009fac4a8a68a8" title=" " alt="" coords="1325,143,1500,184"/>
<area shape="rect" href="pgtable_8c.html#af94796027db211abf5c1e20911100320" title=" " alt="" coords="1571,143,1729,184"/>
<area shape="rect" href="pgtable_8c.html#a2a6ed7242e033a1f32360cbe0e5c2281" title=" " alt="" coords="1797,176,1943,202"/>
<area shape="rect" href="pgtable_8c.html#a239db42e3530e785e70ec04460752a87" title=" " alt="" coords="1794,125,1946,152"/>
<area shape="rect" href="pgtable_8c.html#ac74b17e065ba3e68a10f28b594d21e40" title=" " alt="" coords="2023,176,2175,202"/>
<area shape="rect" href="pgtable_8c.html#a4819ac158aa1b43844c3a3b5e5a82ac3" title=" " alt="" coords="2251,176,2409,202"/>
<area shape="rect" href="pgtable_8c.html#a6207f0c3812f7b386a306b717eb3c230" title=" " alt="" coords="2013,74,2185,101"/>
<area shape="rect" href="pgtable_8c.html#ade0f482b0d10d9aeefa9814ae4a7cf4b" title=" " alt="" coords="1995,125,2203,152"/>
<area shape="rect" href="pgtable_8c.html#acdca989573ec9ed02b9b43a7014140c8" title=" " alt="" coords="2257,24,2403,50"/>
<area shape="rect" href="pgtable_8c.html#a2f4269267d0718905af8540821a6de3d" title=" " alt="" coords="2267,277,2393,304"/>
<area shape="rect" href="mm_8h.html#a36a82f8cc52bf1bf431f904beddc6c18" title=" " alt="" coords="1323,26,1502,67"/>
<area shape="rect" href="mem__protect_8h.html#a2cf886e3d56ed4cd5ddb78944ac0a152" title=" " alt="" coords="1353,92,1473,118"/>
<area shape="rect" href="spinlock_8h.html#ae92c9f4a09d239d6060880c35d12a48b" title=" " alt="" coords="1569,282,1731,309"/>
<area shape="rect" href="memory_8h.html#aae436fb2b3f13c0954cde727104e80ac" title=" " alt="" coords="1583,84,1717,110"/>
<area shape="rect" href="pgtable_8c.html#ad1a61b3aa251ca1150e9359c5c31a173" title=" " alt="" coords="1563,33,1737,60"/>
<area shape="rect" href="pgtable_8c.html#a06c1f113f067476605d118dffebef6a8" title=" " alt="" coords="1804,16,1936,42"/>
<area shape="rect" href="pgtable_8c.html#ab93223f59cefdfdd0abfb060e97f7b45" title=" " alt="" coords="1802,66,1938,93"/>
<area shape="rect" href="pgtable_8c.html#ae28010caa0eb1b8a51d07679e9d08daa" title=" " alt="" coords="2004,24,2193,50"/>
<area shape="rect" href="pgtable_8c.html#af16196aa505cacc0ca294719f9575ce4" title=" " alt="" coords="1555,209,1745,236"/>
<area shape="rect" href="pgtable_8c.html#a7eb05408bfb8ee8e00dc693bbd018aa9" title=" " alt="" coords="1796,252,1944,278"/>
<area shape="rect" href="pgtable_8c.html#a42620f6fca0390491a59340e88890864" title=" " alt="" coords="2039,277,2158,304"/>
<area shape="rect" href="pgtable_8c.html#a6e3f339456d5a01daa47962cc12f080e" title=" " alt="" coords="2039,226,2158,253"/>
<area shape="rect" href="mem__protect_8c.html#a04ee34c0284691282c8c6b71cd477b6a" title=" " alt="" coords="883,274,1027,301"/>
<area shape="rect" href="mem__protect_8c.html#a5d4226b7d58b6d55f4d6d7195914f4c2" title=" " alt="" coords="877,326,1033,367"/>
<area shape="rect" href="mem__protect_8c.html#a14fb7245d65588761a3639a3186f18d2" title=" " alt="" coords="885,442,1025,469"/>
<area shape="rect" href="mem__protect_8c.html#a9dbbee933218e562a7eca625a3b6695b" title=" " alt="" coords="872,392,1039,418"/>
<area shape="rect" href="mem__protect_8c.html#a793d27f9ec8b2dabd2c158c94d8b7a43" title=" " alt="" coords="1097,274,1260,301"/>
<area shape="rect" href="mem__protect_8c.html#a1557151da412863d13c00a3cf7308990" title=" " alt="" coords="1321,260,1505,302"/>
<area shape="rect" href="mem__protect_8c.html#ab45dbaed102ffbf3ccda18c0cc20a6dc" title=" " alt="" coords="1319,326,1507,367"/>
<area shape="rect" href="mem__protect_8c.html#a3ea605c8779e3d79d674c81a6d64919c" title=" " alt="" coords="1559,384,1741,410"/>
<area shape="rect" href="mem__protect_8c.html#a39c30c3fbf244570912cbd38c6e5606a" title=" " alt="" coords="1571,333,1729,360"/>
<area shape="rect" href="mem__protect_8c.html#acef59d69975c27a7815896535bbb4e65" title=" " alt="" coords="1793,376,1947,418"/>
<area shape="rect" href="mem__protect_8c.html#a89057e6dfc7b241de73b439208bcf7d5" title=" " alt="" coords="1089,475,1269,516"/>
<area shape="rect" href="mem__protect_8c.html#a4ee4815f49f2d2a8397d1e2430193a3e" title=" " alt="" coords="1087,410,1271,451"/>
<area shape="rect" href="mem__protect_8c.html#a906b44af03f69892941d0b4e87d52fbd" title=" " alt="" coords="1336,392,1489,418"/>
<area shape="rect" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9" title=" " alt="" coords="701,409,816,436"/>
<area shape="rect" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08" title=" " alt="" coords="693,497,824,524"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a9ac0a95585deaa45106e201ede7a21ec_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a9ac0a95585deaa45106e201ede7a21ec_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a9ac0a95585deaa45106e201ede7a21ec_icgraph" id="ahyp_2nvhe_2pkvm_8c_a9ac0a95585deaa45106e201ede7a21ec_icgraph">
<area shape="rect" title=" " alt="" coords="1265,49,1439,90"/>
<area shape="rect" href="pkvm_8h.html#a284d0118156922a170aff08dae02356c" title=" " alt="" coords="862,31,991,57"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a12992d9e43e154429da5e2a85cf12dd8" title=" " alt="" coords="1044,81,1217,108"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="624,56,804,83"/>
<area shape="rect" href="hyp-main_8c.html#a31ad01bbbb8a492515863ede046e1697" title=" " alt="" coords="624,5,804,32"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="404,56,571,83"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,49,356,90"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,56,129,83"/>
<area shape="rect" href="pkvm_8h.html#a7216bb296fb7f7480fbc91d0fa389b21" title=" " alt="" coords="857,81,996,108"/>
<area shape="rect" href="hyp-main_8c.html#ae49bc086c41cfafcbf8f708aba0fc64b" title=" " alt="" coords="619,107,809,133"/>
</map>
</div>

</div>
</div>
<a id="a424af5862f022dc4c7a63b34219cd0f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a424af5862f022dc4c7a63b34219cd0f8">&#9670;&nbsp;</a></span>pkvm_get_hyp_vm_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t pkvm_get_hyp_vm_size </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nr_vcpus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00401">401</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;{</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">return</span> size_add(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structpkvm__hyp__vm.html">pkvm_hyp_vm</a>),</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        size_mul(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structpkvm__hyp__vcpu.html">pkvm_hyp_vcpu</a> *), nr_vcpus));</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a424af5862f022dc4c7a63b34219cd0f8_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a424af5862f022dc4c7a63b34219cd0f8_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a424af5862f022dc4c7a63b34219cd0f8_icgraph" id="ahyp_2nvhe_2pkvm_8c_a424af5862f022dc4c7a63b34219cd0f8_icgraph">
<area shape="rect" title=" " alt="" coords="1787,73,1965,99"/>
<area shape="rect" href="pkvm_8h.html#a284d0118156922a170aff08dae02356c" title=" " alt="" coords="1589,47,1719,74"/>
<area shape="rect" href="pkvm_8h.html#adedaa2ebee60585a9aab7d80293a5ad2" title=" " alt="" coords="1569,98,1739,125"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="1073,13,1253,39"/>
<area shape="rect" href="hyp-main_8c.html#a31ad01bbbb8a492515863ede046e1697" title=" " alt="" coords="1321,47,1501,74"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="857,13,1023,39"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="628,5,807,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="455,13,579,39"/>
<area shape="rect" href="pkvm_8c.html#abd259bb0db17ae7c75a8940360667c32" title=" " alt="" coords="1317,98,1505,125"/>
<area shape="rect" href="hyp-main_8c.html#acd9baa0fe0fe70ef810d8675e69aa87d" title=" " alt="" coords="1301,149,1521,175"/>
<area shape="rect" href="pkvm_8c.html#a0de2dfe512399e7f17c01091bc3e8ae8" title=" " alt="" coords="1076,98,1251,125"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="855,98,1025,125"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="453,70,580,97"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="650,138,785,165"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="212,61,405,87"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="459,159,574,186"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="234,111,383,138"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="226,162,391,189"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="231,213,386,239"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="241,263,376,290"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="5,111,164,138"/>
</map>
</div>

</div>
</div>
<a id="a465d3fd1802ee92a75147953f36f685e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a465d3fd1802ee92a75147953f36f685e">&#9670;&nbsp;</a></span>pkvm_hyp_vm_table_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pkvm_hyp_vm_table_init </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>tbl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00244">244</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;{</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    WARN_ON(<a class="code" href="hyp_2nvhe_2pkvm_8c.html#a17425ab40cd41e111f5331be6e644d83">vm_table</a>);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a17425ab40cd41e111f5331be6e644d83">vm_table</a> = tbl;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a465d3fd1802ee92a75147953f36f685e_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a465d3fd1802ee92a75147953f36f685e_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a465d3fd1802ee92a75147953f36f685e_icgraph" id="ahyp_2nvhe_2pkvm_8c_a465d3fd1802ee92a75147953f36f685e_icgraph">
<area shape="rect" title=" " alt="" coords="1115,31,1301,57"/>
<area shape="rect" href="setup_8c.html#ab5bdfd8a9c40da5d8de013de4f049dbe" title=" " alt="" coords="912,31,1067,57"/>
<area shape="rect" href="setup_8c.html#a69148fd8ebc6b8dd5f602c1dae42544d" title=" " alt="" coords="763,31,864,57"/>
<area shape="rect" href="arm_8c.html#a45a99f5a1905e2b85f69a767313abfd7" title=" " alt="" coords="583,5,694,32"/>
<area shape="rect" href="hyp-main_8c.html#a26b0350e219d42d5ea7f7df36d17d9e8" title=" " alt="" coords="563,56,715,83"/>
<area shape="rect" href="arm_8c.html#a3c73ef13f7491129779b02da5a9a7442" title=" " alt="" coords="332,5,515,32"/>
<area shape="rect" href="arm_8c.html#a289457d5cabd2e7e2cda634bc6277311" title=" " alt="" coords="165,5,284,32"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="5,5,117,32"/>
</map>
</div>

</div>
</div>
<a id="a26c97c43a67f2b519b95a2d4f3f3e56d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26c97c43a67f2b519b95a2d4f3f3e56d">&#9670;&nbsp;</a></span>pkvm_load_hyp_vcpu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structpkvm__hyp__vcpu.html">pkvm_hyp_vcpu</a>* pkvm_load_hyp_vcpu </td>
          <td>(</td>
          <td class="paramtype">pkvm_handle_t&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>vcpu_idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00263">263</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;{</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keyword">struct </span><a class="code" href="structpkvm__hyp__vcpu.html">pkvm_hyp_vcpu</a> *hyp_vcpu = NULL;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keyword">struct </span><a class="code" href="structpkvm__hyp__vm.html">pkvm_hyp_vm</a> *hyp_vm;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <a class="code" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9">hyp_spin_lock</a>(&amp;vm_table_lock);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    hyp_vm = <a class="code" href="hyp_2nvhe_2pkvm_8c.html#af3a9f8da5f6f1ac6c51d8b4cf7be26ca">get_vm_by_handle</a>(handle);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span> (!hyp_vm || hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#a0492fc593f138f3148964a551861a888">nr_vcpus</a> &lt;= vcpu_idx)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">goto</span> unlock;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    hyp_vcpu = hyp_vm-&gt;<a class="code" href="structpkvm__hyp__vm.html#af611e6bd4d351599211f2ea0d2799750">vcpus</a>[vcpu_idx];</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="memory_8h.html#a52854ece4f50a52b454b91f1a144b189">hyp_page_ref_inc</a>(<a class="code" href="memory_8h.html#a1ce5e4fc197c0773bbd80fb4b5270369">hyp_virt_to_page</a>(hyp_vm));</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;unlock:</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08">hyp_spin_unlock</a>(&amp;vm_table_lock);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">return</span> hyp_vcpu;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div>
<div class="ttc" id="amemory_8h_html_a1ce5e4fc197c0773bbd80fb4b5270369"><div class="ttname"><a href="memory_8h.html#a1ce5e4fc197c0773bbd80fb4b5270369">hyp_virt_to_page</a></div><div class="ttdeci">#define hyp_virt_to_page(virt)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00033">memory.h:33</a></div></div>
<div class="ttc" id="amemory_8h_html_a52854ece4f50a52b454b91f1a144b189"><div class="ttname"><a href="memory_8h.html#a52854ece4f50a52b454b91f1a144b189">hyp_page_ref_inc</a></div><div class="ttdeci">static void hyp_page_ref_inc(struct hyp_page *p)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00052">memory.h:52</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a26c97c43a67f2b519b95a2d4f3f3e56d_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a26c97c43a67f2b519b95a2d4f3f3e56d_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a26c97c43a67f2b519b95a2d4f3f3e56d_cgraph" id="ahyp_2nvhe_2pkvm_8c_a26c97c43a67f2b519b95a2d4f3f3e56d_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,168,108"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#af3a9f8da5f6f1ac6c51d8b4cf7be26ca" title=" " alt="" coords="216,5,361,32"/>
<area shape="rect" href="memory_8h.html#a52854ece4f50a52b454b91f1a144b189" title=" " alt="" coords="221,56,357,83"/>
<area shape="rect" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9" title=" " alt="" coords="231,107,346,133"/>
<area shape="rect" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08" title=" " alt="" coords="223,157,354,184"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a44f3b33f9c9af29ae5def49898ff81dd" title=" " alt="" coords="409,5,551,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a26c97c43a67f2b519b95a2d4f3f3e56d_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a26c97c43a67f2b519b95a2d4f3f3e56d_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a26c97c43a67f2b519b95a2d4f3f3e56d_icgraph" id="ahyp_2nvhe_2pkvm_8c_a26c97c43a67f2b519b95a2d4f3f3e56d_icgraph">
<area shape="rect" title=" " alt="" coords="236,5,399,32"/>
<area shape="rect" href="hyp-main_8c.html#a4ee0e6f5a31d21183ee7fea340479a2a" title=" " alt="" coords="5,5,188,32"/>
</map>
</div>

</div>
</div>
<a id="af533677cbf7e0a82423e25e6ab146d3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af533677cbf7e0a82423e25e6ab146d3a">&#9670;&nbsp;</a></span>pkvm_put_hyp_vcpu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pkvm_put_hyp_vcpu </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpkvm__hyp__vcpu.html">pkvm_hyp_vcpu</a> *&#160;</td>
          <td class="paramname"><em>hyp_vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00281">281</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;{</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keyword">struct </span><a class="code" href="structpkvm__hyp__vm.html">pkvm_hyp_vm</a> *hyp_vm = <a class="code" href="pkvm_8h.html#af309540fc98994ba55e970bf4ec14b65">pkvm_hyp_vcpu_to_hyp_vm</a>(hyp_vcpu);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9">hyp_spin_lock</a>(&amp;vm_table_lock);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="memory_8h.html#a3cc326fe973add2b2ea91f6b04dd8fde">hyp_page_ref_dec</a>(<a class="code" href="memory_8h.html#a1ce5e4fc197c0773bbd80fb4b5270369">hyp_virt_to_page</a>(hyp_vm));</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08">hyp_spin_unlock</a>(&amp;vm_table_lock);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div>
<div class="ttc" id="amemory_8h_html_a3cc326fe973add2b2ea91f6b04dd8fde"><div class="ttname"><a href="memory_8h.html#a3cc326fe973add2b2ea91f6b04dd8fde">hyp_page_ref_dec</a></div><div class="ttdeci">static void hyp_page_ref_dec(struct hyp_page *p)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00058">memory.h:58</a></div></div>
<div class="ttc" id="apkvm_8h_html_af309540fc98994ba55e970bf4ec14b65"><div class="ttname"><a href="pkvm_8h.html#af309540fc98994ba55e970bf4ec14b65">pkvm_hyp_vcpu_to_hyp_vm</a></div><div class="ttdeci">static struct pkvm_hyp_vm * pkvm_hyp_vcpu_to_hyp_vm(struct pkvm_hyp_vcpu *hyp_vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="pkvm_8h_source.html#l00051">pkvm.h:51</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_af533677cbf7e0a82423e25e6ab146d3a_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_af533677cbf7e0a82423e25e6ab146d3a_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_af533677cbf7e0a82423e25e6ab146d3a_cgraph" id="ahyp_2nvhe_2pkvm_8c_af533677cbf7e0a82423e25e6ab146d3a_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,161,108"/>
<area shape="rect" href="memory_8h.html#a3cc326fe973add2b2ea91f6b04dd8fde" title=" " alt="" coords="243,5,383,32"/>
<area shape="rect" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9" title=" " alt="" coords="255,56,370,83"/>
<area shape="rect" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08" title=" " alt="" coords="247,107,378,133"/>
<area shape="rect" href="pkvm_8h.html#af309540fc98994ba55e970bf4ec14b65" title=" " alt="" coords="209,157,416,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_af533677cbf7e0a82423e25e6ab146d3a_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_af533677cbf7e0a82423e25e6ab146d3a_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_af533677cbf7e0a82423e25e6ab146d3a_icgraph" id="ahyp_2nvhe_2pkvm_8c_af533677cbf7e0a82423e25e6ab146d3a_icgraph">
<area shape="rect" title=" " alt="" coords="236,5,392,32"/>
<area shape="rect" href="hyp-main_8c.html#a4ee0e6f5a31d21183ee7fea340479a2a" title=" " alt="" coords="5,5,188,32"/>
</map>
</div>

</div>
</div>
<a id="a954a18c9d50dc1d5a81ff9ddae22f9b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a954a18c9d50dc1d5a81ff9ddae22f9b4">&#9670;&nbsp;</a></span>pvm_init_trap_regs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pvm_init_trap_regs </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00181">181</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;{</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keyword">const</span> u64 hcr_trap_feat_regs = HCR_TID3;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keyword">const</span> u64 hcr_trap_impdef = HCR_TACR | HCR_TIDCP | HCR_TID1;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">     * Always trap:</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">     * - Feature id registers: to control features exposed to guests</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">     * - Implementation-defined features</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    vcpu-&gt;arch.hcr_el2 |= hcr_trap_feat_regs | hcr_trap_impdef;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">/* Clear res0 and set res1 bits to trap potential new features. */</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    vcpu-&gt;arch.hcr_el2 &amp;= ~(HCR_RES0);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    vcpu-&gt;arch.mdcr_el2 &amp;= ~(MDCR_EL2_RES0);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">if</span> (!has_hvhe()) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        vcpu-&gt;arch.cptr_el2 |= CPTR_NVHE_EL2_RES1;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        vcpu-&gt;arch.cptr_el2 &amp;= ~(CPTR_NVHE_EL2_RES0);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a954a18c9d50dc1d5a81ff9ddae22f9b4_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a954a18c9d50dc1d5a81ff9ddae22f9b4_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a954a18c9d50dc1d5a81ff9ddae22f9b4_icgraph" id="ahyp_2nvhe_2pkvm_8c_a954a18c9d50dc1d5a81ff9ddae22f9b4_icgraph">
<area shape="rect" title=" " alt="" coords="631,46,777,73"/>
<area shape="rect" href="trap__handler_8h.html#a6c91d65c0fb66dd5f7fbfb8a85e8c5a2" title=" " alt="" coords="404,46,583,73"/>
<area shape="rect" href="hyp-main_8c.html#a0d2e48d97b2c17f9bfb2baf739424e84" title=" " alt="" coords="185,5,348,47"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,71,356,112"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,78,129,105"/>
</map>
</div>

</div>
</div>
<a id="ad1a7661621ee51e8b98bd0704204354c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1a7661621ee51e8b98bd0704204354c">&#9670;&nbsp;</a></span>pvm_init_traps_aa64dfr0()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pvm_init_traps_aa64dfr0 </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00099">99</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;{</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keyword">const</span> u64 feature_ids = <a class="code" href="fixed__config_8h.html#aeee799be730bd2cecf006a103f105ad8">pvm_read_id_reg</a>(vcpu, SYS_ID_AA64DFR0_EL1);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    u64 mdcr_set = 0;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    u64 mdcr_clear = 0;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    u64 cptr_set = 0;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">/* Trap/constrain PMU */</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">if</span> (!FIELD_GET(ARM64_FEATURE_MASK(ID_AA64DFR0_EL1_PMUVer), feature_ids)) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        mdcr_set |= MDCR_EL2_TPM | MDCR_EL2_TPMCR;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        mdcr_clear |= MDCR_EL2_HPME | MDCR_EL2_MTPME |</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                  MDCR_EL2_HPMN_MASK;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">/* Trap Debug */</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">if</span> (!FIELD_GET(ARM64_FEATURE_MASK(ID_AA64DFR0_EL1_DebugVer), feature_ids))</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        mdcr_set |= MDCR_EL2_TDRA | MDCR_EL2_TDA | MDCR_EL2_TDE;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">/* Trap OS Double Lock */</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">if</span> (!FIELD_GET(ARM64_FEATURE_MASK(ID_AA64DFR0_EL1_DoubleLock), feature_ids))</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        mdcr_set |= MDCR_EL2_TDOSA;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">/* Trap SPE */</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">if</span> (!FIELD_GET(ARM64_FEATURE_MASK(ID_AA64DFR0_EL1_PMSVer), feature_ids)) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        mdcr_set |= MDCR_EL2_TPMS;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        mdcr_clear |= MDCR_EL2_E2PB_MASK &lt;&lt; MDCR_EL2_E2PB_SHIFT;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">/* Trap Trace Filter */</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">if</span> (!FIELD_GET(ARM64_FEATURE_MASK(ID_AA64DFR0_EL1_TraceFilt), feature_ids))</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        mdcr_set |= MDCR_EL2_TTRF;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="comment">/* Trap Trace */</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span> (!FIELD_GET(ARM64_FEATURE_MASK(ID_AA64DFR0_EL1_TraceVer), feature_ids)) {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">if</span> (has_hvhe())</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            cptr_set |= CPACR_EL1_TTA;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            cptr_set |= CPTR_EL2_TTA;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">/* Trap External Trace */</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span> (!FIELD_GET(ARM64_FEATURE_MASK(ID_AA64DFR0_EL1_ExtTrcBuff), feature_ids))</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        mdcr_clear |= MDCR_EL2_E2TB_MASK &lt;&lt; MDCR_EL2_E2TB_SHIFT;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    vcpu-&gt;arch.mdcr_el2 |= mdcr_set;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    vcpu-&gt;arch.mdcr_el2 &amp;= ~mdcr_clear;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    vcpu-&gt;arch.cptr_el2 |= cptr_set;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div>
<div class="ttc" id="afixed__config_8h_html_aeee799be730bd2cecf006a103f105ad8"><div class="ttname"><a href="fixed__config_8h.html#aeee799be730bd2cecf006a103f105ad8">pvm_read_id_reg</a></div><div class="ttdeci">u64 pvm_read_id_reg(const struct kvm_vcpu *vcpu, u32 id)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2sys__regs_8c_source.html#l00208">sys_regs.c:208</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_ad1a7661621ee51e8b98bd0704204354c_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_ad1a7661621ee51e8b98bd0704204354c_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_ad1a7661621ee51e8b98bd0704204354c_cgraph" id="ahyp_2nvhe_2pkvm_8c_ad1a7661621ee51e8b98bd0704204354c_cgraph">
<area shape="rect" title=" " alt="" coords="5,309,189,336"/>
<area shape="rect" href="fixed__config_8h.html#aeee799be730bd2cecf006a103f105ad8" title=" " alt="" coords="237,309,372,336"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a16565c885643b75592947613dc6824ab" title=" " alt="" coords="429,5,592,32"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a431ccdc4f12fd24369e66812c4938473" title=" " alt="" coords="429,56,592,83"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a1f44e7fe98069f3a95734b8150d4d992" title=" " alt="" coords="429,107,592,133"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a18c898ed4b92ef5dca21833a4e642deb" title=" " alt="" coords="429,157,592,184"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a607f14bda83ac5bbaabff652f0f547fd" title=" " alt="" coords="426,208,595,235"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a27d2bced24212ad8f4d36ceefa4d37c6" title=" " alt="" coords="426,259,595,285"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#af0a41d0625aeabe795571f6079797efa" title=" " alt="" coords="426,309,595,336"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a4b22b587a15b36cf919156bc0886c2e4" title=" " alt="" coords="420,360,601,387"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a0ab823a0ff849cce466cb75cc306c589" title=" " alt="" coords="420,411,601,437"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a74e0558b5f9e3e02d01923c3b9619397" title=" " alt="" coords="420,461,601,488"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#addab97b7bce7fdc7fc9b02bdc7fb2ddb" title=" " alt="" coords="429,512,592,539"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#afc17d83045d66e7b8270873059f8bb86" title=" " alt="" coords="429,563,592,589"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a47846f0087626650d7d02ec0f25ed672" title=" " alt="" coords="429,613,592,640"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a8eabe3337ed8c988eb4997424a603f42" title=" " alt="" coords="649,429,823,470"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_ad1a7661621ee51e8b98bd0704204354c_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_ad1a7661621ee51e8b98bd0704204354c_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_ad1a7661621ee51e8b98bd0704204354c_icgraph" id="ahyp_2nvhe_2pkvm_8c_ad1a7661621ee51e8b98bd0704204354c_icgraph">
<area shape="rect" title=" " alt="" coords="631,46,815,73"/>
<area shape="rect" href="trap__handler_8h.html#a6c91d65c0fb66dd5f7fbfb8a85e8c5a2" title=" " alt="" coords="404,46,583,73"/>
<area shape="rect" href="hyp-main_8c.html#a0d2e48d97b2c17f9bfb2baf739424e84" title=" " alt="" coords="185,5,348,47"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,71,356,112"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,78,129,105"/>
</map>
</div>

</div>
</div>
<a id="ae9e37c10b8d46b0fbfbaae3f7903f4d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9e37c10b8d46b0fbfbaae3f7903f4d3">&#9670;&nbsp;</a></span>pvm_init_traps_aa64mmfr0()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pvm_init_traps_aa64mmfr0 </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00151">151</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keyword">const</span> u64 feature_ids = <a class="code" href="fixed__config_8h.html#aeee799be730bd2cecf006a103f105ad8">pvm_read_id_reg</a>(vcpu, SYS_ID_AA64MMFR0_EL1);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    u64 mdcr_set = 0;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">/* Trap Debug Communications Channel registers */</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span> (!FIELD_GET(ARM64_FEATURE_MASK(ID_AA64MMFR0_EL1_FGT), feature_ids))</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        mdcr_set |= MDCR_EL2_TDCC;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    vcpu-&gt;arch.mdcr_el2 |= mdcr_set;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_ae9e37c10b8d46b0fbfbaae3f7903f4d3_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_ae9e37c10b8d46b0fbfbaae3f7903f4d3_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_ae9e37c10b8d46b0fbfbaae3f7903f4d3_cgraph" id="ahyp_2nvhe_2pkvm_8c_ae9e37c10b8d46b0fbfbaae3f7903f4d3_cgraph">
<area shape="rect" title=" " alt="" coords="5,309,208,336"/>
<area shape="rect" href="fixed__config_8h.html#aeee799be730bd2cecf006a103f105ad8" title=" " alt="" coords="256,309,391,336"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a16565c885643b75592947613dc6824ab" title=" " alt="" coords="448,5,611,32"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a431ccdc4f12fd24369e66812c4938473" title=" " alt="" coords="448,56,611,83"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a1f44e7fe98069f3a95734b8150d4d992" title=" " alt="" coords="448,107,611,133"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a18c898ed4b92ef5dca21833a4e642deb" title=" " alt="" coords="448,157,611,184"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a607f14bda83ac5bbaabff652f0f547fd" title=" " alt="" coords="445,208,614,235"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a27d2bced24212ad8f4d36ceefa4d37c6" title=" " alt="" coords="445,259,614,285"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#af0a41d0625aeabe795571f6079797efa" title=" " alt="" coords="445,309,614,336"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a4b22b587a15b36cf919156bc0886c2e4" title=" " alt="" coords="439,360,620,387"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a0ab823a0ff849cce466cb75cc306c589" title=" " alt="" coords="439,411,620,437"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a74e0558b5f9e3e02d01923c3b9619397" title=" " alt="" coords="439,461,620,488"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#addab97b7bce7fdc7fc9b02bdc7fb2ddb" title=" " alt="" coords="448,512,611,539"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#afc17d83045d66e7b8270873059f8bb86" title=" " alt="" coords="448,563,611,589"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a47846f0087626650d7d02ec0f25ed672" title=" " alt="" coords="448,613,611,640"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a8eabe3337ed8c988eb4997424a603f42" title=" " alt="" coords="668,429,841,470"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_ae9e37c10b8d46b0fbfbaae3f7903f4d3_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_ae9e37c10b8d46b0fbfbaae3f7903f4d3_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_ae9e37c10b8d46b0fbfbaae3f7903f4d3_icgraph" id="ahyp_2nvhe_2pkvm_8c_ae9e37c10b8d46b0fbfbaae3f7903f4d3_icgraph">
<area shape="rect" title=" " alt="" coords="631,46,833,73"/>
<area shape="rect" href="trap__handler_8h.html#a6c91d65c0fb66dd5f7fbfb8a85e8c5a2" title=" " alt="" coords="404,46,583,73"/>
<area shape="rect" href="hyp-main_8c.html#a0d2e48d97b2c17f9bfb2baf739424e84" title=" " alt="" coords="185,5,348,47"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,71,356,112"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,78,129,105"/>
</map>
</div>

</div>
</div>
<a id="a37f233e1c63f92218366e6ecc49769a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37f233e1c63f92218366e6ecc49769a5">&#9670;&nbsp;</a></span>pvm_init_traps_aa64mmfr1()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pvm_init_traps_aa64mmfr1 </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00166">166</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;{</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keyword">const</span> u64 feature_ids = <a class="code" href="fixed__config_8h.html#aeee799be730bd2cecf006a103f105ad8">pvm_read_id_reg</a>(vcpu, SYS_ID_AA64MMFR1_EL1);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    u64 hcr_set = 0;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">/* Trap LOR */</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span> (!FIELD_GET(ARM64_FEATURE_MASK(ID_AA64MMFR1_EL1_LO), feature_ids))</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        hcr_set |= HCR_TLOR;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    vcpu-&gt;arch.hcr_el2 |= hcr_set;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a37f233e1c63f92218366e6ecc49769a5_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a37f233e1c63f92218366e6ecc49769a5_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a37f233e1c63f92218366e6ecc49769a5_cgraph" id="ahyp_2nvhe_2pkvm_8c_a37f233e1c63f92218366e6ecc49769a5_cgraph">
<area shape="rect" title=" " alt="" coords="5,309,208,336"/>
<area shape="rect" href="fixed__config_8h.html#aeee799be730bd2cecf006a103f105ad8" title=" " alt="" coords="256,309,391,336"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a16565c885643b75592947613dc6824ab" title=" " alt="" coords="448,5,611,32"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a431ccdc4f12fd24369e66812c4938473" title=" " alt="" coords="448,56,611,83"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a1f44e7fe98069f3a95734b8150d4d992" title=" " alt="" coords="448,107,611,133"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a18c898ed4b92ef5dca21833a4e642deb" title=" " alt="" coords="448,157,611,184"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a607f14bda83ac5bbaabff652f0f547fd" title=" " alt="" coords="445,208,614,235"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a27d2bced24212ad8f4d36ceefa4d37c6" title=" " alt="" coords="445,259,614,285"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#af0a41d0625aeabe795571f6079797efa" title=" " alt="" coords="445,309,614,336"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a4b22b587a15b36cf919156bc0886c2e4" title=" " alt="" coords="439,360,620,387"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a0ab823a0ff849cce466cb75cc306c589" title=" " alt="" coords="439,411,620,437"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a74e0558b5f9e3e02d01923c3b9619397" title=" " alt="" coords="439,461,620,488"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#addab97b7bce7fdc7fc9b02bdc7fb2ddb" title=" " alt="" coords="448,512,611,539"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#afc17d83045d66e7b8270873059f8bb86" title=" " alt="" coords="448,563,611,589"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a47846f0087626650d7d02ec0f25ed672" title=" " alt="" coords="448,613,611,640"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a8eabe3337ed8c988eb4997424a603f42" title=" " alt="" coords="668,429,841,470"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a37f233e1c63f92218366e6ecc49769a5_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a37f233e1c63f92218366e6ecc49769a5_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a37f233e1c63f92218366e6ecc49769a5_icgraph" id="ahyp_2nvhe_2pkvm_8c_a37f233e1c63f92218366e6ecc49769a5_icgraph">
<area shape="rect" title=" " alt="" coords="631,46,833,73"/>
<area shape="rect" href="trap__handler_8h.html#a6c91d65c0fb66dd5f7fbfb8a85e8c5a2" title=" " alt="" coords="404,46,583,73"/>
<area shape="rect" href="hyp-main_8c.html#a0d2e48d97b2c17f9bfb2baf739424e84" title=" " alt="" coords="185,5,348,47"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,71,356,112"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,78,129,105"/>
</map>
</div>

</div>
</div>
<a id="a81840b7e3e40654eac6693c681f950b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81840b7e3e40654eac6693c681f950b8">&#9670;&nbsp;</a></span>pvm_init_traps_aa64pfr0()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pvm_init_traps_aa64pfr0 </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00024">24</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;{</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <span class="keyword">const</span> u64 feature_ids = <a class="code" href="fixed__config_8h.html#aeee799be730bd2cecf006a103f105ad8">pvm_read_id_reg</a>(vcpu, SYS_ID_AA64PFR0_EL1);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    u64 hcr_set = HCR_RW;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    u64 hcr_clear = 0;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    u64 cptr_set = 0;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    u64 cptr_clear = 0;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="comment">/* Protected KVM does not support AArch32 guests. */</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    BUILD_BUG_ON(FIELD_GET(ARM64_FEATURE_MASK(ID_AA64PFR0_EL1_EL0),</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        <a class="code" href="fixed__config_8h.html#af9129de0a77dc85a2222af742c557b4a">PVM_ID_AA64PFR0_RESTRICT_UNSIGNED</a>) != ID_AA64PFR0_EL1_ELx_64BIT_ONLY);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    BUILD_BUG_ON(FIELD_GET(ARM64_FEATURE_MASK(ID_AA64PFR0_EL1_EL1),</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        <a class="code" href="fixed__config_8h.html#af9129de0a77dc85a2222af742c557b4a">PVM_ID_AA64PFR0_RESTRICT_UNSIGNED</a>) != ID_AA64PFR0_EL1_ELx_64BIT_ONLY);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">     * Linux guests assume support for floating-point and Advanced SIMD. Do</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">     * not change the trapping behavior for these from the KVM default.</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    BUILD_BUG_ON(!FIELD_GET(ARM64_FEATURE_MASK(ID_AA64PFR0_EL1_FP),</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                <a class="code" href="fixed__config_8h.html#af7ebae8cb779a55a4ca05783449e4326">PVM_ID_AA64PFR0_ALLOW</a>));</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    BUILD_BUG_ON(!FIELD_GET(ARM64_FEATURE_MASK(ID_AA64PFR0_EL1_AdvSIMD),</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                <a class="code" href="fixed__config_8h.html#af7ebae8cb779a55a4ca05783449e4326">PVM_ID_AA64PFR0_ALLOW</a>));</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">if</span> (has_hvhe())</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        hcr_set |= HCR_E2H;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment">/* Trap RAS unless all current versions are supported */</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">if</span> (FIELD_GET(ARM64_FEATURE_MASK(ID_AA64PFR0_EL1_RAS), feature_ids) &lt;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        ID_AA64PFR0_EL1_RAS_V1P1) {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        hcr_set |= HCR_TERR | HCR_TEA;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        hcr_clear |= HCR_FIEN;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    }</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="comment">/* Trap AMU */</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">if</span> (!FIELD_GET(ARM64_FEATURE_MASK(ID_AA64PFR0_EL1_AMU), feature_ids)) {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        hcr_clear |= HCR_AMVOFFEN;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        cptr_set |= CPTR_EL2_TAM;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    }</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">/* Trap SVE */</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">if</span> (!FIELD_GET(ARM64_FEATURE_MASK(ID_AA64PFR0_EL1_SVE), feature_ids)) {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keywordflow">if</span> (has_hvhe())</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            cptr_clear |= CPACR_EL1_ZEN_EL0EN | CPACR_EL1_ZEN_EL1EN;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            cptr_set |= CPTR_EL2_TZ;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    vcpu-&gt;arch.hcr_el2 |= hcr_set;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    vcpu-&gt;arch.hcr_el2 &amp;= ~hcr_clear;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    vcpu-&gt;arch.cptr_el2 |= cptr_set;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    vcpu-&gt;arch.cptr_el2 &amp;= ~cptr_clear;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div>
<div class="ttc" id="afixed__config_8h_html_af7ebae8cb779a55a4ca05783449e4326"><div class="ttname"><a href="fixed__config_8h.html#af7ebae8cb779a55a4ca05783449e4326">PVM_ID_AA64PFR0_ALLOW</a></div><div class="ttdeci">#define PVM_ID_AA64PFR0_ALLOW</div><div class="ttdef"><b>Definition:</b> <a href="fixed__config_8h_source.html#l00038">fixed_config.h:38</a></div></div>
<div class="ttc" id="afixed__config_8h_html_af9129de0a77dc85a2222af742c557b4a"><div class="ttname"><a href="fixed__config_8h.html#af9129de0a77dc85a2222af742c557b4a">PVM_ID_AA64PFR0_RESTRICT_UNSIGNED</a></div><div class="ttdeci">#define PVM_ID_AA64PFR0_RESTRICT_UNSIGNED</div><div class="ttdef"><b>Definition:</b> <a href="fixed__config_8h_source.html#l00054">fixed_config.h:54</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a81840b7e3e40654eac6693c681f950b8_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a81840b7e3e40654eac6693c681f950b8_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a81840b7e3e40654eac6693c681f950b8_cgraph" id="ahyp_2nvhe_2pkvm_8c_a81840b7e3e40654eac6693c681f950b8_cgraph">
<area shape="rect" title=" " alt="" coords="5,309,189,336"/>
<area shape="rect" href="fixed__config_8h.html#aeee799be730bd2cecf006a103f105ad8" title=" " alt="" coords="237,309,372,336"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a16565c885643b75592947613dc6824ab" title=" " alt="" coords="429,5,592,32"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a431ccdc4f12fd24369e66812c4938473" title=" " alt="" coords="429,56,592,83"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a1f44e7fe98069f3a95734b8150d4d992" title=" " alt="" coords="429,107,592,133"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a18c898ed4b92ef5dca21833a4e642deb" title=" " alt="" coords="429,157,592,184"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a607f14bda83ac5bbaabff652f0f547fd" title=" " alt="" coords="426,208,595,235"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a27d2bced24212ad8f4d36ceefa4d37c6" title=" " alt="" coords="426,259,595,285"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#af0a41d0625aeabe795571f6079797efa" title=" " alt="" coords="426,309,595,336"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a4b22b587a15b36cf919156bc0886c2e4" title=" " alt="" coords="420,360,601,387"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a0ab823a0ff849cce466cb75cc306c589" title=" " alt="" coords="420,411,601,437"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a74e0558b5f9e3e02d01923c3b9619397" title=" " alt="" coords="420,461,601,488"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#addab97b7bce7fdc7fc9b02bdc7fb2ddb" title=" " alt="" coords="429,512,592,539"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#afc17d83045d66e7b8270873059f8bb86" title=" " alt="" coords="429,563,592,589"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a47846f0087626650d7d02ec0f25ed672" title=" " alt="" coords="429,613,592,640"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a8eabe3337ed8c988eb4997424a603f42" title=" " alt="" coords="649,429,823,470"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a81840b7e3e40654eac6693c681f950b8_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a81840b7e3e40654eac6693c681f950b8_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a81840b7e3e40654eac6693c681f950b8_icgraph" id="ahyp_2nvhe_2pkvm_8c_a81840b7e3e40654eac6693c681f950b8_icgraph">
<area shape="rect" title=" " alt="" coords="631,46,815,73"/>
<area shape="rect" href="trap__handler_8h.html#a6c91d65c0fb66dd5f7fbfb8a85e8c5a2" title=" " alt="" coords="404,46,583,73"/>
<area shape="rect" href="hyp-main_8c.html#a0d2e48d97b2c17f9bfb2baf739424e84" title=" " alt="" coords="185,5,348,47"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,71,356,112"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,78,129,105"/>
</map>
</div>

</div>
</div>
<a id="a1035306787a17597876ffc0865ae6870"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1035306787a17597876ffc0865ae6870">&#9670;&nbsp;</a></span>pvm_init_traps_aa64pfr1()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pvm_init_traps_aa64pfr1 </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00080">80</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;{</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keyword">const</span> u64 feature_ids = <a class="code" href="fixed__config_8h.html#aeee799be730bd2cecf006a103f105ad8">pvm_read_id_reg</a>(vcpu, SYS_ID_AA64PFR1_EL1);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    u64 hcr_set = 0;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    u64 hcr_clear = 0;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">/* Memory Tagging: Trap and Treat as Untagged if not supported. */</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">if</span> (!FIELD_GET(ARM64_FEATURE_MASK(ID_AA64PFR1_EL1_MTE), feature_ids)) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        hcr_set |= HCR_TID5;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        hcr_clear |= HCR_DCT | HCR_ATA;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    vcpu-&gt;arch.hcr_el2 |= hcr_set;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    vcpu-&gt;arch.hcr_el2 &amp;= ~hcr_clear;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a1035306787a17597876ffc0865ae6870_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a1035306787a17597876ffc0865ae6870_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a1035306787a17597876ffc0865ae6870_cgraph" id="ahyp_2nvhe_2pkvm_8c_a1035306787a17597876ffc0865ae6870_cgraph">
<area shape="rect" title=" " alt="" coords="5,309,189,336"/>
<area shape="rect" href="fixed__config_8h.html#aeee799be730bd2cecf006a103f105ad8" title=" " alt="" coords="237,309,372,336"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a16565c885643b75592947613dc6824ab" title=" " alt="" coords="429,5,592,32"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a431ccdc4f12fd24369e66812c4938473" title=" " alt="" coords="429,56,592,83"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a1f44e7fe98069f3a95734b8150d4d992" title=" " alt="" coords="429,107,592,133"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a18c898ed4b92ef5dca21833a4e642deb" title=" " alt="" coords="429,157,592,184"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a607f14bda83ac5bbaabff652f0f547fd" title=" " alt="" coords="426,208,595,235"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a27d2bced24212ad8f4d36ceefa4d37c6" title=" " alt="" coords="426,259,595,285"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#af0a41d0625aeabe795571f6079797efa" title=" " alt="" coords="426,309,595,336"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a4b22b587a15b36cf919156bc0886c2e4" title=" " alt="" coords="420,360,601,387"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a0ab823a0ff849cce466cb75cc306c589" title=" " alt="" coords="420,411,601,437"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a74e0558b5f9e3e02d01923c3b9619397" title=" " alt="" coords="420,461,601,488"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#addab97b7bce7fdc7fc9b02bdc7fb2ddb" title=" " alt="" coords="429,512,592,539"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#afc17d83045d66e7b8270873059f8bb86" title=" " alt="" coords="429,563,592,589"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a47846f0087626650d7d02ec0f25ed672" title=" " alt="" coords="429,613,592,640"/>
<area shape="rect" href="hyp_2nvhe_2sys__regs_8c.html#a8eabe3337ed8c988eb4997424a603f42" title=" " alt="" coords="649,429,823,470"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a1035306787a17597876ffc0865ae6870_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a1035306787a17597876ffc0865ae6870_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a1035306787a17597876ffc0865ae6870_icgraph" id="ahyp_2nvhe_2pkvm_8c_a1035306787a17597876ffc0865ae6870_icgraph">
<area shape="rect" title=" " alt="" coords="631,46,815,73"/>
<area shape="rect" href="trap__handler_8h.html#a6c91d65c0fb66dd5f7fbfb8a85e8c5a2" title=" " alt="" coords="404,46,583,73"/>
<area shape="rect" href="hyp-main_8c.html#a0d2e48d97b2c17f9bfb2baf739424e84" title=" " alt="" coords="185,5,348,47"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,71,356,112"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,78,129,105"/>
</map>
</div>

</div>
</div>
<a id="a296892c18e515626259e369403a4d3d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a296892c18e515626259e369403a4d3d0">&#9670;&nbsp;</a></span>remove_vm_table_entry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void remove_vm_table_entry </td>
          <td>(</td>
          <td class="paramtype">pkvm_handle_t&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00395">395</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;{</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="spinlock_8h.html#ae92c9f4a09d239d6060880c35d12a48b">hyp_assert_lock_held</a>(&amp;vm_table_lock);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a17425ab40cd41e111f5331be6e644d83">vm_table</a>[<a class="code" href="hyp_2nvhe_2pkvm_8c.html#a44f3b33f9c9af29ae5def49898ff81dd">vm_handle_to_idx</a>(handle)] = NULL;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a296892c18e515626259e369403a4d3d0_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a296892c18e515626259e369403a4d3d0_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a296892c18e515626259e369403a4d3d0_cgraph" id="ahyp_2nvhe_2pkvm_8c_a296892c18e515626259e369403a4d3d0_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,187,57"/>
<area shape="rect" href="spinlock_8h.html#ae92c9f4a09d239d6060880c35d12a48b" title=" " alt="" coords="235,5,397,32"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a44f3b33f9c9af29ae5def49898ff81dd" title=" " alt="" coords="245,56,387,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a296892c18e515626259e369403a4d3d0_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a296892c18e515626259e369403a4d3d0_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a296892c18e515626259e369403a4d3d0_icgraph" id="ahyp_2nvhe_2pkvm_8c_a296892c18e515626259e369403a4d3d0_icgraph">
<area shape="rect" title=" " alt="" coords="1787,73,1968,99"/>
<area shape="rect" href="pkvm_8h.html#a284d0118156922a170aff08dae02356c" title=" " alt="" coords="1589,47,1719,74"/>
<area shape="rect" href="pkvm_8h.html#adedaa2ebee60585a9aab7d80293a5ad2" title=" " alt="" coords="1569,98,1739,125"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="1073,13,1253,39"/>
<area shape="rect" href="hyp-main_8c.html#a31ad01bbbb8a492515863ede046e1697" title=" " alt="" coords="1321,47,1501,74"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="857,13,1023,39"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="628,5,807,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="455,13,579,39"/>
<area shape="rect" href="pkvm_8c.html#abd259bb0db17ae7c75a8940360667c32" title=" " alt="" coords="1317,98,1505,125"/>
<area shape="rect" href="hyp-main_8c.html#acd9baa0fe0fe70ef810d8675e69aa87d" title=" " alt="" coords="1301,149,1521,175"/>
<area shape="rect" href="pkvm_8c.html#a0de2dfe512399e7f17c01091bc3e8ae8" title=" " alt="" coords="1076,98,1251,125"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="855,98,1025,125"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="453,70,580,97"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="650,138,785,165"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="212,61,405,87"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="459,159,574,186"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="234,111,383,138"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="226,162,391,189"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="231,213,386,239"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="241,263,376,290"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="5,111,164,138"/>
</map>
</div>

</div>
</div>
<a id="a315a65a066329bcea7b74d4eb11c963c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a315a65a066329bcea7b74d4eb11c963c">&#9670;&nbsp;</a></span>teardown_donated_memory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void teardown_donated_memory </td>
          <td>(</td>
          <td class="paramtype">struct kvm_hyp_memcache *&#160;</td>
          <td class="paramname"><em>mc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00581">581</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;{</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a> = PAGE_ALIGN(<a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    memset(addr, 0, <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">void</span> *start = addr; start &lt; addr + <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>; start += PAGE_SIZE)</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        push_hyp_memcache(mc, start, <a class="code" href="memory_8h.html#aae436fb2b3f13c0954cde727104e80ac">hyp_virt_to_phys</a>);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#ae0206a7c88d213b1ff24538337468249">unmap_donated_memory_noclear</a>(addr, <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;}</div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_ae0206a7c88d213b1ff24538337468249"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#ae0206a7c88d213b1ff24538337468249">unmap_donated_memory_noclear</a></div><div class="ttdeci">static void unmap_donated_memory_noclear(void *va, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00446">pkvm.c:446</a></div></div>
<div class="ttc" id="amemory_8h_html_aae436fb2b3f13c0954cde727104e80ac"><div class="ttname"><a href="memory_8h.html#aae436fb2b3f13c0954cde727104e80ac">hyp_virt_to_phys</a></div><div class="ttdeci">static phys_addr_t hyp_virt_to_phys(void *addr)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00025">memory.h:25</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a315a65a066329bcea7b74d4eb11c963c_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a315a65a066329bcea7b74d4eb11c963c_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a315a65a066329bcea7b74d4eb11c963c_cgraph" id="ahyp_2nvhe_2pkvm_8c_a315a65a066329bcea7b74d4eb11c963c_cgraph">
<area shape="rect" title=" " alt="" coords="5,175,211,201"/>
<area shape="rect" href="memory_8h.html#aae436fb2b3f13c0954cde727104e80ac" title=" " alt="" coords="2103,5,2237,32"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#ae0206a7c88d213b1ff24538337468249" title=" " alt="" coords="259,197,448,238"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a57ca4bd54f074772ac03c6401856d122" title=" " alt="" coords="496,279,699,305"/>
<area shape="rect" href="mem__protect_8h.html#ac46723bcc56baf1618eacb213151c926" title=" " alt="" coords="747,352,937,379"/>
<area shape="rect" href="mem__protect_8c.html#a7e4a0c65211d20b4e8adc2d323699489" title=" " alt="" coords="1030,276,1121,303"/>
<area shape="rect" href="mem__protect_8c.html#aa70b12df63f9379efa7fe11ade510b7c" title=" " alt="" coords="993,428,1157,455"/>
<area shape="rect" href="mem__protect_8c.html#a21f32ced99ed31332ac532029100e42d" title=" " alt="" coords="985,377,1165,404"/>
<area shape="rect" href="mem__protect_8c.html#abbc50e372d72deb41a021219c35e3589" title=" " alt="" coords="995,479,1155,505"/>
<area shape="rect" href="mem__protect_8c.html#a024de911d90c8e8d57cc96c87fecb4d3" title=" " alt="" coords="987,327,1163,353"/>
<area shape="rect" href="mem__protect_8c.html#a09511b2fc9e756f5849a9a10c21946f2" title=" " alt="" coords="1423,180,1527,207"/>
<area shape="rect" href="mem__protect_8c.html#a4738d2842abcf74309391d6e6c677537" title=" " alt="" coords="1217,327,1341,353"/>
<area shape="rect" href="mem__protect_8c.html#a673fb7f8a0e4a07b1d69687f8e0e0ba1" title=" " alt="" coords="1607,180,1790,207"/>
<area shape="rect" href="mem__protect_8c.html#ad1da243415ccdd263b42151ea524c09b" title=" " alt="" coords="1615,129,1782,156"/>
<area shape="rect" href="mem__protect_8c.html#ae4aa540ec02ab30863a99b67f90471e5" title=" " alt="" coords="1609,79,1788,105"/>
<area shape="rect" href="mem__protect_8c.html#a41715fcfd37184a9ffdef5c049390537" title=" " alt="" coords="1617,231,1780,257"/>
<area shape="rect" href="mem__protect_8c.html#afb7f8781ecbfa50324009fac4a8a68a8" title=" " alt="" coords="1845,169,2020,210"/>
<area shape="rect" href="pgtable_8c.html#af94796027db211abf5c1e20911100320" title=" " alt="" coords="2091,169,2249,210"/>
<area shape="rect" href="pgtable_8c.html#a2a6ed7242e033a1f32360cbe0e5c2281" title=" " alt="" coords="2317,225,2463,252"/>
<area shape="rect" href="pgtable_8c.html#a239db42e3530e785e70ec04460752a87" title=" " alt="" coords="2314,175,2466,201"/>
<area shape="rect" href="pgtable_8c.html#ac74b17e065ba3e68a10f28b594d21e40" title=" " alt="" coords="2543,225,2695,252"/>
<area shape="rect" href="pgtable_8c.html#a6207f0c3812f7b386a306b717eb3c230" title=" " alt="" coords="2533,124,2705,151"/>
<area shape="rect" href="pgtable_8c.html#ade0f482b0d10d9aeefa9814ae4a7cf4b" title=" " alt="" coords="2515,175,2723,201"/>
<area shape="rect" href="pgtable_8c.html#a2f4269267d0718905af8540821a6de3d" title=" " alt="" coords="2771,225,2897,252"/>
<area shape="rect" href="mm_8h.html#a36a82f8cc52bf1bf431f904beddc6c18" title=" " alt="" coords="1843,51,2022,93"/>
<area shape="rect" href="mem__protect_8h.html#a2cf886e3d56ed4cd5ddb78944ac0a152" title=" " alt="" coords="1873,117,1993,144"/>
<area shape="rect" href="spinlock_8h.html#ae92c9f4a09d239d6060880c35d12a48b" title=" " alt="" coords="2089,336,2251,363"/>
<area shape="rect" href="pgtable_8c.html#ad1a61b3aa251ca1150e9359c5c31a173" title=" " alt="" coords="2083,61,2257,88"/>
<area shape="rect" href="pgtable_8c.html#a06c1f113f067476605d118dffebef6a8" title=" " alt="" coords="2324,65,2456,92"/>
<area shape="rect" href="pgtable_8c.html#ab93223f59cefdfdd0abfb060e97f7b45" title=" " alt="" coords="2322,15,2458,41"/>
<area shape="rect" href="pgtable_8c.html#ae28010caa0eb1b8a51d07679e9d08daa" title=" " alt="" coords="2524,65,2713,92"/>
<area shape="rect" href="pgtable_8c.html#af16196aa505cacc0ca294719f9575ce4" title=" " alt="" coords="2075,235,2265,261"/>
<area shape="rect" href="pgtable_8c.html#a7eb05408bfb8ee8e00dc693bbd018aa9" title=" " alt="" coords="2316,301,2464,328"/>
<area shape="rect" href="pgtable_8c.html#a42620f6fca0390491a59340e88890864" title=" " alt="" coords="2559,327,2678,353"/>
<area shape="rect" href="pgtable_8c.html#a6e3f339456d5a01daa47962cc12f080e" title=" " alt="" coords="2559,377,2678,404"/>
<area shape="rect" href="mem__protect_8c.html#a04ee34c0284691282c8c6b71cd477b6a" title=" " alt="" coords="1403,469,1547,496"/>
<area shape="rect" href="mem__protect_8c.html#a5d4226b7d58b6d55f4d6d7195914f4c2" title=" " alt="" coords="1397,403,1553,445"/>
<area shape="rect" href="mem__protect_8c.html#a14fb7245d65588761a3639a3186f18d2" title=" " alt="" coords="1405,301,1545,328"/>
<area shape="rect" href="mem__protect_8c.html#a9dbbee933218e562a7eca625a3b6695b" title=" " alt="" coords="1392,352,1559,379"/>
<area shape="rect" href="mem__protect_8c.html#a793d27f9ec8b2dabd2c158c94d8b7a43" title=" " alt="" coords="1617,469,1780,496"/>
<area shape="rect" href="mem__protect_8c.html#a1557151da412863d13c00a3cf7308990" title=" " alt="" coords="1841,503,2025,545"/>
<area shape="rect" href="mem__protect_8c.html#ab45dbaed102ffbf3ccda18c0cc20a6dc" title=" " alt="" coords="1839,438,2027,479"/>
<area shape="rect" href="mem__protect_8c.html#a3ea605c8779e3d79d674c81a6d64919c" title=" " alt="" coords="2079,387,2261,413"/>
<area shape="rect" href="mem__protect_8c.html#a39c30c3fbf244570912cbd38c6e5606a" title=" " alt="" coords="2091,445,2249,472"/>
<area shape="rect" href="mem__protect_8c.html#acef59d69975c27a7815896535bbb4e65" title=" " alt="" coords="2313,379,2467,421"/>
<area shape="rect" href="mem__protect_8c.html#a89057e6dfc7b241de73b439208bcf7d5" title=" " alt="" coords="1609,282,1789,323"/>
<area shape="rect" href="mem__protect_8c.html#a4ee4815f49f2d2a8397d1e2430193a3e" title=" " alt="" coords="1607,347,1791,389"/>
<area shape="rect" href="mem__protect_8c.html#a906b44af03f69892941d0b4e87d52fbd" title=" " alt="" coords="1856,285,2009,312"/>
<area shape="rect" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9" title=" " alt="" coords="1221,453,1336,480"/>
<area shape="rect" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08" title=" " alt="" coords="1213,377,1344,404"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a315a65a066329bcea7b74d4eb11c963c_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a315a65a066329bcea7b74d4eb11c963c_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a315a65a066329bcea7b74d4eb11c963c_icgraph" id="ahyp_2nvhe_2pkvm_8c_a315a65a066329bcea7b74d4eb11c963c_icgraph">
<area shape="rect" title=" " alt="" coords="1787,71,1992,98"/>
<area shape="rect" href="pkvm_8h.html#adedaa2ebee60585a9aab7d80293a5ad2" title=" " alt="" coords="1569,71,1739,98"/>
<area shape="rect" href="pkvm_8c.html#abd259bb0db17ae7c75a8940360667c32" title=" " alt="" coords="1317,46,1505,73"/>
<area shape="rect" href="hyp-main_8c.html#acd9baa0fe0fe70ef810d8675e69aa87d" title=" " alt="" coords="1301,97,1521,123"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="1073,21,1253,47"/>
<area shape="rect" href="pkvm_8c.html#a0de2dfe512399e7f17c01091bc3e8ae8" title=" " alt="" coords="1076,71,1251,98"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="857,17,1023,43"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="628,5,807,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="455,13,579,39"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="855,71,1025,98"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="453,67,580,94"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="650,133,785,159"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="212,58,405,85"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="459,154,574,181"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="234,109,383,135"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="226,159,391,186"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="231,210,386,237"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="241,261,376,287"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="5,109,164,135"/>
</map>
</div>

</div>
</div>
<a id="a5f7ab23a4eb39c09d0a5b9f461a6cb9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f7ab23a4eb39c09d0a5b9f461a6cb9b">&#9670;&nbsp;</a></span>unmap_donated_memory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unmap_donated_memory </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>va</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00437">437</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;{</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">if</span> (!va)</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    memset(va, 0, <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a57ca4bd54f074772ac03c6401856d122">__unmap_donated_memory</a>(va, <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;}</div>
<div class="ttc" id="ahyp_2nvhe_2pkvm_8c_html_a57ca4bd54f074772ac03c6401856d122"><div class="ttname"><a href="hyp_2nvhe_2pkvm_8c.html#a57ca4bd54f074772ac03c6401856d122">__unmap_donated_memory</a></div><div class="ttdeci">static void __unmap_donated_memory(void *va, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="hyp_2nvhe_2pkvm_8c_source.html#l00431">pkvm.c:431</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a5f7ab23a4eb39c09d0a5b9f461a6cb9b_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a5f7ab23a4eb39c09d0a5b9f461a6cb9b_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a5f7ab23a4eb39c09d0a5b9f461a6cb9b_cgraph" id="ahyp_2nvhe_2pkvm_8c_a5f7ab23a4eb39c09d0a5b9f461a6cb9b_cgraph">
<area shape="rect" title=" " alt="" coords="5,415,195,441"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a57ca4bd54f074772ac03c6401856d122" title=" " alt="" coords="243,415,445,441"/>
<area shape="rect" href="mem__protect_8h.html#ac46723bcc56baf1618eacb213151c926" title=" " alt="" coords="493,415,684,441"/>
<area shape="rect" href="mem__protect_8c.html#a7e4a0c65211d20b4e8adc2d323699489" title=" " alt="" coords="777,313,867,340"/>
<area shape="rect" href="mem__protect_8c.html#aa70b12df63f9379efa7fe11ade510b7c" title=" " alt="" coords="740,364,904,391"/>
<area shape="rect" href="mem__protect_8c.html#a21f32ced99ed31332ac532029100e42d" title=" " alt="" coords="732,465,912,492"/>
<area shape="rect" href="mem__protect_8c.html#abbc50e372d72deb41a021219c35e3589" title=" " alt="" coords="742,415,902,441"/>
<area shape="rect" href="mem__protect_8c.html#a024de911d90c8e8d57cc96c87fecb4d3" title=" " alt="" coords="734,516,910,543"/>
<area shape="rect" href="mem__protect_8c.html#a09511b2fc9e756f5849a9a10c21946f2" title=" " alt="" coords="1170,160,1274,187"/>
<area shape="rect" href="mem__protect_8c.html#a4738d2842abcf74309391d6e6c677537" title=" " alt="" coords="963,327,1087,353"/>
<area shape="rect" href="mem__protect_8c.html#a673fb7f8a0e4a07b1d69687f8e0e0ba1" title=" " alt="" coords="1354,160,1537,187"/>
<area shape="rect" href="mem__protect_8c.html#ad1da243415ccdd263b42151ea524c09b" title=" " alt="" coords="1362,109,1529,136"/>
<area shape="rect" href="mem__protect_8c.html#ae4aa540ec02ab30863a99b67f90471e5" title=" " alt="" coords="1356,59,1535,85"/>
<area shape="rect" href="mem__protect_8c.html#a41715fcfd37184a9ffdef5c049390537" title=" " alt="" coords="1364,211,1527,237"/>
<area shape="rect" href="mem__protect_8c.html#afb7f8781ecbfa50324009fac4a8a68a8" title=" " alt="" coords="1592,137,1767,178"/>
<area shape="rect" href="pgtable_8c.html#af94796027db211abf5c1e20911100320" title=" " alt="" coords="1837,137,1996,178"/>
<area shape="rect" href="pgtable_8c.html#a2a6ed7242e033a1f32360cbe0e5c2281" title=" " alt="" coords="2064,187,2209,213"/>
<area shape="rect" href="pgtable_8c.html#a239db42e3530e785e70ec04460752a87" title=" " alt="" coords="2061,136,2213,163"/>
<area shape="rect" href="pgtable_8c.html#ac74b17e065ba3e68a10f28b594d21e40" title=" " alt="" coords="2289,187,2441,213"/>
<area shape="rect" href="pgtable_8c.html#a6207f0c3812f7b386a306b717eb3c230" title=" " alt="" coords="2279,85,2451,112"/>
<area shape="rect" href="pgtable_8c.html#ade0f482b0d10d9aeefa9814ae4a7cf4b" title=" " alt="" coords="2261,136,2469,163"/>
<area shape="rect" href="pgtable_8c.html#acdca989573ec9ed02b9b43a7014140c8" title=" " alt="" coords="2517,48,2664,75"/>
<area shape="rect" href="pgtable_8c.html#a2f4269267d0718905af8540821a6de3d" title=" " alt="" coords="2527,175,2654,201"/>
<area shape="rect" href="mm_8h.html#a36a82f8cc52bf1bf431f904beddc6c18" title=" " alt="" coords="1590,19,1769,61"/>
<area shape="rect" href="mem__protect_8h.html#a2cf886e3d56ed4cd5ddb78944ac0a152" title=" " alt="" coords="1619,85,1739,112"/>
<area shape="rect" href="spinlock_8h.html#ae92c9f4a09d239d6060880c35d12a48b" title=" " alt="" coords="1835,276,1998,303"/>
<area shape="rect" href="memory_8h.html#aae436fb2b3f13c0954cde727104e80ac" title=" " alt="" coords="1850,77,1983,104"/>
<area shape="rect" href="pgtable_8c.html#ad1a61b3aa251ca1150e9359c5c31a173" title=" " alt="" coords="1829,27,2004,53"/>
<area shape="rect" href="pgtable_8c.html#a06c1f113f067476605d118dffebef6a8" title=" " alt="" coords="2071,5,2203,32"/>
<area shape="rect" href="pgtable_8c.html#ab93223f59cefdfdd0abfb060e97f7b45" title=" " alt="" coords="2069,56,2205,83"/>
<area shape="rect" href="pgtable_8c.html#ae28010caa0eb1b8a51d07679e9d08daa" title=" " alt="" coords="2271,35,2460,61"/>
<area shape="rect" href="pgtable_8c.html#af16196aa505cacc0ca294719f9575ce4" title=" " alt="" coords="1821,203,2012,229"/>
<area shape="rect" href="pgtable_8c.html#a7eb05408bfb8ee8e00dc693bbd018aa9" title=" " alt="" coords="2063,263,2211,289"/>
<area shape="rect" href="pgtable_8c.html#a42620f6fca0390491a59340e88890864" title=" " alt="" coords="2306,339,2425,365"/>
<area shape="rect" href="pgtable_8c.html#a6e3f339456d5a01daa47962cc12f080e" title=" " alt="" coords="2306,237,2425,264"/>
<area shape="rect" href="mem__protect_8c.html#a04ee34c0284691282c8c6b71cd477b6a" title=" " alt="" coords="1150,268,1294,295"/>
<area shape="rect" href="mem__protect_8c.html#a5d4226b7d58b6d55f4d6d7195914f4c2" title=" " alt="" coords="1144,319,1300,361"/>
<area shape="rect" href="mem__protect_8c.html#a14fb7245d65588761a3639a3186f18d2" title=" " alt="" coords="1152,436,1292,463"/>
<area shape="rect" href="mem__protect_8c.html#a9dbbee933218e562a7eca625a3b6695b" title=" " alt="" coords="1139,385,1305,412"/>
<area shape="rect" href="mem__protect_8c.html#a793d27f9ec8b2dabd2c158c94d8b7a43" title=" " alt="" coords="1364,268,1527,295"/>
<area shape="rect" href="mem__protect_8c.html#a1557151da412863d13c00a3cf7308990" title=" " alt="" coords="1587,254,1771,295"/>
<area shape="rect" href="mem__protect_8c.html#ab45dbaed102ffbf3ccda18c0cc20a6dc" title=" " alt="" coords="1585,319,1773,361"/>
<area shape="rect" href="mem__protect_8c.html#a3ea605c8779e3d79d674c81a6d64919c" title=" " alt="" coords="1825,377,2008,404"/>
<area shape="rect" href="mem__protect_8c.html#a39c30c3fbf244570912cbd38c6e5606a" title=" " alt="" coords="1838,327,1995,353"/>
<area shape="rect" href="mem__protect_8c.html#acef59d69975c27a7815896535bbb4e65" title=" " alt="" coords="2060,370,2213,411"/>
<area shape="rect" href="mem__protect_8c.html#a89057e6dfc7b241de73b439208bcf7d5" title=" " alt="" coords="1355,469,1535,510"/>
<area shape="rect" href="mem__protect_8c.html#a4ee4815f49f2d2a8397d1e2430193a3e" title=" " alt="" coords="1353,403,1537,445"/>
<area shape="rect" href="mem__protect_8c.html#a906b44af03f69892941d0b4e87d52fbd" title=" " alt="" coords="1603,385,1756,412"/>
<area shape="rect" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9" title=" " alt="" coords="968,403,1083,429"/>
<area shape="rect" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08" title=" " alt="" coords="960,491,1091,517"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a5f7ab23a4eb39c09d0a5b9f461a6cb9b_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a5f7ab23a4eb39c09d0a5b9f461a6cb9b_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a5f7ab23a4eb39c09d0a5b9f461a6cb9b_icgraph" id="ahyp_2nvhe_2pkvm_8c_a5f7ab23a4eb39c09d0a5b9f461a6cb9b_icgraph">
<area shape="rect" title=" " alt="" coords="1044,56,1233,83"/>
<area shape="rect" href="pkvm_8h.html#a7216bb296fb7f7480fbc91d0fa389b21" title=" " alt="" coords="857,31,996,57"/>
<area shape="rect" href="pkvm_8h.html#a284d0118156922a170aff08dae02356c" title=" " alt="" coords="862,81,991,108"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="624,56,804,83"/>
<area shape="rect" href="hyp-main_8c.html#ae49bc086c41cfafcbf8f708aba0fc64b" title=" " alt="" coords="619,5,809,32"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="404,56,571,83"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="177,49,356,90"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,56,129,83"/>
<area shape="rect" href="hyp-main_8c.html#a31ad01bbbb8a492515863ede046e1697" title=" " alt="" coords="624,107,804,133"/>
</map>
</div>

</div>
</div>
<a id="ae0206a7c88d213b1ff24538337468249"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0206a7c88d213b1ff24538337468249">&#9670;&nbsp;</a></span>unmap_donated_memory_noclear()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unmap_donated_memory_noclear </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>va</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00446">446</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;{</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">if</span> (!va)</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a57ca4bd54f074772ac03c6401856d122">__unmap_donated_memory</a>(va, <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_ae0206a7c88d213b1ff24538337468249_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_ae0206a7c88d213b1ff24538337468249_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_ae0206a7c88d213b1ff24538337468249_cgraph" id="ahyp_2nvhe_2pkvm_8c_ae0206a7c88d213b1ff24538337468249_cgraph">
<area shape="rect" title=" " alt="" coords="5,407,195,449"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a57ca4bd54f074772ac03c6401856d122" title=" " alt="" coords="243,415,445,441"/>
<area shape="rect" href="mem__protect_8h.html#ac46723bcc56baf1618eacb213151c926" title=" " alt="" coords="493,415,684,441"/>
<area shape="rect" href="mem__protect_8c.html#a7e4a0c65211d20b4e8adc2d323699489" title=" " alt="" coords="777,313,867,340"/>
<area shape="rect" href="mem__protect_8c.html#aa70b12df63f9379efa7fe11ade510b7c" title=" " alt="" coords="740,364,904,391"/>
<area shape="rect" href="mem__protect_8c.html#a21f32ced99ed31332ac532029100e42d" title=" " alt="" coords="732,465,912,492"/>
<area shape="rect" href="mem__protect_8c.html#abbc50e372d72deb41a021219c35e3589" title=" " alt="" coords="742,415,902,441"/>
<area shape="rect" href="mem__protect_8c.html#a024de911d90c8e8d57cc96c87fecb4d3" title=" " alt="" coords="734,516,910,543"/>
<area shape="rect" href="mem__protect_8c.html#a09511b2fc9e756f5849a9a10c21946f2" title=" " alt="" coords="1170,160,1274,187"/>
<area shape="rect" href="mem__protect_8c.html#a4738d2842abcf74309391d6e6c677537" title=" " alt="" coords="963,327,1087,353"/>
<area shape="rect" href="mem__protect_8c.html#a673fb7f8a0e4a07b1d69687f8e0e0ba1" title=" " alt="" coords="1354,160,1537,187"/>
<area shape="rect" href="mem__protect_8c.html#ad1da243415ccdd263b42151ea524c09b" title=" " alt="" coords="1362,109,1529,136"/>
<area shape="rect" href="mem__protect_8c.html#ae4aa540ec02ab30863a99b67f90471e5" title=" " alt="" coords="1356,59,1535,85"/>
<area shape="rect" href="mem__protect_8c.html#a41715fcfd37184a9ffdef5c049390537" title=" " alt="" coords="1364,211,1527,237"/>
<area shape="rect" href="mem__protect_8c.html#afb7f8781ecbfa50324009fac4a8a68a8" title=" " alt="" coords="1592,137,1767,178"/>
<area shape="rect" href="pgtable_8c.html#af94796027db211abf5c1e20911100320" title=" " alt="" coords="1837,137,1996,178"/>
<area shape="rect" href="pgtable_8c.html#a2a6ed7242e033a1f32360cbe0e5c2281" title=" " alt="" coords="2064,187,2209,213"/>
<area shape="rect" href="pgtable_8c.html#a239db42e3530e785e70ec04460752a87" title=" " alt="" coords="2061,136,2213,163"/>
<area shape="rect" href="pgtable_8c.html#ac74b17e065ba3e68a10f28b594d21e40" title=" " alt="" coords="2289,187,2441,213"/>
<area shape="rect" href="pgtable_8c.html#a6207f0c3812f7b386a306b717eb3c230" title=" " alt="" coords="2279,85,2451,112"/>
<area shape="rect" href="pgtable_8c.html#ade0f482b0d10d9aeefa9814ae4a7cf4b" title=" " alt="" coords="2261,136,2469,163"/>
<area shape="rect" href="pgtable_8c.html#acdca989573ec9ed02b9b43a7014140c8" title=" " alt="" coords="2517,48,2664,75"/>
<area shape="rect" href="pgtable_8c.html#a2f4269267d0718905af8540821a6de3d" title=" " alt="" coords="2527,175,2654,201"/>
<area shape="rect" href="mm_8h.html#a36a82f8cc52bf1bf431f904beddc6c18" title=" " alt="" coords="1590,19,1769,61"/>
<area shape="rect" href="mem__protect_8h.html#a2cf886e3d56ed4cd5ddb78944ac0a152" title=" " alt="" coords="1619,85,1739,112"/>
<area shape="rect" href="spinlock_8h.html#ae92c9f4a09d239d6060880c35d12a48b" title=" " alt="" coords="1835,276,1998,303"/>
<area shape="rect" href="memory_8h.html#aae436fb2b3f13c0954cde727104e80ac" title=" " alt="" coords="1850,77,1983,104"/>
<area shape="rect" href="pgtable_8c.html#ad1a61b3aa251ca1150e9359c5c31a173" title=" " alt="" coords="1829,27,2004,53"/>
<area shape="rect" href="pgtable_8c.html#a06c1f113f067476605d118dffebef6a8" title=" " alt="" coords="2071,5,2203,32"/>
<area shape="rect" href="pgtable_8c.html#ab93223f59cefdfdd0abfb060e97f7b45" title=" " alt="" coords="2069,56,2205,83"/>
<area shape="rect" href="pgtable_8c.html#ae28010caa0eb1b8a51d07679e9d08daa" title=" " alt="" coords="2271,35,2460,61"/>
<area shape="rect" href="pgtable_8c.html#af16196aa505cacc0ca294719f9575ce4" title=" " alt="" coords="1821,203,2012,229"/>
<area shape="rect" href="pgtable_8c.html#a7eb05408bfb8ee8e00dc693bbd018aa9" title=" " alt="" coords="2063,263,2211,289"/>
<area shape="rect" href="pgtable_8c.html#a42620f6fca0390491a59340e88890864" title=" " alt="" coords="2306,339,2425,365"/>
<area shape="rect" href="pgtable_8c.html#a6e3f339456d5a01daa47962cc12f080e" title=" " alt="" coords="2306,237,2425,264"/>
<area shape="rect" href="mem__protect_8c.html#a04ee34c0284691282c8c6b71cd477b6a" title=" " alt="" coords="1150,268,1294,295"/>
<area shape="rect" href="mem__protect_8c.html#a5d4226b7d58b6d55f4d6d7195914f4c2" title=" " alt="" coords="1144,319,1300,361"/>
<area shape="rect" href="mem__protect_8c.html#a14fb7245d65588761a3639a3186f18d2" title=" " alt="" coords="1152,436,1292,463"/>
<area shape="rect" href="mem__protect_8c.html#a9dbbee933218e562a7eca625a3b6695b" title=" " alt="" coords="1139,385,1305,412"/>
<area shape="rect" href="mem__protect_8c.html#a793d27f9ec8b2dabd2c158c94d8b7a43" title=" " alt="" coords="1364,268,1527,295"/>
<area shape="rect" href="mem__protect_8c.html#a1557151da412863d13c00a3cf7308990" title=" " alt="" coords="1587,254,1771,295"/>
<area shape="rect" href="mem__protect_8c.html#ab45dbaed102ffbf3ccda18c0cc20a6dc" title=" " alt="" coords="1585,319,1773,361"/>
<area shape="rect" href="mem__protect_8c.html#a3ea605c8779e3d79d674c81a6d64919c" title=" " alt="" coords="1825,377,2008,404"/>
<area shape="rect" href="mem__protect_8c.html#a39c30c3fbf244570912cbd38c6e5606a" title=" " alt="" coords="1838,327,1995,353"/>
<area shape="rect" href="mem__protect_8c.html#acef59d69975c27a7815896535bbb4e65" title=" " alt="" coords="2060,370,2213,411"/>
<area shape="rect" href="mem__protect_8c.html#a89057e6dfc7b241de73b439208bcf7d5" title=" " alt="" coords="1355,469,1535,510"/>
<area shape="rect" href="mem__protect_8c.html#a4ee4815f49f2d2a8397d1e2430193a3e" title=" " alt="" coords="1353,403,1537,445"/>
<area shape="rect" href="mem__protect_8c.html#a906b44af03f69892941d0b4e87d52fbd" title=" " alt="" coords="1603,385,1756,412"/>
<area shape="rect" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9" title=" " alt="" coords="968,403,1083,429"/>
<area shape="rect" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08" title=" " alt="" coords="960,491,1091,517"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_ae0206a7c88d213b1ff24538337468249_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_ae0206a7c88d213b1ff24538337468249_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_ae0206a7c88d213b1ff24538337468249_icgraph" id="ahyp_2nvhe_2pkvm_8c_ae0206a7c88d213b1ff24538337468249_icgraph">
<area shape="rect" title=" " alt="" coords="2040,64,2229,105"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a315a65a066329bcea7b74d4eb11c963c" title=" " alt="" coords="1787,71,1992,98"/>
<area shape="rect" href="pkvm_8h.html#adedaa2ebee60585a9aab7d80293a5ad2" title=" " alt="" coords="1569,71,1739,98"/>
<area shape="rect" href="pkvm_8c.html#abd259bb0db17ae7c75a8940360667c32" title=" " alt="" coords="1317,46,1505,73"/>
<area shape="rect" href="hyp-main_8c.html#acd9baa0fe0fe70ef810d8675e69aa87d" title=" " alt="" coords="1301,97,1521,123"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="1073,21,1253,47"/>
<area shape="rect" href="pkvm_8c.html#a0de2dfe512399e7f17c01091bc3e8ae8" title=" " alt="" coords="1076,71,1251,98"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="857,17,1023,43"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="628,5,807,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="455,13,579,39"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="855,71,1025,98"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="453,67,580,94"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="650,133,785,159"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="212,58,405,85"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="459,154,574,181"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="234,109,383,135"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="226,159,391,186"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="231,210,386,237"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="241,261,376,287"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="5,109,164,135"/>
</map>
</div>

</div>
</div>
<a id="a9503b9e29dd4b2337feef252f5a57103"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9503b9e29dd4b2337feef252f5a57103">&#9670;&nbsp;</a></span>unpin_host_vcpu()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unpin_host_vcpu </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>host_vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00290">290</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;{</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">if</span> (host_vcpu)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <a class="code" href="mem__protect_8h.html#a16fa0918fd8f50705e15341038d58fd8">hyp_unpin_shared_mem</a>(host_vcpu, host_vcpu + 1);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a9503b9e29dd4b2337feef252f5a57103_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a9503b9e29dd4b2337feef252f5a57103_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a9503b9e29dd4b2337feef252f5a57103_cgraph" id="ahyp_2nvhe_2pkvm_8c_a9503b9e29dd4b2337feef252f5a57103_cgraph">
<area shape="rect" title=" " alt="" coords="5,107,136,133"/>
<area shape="rect" href="mem__protect_8h.html#a16fa0918fd8f50705e15341038d58fd8" title=" " alt="" coords="184,107,365,133"/>
<area shape="rect" href="mem__protect_8c.html#aa70b12df63f9379efa7fe11ade510b7c" title=" " alt="" coords="421,5,585,32"/>
<area shape="rect" href="mem__protect_8c.html#a21f32ced99ed31332ac532029100e42d" title=" " alt="" coords="413,107,593,133"/>
<area shape="rect" href="mem__protect_8c.html#abbc50e372d72deb41a021219c35e3589" title=" " alt="" coords="423,56,583,83"/>
<area shape="rect" href="memory_8h.html#a3cc326fe973add2b2ea91f6b04dd8fde" title=" " alt="" coords="433,157,573,184"/>
<area shape="rect" href="mem__protect_8c.html#a024de911d90c8e8d57cc96c87fecb4d3" title=" " alt="" coords="415,208,591,235"/>
<area shape="rect" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9" title=" " alt="" coords="649,31,764,57"/>
<area shape="rect" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08" title=" " alt="" coords="641,132,772,159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a9503b9e29dd4b2337feef252f5a57103_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a9503b9e29dd4b2337feef252f5a57103_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a9503b9e29dd4b2337feef252f5a57103_icgraph" id="ahyp_2nvhe_2pkvm_8c_a9503b9e29dd4b2337feef252f5a57103_icgraph">
<area shape="rect" title=" " alt="" coords="1991,73,2121,99"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a62e6bc810202341dfe789a22d676a469" title=" " alt="" coords="1787,47,1943,74"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a9fb5ca8500d8ba2e1c140f3dd549d832" title=" " alt="" coords="1795,98,1934,125"/>
<area shape="rect" href="pkvm_8h.html#a7216bb296fb7f7480fbc91d0fa389b21" title=" " alt="" coords="1585,47,1723,74"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="1073,13,1253,39"/>
<area shape="rect" href="hyp-main_8c.html#ae49bc086c41cfafcbf8f708aba0fc64b" title=" " alt="" coords="1316,47,1507,74"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="857,13,1023,39"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="628,5,807,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="455,13,579,39"/>
<area shape="rect" href="pkvm_8h.html#adedaa2ebee60585a9aab7d80293a5ad2" title=" " alt="" coords="1569,98,1739,125"/>
<area shape="rect" href="pkvm_8c.html#abd259bb0db17ae7c75a8940360667c32" title=" " alt="" coords="1317,98,1505,125"/>
<area shape="rect" href="hyp-main_8c.html#acd9baa0fe0fe70ef810d8675e69aa87d" title=" " alt="" coords="1301,149,1521,175"/>
<area shape="rect" href="pkvm_8c.html#a0de2dfe512399e7f17c01091bc3e8ae8" title=" " alt="" coords="1076,98,1251,125"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="855,98,1025,125"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="453,70,580,97"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="650,138,785,165"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="212,61,405,87"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="459,159,574,186"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="234,111,383,138"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="226,162,391,189"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="231,213,386,239"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="241,263,376,290"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="5,111,164,138"/>
</map>
</div>

</div>
</div>
<a id="a9fb5ca8500d8ba2e1c140f3dd549d832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fb5ca8500d8ba2e1c140f3dd549d832">&#9670;&nbsp;</a></span>unpin_host_vcpus()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unpin_host_vcpus </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpkvm__hyp__vcpu.html">pkvm_hyp_vcpu</a> *&#160;</td>
          <td class="paramname"><em>hyp_vcpus</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nr_vcpus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00296">296</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;{</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; nr_vcpus; i++)</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a9503b9e29dd4b2337feef252f5a57103">unpin_host_vcpu</a>(hyp_vcpus[i]-&gt;host_vcpu);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a9fb5ca8500d8ba2e1c140f3dd549d832_cgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a9fb5ca8500d8ba2e1c140f3dd549d832_cgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a9fb5ca8500d8ba2e1c140f3dd549d832_cgraph" id="ahyp_2nvhe_2pkvm_8c_a9fb5ca8500d8ba2e1c140f3dd549d832_cgraph">
<area shape="rect" title=" " alt="" coords="5,107,144,133"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a9503b9e29dd4b2337feef252f5a57103" title=" " alt="" coords="192,107,323,133"/>
<area shape="rect" href="mem__protect_8h.html#a16fa0918fd8f50705e15341038d58fd8" title=" " alt="" coords="371,107,552,133"/>
<area shape="rect" href="mem__protect_8c.html#aa70b12df63f9379efa7fe11ade510b7c" title=" " alt="" coords="608,5,772,32"/>
<area shape="rect" href="mem__protect_8c.html#a21f32ced99ed31332ac532029100e42d" title=" " alt="" coords="600,107,780,133"/>
<area shape="rect" href="mem__protect_8c.html#abbc50e372d72deb41a021219c35e3589" title=" " alt="" coords="610,56,770,83"/>
<area shape="rect" href="memory_8h.html#a3cc326fe973add2b2ea91f6b04dd8fde" title=" " alt="" coords="620,157,760,184"/>
<area shape="rect" href="mem__protect_8c.html#a024de911d90c8e8d57cc96c87fecb4d3" title=" " alt="" coords="602,208,778,235"/>
<area shape="rect" href="spinlock_8h.html#ae942ff0e878cb0f4d55ddc4cc6275ec9" title=" " alt="" coords="836,31,951,57"/>
<area shape="rect" href="spinlock_8h.html#a2c6e9db70599188dbe031e2ce8ec6b08" title=" " alt="" coords="828,132,959,159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a9fb5ca8500d8ba2e1c140f3dd549d832_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a9fb5ca8500d8ba2e1c140f3dd549d832_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a9fb5ca8500d8ba2e1c140f3dd549d832_icgraph" id="ahyp_2nvhe_2pkvm_8c_a9fb5ca8500d8ba2e1c140f3dd549d832_icgraph">
<area shape="rect" title=" " alt="" coords="1787,71,1925,98"/>
<area shape="rect" href="pkvm_8h.html#adedaa2ebee60585a9aab7d80293a5ad2" title=" " alt="" coords="1569,71,1739,98"/>
<area shape="rect" href="pkvm_8c.html#abd259bb0db17ae7c75a8940360667c32" title=" " alt="" coords="1317,46,1505,73"/>
<area shape="rect" href="hyp-main_8c.html#acd9baa0fe0fe70ef810d8675e69aa87d" title=" " alt="" coords="1301,97,1521,123"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="1073,21,1253,47"/>
<area shape="rect" href="pkvm_8c.html#a0de2dfe512399e7f17c01091bc3e8ae8" title=" " alt="" coords="1076,71,1251,98"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="857,17,1023,43"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="628,5,807,47"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="455,13,579,39"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="855,71,1025,98"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="453,67,580,94"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="650,133,785,159"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="212,58,405,85"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="459,154,574,181"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="234,109,383,135"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="226,159,391,186"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="231,210,386,237"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="241,261,376,287"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="5,109,164,135"/>
</map>
</div>

</div>
</div>
<a id="a44f3b33f9c9af29ae5def49898ff81dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44f3b33f9c9af29ae5def49898ff81dd">&#9670;&nbsp;</a></span>vm_handle_to_idx()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int vm_handle_to_idx </td>
          <td>(</td>
          <td class="paramtype">pkvm_handle_t&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00221">221</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;{</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">return</span> handle - <a class="code" href="hyp_2nvhe_2pkvm_8c.html#a9f888e8ea8c4543274825aab6b2240c6">HANDLE_OFFSET</a>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hyp_2nvhe_2pkvm_8c_a44f3b33f9c9af29ae5def49898ff81dd_icgraph.png" border="0" usemap="#ahyp_2nvhe_2pkvm_8c_a44f3b33f9c9af29ae5def49898ff81dd_icgraph" alt=""/></div>
<map name="ahyp_2nvhe_2pkvm_8c_a44f3b33f9c9af29ae5def49898ff81dd_icgraph" id="ahyp_2nvhe_2pkvm_8c_a44f3b33f9c9af29ae5def49898ff81dd_icgraph">
<area shape="rect" title=" " alt="" coords="2016,132,2157,159"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#af3a9f8da5f6f1ac6c51d8b4cf7be26ca" title=" " alt="" coords="1805,107,1950,133"/>
<area shape="rect" href="hyp_2nvhe_2pkvm_8c.html#a296892c18e515626259e369403a4d3d0" title=" " alt="" coords="1787,157,1968,184"/>
<area shape="rect" href="pkvm_8h.html#a7216bb296fb7f7480fbc91d0fa389b21" title=" " alt="" coords="1585,56,1723,83"/>
<area shape="rect" href="pkvm_8h.html#adedaa2ebee60585a9aab7d80293a5ad2" title=" " alt="" coords="1569,157,1739,184"/>
<area shape="rect" href="pkvm_8h.html#a26c97c43a67f2b519b95a2d4f3f3e56d" title=" " alt="" coords="1573,107,1735,133"/>
<area shape="rect" href="pkvm_8c.html#ac6f8b05fc1474ed8f561ddb8f7fa3a96" title=" " alt="" coords="1073,183,1253,209"/>
<area shape="rect" href="hyp-main_8c.html#ae49bc086c41cfafcbf8f708aba0fc64b" title=" " alt="" coords="1316,5,1507,32"/>
<area shape="rect" href="pkvm_8c.html#a9c8ae8a0a845f44545cd6b7819f3430e" title=" " alt="" coords="857,179,1023,205"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="628,167,807,209"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="455,175,579,201"/>
<area shape="rect" href="pkvm_8c.html#abd259bb0db17ae7c75a8940360667c32" title=" " alt="" coords="1317,208,1505,235"/>
<area shape="rect" href="hyp-main_8c.html#acd9baa0fe0fe70ef810d8675e69aa87d" title=" " alt="" coords="1301,157,1521,184"/>
<area shape="rect" href="pkvm_8c.html#a0de2dfe512399e7f17c01091bc3e8ae8" title=" " alt="" coords="1076,233,1251,260"/>
<area shape="rect" href="arm_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="855,233,1025,260"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="453,300,580,327"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="650,233,785,260"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="212,321,405,348"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="459,229,574,256"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="234,220,383,247"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="226,271,391,297"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="231,119,386,145"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="241,169,376,196"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="5,220,164,247"/>
<area shape="rect" href="hyp-main_8c.html#a4ee0e6f5a31d21183ee7fea340479a2a" title=" " alt="" coords="1320,107,1503,133"/>
<area shape="rect" href="pkvm_8h.html#a284d0118156922a170aff08dae02356c" title=" " alt="" coords="1589,259,1719,285"/>
<area shape="rect" href="hyp-main_8c.html#a31ad01bbbb8a492515863ede046e1697" title=" " alt="" coords="1321,309,1501,336"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ae2599988ca0fec8cc428667b22dcbda6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2599988ca0fec8cc428667b22dcbda6">&#9670;&nbsp;</a></span>__icache_flags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long __icache_flags</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00016">16</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>

</div>
</div>
<a id="a240552deb4ef09600b87b23ce5cc5906"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a240552deb4ef09600b87b23ce5cc5906">&#9670;&nbsp;</a></span>kvm_arm_vmid_bits</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int kvm_arm_vmid_bits</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00019">19</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>

</div>
</div>
<a id="a17425ab40cd41e111f5331be6e644d83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17425ab40cd41e111f5331be6e644d83">&#9670;&nbsp;</a></span>vm_table</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structpkvm__hyp__vm.html">pkvm_hyp_vm</a>** vm_table</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html#l00242">242</a> of file <a class="el" href="hyp_2nvhe_2pkvm_8c_source.html">pkvm.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
