<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KVM: arch/arm64/kvm/vgic/vgic-kvm-device.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KVM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_ea9599923402ca8ab47fc3e495999dea.html">arch</a></li><li class="navelem"><a class="el" href="dir_67a9e021ce8db5d46236c6154ee454bc.html">arm64</a></li><li class="navelem"><a class="el" href="dir_42f87ef63ac4150166bf7887f68288e2.html">kvm</a></li><li class="navelem"><a class="el" href="dir_3eb4584ecab9fce570ac1ce102ccba9b.html">vgic</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">vgic-kvm-device.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/kvm_host.h&gt;</code><br />
<code>#include &lt;kvm/arm_vgic.h&gt;</code><br />
<code>#include &lt;linux/uaccess.h&gt;</code><br />
<code>#include &lt;asm/kvm_mmu.h&gt;</code><br />
<code>#include &lt;asm/cputype.h&gt;</code><br />
<code>#include &quot;<a class="el" href="vgic_8h_source.html">vgic.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for vgic-kvm-device.c:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c__incl.png" border="0" usemap="#aarch_2arm64_2kvm_2vgic_2vgic-kvm-device_8c" alt=""/></div>
<map name="aarch_2arm64_2kvm_2vgic_2vgic-kvm-device_8c" id="aarch_2arm64_2kvm_2vgic_2vgic-kvm-device_8c">
<area shape="rect" title=" " alt="" coords="346,5,506,47"/>
<area shape="rect" title=" " alt="" coords="5,95,140,121"/>
<area shape="rect" title=" " alt="" coords="164,95,291,121"/>
<area shape="rect" title=" " alt="" coords="315,95,438,121"/>
<area shape="rect" title=" " alt="" coords="429,177,565,203"/>
<area shape="rect" title=" " alt="" coords="513,95,632,121"/>
<area shape="rect" href="vgic_8h.html" title=" " alt="" coords="657,95,718,121"/>
<area shape="rect" title=" " alt="" coords="609,169,765,211"/>
</map>
</div>
</div>
<p><a href="vgic-kvm-device_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af0cfcc44a93abc13df9a7e364c21cf32"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32">vgic_check_iorange</a> (struct kvm *kvm, phys_addr_t ioaddr, phys_addr_t addr, phys_addr_t alignment, phys_addr_t <a class="el" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>)</td></tr>
<tr class="separator:af0cfcc44a93abc13df9a7e364c21cf32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabe1882d024943ea3d42bd37678f437f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#aabe1882d024943ea3d42bd37678f437f">vgic_check_type</a> (struct kvm *kvm, int type_needed)</td></tr>
<tr class="separator:aabe1882d024943ea3d42bd37678f437f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7808d55ba83902bd478febfc33334d5d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#a7808d55ba83902bd478febfc33334d5d">kvm_set_legacy_vgic_v2_addr</a> (struct kvm *kvm, struct kvm_arm_device_addr *dev_addr)</td></tr>
<tr class="separator:a7808d55ba83902bd478febfc33334d5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada63b20fef4ef1cc52730143652f9cb9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9">kvm_vgic_addr</a> (struct kvm *kvm, struct kvm_device_attr *attr, bool write)</td></tr>
<tr class="separator:ada63b20fef4ef1cc52730143652f9cb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aadc4684bf7ca54e4a3d91f9e10310c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c">vgic_set_common_attr</a> (struct kvm_device *dev, struct kvm_device_attr *attr)</td></tr>
<tr class="separator:a6aadc4684bf7ca54e4a3d91f9e10310c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa811a4f5550c34be51d9c98440824a40"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40">vgic_get_common_attr</a> (struct kvm_device *dev, struct kvm_device_attr *attr)</td></tr>
<tr class="separator:aa811a4f5550c34be51d9c98440824a40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a03bcf8c61b3397194a8fba37f06f1c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#a4a03bcf8c61b3397194a8fba37f06f1c">vgic_create</a> (struct kvm_device *dev, u32 type)</td></tr>
<tr class="separator:a4a03bcf8c61b3397194a8fba37f06f1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae70ac9825f01ca17be4b35b173f4be62"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#ae70ac9825f01ca17be4b35b173f4be62">vgic_destroy</a> (struct kvm_device *dev)</td></tr>
<tr class="separator:ae70ac9825f01ca17be4b35b173f4be62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa01e5dcf80e608f64f5428d054d17a84"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#aa01e5dcf80e608f64f5428d054d17a84">kvm_register_vgic_device</a> (unsigned long type)</td></tr>
<tr class="separator:aa01e5dcf80e608f64f5428d054d17a84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6e244467a63a98cec7698162df49572"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#aa6e244467a63a98cec7698162df49572">vgic_v2_parse_attr</a> (struct kvm_device *dev, struct kvm_device_attr *attr, struct <a class="el" href="structvgic__reg__attr.html">vgic_reg_attr</a> *reg_attr)</td></tr>
<tr class="separator:aa6e244467a63a98cec7698162df49572"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78d5c53181a4adf55a58d8277fb751af"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af">vgic_v2_attr_regs_access</a> (struct kvm_device *dev, struct kvm_device_attr *attr, bool is_write)</td></tr>
<tr class="separator:a78d5c53181a4adf55a58d8277fb751af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37a5c9125b0504633553497ae8c7ce9c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c">vgic_v2_set_attr</a> (struct kvm_device *dev, struct kvm_device_attr *attr)</td></tr>
<tr class="separator:a37a5c9125b0504633553497ae8c7ce9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bb10b83ef8325ecaa3671e9fe9c528c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c">vgic_v2_get_attr</a> (struct kvm_device *dev, struct kvm_device_attr *attr)</td></tr>
<tr class="separator:a3bb10b83ef8325ecaa3671e9fe9c528c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1901d2a2905a73826ea1287212aef248"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#a1901d2a2905a73826ea1287212aef248">vgic_v2_has_attr</a> (struct kvm_device *dev, struct kvm_device_attr *attr)</td></tr>
<tr class="separator:a1901d2a2905a73826ea1287212aef248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae16a58808d1a84f4f378a2ff4343d200"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#ae16a58808d1a84f4f378a2ff4343d200">vgic_v3_parse_attr</a> (struct kvm_device *dev, struct kvm_device_attr *attr, struct <a class="el" href="structvgic__reg__attr.html">vgic_reg_attr</a> *reg_attr)</td></tr>
<tr class="separator:ae16a58808d1a84f4f378a2ff4343d200"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a176e49a1162579b332c8a68ab035e981"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#a176e49a1162579b332c8a68ab035e981">vgic_v3_attr_regs_access</a> (struct kvm_device *dev, struct kvm_device_attr *attr, bool is_write)</td></tr>
<tr class="separator:a176e49a1162579b332c8a68ab035e981"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee48777d58c65e5b91c0f85e2eae843e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e">vgic_v3_set_attr</a> (struct kvm_device *dev, struct kvm_device_attr *attr)</td></tr>
<tr class="separator:aee48777d58c65e5b91c0f85e2eae843e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2effaec26f6d2af865ed45b7dbc64f1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1">vgic_v3_get_attr</a> (struct kvm_device *dev, struct kvm_device_attr *attr)</td></tr>
<tr class="separator:ad2effaec26f6d2af865ed45b7dbc64f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f2f7c3eb1c4a6403c66c2b1e6e4ddc2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#a8f2f7c3eb1c4a6403c66c2b1e6e4ddc2">vgic_v3_has_attr</a> (struct kvm_device *dev, struct kvm_device_attr *attr)</td></tr>
<tr class="separator:a8f2f7c3eb1c4a6403c66c2b1e6e4ddc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5a628c87c18349dd58c792be382a1923"><td class="memItemLeft" align="right" valign="top">struct kvm_device_ops&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#a5a628c87c18349dd58c792be382a1923">kvm_arm_vgic_v2_ops</a></td></tr>
<tr class="separator:a5a628c87c18349dd58c792be382a1923"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adad4cc8377a1795f085c0e7824d336a2"><td class="memItemLeft" align="right" valign="top">struct kvm_device_ops&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgic-kvm-device_8c.html#adad4cc8377a1795f085c0e7824d336a2">kvm_arm_vgic_v3_ops</a></td></tr>
<tr class="separator:adad4cc8377a1795f085c0e7824d336a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa01e5dcf80e608f64f5428d054d17a84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa01e5dcf80e608f64f5428d054d17a84">&#9670;&nbsp;</a></span>kvm_register_vgic_device()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_register_vgic_device </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00316">316</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordtype">int</span> ret = -ENODEV;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">switch</span> (type) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_TYPE_ARM_VGIC_V2:</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        ret = <a class="code" href="kvm__main_8c.html#a04cec4716182d98b08f008f317aaf698">kvm_register_device_ops</a>(&amp;<a class="code" href="vgic-kvm-device_8c.html#a5a628c87c18349dd58c792be382a1923">kvm_arm_vgic_v2_ops</a>,</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                          KVM_DEV_TYPE_ARM_VGIC_V2);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_TYPE_ARM_VGIC_V3:</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        ret = <a class="code" href="kvm__main_8c.html#a04cec4716182d98b08f008f317aaf698">kvm_register_device_ops</a>(&amp;<a class="code" href="vgic-kvm-device_8c.html#adad4cc8377a1795f085c0e7824d336a2">kvm_arm_vgic_v3_ops</a>,</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                          KVM_DEV_TYPE_ARM_VGIC_V3);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        ret = <a class="code" href="vgic-its_8c.html#a50d09aacec778677eb4fb2c550a3bea4">kvm_vgic_register_its_device</a>();</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_a04cec4716182d98b08f008f317aaf698"><div class="ttname"><a href="kvm__main_8c.html#a04cec4716182d98b08f008f317aaf698">kvm_register_device_ops</a></div><div class="ttdeci">int kvm_register_device_ops(const struct kvm_device_ops *ops, u32 type)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l04742">kvm_main.c:4742</a></div></div>
<div class="ttc" id="avgic-its_8c_html_a50d09aacec778677eb4fb2c550a3bea4"><div class="ttname"><a href="vgic-its_8c.html#a50d09aacec778677eb4fb2c550a3bea4">kvm_vgic_register_its_device</a></div><div class="ttdeci">int kvm_vgic_register_its_device(void)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-its_8c_source.html#l02914">vgic-its.c:2914</a></div></div>
<div class="ttc" id="avgic-kvm-device_8c_html_a5a628c87c18349dd58c792be382a1923"><div class="ttname"><a href="vgic-kvm-device_8c.html#a5a628c87c18349dd58c792be382a1923">kvm_arm_vgic_v2_ops</a></div><div class="ttdeci">struct kvm_device_ops kvm_arm_vgic_v2_ops</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00440">vgic-kvm-device.c:465</a></div></div>
<div class="ttc" id="avgic-kvm-device_8c_html_adad4cc8377a1795f085c0e7824d336a2"><div class="ttname"><a href="vgic-kvm-device_8c.html#adad4cc8377a1795f085c0e7824d336a2">kvm_arm_vgic_v3_ops</a></div><div class="ttdeci">struct kvm_device_ops kvm_arm_vgic_v3_ops</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00626">vgic-kvm-device.c:662</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_aa01e5dcf80e608f64f5428d054d17a84_cgraph.png" border="0" usemap="#avgic-kvm-device_8c_aa01e5dcf80e608f64f5428d054d17a84_cgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_aa01e5dcf80e608f64f5428d054d17a84_cgraph" id="avgic-kvm-device_8c_aa01e5dcf80e608f64f5428d054d17a84_cgraph">
<area shape="rect" title=" " alt="" coords="5,35,197,61"/>
<area shape="rect" href="kvm__main_8c.html#a04cec4716182d98b08f008f317aaf698" title=" " alt="" coords="245,5,433,32"/>
<area shape="rect" href="vgic-its_8c.html#a50d09aacec778677eb4fb2c550a3bea4" title=" " alt="" coords="257,57,422,98"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_aa01e5dcf80e608f64f5428d054d17a84_icgraph.png" border="0" usemap="#avgic-kvm-device_8c_aa01e5dcf80e608f64f5428d054d17a84_icgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_aa01e5dcf80e608f64f5428d054d17a84_icgraph" id="avgic-kvm-device_8c_aa01e5dcf80e608f64f5428d054d17a84_icgraph">
<area shape="rect" title=" " alt="" coords="697,31,889,57"/>
<area shape="rect" href="vgic-v2_8c.html#aa3e64817232a1ce5658b7f3147f7f554" title=" " alt="" coords="533,5,649,32"/>
<area shape="rect" href="vgic-v3_8c.html#ac418c84cff9542559c426a575c403136" title=" " alt="" coords="533,56,649,83"/>
<area shape="rect" href="vgic-init_8c.html#aba3547aa220ca50b1eabca1a39c92943" title=" " alt="" coords="341,31,485,57"/>
<area shape="rect" href="arm_8c.html#a040f9b021372ae855b2cc25a0c07da7a" title=" " alt="" coords="165,31,293,57"/>
<area shape="rect" href="arm_8c.html#a625df4221f73b13d9f23aa818f60e547" title=" " alt="" coords="5,31,117,57"/>
</map>
</div>

</div>
</div>
<a id="a7808d55ba83902bd478febfc33334d5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7808d55ba83902bd478febfc33334d5d">&#9670;&nbsp;</a></span>kvm_set_legacy_vgic_v2_addr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_set_legacy_vgic_v2_addr </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_arm_device_addr *&#160;</td>
          <td class="paramname"><em>dev_addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00045">45</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keyword">struct </span>vgic_dist *vgic = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    mutex_lock(&amp;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">switch</span> (FIELD_GET(KVM_ARM_DEVICE_TYPE_MASK, dev_addr-&gt;id)) {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">case</span> KVM_VGIC_V2_ADDR_TYPE_DIST:</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        r = <a class="code" href="vgic-kvm-device_8c.html#aabe1882d024943ea3d42bd37678f437f">vgic_check_type</a>(kvm, KVM_DEV_TYPE_ARM_VGIC_V2);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keywordflow">if</span> (!r)</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            r = <a class="code" href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32">vgic_check_iorange</a>(kvm, vgic-&gt;vgic_dist_base, dev_addr-&gt;addr,</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                           SZ_4K, KVM_VGIC_V2_DIST_SIZE);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keywordflow">if</span> (!r)</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            vgic-&gt;vgic_dist_base = dev_addr-&gt;addr;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">case</span> KVM_VGIC_V2_ADDR_TYPE_CPU:</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        r = <a class="code" href="vgic-kvm-device_8c.html#aabe1882d024943ea3d42bd37678f437f">vgic_check_type</a>(kvm, KVM_DEV_TYPE_ARM_VGIC_V2);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="keywordflow">if</span> (!r)</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            r = <a class="code" href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32">vgic_check_iorange</a>(kvm, vgic-&gt;vgic_cpu_base, dev_addr-&gt;addr,</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                           SZ_4K, KVM_VGIC_V2_CPU_SIZE);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keywordflow">if</span> (!r)</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            vgic-&gt;vgic_cpu_base = dev_addr-&gt;addr;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        r = -ENODEV;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    mutex_unlock(&amp;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div>
<div class="ttc" id="avgic-kvm-device_8c_html_aabe1882d024943ea3d42bd37678f437f"><div class="ttname"><a href="vgic-kvm-device_8c.html#aabe1882d024943ea3d42bd37678f437f">vgic_check_type</a></div><div class="ttdeci">static int vgic_check_type(struct kvm *kvm, int type_needed)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00037">vgic-kvm-device.c:37</a></div></div>
<div class="ttc" id="avgic-kvm-device_8c_html_af0cfcc44a93abc13df9a7e364c21cf32"><div class="ttname"><a href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32">vgic_check_iorange</a></div><div class="ttdeci">int vgic_check_iorange(struct kvm *kvm, phys_addr_t ioaddr, phys_addr_t addr, phys_addr_t alignment, phys_addr_t size)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00017">vgic-kvm-device.c:17</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_a7808d55ba83902bd478febfc33334d5d_cgraph.png" border="0" usemap="#avgic-kvm-device_8c_a7808d55ba83902bd478febfc33334d5d_cgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_a7808d55ba83902bd478febfc33334d5d_cgraph" id="avgic-kvm-device_8c_a7808d55ba83902bd478febfc33334d5d_cgraph">
<area shape="rect" title=" " alt="" coords="5,23,168,65"/>
<area shape="rect" href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32" title=" " alt="" coords="216,5,367,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aabe1882d024943ea3d42bd37678f437f" title=" " alt="" coords="226,56,357,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_a7808d55ba83902bd478febfc33334d5d_icgraph.png" border="0" usemap="#avgic-kvm-device_8c_a7808d55ba83902bd478febfc33334d5d_icgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_a7808d55ba83902bd478febfc33334d5d_icgraph" id="avgic-kvm-device_8c_a7808d55ba83902bd478febfc33334d5d_icgraph">
<area shape="rect" title=" " alt="" coords="477,5,640,47"/>
<area shape="rect" href="arm_8c.html#a18aad074e49e8bedf16bff2daee6fc5d" title=" " alt="" coords="203,13,429,39"/>
<area shape="rect" href="arm_8c.html#a10224987f77e7370dd9f2b80352544ab" title=" " alt="" coords="5,13,155,39"/>
</map>
</div>

</div>
</div>
<a id="ada63b20fef4ef1cc52730143652f9cb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada63b20fef4ef1cc52730143652f9cb9">&#9670;&nbsp;</a></span>kvm_vgic_addr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kvm_vgic_addr </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>write</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>kvm_vgic_addr - set or get vgic VM base addresses @kvm: pointer to the vm struct @attr: pointer to the attribute being retrieved/updated @write: if true set the address in the VM address space, if false read the address</p>
<p>Set or get the vgic base addresses for the distributor and the virtual CPU interface in the VM physical address space. These addresses are properties of the emulated core/SoC and therefore user space initially knows this information. Check them for sanity (alignment, double assignment). We can't check for overlapping regions in case of a virtual GICv3 here, since we don't know the number of VCPUs yet, so we defer this check to map_resources(). </p>

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00092">92</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;{</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    u64 __user *uaddr = (u64 __user *)attr-&gt;addr;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keyword">struct</span> vgic_dist *vgic = &amp;kvm-&gt;arch.vgic;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    phys_addr_t *addr_ptr, alignment, <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    u64 undef_value = <a class="code" href="vgic_8h.html#ac91699b3ab8faf4d5222d998fb64b033">VGIC_ADDR_UNDEF</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    u64 addr;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">/* Reading a redistributor region addr implies getting the index */</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    if (write || attr-&gt;attr == KVM_VGIC_V3_ADDR_TYPE_REDIST_REGION)</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">if</span> (get_user(addr, uaddr))</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <span class="keywordflow">return</span> -EFAULT;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">     * Since we can&#39;t hold config_lock while registering the redistributor</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">     * iodevs, take the slots_lock immediately.</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    mutex_lock(&amp;kvm-&gt;slots_lock);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">switch</span> (attr-&gt;attr) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">case</span> KVM_VGIC_V2_ADDR_TYPE_DIST:</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        r = <a class="code" href="vgic-kvm-device_8c.html#aabe1882d024943ea3d42bd37678f437f">vgic_check_type</a>(kvm, KVM_DEV_TYPE_ARM_VGIC_V2);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        addr_ptr = &amp;vgic-&gt;vgic_dist_base;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        alignment = SZ_4K;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a> = KVM_VGIC_V2_DIST_SIZE;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">case</span> KVM_VGIC_V2_ADDR_TYPE_CPU:</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        r = <a class="code" href="vgic-kvm-device_8c.html#aabe1882d024943ea3d42bd37678f437f">vgic_check_type</a>(kvm, KVM_DEV_TYPE_ARM_VGIC_V2);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        addr_ptr = &amp;vgic-&gt;vgic_cpu_base;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        alignment = SZ_4K;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a> = KVM_VGIC_V2_CPU_SIZE;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">case</span> KVM_VGIC_V3_ADDR_TYPE_DIST:</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        r = <a class="code" href="vgic-kvm-device_8c.html#aabe1882d024943ea3d42bd37678f437f">vgic_check_type</a>(kvm, KVM_DEV_TYPE_ARM_VGIC_V3);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        addr_ptr = &amp;vgic-&gt;vgic_dist_base;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        alignment = SZ_64K;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a> = KVM_VGIC_V3_DIST_SIZE;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">case</span> KVM_VGIC_V3_ADDR_TYPE_REDIST: {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keyword">struct </span>vgic_redist_region *rdreg;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        r = <a class="code" href="vgic-kvm-device_8c.html#aabe1882d024943ea3d42bd37678f437f">vgic_check_type</a>(kvm, KVM_DEV_TYPE_ARM_VGIC_V3);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">if</span> (r)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">if</span> (write) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            r = <a class="code" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0">vgic_v3_set_redist_base</a>(kvm, 0, addr, 0);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        rdreg = list_first_entry_or_null(&amp;vgic-&gt;rd_regions,</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                         <span class="keyword">struct</span> vgic_redist_region, list);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">if</span> (!rdreg)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            addr_ptr = &amp;undef_value;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            addr_ptr = &amp;rdreg-&gt;base;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">case</span> KVM_VGIC_V3_ADDR_TYPE_REDIST_REGION:</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keyword">struct </span>vgic_redist_region *rdreg;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        u8 index;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        r = <a class="code" href="vgic-kvm-device_8c.html#aabe1882d024943ea3d42bd37678f437f">vgic_check_type</a>(kvm, KVM_DEV_TYPE_ARM_VGIC_V3);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">if</span> (r)</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        index = addr &amp; <a class="code" href="vgic_8h.html#a780883d6e28680682a1dcd73b716eb78">KVM_VGIC_V3_RDIST_INDEX_MASK</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">if</span> (write) {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            gpa_t <a class="code" href="early__alloc_8c.html#a74f95eab64fb23344e30879684489f6f">base</a> = addr &amp; <a class="code" href="vgic_8h.html#a4b3d85861547e0e8a06a9d459b8bc1f5">KVM_VGIC_V3_RDIST_BASE_MASK</a>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            u32 count = FIELD_GET(<a class="code" href="vgic_8h.html#a39abc101c3e1c37577cc5140b5a6a0c5">KVM_VGIC_V3_RDIST_COUNT_MASK</a>, addr);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            u8 flags = FIELD_GET(<a class="code" href="vgic_8h.html#ae06d384979afe3ae035989ac1973f56a">KVM_VGIC_V3_RDIST_FLAGS_MASK</a>, addr);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="keywordflow">if</span> (!count || flags)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                r = -EINVAL;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                r = <a class="code" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0">vgic_v3_set_redist_base</a>(kvm, index,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                                <a class="code" href="early__alloc_8c.html#a74f95eab64fb23344e30879684489f6f">base</a>, count);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        rdreg = <a class="code" href="vgic-v3_8c.html#a35e1a5cb345dbcb7d61a55467b083702">vgic_v3_rdist_region_from_index</a>(kvm, index);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">if</span> (!rdreg) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            r = -ENOENT;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        addr = index;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        addr |= rdreg-&gt;base;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        addr |= (u64)rdreg-&gt;count &lt;&lt; <a class="code" href="vgic_8h.html#a5e7ccc903e0370ac380bc78fbfae3d2b">KVM_VGIC_V3_RDIST_COUNT_SHIFT</a>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        r = -ENODEV;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">if</span> (r)</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    mutex_lock(&amp;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">if</span> (write) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        r = <a class="code" href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32">vgic_check_iorange</a>(kvm, *addr_ptr, addr, alignment, <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">if</span> (!r)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            *addr_ptr = addr;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        addr = *addr_ptr;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    mutex_unlock(&amp;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;out:</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    mutex_unlock(&amp;kvm-&gt;slots_lock);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> (!r &amp;&amp; !write)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        r =  put_user(addr, uaddr);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div>
<div class="ttc" id="aearly__alloc_8c_html_a74f95eab64fb23344e30879684489f6f"><div class="ttname"><a href="early__alloc_8c.html#a74f95eab64fb23344e30879684489f6f">base</a></div><div class="ttdeci">static unsigned long base</div><div class="ttdef"><b>Definition:</b> <a href="early__alloc_8c_source.html#l00015">early_alloc.c:15</a></div></div>
<div class="ttc" id="agen-hyprel_8c_html_a854352f53b148adc24983a58a1866d66"><div class="ttname"><a href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> <a href="gen-hyprel_8c_source.html#l00133">gen-hyprel.c:133</a></div></div>
<div class="ttc" id="avgic-mmio-v3_8c_html_a4a15ce4d47dcc08ccabdac23699bd8e0"><div class="ttname"><a href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0">vgic_v3_set_redist_base</a></div><div class="ttdeci">int vgic_v3_set_redist_base(struct kvm *kvm, u32 index, u64 addr, u32 count)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v3_8c_source.html#l00928">vgic-mmio-v3.c:928</a></div></div>
<div class="ttc" id="avgic-v3_8c_html_a35e1a5cb345dbcb7d61a55467b083702"><div class="ttname"><a href="vgic-v3_8c.html#a35e1a5cb345dbcb7d61a55467b083702">vgic_v3_rdist_region_from_index</a></div><div class="ttdeci">struct vgic_redist_region * vgic_v3_rdist_region_from_index(struct kvm *kvm, u32 index)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00524">vgic-v3.c:524</a></div></div>
<div class="ttc" id="avgic_8h_html_a39abc101c3e1c37577cc5140b5a6a0c5"><div class="ttname"><a href="vgic_8h.html#a39abc101c3e1c37577cc5140b5a6a0c5">KVM_VGIC_V3_RDIST_COUNT_MASK</a></div><div class="ttdeci">#define KVM_VGIC_V3_RDIST_COUNT_MASK</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00093">vgic.h:93</a></div></div>
<div class="ttc" id="avgic_8h_html_a4b3d85861547e0e8a06a9d459b8bc1f5"><div class="ttname"><a href="vgic_8h.html#a4b3d85861547e0e8a06a9d459b8bc1f5">KVM_VGIC_V3_RDIST_BASE_MASK</a></div><div class="ttdeci">#define KVM_VGIC_V3_RDIST_BASE_MASK</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00092">vgic.h:92</a></div></div>
<div class="ttc" id="avgic_8h_html_a5e7ccc903e0370ac380bc78fbfae3d2b"><div class="ttname"><a href="vgic_8h.html#a5e7ccc903e0370ac380bc78fbfae3d2b">KVM_VGIC_V3_RDIST_COUNT_SHIFT</a></div><div class="ttdeci">#define KVM_VGIC_V3_RDIST_COUNT_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00094">vgic.h:94</a></div></div>
<div class="ttc" id="avgic_8h_html_a780883d6e28680682a1dcd73b716eb78"><div class="ttname"><a href="vgic_8h.html#a780883d6e28680682a1dcd73b716eb78">KVM_VGIC_V3_RDIST_INDEX_MASK</a></div><div class="ttdeci">#define KVM_VGIC_V3_RDIST_INDEX_MASK</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00089">vgic.h:89</a></div></div>
<div class="ttc" id="avgic_8h_html_ac91699b3ab8faf4d5222d998fb64b033"><div class="ttname"><a href="vgic_8h.html#ac91699b3ab8faf4d5222d998fb64b033">VGIC_ADDR_UNDEF</a></div><div class="ttdeci">#define VGIC_ADDR_UNDEF</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00014">vgic.h:14</a></div></div>
<div class="ttc" id="avgic_8h_html_ae06d384979afe3ae035989ac1973f56a"><div class="ttname"><a href="vgic_8h.html#ae06d384979afe3ae035989ac1973f56a">KVM_VGIC_V3_RDIST_FLAGS_MASK</a></div><div class="ttdeci">#define KVM_VGIC_V3_RDIST_FLAGS_MASK</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00090">vgic.h:90</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_ada63b20fef4ef1cc52730143652f9cb9_cgraph.png" border="0" usemap="#avgic-kvm-device_8c_ada63b20fef4ef1cc52730143652f9cb9_cgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_ada63b20fef4ef1cc52730143652f9cb9_cgraph" id="avgic-kvm-device_8c_ada63b20fef4ef1cc52730143652f9cb9_cgraph">
<area shape="rect" title=" " alt="" coords="5,260,127,287"/>
<area shape="rect" href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32" title=" " alt="" coords="1113,81,1263,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aabe1882d024943ea3d42bd37678f437f" title=" " alt="" coords="200,336,331,363"/>
<area shape="rect" href="vgic-v3_8c.html#a35e1a5cb345dbcb7d61a55467b083702" title=" " alt="" coords="413,315,569,357"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="175,235,356,261"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722" title=" " alt="" coords="404,133,577,174"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a78fb08dd130c0b8fc504e4725cd4f370" title=" " alt="" coords="865,209,1019,250"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ac2164da472839a705dfb81d3a3c477c5" title=" " alt="" coords="416,198,565,239"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a7c5d9bcbf29cb46bac8622d8bcc145b2" title=" " alt="" coords="633,198,784,239"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4bfec769cd9fe2bddb14200a6147fccd" title=" " alt="" coords="625,133,792,174"/>
<area shape="rect" href="kvm__main_8c.html#a0afe5ce3e9ff1105328b06ec985e3374" title=" " alt="" coords="848,280,1036,307"/>
<area shape="rect" href="vgic-v3_8c.html#a98c28ff2dc6b6965cef76e1be35233b1" title=" " alt="" coords="865,140,1019,167"/>
<area shape="rect" href="vgic-v3_8c.html#a481ec0006dfd5a7ea125b9913de7ba47" title=" " alt="" coords="856,331,1028,357"/>
<area shape="rect" href="kvm__main_8c.html#a75ccec7a81fef145fb3c3a3b5479a86f" title=" " alt="" coords="1121,284,1255,311"/>
<area shape="rect" href="vgic_8h.html#a01a6c3c40680e43017d7ba8ec7aadbac" title=" " alt="" coords="1339,157,1512,184"/>
<area shape="rect" href="vgic-v3_8c.html#a8bd03445507515b9722165814955f6fa" title=" " alt="" coords="1106,183,1270,209"/>
<area shape="rect" href="vgic_8h.html#ab5518fe56ac149d185ee8dc4f1cbedcb" title=" " alt="" coords="1092,335,1284,361"/>
<area shape="rect" href="kvm__main_8c.html#a103c02eb7ca545106f3130776c2a8897" title=" " alt="" coords="840,31,1044,57"/>
<area shape="rect" href="kvm__main_8c.html#a3089edf2c0e5790aab7e8ed723f34b5b" title=" " alt="" coords="1110,31,1266,57"/>
<area shape="rect" href="kvm__main_8c.html#aa6d7dea09a0b657f29e92f424e5d0633" title=" " alt="" coords="1332,5,1519,32"/>
<area shape="rect" href="vgic_8h.html#a1cdb698c97a7e5292716c24cd5a39d28" title=" " alt="" coords="1120,233,1256,260"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_ada63b20fef4ef1cc52730143652f9cb9_icgraph.png" border="0" usemap="#avgic-kvm-device_8c_ada63b20fef4ef1cc52730143652f9cb9_icgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_ada63b20fef4ef1cc52730143652f9cb9_icgraph" id="avgic-kvm-device_8c_ada63b20fef4ef1cc52730143652f9cb9_icgraph">
<area shape="rect" title=" " alt="" coords="403,81,524,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40" title=" " alt="" coords="184,56,355,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="184,107,355,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,56,136,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="6,107,135,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,157,135,184"/>
</map>
</div>

</div>
</div>
<a id="af0cfcc44a93abc13df9a7e364c21cf32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0cfcc44a93abc13df9a7e364c21cf32">&#9670;&nbsp;</a></span>vgic_check_iorange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_check_iorange </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">phys_addr_t&#160;</td>
          <td class="paramname"><em>ioaddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">phys_addr_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">phys_addr_t&#160;</td>
          <td class="paramname"><em>alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">phys_addr_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00017">17</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;{</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="vgic_8h.html#adf701ae1a62928f5d797c6297fcf0364">IS_VGIC_ADDR_UNDEF</a>(ioaddr))</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;        <span class="keywordflow">return</span> -EEXIST;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <span class="keywordflow">if</span> (!IS_ALIGNED(addr, alignment) || !IS_ALIGNED(<a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>, alignment))</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="keywordflow">if</span> (addr + <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a> &lt; addr)</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="keywordflow">if</span> (addr &amp; ~kvm_phys_mask(&amp;kvm-&gt;arch.mmu) ||</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        (addr + <a class="code" href="gen-hyprel_8c.html#a854352f53b148adc24983a58a1866d66">size</a>) &gt; kvm_phys_size(&amp;kvm-&gt;arch.mmu))</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        <span class="keywordflow">return</span> -E2BIG;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;}</div>
<div class="ttc" id="avgic_8h_html_adf701ae1a62928f5d797c6297fcf0364"><div class="ttname"><a href="vgic_8h.html#adf701ae1a62928f5d797c6297fcf0364">IS_VGIC_ADDR_UNDEF</a></div><div class="ttdeci">#define IS_VGIC_ADDR_UNDEF(_x)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00015">vgic.h:15</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_af0cfcc44a93abc13df9a7e364c21cf32_icgraph.png" border="0" usemap="#avgic-kvm-device_8c_af0cfcc44a93abc13df9a7e364c21cf32_icgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_af0cfcc44a93abc13df9a7e364c21cf32_icgraph" id="avgic-kvm-device_8c_af0cfcc44a93abc13df9a7e364c21cf32_icgraph">
<area shape="rect" title=" " alt="" coords="1604,122,1755,149"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a7808d55ba83902bd478febfc33334d5d" title=" " alt="" coords="1393,5,1556,47"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="442,97,563,123"/>
<area shape="rect" href="vgic-its_8c.html#a447c6440b22a131380c55c753c5b9004" title=" " alt="" coords="1410,122,1539,149"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a78fb08dd130c0b8fc504e4725cd4f370" title=" " alt="" coords="1155,139,1309,180"/>
<area shape="rect" href="vgic-v3_8c.html#a98c28ff2dc6b6965cef76e1be35233b1" title=" " alt="" coords="1397,227,1552,254"/>
<area shape="rect" href="arm_8c.html#a18aad074e49e8bedf16bff2daee6fc5d" title=" " alt="" coords="1119,13,1345,39"/>
<area shape="rect" href="arm_8c.html#a10224987f77e7370dd9f2b80352544ab" title=" " alt="" coords="901,13,1050,39"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40" title=" " alt="" coords="184,71,355,98"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="184,122,355,149"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,21,136,47"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,71,136,98"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="6,122,135,149"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,173,135,199"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="651,122,832,149"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a7c5d9bcbf29cb46bac8622d8bcc145b2" title=" " alt="" coords="1157,220,1307,261"/>
<area shape="rect" href="vgic-v3_8c.html#a8c2e4753883533516b45a2bbf9dad1ce" title=" " alt="" coords="1143,287,1321,314"/>
<area shape="rect" href="vgic-init_8c.html#ad052e8c724bfbb39c34281df23166a28" title=" " alt="" coords="900,239,1051,266"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722" title=" " alt="" coords="889,173,1062,215"/>
<area shape="rect" href="arm_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="655,237,827,263"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="403,237,603,263"/>
<area shape="rect" href="vgic-init_8c.html#a8411f235847aa56055a7a2fefce226c6" title=" " alt="" coords="880,291,1071,318"/>
<area shape="rect" href="arm_8c.html#a163f3db5fe1d973be2855f4a479a5c8c" title=" " alt="" coords="652,288,831,329"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="441,295,565,322"/>
</map>
</div>

</div>
</div>
<a id="aabe1882d024943ea3d42bd37678f437f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabe1882d024943ea3d42bd37678f437f">&#9670;&nbsp;</a></span>vgic_check_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int vgic_check_type </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type_needed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00037">37</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;{</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordflow">if</span> (kvm-&gt;arch.vgic.vgic_model != type_needed)</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <span class="keywordflow">return</span> -ENODEV;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_aabe1882d024943ea3d42bd37678f437f_icgraph.png" border="0" usemap="#avgic-kvm-device_8c_aabe1882d024943ea3d42bd37678f437f_icgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_aabe1882d024943ea3d42bd37678f437f_icgraph" id="avgic-kvm-device_8c_aabe1882d024943ea3d42bd37678f437f_icgraph">
<area shape="rect" title=" " alt="" coords="688,107,819,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a7808d55ba83902bd478febfc33334d5d" title=" " alt="" coords="477,19,640,61"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="498,107,619,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="231,157,401,184"/>
<area shape="rect" href="arm_8c.html#a18aad074e49e8bedf16bff2daee6fc5d" title=" " alt="" coords="203,16,429,43"/>
<area shape="rect" href="arm_8c.html#a10224987f77e7370dd9f2b80352544ab" title=" " alt="" coords="5,5,155,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40" title=" " alt="" coords="231,107,401,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="15,56,145,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="15,107,145,133"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="15,157,145,184"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="15,208,145,235"/>
</map>
</div>

</div>
</div>
<a id="a4a03bcf8c61b3397194a8fba37f06f1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a03bcf8c61b3397194a8fba37f06f1c">&#9670;&nbsp;</a></span>vgic_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int vgic_create </td>
          <td>(</td>
          <td class="paramtype">struct kvm_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00306">306</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;{</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="vgic-init_8c.html#a4ce1b5a14cd479b726e5451691380615">kvm_vgic_create</a>(dev-&gt;kvm, type);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div>
<div class="ttc" id="avgic-init_8c_html_a4ce1b5a14cd479b726e5451691380615"><div class="ttname"><a href="vgic-init_8c.html#a4ce1b5a14cd479b726e5451691380615">kvm_vgic_create</a></div><div class="ttdeci">int kvm_vgic_create(struct kvm *kvm, u32 type)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-init_8c_source.html#l00071">vgic-init.c:71</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_a4a03bcf8c61b3397194a8fba37f06f1c_cgraph.png" border="0" usemap="#avgic-kvm-device_8c_a4a03bcf8c61b3397194a8fba37f06f1c_cgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_a4a03bcf8c61b3397194a8fba37f06f1c_cgraph" id="avgic-kvm-device_8c_a4a03bcf8c61b3397194a8fba37f06f1c_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,103,57"/>
<area shape="rect" href="vgic-init_8c.html#a4ce1b5a14cd479b726e5451691380615" title=" " alt="" coords="151,31,284,57"/>
<area shape="rect" href="arm_8c.html#a02feef111fec875eb6382835eb2fb620" title=" " alt="" coords="340,5,457,32"/>
<area shape="rect" href="arm_8c.html#a29e56a77bf87bcd1b20ed8a14d9b2778" title=" " alt="" coords="332,56,465,83"/>
<area shape="rect" href="arm_8c.html#ac85c173d1f7208735e68f95eec2aac14" title=" " alt="" coords="513,31,624,57"/>
</map>
</div>

</div>
</div>
<a id="ae70ac9825f01ca17be4b35b173f4be62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae70ac9825f01ca17be4b35b173f4be62">&#9670;&nbsp;</a></span>vgic_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void vgic_destroy </td>
          <td>(</td>
          <td class="paramtype">struct kvm_device *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00311">311</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;{</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    kfree(dev);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa811a4f5550c34be51d9c98440824a40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa811a4f5550c34be51d9c98440824a40">&#9670;&nbsp;</a></span>vgic_get_common_attr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int vgic_get_common_attr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00285">285</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;{</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordtype">int</span> r = -ENXIO;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">switch</span> (attr-&gt;group) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_ADDR:</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        r = <a class="code" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9">kvm_vgic_addr</a>(dev-&gt;kvm, attr, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">return</span> (r == -ENODEV) ? -ENXIO : r;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_NR_IRQS: {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        u32 __user *uaddr = (u32 __user *)(<span class="keywordtype">long</span>)attr-&gt;addr;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        r = put_user(dev-&gt;kvm-&gt;arch.vgic.nr_spis +</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                 VGIC_NR_PRIVATE_IRQS, uaddr);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}</div>
<div class="ttc" id="avgic-kvm-device_8c_html_ada63b20fef4ef1cc52730143652f9cb9"><div class="ttname"><a href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9">kvm_vgic_addr</a></div><div class="ttdeci">static int kvm_vgic_addr(struct kvm *kvm, struct kvm_device_attr *attr, bool write)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00092">vgic-kvm-device.c:92</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_aa811a4f5550c34be51d9c98440824a40_cgraph.png" border="0" usemap="#avgic-kvm-device_8c_aa811a4f5550c34be51d9c98440824a40_cgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_aa811a4f5550c34be51d9c98440824a40_cgraph" id="avgic-kvm-device_8c_aa811a4f5550c34be51d9c98440824a40_cgraph">
<area shape="rect" title=" " alt="" coords="5,260,176,287"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="224,260,345,287"/>
<area shape="rect" href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32" title=" " alt="" coords="1331,81,1482,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aabe1882d024943ea3d42bd37678f437f" title=" " alt="" coords="419,336,549,363"/>
<area shape="rect" href="vgic-v3_8c.html#a35e1a5cb345dbcb7d61a55467b083702" title=" " alt="" coords="631,315,787,357"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="393,235,575,261"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722" title=" " alt="" coords="623,133,796,174"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a78fb08dd130c0b8fc504e4725cd4f370" title=" " alt="" coords="1083,209,1238,250"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ac2164da472839a705dfb81d3a3c477c5" title=" " alt="" coords="635,198,784,239"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a7c5d9bcbf29cb46bac8622d8bcc145b2" title=" " alt="" coords="852,198,1003,239"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4bfec769cd9fe2bddb14200a6147fccd" title=" " alt="" coords="844,133,1011,174"/>
<area shape="rect" href="kvm__main_8c.html#a0afe5ce3e9ff1105328b06ec985e3374" title=" " alt="" coords="1067,280,1255,307"/>
<area shape="rect" href="vgic-v3_8c.html#a98c28ff2dc6b6965cef76e1be35233b1" title=" " alt="" coords="1083,140,1238,167"/>
<area shape="rect" href="vgic-v3_8c.html#a481ec0006dfd5a7ea125b9913de7ba47" title=" " alt="" coords="1075,331,1247,357"/>
<area shape="rect" href="kvm__main_8c.html#a75ccec7a81fef145fb3c3a3b5479a86f" title=" " alt="" coords="1339,284,1474,311"/>
<area shape="rect" href="vgic_8h.html#a01a6c3c40680e43017d7ba8ec7aadbac" title=" " alt="" coords="1557,157,1731,184"/>
<area shape="rect" href="vgic-v3_8c.html#a8bd03445507515b9722165814955f6fa" title=" " alt="" coords="1325,183,1489,209"/>
<area shape="rect" href="vgic_8h.html#ab5518fe56ac149d185ee8dc4f1cbedcb" title=" " alt="" coords="1311,335,1503,361"/>
<area shape="rect" href="kvm__main_8c.html#a103c02eb7ca545106f3130776c2a8897" title=" " alt="" coords="1059,31,1263,57"/>
<area shape="rect" href="kvm__main_8c.html#a3089edf2c0e5790aab7e8ed723f34b5b" title=" " alt="" coords="1329,31,1485,57"/>
<area shape="rect" href="kvm__main_8c.html#aa6d7dea09a0b657f29e92f424e5d0633" title=" " alt="" coords="1551,5,1737,32"/>
<area shape="rect" href="vgic_8h.html#a1cdb698c97a7e5292716c24cd5a39d28" title=" " alt="" coords="1339,233,1475,260"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_aa811a4f5550c34be51d9c98440824a40_icgraph.png" border="0" usemap="#avgic-kvm-device_8c_aa811a4f5550c34be51d9c98440824a40_icgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_aa811a4f5550c34be51d9c98440824a40_icgraph" id="avgic-kvm-device_8c_aa811a4f5550c34be51d9c98440824a40_icgraph">
<area shape="rect" title=" " alt="" coords="184,31,355,57"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,56,136,83"/>
</map>
</div>

</div>
</div>
<a id="a6aadc4684bf7ca54e4a3d91f9e10310c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6aadc4684bf7ca54e4a3d91f9e10310c">&#9670;&nbsp;</a></span>vgic_set_common_attr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int vgic_set_common_attr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00209">209</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;{</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">switch</span> (attr-&gt;group) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_ADDR:</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        r = <a class="code" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9">kvm_vgic_addr</a>(dev-&gt;kvm, attr, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">return</span> (r == -ENODEV) ? -ENXIO : r;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_NR_IRQS: {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        u32 __user *uaddr = (u32 __user *)(<span class="keywordtype">long</span>)attr-&gt;addr;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        u32 val;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">if</span> (get_user(val, uaddr))</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="keywordflow">return</span> -EFAULT;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">         * We require:</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">         * - at least 32 SPIs on top of the 16 SGIs and 16 PPIs</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">         * - at most 1024 interrupts</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">         * - a multiple of 32 interrupts</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">if</span> (val &lt; (VGIC_NR_PRIVATE_IRQS + 32) ||</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            val &gt; VGIC_MAX_RESERVED ||</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            (val &amp; 31))</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        mutex_lock(&amp;dev-&gt;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordflow">if</span> (vgic_ready(dev-&gt;kvm) || dev-&gt;kvm-&gt;arch.vgic.nr_spis)</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            ret = -EBUSY;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            dev-&gt;kvm-&gt;arch.vgic.nr_spis =</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                val - VGIC_NR_PRIVATE_IRQS;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        mutex_unlock(&amp;dev-&gt;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_CTRL: {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordflow">switch</span> (attr-&gt;attr) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_CTRL_INIT:</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            mutex_lock(&amp;dev-&gt;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            r = <a class="code" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57">vgic_init</a>(dev-&gt;kvm);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            mutex_unlock(&amp;dev-&gt;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_SAVE_PENDING_TABLES:</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">             * OK, this one isn&#39;t common at all, but we</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">             * want to handle all control group attributes</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">             * in a single place.</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vgic-kvm-device_8c.html#aabe1882d024943ea3d42bd37678f437f">vgic_check_type</a>(dev-&gt;kvm, KVM_DEV_TYPE_ARM_VGIC_V3))</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            mutex_lock(&amp;dev-&gt;kvm-&gt;lock);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="arm_8c.html#a02feef111fec875eb6382835eb2fb620">lock_all_vcpus</a>(dev-&gt;kvm)) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                mutex_unlock(&amp;dev-&gt;kvm-&gt;lock);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                <span class="keywordflow">return</span> -EBUSY;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            mutex_lock(&amp;dev-&gt;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            r = <a class="code" href="vgic-v3_8c.html#af01c534c811a6787db01c7508a333d7c">vgic_v3_save_pending_tables</a>(dev-&gt;kvm);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            mutex_unlock(&amp;dev-&gt;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <a class="code" href="arm_8c.html#a29e56a77bf87bcd1b20ed8a14d9b2778">unlock_all_vcpus</a>(dev-&gt;kvm);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            mutex_unlock(&amp;dev-&gt;kvm-&gt;lock);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;}</div>
<div class="ttc" id="aarm_8c_html_a02feef111fec875eb6382835eb2fb620"><div class="ttname"><a href="arm_8c.html#a02feef111fec875eb6382835eb2fb620">lock_all_vcpus</a></div><div class="ttdeci">bool lock_all_vcpus(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="arm_8c_source.html#l01773">arm.c:1773</a></div></div>
<div class="ttc" id="aarm_8c_html_a29e56a77bf87bcd1b20ed8a14d9b2778"><div class="ttname"><a href="arm_8c.html#a29e56a77bf87bcd1b20ed8a14d9b2778">unlock_all_vcpus</a></div><div class="ttdeci">void unlock_all_vcpus(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="arm_8c_source.html#l01765">arm.c:1765</a></div></div>
<div class="ttc" id="avgic-init_8c_html_a39a12fe5ed5534efda33bb215a320a57"><div class="ttname"><a href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57">vgic_init</a></div><div class="ttdeci">int vgic_init(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-init_8c_source.html#l00262">vgic-init.c:262</a></div></div>
<div class="ttc" id="avgic-v3_8c_html_af01c534c811a6787db01c7508a333d7c"><div class="ttname"><a href="vgic-v3_8c.html#af01c534c811a6787db01c7508a333d7c">vgic_v3_save_pending_tables</a></div><div class="ttdeci">int vgic_v3_save_pending_tables(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-v3_8c_source.html#l00377">vgic-v3.c:377</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_a6aadc4684bf7ca54e4a3d91f9e10310c_cgraph.png" border="0" usemap="#avgic-kvm-device_8c_a6aadc4684bf7ca54e4a3d91f9e10310c_cgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_a6aadc4684bf7ca54e4a3d91f9e10310c_cgraph" id="avgic-kvm-device_8c_a6aadc4684bf7ca54e4a3d91f9e10310c_cgraph">
<area shape="rect" title=" " alt="" coords="5,431,176,457"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="248,304,369,331"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aabe1882d024943ea3d42bd37678f437f" title=" " alt="" coords="467,355,597,381"/>
<area shape="rect" href="arm_8c.html#a02feef111fec875eb6382835eb2fb620" title=" " alt="" coords="250,405,367,432"/>
<area shape="rect" href="arm_8c.html#a29e56a77bf87bcd1b20ed8a14d9b2778" title=" " alt="" coords="242,456,375,483"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="270,616,347,643"/>
<area shape="rect" href="vgic-v3_8c.html#af01c534c811a6787db01c7508a333d7c" title=" " alt="" coords="224,937,393,978"/>
<area shape="rect" href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32" title=" " alt="" coords="1417,284,1567,311"/>
<area shape="rect" href="vgic-v3_8c.html#a35e1a5cb345dbcb7d61a55467b083702" title=" " alt="" coords="684,57,840,98"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="441,195,623,221"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722" title=" " alt="" coords="675,122,849,163"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a78fb08dd130c0b8fc504e4725cd4f370" title=" " alt="" coords="1169,238,1323,279"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ac2164da472839a705dfb81d3a3c477c5" title=" " alt="" coords="687,187,837,229"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a7c5d9bcbf29cb46bac8622d8bcc145b2" title=" " alt="" coords="923,123,1074,165"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4bfec769cd9fe2bddb14200a6147fccd" title=" " alt="" coords="915,41,1082,82"/>
<area shape="rect" href="kvm__main_8c.html#a0afe5ce3e9ff1105328b06ec985e3374" title=" " alt="" coords="1152,81,1340,108"/>
<area shape="rect" href="vgic-v3_8c.html#a98c28ff2dc6b6965cef76e1be35233b1" title=" " alt="" coords="1169,184,1323,211"/>
<area shape="rect" href="vgic-v3_8c.html#a481ec0006dfd5a7ea125b9913de7ba47" title=" " alt="" coords="1160,132,1332,159"/>
<area shape="rect" href="kvm__main_8c.html#a75ccec7a81fef145fb3c3a3b5479a86f" title=" " alt="" coords="1425,81,1559,108"/>
<area shape="rect" href="vgic_8h.html#a01a6c3c40680e43017d7ba8ec7aadbac" title=" " alt="" coords="1643,208,1816,235"/>
<area shape="rect" href="vgic-v3_8c.html#a8bd03445507515b9722165814955f6fa" title=" " alt="" coords="1410,233,1574,260"/>
<area shape="rect" href="vgic_8h.html#ab5518fe56ac149d185ee8dc4f1cbedcb" title=" " alt="" coords="1396,132,1588,159"/>
<area shape="rect" href="kvm__main_8c.html#a103c02eb7ca545106f3130776c2a8897" title=" " alt="" coords="1144,31,1348,57"/>
<area shape="rect" href="kvm__main_8c.html#a3089edf2c0e5790aab7e8ed723f34b5b" title=" " alt="" coords="1414,31,1570,57"/>
<area shape="rect" href="kvm__main_8c.html#aa6d7dea09a0b657f29e92f424e5d0633" title=" " alt="" coords="1636,5,1823,32"/>
<area shape="rect" href="vgic_8h.html#a1cdb698c97a7e5292716c24cd5a39d28" title=" " alt="" coords="1424,335,1560,361"/>
<area shape="rect" href="arm_8c.html#ac85c173d1f7208735e68f95eec2aac14" title=" " alt="" coords="477,405,587,432"/>
<area shape="rect" href="vgic-init_8c.html#a0f9be5cc88c88f6c0180c53b72818d3b" title=" " alt="" coords="460,557,604,584"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="441,609,623,650"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e" title=" " alt="" coords="1678,569,1781,596"/>
<area shape="rect" href="vgic-init_8c.html#a2eee0060a3bdcd2a9e8fe1451a3a3fc2" title=" " alt="" coords="445,456,619,483"/>
<area shape="rect" href="vgic-debug_8c.html#a42534d23071b4f3c441c5f82f9e5c1ce" title=" " alt="" coords="470,776,594,803"/>
<area shape="rect" href="vgic-its_8c.html#afd97b5d03d2b30ae4481443cdea2e739" title=" " alt="" coords="457,827,607,869"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a839b15883ba8f9de35a03ffce32fdf7f" title=" " alt="" coords="901,509,1096,536"/>
<area shape="rect" href="vgic-v4_8c.html#a802a906ad744a75b5af33bbd6b31237c" title=" " alt="" coords="482,725,582,752"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="685,616,839,643"/>
<area shape="rect" href="irqchip_8c.html#a5ae37186e6e6d1594767f83df8bab64a" title=" " alt="" coords="916,620,1081,647"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="923,569,1075,596"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="1160,569,1332,596"/>
<area shape="rect" href="vgic-irqfd_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1437,569,1547,596"/>
<area shape="rect" href="vgic-v2_8c.html#a4e8ee3d5f7c8fadbf0a645df67a1c5a2" title=" " alt="" coords="701,405,823,432"/>
<area shape="rect" href="vgic-v3_8c.html#abe9a2245dfa0d76d61c99b60f714a513" title=" " alt="" coords="701,456,823,483"/>
<area shape="rect" href="vgic-v4_8c.html#af99c2f70dd91a57879b3a2f583e49a4a" title=" " alt="" coords="671,835,853,861"/>
<area shape="rect" href="vgic-v4_8c.html#ac805e466fa8f454112c11904ef8d41ce" title=" " alt="" coords="692,725,832,752"/>
<area shape="rect" href="vgic-v4_8c.html#ac22161596c9858cc700bab08c03fc422" title=" " alt="" coords="905,835,1093,861"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1185,835,1307,861"/>
<area shape="rect" href="vgic-v3_8c.html#a62e3f2f0c8415cb67dc4117d1976f686" title=" " alt="" coords="476,893,588,920"/>
<area shape="rect" href="vgic-v3_8c.html#aedeeaec282ec4507c45c8580a6cd3ff8" title=" " alt="" coords="468,1045,596,1072"/>
<area shape="rect" href="vgic-v4_8c.html#a783964868bc841487af2392e07060c48" title=" " alt="" coords="447,944,617,971"/>
<area shape="rect" href="vgic_8h.html#abb188bad2393aaaf40808283d5565b8a" title=" " alt="" coords="449,995,615,1021"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_a6aadc4684bf7ca54e4a3d91f9e10310c_icgraph.png" border="0" usemap="#avgic-kvm-device_8c_a6aadc4684bf7ca54e4a3d91f9e10310c_icgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_a6aadc4684bf7ca54e4a3d91f9e10310c_icgraph" id="avgic-kvm-device_8c_a6aadc4684bf7ca54e4a3d91f9e10310c_icgraph">
<area shape="rect" title=" " alt="" coords="183,31,353,57"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="5,5,135,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="5,56,135,83"/>
</map>
</div>

</div>
</div>
<a id="a78d5c53181a4adf55a58d8277fb751af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78d5c53181a4adf55a58d8277fb751af">&#9670;&nbsp;</a></span>vgic_v2_attr_regs_access()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int vgic_v2_attr_regs_access </td>
          <td>(</td>
          <td class="paramtype">struct kvm_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_write</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>vgic_v2_attr_regs_access - allows user space to access VGIC v2 state</p>
<p>@dev: kvm device handle @attr: kvm device attribute @is_write: true if userspace is writing a register </p>

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00358">358</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;{</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    u32 __user *uaddr = (u32 __user *)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)attr-&gt;addr;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keyword">struct </span><a class="code" href="structvgic__reg__attr.html">vgic_reg_attr</a> reg_attr;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    gpa_t <a class="code" href="structvgic__reg__attr.html#a19ed06c96175609f3d98858c1eceec59">addr</a>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    u32 val;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    ret = <a class="code" href="vgic-kvm-device_8c.html#aa6e244467a63a98cec7698162df49572">vgic_v2_parse_attr</a>(dev, attr, &amp;reg_attr);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    vcpu = reg_attr.vcpu;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    addr = reg_attr.addr;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">if</span> (is_write)</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keywordflow">if</span> (get_user(val, uaddr))</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            <span class="keywordflow">return</span> -EFAULT;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    mutex_lock(&amp;dev-&gt;kvm-&gt;lock);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="arm_8c.html#a02feef111fec875eb6382835eb2fb620">lock_all_vcpus</a>(dev-&gt;kvm)) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        mutex_unlock(&amp;dev-&gt;kvm-&gt;lock);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">return</span> -EBUSY;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    mutex_lock(&amp;dev-&gt;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    ret = <a class="code" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57">vgic_init</a>(dev-&gt;kvm);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">switch</span> (attr-&gt;group) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_CPU_REGS:</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        ret = <a class="code" href="vgic-mmio-v2_8c.html#a47e01844cf58952fedaee31f59b759cc">vgic_v2_cpuif_uaccess</a>(vcpu, is_write, addr, &amp;val);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_DIST_REGS:</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        ret = <a class="code" href="vgic-mmio-v2_8c.html#a172aa5542cf86982d7d2fc0c9948fa26">vgic_v2_dist_uaccess</a>(vcpu, is_write, addr, &amp;val);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        ret = -EINVAL;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;out:</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    mutex_unlock(&amp;dev-&gt;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <a class="code" href="arm_8c.html#a29e56a77bf87bcd1b20ed8a14d9b2778">unlock_all_vcpus</a>(dev-&gt;kvm);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    mutex_unlock(&amp;dev-&gt;kvm-&gt;lock);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">if</span> (!ret &amp;&amp; !is_write)</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        ret = put_user(val, uaddr);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;}</div>
<div class="ttc" id="astructvgic__reg__attr_html"><div class="ttname"><a href="structvgic__reg__attr.html">vgic_reg_attr</a></div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00169">vgic.h:169</a></div></div>
<div class="ttc" id="astructvgic__reg__attr_html_a19ed06c96175609f3d98858c1eceec59"><div class="ttname"><a href="structvgic__reg__attr.html#a19ed06c96175609f3d98858c1eceec59">vgic_reg_attr::addr</a></div><div class="ttdeci">gpa_t addr</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00171">vgic.h:171</a></div></div>
<div class="ttc" id="avgic-kvm-device_8c_html_aa6e244467a63a98cec7698162df49572"><div class="ttname"><a href="vgic-kvm-device_8c.html#aa6e244467a63a98cec7698162df49572">vgic_v2_parse_attr</a></div><div class="ttdeci">int vgic_v2_parse_attr(struct kvm_device *dev, struct kvm_device_attr *attr, struct vgic_reg_attr *reg_attr)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00338">vgic-kvm-device.c:338</a></div></div>
<div class="ttc" id="avgic-mmio-v2_8c_html_a172aa5542cf86982d7d2fc0c9948fa26"><div class="ttname"><a href="vgic-mmio-v2_8c.html#a172aa5542cf86982d7d2fc0c9948fa26">vgic_v2_dist_uaccess</a></div><div class="ttdeci">int vgic_v2_dist_uaccess(struct kvm_vcpu *vcpu, bool is_write, int offset, u32 *val)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v2_8c_source.html#l00551">vgic-mmio-v2.c:551</a></div></div>
<div class="ttc" id="avgic-mmio-v2_8c_html_a47e01844cf58952fedaee31f59b759cc"><div class="ttname"><a href="vgic-mmio-v2_8c.html#a47e01844cf58952fedaee31f59b759cc">vgic_v2_cpuif_uaccess</a></div><div class="ttdeci">int vgic_v2_cpuif_uaccess(struct kvm_vcpu *vcpu, bool is_write, int offset, u32 *val)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v2_8c_source.html#l00539">vgic-mmio-v2.c:539</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_a78d5c53181a4adf55a58d8277fb751af_cgraph.png" border="0" usemap="#avgic-kvm-device_8c_a78d5c53181a4adf55a58d8277fb751af_cgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_a78d5c53181a4adf55a58d8277fb751af_cgraph" id="avgic-kvm-device_8c_a78d5c53181a4adf55a58d8277fb751af_cgraph">
<area shape="rect" title=" " alt="" coords="5,379,193,405"/>
<area shape="rect" href="arm_8c.html#a02feef111fec875eb6382835eb2fb620" title=" " alt="" coords="268,113,385,140"/>
<area shape="rect" href="arm_8c.html#a29e56a77bf87bcd1b20ed8a14d9b2778" title=" " alt="" coords="260,211,393,237"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="288,353,365,380"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a47e01844cf58952fedaee31f59b759cc" title=" " alt="" coords="241,404,412,431"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a172aa5542cf86982d7d2fc0c9948fa26" title=" " alt="" coords="245,455,408,481"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa6e244467a63a98cec7698162df49572" title=" " alt="" coords="254,505,399,532"/>
<area shape="rect" href="arm_8c.html#ac85c173d1f7208735e68f95eec2aac14" title=" " alt="" coords="495,67,606,93"/>
<area shape="rect" href="vgic-init_8c.html#a0f9be5cc88c88f6c0180c53b72818d3b" title=" " alt="" coords="479,236,623,263"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="460,287,641,329"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e" title=" " alt="" coords="2071,496,2174,523"/>
<area shape="rect" href="vgic-init_8c.html#a2eee0060a3bdcd2a9e8fe1451a3a3fc2" title=" " alt="" coords="463,404,638,431"/>
<area shape="rect" href="vgic-debug_8c.html#a42534d23071b4f3c441c5f82f9e5c1ce" title=" " alt="" coords="489,455,613,481"/>
<area shape="rect" href="vgic-its_8c.html#afd97b5d03d2b30ae4481443cdea2e739" title=" " alt="" coords="476,506,625,547"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a839b15883ba8f9de35a03ffce32fdf7f" title=" " alt="" coords="1139,572,1333,599"/>
<area shape="rect" href="vgic-v4_8c.html#a802a906ad744a75b5af33bbd6b31237c" title=" " alt="" coords="501,117,601,144"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="703,295,858,321"/>
<area shape="rect" href="irqchip_8c.html#a5ae37186e6e6d1594767f83df8bab64a" title=" " alt="" coords="923,299,1088,325"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="929,248,1081,275"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="1150,248,1322,275"/>
<area shape="rect" href="vgic-irqfd_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1421,383,1530,409"/>
<area shape="rect" href="vgic-irqfd_8c.html#aaba342a8b6308d37735bc46dbf9a6828" title=" " alt="" coords="1407,224,1544,251"/>
<area shape="rect" href="vgic-irqfd_8c.html#a93415dbe2d5c7166c8f3f91be7c5d5da" title=" " alt="" coords="1620,420,1767,447"/>
<area shape="rect" href="vgic-its_8c.html#a53bf66e96dae9553e637fa69e8835365" title=" " alt="" coords="1620,369,1767,396"/>
<area shape="rect" href="vgic-its_8c.html#a352c8627ccf81a8154ae2275c7d50659" title=" " alt="" coords="1819,253,1987,294"/>
<area shape="rect" href="vgic-its_8c.html#ad62375be0591178764e98b79cd7217bf" title=" " alt="" coords="1827,369,1980,396"/>
<area shape="rect" href="vgic-its_8c.html#a94bbb30efc49ad5494a7f4b1410dbe01" title=" " alt="" coords="1842,420,1965,447"/>
<area shape="rect" href="vgic-its_8c.html#ab8e3bef933af0cc51b05259d801be26d" title=" " alt="" coords="2041,260,2204,287"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="2072,155,2173,181"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="2037,315,2208,341"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="2256,155,2379,181"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="2427,129,2635,156"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="2454,180,2607,207"/>
<area shape="rect" href="vgic-its_8c.html#a3fe23d687675cef46a95e36cf14d04e1" title=" " alt="" coords="2047,369,2198,396"/>
<area shape="rect" href="vgic_8c.html#a87038ce452e0054b853c10ccbbcc78a4" title=" " alt="" coords="1617,219,1769,245"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="1853,151,1954,177"/>
<area shape="rect" href="vgic-init_8c.html#a3c860e1d043352d9a02f4780b58e5af6" title=" " alt="" coords="1848,49,1959,76"/>
<area shape="rect" href="vgic_8c.html#a19d9c44a40cc76ccbd25bd8e0ec38a08" title=" " alt="" coords="1817,201,1989,228"/>
<area shape="rect" href="vgic-v2_8c.html#a4e8ee3d5f7c8fadbf0a645df67a1c5a2" title=" " alt="" coords="719,455,842,481"/>
<area shape="rect" href="vgic-v3_8c.html#abe9a2245dfa0d76d61c99b60f714a513" title=" " alt="" coords="719,404,842,431"/>
<area shape="rect" href="vgic-v4_8c.html#af99c2f70dd91a57879b3a2f583e49a4a" title=" " alt="" coords="689,24,872,51"/>
<area shape="rect" href="vgic-v4_8c.html#ac805e466fa8f454112c11904ef8d41ce" title=" " alt="" coords="711,117,851,144"/>
<area shape="rect" href="vgic-v4_8c.html#ac22161596c9858cc700bab08c03fc422" title=" " alt="" coords="1381,5,1569,32"/>
<area shape="rect" href="vgic-mmio_8c.html#ae999933ae5e2cc6f0d3910bbe33386ba" title=" " alt="" coords="497,623,605,649"/>
<area shape="rect" href="vgic-mmio_8c.html#ac361bf23479dea11a94946fb36408b29" title=" " alt="" coords="709,623,853,649"/>
<area shape="rect" href="vgic-mmio_8c.html#a9ae5f9a11d1a32e0fddb9409399b1d4a" title=" " alt="" coords="707,673,855,700"/>
<area shape="rect" href="vgic-mmio_8c.html#af645443cfc0bc59f41881570759adcb5" title=" " alt="" coords="920,648,1091,675"/>
<area shape="rect" href="vgic-mmio_8c.html#a296fe3adbc190bcdb6fde5c708193b03" title=" " alt="" coords="1182,685,1290,712"/>
<area shape="rect" href="vgic-mmio_8c.html#a340c255c8c139816f1ce975f0bd15c64" title=" " alt="" coords="1149,635,1323,661"/>
<area shape="rect" href="vgic-mmio_8c.html#abed6aa21152b65b854d1f9513c4ce647" title=" " alt="" coords="1420,635,1531,661"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_a78d5c53181a4adf55a58d8277fb751af_icgraph.png" border="0" usemap="#avgic-kvm-device_8c_a78d5c53181a4adf55a58d8277fb751af_icgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_a78d5c53181a4adf55a58d8277fb751af_icgraph" id="avgic-kvm-device_8c_a78d5c53181a4adf55a58d8277fb751af_icgraph">
<area shape="rect" title=" " alt="" coords="184,31,372,57"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="6,56,135,83"/>
</map>
</div>

</div>
</div>
<a id="a3bb10b83ef8325ecaa3671e9fe9c528c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bb10b83ef8325ecaa3671e9fe9c528c">&#9670;&nbsp;</a></span>vgic_v2_get_attr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int vgic_v2_get_attr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00428">428</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;{</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">switch</span> (attr-&gt;group) {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_DIST_REGS:</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_CPU_REGS:</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af">vgic_v2_attr_regs_access</a>(dev, attr, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40">vgic_get_common_attr</a>(dev, attr);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;}</div>
<div class="ttc" id="avgic-kvm-device_8c_html_a78d5c53181a4adf55a58d8277fb751af"><div class="ttname"><a href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af">vgic_v2_attr_regs_access</a></div><div class="ttdeci">static int vgic_v2_attr_regs_access(struct kvm_device *dev, struct kvm_device_attr *attr, bool is_write)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00358">vgic-kvm-device.c:358</a></div></div>
<div class="ttc" id="avgic-kvm-device_8c_html_aa811a4f5550c34be51d9c98440824a40"><div class="ttname"><a href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40">vgic_get_common_attr</a></div><div class="ttdeci">static int vgic_get_common_attr(struct kvm_device *dev, struct kvm_device_attr *attr)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00285">vgic-kvm-device.c:285</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_a3bb10b83ef8325ecaa3671e9fe9c528c_cgraph.png" border="0" usemap="#avgic-kvm-device_8c_a3bb10b83ef8325ecaa3671e9fe9c528c_cgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_a3bb10b83ef8325ecaa3671e9fe9c528c_cgraph" id="avgic-kvm-device_8c_a3bb10b83ef8325ecaa3671e9fe9c528c_cgraph">
<area shape="rect" title=" " alt="" coords="5,673,136,700"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40" title=" " alt="" coords="193,425,363,452"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="184,699,372,725"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="445,165,566,192"/>
<area shape="rect" href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32" title=" " alt="" coords="1607,191,1757,217"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aabe1882d024943ea3d42bd37678f437f" title=" " alt="" coords="671,115,801,141"/>
<area shape="rect" href="vgic-v3_8c.html#a35e1a5cb345dbcb7d61a55467b083702" title=" " alt="" coords="895,27,1051,69"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="645,165,827,192"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722" title=" " alt="" coords="886,93,1059,134"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a78fb08dd130c0b8fc504e4725cd4f370" title=" " alt="" coords="1373,209,1527,250"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ac2164da472839a705dfb81d3a3c477c5" title=" " alt="" coords="898,158,1047,199"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a7c5d9bcbf29cb46bac8622d8bcc145b2" title=" " alt="" coords="1131,97,1281,138"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4bfec769cd9fe2bddb14200a6147fccd" title=" " alt="" coords="1123,14,1289,55"/>
<area shape="rect" href="kvm__main_8c.html#a0afe5ce3e9ff1105328b06ec985e3374" title=" " alt="" coords="1356,157,1544,184"/>
<area shape="rect" href="vgic-v3_8c.html#a98c28ff2dc6b6965cef76e1be35233b1" title=" " alt="" coords="1373,56,1527,83"/>
<area shape="rect" href="vgic-v3_8c.html#a481ec0006dfd5a7ea125b9913de7ba47" title=" " alt="" coords="1364,107,1536,133"/>
<area shape="rect" href="vgic_8h.html#a01a6c3c40680e43017d7ba8ec7aadbac" title=" " alt="" coords="1812,81,1985,108"/>
<area shape="rect" href="vgic-v3_8c.html#a8bd03445507515b9722165814955f6fa" title=" " alt="" coords="1600,107,1764,133"/>
<area shape="rect" href="kvm__main_8c.html#a103c02eb7ca545106f3130776c2a8897" title=" " alt="" coords="1348,5,1552,32"/>
<area shape="rect" href="vgic_8h.html#a1cdb698c97a7e5292716c24cd5a39d28" title=" " alt="" coords="1614,241,1750,268"/>
<area shape="rect" href="arm_8c.html#a02feef111fec875eb6382835eb2fb620" title=" " alt="" coords="447,749,564,776"/>
<area shape="rect" href="arm_8c.html#a29e56a77bf87bcd1b20ed8a14d9b2778" title=" " alt="" coords="439,648,572,675"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="467,544,544,571"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a47e01844cf58952fedaee31f59b759cc" title=" " alt="" coords="420,800,591,827"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a172aa5542cf86982d7d2fc0c9948fa26" title=" " alt="" coords="424,851,587,877"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa6e244467a63a98cec7698162df49572" title=" " alt="" coords="433,699,578,725"/>
<area shape="rect" href="arm_8c.html#ac85c173d1f7208735e68f95eec2aac14" title=" " alt="" coords="681,763,791,789"/>
<area shape="rect" href="vgic-init_8c.html#a0f9be5cc88c88f6c0180c53b72818d3b" title=" " alt="" coords="664,376,808,403"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="645,478,827,519"/>
<area shape="rect" href="vgic-init_8c.html#a2eee0060a3bdcd2a9e8fe1451a3a3fc2" title=" " alt="" coords="649,595,823,621"/>
<area shape="rect" href="vgic-debug_8c.html#a42534d23071b4f3c441c5f82f9e5c1ce" title=" " alt="" coords="674,544,798,571"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e" title=" " alt="" coords="921,376,1024,403"/>
<area shape="rect" href="vgic-its_8c.html#afd97b5d03d2b30ae4481443cdea2e739" title=" " alt="" coords="661,697,811,738"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a839b15883ba8f9de35a03ffce32fdf7f" title=" " alt="" coords="639,427,833,453"/>
<area shape="rect" href="vgic-v4_8c.html#a802a906ad744a75b5af33bbd6b31237c" title=" " alt="" coords="686,645,786,672"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="895,485,1050,512"/>
<area shape="rect" href="irqchip_8c.html#a5ae37186e6e6d1594767f83df8bab64a" title=" " alt="" coords="1123,460,1289,487"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="1130,511,1282,537"/>
<area shape="rect" href="vgic-irqfd_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="1364,511,1536,537"/>
<area shape="rect" href="vgic-v2_8c.html#a4e8ee3d5f7c8fadbf0a645df67a1c5a2" title=" " alt="" coords="911,595,1034,621"/>
<area shape="rect" href="vgic-v3_8c.html#abe9a2245dfa0d76d61c99b60f714a513" title=" " alt="" coords="911,544,1034,571"/>
<area shape="rect" href="vgic-v4_8c.html#af99c2f70dd91a57879b3a2f583e49a4a" title=" " alt="" coords="881,696,1064,723"/>
<area shape="rect" href="vgic-v4_8c.html#ac805e466fa8f454112c11904ef8d41ce" title=" " alt="" coords="903,645,1043,672"/>
<area shape="rect" href="vgic-v4_8c.html#ac22161596c9858cc700bab08c03fc422" title=" " alt="" coords="1112,696,1300,723"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1389,696,1511,723"/>
<area shape="rect" href="vgic-mmio_8c.html#ae999933ae5e2cc6f0d3910bbe33386ba" title=" " alt="" coords="682,825,790,852"/>
<area shape="rect" href="vgic-mmio_8c.html#ac361bf23479dea11a94946fb36408b29" title=" " alt="" coords="901,800,1045,827"/>
<area shape="rect" href="vgic-mmio_8c.html#a9ae5f9a11d1a32e0fddb9409399b1d4a" title=" " alt="" coords="899,851,1047,877"/>
<area shape="rect" href="vgic-mmio_8c.html#af645443cfc0bc59f41881570759adcb5" title=" " alt="" coords="1121,825,1291,852"/>
<area shape="rect" href="vgic-mmio_8c.html#a296fe3adbc190bcdb6fde5c708193b03" title=" " alt="" coords="1396,825,1504,852"/>
</map>
</div>

</div>
</div>
<a id="a1901d2a2905a73826ea1287212aef248"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1901d2a2905a73826ea1287212aef248">&#9670;&nbsp;</a></span>vgic_v2_has_attr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int vgic_v2_has_attr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00440">440</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;{</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordflow">switch</span> (attr-&gt;group) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_ADDR:</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">switch</span> (attr-&gt;attr) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">case</span> KVM_VGIC_V2_ADDR_TYPE_DIST:</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="keywordflow">case</span> KVM_VGIC_V2_ADDR_TYPE_CPU:</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_DIST_REGS:</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_CPU_REGS:</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="vgic-mmio-v2_8c.html#a34fc7617393fc3b19fd3ff9220da2cbb">vgic_v2_has_attr_regs</a>(dev, attr);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_NR_IRQS:</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_CTRL:</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keywordflow">switch</span> (attr-&gt;attr) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_CTRL_INIT:</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;}</div>
<div class="ttc" id="avgic-mmio-v2_8c_html_a34fc7617393fc3b19fd3ff9220da2cbb"><div class="ttname"><a href="vgic-mmio-v2_8c.html#a34fc7617393fc3b19fd3ff9220da2cbb">vgic_v2_has_attr_regs</a></div><div class="ttdeci">int vgic_v2_has_attr_regs(struct kvm_device *dev, struct kvm_device_attr *attr)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v2_8c_source.html#l00497">vgic-mmio-v2.c:497</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa6e244467a63a98cec7698162df49572"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6e244467a63a98cec7698162df49572">&#9670;&nbsp;</a></span>vgic_v2_parse_attr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v2_parse_attr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structvgic__reg__attr.html">vgic_reg_attr</a> *&#160;</td>
          <td class="paramname"><em>reg_attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00338">338</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;{</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordtype">int</span> cpuid;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    cpuid = FIELD_GET(KVM_DEV_ARM_VGIC_CPUID_MASK, attr-&gt;attr);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    reg_attr-&gt;<a class="code" href="structvgic__reg__attr.html#a0f43e17045dc6b13404b4759e0fccad1">vcpu</a> = kvm_get_vcpu_by_id(dev-&gt;kvm, cpuid);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    reg_attr-&gt;<a class="code" href="structvgic__reg__attr.html#a19ed06c96175609f3d98858c1eceec59">addr</a> = attr-&gt;attr &amp; KVM_DEV_ARM_VGIC_OFFSET_MASK;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div>
<div class="ttc" id="astructvgic__reg__attr_html_a0f43e17045dc6b13404b4759e0fccad1"><div class="ttname"><a href="structvgic__reg__attr.html#a0f43e17045dc6b13404b4759e0fccad1">vgic_reg_attr::vcpu</a></div><div class="ttdeci">struct kvm_vcpu * vcpu</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00170">vgic.h:170</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_aa6e244467a63a98cec7698162df49572_icgraph.png" border="0" usemap="#avgic-kvm-device_8c_aa6e244467a63a98cec7698162df49572_icgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_aa6e244467a63a98cec7698162df49572_icgraph" id="avgic-kvm-device_8c_aa6e244467a63a98cec7698162df49572_icgraph">
<area shape="rect" title=" " alt="" coords="420,56,565,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="184,31,372,57"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a34fc7617393fc3b19fd3ff9220da2cbb" title=" " alt="" coords="195,81,361,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c" title=" " alt="" coords="6,56,135,83"/>
</map>
</div>

</div>
</div>
<a id="a37a5c9125b0504633553497ae8c7ce9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37a5c9125b0504633553497ae8c7ce9c">&#9670;&nbsp;</a></span>vgic_v2_set_attr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int vgic_v2_set_attr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00416">416</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;{</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">switch</span> (attr-&gt;group) {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_DIST_REGS:</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_CPU_REGS:</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af">vgic_v2_attr_regs_access</a>(dev, attr, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c">vgic_set_common_attr</a>(dev, attr);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;}</div>
<div class="ttc" id="avgic-kvm-device_8c_html_a6aadc4684bf7ca54e4a3d91f9e10310c"><div class="ttname"><a href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c">vgic_set_common_attr</a></div><div class="ttdeci">static int vgic_set_common_attr(struct kvm_device *dev, struct kvm_device_attr *attr)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00209">vgic-kvm-device.c:209</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_a37a5c9125b0504633553497ae8c7ce9c_cgraph.png" border="0" usemap="#avgic-kvm-device_8c_a37a5c9125b0504633553497ae8c7ce9c_cgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_a37a5c9125b0504633553497ae8c7ce9c_cgraph" id="avgic-kvm-device_8c_a37a5c9125b0504633553497ae8c7ce9c_cgraph">
<area shape="rect" title=" " alt="" coords="5,810,135,837"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="191,726,362,753"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a78d5c53181a4adf55a58d8277fb751af" title=" " alt="" coords="183,861,371,887"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="443,162,565,189"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aabe1882d024943ea3d42bd37678f437f" title=" " alt="" coords="669,61,800,87"/>
<area shape="rect" href="arm_8c.html#a02feef111fec875eb6382835eb2fb620" title=" " alt="" coords="445,861,563,887"/>
<area shape="rect" href="arm_8c.html#a29e56a77bf87bcd1b20ed8a14d9b2778" title=" " alt="" coords="437,810,571,837"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="465,726,543,753"/>
<area shape="rect" href="vgic-v3_8c.html#af01c534c811a6787db01c7508a333d7c" title=" " alt="" coords="419,399,589,440"/>
<area shape="rect" href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32" title=" " alt="" coords="1589,203,1740,230"/>
<area shape="rect" href="vgic-v3_8c.html#a35e1a5cb345dbcb7d61a55467b083702" title=" " alt="" coords="893,5,1049,47"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="644,162,825,189"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722" title=" " alt="" coords="885,123,1058,164"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a78fb08dd130c0b8fc504e4725cd4f370" title=" " alt="" coords="1363,36,1518,77"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ac2164da472839a705dfb81d3a3c477c5" title=" " alt="" coords="897,188,1046,229"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a7c5d9bcbf29cb46bac8622d8bcc145b2" title=" " alt="" coords="1129,188,1280,229"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4bfec769cd9fe2bddb14200a6147fccd" title=" " alt="" coords="1121,123,1288,164"/>
<area shape="rect" href="kvm__main_8c.html#a0afe5ce3e9ff1105328b06ec985e3374" title=" " alt="" coords="1347,153,1535,179"/>
<area shape="rect" href="vgic-v3_8c.html#a98c28ff2dc6b6965cef76e1be35233b1" title=" " alt="" coords="1363,203,1518,230"/>
<area shape="rect" href="vgic-v3_8c.html#a481ec0006dfd5a7ea125b9913de7ba47" title=" " alt="" coords="1355,102,1527,129"/>
<area shape="rect" href="vgic-v3_8c.html#a8bd03445507515b9722165814955f6fa" title=" " alt="" coords="1583,123,1747,150"/>
<area shape="rect" href="vgic_8h.html#a1cdb698c97a7e5292716c24cd5a39d28" title=" " alt="" coords="1597,43,1733,70"/>
<area shape="rect" href="arm_8c.html#ac85c173d1f7208735e68f95eec2aac14" title=" " alt="" coords="679,945,790,971"/>
<area shape="rect" href="vgic-init_8c.html#a0f9be5cc88c88f6c0180c53b72818d3b" title=" " alt="" coords="663,558,807,585"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="644,609,825,651"/>
<area shape="rect" href="vgic-init_8c.html#a2eee0060a3bdcd2a9e8fe1451a3a3fc2" title=" " alt="" coords="647,894,822,921"/>
<area shape="rect" href="vgic-debug_8c.html#a42534d23071b4f3c441c5f82f9e5c1ce" title=" " alt="" coords="673,726,797,753"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e" title=" " alt="" coords="920,726,1023,753"/>
<area shape="rect" href="vgic-its_8c.html#afd97b5d03d2b30ae4481443cdea2e739" title=" " alt="" coords="660,828,809,869"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a839b15883ba8f9de35a03ffce32fdf7f" title=" " alt="" coords="637,675,832,702"/>
<area shape="rect" href="vgic-v4_8c.html#a802a906ad744a75b5af33bbd6b31237c" title=" " alt="" coords="685,507,785,534"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="894,617,1049,643"/>
<area shape="rect" href="irqchip_8c.html#a5ae37186e6e6d1594767f83df8bab64a" title=" " alt="" coords="1122,642,1287,669"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="1129,591,1281,618"/>
<area shape="rect" href="vgic-v2_8c.html#a4e8ee3d5f7c8fadbf0a645df67a1c5a2" title=" " alt="" coords="910,907,1033,934"/>
<area shape="rect" href="vgic-v3_8c.html#abe9a2245dfa0d76d61c99b60f714a513" title=" " alt="" coords="910,857,1033,883"/>
<area shape="rect" href="vgic-v4_8c.html#af99c2f70dd91a57879b3a2f583e49a4a" title=" " alt="" coords="880,431,1063,458"/>
<area shape="rect" href="vgic-v4_8c.html#ac805e466fa8f454112c11904ef8d41ce" title=" " alt="" coords="901,507,1041,534"/>
<area shape="rect" href="vgic-v4_8c.html#ac22161596c9858cc700bab08c03fc422" title=" " alt="" coords="1111,431,1299,458"/>
<area shape="rect" href="vgic-v3_8c.html#a62e3f2f0c8415cb67dc4117d1976f686" title=" " alt="" coords="679,406,791,433"/>
<area shape="rect" href="vgic-v3_8c.html#aedeeaec282ec4507c45c8580a6cd3ff8" title=" " alt="" coords="671,457,799,483"/>
<area shape="rect" href="vgic-v4_8c.html#a783964868bc841487af2392e07060c48" title=" " alt="" coords="649,305,820,331"/>
<area shape="rect" href="vgic_8h.html#abb188bad2393aaaf40808283d5565b8a" title=" " alt="" coords="651,355,818,382"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a47e01844cf58952fedaee31f59b759cc" title=" " alt="" coords="419,962,589,989"/>
<area shape="rect" href="vgic-mmio-v2_8c.html#a172aa5542cf86982d7d2fc0c9948fa26" title=" " alt="" coords="423,911,585,938"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa6e244467a63a98cec7698162df49572" title=" " alt="" coords="431,1013,577,1039"/>
<area shape="rect" href="vgic-mmio_8c.html#ae999933ae5e2cc6f0d3910bbe33386ba" title=" " alt="" coords="681,995,789,1022"/>
<area shape="rect" href="vgic-mmio_8c.html#ac361bf23479dea11a94946fb36408b29" title=" " alt="" coords="899,970,1043,997"/>
<area shape="rect" href="vgic-mmio_8c.html#a9ae5f9a11d1a32e0fddb9409399b1d4a" title=" " alt="" coords="897,1021,1045,1047"/>
<area shape="rect" href="vgic-mmio_8c.html#af645443cfc0bc59f41881570759adcb5" title=" " alt="" coords="1119,995,1290,1022"/>
</map>
</div>

</div>
</div>
<a id="a176e49a1162579b332c8a68ab035e981"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a176e49a1162579b332c8a68ab035e981">&#9670;&nbsp;</a></span>vgic_v3_attr_regs_access()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int vgic_v3_attr_regs_access </td>
          <td>(</td>
          <td class="paramtype">struct kvm_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_write</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00508">508</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;{</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keyword">struct </span><a class="code" href="structvgic__reg__attr.html">vgic_reg_attr</a> reg_attr;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    gpa_t <a class="code" href="structvgic__reg__attr.html#a19ed06c96175609f3d98858c1eceec59">addr</a>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordtype">bool</span> uaccess;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    u32 val;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    ret = <a class="code" href="vgic-kvm-device_8c.html#ae16a58808d1a84f4f378a2ff4343d200">vgic_v3_parse_attr</a>(dev, attr, &amp;reg_attr);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    vcpu = reg_attr.vcpu;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    addr = reg_attr.addr;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">switch</span> (attr-&gt;group) {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_CPU_SYSREGS:</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="comment">/* Sysregs uaccess is performed by the sysreg handling code */</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        uaccess = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        uaccess = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">if</span> (uaccess &amp;&amp; is_write) {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        u32 __user *uaddr = (u32 __user *)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)attr-&gt;addr;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="keywordflow">if</span> (get_user(val, uaddr))</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            <span class="keywordflow">return</span> -EFAULT;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    mutex_lock(&amp;dev-&gt;kvm-&gt;lock);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="arm_8c.html#a02feef111fec875eb6382835eb2fb620">lock_all_vcpus</a>(dev-&gt;kvm)) {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        mutex_unlock(&amp;dev-&gt;kvm-&gt;lock);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">return</span> -EBUSY;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    }</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    mutex_lock(&amp;dev-&gt;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordflow">if</span> (unlikely(!vgic_initialized(dev-&gt;kvm))) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        ret = -EBUSY;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">switch</span> (attr-&gt;group) {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_DIST_REGS:</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        ret = <a class="code" href="vgic-mmio-v3_8c.html#a744d3ea323c85b7c3528ccc1a3fd6180">vgic_v3_dist_uaccess</a>(vcpu, is_write, addr, &amp;val);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_REDIST_REGS:</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        ret = <a class="code" href="vgic-mmio-v3_8c.html#a6f0acf3ee53ee539acba5f1bce55cea2">vgic_v3_redist_uaccess</a>(vcpu, is_write, addr, &amp;val);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_CPU_SYSREGS:</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        ret = <a class="code" href="vgic_8h.html#ae6c5f6437d5d194daa8d1485c3dfe27b">vgic_v3_cpu_sysregs_uaccess</a>(vcpu, attr, is_write);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_LEVEL_INFO: {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> info, intid;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        info = (attr-&gt;attr &amp; KVM_DEV_ARM_VGIC_LINE_LEVEL_INFO_MASK) &gt;&gt;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            KVM_DEV_ARM_VGIC_LINE_LEVEL_INFO_SHIFT;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keywordflow">if</span> (info == VGIC_LEVEL_INFO_LINE_LEVEL) {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            intid = attr-&gt;attr &amp;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                KVM_DEV_ARM_VGIC_LINE_LEVEL_INTID_MASK;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            ret = <a class="code" href="vgic-mmio-v3_8c.html#ac1a045e1729c5781a9c7c03e359da717">vgic_v3_line_level_info_uaccess</a>(vcpu, is_write,</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                                  intid, &amp;val);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            ret = -EINVAL;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        ret = -EINVAL;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    }</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;out:</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    mutex_unlock(&amp;dev-&gt;kvm-&gt;arch.config_lock);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <a class="code" href="arm_8c.html#a29e56a77bf87bcd1b20ed8a14d9b2778">unlock_all_vcpus</a>(dev-&gt;kvm);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    mutex_unlock(&amp;dev-&gt;kvm-&gt;lock);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">if</span> (!ret &amp;&amp; uaccess &amp;&amp; !is_write) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        u32 __user *uaddr = (u32 __user *)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)attr-&gt;addr;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        ret = put_user(val, uaddr);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;}</div>
<div class="ttc" id="avgic-kvm-device_8c_html_ae16a58808d1a84f4f378a2ff4343d200"><div class="ttname"><a href="vgic-kvm-device_8c.html#ae16a58808d1a84f4f378a2ff4343d200">vgic_v3_parse_attr</a></div><div class="ttdeci">int vgic_v3_parse_attr(struct kvm_device *dev, struct kvm_device_attr *attr, struct vgic_reg_attr *reg_attr)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00474">vgic-kvm-device.c:474</a></div></div>
<div class="ttc" id="avgic-mmio-v3_8c_html_a6f0acf3ee53ee539acba5f1bce55cea2"><div class="ttname"><a href="vgic-mmio-v3_8c.html#a6f0acf3ee53ee539acba5f1bce55cea2">vgic_v3_redist_uaccess</a></div><div class="ttdeci">int vgic_v3_redist_uaccess(struct kvm_vcpu *vcpu, bool is_write, int offset, u32 *val)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v3_8c_source.html#l01106">vgic-mmio-v3.c:1106</a></div></div>
<div class="ttc" id="avgic-mmio-v3_8c_html_a744d3ea323c85b7c3528ccc1a3fd6180"><div class="ttname"><a href="vgic-mmio-v3_8c.html#a744d3ea323c85b7c3528ccc1a3fd6180">vgic_v3_dist_uaccess</a></div><div class="ttdeci">int vgic_v3_dist_uaccess(struct kvm_vcpu *vcpu, bool is_write, int offset, u32 *val)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v3_8c_source.html#l01095">vgic-mmio-v3.c:1095</a></div></div>
<div class="ttc" id="avgic-mmio-v3_8c_html_ac1a045e1729c5781a9c7c03e359da717"><div class="ttname"><a href="vgic-mmio-v3_8c.html#ac1a045e1729c5781a9c7c03e359da717">vgic_v3_line_level_info_uaccess</a></div><div class="ttdeci">int vgic_v3_line_level_info_uaccess(struct kvm_vcpu *vcpu, bool is_write, u32 intid, u32 *val)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v3_8c_source.html#l01117">vgic-mmio-v3.c:1117</a></div></div>
<div class="ttc" id="avgic_8h_html_ae6c5f6437d5d194daa8d1485c3dfe27b"><div class="ttname"><a href="vgic_8h.html#ae6c5f6437d5d194daa8d1485c3dfe27b">vgic_v3_cpu_sysregs_uaccess</a></div><div class="ttdeci">int vgic_v3_cpu_sysregs_uaccess(struct kvm_vcpu *vcpu, struct kvm_device_attr *attr, bool is_write)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-sys-reg-v3_8c_source.html#l00351">vgic-sys-reg-v3.c:351</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_a176e49a1162579b332c8a68ab035e981_cgraph.png" border="0" usemap="#avgic-kvm-device_8c_a176e49a1162579b332c8a68ab035e981_cgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_a176e49a1162579b332c8a68ab035e981_cgraph" id="avgic-kvm-device_8c_a176e49a1162579b332c8a68ab035e981_cgraph">
<area shape="rect" title=" " alt="" coords="5,173,193,200"/>
<area shape="rect" href="arm_8c.html#a02feef111fec875eb6382835eb2fb620" title=" " alt="" coords="270,56,387,83"/>
<area shape="rect" href="arm_8c.html#a29e56a77bf87bcd1b20ed8a14d9b2778" title=" " alt="" coords="262,5,395,32"/>
<area shape="rect" href="vgic_8h.html#ae6c5f6437d5d194daa8d1485c3dfe27b" title=" " alt="" coords="249,107,408,149"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a744d3ea323c85b7c3528ccc1a3fd6180" title=" " alt="" coords="247,224,410,251"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ac1a045e1729c5781a9c7c03e359da717" title=" " alt="" coords="257,287,400,329"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ae16a58808d1a84f4f378a2ff4343d200" title=" " alt="" coords="256,385,401,412"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a6f0acf3ee53ee539acba5f1bce55cea2" title=" " alt="" coords="241,173,416,200"/>
<area shape="rect" href="arm_8c.html#ac85c173d1f7208735e68f95eec2aac14" title=" " alt="" coords="494,5,605,32"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a0bc09e2deb4b346bbe5a850747711fbc" title=" " alt="" coords="507,56,591,83"/>
<area shape="rect" href="sys__regs_8c.html#a228e61f9390e36b563ab837dfcf03ae2" title=" " alt="" coords="464,157,635,184"/>
<area shape="rect" href="sys__regs_8c.html#ab29b04a8d34d81f0cce231f94feba038" title=" " alt="" coords="464,107,635,133"/>
<area shape="rect" href="sys__regs_8c.html#af212e5241f19483aede7d85e43a93b42" title=" " alt="" coords="694,107,842,133"/>
<area shape="rect" href="sys__regs_8h.html#acb0346a28ca0b3fd59d3c815d4d683a1" title=" " alt="" coords="693,157,843,184"/>
<area shape="rect" href="sys__regs_8c.html#ac41b37ff19cd3eda5658080a3eb8c558" title=" " alt="" coords="939,157,1052,184"/>
<area shape="rect" href="sys__regs_8h.html#a1288fc38e8c8e5e2bbf3cfeb9291cef9" title=" " alt="" coords="937,107,1053,133"/>
<area shape="rect" href="sys__regs_8h.html#a5478d1284365aa547695b6889e4a05ef" title=" " alt="" coords="1204,107,1279,133"/>
<area shape="rect" href="sys__regs_8c.html#a000b8bb9ea7247fee0c7acc84817d960" title=" " alt="" coords="1174,157,1309,184"/>
<area shape="rect" href="sys__regs_8h.html#aba3abb7cabe45542d03289fe25af9526" title=" " alt="" coords="1393,107,1513,133"/>
<area shape="rect" href="sys__regs_8h.html#ad57e201c718d43223fb293d770c1ef3b" title=" " alt="" coords="1177,56,1305,83"/>
<area shape="rect" href="sys__regs_8h.html#a95e3e5f281cf82d91e6a522ee3acb4cc" title=" " alt="" coords="901,56,1089,83"/>
<area shape="rect" href="vgic-mmio_8c.html#ae999933ae5e2cc6f0d3910bbe33386ba" title=" " alt="" coords="495,216,603,243"/>
<area shape="rect" href="vgic-mmio_8c.html#ac361bf23479dea11a94946fb36408b29" title=" " alt="" coords="696,208,840,235"/>
<area shape="rect" href="vgic-mmio_8c.html#a9ae5f9a11d1a32e0fddb9409399b1d4a" title=" " alt="" coords="694,259,842,285"/>
<area shape="rect" href="vgic-mmio_8c.html#af645443cfc0bc59f41881570759adcb5" title=" " alt="" coords="910,233,1081,260"/>
<area shape="rect" href="vgic-mmio_8c.html#a296fe3adbc190bcdb6fde5c708193b03" title=" " alt="" coords="1187,208,1295,235"/>
<area shape="rect" href="vgic-mmio_8c.html#a340c255c8c139816f1ce975f0bd15c64" title=" " alt="" coords="1155,259,1328,285"/>
<area shape="rect" href="vgic-mmio_8c.html#abed6aa21152b65b854d1f9513c4ce647" title=" " alt="" coords="1398,259,1509,285"/>
<area shape="rect" href="vgic-mmio_8c.html#a74de2333a13c0e99b703d65cab9666b3" title=" " alt="" coords="479,287,619,329"/>
<area shape="rect" href="vgic-mmio_8c.html#a28964cd75c2483a30f9743d35507bbce" title=" " alt="" coords="477,353,621,394"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="717,360,819,387"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="717,309,819,336"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="945,360,1045,387"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="1174,360,1309,387"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="914,309,1077,336"/>
<area shape="rect" href="vgic_8c.html#a7d513558f0ea4ecbc012c98b3522f797" title=" " alt="" coords="1177,309,1305,336"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="683,436,853,463"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="934,461,1057,488"/>
<area shape="rect" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247" title=" " alt="" coords="924,512,1067,539"/>
<area shape="rect" href="arm_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1137,411,1345,437"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1165,461,1318,488"/>
<area shape="rect" href="vgic_8h.html#a1109d873011f89a4acb4fd461f9f0a45" title=" " alt="" coords="1183,512,1299,539"/>
<area shape="rect" href="arm_8c.html#a0be215e1642483c65818bd994b13a421" title=" " alt="" coords="472,419,627,445"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_a176e49a1162579b332c8a68ab035e981_icgraph.png" border="0" usemap="#avgic-kvm-device_8c_a176e49a1162579b332c8a68ab035e981_icgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_a176e49a1162579b332c8a68ab035e981_icgraph" id="avgic-kvm-device_8c_a176e49a1162579b332c8a68ab035e981_icgraph">
<area shape="rect" title=" " alt="" coords="184,31,372,57"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,56,135,83"/>
</map>
</div>

</div>
</div>
<a id="ad2effaec26f6d2af865ed45b7dbc64f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2effaec26f6d2af865ed45b7dbc64f1">&#9670;&nbsp;</a></span>vgic_v3_get_attr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int vgic_v3_get_attr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00612">612</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;{</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordflow">switch</span> (attr-&gt;group) {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_DIST_REGS:</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_REDIST_REGS:</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_CPU_SYSREGS:</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_LEVEL_INFO:</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="vgic-kvm-device_8c.html#a176e49a1162579b332c8a68ab035e981">vgic_v3_attr_regs_access</a>(dev, attr, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40">vgic_get_common_attr</a>(dev, attr);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;}</div>
<div class="ttc" id="avgic-kvm-device_8c_html_a176e49a1162579b332c8a68ab035e981"><div class="ttname"><a href="vgic-kvm-device_8c.html#a176e49a1162579b332c8a68ab035e981">vgic_v3_attr_regs_access</a></div><div class="ttdeci">static int vgic_v3_attr_regs_access(struct kvm_device *dev, struct kvm_device_attr *attr, bool is_write)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00508">vgic-kvm-device.c:508</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_ad2effaec26f6d2af865ed45b7dbc64f1_cgraph.png" border="0" usemap="#avgic-kvm-device_8c_ad2effaec26f6d2af865ed45b7dbc64f1_cgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_ad2effaec26f6d2af865ed45b7dbc64f1_cgraph" id="avgic-kvm-device_8c_ad2effaec26f6d2af865ed45b7dbc64f1_cgraph">
<area shape="rect" title=" " alt="" coords="5,591,136,617"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aa811a4f5550c34be51d9c98440824a40" title=" " alt="" coords="193,461,363,488"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a176e49a1162579b332c8a68ab035e981" title=" " alt="" coords="184,616,372,643"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="447,320,568,347"/>
<area shape="rect" href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32" title=" " alt="" coords="1572,131,1723,157"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aabe1882d024943ea3d42bd37678f437f" title=" " alt="" coords="668,371,799,397"/>
<area shape="rect" href="vgic-v3_8c.html#a35e1a5cb345dbcb7d61a55467b083702" title=" " alt="" coords="881,327,1037,369"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="643,269,824,296"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722" title=" " alt="" coords="872,145,1045,186"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a78fb08dd130c0b8fc504e4725cd4f370" title=" " alt="" coords="1346,203,1501,245"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ac2164da472839a705dfb81d3a3c477c5" title=" " alt="" coords="884,262,1033,303"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a7c5d9bcbf29cb46bac8622d8bcc145b2" title=" " alt="" coords="1112,79,1263,121"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4bfec769cd9fe2bddb14200a6147fccd" title=" " alt="" coords="1104,145,1271,186"/>
<area shape="rect" href="kvm__main_8c.html#a0afe5ce3e9ff1105328b06ec985e3374" title=" " alt="" coords="1329,51,1517,77"/>
<area shape="rect" href="vgic-v3_8c.html#a98c28ff2dc6b6965cef76e1be35233b1" title=" " alt="" coords="1346,152,1501,179"/>
<area shape="rect" href="vgic-v3_8c.html#a481ec0006dfd5a7ea125b9913de7ba47" title=" " alt="" coords="1337,101,1509,128"/>
<area shape="rect" href="vgic-v3_8c.html#a8bd03445507515b9722165814955f6fa" title=" " alt="" coords="1565,181,1729,208"/>
<area shape="rect" href="vgic_8h.html#a1cdb698c97a7e5292716c24cd5a39d28" title=" " alt="" coords="1579,232,1715,259"/>
<area shape="rect" href="arm_8c.html#a02feef111fec875eb6382835eb2fb620" title=" " alt="" coords="449,692,566,719"/>
<area shape="rect" href="arm_8c.html#a29e56a77bf87bcd1b20ed8a14d9b2778" title=" " alt="" coords="441,743,574,769"/>
<area shape="rect" href="vgic_8h.html#ae6c5f6437d5d194daa8d1485c3dfe27b" title=" " alt="" coords="428,794,587,835"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a744d3ea323c85b7c3528ccc1a3fd6180" title=" " alt="" coords="426,641,589,668"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ac1a045e1729c5781a9c7c03e359da717" title=" " alt="" coords="436,474,579,515"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ae16a58808d1a84f4f378a2ff4343d200" title=" " alt="" coords="435,540,580,567"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a6f0acf3ee53ee539acba5f1bce55cea2" title=" " alt="" coords="420,591,595,617"/>
<area shape="rect" href="arm_8c.html#ac85c173d1f7208735e68f95eec2aac14" title=" " alt="" coords="678,696,789,723"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a0bc09e2deb4b346bbe5a850747711fbc" title=" " alt="" coords="691,852,775,879"/>
<area shape="rect" href="sys__regs_8c.html#a228e61f9390e36b563ab837dfcf03ae2" title=" " alt="" coords="648,801,819,828"/>
<area shape="rect" href="sys__regs_8c.html#ab29b04a8d34d81f0cce231f94feba038" title=" " alt="" coords="648,751,819,777"/>
<area shape="rect" href="sys__regs_8c.html#af212e5241f19483aede7d85e43a93b42" title=" " alt="" coords="885,801,1033,828"/>
<area shape="rect" href="sys__regs_8h.html#acb0346a28ca0b3fd59d3c815d4d683a1" title=" " alt="" coords="883,751,1034,777"/>
<area shape="rect" href="sys__regs_8c.html#ac41b37ff19cd3eda5658080a3eb8c558" title=" " alt="" coords="1131,751,1244,777"/>
<area shape="rect" href="sys__regs_8h.html#a1288fc38e8c8e5e2bbf3cfeb9291cef9" title=" " alt="" coords="1129,801,1245,828"/>
<area shape="rect" href="sys__regs_8h.html#ad57e201c718d43223fb293d770c1ef3b" title=" " alt="" coords="1359,751,1487,777"/>
<area shape="rect" href="sys__regs_8h.html#a95e3e5f281cf82d91e6a522ee3acb4cc" title=" " alt="" coords="1093,700,1281,727"/>
<area shape="rect" href="vgic-mmio_8c.html#ae999933ae5e2cc6f0d3910bbe33386ba" title=" " alt="" coords="679,629,787,656"/>
<area shape="rect" href="vgic-mmio_8c.html#ac361bf23479dea11a94946fb36408b29" title=" " alt="" coords="887,633,1031,660"/>
<area shape="rect" href="vgic-mmio_8c.html#a9ae5f9a11d1a32e0fddb9409399b1d4a" title=" " alt="" coords="885,583,1033,609"/>
<area shape="rect" href="vgic-mmio_8c.html#af645443cfc0bc59f41881570759adcb5" title=" " alt="" coords="1102,608,1273,635"/>
<area shape="rect" href="vgic-mmio_8c.html#a74de2333a13c0e99b703d65cab9666b3" title=" " alt="" coords="663,487,803,529"/>
<area shape="rect" href="vgic-mmio_8c.html#a28964cd75c2483a30f9743d35507bbce" title=" " alt="" coords="661,422,805,463"/>
<area shape="rect" href="vgic_8c.html#a7f38a266ef3def3202e7e04aa40fd516" title=" " alt="" coords="908,444,1009,471"/>
<area shape="rect" href="vgic_8c.html#ac055f2fa0d463d3d287ee975bb80a9c5" title=" " alt="" coords="908,495,1009,521"/>
<area shape="rect" href="vgic_8c.html#afeaf79de85450ed5fb52dbd7bd8c6617" title=" " alt="" coords="1137,444,1237,471"/>
<area shape="rect" href="vgic_8h.html#a43d39599f0fd2d973c5af8d6045e0f91" title=" " alt="" coords="1356,419,1491,445"/>
<area shape="rect" href="vgic_8c.html#affa1a20a5bd9d67dc546c1ccaace3406" title=" " alt="" coords="1106,495,1269,521"/>
<area shape="rect" href="vgic_8c.html#a1e208ac24f54fa95ba74797758c5b84c" title=" " alt="" coords="873,393,1044,420"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1126,343,1249,369"/>
<area shape="rect" href="vgic_8c.html#a10a21280f37c620b743df86980f6d247" title=" " alt="" coords="1116,292,1259,319"/>
<area shape="rect" href="arm_8c.html#a0be215e1642483c65818bd994b13a421" title=" " alt="" coords="656,553,811,580"/>
</map>
</div>

</div>
</div>
<a id="a8f2f7c3eb1c4a6403c66c2b1e6e4ddc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f2f7c3eb1c4a6403c66c2b1e6e4ddc2">&#9670;&nbsp;</a></span>vgic_v3_has_attr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int vgic_v3_has_attr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00626">626</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;{</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">switch</span> (attr-&gt;group) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_ADDR:</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="keywordflow">switch</span> (attr-&gt;attr) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="keywordflow">case</span> KVM_VGIC_V3_ADDR_TYPE_DIST:</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="keywordflow">case</span> KVM_VGIC_V3_ADDR_TYPE_REDIST:</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="keywordflow">case</span> KVM_VGIC_V3_ADDR_TYPE_REDIST_REGION:</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        }</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_DIST_REGS:</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_REDIST_REGS:</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_CPU_SYSREGS:</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="vgic-mmio-v3_8c.html#ab7ab2fb9c9721de227541e7cc6da7e3e">vgic_v3_has_attr_regs</a>(dev, attr);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_NR_IRQS:</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_LEVEL_INFO: {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="keywordflow">if</span> (((attr-&gt;attr &amp; KVM_DEV_ARM_VGIC_LINE_LEVEL_INFO_MASK) &gt;&gt;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;              KVM_DEV_ARM_VGIC_LINE_LEVEL_INFO_SHIFT) ==</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;              VGIC_LEVEL_INFO_LINE_LEVEL)</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_CTRL:</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="keywordflow">switch</span> (attr-&gt;attr) {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_CTRL_INIT:</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_SAVE_PENDING_TABLES:</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        }</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    }</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">return</span> -ENXIO;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;}</div>
<div class="ttc" id="avgic-mmio-v3_8c_html_ab7ab2fb9c9721de227541e7cc6da7e3e"><div class="ttname"><a href="vgic-mmio-v3_8c.html#ab7ab2fb9c9721de227541e7cc6da7e3e">vgic_v3_has_attr_regs</a></div><div class="ttdeci">int vgic_v3_has_attr_regs(struct kvm_device *dev, struct kvm_device_attr *attr)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-mmio-v3_8c_source.html#l00956">vgic-mmio-v3.c:956</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae16a58808d1a84f4f378a2ff4343d200"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae16a58808d1a84f4f378a2ff4343d200">&#9670;&nbsp;</a></span>vgic_v3_parse_attr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vgic_v3_parse_attr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structvgic__reg__attr.html">vgic_reg_attr</a> *&#160;</td>
          <td class="paramname"><em>reg_attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00474">474</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;{</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> vgic_mpidr, mpidr_reg;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">     * For KVM_DEV_ARM_VGIC_GRP_DIST_REGS group,</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">     * attr might not hold MPIDR. Hence assume vcpu0.</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">if</span> (attr-&gt;group != KVM_DEV_ARM_VGIC_GRP_DIST_REGS) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        vgic_mpidr = (attr-&gt;attr &amp; KVM_DEV_ARM_VGIC_V3_MPIDR_MASK) &gt;&gt;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                  KVM_DEV_ARM_VGIC_V3_MPIDR_SHIFT;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        mpidr_reg = <a class="code" href="vgic_8h.html#a6cdd97958d32f8942e038e26dc313540">VGIC_TO_MPIDR</a>(vgic_mpidr);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        reg_attr-&gt;<a class="code" href="structvgic__reg__attr.html#a0f43e17045dc6b13404b4759e0fccad1">vcpu</a> = <a class="code" href="arm_8c.html#a0be215e1642483c65818bd994b13a421">kvm_mpidr_to_vcpu</a>(dev-&gt;kvm, mpidr_reg);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        reg_attr-&gt;<a class="code" href="structvgic__reg__attr.html#a0f43e17045dc6b13404b4759e0fccad1">vcpu</a> = kvm_get_vcpu(dev-&gt;kvm, 0);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">if</span> (!reg_attr-&gt;<a class="code" href="structvgic__reg__attr.html#a0f43e17045dc6b13404b4759e0fccad1">vcpu</a>)</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    reg_attr-&gt;<a class="code" href="structvgic__reg__attr.html#a19ed06c96175609f3d98858c1eceec59">addr</a> = attr-&gt;attr &amp; KVM_DEV_ARM_VGIC_OFFSET_MASK;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;}</div>
<div class="ttc" id="aarm_8c_html_a0be215e1642483c65818bd994b13a421"><div class="ttname"><a href="arm_8c.html#a0be215e1642483c65818bd994b13a421">kvm_mpidr_to_vcpu</a></div><div class="ttdeci">struct kvm_vcpu * kvm_mpidr_to_vcpu(struct kvm *kvm, unsigned long mpidr)</div><div class="ttdef"><b>Definition:</b> <a href="arm_8c_source.html#l02460">arm.c:2460</a></div></div>
<div class="ttc" id="avgic_8h_html_a6cdd97958d32f8942e038e26dc313540"><div class="ttname"><a href="vgic_8h.html#a6cdd97958d32f8942e038e26dc313540">VGIC_TO_MPIDR</a></div><div class="ttdeci">#define VGIC_TO_MPIDR(val)</div><div class="ttdef"><b>Definition:</b> <a href="vgic_8h_source.html#l00040">vgic.h:40</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_ae16a58808d1a84f4f378a2ff4343d200_cgraph.png" border="0" usemap="#avgic-kvm-device_8c_ae16a58808d1a84f4f378a2ff4343d200_cgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_ae16a58808d1a84f4f378a2ff4343d200_cgraph" id="avgic-kvm-device_8c_ae16a58808d1a84f4f378a2ff4343d200_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,151,32"/>
<area shape="rect" href="arm_8c.html#a0be215e1642483c65818bd994b13a421" title=" " alt="" coords="199,5,353,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_ae16a58808d1a84f4f378a2ff4343d200_icgraph.png" border="0" usemap="#avgic-kvm-device_8c_ae16a58808d1a84f4f378a2ff4343d200_icgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_ae16a58808d1a84f4f378a2ff4343d200_icgraph" id="avgic-kvm-device_8c_ae16a58808d1a84f4f378a2ff4343d200_icgraph">
<area shape="rect" title=" " alt="" coords="420,56,565,83"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a176e49a1162579b332c8a68ab035e981" title=" " alt="" coords="184,31,372,57"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab7ab2fb9c9721de227541e7cc6da7e3e" title=" " alt="" coords="195,81,361,108"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e" title=" " alt="" coords="6,56,135,83"/>
</map>
</div>

</div>
</div>
<a id="aee48777d58c65e5b91c0f85e2eae843e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee48777d58c65e5b91c0f85e2eae843e">&#9670;&nbsp;</a></span>vgic_v3_set_attr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int vgic_v3_set_attr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_device_attr *&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00598">598</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;{</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">switch</span> (attr-&gt;group) {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_DIST_REGS:</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_REDIST_REGS:</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_CPU_SYSREGS:</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">case</span> KVM_DEV_ARM_VGIC_GRP_LEVEL_INFO:</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="vgic-kvm-device_8c.html#a176e49a1162579b332c8a68ab035e981">vgic_v3_attr_regs_access</a>(dev, attr, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c">vgic_set_common_attr</a>(dev, attr);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vgic-kvm-device_8c_aee48777d58c65e5b91c0f85e2eae843e_cgraph.png" border="0" usemap="#avgic-kvm-device_8c_aee48777d58c65e5b91c0f85e2eae843e_cgraph" alt=""/></div>
<map name="avgic-kvm-device_8c_aee48777d58c65e5b91c0f85e2eae843e_cgraph" id="avgic-kvm-device_8c_aee48777d58c65e5b91c0f85e2eae843e_cgraph">
<area shape="rect" title=" " alt="" coords="5,890,135,917"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a6aadc4684bf7ca54e4a3d91f9e10310c" title=" " alt="" coords="191,765,362,791"/>
<area shape="rect" href="vgic-kvm-device_8c.html#a176e49a1162579b332c8a68ab035e981" title=" " alt="" coords="183,970,371,997"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ada63b20fef4ef1cc52730143652f9cb9" title=" " alt="" coords="445,119,567,146"/>
<area shape="rect" href="vgic-kvm-device_8c.html#aabe1882d024943ea3d42bd37678f437f" title=" " alt="" coords="673,181,804,207"/>
<area shape="rect" href="arm_8c.html#a02feef111fec875eb6382835eb2fb620" title=" " alt="" coords="447,837,565,863"/>
<area shape="rect" href="arm_8c.html#a29e56a77bf87bcd1b20ed8a14d9b2778" title=" " alt="" coords="439,887,573,914"/>
<area shape="rect" href="vgic-init_8c.html#a39a12fe5ed5534efda33bb215a320a57" title=" " alt="" coords="467,455,545,482"/>
<area shape="rect" href="vgic-v3_8c.html#af01c534c811a6787db01c7508a333d7c" title=" " alt="" coords="421,757,591,799"/>
<area shape="rect" href="vgic-kvm-device_8c.html#af0cfcc44a93abc13df9a7e364c21cf32" title=" " alt="" coords="1120,118,1271,145"/>
<area shape="rect" href="vgic-v3_8c.html#a35e1a5cb345dbcb7d61a55467b083702" title=" " alt="" coords="900,41,1056,83"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a4a15ce4d47dcc08ccabdac23699bd8e0" title=" " alt="" coords="648,119,829,146"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ab4506f3b3c9cd6a9a7bf0a909f93a722" title=" " alt="" coords="891,172,1065,213"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a78fb08dd130c0b8fc504e4725cd4f370" title=" " alt="" coords="901,237,1055,279"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ac2164da472839a705dfb81d3a3c477c5" title=" " alt="" coords="903,107,1053,148"/>
<area shape="rect" href="arm_8c.html#ac85c173d1f7208735e68f95eec2aac14" title=" " alt="" coords="683,877,794,903"/>
<area shape="rect" href="vgic-init_8c.html#a0f9be5cc88c88f6c0180c53b72818d3b" title=" " alt="" coords="667,237,811,263"/>
<area shape="rect" href="vgic-irqfd_8c.html#ab5dcaa98f287aec5083bd60daf115d71" title=" " alt="" coords="648,288,829,329"/>
<area shape="rect" href="vgic-init_8c.html#a2eee0060a3bdcd2a9e8fe1451a3a3fc2" title=" " alt="" coords="651,354,826,381"/>
<area shape="rect" href="vgic-debug_8c.html#a42534d23071b4f3c441c5f82f9e5c1ce" title=" " alt="" coords="677,405,801,431"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a47708b59ddd94e03880996def466067e" title=" " alt="" coords="927,514,1029,541"/>
<area shape="rect" href="vgic-its_8c.html#afd97b5d03d2b30ae4481443cdea2e739" title=" " alt="" coords="664,507,813,548"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a839b15883ba8f9de35a03ffce32fdf7f" title=" " alt="" coords="641,573,836,599"/>
<area shape="rect" href="vgic-v4_8c.html#a802a906ad744a75b5af33bbd6b31237c" title=" " alt="" coords="689,623,789,650"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="901,303,1055,330"/>
<area shape="rect" href="vgic-v2_8c.html#a4e8ee3d5f7c8fadbf0a645df67a1c5a2" title=" " alt="" coords="917,354,1039,381"/>
<area shape="rect" href="vgic-v3_8c.html#abe9a2245dfa0d76d61c99b60f714a513" title=" " alt="" coords="917,405,1039,431"/>
<area shape="rect" href="vgic-v4_8c.html#af99c2f70dd91a57879b3a2f583e49a4a" title=" " alt="" coords="887,674,1069,701"/>
<area shape="rect" href="vgic-v4_8c.html#ac805e466fa8f454112c11904ef8d41ce" title=" " alt="" coords="908,623,1048,650"/>
<area shape="rect" href="vgic-v3_8c.html#a62e3f2f0c8415cb67dc4117d1976f686" title=" " alt="" coords="683,674,795,701"/>
<area shape="rect" href="vgic-v3_8c.html#aedeeaec282ec4507c45c8580a6cd3ff8" title=" " alt="" coords="675,725,803,751"/>
<area shape="rect" href="vgic-v4_8c.html#a783964868bc841487af2392e07060c48" title=" " alt="" coords="653,775,824,802"/>
<area shape="rect" href="vgic_8h.html#abb188bad2393aaaf40808283d5565b8a" title=" " alt="" coords="655,826,822,853"/>
<area shape="rect" href="vgic_8h.html#ae6c5f6437d5d194daa8d1485c3dfe27b" title=" " alt="" coords="427,993,585,1035"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a744d3ea323c85b7c3528ccc1a3fd6180" title=" " alt="" coords="425,1129,587,1155"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#ac1a045e1729c5781a9c7c03e359da717" title=" " alt="" coords="435,1181,577,1223"/>
<area shape="rect" href="vgic-kvm-device_8c.html#ae16a58808d1a84f4f378a2ff4343d200" title=" " alt="" coords="433,939,579,966"/>
<area shape="rect" href="vgic-mmio-v3_8c.html#a6f0acf3ee53ee539acba5f1bce55cea2" title=" " alt="" coords="419,1066,593,1093"/>
<area shape="rect" href="vgic-sys-reg-v3_8c.html#a0bc09e2deb4b346bbe5a850747711fbc" title=" " alt="" coords="697,1079,781,1106"/>
<area shape="rect" href="sys__regs_8c.html#a228e61f9390e36b563ab837dfcf03ae2" title=" " alt="" coords="653,978,824,1005"/>
<area shape="rect" href="sys__regs_8c.html#ab29b04a8d34d81f0cce231f94feba038" title=" " alt="" coords="653,1029,824,1055"/>
<area shape="rect" href="sys__regs_8c.html#af212e5241f19483aede7d85e43a93b42" title=" " alt="" coords="904,978,1052,1005"/>
<area shape="rect" href="sys__regs_8h.html#acb0346a28ca0b3fd59d3c815d4d683a1" title=" " alt="" coords="903,1029,1053,1055"/>
<area shape="rect" href="sys__regs_8h.html#a95e3e5f281cf82d91e6a522ee3acb4cc" title=" " alt="" coords="884,1079,1072,1106"/>
<area shape="rect" href="vgic-mmio_8c.html#ae999933ae5e2cc6f0d3910bbe33386ba" title=" " alt="" coords="685,1130,793,1157"/>
<area shape="rect" href="vgic-mmio_8c.html#ac361bf23479dea11a94946fb36408b29" title=" " alt="" coords="906,1130,1050,1157"/>
<area shape="rect" href="vgic-mmio_8c.html#a9ae5f9a11d1a32e0fddb9409399b1d4a" title=" " alt="" coords="904,1181,1052,1207"/>
<area shape="rect" href="vgic-mmio_8c.html#a74de2333a13c0e99b703d65cab9666b3" title=" " alt="" coords="669,1247,809,1288"/>
<area shape="rect" href="vgic-mmio_8c.html#a28964cd75c2483a30f9743d35507bbce" title=" " alt="" coords="667,1181,811,1223"/>
<area shape="rect" href="arm_8c.html#a0be215e1642483c65818bd994b13a421" title=" " alt="" coords="661,927,816,954"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a5a628c87c18349dd58c792be382a1923"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a628c87c18349dd58c792be382a1923">&#9670;&nbsp;</a></span>kvm_arm_vgic_v2_ops</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct kvm_device_ops kvm_arm_vgic_v2_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .name = <span class="stringliteral">&quot;kvm-arm-vgic-v2&quot;</span>,</div>
<div class="line">    .create = <a class="code" href="vgic-kvm-device_8c.html#a4a03bcf8c61b3397194a8fba37f06f1c">vgic_create</a>,</div>
<div class="line">    .destroy = <a class="code" href="vgic-kvm-device_8c.html#ae70ac9825f01ca17be4b35b173f4be62">vgic_destroy</a>,</div>
<div class="line">    .set_attr = <a class="code" href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c">vgic_v2_set_attr</a>,</div>
<div class="line">    .get_attr = <a class="code" href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c">vgic_v2_get_attr</a>,</div>
<div class="line">    .has_attr = <a class="code" href="vgic-kvm-device_8c.html#a1901d2a2905a73826ea1287212aef248">vgic_v2_has_attr</a>,</div>
<div class="line">}</div>
<div class="ttc" id="avgic-kvm-device_8c_html_a1901d2a2905a73826ea1287212aef248"><div class="ttname"><a href="vgic-kvm-device_8c.html#a1901d2a2905a73826ea1287212aef248">vgic_v2_has_attr</a></div><div class="ttdeci">static int vgic_v2_has_attr(struct kvm_device *dev, struct kvm_device_attr *attr)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00440">vgic-kvm-device.c:440</a></div></div>
<div class="ttc" id="avgic-kvm-device_8c_html_a37a5c9125b0504633553497ae8c7ce9c"><div class="ttname"><a href="vgic-kvm-device_8c.html#a37a5c9125b0504633553497ae8c7ce9c">vgic_v2_set_attr</a></div><div class="ttdeci">static int vgic_v2_set_attr(struct kvm_device *dev, struct kvm_device_attr *attr)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00416">vgic-kvm-device.c:416</a></div></div>
<div class="ttc" id="avgic-kvm-device_8c_html_a3bb10b83ef8325ecaa3671e9fe9c528c"><div class="ttname"><a href="vgic-kvm-device_8c.html#a3bb10b83ef8325ecaa3671e9fe9c528c">vgic_v2_get_attr</a></div><div class="ttdeci">static int vgic_v2_get_attr(struct kvm_device *dev, struct kvm_device_attr *attr)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00428">vgic-kvm-device.c:428</a></div></div>
<div class="ttc" id="avgic-kvm-device_8c_html_a4a03bcf8c61b3397194a8fba37f06f1c"><div class="ttname"><a href="vgic-kvm-device_8c.html#a4a03bcf8c61b3397194a8fba37f06f1c">vgic_create</a></div><div class="ttdeci">static int vgic_create(struct kvm_device *dev, u32 type)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00306">vgic-kvm-device.c:306</a></div></div>
<div class="ttc" id="avgic-kvm-device_8c_html_ae70ac9825f01ca17be4b35b173f4be62"><div class="ttname"><a href="vgic-kvm-device_8c.html#ae70ac9825f01ca17be4b35b173f4be62">vgic_destroy</a></div><div class="ttdeci">static void vgic_destroy(struct kvm_device *dev)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00311">vgic-kvm-device.c:311</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00440">440</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>

</div>
</div>
<a id="adad4cc8377a1795f085c0e7824d336a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adad4cc8377a1795f085c0e7824d336a2">&#9670;&nbsp;</a></span>kvm_arm_vgic_v3_ops</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct kvm_device_ops kvm_arm_vgic_v3_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .name = <span class="stringliteral">&quot;kvm-arm-vgic-v3&quot;</span>,</div>
<div class="line">    .create = <a class="code" href="vgic-kvm-device_8c.html#a4a03bcf8c61b3397194a8fba37f06f1c">vgic_create</a>,</div>
<div class="line">    .destroy = <a class="code" href="vgic-kvm-device_8c.html#ae70ac9825f01ca17be4b35b173f4be62">vgic_destroy</a>,</div>
<div class="line">    .set_attr = <a class="code" href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e">vgic_v3_set_attr</a>,</div>
<div class="line">    .get_attr = <a class="code" href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1">vgic_v3_get_attr</a>,</div>
<div class="line">    .has_attr = <a class="code" href="vgic-kvm-device_8c.html#a8f2f7c3eb1c4a6403c66c2b1e6e4ddc2">vgic_v3_has_attr</a>,</div>
<div class="line">}</div>
<div class="ttc" id="avgic-kvm-device_8c_html_a8f2f7c3eb1c4a6403c66c2b1e6e4ddc2"><div class="ttname"><a href="vgic-kvm-device_8c.html#a8f2f7c3eb1c4a6403c66c2b1e6e4ddc2">vgic_v3_has_attr</a></div><div class="ttdeci">static int vgic_v3_has_attr(struct kvm_device *dev, struct kvm_device_attr *attr)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00626">vgic-kvm-device.c:626</a></div></div>
<div class="ttc" id="avgic-kvm-device_8c_html_ad2effaec26f6d2af865ed45b7dbc64f1"><div class="ttname"><a href="vgic-kvm-device_8c.html#ad2effaec26f6d2af865ed45b7dbc64f1">vgic_v3_get_attr</a></div><div class="ttdeci">static int vgic_v3_get_attr(struct kvm_device *dev, struct kvm_device_attr *attr)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00612">vgic-kvm-device.c:612</a></div></div>
<div class="ttc" id="avgic-kvm-device_8c_html_aee48777d58c65e5b91c0f85e2eae843e"><div class="ttname"><a href="vgic-kvm-device_8c.html#aee48777d58c65e5b91c0f85e2eae843e">vgic_v3_set_attr</a></div><div class="ttdeci">static int vgic_v3_set_attr(struct kvm_device *dev, struct kvm_device_attr *attr)</div><div class="ttdef"><b>Definition:</b> <a href="vgic-kvm-device_8c_source.html#l00598">vgic-kvm-device.c:598</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="vgic-kvm-device_8c_source.html#l00626">626</a> of file <a class="el" href="vgic-kvm-device_8c_source.html">vgic-kvm-device.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
