<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KVM: arch/x86/kvm/lapic.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KVM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_ea9599923402ca8ab47fc3e495999dea.html">arch</a></li><li class="navelem"><a class="el" href="dir_c21774f8bc9f0de15163573e5f5fa2b5.html">x86</a></li><li class="navelem"><a class="el" href="dir_fde450fd4b58e2560c53a1e73bfa4d6d.html">kvm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">lapic.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/kvm_host.h&gt;</code><br />
<code>#include &lt;linux/kvm.h&gt;</code><br />
<code>#include &lt;linux/mm.h&gt;</code><br />
<code>#include &lt;linux/highmem.h&gt;</code><br />
<code>#include &lt;linux/smp.h&gt;</code><br />
<code>#include &lt;linux/hrtimer.h&gt;</code><br />
<code>#include &lt;linux/io.h&gt;</code><br />
<code>#include &lt;linux/export.h&gt;</code><br />
<code>#include &lt;linux/math64.h&gt;</code><br />
<code>#include &lt;linux/slab.h&gt;</code><br />
<code>#include &lt;asm/processor.h&gt;</code><br />
<code>#include &lt;asm/mce.h&gt;</code><br />
<code>#include &lt;asm/msr.h&gt;</code><br />
<code>#include &lt;asm/page.h&gt;</code><br />
<code>#include &lt;asm/current.h&gt;</code><br />
<code>#include &lt;asm/apicdef.h&gt;</code><br />
<code>#include &lt;asm/delay.h&gt;</code><br />
<code>#include &lt;linux/atomic.h&gt;</code><br />
<code>#include &lt;linux/jump_label.h&gt;</code><br />
<code>#include &quot;<a class="el" href="kvm__cache__regs_8h_source.html">kvm_cache_regs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="irq_8h_source.html">irq.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ioapic_8h_source.html">ioapic.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trace_8h_source.html">trace.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="x86_8h_source.html">x86.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="xen_8h_source.html">xen.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cpuid_8h_source.html">cpuid.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hyperv_8h_source.html">hyperv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="smm_8h_source.html">smm.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for lapic.c:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c__incl.png" border="0" usemap="#aarch_2x86_2kvm_2lapic_8c" alt=""/></div>
<map name="aarch_2x86_2kvm_2lapic_8c" id="aarch_2x86_2kvm_2lapic_8c">
<area shape="rect" title=" " alt="" coords="1485,5,1643,32"/>
<area shape="rect" title=" " alt="" coords="269,528,403,555"/>
<area shape="rect" title=" " alt="" coords="1185,80,1284,107"/>
<area shape="rect" title=" " alt="" coords="1308,80,1404,107"/>
<area shape="rect" title=" " alt="" coords="1429,80,1561,107"/>
<area shape="rect" title=" " alt="" coords="1585,80,1684,107"/>
<area shape="rect" title=" " alt="" coords="647,229,764,256"/>
<area shape="rect" title=" " alt="" coords="1708,80,1791,107"/>
<area shape="rect" title=" " alt="" coords="1815,80,1927,107"/>
<area shape="rect" title=" " alt="" coords="1951,80,2071,107"/>
<area shape="rect" title=" " alt="" coords="2095,80,2193,107"/>
<area shape="rect" title=" " alt="" coords="1041,155,1169,181"/>
<area shape="rect" title=" " alt="" coords="1095,453,1190,480"/>
<area shape="rect" title=" " alt="" coords="2217,80,2308,107"/>
<area shape="rect" title=" " alt="" coords="2332,80,2431,107"/>
<area shape="rect" title=" " alt="" coords="2455,80,2567,107"/>
<area shape="rect" title=" " alt="" coords="2591,80,2705,107"/>
<area shape="rect" title=" " alt="" coords="2729,80,2829,107"/>
<area shape="rect" title=" " alt="" coords="2853,80,2968,107"/>
<area shape="rect" title=" " alt="" coords="2993,80,3135,107"/>
<area shape="rect" href="kvm__cache__regs_8h.html" title=" " alt="" coords="929,453,1071,480"/>
<area shape="rect" href="irq_8h.html" title=" " alt="" coords="373,155,424,181"/>
<area shape="rect" href="hyperv_8h.html" title=" " alt="" coords="691,304,770,331"/>
<area shape="rect" href="x86_8h.html" title=" " alt="" coords="813,379,872,405"/>
<area shape="rect" href="smm_8h.html" title=" " alt="" coords="556,304,623,331"/>
<area shape="rect" href="ioapic_8h.html" title=" " alt="" coords="253,80,326,107"/>
<area shape="rect" href="trace_8h.html" title=" " alt="" coords="3160,80,3227,107"/>
<area shape="rect" href="xen_8h.html" title=" " alt="" coords="3678,80,3735,107"/>
<area shape="rect" href="cpuid_8h.html" title=" " alt="" coords="1092,80,1161,107"/>
<area shape="rect" title=" " alt="" coords="245,229,384,256"/>
<area shape="rect" title=" " alt="" coords="409,229,533,256"/>
<area shape="rect" title=" " alt="" coords="195,304,298,331"/>
<area shape="rect" href="lapic_8h.html" title=" " alt="" coords="557,229,622,256"/>
<area shape="rect" title=" " alt="" coords="485,453,617,480"/>
<area shape="rect" title=" " alt="" coords="641,453,757,480"/>
<area shape="rect" href="kvm__emulate_8h.html" title=" " alt="" coords="781,453,905,480"/>
<area shape="rect" title=" " alt="" coords="373,379,507,405"/>
<area shape="rect" title=" " alt="" coords="2724,155,2860,181"/>
<area shape="rect" title=" " alt="" coords="2885,155,2979,181"/>
<area shape="rect" title=" " alt="" coords="3003,155,3098,181"/>
<area shape="rect" title=" " alt="" coords="3122,155,3265,181"/>
<area shape="rect" title=" " alt="" coords="3464,155,3605,181"/>
<area shape="rect" title=" " alt="" coords="3289,155,3439,181"/>
<area shape="rect" title=" " alt="" coords="3809,155,3970,181"/>
<area shape="rect" title=" " alt="" coords="3994,155,4145,181"/>
<area shape="rect" title=" " alt="" coords="3629,155,3784,181"/>
<area shape="rect" href="reverse__cpuid_8h.html" title=" " alt="" coords="1244,155,1369,181"/>
<area shape="rect" title=" " alt="" coords="1394,155,1483,181"/>
<area shape="rect" title=" " alt="" coords="1508,155,1671,181"/>
<area shape="rect" href="governed__features_8h.html" title=" " alt="" coords="1695,155,1851,181"/>
</map>
</div>
</div>
<p><a href="lapic_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1f8c165bf4196327bc3abff648276d92"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a1f8c165bf4196327bc3abff648276d92">pr_fmt</a>(fmt)&#160;&#160;&#160;KBUILD_MODNAME &quot;: &quot; fmt</td></tr>
<tr class="separator:a1f8c165bf4196327bc3abff648276d92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a908ec45b54c68dff62333670a03b8713"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a908ec45b54c68dff62333670a03b8713">mod_64</a>(x,  y)&#160;&#160;&#160;((x) - (y) * div64_u64(x, y))</td></tr>
<tr class="separator:a908ec45b54c68dff62333670a03b8713"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1a256486b56b5660f30be7a7c352672"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ab1a256486b56b5660f30be7a7c352672">APIC_VERSION</a>&#160;&#160;&#160;0x14UL</td></tr>
<tr class="separator:ab1a256486b56b5660f30be7a7c352672"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5befec925c8dea176d75488112b8cc3a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a5befec925c8dea176d75488112b8cc3a">LAPIC_MMIO_LENGTH</a>&#160;&#160;&#160;(1 &lt;&lt; 12)</td></tr>
<tr class="separator:a5befec925c8dea176d75488112b8cc3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05cf2e217d081f8aab707b910c25de43"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a05cf2e217d081f8aab707b910c25de43">MAX_APIC_VECTOR</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:a05cf2e217d081f8aab707b910c25de43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac232a08bd2049565028a1c93bb961a43"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ac232a08bd2049565028a1c93bb961a43">APIC_VECTORS_PER_REG</a>&#160;&#160;&#160;32</td></tr>
<tr class="separator:ac232a08bd2049565028a1c93bb961a43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a582c1d842f30d029783bd6562b2bb923"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a582c1d842f30d029783bd6562b2bb923">LAPIC_TIMER_ADVANCE_ADJUST_MIN</a>&#160;&#160;&#160;100	/* clock cycles */</td></tr>
<tr class="separator:a582c1d842f30d029783bd6562b2bb923"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaff10bb3db6a335fe54ac63779edc7d4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#aaff10bb3db6a335fe54ac63779edc7d4">LAPIC_TIMER_ADVANCE_ADJUST_MAX</a>&#160;&#160;&#160;10000	/* clock cycles */</td></tr>
<tr class="separator:aaff10bb3db6a335fe54ac63779edc7d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae6931286b2ce84fe7732ae3c6996634"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#aae6931286b2ce84fe7732ae3c6996634">LAPIC_TIMER_ADVANCE_NS_INIT</a>&#160;&#160;&#160;1000</td></tr>
<tr class="separator:aae6931286b2ce84fe7732ae3c6996634"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a108a811ad5c48f5f7691fbb6ec699c47"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a108a811ad5c48f5f7691fbb6ec699c47">LAPIC_TIMER_ADVANCE_NS_MAX</a>&#160;&#160;&#160;5000</td></tr>
<tr class="separator:a108a811ad5c48f5f7691fbb6ec699c47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a9dd2aa76e667592ae5c2a01abd3aef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a9a9dd2aa76e667592ae5c2a01abd3aef">LAPIC_TIMER_ADVANCE_ADJUST_STEP</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:a9a9dd2aa76e667592ae5c2a01abd3aef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29cd928e2c4df6a9ec6fd865259d8212"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a29cd928e2c4df6a9ec6fd865259d8212">LVT_MASK</a>&#160;&#160;&#160;	(APIC_LVT_MASKED | APIC_SEND_PENDING | APIC_VECTOR_MASK)</td></tr>
<tr class="separator:a29cd928e2c4df6a9ec6fd865259d8212"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a687c09dc40674b09e4ea620eaac08cd8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a687c09dc40674b09e4ea620eaac08cd8">LINT_MASK</a></td></tr>
<tr class="separator:a687c09dc40674b09e4ea620eaac08cd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33962d1576b2caa1a5d1baa88b2a01cf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(reg)&#160;&#160;&#160;(1ull &lt;&lt; ((reg) &gt;&gt; 4))</td></tr>
<tr class="separator:a33962d1576b2caa1a5d1baa88b2a01cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7aa698ace6e78ae7890c10e7f8a3388"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ae7aa698ace6e78ae7890c10e7f8a3388">APIC_REGS_MASK</a>(first,  count)&#160;&#160;&#160;	(<a class="el" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(first) * ((1ull &lt;&lt; (count)) - 1))</td></tr>
<tr class="separator:ae7aa698ace6e78ae7890c10e7f8a3388"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aaf8fd5f0e57d456151c951e0f3715fc4"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a66c5c37af65c297c098d96df666bf6da">CLEAN</a>
, <a class="el" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4ac2b52587c19144a2fdd6253248a08414">UPDATE_IN_PROGRESS</a>
, <a class="el" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a6a4e132eb192a22c351397837d4c082c">DIRTY</a>
 }</td></tr>
<tr class="separator:aaf8fd5f0e57d456151c951e0f3715fc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2913418710d9efa46bbdbb0070b766da"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da">kvm_lapic_msr_read</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 reg, u64 *data)</td></tr>
<tr class="separator:a2913418710d9efa46bbdbb0070b766da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b64be7f231109aa3e0382cc34a64079"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079">kvm_lapic_msr_write</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 reg, u64 data)</td></tr>
<tr class="separator:a1b64be7f231109aa3e0382cc34a64079"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5de365e734b929b65e2d75f62cea6f7e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e">__kvm_lapic_set_reg</a> (char *regs, int reg_off, u32 val)</td></tr>
<tr class="separator:a5de365e734b929b65e2d75f62cea6f7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2ee275fa1bc17aa0bfde435723b8f48"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, int reg_off, u32 val)</td></tr>
<tr class="separator:ab2ee275fa1bc17aa0bfde435723b8f48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa06cb4ebbfa40dbfa494b3b4cd9f8833"><td class="memItemLeft" align="right" valign="top">static __always_inline u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#aa06cb4ebbfa40dbfa494b3b4cd9f8833">__kvm_lapic_get_reg64</a> (char *regs, int reg)</td></tr>
<tr class="separator:aa06cb4ebbfa40dbfa494b3b4cd9f8833"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a378a0961283ea67791303e70114fb10d"><td class="memItemLeft" align="right" valign="top">static __always_inline u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a378a0961283ea67791303e70114fb10d">kvm_lapic_get_reg64</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, int reg)</td></tr>
<tr class="separator:a378a0961283ea67791303e70114fb10d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39839decdbbb9e8a6718f3ac7c0b3707"><td class="memItemLeft" align="right" valign="top">static __always_inline void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a39839decdbbb9e8a6718f3ac7c0b3707">__kvm_lapic_set_reg64</a> (char *regs, int reg, u64 val)</td></tr>
<tr class="separator:a39839decdbbb9e8a6718f3ac7c0b3707"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c69ed3d074907a7adcee84e8570ebb2"><td class="memItemLeft" align="right" valign="top">static __always_inline void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2">kvm_lapic_set_reg64</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, int reg, u64 val)</td></tr>
<tr class="separator:a8c69ed3d074907a7adcee84e8570ebb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad063ed2f42a913efa82bad52d1b58aa8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8">apic_test_vector</a> (int vec, void *bitmap)</td></tr>
<tr class="separator:ad063ed2f42a913efa82bad52d1b58aa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a637f6f499709ab30e61db1b69177ea00"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a637f6f499709ab30e61db1b69177ea00">kvm_apic_pending_eoi</a> (struct kvm_vcpu *vcpu, int vector)</td></tr>
<tr class="separator:a637f6f499709ab30e61db1b69177ea00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fc79a6339260d167eb85050cc787149"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a3fc79a6339260d167eb85050cc787149">__apic_test_and_set_vector</a> (int vec, void *bitmap)</td></tr>
<tr class="separator:a3fc79a6339260d167eb85050cc787149"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33d332d149d0b1dd33e02b2ab98009a9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a33d332d149d0b1dd33e02b2ab98009a9">__apic_test_and_clear_vector</a> (int vec, void *bitmap)</td></tr>
<tr class="separator:a33d332d149d0b1dd33e02b2ab98009a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a480318ed03f59c2ddf1a0dfa67cfe26d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a480318ed03f59c2ddf1a0dfa67cfe26d">DEFINE_STATIC_KEY_DEFERRED_FALSE</a> (<a class="el" href="lapic_8h.html#a65788ee3d09ea041368cd93b3391f3c4">apic_hw_disabled</a>, HZ)</td></tr>
<tr class="separator:a480318ed03f59c2ddf1a0dfa67cfe26d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec669eb05d23c40ad3cfc7bedc3243d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#aec669eb05d23c40ad3cfc7bedc3243d3">DEFINE_STATIC_KEY_DEFERRED_FALSE</a> (<a class="el" href="lapic_8h.html#a3c2a1bc1bb244452f5338719ef4e73c8">apic_sw_disabled</a>, HZ)</td></tr>
<tr class="separator:aec669eb05d23c40ad3cfc7bedc3243d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0bd88f2e9609cef51f64e40f0635c9d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d">apic_enabled</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:ab0bd88f2e9609cef51f64e40f0635c9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bdd67ff70db633e45cce412fb4c7718"><td class="memItemLeft" align="right" valign="top">static u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718">kvm_x2apic_id</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a8bdd67ff70db633e45cce412fb4c7718"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7790e6f84a1592b5298b2da79a633a9"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9">kvm_can_post_timer_interrupt</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ad7790e6f84a1592b5298b2da79a633a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2400290b895608d302ecce4ee352ee25"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a2400290b895608d302ecce4ee352ee25">kvm_can_use_hv_timer</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a2400290b895608d302ecce4ee352ee25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4c60ea967a94401d14b834ac3e6a679"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679">kvm_use_posted_timer_interrupt</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:af4c60ea967a94401d14b834ac3e6a679"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8447cf7bc387797722507fa915cf735f"><td class="memItemLeft" align="right" valign="top">static u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f">kvm_apic_calc_x2apic_ldr</a> (u32 id)</td></tr>
<tr class="separator:a8447cf7bc387797722507fa915cf735f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2381239fbfde7c282aabdd2c01f50ad3"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3">kvm_apic_map_get_logical_dest</a> (struct kvm_apic_map *map, u32 dest_id, struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> ***cluster, u16 *mask)</td></tr>
<tr class="separator:a2381239fbfde7c282aabdd2c01f50ad3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb9d56c06c989c570d48eaad39212e44"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44">kvm_apic_map_free</a> (struct rcu_head *rcu)</td></tr>
<tr class="separator:adb9d56c06c989c570d48eaad39212e44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43e03cb9e082150ad2bda64ee2761a44"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44">kvm_recalculate_phys_map</a> (struct kvm_apic_map *new, struct kvm_vcpu *vcpu, bool *xapic_id_mismatch)</td></tr>
<tr class="separator:a43e03cb9e082150ad2bda64ee2761a44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84c432a3d433d6afbd54bff4e5806d49"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49">kvm_recalculate_logical_map</a> (struct kvm_apic_map *new, struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a84c432a3d433d6afbd54bff4e5806d49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a756b707dd502680db2eed7759defde40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a756b707dd502680db2eed7759defde40">kvm_recalculate_apic_map</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a756b707dd502680db2eed7759defde40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb32a868e76d57da9fab57fce43efdbe"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe">apic_set_spiv</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 val)</td></tr>
<tr class="separator:aeb32a868e76d57da9fab57fce43efdbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab24997de83c3fd44d1cd7520a615883e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e">kvm_apic_set_xapic_id</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u8 id)</td></tr>
<tr class="separator:ab24997de83c3fd44d1cd7520a615883e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a5ccc92c8b75ad6118bdc1b84a43554"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554">kvm_apic_set_ldr</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 id)</td></tr>
<tr class="separator:a2a5ccc92c8b75ad6118bdc1b84a43554"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54214770509be207a1c1271e8b48acf4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4">kvm_apic_set_dfr</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 val)</td></tr>
<tr class="separator:a54214770509be207a1c1271e8b48acf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22d25ec6370d0efd4c569b7317d28098"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a22d25ec6370d0efd4c569b7317d28098">kvm_apic_set_x2apic_id</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 id)</td></tr>
<tr class="separator:a22d25ec6370d0efd4c569b7317d28098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2800acddbbe439c5ae4fab24c1eaf9ff"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a2800acddbbe439c5ae4fab24c1eaf9ff">apic_lvt_enabled</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, int lvt_type)</td></tr>
<tr class="separator:a2800acddbbe439c5ae4fab24c1eaf9ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf8f8ff420925292fe7ce7e1ea72924a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a">apic_lvtt_oneshot</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:adf8f8ff420925292fe7ce7e1ea72924a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a843b5038a6a8d6c20b11bd97b69bf667"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667">apic_lvtt_period</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a843b5038a6a8d6c20b11bd97b69bf667"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaceffbfc91320b193a66d974fb12ce0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0">apic_lvtt_tscdeadline</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:adaceffbfc91320b193a66d974fb12ce0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a063bf62e455f91f22cf2b81452698b0c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c">apic_lvt_nmi_mode</a> (u32 lvt_val)</td></tr>
<tr class="separator:a063bf62e455f91f22cf2b81452698b0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36de6235abe5d5bd2fd57bf5739c1b5f"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f">kvm_lapic_lvt_supported</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, int lvt_index)</td></tr>
<tr class="separator:a36de6235abe5d5bd2fd57bf5739c1b5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6426046939a33f96b6df7b185cafb171"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a6426046939a33f96b6df7b185cafb171">kvm_apic_calc_nr_lvt_entries</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a6426046939a33f96b6df7b185cafb171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa6716cc0b30bec513d223fbfdecfdcf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf">kvm_apic_set_version</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:aaa6716cc0b30bec513d223fbfdecfdcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a200be826b3634c1b5a377464f35d540f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a200be826b3634c1b5a377464f35d540f">kvm_apic_after_set_mcg_cap</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a200be826b3634c1b5a377464f35d540f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a656567b4197d9a5af833ffd04dff7a52"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52">find_highest_vector</a> (void *bitmap)</td></tr>
<tr class="separator:a656567b4197d9a5af833ffd04dff7a52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40e5c52e8a79166cfc433f413bbe9e36"><td class="memItemLeft" align="right" valign="top">static u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a40e5c52e8a79166cfc433f413bbe9e36">count_vectors</a> (void *bitmap)</td></tr>
<tr class="separator:a40e5c52e8a79166cfc433f413bbe9e36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed305556b8d09cfaa135cca071bd8c22"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#aed305556b8d09cfaa135cca071bd8c22">__kvm_apic_update_irr</a> (u32 *<a class="el" href="posted__intr_8h.html#a2707c542febe155b1642f9b9a9c0bc79">pir</a>, void *regs, int *max_irr)</td></tr>
<tr class="separator:aed305556b8d09cfaa135cca071bd8c22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3883ed1ed465ae4e12ac751db4686c0a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a3883ed1ed465ae4e12ac751db4686c0a">EXPORT_SYMBOL_GPL</a> (<a class="el" href="lapic_8h.html#aed305556b8d09cfaa135cca071bd8c22">__kvm_apic_update_irr</a>)</td></tr>
<tr class="separator:a3883ed1ed465ae4e12ac751db4686c0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a922ce0b7b20cf9b9ef4930d3d81e8360"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a922ce0b7b20cf9b9ef4930d3d81e8360">kvm_apic_update_irr</a> (struct kvm_vcpu *vcpu, u32 *<a class="el" href="posted__intr_8h.html#a2707c542febe155b1642f9b9a9c0bc79">pir</a>, int *max_irr)</td></tr>
<tr class="separator:a922ce0b7b20cf9b9ef4930d3d81e8360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5026788c1ee5b3dcfe119b3befd8ab2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ab5026788c1ee5b3dcfe119b3befd8ab2">EXPORT_SYMBOL_GPL</a> (<a class="el" href="lapic_8h.html#a922ce0b7b20cf9b9ef4930d3d81e8360">kvm_apic_update_irr</a>)</td></tr>
<tr class="separator:ab5026788c1ee5b3dcfe119b3befd8ab2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a734e8a2b56a9a0b0d9117f20f2bb0fc1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1">apic_search_irr</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a734e8a2b56a9a0b0d9117f20f2bb0fc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebc526fc8720e4db45143f8e05f85c79"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79">apic_find_highest_irr</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:aebc526fc8720e4db45143f8e05f85c79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2b5e2187414c65e1a5876e641fee3fc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ad2b5e2187414c65e1a5876e641fee3fc">apic_clear_irr</a> (int vec, struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:ad2b5e2187414c65e1a5876e641fee3fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad608730f208932f64d2c98c762fce85c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ad608730f208932f64d2c98c762fce85c">kvm_apic_clear_irr</a> (struct kvm_vcpu *vcpu, int vec)</td></tr>
<tr class="separator:ad608730f208932f64d2c98c762fce85c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c37038653d65dc5a9c18846465cc47a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a5c37038653d65dc5a9c18846465cc47a">EXPORT_SYMBOL_GPL</a> (<a class="el" href="lapic_8h.html#ad608730f208932f64d2c98c762fce85c">kvm_apic_clear_irr</a>)</td></tr>
<tr class="separator:a5c37038653d65dc5a9c18846465cc47a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acba5fed3ebeb7a85d9cb154d13b7f983"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#acba5fed3ebeb7a85d9cb154d13b7f983">apic_set_isr</a> (int vec, struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:acba5fed3ebeb7a85d9cb154d13b7f983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80d977ac48cfa76440f2961e38b23fd0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0">apic_find_highest_isr</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a80d977ac48cfa76440f2961e38b23fd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76fc10b30ae9deff038c276c3f5a9843"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843">apic_clear_isr</a> (int vec, struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a76fc10b30ae9deff038c276c3f5a9843"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e5b22760af617cabb18355a0a373156"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a1e5b22760af617cabb18355a0a373156">kvm_lapic_find_highest_irr</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a1e5b22760af617cabb18355a0a373156"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd4415a11be7cdbe724f5f7aee123d7b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#acd4415a11be7cdbe724f5f7aee123d7b">EXPORT_SYMBOL_GPL</a> (<a class="el" href="lapic_8h.html#a1e5b22760af617cabb18355a0a373156">kvm_lapic_find_highest_irr</a>)</td></tr>
<tr class="separator:acd4415a11be7cdbe724f5f7aee123d7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10d887046aaccb6cf4178421594dee10"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10">__apic_accept_irq</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, int delivery_mode, int vector, int level, int trig_mode, struct <a class="el" href="structdest__map.html">dest_map</a> *<a class="el" href="structdest__map.html">dest_map</a>)</td></tr>
<tr class="separator:a10d887046aaccb6cf4178421594dee10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d272e1b73f22f797955e7ddea84b741"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741">kvm_apic_set_irq</a> (struct kvm_vcpu *vcpu, struct kvm_lapic_irq *irq, struct <a class="el" href="structdest__map.html">dest_map</a> *<a class="el" href="structdest__map.html">dest_map</a>)</td></tr>
<tr class="separator:a3d272e1b73f22f797955e7ddea84b741"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33f4e295e9710d133e3e38e0aed35edb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a33f4e295e9710d133e3e38e0aed35edb">__pv_send_ipi</a> (unsigned long *ipi_bitmap, struct kvm_apic_map *map, struct kvm_lapic_irq *irq, u32 min)</td></tr>
<tr class="separator:a33f4e295e9710d133e3e38e0aed35edb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7195db5c58bcea2e080ee79cdaeae617"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a7195db5c58bcea2e080ee79cdaeae617">kvm_pv_send_ipi</a> (struct kvm *kvm, unsigned long ipi_bitmap_low, unsigned long ipi_bitmap_high, u32 min, unsigned long icr, int op_64_bit)</td></tr>
<tr class="separator:a7195db5c58bcea2e080ee79cdaeae617"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46a725e66a6b75af27a208acd463153a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a46a725e66a6b75af27a208acd463153a">pv_eoi_put_user</a> (struct kvm_vcpu *vcpu, u8 val)</td></tr>
<tr class="separator:a46a725e66a6b75af27a208acd463153a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a664d20f44962ff67555d95cdf987eb9b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a664d20f44962ff67555d95cdf987eb9b">pv_eoi_get_user</a> (struct kvm_vcpu *vcpu, u8 *val)</td></tr>
<tr class="separator:a664d20f44962ff67555d95cdf987eb9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f87e777fe7602fff9557bbfbd630791"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a9f87e777fe7602fff9557bbfbd630791">pv_eoi_enabled</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a9f87e777fe7602fff9557bbfbd630791"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ea4e066578d706e217136c8baf247b3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a1ea4e066578d706e217136c8baf247b3">pv_eoi_set_pending</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a1ea4e066578d706e217136c8baf247b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9449652b89a95fb90ca1b00dffac32d"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#aa9449652b89a95fb90ca1b00dffac32d">pv_eoi_test_and_clr_pending</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:aa9449652b89a95fb90ca1b00dffac32d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1c99098894f4751a556057800e906e0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0">apic_has_interrupt_for_ppr</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 ppr)</td></tr>
<tr class="separator:ac1c99098894f4751a556057800e906e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bb0a1640f9f291f5c3154c6a2c40986"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986">__apic_update_ppr</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 *new_ppr)</td></tr>
<tr class="separator:a1bb0a1640f9f291f5c3154c6a2c40986"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cfae0ee851075e6141d0446f4a133ab"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab">apic_update_ppr</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a7cfae0ee851075e6141d0446f4a133ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44fec9a6b84f831af88ffed6b2325545"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a44fec9a6b84f831af88ffed6b2325545">kvm_apic_update_ppr</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a44fec9a6b84f831af88ffed6b2325545"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba8107bfccff264ce94816294fb49383"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#aba8107bfccff264ce94816294fb49383">EXPORT_SYMBOL_GPL</a> (<a class="el" href="lapic_8h.html#a44fec9a6b84f831af88ffed6b2325545">kvm_apic_update_ppr</a>)</td></tr>
<tr class="separator:aba8107bfccff264ce94816294fb49383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02bd03bf711be3200ea2316ced434ff1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1">apic_set_tpr</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 tpr)</td></tr>
<tr class="separator:a02bd03bf711be3200ea2316ced434ff1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98bde25094c754b30e796357ba643ab0"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a98bde25094c754b30e796357ba643ab0">kvm_apic_broadcast</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 mda)</td></tr>
<tr class="separator:a98bde25094c754b30e796357ba643ab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8c127c0d736bacbfa2cdc6b3fd5c2f6"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6">kvm_apic_match_physical_addr</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 mda)</td></tr>
<tr class="separator:ae8c127c0d736bacbfa2cdc6b3fd5c2f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a870119cb74033f360164df90029af75a"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a870119cb74033f360164df90029af75a">kvm_apic_match_logical_addr</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 mda)</td></tr>
<tr class="separator:a870119cb74033f360164df90029af75a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fb87d02d911e49b5793e391702afe7e"><td class="memItemLeft" align="right" valign="top">static u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a8fb87d02d911e49b5793e391702afe7e">kvm_apic_mda</a> (struct kvm_vcpu *vcpu, unsigned int dest_id, struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *source, struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *target)</td></tr>
<tr class="separator:a8fb87d02d911e49b5793e391702afe7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb63e5a650d4571316b450d153a3105d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d">kvm_apic_match_dest</a> (struct kvm_vcpu *vcpu, struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *source, int shorthand, unsigned int dest, int dest_mode)</td></tr>
<tr class="separator:adb63e5a650d4571316b450d153a3105d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5db667aae6833602ec6eea1045627bb1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a5db667aae6833602ec6eea1045627bb1">EXPORT_SYMBOL_GPL</a> (<a class="el" href="lapic_8h.html#adb63e5a650d4571316b450d153a3105d">kvm_apic_match_dest</a>)</td></tr>
<tr class="separator:a5db667aae6833602ec6eea1045627bb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9fecb7d9f4574931650af9abb4b9f4c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ac9fecb7d9f4574931650af9abb4b9f4c">kvm_vector_to_index</a> (u32 vector, u32 dest_vcpus, const unsigned long *bitmap, u32 bitmap_size)</td></tr>
<tr class="separator:ac9fecb7d9f4574931650af9abb4b9f4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a079d589509607a9d9baa6bed3eae7fa6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a079d589509607a9d9baa6bed3eae7fa6">kvm_apic_disabled_lapic_found</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a079d589509607a9d9baa6bed3eae7fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbce6da431ef5f15d85b5fc741d3ef72"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#abbce6da431ef5f15d85b5fc741d3ef72">kvm_apic_is_broadcast_dest</a> (struct kvm *kvm, struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> **src, struct kvm_lapic_irq *irq, struct kvm_apic_map *map)</td></tr>
<tr class="separator:abbce6da431ef5f15d85b5fc741d3ef72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee815bad0e899bbf195750d2d9b5470f"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f">kvm_apic_map_get_dest_lapic</a> (struct kvm *kvm, struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> **src, struct kvm_lapic_irq *irq, struct kvm_apic_map *map, struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> ***dst, unsigned long *bitmap)</td></tr>
<tr class="separator:aee815bad0e899bbf195750d2d9b5470f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17eee4051fa1d41b805b09a195f64045"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045">kvm_irq_delivery_to_apic_fast</a> (struct kvm *kvm, struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *src, struct kvm_lapic_irq *irq, int *r, struct <a class="el" href="structdest__map.html">dest_map</a> *<a class="el" href="structdest__map.html">dest_map</a>)</td></tr>
<tr class="separator:a17eee4051fa1d41b805b09a195f64045"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8620b1c89f8cf017f7827024fc95ac92"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a8620b1c89f8cf017f7827024fc95ac92">kvm_intr_is_single_vcpu_fast</a> (struct kvm *kvm, struct kvm_lapic_irq *irq, struct kvm_vcpu **dest_vcpu)</td></tr>
<tr class="separator:a8620b1c89f8cf017f7827024fc95ac92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42846edfc8630e622bcde943f49559c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4">kvm_bitmap_or_dest_vcpus</a> (struct kvm *kvm, struct kvm_lapic_irq *irq, unsigned long *vcpu_bitmap)</td></tr>
<tr class="separator:a42846edfc8630e622bcde943f49559c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47d52843df792ef8e7bffdfb66a3b40b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a47d52843df792ef8e7bffdfb66a3b40b">kvm_apic_compare_prio</a> (struct kvm_vcpu *vcpu1, struct kvm_vcpu *vcpu2)</td></tr>
<tr class="separator:a47d52843df792ef8e7bffdfb66a3b40b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a900c0170b3a9f3c6869d072aa14055d1"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a900c0170b3a9f3c6869d072aa14055d1">kvm_ioapic_handles_vector</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, int vector)</td></tr>
<tr class="separator:a900c0170b3a9f3c6869d072aa14055d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5001020f0ca8d6d692c54dd23b40ade4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4">kvm_ioapic_send_eoi</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, int vector)</td></tr>
<tr class="separator:a5001020f0ca8d6d692c54dd23b40ade4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5602fb092ac09abc6c2bf0ad789d726"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726">apic_set_eoi</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:af5602fb092ac09abc6c2bf0ad789d726"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a501cf23b440691f979fad04c87067f93"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a501cf23b440691f979fad04c87067f93">kvm_apic_set_eoi_accelerated</a> (struct kvm_vcpu *vcpu, int vector)</td></tr>
<tr class="separator:a501cf23b440691f979fad04c87067f93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06f049217674a8b55d6ec8675dff715a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a06f049217674a8b55d6ec8675dff715a">EXPORT_SYMBOL_GPL</a> (<a class="el" href="lapic_8h.html#a501cf23b440691f979fad04c87067f93">kvm_apic_set_eoi_accelerated</a>)</td></tr>
<tr class="separator:a06f049217674a8b55d6ec8675dff715a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b7f12cb3ba68245df79bc30d938b728"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728">kvm_apic_send_ipi</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 icr_low, u32 icr_high)</td></tr>
<tr class="separator:a4b7f12cb3ba68245df79bc30d938b728"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac81b3025384731b2a675d3c25e9490da"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ac81b3025384731b2a675d3c25e9490da">EXPORT_SYMBOL_GPL</a> (<a class="el" href="lapic_8h.html#a4b7f12cb3ba68245df79bc30d938b728">kvm_apic_send_ipi</a>)</td></tr>
<tr class="separator:ac81b3025384731b2a675d3c25e9490da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bf640da1dfc1be09d89fb23c7f2e954"><td class="memItemLeft" align="right" valign="top">static u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a5bf640da1dfc1be09d89fb23c7f2e954">apic_get_tmcct</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a5bf640da1dfc1be09d89fb23c7f2e954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a416dfbc264f7365a79bb5d3e531512b8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8">__report_tpr_access</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, bool write)</td></tr>
<tr class="separator:a416dfbc264f7365a79bb5d3e531512b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab18679414f6ced1b8597fc3a9b445dea"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea">report_tpr_access</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, bool write)</td></tr>
<tr class="separator:ab18679414f6ced1b8597fc3a9b445dea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a834f2a3187924d07d18afb6b8d6645f3"><td class="memItemLeft" align="right" valign="top">static u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3">__apic_read</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, unsigned int offset)</td></tr>
<tr class="separator:a834f2a3187924d07d18afb6b8d6645f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59900449cd556b732187d0a91d983b80"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a59900449cd556b732187d0a91d983b80">to_lapic</a> (struct kvm_io_device *dev)</td></tr>
<tr class="separator:a59900449cd556b732187d0a91d983b80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b4d880305f2ddba0ac9fdb398a7611a"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a4b4d880305f2ddba0ac9fdb398a7611a">kvm_lapic_readable_reg_mask</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a4b4d880305f2ddba0ac9fdb398a7611a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6504ad14e0309eed0c69052812125b2b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a6504ad14e0309eed0c69052812125b2b">EXPORT_SYMBOL_GPL</a> (<a class="el" href="lapic_8h.html#a4b4d880305f2ddba0ac9fdb398a7611a">kvm_lapic_readable_reg_mask</a>)</td></tr>
<tr class="separator:a6504ad14e0309eed0c69052812125b2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdddb3803bbe495a6eb54937906caf2c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c">kvm_lapic_reg_read</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 offset, int len, void *data)</td></tr>
<tr class="separator:afdddb3803bbe495a6eb54937906caf2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a13521d44779dc719a0bd2cf54fe88d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a1a13521d44779dc719a0bd2cf54fe88d">apic_mmio_in_range</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, gpa_t addr)</td></tr>
<tr class="separator:a1a13521d44779dc719a0bd2cf54fe88d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18976a1e591c223c2aec9c52711c6da1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1">apic_mmio_read</a> (struct kvm_vcpu *vcpu, struct kvm_io_device *this, gpa_t address, int len, void *data)</td></tr>
<tr class="separator:a18976a1e591c223c2aec9c52711c6da1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a946cf21407471f7a6ba449b2435055c3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3">update_divide_count</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a946cf21407471f7a6ba449b2435055c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a985df23c29d6d25105aba975adf5582c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c">limit_periodic_timer_frequency</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a985df23c29d6d25105aba975adf5582c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8cab016891083e066b7e1c086d012ae"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae">cancel_hv_timer</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:af8cab016891083e066b7e1c086d012ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aa5f66b440e07d680f42fdaa211eac2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2">cancel_apic_timer</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a8aa5f66b440e07d680f42fdaa211eac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7a03b55710bfcc78be7af0609f6f93d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d">apic_update_lvtt</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:ac7a03b55710bfcc78be7af0609f6f93d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d28368a44947389f8a7afec1c3288d3"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a4d28368a44947389f8a7afec1c3288d3">lapic_timer_int_injected</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a4d28368a44947389f8a7afec1c3288d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a1a2c50e4624d010e1a145b3d0228a9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9">__wait_lapic_expire</a> (struct kvm_vcpu *vcpu, u64 guest_cycles)</td></tr>
<tr class="separator:a0a1a2c50e4624d010e1a145b3d0228a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afabb27fc3cb4bd601a2fe90515cf402d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d">adjust_lapic_timer_advance</a> (struct kvm_vcpu *vcpu, s64 advance_expire_delta)</td></tr>
<tr class="separator:afabb27fc3cb4bd601a2fe90515cf402d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad64663521c2c2f523dce26a339df367"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367">__kvm_wait_lapic_expire</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:aad64663521c2c2f523dce26a339df367"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94273a31a16c3d074d5722f22474bcbb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a94273a31a16c3d074d5722f22474bcbb">kvm_wait_lapic_expire</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a94273a31a16c3d074d5722f22474bcbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43a780d4bd905ccc71788b27bfde973b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a43a780d4bd905ccc71788b27bfde973b">EXPORT_SYMBOL_GPL</a> (<a class="el" href="lapic_8h.html#a94273a31a16c3d074d5722f22474bcbb">kvm_wait_lapic_expire</a>)</td></tr>
<tr class="separator:a43a780d4bd905ccc71788b27bfde973b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a290cedfa4bc99681ad10d45d0d960a17"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17">kvm_apic_inject_pending_timer_irqs</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a290cedfa4bc99681ad10d45d0d960a17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc5f49f6a4cafac330b1fc370038f837"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837">apic_timer_expired</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, bool from_timer_fn)</td></tr>
<tr class="separator:adc5f49f6a4cafac330b1fc370038f837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac04fc2bcb3434803c9f3c10594f309be"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be">start_sw_tscdeadline</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:ac04fc2bcb3434803c9f3c10594f309be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9f4c987f5a9d71b966ec05058380bb4"><td class="memItemLeft" align="right" valign="top">static u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ab9f4c987f5a9d71b966ec05058380bb4">tmict_to_ns</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 tmict)</td></tr>
<tr class="separator:ab9f4c987f5a9d71b966ec05058380bb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a694be782d2a5e9a6ece8dd51f3da91f4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4">update_target_expiration</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, uint32_t old_divisor)</td></tr>
<tr class="separator:a694be782d2a5e9a6ece8dd51f3da91f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0efcb9037756de47e9d28f0a5ea1009f"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a0efcb9037756de47e9d28f0a5ea1009f">set_target_expiration</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 count_reg)</td></tr>
<tr class="separator:a0efcb9037756de47e9d28f0a5ea1009f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cff2e426d700ad5b4cc78b9a3ea1ede"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede">advance_periodic_target_expiration</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a5cff2e426d700ad5b4cc78b9a3ea1ede"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a546006e7f967018d391494cfdbd3d3a4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4">start_sw_period</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a546006e7f967018d391494cfdbd3d3a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a054dd145c5435c8bfe1dea1adf2ed1e1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a054dd145c5435c8bfe1dea1adf2ed1e1">kvm_lapic_hv_timer_in_use</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a054dd145c5435c8bfe1dea1adf2ed1e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae72327516a899bdd0fe3f245f2695879"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879">start_hv_timer</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:ae72327516a899bdd0fe3f245f2695879"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af723244d8a4013a14d7eaa2bca2765e8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8">start_sw_timer</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:af723244d8a4013a14d7eaa2bca2765e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade21404bee3e5dbbe596ff391e0a23db"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db">restart_apic_timer</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:ade21404bee3e5dbbe596ff391e0a23db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55b40b66655c45769650efd20bf3c26d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d">kvm_lapic_expired_hv_timer</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a55b40b66655c45769650efd20bf3c26d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a127aaf60367f59d1bdb22755ed32d22e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a127aaf60367f59d1bdb22755ed32d22e">EXPORT_SYMBOL_GPL</a> (<a class="el" href="lapic_8h.html#a55b40b66655c45769650efd20bf3c26d">kvm_lapic_expired_hv_timer</a>)</td></tr>
<tr class="separator:a127aaf60367f59d1bdb22755ed32d22e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a973c3bd2856958a514e5ae2f49b14821"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821">kvm_lapic_switch_to_hv_timer</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a973c3bd2856958a514e5ae2f49b14821"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee4a3e5ae4ed211edf4e463ebacadaa5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#aee4a3e5ae4ed211edf4e463ebacadaa5">kvm_lapic_switch_to_sw_timer</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:aee4a3e5ae4ed211edf4e463ebacadaa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab785e74943a17874760f3d4b6b5359d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0">kvm_lapic_restart_hv_timer</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ab785e74943a17874760f3d4b6b5359d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a108aca5a9980d721f30b333be204d005"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005">__start_apic_timer</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 count_reg)</td></tr>
<tr class="separator:a108aca5a9980d721f30b333be204d005"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f5c49ce8a579b59663644f0f1a6cbe3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3">start_apic_timer</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a5f5c49ce8a579b59663644f0f1a6cbe3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afefd171448cafa66f80ecb9b9659ebb1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1">apic_manage_nmi_watchdog</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 lvt0_val)</td></tr>
<tr class="separator:afefd171448cafa66f80ecb9b9659ebb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec07f4595f82e14e1075beb4730b6976"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#aec07f4595f82e14e1075beb4730b6976">get_lvt_index</a> (u32 reg)</td></tr>
<tr class="separator:aec07f4595f82e14e1075beb4730b6976"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acebc0ffd4530dfd1beb1254d1e4d9491"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491">kvm_lapic_reg_write</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u32 reg, u32 val)</td></tr>
<tr class="separator:acebc0ffd4530dfd1beb1254d1e4d9491"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58177b5add54a17bfa81e2a1049f324e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e">apic_mmio_write</a> (struct kvm_vcpu *vcpu, struct kvm_io_device *this, gpa_t address, int len, const void *data)</td></tr>
<tr class="separator:a58177b5add54a17bfa81e2a1049f324e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6d8f3638f580c8d6dcd091512c49768"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768">kvm_lapic_set_eoi</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ab6d8f3638f580c8d6dcd091512c49768"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe4b28ce6b18fd43a47cb53230635d64"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#afe4b28ce6b18fd43a47cb53230635d64">EXPORT_SYMBOL_GPL</a> (<a class="el" href="lapic_8h.html#ab6d8f3638f580c8d6dcd091512c49768">kvm_lapic_set_eoi</a>)</td></tr>
<tr class="separator:afe4b28ce6b18fd43a47cb53230635d64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b33bb5758d3dd75c7b87e537a5e729e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e">kvm_apic_write_nodecode</a> (struct kvm_vcpu *vcpu, u32 offset)</td></tr>
<tr class="separator:a1b33bb5758d3dd75c7b87e537a5e729e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bced2bbe3fc57564b6158524c717164"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a0bced2bbe3fc57564b6158524c717164">EXPORT_SYMBOL_GPL</a> (<a class="el" href="lapic_8h.html#a1b33bb5758d3dd75c7b87e537a5e729e">kvm_apic_write_nodecode</a>)</td></tr>
<tr class="separator:a0bced2bbe3fc57564b6158524c717164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b935c2c698d932ceff03cb20f512919"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a4b935c2c698d932ceff03cb20f512919">kvm_free_lapic</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a4b935c2c698d932ceff03cb20f512919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2fa5313476adb8240d3595805d784fc"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#af2fa5313476adb8240d3595805d784fc">kvm_get_lapic_tscdeadline_msr</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:af2fa5313476adb8240d3595805d784fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44881cc17bdbe632a483e8c7c1dd0dfb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb">kvm_set_lapic_tscdeadline_msr</a> (struct kvm_vcpu *vcpu, u64 data)</td></tr>
<tr class="separator:a44881cc17bdbe632a483e8c7c1dd0dfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee34622e495b500817e0b0905bfd0d4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#aee34622e495b500817e0b0905bfd0d4c">kvm_lapic_set_tpr</a> (struct kvm_vcpu *vcpu, unsigned long cr8)</td></tr>
<tr class="separator:aee34622e495b500817e0b0905bfd0d4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aead5d19fd0505da0197dfc140d6824"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a3aead5d19fd0505da0197dfc140d6824">kvm_lapic_get_cr8</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a3aead5d19fd0505da0197dfc140d6824"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d747385873e52f47e85179c21521e73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a8d747385873e52f47e85179c21521e73">kvm_lapic_set_base</a> (struct kvm_vcpu *vcpu, u64 value)</td></tr>
<tr class="separator:a8d747385873e52f47e85179c21521e73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5468339c2df08ca538b77d4d48915c35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a5468339c2df08ca538b77d4d48915c35">kvm_apic_update_apicv</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a5468339c2df08ca538b77d4d48915c35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c6616d2cbae35632aa5debb15b552ec"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a8c6616d2cbae35632aa5debb15b552ec">kvm_alloc_apic_access_page</a> (struct kvm *kvm)</td></tr>
<tr class="separator:a8c6616d2cbae35632aa5debb15b552ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65e03a39ffe5b3115b10745c1fa95e24"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a65e03a39ffe5b3115b10745c1fa95e24">EXPORT_SYMBOL_GPL</a> (<a class="el" href="lapic_8h.html#a8c6616d2cbae35632aa5debb15b552ec">kvm_alloc_apic_access_page</a>)</td></tr>
<tr class="separator:a65e03a39ffe5b3115b10745c1fa95e24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a017e57adbc721d98d26099f1a431a22c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a017e57adbc721d98d26099f1a431a22c">kvm_inhibit_apic_access_page</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a017e57adbc721d98d26099f1a431a22c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b8a5d87df5283a20e9aa9b828320552"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552">kvm_lapic_reset</a> (struct kvm_vcpu *vcpu, bool init_event)</td></tr>
<tr class="separator:a8b8a5d87df5283a20e9aa9b828320552"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86e81c4916d223c6f60d958af49c71dd"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a86e81c4916d223c6f60d958af49c71dd">lapic_is_periodic</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a86e81c4916d223c6f60d958af49c71dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcf66d0c1c15dcbd414e2dbf830d7b29"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#afcf66d0c1c15dcbd414e2dbf830d7b29">apic_has_pending_timer</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:afcf66d0c1c15dcbd414e2dbf830d7b29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1ce737e754e319ee93f3d06e197cc50"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50">kvm_apic_local_deliver</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, int lvt_type)</td></tr>
<tr class="separator:ab1ce737e754e319ee93f3d06e197cc50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a504357f1b937154f9789bbff3e8c4db2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a504357f1b937154f9789bbff3e8c4db2">kvm_apic_nmi_wd_deliver</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a504357f1b937154f9789bbff3e8c4db2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed93ccaa481ab4fd48af66ccf79499c5"><td class="memItemLeft" align="right" valign="top">static enum hrtimer_restart&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#aed93ccaa481ab4fd48af66ccf79499c5">apic_timer_fn</a> (struct hrtimer *data)</td></tr>
<tr class="separator:aed93ccaa481ab4fd48af66ccf79499c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d54fd094860a96cad1af17c18f6904c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a1d54fd094860a96cad1af17c18f6904c">kvm_create_lapic</a> (struct kvm_vcpu *vcpu, int timer_advance_ns)</td></tr>
<tr class="separator:a1d54fd094860a96cad1af17c18f6904c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa421165466ac455ff3fff91fb9afe7bf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf">kvm_apic_has_interrupt</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:aa421165466ac455ff3fff91fb9afe7bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f0609f0d503f7003e0b8a62cd269cd4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a8f0609f0d503f7003e0b8a62cd269cd4">EXPORT_SYMBOL_GPL</a> (<a class="el" href="lapic_8h.html#aa421165466ac455ff3fff91fb9afe7bf">kvm_apic_has_interrupt</a>)</td></tr>
<tr class="separator:a8f0609f0d503f7003e0b8a62cd269cd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f4df169625f9c4c2cb06f7443698af4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a1f4df169625f9c4c2cb06f7443698af4">kvm_apic_accept_pic_intr</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a1f4df169625f9c4c2cb06f7443698af4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac79f0e40ed0e1cde83a09aef506fb373"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ac79f0e40ed0e1cde83a09aef506fb373">kvm_inject_apic_timer_irqs</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ac79f0e40ed0e1cde83a09aef506fb373"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6d5ae412d8199fc4aceeae42cb80024"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024">kvm_get_apic_interrupt</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:ac6d5ae412d8199fc4aceeae42cb80024"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5862d5df95ddd956a652f1dd3f319706"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a5862d5df95ddd956a652f1dd3f319706">kvm_apic_state_fixup</a> (struct kvm_vcpu *vcpu, struct kvm_lapic_state *s, bool set)</td></tr>
<tr class="separator:a5862d5df95ddd956a652f1dd3f319706"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a623f02f0875b0883fd65e82c565c9a18"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18">kvm_apic_get_state</a> (struct kvm_vcpu *vcpu, struct kvm_lapic_state *s)</td></tr>
<tr class="separator:a623f02f0875b0883fd65e82c565c9a18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4768d4990380510ec220c3e510d32598"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598">kvm_apic_set_state</a> (struct kvm_vcpu *vcpu, struct kvm_lapic_state *s)</td></tr>
<tr class="separator:a4768d4990380510ec220c3e510d32598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accb9eec870235e61feeef31a7c0a6084"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#accb9eec870235e61feeef31a7c0a6084">__kvm_migrate_apic_timer</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:accb9eec870235e61feeef31a7c0a6084"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a651f3e8a2def4f70e3750464ea4904a9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9">apic_sync_pv_eoi_from_guest</a> (struct kvm_vcpu *vcpu, struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:a651f3e8a2def4f70e3750464ea4904a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa63139efcde3eb7b7548e5792d7cf63d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d">kvm_lapic_sync_from_vapic</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:aa63139efcde3eb7b7548e5792d7cf63d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac56f15a70a1339e966c89b349b3f7850"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ac56f15a70a1339e966c89b349b3f7850">apic_sync_pv_eoi_to_guest</a> (struct kvm_vcpu *vcpu, struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic)</td></tr>
<tr class="separator:ac56f15a70a1339e966c89b349b3f7850"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a332060485ef249fcfd9edbf9cf80dd2b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a332060485ef249fcfd9edbf9cf80dd2b">kvm_lapic_sync_to_vapic</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a332060485ef249fcfd9edbf9cf80dd2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0f76b010d3d80125e88dc3d819f115b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ad0f76b010d3d80125e88dc3d819f115b">kvm_lapic_set_vapic_addr</a> (struct kvm_vcpu *vcpu, gpa_t vapic_addr)</td></tr>
<tr class="separator:ad0f76b010d3d80125e88dc3d819f115b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf2487dc76dace6e577b637cc357998b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b">kvm_x2apic_icr_write</a> (struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *apic, u64 data)</td></tr>
<tr class="separator:adf2487dc76dace6e577b637cc357998b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d2f3f34c12c8c724fe739cbbc44ad43"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43">kvm_x2apic_msr_write</a> (struct kvm_vcpu *vcpu, u32 msr, u64 data)</td></tr>
<tr class="separator:a7d2f3f34c12c8c724fe739cbbc44ad43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a179cfc2268db31f40b5bd9b1c247a37b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a179cfc2268db31f40b5bd9b1c247a37b">kvm_x2apic_msr_read</a> (struct kvm_vcpu *vcpu, u32 msr, u64 *data)</td></tr>
<tr class="separator:a179cfc2268db31f40b5bd9b1c247a37b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd2b4e5a0448d3280ab31687c2199265"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265">kvm_hv_vapic_msr_write</a> (struct kvm_vcpu *vcpu, u32 reg, u64 data)</td></tr>
<tr class="separator:acd2b4e5a0448d3280ab31687c2199265"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9bd2989ca4c31caf8aa56b8c7dfd248"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#ae9bd2989ca4c31caf8aa56b8c7dfd248">kvm_hv_vapic_msr_read</a> (struct kvm_vcpu *vcpu, u32 reg, u64 *data)</td></tr>
<tr class="separator:ae9bd2989ca4c31caf8aa56b8c7dfd248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c3f4680631c7f6cb33a6a5c4c001750"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a9c3f4680631c7f6cb33a6a5c4c001750">kvm_lapic_set_pv_eoi</a> (struct kvm_vcpu *vcpu, u64 data, unsigned long len)</td></tr>
<tr class="separator:a9c3f4680631c7f6cb33a6a5c4c001750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27836a2bcd51ebcfe2ca478e9ad7aa04"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04">kvm_apic_accept_events</a> (struct kvm_vcpu *vcpu)</td></tr>
<tr class="separator:a27836a2bcd51ebcfe2ca478e9ad7aa04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2d9c133a24e68f345a3fe133bf8bfaf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#af2d9c133a24e68f345a3fe133bf8bfaf">kvm_lapic_exit</a> (void)</td></tr>
<tr class="separator:af2d9c133a24e68f345a3fe133bf8bfaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2bce74e938478719805f3d3ee4fae532"><td class="memItemLeft" align="right" valign="top">static bool lapic_timer_advance_dynamic&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a2bce74e938478719805f3d3ee4fae532">__read_mostly</a></td></tr>
<tr class="separator:a2bce74e938478719805f3d3ee4fae532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54ccc473e4178fea8e25602ac8000683"><td class="memItemLeft" align="right" valign="top">static const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a54ccc473e4178fea8e25602ac8000683">apic_lvt_mask</a> [<a class="el" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdaa2e7ce18b246d7ad6fe039d93d40dd06">KVM_APIC_MAX_NR_LVT_ENTRIES</a>]</td></tr>
<tr class="separator:a54ccc473e4178fea8e25602ac8000683"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61013c760fedb5cc2ce71f0243787f7e"><td class="memItemLeft" align="right" valign="top">static const struct kvm_io_device_ops&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lapic_8c.html#a61013c760fedb5cc2ce71f0243787f7e">apic_mmio_ops</a></td></tr>
<tr class="separator:a61013c760fedb5cc2ce71f0243787f7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a33962d1576b2caa1a5d1baa88b2a01cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33962d1576b2caa1a5d1baa88b2a01cf">&#9670;&nbsp;</a></span>APIC_REG_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APIC_REG_MASK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">reg</td><td>)</td>
          <td>&#160;&#160;&#160;(1ull &lt;&lt; ((reg) &gt;&gt; 4))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01603">1603</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
<a id="ae7aa698ace6e78ae7890c10e7f8a3388"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7aa698ace6e78ae7890c10e7f8a3388">&#9670;&nbsp;</a></span>APIC_REGS_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APIC_REGS_MASK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">first, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">count&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;	(<a class="el" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(first) * ((1ull &lt;&lt; (count)) - 1))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01604">1604</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
<a id="ac232a08bd2049565028a1c93bb961a43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac232a08bd2049565028a1c93bb961a43">&#9670;&nbsp;</a></span>APIC_VECTORS_PER_REG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APIC_VECTORS_PER_REG&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00060">60</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
<a id="ab1a256486b56b5660f30be7a7c352672"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1a256486b56b5660f30be7a7c352672">&#9670;&nbsp;</a></span>APIC_VERSION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APIC_VERSION&#160;&#160;&#160;0x14UL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00056">56</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
<a id="a5befec925c8dea176d75488112b8cc3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5befec925c8dea176d75488112b8cc3a">&#9670;&nbsp;</a></span>LAPIC_MMIO_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LAPIC_MMIO_LENGTH&#160;&#160;&#160;(1 &lt;&lt; 12)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00057">57</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
<a id="aaff10bb3db6a335fe54ac63779edc7d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaff10bb3db6a335fe54ac63779edc7d4">&#9670;&nbsp;</a></span>LAPIC_TIMER_ADVANCE_ADJUST_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LAPIC_TIMER_ADVANCE_ADJUST_MAX&#160;&#160;&#160;10000	/* clock cycles */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00064">64</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
<a id="a582c1d842f30d029783bd6562b2bb923"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a582c1d842f30d029783bd6562b2bb923">&#9670;&nbsp;</a></span>LAPIC_TIMER_ADVANCE_ADJUST_MIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LAPIC_TIMER_ADVANCE_ADJUST_MIN&#160;&#160;&#160;100	/* clock cycles */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00063">63</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
<a id="a9a9dd2aa76e667592ae5c2a01abd3aef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a9dd2aa76e667592ae5c2a01abd3aef">&#9670;&nbsp;</a></span>LAPIC_TIMER_ADVANCE_ADJUST_STEP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LAPIC_TIMER_ADVANCE_ADJUST_STEP&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00068">68</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
<a id="aae6931286b2ce84fe7732ae3c6996634"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae6931286b2ce84fe7732ae3c6996634">&#9670;&nbsp;</a></span>LAPIC_TIMER_ADVANCE_NS_INIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LAPIC_TIMER_ADVANCE_NS_INIT&#160;&#160;&#160;1000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00065">65</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
<a id="a108a811ad5c48f5f7691fbb6ec699c47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a108a811ad5c48f5f7691fbb6ec699c47">&#9670;&nbsp;</a></span>LAPIC_TIMER_ADVANCE_NS_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LAPIC_TIMER_ADVANCE_NS_MAX&#160;&#160;&#160;5000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00066">66</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
<a id="a687c09dc40674b09e4ea620eaac08cd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a687c09dc40674b09e4ea620eaac08cd8">&#9670;&nbsp;</a></span>LINT_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LINT_MASK</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    (<a class="code" href="lapic_8c.html#a29cd928e2c4df6a9ec6fd865259d8212">LVT_MASK</a> | APIC_MODE_MASK | APIC_INPUT_POLARITY | \</div>
<div class="line">     APIC_LVT_REMOTE_IRR | APIC_LVT_LEVEL_TRIGGER)</div>
<div class="ttc" id="alapic_8c_html_a29cd928e2c4df6a9ec6fd865259d8212"><div class="ttname"><a href="lapic_8c.html#a29cd928e2c4df6a9ec6fd865259d8212">LVT_MASK</a></div><div class="ttdeci">#define LVT_MASK</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00136">lapic.c:136</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00139">139</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
<a id="a29cd928e2c4df6a9ec6fd865259d8212"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29cd928e2c4df6a9ec6fd865259d8212">&#9670;&nbsp;</a></span>LVT_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LVT_MASK&#160;&#160;&#160;	(APIC_LVT_MASKED | APIC_SEND_PENDING | APIC_VECTOR_MASK)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00136">136</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
<a id="a05cf2e217d081f8aab707b910c25de43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05cf2e217d081f8aab707b910c25de43">&#9670;&nbsp;</a></span>MAX_APIC_VECTOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_APIC_VECTOR&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00059">59</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
<a id="a908ec45b54c68dff62333670a03b8713"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a908ec45b54c68dff62333670a03b8713">&#9670;&nbsp;</a></span>mod_64</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define mod_64</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">y&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((x) - (y) * div64_u64(x, y))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00050">50</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
<a id="a1f8c165bf4196327bc3abff648276d92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f8c165bf4196327bc3abff648276d92">&#9670;&nbsp;</a></span>pr_fmt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define pr_fmt</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fmt</td><td>)</td>
          <td>&#160;&#160;&#160;KBUILD_MODNAME &quot;: &quot; fmt</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00018">18</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aaf8fd5f0e57d456151c951e0f3715fc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf8fd5f0e57d456151c951e0f3715fc4">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aaf8fd5f0e57d456151c951e0f3715fc4a66c5c37af65c297c098d96df666bf6da"></a>CLEAN&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aaf8fd5f0e57d456151c951e0f3715fc4ac2b52587c19144a2fdd6253248a08414"></a>UPDATE_IN_PROGRESS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aaf8fd5f0e57d456151c951e0f3715fc4a6a4e132eb192a22c351397837d4c082c"></a>DIRTY&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00368">368</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;     {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a66c5c37af65c297c098d96df666bf6da">CLEAN</a>,</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4ac2b52587c19144a2fdd6253248a08414">UPDATE_IN_PROGRESS</a>,</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a6a4e132eb192a22c351397837d4c082c">DIRTY</a></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;};</div>
<div class="ttc" id="alapic_8c_html_aaf8fd5f0e57d456151c951e0f3715fc4a66c5c37af65c297c098d96df666bf6da"><div class="ttname"><a href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a66c5c37af65c297c098d96df666bf6da">CLEAN</a></div><div class="ttdeci">@ CLEAN</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00369">lapic.c:369</a></div></div>
<div class="ttc" id="alapic_8c_html_aaf8fd5f0e57d456151c951e0f3715fc4a6a4e132eb192a22c351397837d4c082c"><div class="ttname"><a href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a6a4e132eb192a22c351397837d4c082c">DIRTY</a></div><div class="ttdeci">@ DIRTY</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00372">lapic.c:371</a></div></div>
<div class="ttc" id="alapic_8c_html_aaf8fd5f0e57d456151c951e0f3715fc4ac2b52587c19144a2fdd6253248a08414"><div class="ttname"><a href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4ac2b52587c19144a2fdd6253248a08414">UPDATE_IN_PROGRESS</a></div><div class="ttdeci">@ UPDATE_IN_PROGRESS</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00370">lapic.c:370</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a10d887046aaccb6cf4178421594dee10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10d887046aaccb6cf4178421594dee10">&#9670;&nbsp;</a></span>__apic_accept_irq()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int __apic_accept_irq </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>delivery_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>trig_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdest__map.html">dest_map</a> *&#160;</td>
          <td class="paramname"><em>dest_map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01291">1291</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;{</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu = apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160; </div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    trace_kvm_apic_accept_irq(vcpu-&gt;vcpu_id, delivery_mode,</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                  trig_mode, vector);</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <span class="keywordflow">switch</span> (delivery_mode) {</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <span class="keywordflow">case</span> APIC_DM_LOWEST:</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        vcpu-&gt;arch.apic_arb_prio++;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        fallthrough;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keywordflow">case</span> APIC_DM_FIXED:</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        <span class="keywordflow">if</span> (unlikely(trig_mode &amp;&amp; !level))</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160; </div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        <span class="comment">/* FIXME add logic for vcpu on reset */</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        <span class="keywordflow">if</span> (unlikely(!<a class="code" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d">apic_enabled</a>(apic)))</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160; </div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        result = 1;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160; </div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structdest__map.html">dest_map</a>) {</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;            __set_bit(vcpu-&gt;vcpu_id, <a class="code" href="structdest__map.html">dest_map</a>-&gt;map);</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;            <a class="code" href="structdest__map.html">dest_map</a>-&gt;<a class="code" href="structdest__map.html#a138657a6c6b48bf8aea782ba1a7ccca4">vectors</a>[vcpu-&gt;vcpu_id] = vector;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        }</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160; </div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8">apic_test_vector</a>(vector, apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_TMR) != !!trig_mode) {</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;            <span class="keywordflow">if</span> (trig_mode)</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                <a class="code" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019">kvm_lapic_set_vector</a>(vector,</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                             apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_TMR);</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                <a class="code" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198">kvm_lapic_clear_vector</a>(vector,</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                               apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_TMR);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        }</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160; </div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        static_call(kvm_x86_deliver_interrupt)(apic, delivery_mode,</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;                               trig_mode, vector);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160; </div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="keywordflow">case</span> APIC_DM_REMRD:</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        result = 1;</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        vcpu-&gt;arch.pv.pv_unhalted = 1;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        kvm_make_request(KVM_REQ_EVENT, vcpu);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <a class="code" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44">kvm_vcpu_kick</a>(vcpu);</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160; </div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="keywordflow">case</span> APIC_DM_SMI:</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e">kvm_inject_smi</a>(vcpu)) {</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            <a class="code" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44">kvm_vcpu_kick</a>(vcpu);</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;            result = 1;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        }</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160; </div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <span class="keywordflow">case</span> APIC_DM_NMI:</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        result = 1;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        <a class="code" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0">kvm_inject_nmi</a>(vcpu);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        <a class="code" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44">kvm_vcpu_kick</a>(vcpu);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160; </div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="keywordflow">case</span> APIC_DM_INIT:</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        <span class="keywordflow">if</span> (!trig_mode || level) {</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;            result = 1;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            <span class="comment">/* assumes that there are only KVM_APIC_INIT/SIPI */</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;            apic-&gt;<a class="code" href="structkvm__lapic.html#ade63c790c3a1363b7af1853b98bacf1a">pending_events</a> = (1UL &lt;&lt; <a class="code" href="lapic_8h.html#a3b7d7d35c001fcefc23520569c5d81d7">KVM_APIC_INIT</a>);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;            kvm_make_request(KVM_REQ_EVENT, vcpu);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;            <a class="code" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44">kvm_vcpu_kick</a>(vcpu);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        }</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160; </div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <span class="keywordflow">case</span> APIC_DM_STARTUP:</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        result = 1;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#a9122fb8adbd131d159cb064fe6a3f01e">sipi_vector</a> = vector;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        <span class="comment">/* make sure sipi_vector is visible for the receiver */</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        smp_wmb();</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        set_bit(<a class="code" href="lapic_8h.html#af7a4bf414bb99391b6c9e674d87cdc41">KVM_APIC_SIPI</a>, &amp;apic-&gt;<a class="code" href="structkvm__lapic.html#ade63c790c3a1363b7af1853b98bacf1a">pending_events</a>);</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        kvm_make_request(KVM_REQ_EVENT, vcpu);</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        <a class="code" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44">kvm_vcpu_kick</a>(vcpu);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="keywordflow">case</span> APIC_DM_EXTINT:</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="comment">         * Should only be called by kvm_apic_local_deliver() with LVT0,</span></div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="comment">         * before NMI watchdog was enabled. Already handled by</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="comment">         * kvm_apic_accept_pic_intr().</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160; </div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        printk(KERN_ERR <span class="stringliteral">&quot;TODO: unsupported delivery mode %x\n&quot;</span>,</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;               delivery_mode);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    }</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_ac82f28c95da4a0cc137c5a37f08d1f44"><div class="ttname"><a href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44">kvm_vcpu_kick</a></div><div class="ttdeci">void kvm_vcpu_kick(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l03931">kvm_main.c:3931</a></div></div>
<div class="ttc" id="alapic_8c_html_ab0bd88f2e9609cef51f64e40f0635c9d"><div class="ttname"><a href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d">apic_enabled</a></div><div class="ttdeci">static int apic_enabled(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00131">lapic.c:131</a></div></div>
<div class="ttc" id="alapic_8c_html_ad063ed2f42a913efa82bad52d1b58aa8"><div class="ttname"><a href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8">apic_test_vector</a></div><div class="ttdeci">static int apic_test_vector(int vec, void *bitmap)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00105">lapic.c:105</a></div></div>
<div class="ttc" id="alapic_8h_html_a3b7d7d35c001fcefc23520569c5d81d7"><div class="ttname"><a href="lapic_8h.html#a3b7d7d35c001fcefc23520569c5d81d7">KVM_APIC_INIT</a></div><div class="ttdeci">#define KVM_APIC_INIT</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00012">lapic.h:12</a></div></div>
<div class="ttc" id="alapic_8h_html_ada4d7479e3c0f2e45cb1565dab78c198"><div class="ttname"><a href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198">kvm_lapic_clear_vector</a></div><div class="ttdeci">static void kvm_lapic_clear_vector(int vec, void *bitmap)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00154">lapic.h:154</a></div></div>
<div class="ttc" id="alapic_8h_html_aecd6ca5347dbb81047584149b2291019"><div class="ttname"><a href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019">kvm_lapic_set_vector</a></div><div class="ttdeci">static void kvm_lapic_set_vector(int vec, void *bitmap)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00159">lapic.h:159</a></div></div>
<div class="ttc" id="alapic_8h_html_af7a4bf414bb99391b6c9e674d87cdc41"><div class="ttname"><a href="lapic_8h.html#af7a4bf414bb99391b6c9e674d87cdc41">KVM_APIC_SIPI</a></div><div class="ttdeci">#define KVM_APIC_SIPI</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00013">lapic.h:13</a></div></div>
<div class="ttc" id="asmm_8h_html_adbee86ed847633616e1e3afcc7e98e6e"><div class="ttname"><a href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e">kvm_inject_smi</a></div><div class="ttdeci">static int kvm_inject_smi(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="smm_8h_source.html#l00159">smm.h:159</a></div></div>
<div class="ttc" id="astructdest__map_html"><div class="ttname"><a href="structdest__map.html">dest_map</a></div><div class="ttdef"><b>Definition:</b> <a href="ioapic_8h_source.html#l00040">ioapic.h:40</a></div></div>
<div class="ttc" id="astructdest__map_html_a138657a6c6b48bf8aea782ba1a7ccca4"><div class="ttname"><a href="structdest__map.html#a138657a6c6b48bf8aea782ba1a7ccca4">dest_map::vectors</a></div><div class="ttdeci">u8 vectors[KVM_MAX_VCPU_IDS]</div><div class="ttdef"><b>Definition:</b> <a href="ioapic_8h_source.html#l00048">ioapic.h:48</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_a54741597d07b2792d2da72ea301ad648"><div class="ttname"><a href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">kvm_lapic::vcpu</a></div><div class="ttdeci">struct kvm_vcpu * vcpu</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00064">lapic.h:64</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_a9122fb8adbd131d159cb064fe6a3f01e"><div class="ttname"><a href="structkvm__lapic.html#a9122fb8adbd131d159cb064fe6a3f01e">kvm_lapic::sipi_vector</a></div><div class="ttdeci">unsigned int sipi_vector</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00082">lapic.h:82</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_ade63c790c3a1363b7af1853b98bacf1a"><div class="ttname"><a href="structkvm__lapic.html#ade63c790c3a1363b7af1853b98bacf1a">kvm_lapic::pending_events</a></div><div class="ttdeci">unsigned long pending_events</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00081">lapic.h:81</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_ae3a8009387d4fa77d8bc5ba244f7f6aa"><div class="ttname"><a href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">kvm_lapic::regs</a></div><div class="ttdeci">void * regs</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00078">lapic.h:78</a></div></div>
<div class="ttc" id="ax86_8c_html_a09da0747db3b012bff918f94816f0bd0"><div class="ttname"><a href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0">kvm_inject_nmi</a></div><div class="ttdeci">void kvm_inject_nmi(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l00818">x86.c:818</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a10d887046aaccb6cf4178421594dee10_cgraph.png" border="0" usemap="#alapic_8c_a10d887046aaccb6cf4178421594dee10_cgraph" alt=""/></div>
<map name="alapic_8c_a10d887046aaccb6cf4178421594dee10_cgraph" id="alapic_8c_a10d887046aaccb6cf4178421594dee10_cgraph">
<area shape="rect" title=" " alt="" coords="5,183,143,209"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="225,31,333,57"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="214,81,343,108"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="215,132,342,159"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="216,183,341,209"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="191,233,367,260"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="197,284,361,311"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="217,335,340,361"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="433,5,604,32"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="434,56,603,83"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="415,309,623,336"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="442,360,595,387"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a10d887046aaccb6cf4178421594dee10_icgraph.png" border="0" usemap="#alapic_8c_a10d887046aaccb6cf4178421594dee10_icgraph" alt=""/></div>
<map name="alapic_8c_a10d887046aaccb6cf4178421594dee10_icgraph" id="alapic_8c_a10d887046aaccb6cf4178421594dee10_icgraph">
<area shape="rect" title=" " alt="" coords="1201,493,1339,519"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="979,318,1153,345"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="998,610,1134,637"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="738,221,925,263"/>
<area shape="rect" href="pmu_8c.html#a03a16f548326b68245a4bf0555bea777" title=" " alt="" coords="746,345,917,371"/>
<area shape="rect" href="x86_8c.html#a130b6ed14cf18384646cb31251dd104e" title=" " alt="" coords="739,291,924,318"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="510,122,657,149"/>
<area shape="rect" href="irq_8h.html#ac79f0e40ed0e1cde83a09aef506fb373" title=" " alt="" coords="483,229,684,255"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="263,5,431,47"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="289,71,406,98"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="285,122,410,149"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="268,173,427,199"/>
<area shape="rect" href="irq_8c.html#a2d54275d9e142ae8e337298689483728" title=" " alt="" coords="271,224,424,265"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="68,246,149,273"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="279,345,416,371"/>
<area shape="rect" href="x86_8c.html#a2de10bf19fee1e2a9cb47b6f491a18b4" title=" " alt="" coords="506,280,661,321"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="268,290,427,317"/>
<area shape="rect" href="lapic_8c.html#a33f4e295e9710d133e3e38e0aed35edb" title=" " alt="" coords="775,795,888,822"/>
<area shape="rect" href="x86_8c.html#a62f68db08e13f0a4f3d158afda4631b1" title=" " alt="" coords="746,603,917,644"/>
<area shape="rect" href="hyperv_8c.html#a31df0137f9f8af335cbac3d4179b12a2" title=" " alt="" coords="732,745,931,771"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="489,682,678,709"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="754,477,909,519"/>
<area shape="rect" href="hyperv_8c.html#abc5b43adce506bcd416c9e84aa6cf54b" title=" " alt="" coords="755,546,907,573"/>
<area shape="rect" href="lapic_8c.html#a7195db5c58bcea2e080ee79cdaeae617" title=" " alt="" coords="516,859,651,886"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="19,901,198,927"/>
<area shape="rect" href="async__pf_8c.html#ad9b3dc2e31779a009859785fae9a8ec5" title=" " alt="" coords="514,631,653,658"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="503,565,664,607"/>
<area shape="rect" href="async__pf_8c.html#a55ca283598f3d739a56b50a0f7b908e2" title=" " alt="" coords="268,446,427,473"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="260,395,435,422"/>
<area shape="rect" href="hyperv_8c.html#a4ca4f7e6e021870753e15fa1072e828d" title=" " alt="" coords="516,758,651,785"/>
<area shape="rect" href="hyperv_8c.html#ac96f1fa9ec6ac0ac26c24ca65cc1547e" title=" " alt="" coords="277,850,418,877"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="290,497,405,523"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="274,618,421,645"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="267,799,428,826"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="293,698,402,725"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="294,749,401,775"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="53,378,165,405"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="30,429,187,455"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="5,479,212,506"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="5,327,212,354"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="33,581,185,623"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="30,647,187,674"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="27,530,191,557"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="12,749,205,775"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="23,698,195,725"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="25,850,192,877"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="37,799,180,826"/>
<area shape="rect" href="irq__comm_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="483,463,684,490"/>
<area shape="rect" href="xen_8c.html#a7ba53f4f869b74569192380f1adfd40c" title=" " alt="" coords="502,397,665,439"/>
<area shape="rect" href="hyperv_8c.html#acbc8238b9eb8f24485d6bc9eefc06474" title=" " alt="" coords="515,514,652,541"/>
</map>
</div>

</div>
</div>
<a id="a834f2a3187924d07d18afb6b8d6645f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a834f2a3187924d07d18afb6b8d6645f3">&#9670;&nbsp;</a></span>__apic_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u32 __apic_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01566">1566</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;{</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    u32 val = 0;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160; </div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <span class="keywordflow">if</span> (offset &gt;= <a class="code" href="lapic_8c.html#a5befec925c8dea176d75488112b8cc3a">LAPIC_MMIO_LENGTH</a>)</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160; </div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    <span class="keywordflow">switch</span> (offset) {</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <span class="keywordflow">case</span> APIC_ARBPRI:</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160; </div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <span class="keywordflow">case</span> APIC_TMCCT:    <span class="comment">/* Timer CCR */</span></div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0">apic_lvtt_tscdeadline</a>(apic))</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160; </div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        val = <a class="code" href="lapic_8c.html#a5bf640da1dfc1be09d89fb23c7f2e954">apic_get_tmcct</a>(apic);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <span class="keywordflow">case</span> APIC_PROCPRI:</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        <a class="code" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab">apic_update_ppr</a>(apic);</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        val = <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, offset);</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <span class="keywordflow">case</span> APIC_TASKPRI:</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        <a class="code" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea">report_tpr_access</a>(apic, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        fallthrough;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        val = <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, offset);</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    }</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160; </div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    <span class="keywordflow">return</span> val;</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a5befec925c8dea176d75488112b8cc3a"><div class="ttname"><a href="lapic_8c.html#a5befec925c8dea176d75488112b8cc3a">LAPIC_MMIO_LENGTH</a></div><div class="ttdeci">#define LAPIC_MMIO_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00057">lapic.c:57</a></div></div>
<div class="ttc" id="alapic_8c_html_a5bf640da1dfc1be09d89fb23c7f2e954"><div class="ttname"><a href="lapic_8c.html#a5bf640da1dfc1be09d89fb23c7f2e954">apic_get_tmcct</a></div><div class="ttdeci">static u32 apic_get_tmcct(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01529">lapic.c:1529</a></div></div>
<div class="ttc" id="alapic_8c_html_a7cfae0ee851075e6141d0446f4a133ab"><div class="ttname"><a href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab">apic_update_ppr</a></div><div class="ttdeci">static void apic_update_ppr(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00966">lapic.c:966</a></div></div>
<div class="ttc" id="alapic_8c_html_ab18679414f6ced1b8597fc3a9b445dea"><div class="ttname"><a href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea">report_tpr_access</a></div><div class="ttdeci">static void report_tpr_access(struct kvm_lapic *apic, bool write)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01560">lapic.c:1560</a></div></div>
<div class="ttc" id="alapic_8c_html_adaceffbfc91320b193a66d974fb12ce0"><div class="ttname"><a href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0">apic_lvtt_tscdeadline</a></div><div class="ttdeci">static int apic_lvtt_tscdeadline(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00553">lapic.c:553</a></div></div>
<div class="ttc" id="alapic_8h_html_a8cd1df8b4c079c23a522d09c964da0ee"><div class="ttname"><a href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a></div><div class="ttdeci">static u32 kvm_lapic_get_reg(struct kvm_lapic *apic, int reg_off)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00179">lapic.h:179</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a834f2a3187924d07d18afb6b8d6645f3_cgraph.png" border="0" usemap="#alapic_8c_a834f2a3187924d07d18afb6b8d6645f3_cgraph" alt=""/></div>
<map name="alapic_8c_a834f2a3187924d07d18afb6b8d6645f3_cgraph" id="alapic_8c_a834f2a3187924d07d18afb6b8d6645f3_cgraph">
<area shape="rect" title=" " alt="" coords="5,107,104,133"/>
<area shape="rect" href="lapic_8c.html#a5bf640da1dfc1be09d89fb23c7f2e954" title=" " alt="" coords="375,5,496,32"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="564,21,709,48"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="152,107,312,133"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="167,157,297,184"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="163,216,301,243"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="771,21,929,48"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="364,107,507,133"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="364,158,507,199"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="771,72,929,99"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="565,123,709,149"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1007,123,1157,149"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="771,123,929,149"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="559,173,715,200"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="790,173,910,200"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="360,224,511,251"/>
<area shape="rect" href="kvm__cache__regs_8h.html#ad97ff6b975b461b815e6749d29c65446" title=" " alt="" coords="581,224,692,251"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a5d9eb0563cffb1e3ed1cccebabcf2df6" title=" " alt="" coords="763,224,937,251"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="985,224,1179,251"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a834f2a3187924d07d18afb6b8d6645f3_icgraph.png" border="0" usemap="#alapic_8c_a834f2a3187924d07d18afb6b8d6645f3_icgraph" alt=""/></div>
<map name="alapic_8c_a834f2a3187924d07d18afb6b8d6645f3_icgraph" id="alapic_8c_a834f2a3187924d07d18afb6b8d6645f3_icgraph">
<area shape="rect" title=" " alt="" coords="1455,46,1553,73"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="1253,17,1407,43"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="1253,71,1407,98"/>
<area shape="rect" href="x86_8c.html#aca5ab82fb669f6a99e011293efed0d5d" title=" " alt="" coords="1051,5,1203,47"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="829,13,987,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="639,13,763,39"/>
<area shape="rect" href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1" title=" " alt="" coords="1061,71,1192,98"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="1048,122,1205,149"/>
<area shape="rect" href="lapic_8c.html#ae9bd2989ca4c31caf8aa56b8c7dfd248" title=" " alt="" coords="816,97,1000,123"/>
<area shape="rect" href="lapic_8c.html#a179cfc2268db31f40b5bd9b1c247a37b" title=" " alt="" coords="401,147,571,174"/>
<area shape="rect" href="hyperv_8c.html#acd3e0dad98bde91068115067f6ec3ae6" title=" " alt="" coords="633,97,768,123"/>
<area shape="rect" href="hyperv_8c.html#a23d197f9ae27f820fa7e977aec518698" title=" " alt="" coords="387,97,585,123"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="164,122,339,149"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="5,97,116,123"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="5,147,116,174"/>
</map>
</div>

</div>
</div>
<a id="a33d332d149d0b1dd33e02b2ab98009a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33d332d149d0b1dd33e02b2ab98009a9">&#9670;&nbsp;</a></span>__apic_test_and_clear_vector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int __apic_test_and_clear_vector </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>bitmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00123">123</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;{</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">return</span> __test_and_clear_bit(<a class="code" href="lapic_8h.html#a9c7a9b90f9a68f13aa4b9395a275ca96">VEC_POS</a>(vec), (bitmap) + <a class="code" href="lapic_8h.html#aba88c7489787a27e53b077679ce7b534">REG_POS</a>(vec));</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div>
<div class="ttc" id="alapic_8h_html_a9c7a9b90f9a68f13aa4b9395a275ca96"><div class="ttname"><a href="lapic_8h.html#a9c7a9b90f9a68f13aa4b9395a275ca96">VEC_POS</a></div><div class="ttdeci">#define VEC_POS(v)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00151">lapic.h:151</a></div></div>
<div class="ttc" id="alapic_8h_html_aba88c7489787a27e53b077679ce7b534"><div class="ttname"><a href="lapic_8h.html#aba88c7489787a27e53b077679ce7b534">REG_POS</a></div><div class="ttdeci">#define REG_POS(v)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00152">lapic.h:152</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a33d332d149d0b1dd33e02b2ab98009a9_icgraph.png" border="0" usemap="#alapic_8c_a33d332d149d0b1dd33e02b2ab98009a9_icgraph" alt=""/></div>
<map name="alapic_8c_a33d332d149d0b1dd33e02b2ab98009a9_icgraph" id="alapic_8c_a33d332d149d0b1dd33e02b2ab98009a9_icgraph">
<area shape="rect" title=" " alt="" coords="1849,111,2015,153"/>
<area shape="rect" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843" title=" " alt="" coords="1691,119,1801,145"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="1540,119,1643,145"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="1317,57,1492,98"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1326,148,1483,175"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="1090,15,1254,57"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="864,5,1001,32"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="671,5,752,32"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="392,5,579,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="189,5,313,32"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1105,97,1239,124"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1075,148,1269,175"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1091,224,1253,251"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1101,300,1243,327"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="857,57,1009,98"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="843,123,1022,149"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="863,173,1003,200"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="632,115,791,157"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="839,224,1027,251"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="399,275,572,301"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="645,224,778,251"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,224,584,251"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,249,339,276"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,199,101,225"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,249,115,276"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,300,116,327"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="857,325,1008,352"/>
</map>
</div>

</div>
</div>
<a id="a3fc79a6339260d167eb85050cc787149"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fc79a6339260d167eb85050cc787149">&#9670;&nbsp;</a></span>__apic_test_and_set_vector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int __apic_test_and_set_vector </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>bitmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00118">118</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;{</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">return</span> __test_and_set_bit(<a class="code" href="lapic_8h.html#a9c7a9b90f9a68f13aa4b9395a275ca96">VEC_POS</a>(vec), (bitmap) + <a class="code" href="lapic_8h.html#aba88c7489787a27e53b077679ce7b534">REG_POS</a>(vec));</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a3fc79a6339260d167eb85050cc787149_icgraph.png" border="0" usemap="#alapic_8c_a3fc79a6339260d167eb85050cc787149_icgraph" alt=""/></div>
<map name="alapic_8c_a3fc79a6339260d167eb85050cc787149_icgraph" id="alapic_8c_a3fc79a6339260d167eb85050cc787149_icgraph">
<area shape="rect" title=" " alt="" coords="1732,229,1885,270"/>
<area shape="rect" href="lapic_8c.html#acba5fed3ebeb7a85d9cb154d13b7f983" title=" " alt="" coords="1585,236,1684,263"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="1361,236,1537,263"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="1141,236,1313,263"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="923,99,1093,141"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="931,265,1085,292"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="698,5,835,32"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="471,5,552,32"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="437,83,585,109"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="705,173,828,200"/>
<area shape="rect" href="vmx_2nested_8c.html#a4e307e2bcf664c83265b1442e3fc8da2" title=" " alt="" coords="679,225,855,266"/>
<area shape="rect" href="vmx_2nested_8c.html#ad3cab9cf8633364513bd6a24caecf41a" title=" " alt="" coords="659,290,875,331"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="412,327,611,353"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fcc88ceee4f57a3dbf23fedb46a5cb" title=" " alt="" coords="691,107,842,149"/>
<area shape="rect" href="vmx_2nested_8c.html#aedc5821e9af5c7bd4aac6c06f4ca046f" title=" " alt="" coords="677,407,857,433"/>
<area shape="rect" href="vmx_2hyperv_8c.html#a937e30dece4579b71b17efcd54c1d910" title=" " alt="" coords="675,458,859,499"/>
<area shape="rect" href="vmx_2nested_8c.html#a64e6550fab681b40c832fe4e2d5e3b95" title=" " alt="" coords="694,524,839,551"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="203,83,338,109"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="426,163,597,205"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="207,171,334,197"/>
<area shape="rect" href="vmx_2nested_8c.html#a6a1c45a52fde9844f4431a9db00dbf9f" title=" " alt="" coords="430,229,593,270"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="205,236,336,263"/>
<area shape="rect" href="vmx_2nested_8c.html#a2c53f6d5cd8133df2c8e67ab90b9aa5f" title=" " alt="" coords="425,473,598,500"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="456,524,567,551"/>
<area shape="rect" href="vmx_2nested_8c.html#acee8cb651216e97a9c12b807243ae59a" title=" " alt="" coords="427,575,596,601"/>
<area shape="rect" href="vmx_8c.html#ac1cd58b9f223df9d6b5fe9695c0cbe2b" title=" " alt="" coords="209,473,332,500"/>
</map>
</div>

</div>
</div>
<a id="a1bb0a1640f9f291f5c3154c6a2c40986"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bb0a1640f9f291f5c3154c6a2c40986">&#9670;&nbsp;</a></span>__apic_update_ppr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool __apic_update_ppr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32 *&#160;</td>
          <td class="paramname"><em>new_ppr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00944">944</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;{</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    u32 tpr, isrv, ppr, old_ppr;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="keywordtype">int</span> isr;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160; </div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    old_ppr = <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_PROCPRI);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    tpr = <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_TASKPRI);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    isr = <a class="code" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0">apic_find_highest_isr</a>(apic);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    isrv = (isr != -1) ? isr : 0;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160; </div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="keywordflow">if</span> ((tpr &amp; 0xf0) &gt;= (isrv &amp; 0xf0))</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        ppr = tpr &amp; 0xff;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        ppr = isrv &amp; 0xf0;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160; </div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    *new_ppr = ppr;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="keywordflow">if</span> (old_ppr != ppr)</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_PROCPRI, ppr);</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160; </div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keywordflow">return</span> ppr &lt; old_ppr;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a80d977ac48cfa76440f2961e38b23fd0"><div class="ttname"><a href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0">apic_find_highest_isr</a></div><div class="ttdeci">static int apic_find_highest_isr(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00768">lapic.c:768</a></div></div>
<div class="ttc" id="alapic_8c_html_ab2ee275fa1bc17aa0bfde435723b8f48"><div class="ttname"><a href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a></div><div class="ttdeci">static void kvm_lapic_set_reg(struct kvm_lapic *apic, int reg_off, u32 val)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00077">lapic.c:77</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a1bb0a1640f9f291f5c3154c6a2c40986_cgraph.png" border="0" usemap="#alapic_8c_a1bb0a1640f9f291f5c3154c6a2c40986_cgraph" alt=""/></div>
<map name="alapic_8c_a1bb0a1640f9f291f5c3154c6a2c40986_cgraph" id="alapic_8c_a1bb0a1640f9f291f5c3154c6a2c40986_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,148,83"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="196,5,355,32"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="203,56,348,83"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="203,107,347,133"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="407,5,557,32"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="403,56,561,83"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="403,107,561,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a1bb0a1640f9f291f5c3154c6a2c40986_icgraph.png" border="0" usemap="#alapic_8c_a1bb0a1640f9f291f5c3154c6a2c40986_icgraph" alt=""/></div>
<map name="alapic_8c_a1bb0a1640f9f291f5c3154c6a2c40986_icgraph" id="alapic_8c_a1bb0a1640f9f291f5c3154c6a2c40986_icgraph">
<area shape="rect" title=" " alt="" coords="1233,650,1376,677"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="1031,457,1161,483"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="765,650,941,677"/>
<area shape="rect" href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf" title=" " alt="" coords="1007,751,1185,778"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="804,431,903,458"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="802,307,905,334"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="803,223,904,250"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="777,118,929,145"/>
<area shape="rect" href="lapic_8c.html#a44fec9a6b84f831af88ffed6b2325545" title=" " alt="" coords="771,482,936,509"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="789,533,918,559"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="521,377,674,403"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="521,431,674,458"/>
<area shape="rect" href="x86_8c.html#aca5ab82fb669f6a99e011293efed0d5d" title=" " alt="" coords="273,365,425,407"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="25,185,184,211"/>
<area shape="rect" href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1" title=" " alt="" coords="284,431,415,458"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="271,482,428,509"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="510,300,685,341"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="519,198,676,225"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="267,300,431,341"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="36,634,173,661"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="282,97,417,123"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="252,147,447,174"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="269,198,430,225"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="278,249,421,275"/>
<area shape="rect" href="lapic_8c.html#aee34622e495b500817e0b0905bfd0d4c" title=" " alt="" coords="527,101,668,127"/>
<area shape="rect" href="x86_8c.html#a120377d5a571d3fb86660cd5f6cd982d" title=" " alt="" coords="297,46,402,73"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="522,12,673,53"/>
<area shape="rect" href="vmx_8c.html#afb231b1a3b0ccf655edde89034273129" title=" " alt="" coords="495,482,700,509"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="511,650,683,677"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="264,736,435,777"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="272,685,427,711"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="5,743,204,770"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="533,558,662,585"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="256,634,443,661"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="263,533,435,559"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="264,583,435,610"/>
<area shape="rect" href="irq_8c.html#a82ee83566d2724a298b67f23f481976b" title=" " alt="" coords="748,853,959,879"/>
<area shape="rect" href="irq_8c.html#ae3151f072a1bb4a732ee3854ab6cf619" title=" " alt="" coords="766,751,941,778"/>
<area shape="rect" href="vmx_2nested_8c.html#add1e82c32385142c0fca04a1db8cbc3a" title=" " alt="" coords="788,979,919,1006"/>
<area shape="rect" href="svm_8c.html#a5c26f1ceaa6cc778d986bd33629dc539" title=" " alt="" coords="547,929,648,955"/>
<area shape="rect" href="svm_8c.html#a4a2beb03d1ef1d9e803c22570b5806d1" title=" " alt="" coords="284,1005,415,1031"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="260,1106,439,1133"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="27,954,182,981"/>
<area shape="rect" href="svm_8c.html#a0a2c47b46c5f4c14c1ae6a64119bcb60" title=" " alt="" coords="284,903,415,930"/>
<area shape="rect" href="svm_8c.html#a5df90c8772700a60441f2ba19472f726" title=" " alt="" coords="294,1055,405,1082"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="265,954,433,981"/>
<area shape="rect" href="x86_8c.html#a54ec69b24c80207e4e6122994db0a466" title=" " alt="" coords="512,701,683,727"/>
<area shape="rect" href="svm_2nested_8c.html#a3286f29b650004d599595557d310136e" title=" " alt="" coords="499,751,696,778"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fecee9010894e3a1513a0924e24dd6" title=" " alt="" coords="529,979,666,1006"/>
<area shape="rect" href="vmx_2nested_8c.html#a23e3de8c964e87404eea818be6f70154" title=" " alt="" coords="526,1030,669,1057"/>
</map>
</div>

</div>
</div>
<a id="aed305556b8d09cfaa135cca071bd8c22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed305556b8d09cfaa135cca071bd8c22">&#9670;&nbsp;</a></span>__kvm_apic_update_irr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool __kvm_apic_update_irr </td>
          <td>(</td>
          <td class="paramtype">u32 *&#160;</td>
          <td class="paramname"><em>pir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>regs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>max_irr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00654">654</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;{</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    u32 i, vec;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    u32 pir_val, irr_val, prev_irr_val;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keywordtype">int</span> max_updated_irr;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    max_updated_irr = -1;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    *max_irr = -1;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">for</span> (i = vec = 0; i &lt;= 7; i++, vec += 32) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        u32 *p_irr = (u32 *)(regs + APIC_IRR + i * 0x10);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        irr_val = *p_irr;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        pir_val = READ_ONCE(<a class="code" href="posted__intr_8h.html#a2707c542febe155b1642f9b9a9c0bc79">pir</a>[i]);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="keywordflow">if</span> (pir_val) {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            pir_val = xchg(&amp;<a class="code" href="posted__intr_8h.html#a2707c542febe155b1642f9b9a9c0bc79">pir</a>[i], 0);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            prev_irr_val = irr_val;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                irr_val = prev_irr_val | pir_val;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            } <span class="keywordflow">while</span> (prev_irr_val != irr_val &amp;&amp;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                 !try_cmpxchg(p_irr, &amp;prev_irr_val, irr_val));</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            <span class="keywordflow">if</span> (prev_irr_val != irr_val)</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                max_updated_irr = __fls(irr_val ^ prev_irr_val) + vec;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        }</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keywordflow">if</span> (irr_val)</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            *max_irr = __fls(irr_val) + vec;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    }</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">return</span> ((max_updated_irr != -1) &amp;&amp;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        (max_updated_irr == *max_irr));</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;}</div>
<div class="ttc" id="aposted__intr_8h_html_a2707c542febe155b1642f9b9a9c0bc79"><div class="ttname"><a href="posted__intr_8h.html#a2707c542febe155b1642f9b9a9c0bc79">pir</a></div><div class="ttdeci">u32 pir[8]</div><div class="ttdef"><b>Definition:</b> <a href="posted__intr_8h_source.html#l00000">posted_intr.h:0</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aed305556b8d09cfaa135cca071bd8c22_icgraph.png" border="0" usemap="#alapic_8c_aed305556b8d09cfaa135cca071bd8c22_icgraph" alt=""/></div>
<map name="alapic_8c_aed305556b8d09cfaa135cca071bd8c22_icgraph" id="alapic_8c_aed305556b8d09cfaa135cca071bd8c22_icgraph">
<area shape="rect" title=" " alt="" coords="471,35,643,61"/>
<area shape="rect" href="lapic_8c.html#a922ce0b7b20cf9b9ef4930d3d81e8360" title=" " alt="" coords="258,5,417,32"/>
<area shape="rect" href="vmx_2nested_8c.html#a1202b81c0b68f0555ec94d77f1243029" title=" " alt="" coords="252,57,423,98"/>
<area shape="rect" href="vmx_8c.html#ac2197e1b1fbae590edacaecfd1d0974c" title=" " alt="" coords="28,5,181,32"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="5,64,204,91"/>
</map>
</div>

</div>
</div>
<a id="aa06cb4ebbfa40dbfa494b3b4cd9f8833"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa06cb4ebbfa40dbfa494b3b4cd9f8833">&#9670;&nbsp;</a></span>__kvm_lapic_get_reg64()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static __always_inline u64 __kvm_lapic_get_reg64 </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>regs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00082">82</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;{</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    BUILD_BUG_ON(reg != APIC_ICR);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">return</span> *((u64 *) (regs + reg));</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aa06cb4ebbfa40dbfa494b3b4cd9f8833_icgraph.png" border="0" usemap="#alapic_8c_aa06cb4ebbfa40dbfa494b3b4cd9f8833_icgraph" alt=""/></div>
<map name="alapic_8c_aa06cb4ebbfa40dbfa494b3b4cd9f8833_icgraph" id="alapic_8c_aa06cb4ebbfa40dbfa494b3b4cd9f8833_icgraph">
<area shape="rect" title=" " alt="" coords="1527,141,1701,167"/>
<area shape="rect" href="lapic_8c.html#a5862d5df95ddd956a652f1dd3f319706" title=" " alt="" coords="1315,78,1479,105"/>
<area shape="rect" href="lapic_8c.html#a378a0961283ea67791303e70114fb10d" title=" " alt="" coords="1316,202,1477,229"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="1093,21,1246,47"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1093,78,1245,105"/>
<area shape="rect" href="x86_8c.html#aca5ab82fb669f6a99e011293efed0d5d" title=" " alt="" coords="856,5,1008,47"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="633,46,792,73"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="424,46,548,73"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="857,71,1007,112"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1072,202,1267,229"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="1091,303,1248,330"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="856,136,1008,177"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="843,202,1021,229"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="862,253,1002,279"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="633,195,792,236"/>
<area shape="rect" href="lapic_8c.html#ae9bd2989ca4c31caf8aa56b8c7dfd248" title=" " alt="" coords="840,303,1024,330"/>
<area shape="rect" href="lapic_8c.html#a179cfc2268db31f40b5bd9b1c247a37b" title=" " alt="" coords="401,354,571,381"/>
<area shape="rect" href="hyperv_8c.html#acd3e0dad98bde91068115067f6ec3ae6" title=" " alt="" coords="645,303,780,330"/>
<area shape="rect" href="hyperv_8c.html#a23d197f9ae27f820fa7e977aec518698" title=" " alt="" coords="387,303,585,330"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="164,329,339,355"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="5,303,116,330"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="5,354,116,381"/>
</map>
</div>

</div>
</div>
<a id="a5de365e734b929b65e2d75f62cea6f7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5de365e734b929b65e2d75f62cea6f7e">&#9670;&nbsp;</a></span>__kvm_lapic_set_reg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __kvm_lapic_set_reg </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>regs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reg_off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00072">72</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    *((u32 *) (regs + reg_off)) = val;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a5de365e734b929b65e2d75f62cea6f7e_icgraph.png" border="0" usemap="#alapic_8c_a5de365e734b929b65e2d75f62cea6f7e_icgraph" alt=""/></div>
<map name="alapic_8c_a5de365e734b929b65e2d75f62cea6f7e_icgraph" id="alapic_8c_a5de365e734b929b65e2d75f62cea6f7e_icgraph">
<area shape="rect" title=" " alt="" coords="1761,93,1920,120"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="636,119,789,145"/>
<area shape="rect" href="lapic_8c.html#a5862d5df95ddd956a652f1dd3f319706" title=" " alt="" coords="1117,93,1281,120"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1569,625,1713,652"/>
<area shape="rect" href="x86_8c.html#aca5ab82fb669f6a99e011293efed0d5d" title=" " alt="" coords="405,221,557,262"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,507,336,533"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,507,129,533"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="876,499,1028,525"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="406,499,557,541"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="1359,271,1502,297"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="634,640,791,667"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="901,397,1003,424"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="887,701,1017,728"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="1143,499,1254,525"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="1133,651,1264,677"/>
<area shape="rect" href="lapic_8c.html#a200be826b3634c1b5a377464f35d540f" title=" " alt="" coords="877,1057,1027,1098"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="1343,1031,1518,1057"/>
<area shape="rect" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4" title=" " alt="" coords="1130,803,1267,829"/>
<area shape="rect" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554" title=" " alt="" coords="1131,853,1267,880"/>
<area shape="rect" href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf" title=" " alt="" coords="1115,955,1282,981"/>
<area shape="rect" href="lapic_8c.html#a22d25ec6370d0efd4c569b7317d28098" title=" " alt="" coords="1340,549,1521,576"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="1344,600,1517,627"/>
<area shape="rect" href="lapic_8c.html#a0efcb9037756de47e9d28f0a5ea1009f" title=" " alt="" coords="1350,397,1511,424"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="1134,296,1263,323"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="864,245,1040,272"/>
<area shape="rect" href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf" title=" " alt="" coords="1109,195,1288,221"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="903,296,1001,323"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="901,448,1003,475"/>
<area shape="rect" href="lapic_8c.html#a44fec9a6b84f831af88ffed6b2325545" title=" " alt="" coords="869,347,1035,373"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="414,680,549,707"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="384,781,579,808"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="401,579,562,605"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="410,629,553,656"/>
<area shape="rect" href="lapic_8c.html#aee34622e495b500817e0b0905bfd0d4c" title=" " alt="" coords="642,389,783,416"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="631,441,795,482"/>
<area shape="rect" href="x86_8c.html#a120377d5a571d3fb86660cd5f6cd982d" title=" " alt="" coords="429,389,534,416"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="413,731,550,757"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="627,245,799,272"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="648,701,777,728"/>
<area shape="rect" href="irq_8c.html#a82ee83566d2724a298b67f23f481976b" title=" " alt="" coords="847,195,1057,221"/>
<area shape="rect" href="irq_8c.html#ae3151f072a1bb4a732ee3854ab6cf619" title=" " alt="" coords="865,93,1039,120"/>
<area shape="rect" href="vmx_2nested_8c.html#add1e82c32385142c0fca04a1db8cbc3a" title=" " alt="" coords="887,144,1017,171"/>
<area shape="rect" href="x86_8c.html#a10dfde66dc94e352514570cc4a2beaa2" title=" " alt="" coords="635,998,790,1039"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="1105,1107,1292,1149"/>
<area shape="rect" href="pmu_8c.html#a03a16f548326b68245a4bf0555bea777" title=" " alt="" coords="627,849,798,876"/>
<area shape="rect" href="x86_8c.html#a130b6ed14cf18384646cb31251dd104e" title=" " alt="" coords="1106,1056,1291,1083"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="879,1123,1025,1149"/>
<area shape="rect" href="cpuid_8c.html#ae8f7489a3e05a9bcd5dfdae82c33d618" title=" " alt="" coords="875,939,1029,981"/>
<area shape="rect" href="lapic_8c.html#a8d747385873e52f47e85179c21521e73" title=" " alt="" coords="1121,549,1276,576"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1127,397,1270,424"/>
</map>
</div>

</div>
</div>
<a id="a39839decdbbb9e8a6718f3ac7c0b3707"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39839decdbbb9e8a6718f3ac7c0b3707">&#9670;&nbsp;</a></span>__kvm_lapic_set_reg64()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static __always_inline void __kvm_lapic_set_reg64 </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>regs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00093">93</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;{</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    BUILD_BUG_ON(reg != APIC_ICR);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    *((u64 *) (regs + reg)) = val;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a39839decdbbb9e8a6718f3ac7c0b3707_icgraph.png" border="0" usemap="#alapic_8c_a39839decdbbb9e8a6718f3ac7c0b3707_icgraph" alt=""/></div>
<map name="alapic_8c_a39839decdbbb9e8a6718f3ac7c0b3707_icgraph" id="alapic_8c_a39839decdbbb9e8a6718f3ac7c0b3707_icgraph">
<area shape="rect" title=" " alt="" coords="1815,160,1989,187"/>
<area shape="rect" href="lapic_8c.html#a5862d5df95ddd956a652f1dd3f319706" title=" " alt="" coords="1603,96,1767,123"/>
<area shape="rect" href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2" title=" " alt="" coords="1605,189,1765,216"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="1396,39,1549,65"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1397,96,1549,123"/>
<area shape="rect" href="x86_8c.html#aca5ab82fb669f6a99e011293efed0d5d" title=" " alt="" coords="1169,23,1321,65"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="927,31,1085,57"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,44,129,71"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1170,89,1321,130"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1408,189,1537,216"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="1391,333,1555,360"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1181,189,1310,216"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="913,139,1099,165"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="920,189,1092,216"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="921,240,1091,267"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,37,350,78"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,103,364,129"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="713,141,808,168"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="692,192,829,219"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="470,141,551,168"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="661,243,861,269"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="1168,294,1323,335"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1148,393,1343,420"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1165,524,1326,551"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="929,291,1083,333"/>
<area shape="rect" href="svm_8c.html#a82c8447e70f06dd52623c696446104b5" title=" " alt="" coords="657,297,864,324"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="657,348,864,375"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="453,297,569,324"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="452,348,569,375"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="930,357,1082,398"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="917,423,1095,449"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="936,473,1076,500"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="681,415,840,457"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="912,524,1100,551"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="424,575,597,601"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="694,524,827,551"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="412,524,609,551"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="183,549,358,576"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="27,499,108,525"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="13,549,122,576"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="12,600,123,627"/>
</map>
</div>

</div>
</div>
<a id="accb9eec870235e61feeef31a7c0a6084"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accb9eec870235e61feeef31a7c0a6084">&#9670;&nbsp;</a></span>__kvm_migrate_apic_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __kvm_migrate_apic_timer </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03029">3029</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;{</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;    <span class="keyword">struct </span>hrtimer *timer;</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160; </div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(vcpu) ||</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;        <a class="code" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9">kvm_can_post_timer_interrupt</a>(vcpu))</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160; </div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;    timer = &amp;vcpu-&gt;arch.apic-&gt;lapic_timer.timer;</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;    <span class="keywordflow">if</span> (hrtimer_cancel(timer))</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;        hrtimer_start_expires(timer, HRTIMER_MODE_ABS_HARD);</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_ad7790e6f84a1592b5298b2da79a633a9"><div class="ttname"><a href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9">kvm_can_post_timer_interrupt</a></div><div class="ttdeci">static bool kvm_can_post_timer_interrupt(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00148">lapic.c:148</a></div></div>
<div class="ttc" id="alapic_8h_html_a1d8c9378fcbf62390a89dc3b7f0bdbd4"><div class="ttname"><a href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a></div><div class="ttdeci">static bool lapic_in_kernel(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00186">lapic.h:186</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_accb9eec870235e61feeef31a7c0a6084_cgraph.png" border="0" usemap="#alapic_8c_accb9eec870235e61feeef31a7c0a6084_cgraph" alt=""/></div>
<map name="alapic_8c_accb9eec870235e61feeef31a7c0a6084_cgraph" id="alapic_8c_accb9eec870235e61feeef31a7c0a6084_cgraph">
<area shape="rect" title=" " alt="" coords="5,121,163,162"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="211,70,369,111"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="644,132,763,159"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="438,5,575,32"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="426,56,587,83"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="417,107,596,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_accb9eec870235e61feeef31a7c0a6084_icgraph.png" border="0" usemap="#alapic_8c_accb9eec870235e61feeef31a7c0a6084_icgraph" alt=""/></div>
<map name="alapic_8c_accb9eec870235e61feeef31a7c0a6084_icgraph" id="alapic_8c_accb9eec870235e61feeef31a7c0a6084_icgraph">
<area shape="rect" title=" " alt="" coords="947,5,1104,47"/>
<area shape="rect" href="irq_8c.html#aa78a0c6512b9fd6015a43326c651fbfb" title=" " alt="" coords="727,13,899,39"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="541,13,679,39"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,13,493,39"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,13,364,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="aad64663521c2c2f523dce26a339df367"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad64663521c2c2f523dce26a339df367">&#9670;&nbsp;</a></span>__kvm_wait_lapic_expire()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __kvm_wait_lapic_expire </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01844">1844</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;{</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    u64 guest_tsc, tsc_deadline;</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160; </div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    tsc_deadline = apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a23c6ec12b6c61cf7b3c02ff13099dbcf">expired_tscdeadline</a>;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a23c6ec12b6c61cf7b3c02ff13099dbcf">expired_tscdeadline</a> = 0;</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    guest_tsc = <a class="code" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c">kvm_read_l1_tsc</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, rdtsc());</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    trace_kvm_wait_lapic_expire(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_id, guest_tsc - tsc_deadline);</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160; </div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <span class="keywordflow">if</span> (lapic_timer_advance_dynamic) {</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;        <a class="code" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d">adjust_lapic_timer_advance</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, guest_tsc - tsc_deadline);</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;<span class="comment">         * If the timer fired early, reread the TSC to account for the</span></div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;<span class="comment">         * overhead of the above adjustment to avoid waiting longer</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;<span class="comment">         * than is necessary.</span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        <span class="keywordflow">if</span> (guest_tsc &lt; tsc_deadline)</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;            guest_tsc = <a class="code" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c">kvm_read_l1_tsc</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, rdtsc());</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    }</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160; </div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <span class="keywordflow">if</span> (guest_tsc &lt; tsc_deadline)</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;        <a class="code" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9">__wait_lapic_expire</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, tsc_deadline - guest_tsc);</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a0a1a2c50e4624d010e1a145b3d0228a9"><div class="ttname"><a href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9">__wait_lapic_expire</a></div><div class="ttdeci">static void __wait_lapic_expire(struct kvm_vcpu *vcpu, u64 guest_cycles)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01795">lapic.c:1795</a></div></div>
<div class="ttc" id="alapic_8c_html_afabb27fc3cb4bd601a2fe90515cf402d"><div class="ttname"><a href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d">adjust_lapic_timer_advance</a></div><div class="ttdeci">static void adjust_lapic_timer_advance(struct kvm_vcpu *vcpu, s64 advance_expire_delta)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01815">lapic.c:1815</a></div></div>
<div class="ttc" id="astructkvm__lapic_html"><div class="ttname"><a href="structkvm__lapic.html">kvm_lapic</a></div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00059">lapic.h:59</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_a2e61dc072b6f41497ade5b4a59b2c52a"><div class="ttname"><a href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">kvm_lapic::lapic_timer</a></div><div class="ttdeci">struct kvm_timer lapic_timer</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00060">lapic.h:62</a></div></div>
<div class="ttc" id="astructkvm__timer_html_a23c6ec12b6c61cf7b3c02ff13099dbcf"><div class="ttname"><a href="structkvm__timer.html#a23c6ec12b6c61cf7b3c02ff13099dbcf">kvm_timer::expired_tscdeadline</a></div><div class="ttdeci">u64 expired_tscdeadline</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00053">lapic.h:53</a></div></div>
<div class="ttc" id="ax86_8c_html_a39aa151ace542072ef1fa0998ad8179c"><div class="ttname"><a href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c">kvm_read_l1_tsc</a></div><div class="ttdeci">u64 kvm_read_l1_tsc(struct kvm_vcpu *vcpu, u64 host_tsc)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l02583">x86.c:2583</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aad64663521c2c2f523dce26a339df367_cgraph.png" border="0" usemap="#alapic_8c_aad64663521c2c2f523dce26a339df367_cgraph" alt=""/></div>
<map name="alapic_8c_aad64663521c2c2f523dce26a339df367_cgraph" id="alapic_8c_aad64663521c2c2f523dce26a339df367_cgraph">
<area shape="rect" title=" " alt="" coords="5,64,192,91"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="240,5,391,32"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="244,57,387,98"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="249,123,381,149"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="439,5,559,32"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="439,123,558,149"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="607,123,703,149"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aad64663521c2c2f523dce26a339df367_icgraph.png" border="0" usemap="#alapic_8c_aad64663521c2c2f523dce26a339df367_icgraph" alt=""/></div>
<map name="alapic_8c_aad64663521c2c2f523dce26a339df367_icgraph" id="alapic_8c_aad64663521c2c2f523dce26a339df367_icgraph">
<area shape="rect" title=" " alt="" coords="2259,567,2445,594"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="2051,438,2198,465"/>
<area shape="rect" href="lapic_8c.html#a94273a31a16c3d074d5722f22474bcbb" title=" " alt="" coords="2039,705,2211,731"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1243,481,1411,523"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="1666,421,1783,447"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="1849,337,1974,363"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="1832,387,1991,414"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="985,596,1195,637"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="727,603,917,630"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="719,654,925,681"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="487,654,635,681"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="255,654,389,681"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="503,705,620,731"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1467,351,1609,378"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1255,301,1398,327"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="743,205,901,231"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1245,403,1408,444"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1247,227,1406,268"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1014,301,1166,327"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1026,222,1154,249"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="747,296,897,337"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="482,305,641,331"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="707,82,937,109"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="494,153,629,179"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="464,254,659,281"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="481,203,642,230"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="490,102,633,129"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="246,356,398,397"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="233,254,411,281"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="252,305,392,331"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="13,251,172,292"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="228,203,416,230"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="235,153,409,179"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="26,199,159,226"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="5,149,180,175"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="247,102,397,129"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="484,36,639,77"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1011,414,1169,441"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="765,509,879,535"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="778,414,866,441"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="522,603,601,630"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="475,355,647,382"/>
<area shape="rect" href="x86_8c.html#a8103751d0c861cfc0c6d0fed892e2454" title=" " alt="" coords="482,407,641,448"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="482,472,641,513"/>
<area shape="rect" href="x86_8c.html#a3de7a07b3d9ed3ee68dbdfb0c53dc5d0" title=" " alt="" coords="482,537,641,579"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1043,171,1137,198"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="781,31,863,58"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="1665,345,1784,371"/>
<area shape="rect" href="lapic_8c.html#aee4a3e5ae4ed211edf4e463ebacadaa5" title=" " alt="" coords="1459,225,1617,267"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="1853,755,1969,782"/>
</map>
</div>

</div>
</div>
<a id="a33f4e295e9710d133e3e38e0aed35edb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33f4e295e9710d133e3e38e0aed35edb">&#9670;&nbsp;</a></span>__pv_send_ipi()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int __pv_send_ipi </td>
          <td>(</td>
          <td class="paramtype">unsigned long *&#160;</td>
          <td class="paramname"><em>ipi_bitmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_apic_map *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_lapic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>min</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00832">832</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;{</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordtype">int</span> i, count = 0;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">if</span> (min &gt; map-&gt;max_apic_id)</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160; </div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    for_each_set_bit(i, ipi_bitmap,</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        min((u32)BITS_PER_LONG, (map-&gt;max_apic_id - min + 1))) {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <span class="keywordflow">if</span> (map-&gt;phys_map[min + i]) {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            vcpu = map-&gt;phys_map[min + i]-&gt;vcpu;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            count += <a class="code" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741">kvm_apic_set_irq</a>(vcpu, irq, NULL);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    }</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordflow">return</span> count;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a3d272e1b73f22f797955e7ddea84b741"><div class="ttname"><a href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741">kvm_apic_set_irq</a></div><div class="ttdeci">int kvm_apic_set_irq(struct kvm_vcpu *vcpu, struct kvm_lapic_irq *irq, struct dest_map *dest_map)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00823">lapic.c:823</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a33f4e295e9710d133e3e38e0aed35edb_cgraph.png" border="0" usemap="#alapic_8c_a33f4e295e9710d133e3e38e0aed35edb_cgraph" alt=""/></div>
<map name="alapic_8c_a33f4e295e9710d133e3e38e0aed35edb_cgraph" id="alapic_8c_a33f4e295e9710d133e3e38e0aed35edb_cgraph">
<area shape="rect" title=" " alt="" coords="5,183,119,209"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="167,183,303,209"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="351,183,488,209"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="570,31,678,57"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="559,81,689,108"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="561,132,687,159"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="561,183,687,209"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="536,233,712,260"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="542,284,706,311"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="563,335,685,361"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="779,5,949,32"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="779,56,949,83"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="760,309,968,336"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="787,360,941,387"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a33f4e295e9710d133e3e38e0aed35edb_icgraph.png" border="0" usemap="#alapic_8c_a33f4e295e9710d133e3e38e0aed35edb_icgraph" alt=""/></div>
<map name="alapic_8c_a33f4e295e9710d133e3e38e0aed35edb_icgraph" id="alapic_8c_a33f4e295e9710d133e3e38e0aed35edb_icgraph">
<area shape="rect" title=" " alt="" coords="415,5,528,32"/>
<area shape="rect" href="lapic_8c.html#a7195db5c58bcea2e080ee79cdaeae617" title=" " alt="" coords="232,5,367,32"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="5,5,184,32"/>
</map>
</div>

</div>
</div>
<a id="a416dfbc264f7365a79bb5d3e531512b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a416dfbc264f7365a79bb5d3e531512b8">&#9670;&nbsp;</a></span>__report_tpr_access()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __report_tpr_access </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>write</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01550">1550</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;{</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu = apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="keyword">struct </span>kvm_run *run = vcpu-&gt;run;</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160; </div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    kvm_make_request(KVM_REQ_REPORT_TPR_ACCESS, vcpu);</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    run-&gt;tpr_access.rip = <a class="code" href="kvm__cache__regs_8h.html#ad97ff6b975b461b815e6749d29c65446">kvm_rip_read</a>(vcpu);</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    run-&gt;tpr_access.is_write = write;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;}</div>
<div class="ttc" id="akvm__cache__regs_8h_html_ad97ff6b975b461b815e6749d29c65446"><div class="ttname"><a href="kvm__cache__regs_8h.html#ad97ff6b975b461b815e6749d29c65446">kvm_rip_read</a></div><div class="ttdeci">static unsigned long kvm_rip_read(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__cache__regs_8h_source.html#l00116">kvm_cache_regs.h:116</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a416dfbc264f7365a79bb5d3e531512b8_cgraph.png" border="0" usemap="#alapic_8c_a416dfbc264f7365a79bb5d3e531512b8_cgraph" alt=""/></div>
<map name="alapic_8c_a416dfbc264f7365a79bb5d3e531512b8_cgraph" id="alapic_8c_a416dfbc264f7365a79bb5d3e531512b8_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,156,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#ad97ff6b975b461b815e6749d29c65446" title=" " alt="" coords="204,5,315,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a5d9eb0563cffb1e3ed1cccebabcf2df6" title=" " alt="" coords="363,5,537,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="585,5,779,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a416dfbc264f7365a79bb5d3e531512b8_icgraph.png" border="0" usemap="#alapic_8c_a416dfbc264f7365a79bb5d3e531512b8_icgraph" alt=""/></div>
<map name="alapic_8c_a416dfbc264f7365a79bb5d3e531512b8_icgraph" id="alapic_8c_a416dfbc264f7365a79bb5d3e531512b8_icgraph">
<area shape="rect" title=" " alt="" coords="1980,206,2131,233"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="1795,206,1932,233"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="1619,107,1717,134"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1589,265,1747,291"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="1367,27,1521,54"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="1367,107,1521,134"/>
<area shape="rect" href="x86_8c.html#aca5ab82fb669f6a99e011293efed0d5d" title=" " alt="" coords="1129,5,1281,47"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="891,13,1050,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="670,13,794,39"/>
<area shape="rect" href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1" title=" " alt="" coords="1139,71,1270,98"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="1126,122,1283,149"/>
<area shape="rect" href="lapic_8c.html#ae9bd2989ca4c31caf8aa56b8c7dfd248" title=" " alt="" coords="879,97,1063,123"/>
<area shape="rect" href="lapic_8c.html#a179cfc2268db31f40b5bd9b1c247a37b" title=" " alt="" coords="401,147,571,174"/>
<area shape="rect" href="hyperv_8c.html#acd3e0dad98bde91068115067f6ec3ae6" title=" " alt="" coords="665,97,799,123"/>
<area shape="rect" href="hyperv_8c.html#a23d197f9ae27f820fa7e977aec518698" title=" " alt="" coords="387,97,585,123"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="164,122,339,149"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="5,97,116,123"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="5,147,116,174"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1377,214,1511,241"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1347,265,1541,291"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1363,341,1525,367"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1373,417,1515,443"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="1129,173,1281,215"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="1115,239,1294,266"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="1135,290,1275,317"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="891,232,1050,273"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="1111,341,1299,367"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="645,391,819,418"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="904,341,1037,367"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="633,341,831,367"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="399,366,573,393"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="211,315,292,342"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="197,366,306,393"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="196,417,307,443"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="1129,442,1280,469"/>
</map>
</div>

</div>
</div>
<a id="a108aca5a9980d721f30b333be204d005"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a108aca5a9980d721f30b333be204d005">&#9670;&nbsp;</a></span>__start_apic_timer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __start_apic_timer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>count_reg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02216">2216</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;{</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    atomic_set(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a581e6b6fe55055ed8a81d5a1aa258ff7">pending</a>, 0);</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160; </div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667">apic_lvtt_period</a>(apic) || <a class="code" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a">apic_lvtt_oneshot</a>(apic))</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;        &amp;&amp; !<a class="code" href="lapic_8c.html#a0efcb9037756de47e9d28f0a5ea1009f">set_target_expiration</a>(apic, count_reg))</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160; </div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;    <a class="code" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db">restart_apic_timer</a>(apic);</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a0efcb9037756de47e9d28f0a5ea1009f"><div class="ttname"><a href="lapic_8c.html#a0efcb9037756de47e9d28f0a5ea1009f">set_target_expiration</a></div><div class="ttdeci">static bool set_target_expiration(struct kvm_lapic *apic, u32 count_reg)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01992">lapic.c:1992</a></div></div>
<div class="ttc" id="alapic_8c_html_a843b5038a6a8d6c20b11bd97b69bf667"><div class="ttname"><a href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667">apic_lvtt_period</a></div><div class="ttdeci">static int apic_lvtt_period(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00548">lapic.c:548</a></div></div>
<div class="ttc" id="alapic_8c_html_ade21404bee3e5dbbe596ff391e0a23db"><div class="ttname"><a href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db">restart_apic_timer</a></div><div class="ttdeci">static void restart_apic_timer(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02158">lapic.c:2158</a></div></div>
<div class="ttc" id="alapic_8c_html_adf8f8ff420925292fe7ce7e1ea72924a"><div class="ttname"><a href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a">apic_lvtt_oneshot</a></div><div class="ttdeci">static int apic_lvtt_oneshot(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00543">lapic.c:543</a></div></div>
<div class="ttc" id="astructkvm__timer_html_a581e6b6fe55055ed8a81d5a1aa258ff7"><div class="ttname"><a href="structkvm__timer.html#a581e6b6fe55055ed8a81d5a1aa258ff7">kvm_timer::pending</a></div><div class="ttdeci">atomic_t pending</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00055">lapic.h:55</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a108aca5a9980d721f30b333be204d005_cgraph.png" border="0" usemap="#alapic_8c_a108aca5a9980d721f30b333be204d005_cgraph" alt=""/></div>
<map name="alapic_8c_a108aca5a9980d721f30b333be204d005_cgraph" id="alapic_8c_a108aca5a9980d721f30b333be204d005_cgraph">
<area shape="rect" title=" " alt="" coords="5,493,148,520"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="1249,683,1387,709"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="811,148,938,175"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="196,353,337,380"/>
<area shape="rect" href="lapic_8c.html#a0efcb9037756de47e9d28f0a5ea1009f" title=" " alt="" coords="385,733,547,760"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="615,289,733,316"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="407,391,525,417"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="801,363,948,389"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="810,261,939,288"/>
<area shape="rect" href="lapic_8c.html#a2400290b895608d302ecce4ee352ee25" title=" " alt="" coords="1001,27,1177,53"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="996,413,1183,440"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="1238,245,1398,272"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="996,297,1183,338"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1707,136,1829,163"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="1003,363,1176,389"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="1002,129,1177,170"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="1243,472,1393,499"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="1247,406,1389,447"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="1252,523,1384,549"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="1483,760,1603,787"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="1483,659,1602,685"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="1720,659,1816,685"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="1231,355,1405,381"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1474,355,1611,381"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1923,431,2093,457"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="1465,267,1620,309"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1470,608,1615,635"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1471,709,1615,736"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1714,253,1822,280"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1703,304,1833,331"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1705,355,1831,381"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1705,405,1831,432"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1680,456,1856,483"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1686,507,1850,533"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1923,253,2093,280"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1904,111,2112,137"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1931,161,2085,188"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1691,187,1845,229"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1689,608,1847,635"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1689,709,1847,736"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="1239,57,1397,98"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="1474,56,1611,83"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="1462,5,1623,32"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="1453,107,1632,133"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1709,85,1827,112"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="611,505,737,532"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="595,441,753,468"/>
<area shape="rect" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede" title=" " alt="" coords="998,566,1181,607"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="597,223,751,265"/>
<area shape="rect" href="lapic_8c.html#ab9f4c987f5a9d71b966ec05058380bb4" title=" " alt="" coords="625,987,723,1013"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a108aca5a9980d721f30b333be204d005_icgraph.png" border="0" usemap="#alapic_8c_a108aca5a9980d721f30b333be204d005_icgraph" alt=""/></div>
<map name="alapic_8c_a108aca5a9980d721f30b333be204d005_icgraph" id="alapic_8c_a108aca5a9980d721f30b333be204d005_icgraph">
<area shape="rect" title=" " alt="" coords="1844,173,1987,200"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1644,144,1796,171"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1656,199,1784,225"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1405,86,1556,127"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="1141,39,1299,65"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="919,5,1043,32"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1402,199,1559,225"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="1365,376,1596,403"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1153,123,1287,149"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1123,173,1317,200"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1139,224,1301,251"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1149,300,1291,327"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="905,57,1057,98"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="891,123,1070,149"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="911,173,1051,200"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="656,115,815,157"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="887,224,1075,251"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="399,275,572,301"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="669,224,802,251"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,224,584,251"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,275,339,301"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,224,101,251"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,275,115,301"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,325,116,352"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="905,325,1056,352"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="1143,427,1297,469"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="903,427,1058,469"/>
<area shape="rect" href="svm_8c.html#a82c8447e70f06dd52623c696446104b5" title=" " alt="" coords="632,431,839,457"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="632,481,839,508"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="427,431,543,457"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="427,481,544,508"/>
</map>
</div>

</div>
</div>
<a id="a0a1a2c50e4624d010e1a145b3d0228a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a1a2c50e4624d010e1a145b3d0228a9">&#9670;&nbsp;</a></span>__wait_lapic_expire()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __wait_lapic_expire </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>guest_cycles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01795">1795</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;{</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    u64 timer_advance_ns = vcpu-&gt;arch.apic-&gt;lapic_timer.timer_advance_ns;</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160; </div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;<span class="comment">     * If the guest TSC is running at a different ratio than the host, then</span></div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;<span class="comment">     * convert the delay to nanoseconds to achieve an accurate delay.  Note</span></div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;<span class="comment">     * that __delay() uses delay_tsc whenever the hardware has TSC, thus</span></div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;<span class="comment">     * always for VMX enabled hardware.</span></div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="keywordflow">if</span> (vcpu-&gt;arch.tsc_scaling_ratio == <a class="code" href="structkvm__caps.html">kvm_caps</a>.<a class="code" href="structkvm__caps.html#a4f8f01ced32ac7e2bbdea0fcf6406a76">default_tsc_scaling_ratio</a>) {</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;        __delay(min(guest_cycles,</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;            <a class="code" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df">nsec_to_cycles</a>(vcpu, timer_advance_ns)));</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;        u64 delay_ns = guest_cycles * 1000000ULL;</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;        do_div(delay_ns, vcpu-&gt;arch.virtual_tsc_khz);</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;        ndelay(min_t(u32, delay_ns, timer_advance_ns));</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    }</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;}</div>
<div class="ttc" id="astructkvm__caps_html"><div class="ttname"><a href="structkvm__caps.html">kvm_caps</a></div><div class="ttdef"><b>Definition:</b> <a href="x86_8h_source.html#l00012">x86.h:12</a></div></div>
<div class="ttc" id="astructkvm__caps_html_a4f8f01ced32ac7e2bbdea0fcf6406a76"><div class="ttname"><a href="structkvm__caps.html#a4f8f01ced32ac7e2bbdea0fcf6406a76">kvm_caps::default_tsc_scaling_ratio</a></div><div class="ttdeci">u64 default_tsc_scaling_ratio</div><div class="ttdef"><b>Definition:</b> <a href="x86_8h_source.html#l00022">x86.h:22</a></div></div>
<div class="ttc" id="ax86_8h_html_abbd5927434d63bff53c0c1f8185d46df"><div class="ttname"><a href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df">nsec_to_cycles</a></div><div class="ttdeci">static u64 nsec_to_cycles(struct kvm_vcpu *vcpu, u64 nsec)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8h_source.html#l00389">x86.h:389</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a0a1a2c50e4624d010e1a145b3d0228a9_cgraph.png" border="0" usemap="#alapic_8c_a0a1a2c50e4624d010e1a145b3d0228a9_cgraph" alt=""/></div>
<map name="alapic_8c_a0a1a2c50e4624d010e1a145b3d0228a9_cgraph" id="alapic_8c_a0a1a2c50e4624d010e1a145b3d0228a9_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,156,32"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="204,5,324,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a0a1a2c50e4624d010e1a145b3d0228a9_icgraph.png" border="0" usemap="#alapic_8c_a0a1a2c50e4624d010e1a145b3d0228a9_icgraph" alt=""/></div>
<map name="alapic_8c_a0a1a2c50e4624d010e1a145b3d0228a9_icgraph" id="alapic_8c_a0a1a2c50e4624d010e1a145b3d0228a9_icgraph">
<area shape="rect" title=" " alt="" coords="2493,623,2644,649"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="2259,623,2445,649"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="2051,507,2198,533"/>
<area shape="rect" href="lapic_8c.html#a94273a31a16c3d074d5722f22474bcbb" title=" " alt="" coords="2039,779,2211,805"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1243,550,1411,591"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="1666,481,1783,508"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="1849,405,1974,432"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="1832,456,1991,483"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="985,670,1195,711"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="727,677,917,704"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="719,728,925,755"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="487,728,635,755"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="255,728,389,755"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="503,779,620,805"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1467,413,1609,440"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1255,413,1398,440"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="743,244,901,271"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1245,471,1408,513"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1247,270,1406,311"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1014,441,1166,468"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1026,387,1154,413"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="747,435,897,477"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="482,443,641,469"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="707,384,937,411"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="494,123,629,149"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="464,173,659,200"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="481,244,642,271"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="490,39,633,65"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="246,107,398,149"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="233,173,411,200"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="252,56,392,83"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="13,162,172,203"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="228,224,416,251"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="235,275,409,301"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="26,228,159,255"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="5,300,180,327"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="247,5,397,32"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="484,377,639,418"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1011,520,1169,547"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="765,608,879,635"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="778,520,866,547"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="522,677,601,704"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="475,560,647,587"/>
<area shape="rect" href="x86_8c.html#a8103751d0c861cfc0c6d0fed892e2454" title=" " alt="" coords="482,611,641,653"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="482,494,641,535"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1043,219,1137,245"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="781,193,863,220"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="1665,409,1784,436"/>
<area shape="rect" href="lapic_8c.html#aee4a3e5ae4ed211edf4e463ebacadaa5" title=" " alt="" coords="1459,279,1617,321"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="1853,829,1969,856"/>
</map>
</div>

</div>
</div>
<a id="afabb27fc3cb4bd601a2fe90515cf402d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afabb27fc3cb4bd601a2fe90515cf402d">&#9670;&nbsp;</a></span>adjust_lapic_timer_advance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void adjust_lapic_timer_advance </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">s64&#160;</td>
          <td class="paramname"><em>advance_expire_delta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01815">1815</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;{</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    u32 timer_advance_ns = apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a02a69390fafe1e1281847530af564ef0">timer_advance_ns</a>;</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    u64 ns;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160; </div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <span class="comment">/* Do not adjust for tiny fluctuations or large random spikes. */</span></div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <span class="keywordflow">if</span> (abs(advance_expire_delta) &gt; <a class="code" href="lapic_8c.html#aaff10bb3db6a335fe54ac63779edc7d4">LAPIC_TIMER_ADVANCE_ADJUST_MAX</a> ||</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;        abs(advance_expire_delta) &lt; <a class="code" href="lapic_8c.html#a582c1d842f30d029783bd6562b2bb923">LAPIC_TIMER_ADVANCE_ADJUST_MIN</a>)</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160; </div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    <span class="comment">/* too early */</span></div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <span class="keywordflow">if</span> (advance_expire_delta &lt; 0) {</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;        ns = -advance_expire_delta * 1000000ULL;</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        do_div(ns, <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.virtual_tsc_khz);</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        timer_advance_ns -= ns/<a class="code" href="lapic_8c.html#a9a9dd2aa76e667592ae5c2a01abd3aef">LAPIC_TIMER_ADVANCE_ADJUST_STEP</a>;</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    <span class="comment">/* too late */</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        ns = advance_expire_delta * 1000000ULL;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        do_div(ns, <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.virtual_tsc_khz);</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        timer_advance_ns += ns/<a class="code" href="lapic_8c.html#a9a9dd2aa76e667592ae5c2a01abd3aef">LAPIC_TIMER_ADVANCE_ADJUST_STEP</a>;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    }</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160; </div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    <span class="keywordflow">if</span> (unlikely(timer_advance_ns &gt; <a class="code" href="lapic_8c.html#a108a811ad5c48f5f7691fbb6ec699c47">LAPIC_TIMER_ADVANCE_NS_MAX</a>))</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        timer_advance_ns = <a class="code" href="lapic_8c.html#aae6931286b2ce84fe7732ae3c6996634">LAPIC_TIMER_ADVANCE_NS_INIT</a>;</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a02a69390fafe1e1281847530af564ef0">timer_advance_ns</a> = timer_advance_ns;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a108a811ad5c48f5f7691fbb6ec699c47"><div class="ttname"><a href="lapic_8c.html#a108a811ad5c48f5f7691fbb6ec699c47">LAPIC_TIMER_ADVANCE_NS_MAX</a></div><div class="ttdeci">#define LAPIC_TIMER_ADVANCE_NS_MAX</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00066">lapic.c:66</a></div></div>
<div class="ttc" id="alapic_8c_html_a582c1d842f30d029783bd6562b2bb923"><div class="ttname"><a href="lapic_8c.html#a582c1d842f30d029783bd6562b2bb923">LAPIC_TIMER_ADVANCE_ADJUST_MIN</a></div><div class="ttdeci">#define LAPIC_TIMER_ADVANCE_ADJUST_MIN</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00063">lapic.c:63</a></div></div>
<div class="ttc" id="alapic_8c_html_a9a9dd2aa76e667592ae5c2a01abd3aef"><div class="ttname"><a href="lapic_8c.html#a9a9dd2aa76e667592ae5c2a01abd3aef">LAPIC_TIMER_ADVANCE_ADJUST_STEP</a></div><div class="ttdeci">#define LAPIC_TIMER_ADVANCE_ADJUST_STEP</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00068">lapic.c:68</a></div></div>
<div class="ttc" id="alapic_8c_html_aae6931286b2ce84fe7732ae3c6996634"><div class="ttname"><a href="lapic_8c.html#aae6931286b2ce84fe7732ae3c6996634">LAPIC_TIMER_ADVANCE_NS_INIT</a></div><div class="ttdeci">#define LAPIC_TIMER_ADVANCE_NS_INIT</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00065">lapic.c:65</a></div></div>
<div class="ttc" id="alapic_8c_html_aaff10bb3db6a335fe54ac63779edc7d4"><div class="ttname"><a href="lapic_8c.html#aaff10bb3db6a335fe54ac63779edc7d4">LAPIC_TIMER_ADVANCE_ADJUST_MAX</a></div><div class="ttdeci">#define LAPIC_TIMER_ADVANCE_ADJUST_MAX</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00064">lapic.c:64</a></div></div>
<div class="ttc" id="astructkvm__timer_html_a02a69390fafe1e1281847530af564ef0"><div class="ttname"><a href="structkvm__timer.html#a02a69390fafe1e1281847530af564ef0">kvm_timer::timer_advance_ns</a></div><div class="ttdeci">u32 timer_advance_ns</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00054">lapic.h:54</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_afabb27fc3cb4bd601a2fe90515cf402d_icgraph.png" border="0" usemap="#alapic_8c_afabb27fc3cb4bd601a2fe90515cf402d_icgraph" alt=""/></div>
<map name="alapic_8c_afabb27fc3cb4bd601a2fe90515cf402d_icgraph" id="alapic_8c_afabb27fc3cb4bd601a2fe90515cf402d_icgraph">
<area shape="rect" title=" " alt="" coords="2493,615,2636,657"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="2259,623,2445,649"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="2051,507,2198,533"/>
<area shape="rect" href="lapic_8c.html#a94273a31a16c3d074d5722f22474bcbb" title=" " alt="" coords="2039,779,2211,805"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1243,550,1411,591"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="1666,481,1783,508"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="1849,405,1974,432"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="1832,456,1991,483"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="985,670,1195,711"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="727,677,917,704"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="719,728,925,755"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="487,728,635,755"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="255,728,389,755"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="503,779,620,805"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1467,413,1609,440"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1255,413,1398,440"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="743,244,901,271"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1245,471,1408,513"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1247,270,1406,311"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1014,441,1166,468"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1026,387,1154,413"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="747,435,897,477"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="482,443,641,469"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="707,384,937,411"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="494,123,629,149"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="464,173,659,200"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="481,244,642,271"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="490,39,633,65"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="246,107,398,149"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="233,173,411,200"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="252,56,392,83"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="13,162,172,203"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="228,224,416,251"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="235,275,409,301"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="26,228,159,255"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="5,300,180,327"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="247,5,397,32"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="484,377,639,418"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1011,520,1169,547"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="765,608,879,635"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="778,520,866,547"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="522,677,601,704"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="475,560,647,587"/>
<area shape="rect" href="x86_8c.html#a8103751d0c861cfc0c6d0fed892e2454" title=" " alt="" coords="482,611,641,653"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="482,494,641,535"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1043,219,1137,245"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="781,193,863,220"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="1665,409,1784,436"/>
<area shape="rect" href="lapic_8c.html#aee4a3e5ae4ed211edf4e463ebacadaa5" title=" " alt="" coords="1459,279,1617,321"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="1853,829,1969,856"/>
</map>
</div>

</div>
</div>
<a id="a5cff2e426d700ad5b4cc78b9a3ea1ede"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cff2e426d700ad5b4cc78b9a3ea1ede">&#9670;&nbsp;</a></span>advance_periodic_target_expiration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void advance_periodic_target_expiration </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02042">2042</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;{</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    ktime_t now = ktime_get();</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    u64 tscl = rdtsc();</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    ktime_t delta;</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160; </div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;<span class="comment">     * Synchronize both deadlines to the same time source or</span></div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;<span class="comment">     * differences in the periods (caused by differences in the</span></div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;<span class="comment">     * underlying clocks or numerical approximation errors) will</span></div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;<span class="comment">     * cause the two to drift apart over time as the errors</span></div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;<span class="comment">     * accumulate.</span></div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a0de90943a0ace07fbb0e0219fe64e2f8">target_expiration</a> =</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;        ktime_add_ns(apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a0de90943a0ace07fbb0e0219fe64e2f8">target_expiration</a>,</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;                apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a>);</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    delta = ktime_sub(apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a0de90943a0ace07fbb0e0219fe64e2f8">target_expiration</a>, now);</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#acb4ad6bfe6c14982d0a87f4678e92d09">tscdeadline</a> = <a class="code" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c">kvm_read_l1_tsc</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, tscl) +</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;        <a class="code" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df">nsec_to_cycles</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, delta);</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;}</div>
<div class="ttc" id="astructkvm__timer_html_a0de90943a0ace07fbb0e0219fe64e2f8"><div class="ttname"><a href="structkvm__timer.html#a0de90943a0ace07fbb0e0219fe64e2f8">kvm_timer::target_expiration</a></div><div class="ttdeci">ktime_t target_expiration</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00049">lapic.h:49</a></div></div>
<div class="ttc" id="astructkvm__timer_html_a159bd17861468df061b33cdbd9a6b477"><div class="ttname"><a href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">kvm_timer::period</a></div><div class="ttdeci">s64 period</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00048">lapic.h:48</a></div></div>
<div class="ttc" id="astructkvm__timer_html_acb4ad6bfe6c14982d0a87f4678e92d09"><div class="ttname"><a href="structkvm__timer.html#acb4ad6bfe6c14982d0a87f4678e92d09">kvm_timer::tscdeadline</a></div><div class="ttdeci">u64 tscdeadline</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00052">lapic.h:52</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a5cff2e426d700ad5b4cc78b9a3ea1ede_cgraph.png" border="0" usemap="#alapic_8c_a5cff2e426d700ad5b4cc78b9a3ea1ede_cgraph" alt=""/></div>
<map name="alapic_8c_a5cff2e426d700ad5b4cc78b9a3ea1ede_cgraph" id="alapic_8c_a5cff2e426d700ad5b4cc78b9a3ea1ede_cgraph">
<area shape="rect" title=" " alt="" coords="5,23,188,65"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="236,5,368,32"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="242,56,362,83"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="416,5,535,32"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="583,5,679,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a5cff2e426d700ad5b4cc78b9a3ea1ede_icgraph.png" border="0" usemap="#alapic_8c_a5cff2e426d700ad5b4cc78b9a3ea1ede_icgraph" alt=""/></div>
<map name="alapic_8c_a5cff2e426d700ad5b4cc78b9a3ea1ede_icgraph" id="alapic_8c_a5cff2e426d700ad5b4cc78b9a3ea1ede_icgraph">
<area shape="rect" title=" " alt="" coords="2005,362,2188,403"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1243,307,1411,349"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="1832,395,1957,421"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="985,49,1195,90"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="727,5,917,32"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="719,56,925,83"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="487,5,635,32"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="255,5,389,32"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="503,56,620,83"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="1665,424,1784,451"/>
<area shape="rect" href="lapic_8c.html#aee4a3e5ae4ed211edf4e463ebacadaa5" title=" " alt="" coords="1459,537,1617,578"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1467,424,1609,451"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1043,607,1137,633"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="781,877,863,904"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="468,973,655,1000"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="260,700,384,727"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1255,373,1398,400"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="743,324,901,351"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1245,475,1408,517"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1247,541,1406,582"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1014,373,1166,400"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1026,323,1154,349"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="747,397,897,438"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="482,427,641,453"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="707,165,937,192"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="494,224,629,251"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="464,325,659,352"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="481,275,642,301"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="490,376,633,403"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="246,377,398,418"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="233,325,411,352"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="252,275,392,301"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="13,318,172,359"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="228,224,416,251"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="235,169,409,196"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="26,224,159,251"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="5,165,180,192"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="247,443,397,469"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="484,158,639,199"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1011,483,1169,509"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="765,481,879,508"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="778,699,866,725"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="522,477,601,504"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="475,856,647,883"/>
<area shape="rect" href="x86_8c.html#a8103751d0c861cfc0c6d0fed892e2454" title=" " alt="" coords="482,594,641,635"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="482,659,641,701"/>
<area shape="rect" href="x86_8c.html#a3de7a07b3d9ed3ee68dbdfb0c53dc5d0" title=" " alt="" coords="482,725,641,766"/>
<area shape="rect" href="x86_8c.html#ac6ebab4c3448cdbc79dbcac73e94503b" title=" " alt="" coords="482,790,641,831"/>
<area shape="rect" href="x86_8c.html#a02f0a60bd0147952e87f6ad38128f748" title=" " alt="" coords="482,907,641,949"/>
<area shape="rect" href="x86_8c.html#ae3d9929c9a77fa2c710befa0a784d4c6" title=" " alt="" coords="482,529,641,570"/>
</map>
</div>

</div>
</div>
<a id="ad2b5e2187414c65e1a5876e641fee3fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2b5e2187414c65e1a5876e641fee3fc">&#9670;&nbsp;</a></span>apic_clear_irr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void apic_clear_irr </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00723">723</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;{</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordflow">if</span> (unlikely(apic-&gt;<a class="code" href="structkvm__lapic.html#a4642d7f446bbd9ede893aa1ebbcc9c1a">apicv_active</a>)) {</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="comment">/* need to update RVI */</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <a class="code" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198">kvm_lapic_clear_vector</a>(vec, apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_IRR);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        static_call_cond(kvm_x86_hwapic_irr_update)(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>,</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                                <a class="code" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79">apic_find_highest_irr</a>(apic));</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#ada91b44df57789499ad32ad287c21217">irr_pending</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <a class="code" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198">kvm_lapic_clear_vector</a>(vec, apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_IRR);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1">apic_search_irr</a>(apic) != -1)</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            apic-&gt;<a class="code" href="structkvm__lapic.html#ada91b44df57789499ad32ad287c21217">irr_pending</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a734e8a2b56a9a0b0d9117f20f2bb0fc1"><div class="ttname"><a href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1">apic_search_irr</a></div><div class="ttdeci">static int apic_search_irr(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00701">lapic.c:701</a></div></div>
<div class="ttc" id="alapic_8c_html_aebc526fc8720e4db45143f8e05f85c79"><div class="ttname"><a href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79">apic_find_highest_irr</a></div><div class="ttdeci">static int apic_find_highest_irr(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00706">lapic.c:706</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_a4642d7f446bbd9ede893aa1ebbcc9c1a"><div class="ttname"><a href="structkvm__lapic.html#a4642d7f446bbd9ede893aa1ebbcc9c1a">kvm_lapic::apicv_active</a></div><div class="ttdeci">bool apicv_active</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00065">lapic.h:65</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_ada91b44df57789499ad32ad287c21217"><div class="ttname"><a href="structkvm__lapic.html#ada91b44df57789499ad32ad287c21217">kvm_lapic::irr_pending</a></div><div class="ttdeci">bool irr_pending</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00067">lapic.h:67</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ad2b5e2187414c65e1a5876e641fee3fc_cgraph.png" border="0" usemap="#alapic_8c_ad2b5e2187414c65e1a5876e641fee3fc_cgraph" alt=""/></div>
<map name="alapic_8c_ad2b5e2187414c65e1a5876e641fee3fc_cgraph" id="alapic_8c_ad2b5e2187414c65e1a5876e641fee3fc_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,115,83"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="173,5,329,32"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="387,31,507,57"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="163,107,339,133"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="555,31,704,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ad2b5e2187414c65e1a5876e641fee3fc_icgraph.png" border="0" usemap="#alapic_8c_ad2b5e2187414c65e1a5876e641fee3fc_icgraph" alt=""/></div>
<map name="alapic_8c_ad2b5e2187414c65e1a5876e641fee3fc_icgraph" id="alapic_8c_ad2b5e2187414c65e1a5876e641fee3fc_icgraph">
<area shape="rect" title=" " alt="" coords="1585,300,1695,327"/>
<area shape="rect" href="lapic_8c.html#ad608730f208932f64d2c98c762fce85c" title=" " alt="" coords="1377,275,1522,301"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="1361,325,1537,352"/>
<area shape="rect" href="vmx_2nested_8c.html#add1e82c32385142c0fca04a1db8cbc3a" title=" " alt="" coords="943,56,1073,83"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fecee9010894e3a1513a0924e24dd6" title=" " alt="" coords="698,5,835,32"/>
<area shape="rect" href="vmx_2nested_8c.html#a23e3de8c964e87404eea818be6f70154" title=" " alt="" coords="695,56,838,83"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="426,49,597,90"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="207,56,334,83"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="1141,325,1313,352"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="923,497,1093,538"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="931,325,1085,352"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="698,624,835,651"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="471,624,552,651"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,624,364,651"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,624,129,651"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="437,380,585,407"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="705,224,828,251"/>
<area shape="rect" href="vmx_2nested_8c.html#a4e307e2bcf664c83265b1442e3fc8da2" title=" " alt="" coords="679,442,855,483"/>
<area shape="rect" href="vmx_2nested_8c.html#ad3cab9cf8633364513bd6a24caecf41a" title=" " alt="" coords="659,507,875,549"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="412,544,611,571"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fcc88ceee4f57a3dbf23fedb46a5cb" title=" " alt="" coords="691,377,842,418"/>
<area shape="rect" href="vmx_2nested_8c.html#aedc5821e9af5c7bd4aac6c06f4ca046f" title=" " alt="" coords="677,107,857,133"/>
<area shape="rect" href="vmx_2hyperv_8c.html#a937e30dece4579b71b17efcd54c1d910" title=" " alt="" coords="675,158,859,199"/>
<area shape="rect" href="vmx_2nested_8c.html#a64e6550fab681b40c832fe4e2d5e3b95" title=" " alt="" coords="694,275,839,301"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="203,380,338,407"/>
<area shape="rect" href="vmx_2nested_8c.html#a6a1c45a52fde9844f4431a9db00dbf9f" title=" " alt="" coords="430,442,593,483"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="205,449,336,476"/>
<area shape="rect" href="vmx_2nested_8c.html#a2c53f6d5cd8133df2c8e67ab90b9aa5f" title=" " alt="" coords="425,325,598,352"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="456,224,567,251"/>
<area shape="rect" href="vmx_2nested_8c.html#acee8cb651216e97a9c12b807243ae59a" title=" " alt="" coords="427,275,596,301"/>
<area shape="rect" href="vmx_8c.html#ac1cd58b9f223df9d6b5fe9695c0cbe2b" title=" " alt="" coords="209,325,332,352"/>
</map>
</div>

</div>
</div>
<a id="a76fc10b30ae9deff038c276c3f5a9843"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76fc10b30ae9deff038c276c3f5a9843">&#9670;&nbsp;</a></span>apic_clear_isr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void apic_clear_isr </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00787">787</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;{</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8c.html#a33d332d149d0b1dd33e02b2ab98009a9">__apic_test_and_clear_vector</a>(vec, apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_ISR))</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">     * We do get here for APIC virtualization enabled if the guest</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">     * uses the Hyper-V APIC enlightenment.  In this case we may need</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">     * to trigger a new interrupt delivery by writing the SVI field;</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">     * on the other hand isr_count and highest_isr_cache are unused</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">     * and must be left alone.</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">if</span> (unlikely(apic-&gt;<a class="code" href="structkvm__lapic.html#a4642d7f446bbd9ede893aa1ebbcc9c1a">apicv_active</a>))</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        static_call_cond(kvm_x86_hwapic_isr_update)(<a class="code" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0">apic_find_highest_isr</a>(apic));</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        --apic-&gt;<a class="code" href="structkvm__lapic.html#ad8506269387d80ddd1c6cc8a96c9398a">isr_count</a>;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        BUG_ON(apic-&gt;<a class="code" href="structkvm__lapic.html#ad8506269387d80ddd1c6cc8a96c9398a">isr_count</a> &lt; 0);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#a4b58ed7ed33fe007d319d39271d8d1b9">highest_isr_cache</a> = -1;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a33d332d149d0b1dd33e02b2ab98009a9"><div class="ttname"><a href="lapic_8c.html#a33d332d149d0b1dd33e02b2ab98009a9">__apic_test_and_clear_vector</a></div><div class="ttdeci">static int __apic_test_and_clear_vector(int vec, void *bitmap)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00123">lapic.c:123</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_a4b58ed7ed33fe007d319d39271d8d1b9"><div class="ttname"><a href="structkvm__lapic.html#a4b58ed7ed33fe007d319d39271d8d1b9">kvm_lapic::highest_isr_cache</a></div><div class="ttdeci">int highest_isr_cache</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00072">lapic.h:72</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_ad8506269387d80ddd1c6cc8a96c9398a"><div class="ttname"><a href="structkvm__lapic.html#ad8506269387d80ddd1c6cc8a96c9398a">kvm_lapic::isr_count</a></div><div class="ttdeci">s16 isr_count</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00070">lapic.h:70</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a76fc10b30ae9deff038c276c3f5a9843_cgraph.png" border="0" usemap="#alapic_8c_a76fc10b30ae9deff038c276c3f5a9843_cgraph" alt=""/></div>
<map name="alapic_8c_a76fc10b30ae9deff038c276c3f5a9843_cgraph" id="alapic_8c_a76fc10b30ae9deff038c276c3f5a9843_cgraph">
<area shape="rect" title=" " alt="" coords="5,42,116,69"/>
<area shape="rect" href="lapic_8c.html#a33d332d149d0b1dd33e02b2ab98009a9" title=" " alt="" coords="164,5,329,47"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="167,71,326,98"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="377,71,527,98"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a76fc10b30ae9deff038c276c3f5a9843_icgraph.png" border="0" usemap="#alapic_8c_a76fc10b30ae9deff038c276c3f5a9843_icgraph" alt=""/></div>
<map name="alapic_8c_a76fc10b30ae9deff038c276c3f5a9843_icgraph" id="alapic_8c_a76fc10b30ae9deff038c276c3f5a9843_icgraph">
<area shape="rect" title=" " alt="" coords="1691,119,1801,145"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="1540,119,1643,145"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="1317,57,1492,98"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1326,148,1483,175"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="1090,15,1254,57"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="864,5,1001,32"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="671,5,752,32"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="392,5,579,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="189,5,313,32"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1105,97,1239,124"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1075,148,1269,175"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1091,224,1253,251"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1101,300,1243,327"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="857,57,1009,98"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="843,123,1022,149"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="863,173,1003,200"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="632,115,791,157"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="839,224,1027,251"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="399,275,572,301"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="645,224,778,251"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,224,584,251"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,249,339,276"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,199,101,225"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,249,115,276"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,300,116,327"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="857,325,1008,352"/>
</map>
</div>

</div>
</div>
<a id="ab0bd88f2e9609cef51f64e40f0635c9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0bd88f2e9609cef51f64e40f0635c9d">&#9670;&nbsp;</a></span>apic_enabled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int apic_enabled </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00131">131</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;{</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f">kvm_apic_sw_enabled</a>(apic) &amp;&amp; <a class="code" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4">kvm_apic_hw_enabled</a>(apic);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div>
<div class="ttc" id="alapic_8h_html_a1d8660ecbda996b11b10b179013e52d4"><div class="ttname"><a href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4">kvm_apic_hw_enabled</a></div><div class="ttdeci">static bool kvm_apic_hw_enabled(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00195">lapic.h:195</a></div></div>
<div class="ttc" id="alapic_8h_html_a447b1b971acaf871dd62669b4aa3116f"><div class="ttname"><a href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f">kvm_apic_sw_enabled</a></div><div class="ttdeci">static bool kvm_apic_sw_enabled(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00204">lapic.h:204</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ab0bd88f2e9609cef51f64e40f0635c9d_cgraph.png" border="0" usemap="#alapic_8c_ab0bd88f2e9609cef51f64e40f0635c9d_cgraph" alt=""/></div>
<map name="alapic_8c_ab0bd88f2e9609cef51f64e40f0635c9d_cgraph" id="alapic_8c_ab0bd88f2e9609cef51f64e40f0635c9d_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,113,57"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="161,5,332,32"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="162,56,331,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ab0bd88f2e9609cef51f64e40f0635c9d_icgraph.png" border="0" usemap="#alapic_8c_ab0bd88f2e9609cef51f64e40f0635c9d_icgraph" alt=""/></div>
<map name="alapic_8c_ab0bd88f2e9609cef51f64e40f0635c9d_icgraph" id="alapic_8c_ab0bd88f2e9609cef51f64e40f0635c9d_icgraph">
<area shape="rect" title=" " alt="" coords="1665,752,1773,779"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1459,697,1596,724"/>
<area shape="rect" href="irq_8h.html#afcf66d0c1c15dcbd414e2dbf830d7b29" title=" " alt="" coords="1437,777,1617,804"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="1215,697,1389,724"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="1234,335,1370,361"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="974,690,1161,731"/>
<area shape="rect" href="pmu_8c.html#a03a16f548326b68245a4bf0555bea777" title=" " alt="" coords="982,623,1153,649"/>
<area shape="rect" href="x86_8c.html#a130b6ed14cf18384646cb31251dd104e" title=" " alt="" coords="975,789,1160,816"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="746,720,893,747"/>
<area shape="rect" href="irq_8h.html#ac79f0e40ed0e1cde83a09aef506fb373" title=" " alt="" coords="719,639,920,665"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="499,654,667,695"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="524,720,641,747"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="520,771,645,797"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="503,821,662,848"/>
<area shape="rect" href="irq_8c.html#a2d54275d9e142ae8e337298689483728" title=" " alt="" coords="506,589,659,630"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="303,671,384,697"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="5,747,192,773"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="514,537,651,564"/>
<area shape="rect" href="x86_8c.html#a2de10bf19fee1e2a9cb47b6f491a18b4" title=" " alt="" coords="742,811,897,853"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="503,872,662,899"/>
<area shape="rect" href="lapic_8c.html#a33f4e295e9710d133e3e38e0aed35edb" title=" " alt="" coords="1011,335,1124,361"/>
<area shape="rect" href="x86_8c.html#a62f68db08e13f0a4f3d158afda4631b1" title=" " alt="" coords="982,437,1153,478"/>
<area shape="rect" href="hyperv_8c.html#a31df0137f9f8af335cbac3d4179b12a2" title=" " alt="" coords="968,385,1167,412"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="725,225,914,252"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="990,167,1145,209"/>
<area shape="rect" href="hyperv_8c.html#abc5b43adce506bcd416c9e84aa6cf54b" title=" " alt="" coords="991,284,1143,311"/>
<area shape="rect" href="lapic_8c.html#a7195db5c58bcea2e080ee79cdaeae617" title=" " alt="" coords="752,335,887,361"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="254,335,433,361"/>
<area shape="rect" href="async__pf_8c.html#ad9b3dc2e31779a009859785fae9a8ec5" title=" " alt="" coords="750,436,889,463"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="739,487,900,529"/>
<area shape="rect" href="async__pf_8c.html#a55ca283598f3d739a56b50a0f7b908e2" title=" " alt="" coords="503,436,662,463"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="495,487,670,513"/>
<area shape="rect" href="hyperv_8c.html#a4ca4f7e6e021870753e15fa1072e828d" title=" " alt="" coords="752,385,887,412"/>
<area shape="rect" href="hyperv_8c.html#ac96f1fa9ec6ac0ac26c24ca65cc1547e" title=" " alt="" coords="512,385,653,412"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="525,81,640,108"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="509,284,656,311"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="502,132,663,159"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="528,183,637,209"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="529,233,636,260"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="287,157,399,184"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="265,5,422,32"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="240,56,447,83"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="240,107,447,133"/>
<area shape="rect" href="irq__comm_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="719,175,920,201"/>
<area shape="rect" href="xen_8c.html#a7ba53f4f869b74569192380f1adfd40c" title=" " alt="" coords="738,109,901,150"/>
<area shape="rect" href="hyperv_8c.html#acbc8238b9eb8f24485d6bc9eefc06474" title=" " alt="" coords="751,284,888,311"/>
<area shape="rect" href="irq_8c.html#a78e23e83bece8c269268f3a263fbb114" title=" " alt="" coords="734,915,905,957"/>
<area shape="rect" href="kvm__main_8c.html#a3de4d6991bdd1a714e8afa6a55136cdd" title=" " alt="" coords="495,973,671,1000"/>
<area shape="rect" href="kvm__main_8c.html#a8e18df0287ddedfd516454aeeb669807" title=" " alt="" coords="278,923,409,949"/>
<area shape="rect" href="kvm__main_8c.html#a7256a8615584a9ae83a46c071f6aa0e9" title=" " alt="" coords="38,948,159,975"/>
</map>
</div>

</div>
</div>
<a id="aebc526fc8720e4db45143f8e05f85c79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebc526fc8720e4db45143f8e05f85c79">&#9670;&nbsp;</a></span>apic_find_highest_irr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int apic_find_highest_irr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00706">706</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;{</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment">     * Note that irr_pending is just a hint. It will be always</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment">     * true with virtual interrupt delivery enabled.</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">if</span> (!apic-&gt;<a class="code" href="structkvm__lapic.html#ada91b44df57789499ad32ad287c21217">irr_pending</a>)</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    result = <a class="code" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1">apic_search_irr</a>(apic);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <a class="code" href="ioapic_8h.html#aca68c0d4ac8df0838e209fb5300f7be3">ASSERT</a>(result == -1 || result &gt;= 16);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;}</div>
<div class="ttc" id="aioapic_8h_html_aca68c0d4ac8df0838e209fb5300f7be3"><div class="ttname"><a href="ioapic_8h.html#aca68c0d4ac8df0838e209fb5300f7be3">ASSERT</a></div><div class="ttdeci">#define ASSERT(x)</div><div class="ttdef"><b>Definition:</b> <a href="ioapic_8h_source.html#l00101">ioapic.h:101</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aebc526fc8720e4db45143f8e05f85c79_cgraph.png" border="0" usemap="#alapic_8c_aebc526fc8720e4db45143f8e05f85c79_cgraph" alt=""/></div>
<map name="alapic_8c_aebc526fc8720e4db45143f8e05f85c79_cgraph" id="alapic_8c_aebc526fc8720e4db45143f8e05f85c79_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,161,32"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="209,5,329,32"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="377,5,527,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aebc526fc8720e4db45143f8e05f85c79_icgraph.png" border="0" usemap="#alapic_8c_aebc526fc8720e4db45143f8e05f85c79_icgraph" alt=""/></div>
<map name="alapic_8c_aebc526fc8720e4db45143f8e05f85c79_icgraph" id="alapic_8c_aebc526fc8720e4db45143f8e05f85c79_icgraph">
<area shape="rect" title=" " alt="" coords="2088,871,2244,897"/>
<area shape="rect" href="lapic_8c.html#ad2b5e2187414c65e1a5876e641fee3fc" title=" " alt="" coords="1651,221,1761,248"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="1875,661,2017,702"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1379,921,1531,948"/>
<area shape="rect" href="lapic_8c.html#a1e5b22760af617cabb18355a0a373156" title=" " alt="" coords="1608,972,1804,999"/>
<area shape="rect" href="lapic_8c.html#a332060485ef249fcfd9edbf9cf80dd2b" title=" " alt="" coords="1852,871,2040,897"/>
<area shape="rect" href="lapic_8c.html#ad608730f208932f64d2c98c762fce85c" title=" " alt="" coords="1382,83,1527,109"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="1367,221,1543,248"/>
<area shape="rect" href="vmx_2nested_8c.html#add1e82c32385142c0fca04a1db8cbc3a" title=" " alt="" coords="1133,69,1264,96"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fecee9010894e3a1513a0924e24dd6" title=" " alt="" coords="661,44,799,71"/>
<area shape="rect" href="vmx_2nested_8c.html#a23e3de8c964e87404eea818be6f70154" title=" " alt="" coords="891,5,1034,32"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="412,37,583,78"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="1113,145,1285,172"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="877,341,1048,382"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="885,145,1040,172"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="661,871,799,897"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="457,892,538,919"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,913,364,940"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,955,129,981"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="656,145,804,172"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="669,95,791,121"/>
<area shape="rect" href="vmx_2nested_8c.html#a4e307e2bcf664c83265b1442e3fc8da2" title=" " alt="" coords="642,197,818,238"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="631,263,829,289"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="1641,668,1771,695"/>
<area shape="rect" href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf" title=" " alt="" coords="1617,272,1795,299"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="1405,769,1504,796"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="1403,516,1506,543"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="1404,592,1505,619"/>
<area shape="rect" href="lapic_8c.html#a44fec9a6b84f831af88ffed6b2325545" title=" " alt="" coords="1372,668,1537,695"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1390,719,1519,745"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="1122,820,1275,847"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="1122,769,1275,796"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="1111,450,1286,491"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1120,516,1277,543"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="881,610,1045,651"/>
<area shape="rect" href="lapic_8c.html#aee34622e495b500817e0b0905bfd0d4c" title=" " alt="" coords="1128,567,1269,593"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1123,922,1274,963"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="651,1013,809,1040"/>
<area shape="rect" href="vmx_8c.html#afb231b1a3b0ccf655edde89034273129" title=" " alt="" coords="1096,668,1301,695"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1134,719,1263,745"/>
<area shape="rect" href="irq_8c.html#a82ee83566d2724a298b67f23f481976b" title=" " alt="" coords="1349,348,1560,375"/>
<area shape="rect" href="irq_8c.html#ae3151f072a1bb4a732ee3854ab6cf619" title=" " alt="" coords="1367,272,1542,299"/>
<area shape="rect" href="svm_8c.html#a5c26f1ceaa6cc778d986bd33629dc539" title=" " alt="" coords="1148,399,1249,425"/>
<area shape="rect" href="x86_8c.html#a54ec69b24c80207e4e6122994db0a466" title=" " alt="" coords="1113,247,1284,273"/>
<area shape="rect" href="svm_2nested_8c.html#a3286f29b650004d599595557d310136e" title=" " alt="" coords="1100,297,1297,324"/>
<area shape="rect" href="x86_8c.html#af2257f2e81aff845f58e2112c4f46ce7" title=" " alt="" coords="1375,1023,1534,1049"/>
<area shape="rect" href="vmx_8c.html#ac2197e1b1fbae590edacaecfd1d0974c" title=" " alt="" coords="1378,972,1531,999"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="1117,1064,1280,1091"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="913,1064,1012,1091"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="909,1115,1016,1141"/>
</map>
</div>

</div>
</div>
<a id="a80d977ac48cfa76440f2961e38b23fd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80d977ac48cfa76440f2961e38b23fd0">&#9670;&nbsp;</a></span>apic_find_highest_isr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int apic_find_highest_isr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00768">768</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;{</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160; </div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">     * Note that isr_count is always 1, and highest_isr_cache</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">     * is always -1, with APIC virtualization enabled.</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordflow">if</span> (!apic-&gt;<a class="code" href="structkvm__lapic.html#ad8506269387d80ddd1c6cc8a96c9398a">isr_count</a>)</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">if</span> (likely(apic-&gt;<a class="code" href="structkvm__lapic.html#a4b58ed7ed33fe007d319d39271d8d1b9">highest_isr_cache</a> != -1))</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="keywordflow">return</span> apic-&gt;<a class="code" href="structkvm__lapic.html#a4b58ed7ed33fe007d319d39271d8d1b9">highest_isr_cache</a>;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    result = <a class="code" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52">find_highest_vector</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_ISR);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <a class="code" href="ioapic_8h.html#aca68c0d4ac8df0838e209fb5300f7be3">ASSERT</a>(result == -1 || result &gt;= 16);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a656567b4197d9a5af833ffd04dff7a52"><div class="ttname"><a href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52">find_highest_vector</a></div><div class="ttdeci">static int find_highest_vector(void *bitmap)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00625">lapic.c:625</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a80d977ac48cfa76440f2961e38b23fd0_cgraph.png" border="0" usemap="#alapic_8c_a80d977ac48cfa76440f2961e38b23fd0_cgraph" alt=""/></div>
<map name="alapic_8c_a80d977ac48cfa76440f2961e38b23fd0_cgraph" id="alapic_8c_a80d977ac48cfa76440f2961e38b23fd0_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,164,32"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="212,5,361,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a80d977ac48cfa76440f2961e38b23fd0_icgraph.png" border="0" usemap="#alapic_8c_a80d977ac48cfa76440f2961e38b23fd0_icgraph" alt=""/></div>
<map name="alapic_8c_a80d977ac48cfa76440f2961e38b23fd0_icgraph" id="alapic_8c_a80d977ac48cfa76440f2961e38b23fd0_icgraph">
<area shape="rect" title=" " alt="" coords="2005,692,2164,719"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="1792,423,1935,449"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="1338,743,1441,769"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1313,688,1465,715"/>
<area shape="rect" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843" title=" " alt="" coords="1577,743,1687,769"/>
<area shape="rect" href="lapic_8c.html#a332060485ef249fcfd9edbf9cf80dd2b" title=" " alt="" coords="1769,848,1957,875"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="1567,460,1697,487"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="1301,333,1477,360"/>
<area shape="rect" href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf" title=" " alt="" coords="1543,271,1721,297"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="1340,485,1439,512"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="1339,612,1440,639"/>
<area shape="rect" href="lapic_8c.html#a44fec9a6b84f831af88ffed6b2325545" title=" " alt="" coords="1307,384,1472,411"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1325,435,1454,461"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="1057,485,1210,512"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="1057,536,1210,563"/>
<area shape="rect" href="x86_8c.html#aca5ab82fb669f6a99e011293efed0d5d" title=" " alt="" coords="809,478,961,519"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="561,485,720,512"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,511,129,537"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="1046,739,1221,781"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1055,805,1212,832"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="803,609,967,650"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="572,536,709,563"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,536,493,563"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,536,364,563"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="818,856,953,883"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="788,689,983,716"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="805,755,966,781"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="814,805,957,832"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="565,638,717,679"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="551,704,730,731"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="571,587,711,613"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="547,805,735,832"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="554,755,727,781"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="565,856,716,883"/>
<area shape="rect" href="lapic_8c.html#aee34622e495b500817e0b0905bfd0d4c" title=" " alt="" coords="1063,637,1204,664"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="810,543,961,585"/>
<area shape="rect" href="vmx_8c.html#afb231b1a3b0ccf655edde89034273129" title=" " alt="" coords="1031,384,1236,411"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="1047,333,1219,360"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="800,275,971,317"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="808,341,963,368"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="541,160,740,187"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1069,435,1198,461"/>
<area shape="rect" href="irq_8c.html#a82ee83566d2724a298b67f23f481976b" title=" " alt="" coords="1284,271,1495,297"/>
<area shape="rect" href="irq_8c.html#ae3151f072a1bb4a732ee3854ab6cf619" title=" " alt="" coords="1302,55,1477,81"/>
<area shape="rect" href="vmx_2nested_8c.html#add1e82c32385142c0fca04a1db8cbc3a" title=" " alt="" coords="1324,181,1455,208"/>
<area shape="rect" href="svm_8c.html#a5c26f1ceaa6cc778d986bd33629dc539" title=" " alt="" coords="1083,232,1184,259"/>
<area shape="rect" href="x86_8c.html#a54ec69b24c80207e4e6122994db0a466" title=" " alt="" coords="1048,29,1219,56"/>
<area shape="rect" href="svm_2nested_8c.html#a3286f29b650004d599595557d310136e" title=" " alt="" coords="1035,80,1232,107"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fecee9010894e3a1513a0924e24dd6" title=" " alt="" coords="1065,131,1202,157"/>
<area shape="rect" href="vmx_2nested_8c.html#a23e3de8c964e87404eea818be6f70154" title=" " alt="" coords="1062,181,1205,208"/>
</map>
</div>

</div>
</div>
<a id="a5bf640da1dfc1be09d89fb23c7f2e954"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bf640da1dfc1be09d89fb23c7f2e954">&#9670;&nbsp;</a></span>apic_get_tmcct()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u32 apic_get_tmcct </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01529">1529</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;{</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    ktime_t remaining, now;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    s64 ns;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160; </div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <a class="code" href="ioapic_8h.html#aca68c0d4ac8df0838e209fb5300f7be3">ASSERT</a>(apic != NULL);</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160; </div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <span class="comment">/* if initial count is 0, current count should also be 0 */</span></div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_TMICT) == 0 ||</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a> == 0)</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160; </div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    now = ktime_get();</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    remaining = ktime_sub(apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a0de90943a0ace07fbb0e0219fe64e2f8">target_expiration</a>, now);</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <span class="keywordflow">if</span> (ktime_to_ns(remaining) &lt; 0)</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        remaining = 0;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160; </div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    ns = <a class="code" href="lapic_8c.html#a908ec45b54c68dff62333670a03b8713">mod_64</a>(ktime_to_ns(remaining), apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a>);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <span class="keywordflow">return</span> div64_u64(ns, (<a class="code" href="lapic_8h.html#a0e44db9c8a1731b40f6ad0267b42f3f9">APIC_BUS_CYCLE_NS</a> * apic-&gt;<a class="code" href="structkvm__lapic.html#a31c3efc5b365f96580ea975272c3f277">divide_count</a>));</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a908ec45b54c68dff62333670a03b8713"><div class="ttname"><a href="lapic_8c.html#a908ec45b54c68dff62333670a03b8713">mod_64</a></div><div class="ttdeci">#define mod_64(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00050">lapic.c:50</a></div></div>
<div class="ttc" id="alapic_8h_html_a0e44db9c8a1731b40f6ad0267b42f3f9"><div class="ttname"><a href="lapic_8h.html#a0e44db9c8a1731b40f6ad0267b42f3f9">APIC_BUS_CYCLE_NS</a></div><div class="ttdeci">#define APIC_BUS_CYCLE_NS</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00019">lapic.h:19</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_a31c3efc5b365f96580ea975272c3f277"><div class="ttname"><a href="structkvm__lapic.html#a31c3efc5b365f96580ea975272c3f277">kvm_lapic::divide_count</a></div><div class="ttdeci">u32 divide_count</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00063">lapic.h:63</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a5bf640da1dfc1be09d89fb23c7f2e954_cgraph.png" border="0" usemap="#alapic_8c_a5bf640da1dfc1be09d89fb23c7f2e954_cgraph" alt=""/></div>
<map name="alapic_8c_a5bf640da1dfc1be09d89fb23c7f2e954_cgraph" id="alapic_8c_a5bf640da1dfc1be09d89fb23c7f2e954_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,127,32"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="175,5,320,32"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="368,5,527,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a5bf640da1dfc1be09d89fb23c7f2e954_icgraph.png" border="0" usemap="#alapic_8c_a5bf640da1dfc1be09d89fb23c7f2e954_icgraph" alt=""/></div>
<map name="alapic_8c_a5bf640da1dfc1be09d89fb23c7f2e954_icgraph" id="alapic_8c_a5bf640da1dfc1be09d89fb23c7f2e954_icgraph">
<area shape="rect" title=" " alt="" coords="1601,46,1723,73"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="1455,46,1553,73"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="1253,17,1407,43"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="1253,71,1407,98"/>
<area shape="rect" href="x86_8c.html#aca5ab82fb669f6a99e011293efed0d5d" title=" " alt="" coords="1051,5,1203,47"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="829,13,987,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="639,13,763,39"/>
<area shape="rect" href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1" title=" " alt="" coords="1061,71,1192,98"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="1048,122,1205,149"/>
<area shape="rect" href="lapic_8c.html#ae9bd2989ca4c31caf8aa56b8c7dfd248" title=" " alt="" coords="816,97,1000,123"/>
<area shape="rect" href="lapic_8c.html#a179cfc2268db31f40b5bd9b1c247a37b" title=" " alt="" coords="401,147,571,174"/>
<area shape="rect" href="hyperv_8c.html#acd3e0dad98bde91068115067f6ec3ae6" title=" " alt="" coords="633,97,768,123"/>
<area shape="rect" href="hyperv_8c.html#a23d197f9ae27f820fa7e977aec518698" title=" " alt="" coords="387,97,585,123"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="164,122,339,149"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="5,97,116,123"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="5,147,116,174"/>
</map>
</div>

</div>
</div>
<a id="ac1c99098894f4751a556057800e906e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1c99098894f4751a556057800e906e0">&#9670;&nbsp;</a></span>apic_has_interrupt_for_ppr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int apic_has_interrupt_for_ppr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>ppr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00932">932</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;{</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="keywordtype">int</span> highest_irr;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">if</span> (kvm_x86_ops.sync_pir_to_irr)</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        highest_irr = static_call(kvm_x86_sync_pir_to_irr)(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        highest_irr = <a class="code" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79">apic_find_highest_irr</a>(apic);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordflow">if</span> (highest_irr == -1 || (highest_irr &amp; 0xF0) &lt;= ppr)</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keywordflow">return</span> highest_irr;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ac1c99098894f4751a556057800e906e0_cgraph.png" border="0" usemap="#alapic_8c_ac1c99098894f4751a556057800e906e0_cgraph" alt=""/></div>
<map name="alapic_8c_ac1c99098894f4751a556057800e906e0_cgraph" id="alapic_8c_ac1c99098894f4751a556057800e906e0_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,148,47"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="196,13,352,39"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="400,13,520,39"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="568,13,717,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ac1c99098894f4751a556057800e906e0_icgraph.png" border="0" usemap="#alapic_8c_ac1c99098894f4751a556057800e906e0_icgraph" alt=""/></div>
<map name="alapic_8c_ac1c99098894f4751a556057800e906e0_icgraph" id="alapic_8c_ac1c99098894f4751a556057800e906e0_icgraph">
<area shape="rect" title=" " alt="" coords="1233,595,1376,637"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="1031,409,1161,436"/>
<area shape="rect" href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf" title=" " alt="" coords="1007,763,1185,789"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="804,115,903,141"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="802,384,905,411"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="803,439,904,465"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="777,276,929,303"/>
<area shape="rect" href="lapic_8c.html#a44fec9a6b84f831af88ffed6b2325545" title=" " alt="" coords="771,37,936,64"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="765,661,941,688"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="789,515,918,541"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="521,115,674,141"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="521,60,674,87"/>
<area shape="rect" href="x86_8c.html#aca5ab82fb669f6a99e011293efed0d5d" title=" " alt="" coords="273,107,425,149"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="25,144,184,171"/>
<area shape="rect" href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1" title=" " alt="" coords="284,5,415,32"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="271,56,428,83"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="510,377,685,418"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="519,325,676,352"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="267,427,431,469"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="36,645,173,672"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="282,325,417,352"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="252,376,447,403"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="269,224,430,251"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="278,275,421,301"/>
<area shape="rect" href="lapic_8c.html#aee34622e495b500817e0b0905bfd0d4c" title=" " alt="" coords="527,493,668,520"/>
<area shape="rect" href="x86_8c.html#a120377d5a571d3fb86660cd5f6cd982d" title=" " alt="" coords="297,493,402,520"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="522,213,673,254"/>
<area shape="rect" href="vmx_8c.html#afb231b1a3b0ccf655edde89034273129" title=" " alt="" coords="495,9,700,36"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="511,661,683,688"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="264,747,435,789"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="272,696,427,723"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="5,755,204,781"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="533,569,662,596"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="256,645,443,672"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="263,595,435,621"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="264,544,435,571"/>
<area shape="rect" href="irq_8c.html#a82ee83566d2724a298b67f23f481976b" title=" " alt="" coords="748,864,959,891"/>
<area shape="rect" href="irq_8c.html#ae3151f072a1bb4a732ee3854ab6cf619" title=" " alt="" coords="766,763,941,789"/>
<area shape="rect" href="vmx_2nested_8c.html#add1e82c32385142c0fca04a1db8cbc3a" title=" " alt="" coords="788,991,919,1017"/>
<area shape="rect" href="svm_8c.html#a5c26f1ceaa6cc778d986bd33629dc539" title=" " alt="" coords="547,940,648,967"/>
<area shape="rect" href="svm_8c.html#a4a2beb03d1ef1d9e803c22570b5806d1" title=" " alt="" coords="284,915,415,941"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="260,965,439,992"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="27,1041,182,1068"/>
<area shape="rect" href="svm_8c.html#a0a2c47b46c5f4c14c1ae6a64119bcb60" title=" " alt="" coords="284,1117,415,1144"/>
<area shape="rect" href="svm_8c.html#a5df90c8772700a60441f2ba19472f726" title=" " alt="" coords="294,1067,405,1093"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="265,864,433,891"/>
<area shape="rect" href="x86_8c.html#a54ec69b24c80207e4e6122994db0a466" title=" " alt="" coords="512,712,683,739"/>
<area shape="rect" href="svm_2nested_8c.html#a3286f29b650004d599595557d310136e" title=" " alt="" coords="499,763,696,789"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fecee9010894e3a1513a0924e24dd6" title=" " alt="" coords="529,1041,666,1068"/>
<area shape="rect" href="vmx_2nested_8c.html#a23e3de8c964e87404eea818be6f70154" title=" " alt="" coords="526,991,669,1017"/>
</map>
</div>

</div>
</div>
<a id="afcf66d0c1c15dcbd414e2dbf830d7b29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcf66d0c1c15dcbd414e2dbf830d7b29">&#9670;&nbsp;</a></span>apic_has_pending_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int apic_has_pending_timer </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02752">2752</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;{</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160; </div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d">apic_enabled</a>(apic) &amp;&amp; <a class="code" href="lapic_8c.html#a2800acddbbe439c5ae4fab24c1eaf9ff">apic_lvt_enabled</a>(apic, APIC_LVTT))</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;        <span class="keywordflow">return</span> atomic_read(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a581e6b6fe55055ed8a81d5a1aa258ff7">pending</a>);</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160; </div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a2800acddbbe439c5ae4fab24c1eaf9ff"><div class="ttname"><a href="lapic_8c.html#a2800acddbbe439c5ae4fab24c1eaf9ff">apic_lvt_enabled</a></div><div class="ttdeci">static int apic_lvt_enabled(struct kvm_lapic *apic, int lvt_type)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00538">lapic.c:538</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_afcf66d0c1c15dcbd414e2dbf830d7b29_cgraph.png" border="0" usemap="#alapic_8c_afcf66d0c1c15dcbd414e2dbf830d7b29_cgraph" alt=""/></div>
<map name="alapic_8c_afcf66d0c1c15dcbd414e2dbf830d7b29_cgraph" id="alapic_8c_afcf66d0c1c15dcbd414e2dbf830d7b29_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,185,108"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="245,56,353,83"/>
<area shape="rect" href="lapic_8c.html#a2800acddbbe439c5ae4fab24c1eaf9ff" title=" " alt="" coords="233,107,365,133"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="413,5,584,32"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="414,56,583,83"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="426,107,571,133"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="632,107,791,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_afcf66d0c1c15dcbd414e2dbf830d7b29_icgraph.png" border="0" usemap="#alapic_8c_afcf66d0c1c15dcbd414e2dbf830d7b29_icgraph" alt=""/></div>
<map name="alapic_8c_afcf66d0c1c15dcbd414e2dbf830d7b29_icgraph" id="alapic_8c_afcf66d0c1c15dcbd414e2dbf830d7b29_icgraph">
<area shape="rect" title=" " alt="" coords="1579,125,1759,152"/>
<area shape="rect" href="irq_8c.html#a78e23e83bece8c269268f3a263fbb114" title=" " alt="" coords="1360,118,1531,159"/>
<area shape="rect" href="kvm__main_8c.html#a3de4d6991bdd1a714e8afa6a55136cdd" title=" " alt="" coords="1136,100,1312,126"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="425,100,506,126"/>
<area shape="rect" href="kvm__main_8c.html#a8e18df0287ddedfd516454aeeb669807" title=" " alt="" coords="957,100,1088,126"/>
<area shape="rect" href="kvm__main_8c.html#a7256a8615584a9ae83a46c071f6aa0e9" title=" " alt="" coords="788,49,909,76"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,49,364,76"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="606,100,701,126"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,49,129,76"/>
<area shape="rect" href="xen_8c.html#a4bcdab8c7d597fa93d30ff9e9185cbc6" title=" " alt="" coords="567,49,740,76"/>
<area shape="rect" href="xen_8c.html#ab8910a0f422594766001b1c5a5f59e6e" title=" " alt="" coords="412,49,519,76"/>
</map>
</div>

</div>
</div>
<a id="a2800acddbbe439c5ae4fab24c1eaf9ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2800acddbbe439c5ae4fab24c1eaf9ff">&#9670;&nbsp;</a></span>apic_lvt_enabled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int apic_lvt_enabled </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lvt_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00538">538</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;{</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">return</span> !(<a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, lvt_type) &amp; APIC_LVT_MASKED);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a2800acddbbe439c5ae4fab24c1eaf9ff_cgraph.png" border="0" usemap="#alapic_8c_a2800acddbbe439c5ae4fab24c1eaf9ff_cgraph" alt=""/></div>
<map name="alapic_8c_a2800acddbbe439c5ae4fab24c1eaf9ff_cgraph" id="alapic_8c_a2800acddbbe439c5ae4fab24c1eaf9ff_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,137,32"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="185,5,331,32"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="379,5,537,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a2800acddbbe439c5ae4fab24c1eaf9ff_icgraph.png" border="0" usemap="#alapic_8c_a2800acddbbe439c5ae4fab24c1eaf9ff_icgraph" alt=""/></div>
<map name="alapic_8c_a2800acddbbe439c5ae4fab24c1eaf9ff_icgraph" id="alapic_8c_a2800acddbbe439c5ae4fab24c1eaf9ff_icgraph">
<area shape="rect" title=" " alt="" coords="1807,125,1939,152"/>
<area shape="rect" href="irq_8h.html#afcf66d0c1c15dcbd414e2dbf830d7b29" title=" " alt="" coords="1579,125,1759,152"/>
<area shape="rect" href="irq_8c.html#a78e23e83bece8c269268f3a263fbb114" title=" " alt="" coords="1360,118,1531,159"/>
<area shape="rect" href="kvm__main_8c.html#a3de4d6991bdd1a714e8afa6a55136cdd" title=" " alt="" coords="1136,100,1312,126"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="425,100,506,126"/>
<area shape="rect" href="kvm__main_8c.html#a8e18df0287ddedfd516454aeeb669807" title=" " alt="" coords="957,100,1088,126"/>
<area shape="rect" href="kvm__main_8c.html#a7256a8615584a9ae83a46c071f6aa0e9" title=" " alt="" coords="788,49,909,76"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,49,364,76"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="606,100,701,126"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,49,129,76"/>
<area shape="rect" href="xen_8c.html#a4bcdab8c7d597fa93d30ff9e9185cbc6" title=" " alt="" coords="567,49,740,76"/>
<area shape="rect" href="xen_8c.html#ab8910a0f422594766001b1c5a5f59e6e" title=" " alt="" coords="412,49,519,76"/>
</map>
</div>

</div>
</div>
<a id="a063bf62e455f91f22cf2b81452698b0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a063bf62e455f91f22cf2b81452698b0c">&#9670;&nbsp;</a></span>apic_lvt_nmi_mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int apic_lvt_nmi_mode </td>
          <td>(</td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>lvt_val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00558">558</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;{</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">return</span> (lvt_val &amp; (APIC_MODE_MASK | APIC_LVT_MASKED)) == APIC_DM_NMI;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a063bf62e455f91f22cf2b81452698b0c_icgraph.png" border="0" usemap="#alapic_8c_a063bf62e455f91f22cf2b81452698b0c_icgraph" alt=""/></div>
<map name="alapic_8c_a063bf62e455f91f22cf2b81452698b0c_icgraph" id="alapic_8c_a063bf62e455f91f22cf2b81452698b0c_icgraph">
<area shape="rect" title=" " alt="" coords="1848,401,1997,428"/>
<area shape="rect" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1" title=" " alt="" coords="1589,401,1800,428"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1387,456,1539,483"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1384,221,1541,248"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1398,401,1527,428"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1163,474,1314,515"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="431,496,590,523"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,405,129,432"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1171,272,1306,299"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1141,221,1336,248"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1158,81,1319,108"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1167,157,1310,184"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="923,285,1075,326"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="910,183,1089,209"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="929,233,1069,260"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="678,175,837,217"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="905,31,1093,57"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="424,81,597,108"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="691,31,824,57"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="412,31,609,57"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="183,56,358,83"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="27,56,108,83"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="13,107,122,133"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="12,5,123,32"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="924,132,1075,159"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1174,401,1303,428"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="906,351,1093,377"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="913,452,1085,479"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="914,401,1085,428"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,398,350,439"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,347,364,373"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="710,249,805,276"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="689,300,826,327"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="470,300,551,327"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="657,452,857,479"/>
</map>
</div>

</div>
</div>
<a id="adf8f8ff420925292fe7ce7e1ea72924a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf8f8ff420925292fe7ce7e1ea72924a">&#9670;&nbsp;</a></span>apic_lvtt_oneshot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int apic_lvtt_oneshot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00543">543</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;{</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">return</span> apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a0a01f4db22cd9d821750ba99cd9dd1d6">timer_mode</a> == APIC_LVT_TIMER_ONESHOT;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div>
<div class="ttc" id="astructkvm__timer_html_a0a01f4db22cd9d821750ba99cd9dd1d6"><div class="ttname"><a href="structkvm__timer.html#a0a01f4db22cd9d821750ba99cd9dd1d6">kvm_timer::timer_mode</a></div><div class="ttdeci">u32 timer_mode</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00050">lapic.h:50</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_adf8f8ff420925292fe7ce7e1ea72924a_icgraph.png" border="0" usemap="#alapic_8c_adf8f8ff420925292fe7ce7e1ea72924a_icgraph" alt=""/></div>
<map name="alapic_8c_adf8f8ff420925292fe7ce7e1ea72924a_icgraph" id="alapic_8c_adf8f8ff420925292fe7ce7e1ea72924a_icgraph">
<area shape="rect" title=" " alt="" coords="2756,534,2893,561"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1446,338,1589,365"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="2521,468,2708,510"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="2082,484,2207,510"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="1877,433,1996,460"/>
<area shape="rect" href="lapic_8c.html#a0efcb9037756de47e9d28f0a5ea1009f" title=" " alt="" coords="1856,484,2017,510"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1205,393,1357,420"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1217,338,1345,365"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="937,391,1088,432"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="673,508,831,534"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="451,533,575,560"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="934,286,1091,313"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="897,340,1128,366"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="685,285,819,312"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="655,154,849,181"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="671,402,833,429"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="681,234,823,261"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="437,122,589,163"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="423,70,602,97"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="443,188,583,214"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="188,63,347,104"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="419,356,607,382"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="426,406,599,433"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="201,356,334,382"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="180,432,355,458"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,381,101,408"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,432,115,458"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,482,116,509"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="437,238,588,265"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="675,336,829,378"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="435,290,590,331"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="164,213,371,240"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="2299,433,2446,460"/>
<area shape="rect" href="irq_8h.html#ac79f0e40ed0e1cde83a09aef506fb373" title=" " alt="" coords="2272,484,2473,510"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1433,222,1601,263"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="1878,382,1995,409"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="2065,433,2224,460"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="1176,142,1385,183"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="917,149,1108,176"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1658,382,1799,409"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1436,390,1599,431"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1438,455,1597,496"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1201,457,1360,484"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="955,457,1070,484"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="969,508,1057,534"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="659,558,845,585"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1233,521,1328,548"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="972,558,1053,585"/>
<area shape="rect" href="lapic_8c.html#aee4a3e5ae4ed211edf4e463ebacadaa5" title=" " alt="" coords="1649,484,1808,526"/>
<area shape="rect" href="irq_8c.html#a2d54275d9e142ae8e337298689483728" title=" " alt="" coords="1652,550,1805,591"/>
</map>
</div>

</div>
</div>
<a id="a843b5038a6a8d6c20b11bd97b69bf667"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a843b5038a6a8d6c20b11bd97b69bf667">&#9670;&nbsp;</a></span>apic_lvtt_period()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int apic_lvtt_period </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00548">548</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;{</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordflow">return</span> apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a0a01f4db22cd9d821750ba99cd9dd1d6">timer_mode</a> == APIC_LVT_TIMER_PERIODIC;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a843b5038a6a8d6c20b11bd97b69bf667_icgraph.png" border="0" usemap="#alapic_8c_a843b5038a6a8d6c20b11bd97b69bf667_icgraph" alt=""/></div>
<map name="alapic_8c_a843b5038a6a8d6c20b11bd97b69bf667_icgraph" id="alapic_8c_a843b5038a6a8d6c20b11bd97b69bf667_icgraph">
<area shape="rect" title=" " alt="" coords="2092,435,2219,461"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1453,344,1595,371"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1440,629,1608,670"/>
<area shape="rect" href="lapic_8c.html#a86e81c4916d223c6f60d958af49c71dd" title=" " alt="" coords="1902,621,2033,648"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="1891,241,2044,282"/>
<area shape="rect" href="lapic_8c.html#a0efcb9037756de47e9d28f0a5ea1009f" title=" " alt="" coords="1669,308,1830,335"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1679,453,1820,480"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="1909,460,2026,487"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="1908,511,2027,537"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1211,344,1363,371"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1223,293,1351,320"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="944,377,1095,418"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="679,443,838,469"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="457,443,581,469"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="941,225,1098,252"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="904,325,1135,352"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="691,209,826,236"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="661,144,856,171"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="678,260,839,287"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="687,49,830,76"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="443,107,595,149"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="430,173,609,200"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="449,56,589,83"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="425,224,613,251"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="433,275,606,301"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="187,300,361,327"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="23,351,105,377"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="9,249,119,276"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="9,300,119,327"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="444,5,595,32"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="681,377,836,418"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="442,377,597,418"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="171,511,377,537"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="5,511,123,537"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="1183,629,1392,670"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="924,595,1115,621"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="685,595,833,621"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="452,595,587,621"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="1459,192,1589,219"/>
<area shape="rect" href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4" title=" " alt="" coords="1656,248,1843,275"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1223,141,1352,168"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="955,141,1084,168"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1443,446,1605,487"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1445,511,1603,553"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1208,453,1367,480"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="962,493,1077,520"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="975,443,1063,469"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1240,544,1335,571"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="979,544,1060,571"/>
<area shape="rect" href="lapic_8c.html#aee4a3e5ae4ed211edf4e463ebacadaa5" title=" " alt="" coords="1670,505,1829,546"/>
</map>
</div>

</div>
</div>
<a id="adaceffbfc91320b193a66d974fb12ce0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaceffbfc91320b193a66d974fb12ce0">&#9670;&nbsp;</a></span>apic_lvtt_tscdeadline()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int apic_lvtt_tscdeadline </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00553">553</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;{</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">return</span> apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a0a01f4db22cd9d821750ba99cd9dd1d6">timer_mode</a> == APIC_LVT_TIMER_TSCDEADLINE;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_adaceffbfc91320b193a66d974fb12ce0_icgraph.png" border="0" usemap="#alapic_8c_adaceffbfc91320b193a66d974fb12ce0_icgraph" alt=""/></div>
<map name="alapic_8c_adaceffbfc91320b193a66d974fb12ce0_icgraph" id="alapic_8c_adaceffbfc91320b193a66d974fb12ce0_icgraph">
<area shape="rect" title=" " alt="" coords="2204,463,2364,490"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="1991,97,2090,123"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="1703,350,1850,377"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="885,514,1043,541"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="1303,223,1421,250"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="1110,543,1241,570"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="1947,427,2134,468"/>
<area shape="rect" href="lapic_8c.html#af2fa5313476adb8240d3595805d784fc" title=" " alt="" coords="1925,594,2156,621"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="1925,717,2156,743"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="1700,30,1853,57"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="1700,97,1853,123"/>
<area shape="rect" href="x86_8c.html#aca5ab82fb669f6a99e011293efed0d5d" title=" " alt="" coords="1473,5,1625,47"/>
<area shape="rect" href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1" title=" " alt="" coords="1483,122,1614,149"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="1470,71,1627,98"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="880,347,1048,388"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="1303,325,1421,351"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="1486,223,1611,250"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="1469,274,1628,301"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="623,347,832,388"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1105,325,1246,351"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="893,413,1035,439"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="883,281,1045,323"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="885,216,1043,257"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="651,413,803,439"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="405,332,556,373"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="660,463,795,490"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="630,514,825,541"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="647,565,808,591"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="656,615,799,642"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="405,397,557,439"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="391,463,570,490"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="411,514,551,541"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="387,565,575,591"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="394,615,567,642"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,666,339,693"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,615,101,642"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,666,115,693"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,717,116,743"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="405,666,556,693"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="680,194,775,221"/>
<area shape="rect" href="lapic_8c.html#aee4a3e5ae4ed211edf4e463ebacadaa5" title=" " alt="" coords="1096,187,1255,228"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="899,615,1029,642"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="663,666,792,693"/>
<area shape="rect" href="irq_8h.html#ac79f0e40ed0e1cde83a09aef506fb373" title=" " alt="" coords="1676,434,1877,461"/>
<area shape="rect" href="irq_8c.html#a2d54275d9e142ae8e337298689483728" title=" " alt="" coords="1472,427,1625,468"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="1689,594,1864,621"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="1493,645,1604,671"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="1493,594,1604,621"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="1699,768,1854,809"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="1471,768,1626,809"/>
</map>
</div>

</div>
</div>
<a id="afefd171448cafa66f80ecb9b9659ebb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afefd171448cafa66f80ecb9b9659ebb1">&#9670;&nbsp;</a></span>apic_manage_nmi_watchdog()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void apic_manage_nmi_watchdog </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>lvt0_val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02232">2232</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;{</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    <span class="keywordtype">bool</span> lvt0_in_nmi_mode = <a class="code" href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c">apic_lvt_nmi_mode</a>(lvt0_val);</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160; </div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    <span class="keywordflow">if</span> (apic-&gt;<a class="code" href="structkvm__lapic.html#aa50adf6f32ef5726dac99ac5b8c4ba39">lvt0_in_nmi_mode</a> != lvt0_in_nmi_mode) {</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#aa50adf6f32ef5726dac99ac5b8c4ba39">lvt0_in_nmi_mode</a> = lvt0_in_nmi_mode;</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;        <span class="keywordflow">if</span> (lvt0_in_nmi_mode) {</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;            atomic_inc(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm-&gt;arch.vapics_in_nmi_mode);</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;            atomic_dec(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm-&gt;arch.vapics_in_nmi_mode);</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    }</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a063bf62e455f91f22cf2b81452698b0c"><div class="ttname"><a href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c">apic_lvt_nmi_mode</a></div><div class="ttdeci">static int apic_lvt_nmi_mode(u32 lvt_val)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00558">lapic.c:558</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_aa50adf6f32ef5726dac99ac5b8c4ba39"><div class="ttname"><a href="structkvm__lapic.html#aa50adf6f32ef5726dac99ac5b8c4ba39">kvm_lapic::lvt0_in_nmi_mode</a></div><div class="ttdeci">bool lvt0_in_nmi_mode</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00068">lapic.h:68</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_afefd171448cafa66f80ecb9b9659ebb1_cgraph.png" border="0" usemap="#alapic_8c_afefd171448cafa66f80ecb9b9659ebb1_cgraph" alt=""/></div>
<map name="alapic_8c_afefd171448cafa66f80ecb9b9659ebb1_cgraph" id="alapic_8c_afefd171448cafa66f80ecb9b9659ebb1_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,216,32"/>
<area shape="rect" href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c" title=" " alt="" coords="264,5,413,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_afefd171448cafa66f80ecb9b9659ebb1_icgraph.png" border="0" usemap="#alapic_8c_afefd171448cafa66f80ecb9b9659ebb1_icgraph" alt=""/></div>
<map name="alapic_8c_afefd171448cafa66f80ecb9b9659ebb1_icgraph" id="alapic_8c_afefd171448cafa66f80ecb9b9659ebb1_icgraph">
<area shape="rect" title=" " alt="" coords="1589,401,1800,428"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1387,456,1539,483"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1384,221,1541,248"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1398,401,1527,428"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1163,474,1314,515"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="431,496,590,523"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,405,129,432"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1171,272,1306,299"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1141,221,1336,248"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1158,81,1319,108"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1167,157,1310,184"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="923,285,1075,326"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="910,183,1089,209"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="929,233,1069,260"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="678,175,837,217"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="905,31,1093,57"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="424,81,597,108"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="691,31,824,57"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="412,31,609,57"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="183,56,358,83"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="27,56,108,83"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="13,107,122,133"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="12,5,123,32"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="924,132,1075,159"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1174,401,1303,428"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="906,351,1093,377"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="913,452,1085,479"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="914,401,1085,428"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,398,350,439"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,347,364,373"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="710,249,805,276"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="689,300,826,327"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="470,300,551,327"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="657,452,857,479"/>
</map>
</div>

</div>
</div>
<a id="a1a13521d44779dc719a0bd2cf54fe88d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a13521d44779dc719a0bd2cf54fe88d">&#9670;&nbsp;</a></span>apic_mmio_in_range()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int apic_mmio_in_range </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpa_t&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01682">1682</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;{</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="keywordflow">return</span> addr &gt;= apic-&gt;<a class="code" href="structkvm__lapic.html#a830e2e9bd5c55c17f48b72a0157a6fa2">base_address</a> &amp;&amp;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        addr &lt; apic-&gt;<a class="code" href="structkvm__lapic.html#a830e2e9bd5c55c17f48b72a0157a6fa2">base_address</a> + <a class="code" href="lapic_8c.html#a5befec925c8dea176d75488112b8cc3a">LAPIC_MMIO_LENGTH</a>;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;}</div>
<div class="ttc" id="astructkvm__lapic_html_a830e2e9bd5c55c17f48b72a0157a6fa2"><div class="ttname"><a href="structkvm__lapic.html#a830e2e9bd5c55c17f48b72a0157a6fa2">kvm_lapic::base_address</a></div><div class="ttdeci">unsigned long base_address</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00060">lapic.h:60</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a1a13521d44779dc719a0bd2cf54fe88d_icgraph.png" border="0" usemap="#alapic_8c_a1a13521d44779dc719a0bd2cf54fe88d_icgraph" alt=""/></div>
<map name="alapic_8c_a1a13521d44779dc719a0bd2cf54fe88d_icgraph" id="alapic_8c_a1a13521d44779dc719a0bd2cf54fe88d_icgraph">
<area shape="rect" title=" " alt="" coords="188,31,345,57"/>
<area shape="rect" href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1" title=" " alt="" coords="7,5,138,32"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="5,56,140,83"/>
</map>
</div>

</div>
</div>
<a id="a18976a1e591c223c2aec9c52711c6da1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18976a1e591c223c2aec9c52711c6da1">&#9670;&nbsp;</a></span>apic_mmio_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int apic_mmio_read </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_io_device *&#160;</td>
          <td class="paramname"><em>this</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpa_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01688">1688</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;{</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="lapic_8c.html#a59900449cd556b732187d0a91d983b80">to_lapic</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    u32 offset = address - apic-&gt;<a class="code" href="structkvm__lapic.html#a830e2e9bd5c55c17f48b72a0157a6fa2">base_address</a>;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160; </div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8c.html#a1a13521d44779dc719a0bd2cf54fe88d">apic_mmio_in_range</a>(apic, address))</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;        <span class="keywordflow">return</span> -EOPNOTSUPP;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160; </div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4">kvm_apic_hw_enabled</a>(apic) || <a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic)) {</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="x86_8h.html#adf8330176a8805826ed4711a51ce93cf">kvm_check_has_quirk</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm,</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;                     KVM_X86_QUIRK_LAPIC_MMIO_HOLE))</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;            <span class="keywordflow">return</span> -EOPNOTSUPP;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160; </div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        memset(data, 0xff, len);</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    }</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160; </div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <a class="code" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c">kvm_lapic_reg_read</a>(apic, offset, len, data);</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160; </div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a1a13521d44779dc719a0bd2cf54fe88d"><div class="ttname"><a href="lapic_8c.html#a1a13521d44779dc719a0bd2cf54fe88d">apic_mmio_in_range</a></div><div class="ttdeci">static int apic_mmio_in_range(struct kvm_lapic *apic, gpa_t addr)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01682">lapic.c:1682</a></div></div>
<div class="ttc" id="alapic_8c_html_a59900449cd556b732187d0a91d983b80"><div class="ttname"><a href="lapic_8c.html#a59900449cd556b732187d0a91d983b80">to_lapic</a></div><div class="ttdeci">static struct kvm_lapic * to_lapic(struct kvm_io_device *dev)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01598">lapic.c:1598</a></div></div>
<div class="ttc" id="alapic_8c_html_afdddb3803bbe495a6eb54937906caf2c"><div class="ttname"><a href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c">kvm_lapic_reg_read</a></div><div class="ttdeci">static int kvm_lapic_reg_read(struct kvm_lapic *apic, u32 offset, int len, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01645">lapic.c:1645</a></div></div>
<div class="ttc" id="alapic_8h_html_a07d3e1e4090a62753325dfa11d232cea"><div class="ttname"><a href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a></div><div class="ttdeci">static int apic_x2apic_mode(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00221">lapic.h:221</a></div></div>
<div class="ttc" id="ax86_8h_html_adf8330176a8805826ed4711a51ce93cf"><div class="ttname"><a href="x86_8h.html#adf8330176a8805826ed4711a51ce93cf">kvm_check_has_quirk</a></div><div class="ttdeci">static bool kvm_check_has_quirk(struct kvm *kvm, u64 quirk)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8h_source.html#l00288">x86.h:288</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a18976a1e591c223c2aec9c52711c6da1_cgraph.png" border="0" usemap="#alapic_8c_a18976a1e591c223c2aec9c52711c6da1_cgraph" alt=""/></div>
<map name="alapic_8c_a18976a1e591c223c2aec9c52711c6da1_cgraph" id="alapic_8c_a18976a1e591c223c2aec9c52711c6da1_cgraph">
<area shape="rect" title=" " alt="" coords="5,456,136,483"/>
<area shape="rect" href="lapic_8c.html#a1a13521d44779dc719a0bd2cf54fe88d" title=" " alt="" coords="191,329,348,356"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="625,380,768,407"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="184,481,355,508"/>
<area shape="rect" href="x86_8h.html#adf8330176a8805826ed4711a51ce93cf" title=" " alt="" coords="186,532,353,559"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="193,380,346,407"/>
<area shape="rect" href="lapic_8c.html#a59900449cd556b732187d0a91d983b80" title=" " alt="" coords="233,583,306,609"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="430,199,529,225"/>
<area shape="rect" href="lapic_8c.html#a4b4d880305f2ddba0ac9fdb398a7611a" title=" " alt="" coords="403,314,556,355"/>
<area shape="rect" href="lapic_8c.html#a5bf640da1dfc1be09d89fb23c7f2e954" title=" " alt="" coords="852,224,973,251"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1041,212,1187,239"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="617,275,777,301"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="632,123,761,149"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="628,39,765,65"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1248,212,1407,239"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="841,123,984,149"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="841,57,984,98"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="1248,111,1407,137"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1042,161,1186,188"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1485,85,1634,112"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1248,161,1407,188"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="1036,60,1192,87"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="1267,60,1387,87"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="837,5,988,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#ad97ff6b975b461b815e6749d29c65446" title=" " alt="" coords="1059,5,1169,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a5d9eb0563cffb1e3ed1cccebabcf2df6" title=" " alt="" coords="1240,5,1415,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="1463,5,1656,32"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="604,325,789,352"/>
</map>
</div>

</div>
</div>
<a id="a58177b5add54a17bfa81e2a1049f324e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58177b5add54a17bfa81e2a1049f324e">&#9670;&nbsp;</a></span>apic_mmio_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int apic_mmio_write </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_io_device *&#160;</td>
          <td class="paramname"><em>this</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpa_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02406">2406</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;{</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="lapic_8c.html#a59900449cd556b732187d0a91d983b80">to_lapic</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> offset = address - apic-&gt;<a class="code" href="structkvm__lapic.html#a830e2e9bd5c55c17f48b72a0157a6fa2">base_address</a>;</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    u32 val;</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160; </div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8c.html#a1a13521d44779dc719a0bd2cf54fe88d">apic_mmio_in_range</a>(apic, address))</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;        <span class="keywordflow">return</span> -EOPNOTSUPP;</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160; </div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4">kvm_apic_hw_enabled</a>(apic) || <a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic)) {</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="x86_8h.html#adf8330176a8805826ed4711a51ce93cf">kvm_check_has_quirk</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm,</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                     KVM_X86_QUIRK_LAPIC_MMIO_HOLE))</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;            <span class="keywordflow">return</span> -EOPNOTSUPP;</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160; </div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    }</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160; </div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;<span class="comment">     * APIC register must be aligned on 128-bits boundary.</span></div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;<span class="comment">     * 32/64/128 bits registers must be accessed thru 32 bits.</span></div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;<span class="comment">     * Refer SDM 8.4.1</span></div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    <span class="keywordflow">if</span> (len != 4 || (offset &amp; 0xf))</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160; </div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    val = *(u32*)data;</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160; </div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;    <a class="code" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491">kvm_lapic_reg_write</a>(apic, offset &amp; 0xff0, val);</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160; </div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_acebc0ffd4530dfd1beb1254d1e4d9491"><div class="ttname"><a href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491">kvm_lapic_reg_write</a></div><div class="ttdeci">static int kvm_lapic_reg_write(struct kvm_lapic *apic, u32 reg, u32 val)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02255">lapic.c:2255</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a58177b5add54a17bfa81e2a1049f324e_cgraph.png" border="0" usemap="#alapic_8c_a58177b5add54a17bfa81e2a1049f324e_cgraph" alt=""/></div>
<map name="alapic_8c_a58177b5add54a17bfa81e2a1049f324e_cgraph" id="alapic_8c_a58177b5add54a17bfa81e2a1049f324e_cgraph">
<area shape="rect" title=" " alt="" coords="5,777,140,804"/>
<area shape="rect" href="lapic_8c.html#a1a13521d44779dc719a0bd2cf54fe88d" title=" " alt="" coords="193,5,350,32"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="939,1224,1081,1251"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1143,132,1313,159"/>
<area shape="rect" href="x86_8h.html#adf8330176a8805826ed4711a51ce93cf" title=" " alt="" coords="188,803,355,829"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="193,752,350,779"/>
<area shape="rect" href="lapic_8c.html#a59900449cd556b732187d0a91d983b80" title=" " alt="" coords="235,1629,308,1656"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="689,680,849,707"/>
<area shape="rect" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1" title=" " alt="" coords="403,347,613,373"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="457,499,559,525"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="453,752,563,779"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="697,883,841,909"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="457,651,559,677"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="443,600,573,627"/>
<area shape="rect" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2" title=" " alt="" coords="699,781,839,808"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="937,259,1083,285"/>
<area shape="rect" href="lapic_8c.html#aec07f4595f82e14e1075beb4730b6976" title=" " alt="" coords="453,955,563,981"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="435,1056,581,1083"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="925,980,1095,1007"/>
<area shape="rect" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4" title=" " alt="" coords="439,1005,577,1032"/>
<area shape="rect" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554" title=" " alt="" coords="440,803,576,829"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="421,904,595,931"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="415,1157,601,1184"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="408,1300,608,1327"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="439,1427,577,1453"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="437,245,579,272"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="444,296,572,323"/>
<area shape="rect" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3" title=" " alt="" coords="429,397,587,424"/>
<area shape="rect" href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4" title=" " alt="" coords="415,448,601,475"/>
<area shape="rect" href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c" title=" " alt="" coords="695,157,844,184"/>
<area shape="rect" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843" title=" " alt="" coords="714,579,825,605"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="931,553,1089,580"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="705,629,834,656"/>
<area shape="rect" href="hyperv_8h.html#a7ffceaf3950bd76a9a3a28ff1e836e58" title=" " alt="" coords="673,309,866,336"/>
<area shape="rect" href="hyperv_8c.html#a47f5a157cae898f7a7b370854c3748a4" title=" " alt="" coords="679,360,859,387"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="688,411,851,437"/>
<area shape="rect" href="xen_8h.html#ae436f94d060f3cb8029695c5a9fddc42" title=" " alt="" coords="672,832,867,859"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="931,883,1089,909"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="693,462,846,503"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="945,781,1075,808"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1149,259,1307,285"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="675,1005,864,1032"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="939,1031,1081,1057"/>
<area shape="rect" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39" title=" " alt="" coords="703,1325,835,1352"/>
<area shape="rect" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44" title=" " alt="" coords="692,1376,847,1403"/>
<area shape="rect" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d" title=" " alt="" coords="681,1158,858,1199"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="661,1224,877,1251"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="950,1275,1070,1301"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="667,1275,871,1301"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="694,1528,845,1555"/>
</map>
</div>

</div>
</div>
<a id="a734e8a2b56a9a0b0d9117f20f2bb0fc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a734e8a2b56a9a0b0d9117f20f2bb0fc1">&#9670;&nbsp;</a></span>apic_search_irr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int apic_search_irr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00701">701</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;{</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52">find_highest_vector</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_IRR);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a734e8a2b56a9a0b0d9117f20f2bb0fc1_cgraph.png" border="0" usemap="#alapic_8c_a734e8a2b56a9a0b0d9117f20f2bb0fc1_cgraph" alt=""/></div>
<map name="alapic_8c_a734e8a2b56a9a0b0d9117f20f2bb0fc1_cgraph" id="alapic_8c_a734e8a2b56a9a0b0d9117f20f2bb0fc1_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,125,32"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="173,5,323,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a734e8a2b56a9a0b0d9117f20f2bb0fc1_icgraph.png" border="0" usemap="#alapic_8c_a734e8a2b56a9a0b0d9117f20f2bb0fc1_icgraph" alt=""/></div>
<map name="alapic_8c_a734e8a2b56a9a0b0d9117f20f2bb0fc1_icgraph" id="alapic_8c_a734e8a2b56a9a0b0d9117f20f2bb0fc1_icgraph">
<area shape="rect" title=" " alt="" coords="1935,447,2055,473"/>
<area shape="rect" href="lapic_8c.html#ad2b5e2187414c65e1a5876e641fee3fc" title=" " alt="" coords="1534,384,1643,411"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="1731,472,1887,499"/>
<area shape="rect" href="lapic_8c.html#ad608730f208932f64d2c98c762fce85c" title=" " alt="" coords="1276,239,1421,265"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="1009,389,1185,416"/>
<area shape="rect" href="vmx_2nested_8c.html#add1e82c32385142c0fca04a1db8cbc3a" title=" " alt="" coords="1032,153,1163,180"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fecee9010894e3a1513a0924e24dd6" title=" " alt="" coords="535,73,672,100"/>
<area shape="rect" href="vmx_2nested_8c.html#a23e3de8c964e87404eea818be6f70154" title=" " alt="" coords="532,5,675,32"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="19,39,190,81"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="755,391,927,417"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="518,426,689,467"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="526,324,681,351"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="291,667,429,693"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="64,667,145,693"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="31,185,179,212"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="299,97,421,124"/>
<area shape="rect" href="vmx_2nested_8c.html#a4e307e2bcf664c83265b1442e3fc8da2" title=" " alt="" coords="272,317,448,358"/>
<area shape="rect" href="vmx_2nested_8c.html#ad3cab9cf8633364513bd6a24caecf41a" title=" " alt="" coords="252,382,468,423"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="5,389,204,416"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fcc88ceee4f57a3dbf23fedb46a5cb" title=" " alt="" coords="285,149,435,190"/>
<area shape="rect" href="vmx_2nested_8c.html#aedc5821e9af5c7bd4aac6c06f4ca046f" title=" " alt="" coords="270,448,450,475"/>
<area shape="rect" href="vmx_2hyperv_8c.html#a937e30dece4579b71b17efcd54c1d910" title=" " alt="" coords="268,499,452,541"/>
<area shape="rect" href="vmx_2nested_8c.html#a64e6550fab681b40c832fe4e2d5e3b95" title=" " alt="" coords="287,565,433,592"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="1517,435,1660,477"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1021,552,1173,579"/>
<area shape="rect" href="lapic_8c.html#a1e5b22760af617cabb18355a0a373156" title=" " alt="" coords="1251,497,1447,524"/>
<area shape="rect" href="lapic_8c.html#a332060485ef249fcfd9edbf9cf80dd2b" title=" " alt="" coords="1495,817,1683,844"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="1284,641,1413,668"/>
<area shape="rect" href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf" title=" " alt="" coords="1259,337,1438,364"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="1048,879,1147,905"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="1046,668,1149,695"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="1047,752,1148,779"/>
<area shape="rect" href="lapic_8c.html#a44fec9a6b84f831af88ffed6b2325545" title=" " alt="" coords="1015,613,1180,640"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1033,955,1162,981"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="765,879,918,905"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="765,929,918,956"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="754,661,929,702"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="763,727,920,753"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="521,661,685,702"/>
<area shape="rect" href="lapic_8c.html#aee34622e495b500817e0b0905bfd0d4c" title=" " alt="" coords="771,828,912,855"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="766,543,917,585"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="524,551,683,577"/>
<area shape="rect" href="vmx_8c.html#afb231b1a3b0ccf655edde89034273129" title=" " alt="" coords="739,609,944,636"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="777,980,906,1007"/>
<area shape="rect" href="irq_8c.html#a82ee83566d2724a298b67f23f481976b" title=" " alt="" coords="992,337,1203,364"/>
<area shape="rect" href="irq_8c.html#ae3151f072a1bb4a732ee3854ab6cf619" title=" " alt="" coords="516,375,691,401"/>
<area shape="rect" href="svm_8c.html#a5c26f1ceaa6cc778d986bd33629dc539" title=" " alt="" coords="791,289,892,316"/>
<area shape="rect" href="x86_8c.html#af2257f2e81aff845f58e2112c4f46ce7" title=" " alt="" coords="1018,497,1177,524"/>
<area shape="rect" href="vmx_8c.html#ac2197e1b1fbae590edacaecfd1d0974c" title=" " alt="" coords="1021,447,1174,473"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="760,441,923,468"/>
</map>
</div>

</div>
</div>
<a id="af5602fb092ac09abc6c2bf0ad789d726"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5602fb092ac09abc6c2bf0ad789d726">&#9670;&nbsp;</a></span>apic_set_eoi()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int apic_set_eoi </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01465">1465</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;{</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="keywordtype">int</span> vector = <a class="code" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0">apic_find_highest_isr</a>(apic);</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160; </div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    trace_kvm_eoi(apic, vector);</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160; </div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;<span class="comment">     * Not every write EOI will has corresponding ISR,</span></div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;<span class="comment">     * one example is when Kernel check timer on setup_IO_APIC</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="keywordflow">if</span> (vector == -1)</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        <span class="keywordflow">return</span> vector;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160; </div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    <a class="code" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843">apic_clear_isr</a>(vector, apic);</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <a class="code" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab">apic_update_ppr</a>(apic);</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160; </div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="hyperv_8h.html#a7ffceaf3950bd76a9a3a28ff1e836e58">kvm_hv_synic_has_vector</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, vector))</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        <a class="code" href="hyperv_8c.html#a47f5a157cae898f7a7b370854c3748a4">kvm_hv_synic_send_eoi</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, vector);</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160; </div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <a class="code" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4">kvm_ioapic_send_eoi</a>(apic, vector);</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    kvm_make_request(KVM_REQ_EVENT, apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="keywordflow">return</span> vector;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;}</div>
<div class="ttc" id="ahyperv_8c_html_a47f5a157cae898f7a7b370854c3748a4"><div class="ttname"><a href="hyperv_8c.html#a47f5a157cae898f7a7b370854c3748a4">kvm_hv_synic_send_eoi</a></div><div class="ttdeci">void kvm_hv_synic_send_eoi(struct kvm_vcpu *vcpu, int vector)</div><div class="ttdef"><b>Definition:</b> <a href="hyperv_8c_source.html#l00511">hyperv.c:511</a></div></div>
<div class="ttc" id="ahyperv_8h_html_a7ffceaf3950bd76a9a3a28ff1e836e58"><div class="ttname"><a href="hyperv_8h.html#a7ffceaf3950bd76a9a3a28ff1e836e58">kvm_hv_synic_has_vector</a></div><div class="ttdeci">static bool kvm_hv_synic_has_vector(struct kvm_vcpu *vcpu, int vector)</div><div class="ttdef"><b>Definition:</b> <a href="hyperv_8h_source.html#l00290">hyperv.h:290</a></div></div>
<div class="ttc" id="alapic_8c_html_a5001020f0ca8d6d692c54dd23b40ade4"><div class="ttname"><a href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4">kvm_ioapic_send_eoi</a></div><div class="ttdeci">static void kvm_ioapic_send_eoi(struct kvm_lapic *apic, int vector)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01442">lapic.c:1442</a></div></div>
<div class="ttc" id="alapic_8c_html_a76fc10b30ae9deff038c276c3f5a9843"><div class="ttname"><a href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843">apic_clear_isr</a></div><div class="ttdeci">static void apic_clear_isr(int vec, struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00787">lapic.c:787</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_af5602fb092ac09abc6c2bf0ad789d726_cgraph.png" border="0" usemap="#alapic_8c_af5602fb092ac09abc6c2bf0ad789d726_cgraph" alt=""/></div>
<map name="alapic_8c_af5602fb092ac09abc6c2bf0ad789d726_cgraph" id="alapic_8c_af5602fb092ac09abc6c2bf0ad789d726_cgraph">
<area shape="rect" title=" " alt="" coords="5,265,108,291"/>
<area shape="rect" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843" title=" " alt="" coords="197,71,308,98"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="643,87,801,114"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="188,239,317,266"/>
<area shape="rect" href="hyperv_8h.html#a7ffceaf3950bd76a9a3a28ff1e836e58" title=" " alt="" coords="156,366,349,393"/>
<area shape="rect" href="hyperv_8c.html#a47f5a157cae898f7a7b370854c3748a4" title=" " alt="" coords="163,551,343,578"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="171,315,334,342"/>
<area shape="rect" href="lapic_8c.html#a33d332d149d0b1dd33e02b2ab98009a9" title=" " alt="" coords="412,5,577,47"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1136,113,1285,139"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="423,239,566,266"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="423,173,566,215"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="2120,290,2265,317"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="650,189,794,215"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="2313,290,2472,317"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="876,189,1035,215"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="644,138,800,165"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="895,138,1015,165"/>
<area shape="rect" href="hyperv_8c.html#a7432d42dbbd06907d83cbe1cf9479295" title=" " alt="" coords="397,526,592,553"/>
<area shape="rect" href="hyperv_8c.html#af4c599ff6e5b1b327daf618845547c0d" title=" " alt="" coords="413,577,576,603"/>
<area shape="rect" href="hyperv_8c.html#a5ea15c685a7e3e1abca91772c3cc3a52" title=" " alt="" coords="433,627,556,654"/>
<area shape="rect" href="hyperv_8c.html#a88a2493dc6ffeea51c4325f080d797d4" title=" " alt="" coords="640,559,804,586"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="894,610,1017,637"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1107,610,1315,637"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1134,661,1287,687"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="430,341,559,367"/>
<area shape="rect" href="irq_8h.html#a68413268c1f1f354270e9a0de9c2fe44" title=" " alt="" coords="444,391,545,418"/>
<area shape="rect" href="lapic_8c.html#a900c0170b3a9f3c6869d072aa14055d1" title=" " alt="" coords="417,443,572,484"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="407,290,583,317"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="852,290,1059,317"/>
<area shape="rect" href="ioapic_8c.html#aa590f4d1416bf84560a4e9693c638f55" title=" " alt="" coords="677,475,767,502"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="1153,391,1268,418"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1363,493,1552,519"/>
<area shape="rect" href="lapic_8c.html#a47d52843df792ef8e7bffdfb66a3b40b" title=" " alt="" coords="1606,442,1787,469"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="1613,778,1781,805"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="1626,341,1767,367"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="1889,522,2025,549"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1612,610,1781,637"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="1619,544,1774,585"/>
<area shape="rect" href="lapic_8h.html#adfbea71ac96b210fb91bef47c77194f1" title=" " alt="" coords="1600,661,1793,687"/>
<area shape="rect" href="x86_8c.html#a47d88660a2a5f8ee22df1253604d1ed7" title=" " alt="" coords="1618,712,1775,753"/>
<area shape="rect" href="lapic_8c.html#ac9fecb7d9f4574931650af9abb4b9f4c" title=" " alt="" coords="1615,391,1778,418"/>
<area shape="rect" href="lapic_8c.html#a870119cb74033f360164df90029af75a" title=" " alt="" coords="1847,651,2066,678"/>
<area shape="rect" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6" title=" " alt="" coords="1841,803,2072,830"/>
<area shape="rect" href="lapic_8c.html#a8fb87d02d911e49b5793e391702afe7e" title=" " alt="" coords="1896,753,2017,779"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1871,391,2042,418"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1897,341,2016,367"/>
<area shape="rect" href="ioapic_8c.html#a1d24315dec2401b4c45b224469c7379d" title=" " alt="" coords="883,485,1028,527"/>
<area shape="rect" href="ioapic_8c.html#a6a7d0d8b3a3717172c57ed1916318952" title=" " alt="" coords="1129,544,1292,585"/>
<area shape="rect" href="ioapic_8c.html#aca4e6c938829fb401b5c01cba3bd19b2" title=" " alt="" coords="1375,544,1539,585"/>
<area shape="rect" href="ioapic_8c.html#a4d9be607caa84875994b688c86711dcc" title=" " alt="" coords="1382,609,1533,651"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_af5602fb092ac09abc6c2bf0ad789d726_icgraph.png" border="0" usemap="#alapic_8c_af5602fb092ac09abc6c2bf0ad789d726_icgraph" alt=""/></div>
<map name="alapic_8c_af5602fb092ac09abc6c2bf0ad789d726_icgraph" id="alapic_8c_af5602fb092ac09abc6c2bf0ad789d726_icgraph">
<area shape="rect" title=" " alt="" coords="1540,119,1643,145"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="1317,57,1492,98"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1326,148,1483,175"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="1090,15,1254,57"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="864,5,1001,32"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="671,5,752,32"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="392,5,579,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="189,5,313,32"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1105,97,1239,124"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1075,148,1269,175"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1091,224,1253,251"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1101,300,1243,327"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="857,57,1009,98"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="843,123,1022,149"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="863,173,1003,200"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="632,115,791,157"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="839,224,1027,251"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="399,275,572,301"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="645,224,778,251"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,224,584,251"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,249,339,276"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,199,101,225"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,249,115,276"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,300,116,327"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="857,325,1008,352"/>
</map>
</div>

</div>
</div>
<a id="acba5fed3ebeb7a85d9cb154d13b7f983"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acba5fed3ebeb7a85d9cb154d13b7f983">&#9670;&nbsp;</a></span>apic_set_isr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void apic_set_isr </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00744">744</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;{</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#a3fc79a6339260d167eb85050cc787149">__apic_test_and_set_vector</a>(vec, apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_ISR))</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160; </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">     * With APIC virtualization enabled, all caching is disabled</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">     * because the processor can modify ISR under the hood.  Instead</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">     * just set SVI.</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">if</span> (unlikely(apic-&gt;<a class="code" href="structkvm__lapic.html#a4642d7f446bbd9ede893aa1ebbcc9c1a">apicv_active</a>))</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        static_call_cond(kvm_x86_hwapic_isr_update)(vec);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        ++apic-&gt;<a class="code" href="structkvm__lapic.html#ad8506269387d80ddd1c6cc8a96c9398a">isr_count</a>;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        BUG_ON(apic-&gt;<a class="code" href="structkvm__lapic.html#ad8506269387d80ddd1c6cc8a96c9398a">isr_count</a> &gt; <a class="code" href="lapic_8c.html#a05cf2e217d081f8aab707b910c25de43">MAX_APIC_VECTOR</a>);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">         * ISR (in service register) bit is set when injecting an interrupt.</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">         * The highest vector is injected. Thus the latest bit set matches</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">         * the highest bit in ISR.</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#a4b58ed7ed33fe007d319d39271d8d1b9">highest_isr_cache</a> = vec;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    }</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a05cf2e217d081f8aab707b910c25de43"><div class="ttname"><a href="lapic_8c.html#a05cf2e217d081f8aab707b910c25de43">MAX_APIC_VECTOR</a></div><div class="ttdeci">#define MAX_APIC_VECTOR</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00059">lapic.c:59</a></div></div>
<div class="ttc" id="alapic_8c_html_a3fc79a6339260d167eb85050cc787149"><div class="ttname"><a href="lapic_8c.html#a3fc79a6339260d167eb85050cc787149">__apic_test_and_set_vector</a></div><div class="ttdeci">static int __apic_test_and_set_vector(int vec, void *bitmap)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00118">lapic.c:118</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_acba5fed3ebeb7a85d9cb154d13b7f983_cgraph.png" border="0" usemap="#alapic_8c_acba5fed3ebeb7a85d9cb154d13b7f983_cgraph" alt=""/></div>
<map name="alapic_8c_acba5fed3ebeb7a85d9cb154d13b7f983_cgraph" id="alapic_8c_acba5fed3ebeb7a85d9cb154d13b7f983_cgraph">
<area shape="rect" title=" " alt="" coords="5,13,104,39"/>
<area shape="rect" href="lapic_8c.html#a3fc79a6339260d167eb85050cc787149" title=" " alt="" coords="152,5,305,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_acba5fed3ebeb7a85d9cb154d13b7f983_icgraph.png" border="0" usemap="#alapic_8c_acba5fed3ebeb7a85d9cb154d13b7f983_icgraph" alt=""/></div>
<map name="alapic_8c_acba5fed3ebeb7a85d9cb154d13b7f983_icgraph" id="alapic_8c_acba5fed3ebeb7a85d9cb154d13b7f983_icgraph">
<area shape="rect" title=" " alt="" coords="1585,236,1684,263"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="1361,236,1537,263"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="1141,236,1313,263"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="923,99,1093,141"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="931,265,1085,292"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="698,5,835,32"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="471,5,552,32"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="437,83,585,109"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="705,173,828,200"/>
<area shape="rect" href="vmx_2nested_8c.html#a4e307e2bcf664c83265b1442e3fc8da2" title=" " alt="" coords="679,225,855,266"/>
<area shape="rect" href="vmx_2nested_8c.html#ad3cab9cf8633364513bd6a24caecf41a" title=" " alt="" coords="659,290,875,331"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="412,327,611,353"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fcc88ceee4f57a3dbf23fedb46a5cb" title=" " alt="" coords="691,107,842,149"/>
<area shape="rect" href="vmx_2nested_8c.html#aedc5821e9af5c7bd4aac6c06f4ca046f" title=" " alt="" coords="677,407,857,433"/>
<area shape="rect" href="vmx_2hyperv_8c.html#a937e30dece4579b71b17efcd54c1d910" title=" " alt="" coords="675,458,859,499"/>
<area shape="rect" href="vmx_2nested_8c.html#a64e6550fab681b40c832fe4e2d5e3b95" title=" " alt="" coords="694,524,839,551"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="203,83,338,109"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="426,163,597,205"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="207,171,334,197"/>
<area shape="rect" href="vmx_2nested_8c.html#a6a1c45a52fde9844f4431a9db00dbf9f" title=" " alt="" coords="430,229,593,270"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="205,236,336,263"/>
<area shape="rect" href="vmx_2nested_8c.html#a2c53f6d5cd8133df2c8e67ab90b9aa5f" title=" " alt="" coords="425,473,598,500"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="456,524,567,551"/>
<area shape="rect" href="vmx_2nested_8c.html#acee8cb651216e97a9c12b807243ae59a" title=" " alt="" coords="427,575,596,601"/>
<area shape="rect" href="vmx_8c.html#ac1cd58b9f223df9d6b5fe9695c0cbe2b" title=" " alt="" coords="209,473,332,500"/>
</map>
</div>

</div>
</div>
<a id="aeb32a868e76d57da9fab57fce43efdbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb32a868e76d57da9fab57fce43efdbe">&#9670;&nbsp;</a></span>apic_set_spiv()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void apic_set_spiv </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00486">486</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;{</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordtype">bool</span> enabled = val &amp; APIC_SPIV_APIC_ENABLED;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160; </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_SPIV, val);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">if</span> (enabled != apic-&gt;<a class="code" href="structkvm__lapic.html#afc6c88da7e5d98be1e6e833ca181dab2">sw_enabled</a>) {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#afc6c88da7e5d98be1e6e833ca181dab2">sw_enabled</a> = enabled;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">if</span> (enabled)</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            static_branch_slow_dec_deferred(&amp;<a class="code" href="lapic_8h.html#a3c2a1bc1bb244452f5338719ef4e73c8">apic_sw_disabled</a>);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            static_branch_inc(&amp;<a class="code" href="lapic_8h.html#a3c2a1bc1bb244452f5338719ef4e73c8">apic_sw_disabled</a>.key);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        atomic_set_release(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm-&gt;arch.apic_map_dirty, <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a6a4e132eb192a22c351397837d4c082c">DIRTY</a>);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">/* Check if there are APF page ready requests pending */</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">if</span> (enabled) {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        kvm_make_request(KVM_REQ_APF_READY, apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <a class="code" href="xen_8h.html#ae436f94d060f3cb8029695c5a9fddc42">kvm_xen_sw_enable_lapic</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;}</div>
<div class="ttc" id="alapic_8h_html_a3c2a1bc1bb244452f5338719ef4e73c8"><div class="ttname"><a href="lapic_8h.html#a3c2a1bc1bb244452f5338719ef4e73c8">apic_sw_disabled</a></div><div class="ttdeci">struct static_key_false_deferred apic_sw_disabled</div></div>
<div class="ttc" id="astructkvm__lapic_html_afc6c88da7e5d98be1e6e833ca181dab2"><div class="ttname"><a href="structkvm__lapic.html#afc6c88da7e5d98be1e6e833ca181dab2">kvm_lapic::sw_enabled</a></div><div class="ttdeci">bool sw_enabled</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00066">lapic.h:66</a></div></div>
<div class="ttc" id="axen_8h_html_ae436f94d060f3cb8029695c5a9fddc42"><div class="ttname"><a href="xen_8h.html#ae436f94d060f3cb8029695c5a9fddc42">kvm_xen_sw_enable_lapic</a></div><div class="ttdeci">static void kvm_xen_sw_enable_lapic(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="xen_8h_source.html#l00118">xen.h:118</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aeb32a868e76d57da9fab57fce43efdbe_cgraph.png" border="0" usemap="#alapic_8c_aeb32a868e76d57da9fab57fce43efdbe_cgraph" alt=""/></div>
<map name="alapic_8c_aeb32a868e76d57da9fab57fce43efdbe_cgraph" id="alapic_8c_aeb32a868e76d57da9fab57fce43efdbe_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,116,57"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="189,5,333,32"/>
<area shape="rect" href="xen_8h.html#ae436f94d060f3cb8029695c5a9fddc42" title=" " alt="" coords="164,56,359,83"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="407,5,565,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aeb32a868e76d57da9fab57fce43efdbe_icgraph.png" border="0" usemap="#alapic_8c_aeb32a868e76d57da9fab57fce43efdbe_icgraph" alt=""/></div>
<map name="alapic_8c_aeb32a868e76d57da9fab57fce43efdbe_icgraph" id="alapic_8c_aeb32a868e76d57da9fab57fce43efdbe_icgraph">
<area shape="rect" title=" " alt="" coords="1589,401,1700,428"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1387,456,1539,483"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1384,221,1541,248"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1398,401,1527,428"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1163,474,1314,515"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="431,496,590,523"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,405,129,432"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1171,272,1306,299"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1141,221,1336,248"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1158,81,1319,108"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1167,157,1310,184"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="923,285,1075,326"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="910,183,1089,209"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="929,233,1069,260"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="678,175,837,217"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="905,31,1093,57"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="424,81,597,108"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="691,31,824,57"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="412,31,609,57"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="183,56,358,83"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="27,56,108,83"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="13,107,122,133"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="12,5,123,32"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="924,132,1075,159"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1174,401,1303,428"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="906,351,1093,377"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="913,452,1085,479"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="914,401,1085,428"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,398,350,439"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,347,364,373"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="710,249,805,276"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="689,300,826,327"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="470,300,551,327"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="657,452,857,479"/>
</map>
</div>

</div>
</div>
<a id="a02bd03bf711be3200ea2316ced434ff1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02bd03bf711be3200ea2316ced434ff1">&#9670;&nbsp;</a></span>apic_set_tpr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void apic_set_tpr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>tpr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00981">981</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;{</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_TASKPRI, tpr);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <a class="code" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab">apic_update_ppr</a>(apic);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a02bd03bf711be3200ea2316ced434ff1_cgraph.png" border="0" usemap="#alapic_8c_a02bd03bf711be3200ea2316ced434ff1_cgraph" alt=""/></div>
<map name="alapic_8c_a02bd03bf711be3200ea2316ced434ff1_cgraph" id="alapic_8c_a02bd03bf711be3200ea2316ced434ff1_cgraph">
<area shape="rect" title=" " alt="" coords="5,132,107,159"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="155,107,284,133"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="529,157,673,184"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="332,107,475,133"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="332,19,475,61"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="727,107,885,133"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="528,56,673,83"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="933,56,1083,83"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="727,56,885,83"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="727,157,885,184"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="523,5,679,32"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="746,5,866,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a02bd03bf711be3200ea2316ced434ff1_icgraph.png" border="0" usemap="#alapic_8c_a02bd03bf711be3200ea2316ced434ff1_icgraph" alt=""/></div>
<map name="alapic_8c_a02bd03bf711be3200ea2316ced434ff1_icgraph" id="alapic_8c_a02bd03bf711be3200ea2316ced434ff1_icgraph">
<area shape="rect" title=" " alt="" coords="1563,527,1664,553"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1354,195,1511,221"/>
<area shape="rect" href="lapic_8c.html#aee34622e495b500817e0b0905bfd0d4c" title=" " alt="" coords="1362,527,1503,553"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="1351,626,1515,667"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1138,195,1273,221"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1108,248,1303,275"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1125,81,1286,108"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1134,136,1277,163"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="890,183,1042,225"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="877,249,1055,276"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="896,300,1036,327"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="661,242,820,283"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="872,31,1060,57"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="424,81,597,108"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="674,31,807,57"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="412,31,609,57"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="183,56,358,83"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="27,56,108,83"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="13,107,122,133"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="12,5,123,32"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="891,132,1041,159"/>
<area shape="rect" href="x86_8c.html#a120377d5a571d3fb86660cd5f6cd982d" title=" " alt="" coords="1153,527,1258,553"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="885,401,1047,428"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,657,364,684"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="907,351,1025,377"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="933,452,999,479"/>
<area shape="rect" href="x86_8c.html#a86812e4228865668099921709e1c2f26" title=" " alt="" coords="903,503,1029,529"/>
<area shape="rect" href="vmx_8c.html#aa55ace9429e6e94042e6602716222805" title=" " alt="" coords="923,553,1009,580"/>
<area shape="rect" href="svm_8c.html#a640846de1c48f3e408644fcb85a6004b" title=" " alt="" coords="897,604,1035,631"/>
<area shape="rect" href="vmx_8c.html#a8d0fa5e317cbd0eb67ebdc9fa5ec70ce" title=" " alt="" coords="901,655,1031,681"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="691,547,790,573"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="687,424,794,451"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,539,350,581"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="467,601,554,628"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,547,129,573"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="191,483,350,509"/>
<area shape="rect" href="svm_8c.html#af2ee2a03530f5b7a02a127d8b779d2ae" title=" " alt="" coords="657,351,824,377"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="683,604,799,631"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="1137,731,1274,757"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="470,756,551,783"/>
</map>
</div>

</div>
</div>
<a id="a651f3e8a2def4f70e3750464ea4904a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a651f3e8a2def4f70e3750464ea4904a9">&#9670;&nbsp;</a></span>apic_sync_pv_eoi_from_guest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void apic_sync_pv_eoi_from_guest </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03049">3049</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;{</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;    <span class="keywordtype">int</span> vector;</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;<span class="comment">     * PV EOI state is derived from KVM_APIC_PV_EOI_PENDING in host</span></div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;<span class="comment">     * and KVM_PV_EOI_ENABLED in guest memory as follows:</span></div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;<span class="comment">     * KVM_APIC_PV_EOI_PENDING is unset:</span></div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;<span class="comment">     *  -&gt; host disabled PV EOI.</span></div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;<span class="comment">     * KVM_APIC_PV_EOI_PENDING is set, KVM_PV_EOI_ENABLED is set:</span></div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;<span class="comment">     *  -&gt; host enabled PV EOI, guest did not execute EOI yet.</span></div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;<span class="comment">     * KVM_APIC_PV_EOI_PENDING is set, KVM_PV_EOI_ENABLED is unset:</span></div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;<span class="comment">     *  -&gt; host enabled PV EOI, guest executed EOI.</span></div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;    BUG_ON(!<a class="code" href="lapic_8c.html#a9f87e777fe7602fff9557bbfbd630791">pv_eoi_enabled</a>(vcpu));</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160; </div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#aa9449652b89a95fb90ca1b00dffac32d">pv_eoi_test_and_clr_pending</a>(vcpu))</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;    vector = <a class="code" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726">apic_set_eoi</a>(apic);</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;    trace_kvm_pv_eoi(apic, vector);</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a9f87e777fe7602fff9557bbfbd630791"><div class="ttname"><a href="lapic_8c.html#a9f87e777fe7602fff9557bbfbd630791">pv_eoi_enabled</a></div><div class="ttdeci">static bool pv_eoi_enabled(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00897">lapic.c:897</a></div></div>
<div class="ttc" id="alapic_8c_html_aa9449652b89a95fb90ca1b00dffac32d"><div class="ttname"><a href="lapic_8c.html#aa9449652b89a95fb90ca1b00dffac32d">pv_eoi_test_and_clr_pending</a></div><div class="ttdeci">static bool pv_eoi_test_and_clr_pending(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00910">lapic.c:910</a></div></div>
<div class="ttc" id="alapic_8c_html_af5602fb092ac09abc6c2bf0ad789d726"><div class="ttname"><a href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726">apic_set_eoi</a></div><div class="ttdeci">static int apic_set_eoi(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01465">lapic.c:1465</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a651f3e8a2def4f70e3750464ea4904a9_cgraph.png" border="0" usemap="#alapic_8c_a651f3e8a2def4f70e3750464ea4904a9_cgraph" alt=""/></div>
<map name="alapic_8c_a651f3e8a2def4f70e3750464ea4904a9_cgraph" id="alapic_8c_a651f3e8a2def4f70e3750464ea4904a9_cgraph">
<area shape="rect" title=" " alt="" coords="5,498,180,539"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="252,312,355,339"/>
<area shape="rect" href="lapic_8c.html#a9f87e777fe7602fff9557bbfbd630791" title=" " alt="" coords="241,505,365,532"/>
<area shape="rect" href="lapic_8c.html#aa9449652b89a95fb90ca1b00dffac32d" title=" " alt="" coords="228,662,379,703"/>
<area shape="rect" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843" title=" " alt="" coords="468,312,579,339"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="935,337,1093,364"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="459,224,588,251"/>
<area shape="rect" href="hyperv_8h.html#a7ffceaf3950bd76a9a3a28ff1e836e58" title=" " alt="" coords="427,56,620,83"/>
<area shape="rect" href="hyperv_8c.html#a47f5a157cae898f7a7b370854c3748a4" title=" " alt="" coords="433,107,613,133"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="442,493,605,520"/>
<area shape="rect" href="lapic_8c.html#a33d332d149d0b1dd33e02b2ab98009a9" title=" " alt="" coords="683,275,848,317"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1460,245,1609,272"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="694,224,837,251"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="694,158,837,199"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1201,392,1347,419"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="942,224,1086,251"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1455,392,1614,419"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1195,224,1353,251"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="936,169,1092,196"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="1214,171,1334,197"/>
<area shape="rect" href="hyperv_8c.html#a7432d42dbbd06907d83cbe1cf9479295" title=" " alt="" coords="668,107,863,133"/>
<area shape="rect" href="hyperv_8c.html#af4c599ff6e5b1b327daf618845547c0d" title=" " alt="" coords="684,5,847,32"/>
<area shape="rect" href="hyperv_8c.html#a5ea15c685a7e3e1abca91772c3cc3a52" title=" " alt="" coords="704,56,827,83"/>
<area shape="rect" href="hyperv_8c.html#a88a2493dc6ffeea51c4325f080d797d4" title=" " alt="" coords="932,107,1096,133"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1213,107,1335,133"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1431,132,1639,159"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1458,81,1611,108"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="701,443,830,469"/>
<area shape="rect" href="irq_8h.html#a68413268c1f1f354270e9a0de9c2fe44" title=" " alt="" coords="715,493,816,520"/>
<area shape="rect" href="lapic_8c.html#a900c0170b3a9f3c6869d072aa14055d1" title=" " alt="" coords="688,545,843,586"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="677,611,853,637"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="911,476,1117,503"/>
<area shape="rect" href="ioapic_8c.html#aa590f4d1416bf84560a4e9693c638f55" title=" " alt="" coords="969,605,1059,632"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="1217,476,1331,503"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1440,476,1629,503"/>
<area shape="rect" href="ioapic_8c.html#a1d24315dec2401b4c45b224469c7379d" title=" " alt="" coords="1201,594,1347,635"/>
<area shape="rect" href="ioapic_8c.html#a6a7d0d8b3a3717172c57ed1916318952" title=" " alt="" coords="1453,594,1616,635"/>
<area shape="rect" href="lapic_8c.html#a664d20f44962ff67555d95cdf987eb9b" title=" " alt="" coords="459,669,587,696"/>
<area shape="rect" href="lapic_8c.html#a46a725e66a6b75af27a208acd463153a" title=" " alt="" coords="459,733,587,760"/>
<area shape="rect" href="kvm__main_8c.html#aa1c62238734b7293ce70a2710a8f2b05" title=" " alt="" coords="674,669,857,696"/>
<area shape="rect" href="kvm__main_8c.html#ae902cad56e0551f3e6bf26df088f1b84" title=" " alt="" coords="927,662,1101,703"/>
<area shape="rect" href="kvm__main_8c.html#afb33e9a5cfe88ab45367ba7f6043666d" title=" " alt="" coords="1165,711,1383,737"/>
<area shape="rect" href="kvm__main_8c.html#a3cc887a9ecfdd6e9f5ab90dc2ce8de4a" title=" " alt="" coords="1209,660,1339,687"/>
<area shape="rect" href="kvm__main_8c.html#ae374ebe48072080788db56075dd9a762" title=" " alt="" coords="1465,761,1604,788"/>
<area shape="rect" href="kvm__main_8c.html#a2a95905782c4136bdf6d9861f937b0ef" title=" " alt="" coords="1450,660,1619,687"/>
<area shape="rect" href="kvm__main_8c.html#a03aae88de564edba8a3a2d10bc5e7b20" title=" " alt="" coords="1477,711,1592,737"/>
<area shape="rect" href="kvm__main_8c.html#abc966ec55b5101c293dabe1eb29e2b82" title=" " alt="" coords="672,740,859,767"/>
<area shape="rect" href="kvm__main_8c.html#ace1d8e8c746cb64f9ce515fe8807db98" title=" " alt="" coords="925,737,1103,778"/>
<area shape="rect" href="kvm__main_8c.html#a1cf9d9c864cd7f9b5b32fc880c0872ab" title=" " alt="" coords="1207,761,1341,788"/>
<area shape="rect" href="kvm__main_8c.html#ae4806d9a69b751639c175cb98e468f15" title=" " alt="" coords="1183,812,1365,839"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a651f3e8a2def4f70e3750464ea4904a9_icgraph.png" border="0" usemap="#alapic_8c_a651f3e8a2def4f70e3750464ea4904a9_icgraph" alt=""/></div>
<map name="alapic_8c_a651f3e8a2def4f70e3750464ea4904a9_icgraph" id="alapic_8c_a651f3e8a2def4f70e3750464ea4904a9_icgraph">
<area shape="rect" title=" " alt="" coords="939,5,1113,47"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="727,5,891,47"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="541,13,679,39"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,13,493,39"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,13,364,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="ac56f15a70a1339e966c89b349b3f7850"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac56f15a70a1339e966c89b349b3f7850">&#9670;&nbsp;</a></span>apic_sync_pv_eoi_to_guest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void apic_sync_pv_eoi_to_guest </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03095">3095</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;{</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8c.html#a9f87e777fe7602fff9557bbfbd630791">pv_eoi_enabled</a>(vcpu) ||</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;        <span class="comment">/* IRR set or many bits in ISR: could be nested. */</span></div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#ada91b44df57789499ad32ad287c21217">irr_pending</a> ||</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;        <span class="comment">/* Cache not set: could be safe but we don&#39;t bother. */</span></div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#a4b58ed7ed33fe007d319d39271d8d1b9">highest_isr_cache</a> == -1 ||</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;        <span class="comment">/* Need EOI to update ioapic. */</span></div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;        <a class="code" href="lapic_8c.html#a900c0170b3a9f3c6869d072aa14055d1">kvm_ioapic_handles_vector</a>(apic, apic-&gt;<a class="code" href="structkvm__lapic.html#a4b58ed7ed33fe007d319d39271d8d1b9">highest_isr_cache</a>)) {</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;<span class="comment">         * PV EOI was disabled by apic_sync_pv_eoi_from_guest</span></div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;<span class="comment">         * so we need not do anything here.</span></div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;    }</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160; </div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    <a class="code" href="lapic_8c.html#a1ea4e066578d706e217136c8baf247b3">pv_eoi_set_pending</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a1ea4e066578d706e217136c8baf247b3"><div class="ttname"><a href="lapic_8c.html#a1ea4e066578d706e217136c8baf247b3">pv_eoi_set_pending</a></div><div class="ttdeci">static void pv_eoi_set_pending(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00902">lapic.c:902</a></div></div>
<div class="ttc" id="alapic_8c_html_a900c0170b3a9f3c6869d072aa14055d1"><div class="ttname"><a href="lapic_8c.html#a900c0170b3a9f3c6869d072aa14055d1">kvm_ioapic_handles_vector</a></div><div class="ttdeci">static bool kvm_ioapic_handles_vector(struct kvm_lapic *apic, int vector)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01437">lapic.c:1437</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ac56f15a70a1339e966c89b349b3f7850_cgraph.png" border="0" usemap="#alapic_8c_ac56f15a70a1339e966c89b349b3f7850_cgraph" alt=""/></div>
<map name="alapic_8c_ac56f15a70a1339e966c89b349b3f7850_cgraph" id="alapic_8c_ac56f15a70a1339e966c89b349b3f7850_cgraph">
<area shape="rect" title=" " alt="" coords="5,64,161,105"/>
<area shape="rect" href="lapic_8c.html#a900c0170b3a9f3c6869d072aa14055d1" title=" " alt="" coords="209,5,364,47"/>
<area shape="rect" href="lapic_8c.html#a9f87e777fe7602fff9557bbfbd630791" title=" " alt="" coords="225,71,349,98"/>
<area shape="rect" href="lapic_8c.html#a1ea4e066578d706e217136c8baf247b3" title=" " alt="" coords="211,122,362,149"/>
<area shape="rect" href="lapic_8c.html#a46a725e66a6b75af27a208acd463153a" title=" " alt="" coords="412,122,540,149"/>
<area shape="rect" href="kvm__main_8c.html#abc966ec55b5101c293dabe1eb29e2b82" title=" " alt="" coords="588,122,775,149"/>
<area shape="rect" href="kvm__main_8c.html#ace1d8e8c746cb64f9ce515fe8807db98" title=" " alt="" coords="823,115,1001,156"/>
<area shape="rect" href="kvm__main_8c.html#afb33e9a5cfe88ab45367ba7f6043666d" title=" " alt="" coords="1049,46,1267,73"/>
<area shape="rect" href="kvm__main_8c.html#a1cf9d9c864cd7f9b5b32fc880c0872ab" title=" " alt="" coords="1091,122,1225,149"/>
<area shape="rect" href="kvm__main_8c.html#ae4806d9a69b751639c175cb98e468f15" title=" " alt="" coords="1771,175,1953,202"/>
<area shape="rect" href="kvm__main_8c.html#ae374ebe48072080788db56075dd9a762" title=" " alt="" coords="2019,41,2157,67"/>
<area shape="rect" href="kvm__main_8c.html#ab58025ccc253a102c64561fa61c2a514" title=" " alt="" coords="2243,41,2395,67"/>
<area shape="rect" href="kvm__main_8c.html#a77ec4b9140d69a05f3b4e7836cc03a96" title=" " alt="" coords="2463,41,2625,67"/>
<area shape="rect" href="kvm__main_8c.html#a49ed988e062d259a8706411f619bf1f7" title=" " alt="" coords="1315,83,1488,110"/>
<area shape="rect" href="kvm__main_8c.html#a03aae88de564edba8a3a2d10bc5e7b20" title=" " alt="" coords="1344,134,1459,161"/>
<area shape="rect" href="kvm__main_8c.html#a7079b0256c7572c701a6e1526f58fdac" title=" " alt="" coords="1536,83,1723,110"/>
<area shape="rect" href="kvm__main_8c.html#a7c20e0f654f0b4472c3833f0a563e11e" title=" " alt="" coords="1565,134,1693,161"/>
<area shape="rect" href="kvm__main_8c.html#a04c9651c5f9a0485fd1e7152bdb01353" title=" " alt="" coords="1783,83,1941,110"/>
<area shape="rect" href="dirty__ring_8c.html#ac1878b63f1f337e93cf186ebd4fffcc4" title=" " alt="" coords="2002,109,2174,151"/>
<area shape="rect" href="dirty__ring_8c.html#a81ebbf462440ed5392d6d3412a859ae7" title=" " alt="" coords="2009,175,2167,202"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="2001,226,2175,253"/>
<area shape="rect" href="dirty__ring_8c.html#ad6e626257c739b2ac3d397119a7cf798" title=" " alt="" coords="2223,125,2415,151"/>
<area shape="rect" href="dirty__ring_8c.html#a6fe5cd75b9bac6497e1ae7340f2a5f7b" title=" " alt="" coords="2245,175,2393,202"/>
<area shape="rect" href="dirty__ring_8c.html#a22c9a239acf3463a8599a21c0a756538" title=" " alt="" coords="2229,226,2408,253"/>
<area shape="rect" href="dirty__ring_8c.html#acd0a1e586324b4c49b429c7a392db73f" title=" " alt="" coords="2465,201,2623,227"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ac56f15a70a1339e966c89b349b3f7850_icgraph.png" border="0" usemap="#alapic_8c_ac56f15a70a1339e966c89b349b3f7850_icgraph" alt=""/></div>
<map name="alapic_8c_ac56f15a70a1339e966c89b349b3f7850_icgraph" id="alapic_8c_ac56f15a70a1339e966c89b349b3f7850_icgraph">
<area shape="rect" title=" " alt="" coords="963,5,1119,47"/>
<area shape="rect" href="lapic_8c.html#a332060485ef249fcfd9edbf9cf80dd2b" title=" " alt="" coords="727,13,915,39"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="541,13,679,39"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,13,493,39"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,13,364,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="ad063ed2f42a913efa82bad52d1b58aa8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad063ed2f42a913efa82bad52d1b58aa8">&#9670;&nbsp;</a></span>apic_test_vector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int apic_test_vector </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>bitmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00105">105</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;{</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">return</span> test_bit(<a class="code" href="lapic_8h.html#a9c7a9b90f9a68f13aa4b9395a275ca96">VEC_POS</a>(vec), (bitmap) + <a class="code" href="lapic_8h.html#aba88c7489787a27e53b077679ce7b534">REG_POS</a>(vec));</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ad063ed2f42a913efa82bad52d1b58aa8_icgraph.png" border="0" usemap="#alapic_8c_ad063ed2f42a913efa82bad52d1b58aa8_icgraph" alt=""/></div>
<map name="alapic_8c_ad063ed2f42a913efa82bad52d1b58aa8_icgraph" id="alapic_8c_ad063ed2f42a913efa82bad52d1b58aa8_icgraph">
<area shape="rect" title=" " alt="" coords="1637,829,1767,856"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1431,404,1569,431"/>
<area shape="rect" href="lapic_8c.html#a637f6f499709ab30e61db1b69177ea00" title=" " alt="" coords="1166,712,1337,739"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="1419,976,1581,1003"/>
<area shape="rect" href="lapic_8c.html#a4d28368a44947389f8a7afec1c3288d3" title=" " alt="" coords="1411,1056,1589,1083"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="1164,144,1339,171"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="1183,404,1319,431"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="899,49,1086,90"/>
<area shape="rect" href="pmu_8c.html#a03a16f548326b68245a4bf0555bea777" title=" " alt="" coords="659,173,830,200"/>
<area shape="rect" href="x86_8c.html#a130b6ed14cf18384646cb31251dd104e" title=" " alt="" coords="900,116,1085,143"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="671,5,818,32"/>
<area shape="rect" href="irq_8h.html#ac79f0e40ed0e1cde83a09aef506fb373" title=" " alt="" coords="644,56,845,83"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="440,501,577,528"/>
<area shape="rect" href="x86_8c.html#a2de10bf19fee1e2a9cb47b6f491a18b4" title=" " alt="" coords="667,107,822,149"/>
<area shape="rect" href="lapic_8c.html#a33f4e295e9710d133e3e38e0aed35edb" title=" " alt="" coords="936,557,1049,584"/>
<area shape="rect" href="x86_8c.html#a62f68db08e13f0a4f3d158afda4631b1" title=" " alt="" coords="907,435,1078,477"/>
<area shape="rect" href="hyperv_8c.html#a31df0137f9f8af335cbac3d4179b12a2" title=" " alt="" coords="893,224,1092,251"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="650,275,839,301"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="915,358,1070,399"/>
<area shape="rect" href="hyperv_8c.html#abc5b43adce506bcd416c9e84aa6cf54b" title=" " alt="" coords="917,503,1069,529"/>
<area shape="rect" href="lapic_8c.html#a7195db5c58bcea2e080ee79cdaeae617" title=" " alt="" coords="677,611,812,637"/>
<area shape="rect" href="async__pf_8c.html#ad9b3dc2e31779a009859785fae9a8ec5" title=" " alt="" coords="675,443,814,469"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="664,494,825,535"/>
<area shape="rect" href="hyperv_8c.html#a4ca4f7e6e021870753e15fa1072e828d" title=" " alt="" coords="677,224,812,251"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="451,381,566,408"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="435,444,582,471"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="428,224,589,251"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="454,275,563,301"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="455,325,562,352"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="239,712,351,739"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="5,800,168,827"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="216,800,373,827"/>
<area shape="rect" href="irq__comm_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="644,325,845,352"/>
<area shape="rect" href="xen_8c.html#a7ba53f4f869b74569192380f1adfd40c" title=" " alt="" coords="663,377,826,418"/>
<area shape="rect" href="hyperv_8c.html#acbc8238b9eb8f24485d6bc9eefc06474" title=" " alt="" coords="676,560,813,587"/>
<area shape="rect" href="ioapic_8c.html#aca4e6c938829fb401b5c01cba3bd19b2" title=" " alt="" coords="911,793,1075,834"/>
<area shape="rect" href="ioapic_8c.html#a3ec3324d9c7d9168d100c79fc7c19b33" title=" " alt="" coords="421,712,596,739"/>
<area shape="rect" href="ioapic_8c.html#acaaa84ad163291aa716c59fa3bec3715" title=" " alt="" coords="905,611,1080,637"/>
<area shape="rect" href="ioapic_8h.html#a049de3e03383dab21c2cb6c3033e66ae" title=" " alt="" coords="901,661,1084,688"/>
<area shape="rect" href="ioapic_8c.html#a6a7d0d8b3a3717172c57ed1916318952" title=" " alt="" coords="663,881,826,922"/>
<area shape="rect" href="ioapic_8c.html#a6c0258d75d3c40d5674a574997bdd453" title=" " alt="" coords="663,763,826,805"/>
<area shape="rect" href="ioapic_8c.html#a1d24315dec2401b4c45b224469c7379d" title=" " alt="" coords="436,822,581,863"/>
<area shape="rect" href="x86_8c.html#a8aac590d2b896fcad86c5a2971164c1c" title=" " alt="" coords="677,661,813,688"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="1200,976,1303,1003"/>
<area shape="rect" href="lapic_8c.html#a501cf23b440691f979fad04c87067f93" title=" " alt="" coords="1140,1031,1363,1057"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="905,998,1080,1039"/>
<area shape="rect" href="vmx_8c.html#aa6d0d83d48d1737ca7aa8b2b5a6f066a" title=" " alt="" coords="900,1064,1085,1091"/>
<area shape="rect" href="lapic_8c.html#a94273a31a16c3d074d5722f22474bcbb" title=" " alt="" coords="1165,1115,1337,1141"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="935,1115,1051,1141"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="934,1165,1051,1192"/>
</map>
</div>

</div>
</div>
<a id="adc5f49f6a4cafac330b1fc370038f837"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc5f49f6a4cafac330b1fc370038f837">&#9670;&nbsp;</a></span>apic_timer_expired()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void apic_timer_expired </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>from_timer_fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01892">1892</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;{</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu = apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>;</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__timer.html">kvm_timer</a> *ktimer = &amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160; </div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <span class="keywordflow">if</span> (atomic_read(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a581e6b6fe55055ed8a81d5a1aa258ff7">pending</a>))</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160; </div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0">apic_lvtt_tscdeadline</a>(apic) || ktimer-&gt;<a class="code" href="structkvm__timer.html#a033831ad90c69d7ea4e9af3fd0a6727e">hv_timer_in_use</a>)</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;        ktimer-&gt;<a class="code" href="structkvm__timer.html#a23c6ec12b6c61cf7b3c02ff13099dbcf">expired_tscdeadline</a> = ktimer-&gt;<a class="code" href="structkvm__timer.html#acb4ad6bfe6c14982d0a87f4678e92d09">tscdeadline</a>;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160; </div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    <span class="keywordflow">if</span> (!from_timer_fn &amp;&amp; apic-&gt;<a class="code" href="structkvm__lapic.html#a4642d7f446bbd9ede893aa1ebbcc9c1a">apicv_active</a>) {</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        WARN_ON(<a class="code" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3">kvm_get_running_vcpu</a>() != vcpu);</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;        <a class="code" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17">kvm_apic_inject_pending_timer_irqs</a>(apic);</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    }</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160; </div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679">kvm_use_posted_timer_interrupt</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>)) {</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;<span class="comment">         * Ensure the guest&#39;s timer has truly expired before posting an</span></div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;<span class="comment">         * interrupt.  Open code the relevant checks to avoid querying</span></div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;<span class="comment">         * lapic_timer_int_injected(), which will be false since the</span></div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;<span class="comment">         * interrupt isn&#39;t yet injected.  Waiting until after injecting</span></div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;<span class="comment">         * is not an option since that won&#39;t help a posted interrupt.</span></div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;        <span class="keywordflow">if</span> (vcpu-&gt;arch.apic-&gt;lapic_timer.expired_tscdeadline &amp;&amp;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;            vcpu-&gt;arch.apic-&gt;lapic_timer.timer_advance_ns)</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;            <a class="code" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367">__kvm_wait_lapic_expire</a>(vcpu);</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;        <a class="code" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17">kvm_apic_inject_pending_timer_irqs</a>(apic);</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    }</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160; </div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    atomic_inc(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a581e6b6fe55055ed8a81d5a1aa258ff7">pending</a>);</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    kvm_make_request(KVM_REQ_UNBLOCK, vcpu);</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    <span class="keywordflow">if</span> (from_timer_fn)</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;        <a class="code" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44">kvm_vcpu_kick</a>(vcpu);</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_ac5a3afd8e2d8d1139dc7711c4b9e07e3"><div class="ttname"><a href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3">kvm_get_running_vcpu</a></div><div class="ttdeci">struct kvm_vcpu * kvm_get_running_vcpu(void)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l06338">kvm_main.c:6338</a></div></div>
<div class="ttc" id="alapic_8c_html_a290cedfa4bc99681ad10d45d0d960a17"><div class="ttname"><a href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17">kvm_apic_inject_pending_timer_irqs</a></div><div class="ttdeci">static void kvm_apic_inject_pending_timer_irqs(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01879">lapic.c:1879</a></div></div>
<div class="ttc" id="alapic_8c_html_aad64663521c2c2f523dce26a339df367"><div class="ttname"><a href="lapic_8c.html#aad64663521c2c2f523dce26a339df367">__kvm_wait_lapic_expire</a></div><div class="ttdeci">static void __kvm_wait_lapic_expire(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01844">lapic.c:1844</a></div></div>
<div class="ttc" id="alapic_8c_html_af4c60ea967a94401d14b834ac3e6a679"><div class="ttname"><a href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679">kvm_use_posted_timer_interrupt</a></div><div class="ttdeci">static bool kvm_use_posted_timer_interrupt(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00161">lapic.c:161</a></div></div>
<div class="ttc" id="astructkvm__timer_html"><div class="ttname"><a href="structkvm__timer.html">kvm_timer</a></div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00046">lapic.h:46</a></div></div>
<div class="ttc" id="astructkvm__timer_html_a033831ad90c69d7ea4e9af3fd0a6727e"><div class="ttname"><a href="structkvm__timer.html#a033831ad90c69d7ea4e9af3fd0a6727e">kvm_timer::hv_timer_in_use</a></div><div class="ttdeci">bool hv_timer_in_use</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00056">lapic.h:56</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_adc5f49f6a4cafac330b1fc370038f837_cgraph.png" border="0" usemap="#alapic_8c_adc5f49f6a4cafac330b1fc370038f837_cgraph" alt=""/></div>
<map name="alapic_8c_adc5f49f6a4cafac330b1fc370038f837_cgraph" id="alapic_8c_adc5f49f6a4cafac330b1fc370038f837_cgraph">
<area shape="rect" title=" " alt="" coords="5,388,152,415"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="200,93,387,120"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="442,207,602,233"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="200,290,387,331"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="911,663,1033,689"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="207,561,380,588"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="206,623,381,665"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="447,5,597,32"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="451,57,593,98"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="456,123,588,149"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="687,5,807,32"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="687,89,806,116"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="924,89,1020,116"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="453,257,591,284"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="435,308,609,335"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="678,460,815,487"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1127,308,1297,335"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="669,141,824,182"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="674,207,819,233"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="675,257,819,284"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="918,359,1026,385"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="907,409,1037,436"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="909,460,1035,487"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="909,511,1035,537"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="884,561,1060,588"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="890,612,1054,639"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1127,359,1297,385"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1108,637,1316,664"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1135,688,1289,715"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="895,141,1049,182"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="893,207,1051,233"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="893,257,1051,284"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="443,645,601,686"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="678,607,815,633"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="666,657,827,684"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="657,711,836,737"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="913,713,1031,740"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_adc5f49f6a4cafac330b1fc370038f837_icgraph.png" border="0" usemap="#alapic_8c_adc5f49f6a4cafac330b1fc370038f837_icgraph" alt=""/></div>
<map name="alapic_8c_adc5f49f6a4cafac330b1fc370038f837_icgraph" id="alapic_8c_adc5f49f6a4cafac330b1fc370038f837_icgraph">
<area shape="rect" title=" " alt="" coords="2039,471,2185,497"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1243,362,1411,403"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="1666,471,1783,497"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="1849,496,1974,523"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="1832,547,1991,573"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="985,49,1195,90"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="727,5,917,32"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="719,56,925,83"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="487,5,635,32"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="255,5,389,32"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="503,56,620,83"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1467,479,1609,505"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1255,428,1398,455"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="743,329,901,356"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1245,530,1408,571"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1247,595,1406,637"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1014,428,1166,455"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1026,329,1154,356"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="747,422,897,463"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="482,431,641,457"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="707,228,937,255"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="494,279,629,305"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="464,173,659,200"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="481,329,642,356"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="490,380,633,407"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="246,162,398,203"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="233,60,411,87"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="252,111,392,137"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="13,53,172,94"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="228,329,416,356"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="235,279,409,305"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="26,329,159,356"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="5,253,180,280"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="247,380,397,407"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="484,107,639,149"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1011,607,1169,633"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="765,812,879,839"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="778,607,866,633"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="522,911,601,937"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="475,481,647,508"/>
<area shape="rect" href="x86_8c.html#a8103751d0c861cfc0c6d0fed892e2454" title=" " alt="" coords="482,533,641,574"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="482,598,641,639"/>
<area shape="rect" href="x86_8c.html#a3de7a07b3d9ed3ee68dbdfb0c53dc5d0" title=" " alt="" coords="482,663,641,705"/>
<area shape="rect" href="x86_8c.html#ac6ebab4c3448cdbc79dbcac73e94503b" title=" " alt="" coords="482,729,641,770"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="468,860,655,887"/>
<area shape="rect" href="x86_8c.html#a02f0a60bd0147952e87f6ad38128f748" title=" " alt="" coords="482,794,641,835"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1043,661,1137,688"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="781,761,863,788"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="1665,535,1784,561"/>
<area shape="rect" href="lapic_8c.html#aee4a3e5ae4ed211edf4e463ebacadaa5" title=" " alt="" coords="1459,595,1617,637"/>
</map>
</div>

</div>
</div>
<a id="aed93ccaa481ab4fd48af66ccf79499c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed93ccaa481ab4fd48af66ccf79499c5">&#9670;&nbsp;</a></span>apic_timer_fn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum hrtimer_restart apic_timer_fn </td>
          <td>(</td>
          <td class="paramtype">struct hrtimer *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02782">2782</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;{</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__timer.html">kvm_timer</a> *ktimer = container_of(data, <span class="keyword">struct</span> <a class="code" href="structkvm__timer.html">kvm_timer</a>, <a class="code" href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">timer</a>);</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = container_of(ktimer, <span class="keyword">struct</span> <a class="code" href="structkvm__lapic.html">kvm_lapic</a>, <a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>);</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160; </div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;    <a class="code" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837">apic_timer_expired</a>(apic, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160; </div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#a86e81c4916d223c6f60d958af49c71dd">lapic_is_periodic</a>(apic)) {</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;        <a class="code" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede">advance_periodic_target_expiration</a>(apic);</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;        hrtimer_add_expires_ns(&amp;ktimer-&gt;<a class="code" href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">timer</a>, ktimer-&gt;<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a>);</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;        <span class="keywordflow">return</span> HRTIMER_RESTART;</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;        <span class="keywordflow">return</span> HRTIMER_NORESTART;</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a5cff2e426d700ad5b4cc78b9a3ea1ede"><div class="ttname"><a href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede">advance_periodic_target_expiration</a></div><div class="ttdeci">static void advance_periodic_target_expiration(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02042">lapic.c:2042</a></div></div>
<div class="ttc" id="alapic_8c_html_a86e81c4916d223c6f60d958af49c71dd"><div class="ttname"><a href="lapic_8c.html#a86e81c4916d223c6f60d958af49c71dd">lapic_is_periodic</a></div><div class="ttdeci">static bool lapic_is_periodic(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02747">lapic.c:2747</a></div></div>
<div class="ttc" id="alapic_8c_html_adc5f49f6a4cafac330b1fc370038f837"><div class="ttname"><a href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837">apic_timer_expired</a></div><div class="ttdeci">static void apic_timer_expired(struct kvm_lapic *apic, bool from_timer_fn)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01892">lapic.c:1892</a></div></div>
<div class="ttc" id="astructkvm__timer_html_a31da14cdecf55074bd9ff5af10c3ffa0"><div class="ttname"><a href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">kvm_timer::timer</a></div><div class="ttdeci">struct hrtimer timer</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00276">lapic.h:47</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aed93ccaa481ab4fd48af66ccf79499c5_icgraph.png" border="0" usemap="#alapic_8c_aed93ccaa481ab4fd48af66ccf79499c5_icgraph" alt=""/></div>
<map name="alapic_8c_aed93ccaa481ab4fd48af66ccf79499c5_icgraph" id="alapic_8c_aed93ccaa481ab4fd48af66ccf79499c5_icgraph">
<area shape="rect" title=" " alt="" coords="659,5,769,32"/>
<area shape="rect" href="lapic_8c.html#a1d54fd094860a96cad1af17c18f6904c" title=" " alt="" coords="473,5,611,32"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="253,5,425,32"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="5,5,205,32"/>
</map>
</div>

</div>
</div>
<a id="ac7a03b55710bfcc78be7af0609f6f93d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7a03b55710bfcc78be7af0609f6f93d">&#9670;&nbsp;</a></span>apic_update_lvtt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void apic_update_lvtt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01754">1754</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;{</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    u32 timer_mode = <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_LVTT) &amp;</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;            apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a37e444e2ea7fd2b7cd3975909208ddcb">timer_mode_mask</a>;</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160; </div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <span class="keywordflow">if</span> (apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a0a01f4db22cd9d821750ba99cd9dd1d6">timer_mode</a> != timer_mode) {</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0">apic_lvtt_tscdeadline</a>(apic) != (timer_mode ==</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;                APIC_LVT_TIMER_TSCDEADLINE)) {</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;            <a class="code" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2">cancel_apic_timer</a>(apic);</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;            <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_TMICT, 0);</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;            apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a> = 0;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;            apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#acb4ad6bfe6c14982d0a87f4678e92d09">tscdeadline</a> = 0;</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        }</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a0a01f4db22cd9d821750ba99cd9dd1d6">timer_mode</a> = timer_mode;</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;        <a class="code" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c">limit_periodic_timer_frequency</a>(apic);</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    }</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a8aa5f66b440e07d680f42fdaa211eac2"><div class="ttname"><a href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2">cancel_apic_timer</a></div><div class="ttdeci">static void cancel_apic_timer(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01744">lapic.c:1744</a></div></div>
<div class="ttc" id="alapic_8c_html_a985df23c29d6d25105aba975adf5582c"><div class="ttname"><a href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c">limit_periodic_timer_frequency</a></div><div class="ttdeci">static void limit_periodic_timer_frequency(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01721">lapic.c:1721</a></div></div>
<div class="ttc" id="astructkvm__timer_html_a37e444e2ea7fd2b7cd3975909208ddcb"><div class="ttname"><a href="structkvm__timer.html#a37e444e2ea7fd2b7cd3975909208ddcb">kvm_timer::timer_mode_mask</a></div><div class="ttdeci">u32 timer_mode_mask</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00051">lapic.h:51</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ac7a03b55710bfcc78be7af0609f6f93d_cgraph.png" border="0" usemap="#alapic_8c_ac7a03b55710bfcc78be7af0609f6f93d_cgraph" alt=""/></div>
<map name="alapic_8c_ac7a03b55710bfcc78be7af0609f6f93d_cgraph" id="alapic_8c_ac7a03b55710bfcc78be7af0609f6f93d_cgraph">
<area shape="rect" title=" " alt="" coords="5,107,136,133"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="184,5,344,32"/>
<area shape="rect" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2" title=" " alt="" coords="194,56,334,83"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="191,107,337,133"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="192,157,336,184"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="187,209,341,250"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="407,56,536,83"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="392,107,551,133"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="392,157,551,184"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="408,216,535,243"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ac7a03b55710bfcc78be7af0609f6f93d_icgraph.png" border="0" usemap="#alapic_8c_ac7a03b55710bfcc78be7af0609f6f93d_icgraph" alt=""/></div>
<map name="alapic_8c_ac7a03b55710bfcc78be7af0609f6f93d_icgraph" id="alapic_8c_ac7a03b55710bfcc78be7af0609f6f93d_icgraph">
<area shape="rect" title=" " alt="" coords="1589,401,1720,428"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1387,456,1539,483"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1384,221,1541,248"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1398,401,1527,428"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1163,474,1314,515"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="431,496,590,523"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,405,129,432"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1171,272,1306,299"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1141,221,1336,248"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1158,81,1319,108"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1167,157,1310,184"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="923,285,1075,326"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="910,183,1089,209"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="929,233,1069,260"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="678,175,837,217"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="905,31,1093,57"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="424,81,597,108"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="691,31,824,57"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="412,31,609,57"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="183,56,358,83"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="27,56,108,83"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="13,107,122,133"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="12,5,123,32"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="924,132,1075,159"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1174,401,1303,428"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="906,351,1093,377"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="913,452,1085,479"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="914,401,1085,428"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,398,350,439"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,347,364,373"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="710,249,805,276"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="689,300,826,327"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="470,300,551,327"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="657,452,857,479"/>
</map>
</div>

</div>
</div>
<a id="a7cfae0ee851075e6141d0446f4a133ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cfae0ee851075e6141d0446f4a133ab">&#9670;&nbsp;</a></span>apic_update_ppr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void apic_update_ppr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00966">966</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;{</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    u32 ppr;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160; </div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986">__apic_update_ppr</a>(apic, &amp;ppr) &amp;&amp;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        <a class="code" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0">apic_has_interrupt_for_ppr</a>(apic, ppr) != -1)</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        kvm_make_request(KVM_REQ_EVENT, apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a1bb0a1640f9f291f5c3154c6a2c40986"><div class="ttname"><a href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986">__apic_update_ppr</a></div><div class="ttdeci">static bool __apic_update_ppr(struct kvm_lapic *apic, u32 *new_ppr)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00944">lapic.c:944</a></div></div>
<div class="ttc" id="alapic_8c_html_ac1c99098894f4751a556057800e906e0"><div class="ttname"><a href="lapic_8c.html#ac1c99098894f4751a556057800e906e0">apic_has_interrupt_for_ppr</a></div><div class="ttdeci">static int apic_has_interrupt_for_ppr(struct kvm_lapic *apic, u32 ppr)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00932">lapic.c:932</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a7cfae0ee851075e6141d0446f4a133ab_cgraph.png" border="0" usemap="#alapic_8c_a7cfae0ee851075e6141d0446f4a133ab_cgraph" alt=""/></div>
<map name="alapic_8c_a7cfae0ee851075e6141d0446f4a133ab_cgraph" id="alapic_8c_a7cfae0ee851075e6141d0446f4a133ab_cgraph">
<area shape="rect" title=" " alt="" coords="5,107,135,133"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="183,67,325,93"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="183,129,325,170"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="577,5,736,32"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="379,56,524,83"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="379,107,523,133"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="784,81,933,108"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="577,56,736,83"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="577,107,736,133"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="373,157,529,184"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="597,157,717,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a7cfae0ee851075e6141d0446f4a133ab_icgraph.png" border="0" usemap="#alapic_8c_a7cfae0ee851075e6141d0446f4a133ab_icgraph" alt=""/></div>
<map name="alapic_8c_a7cfae0ee851075e6141d0446f4a133ab_icgraph" id="alapic_8c_a7cfae0ee851075e6141d0446f4a133ab_icgraph">
<area shape="rect" title=" " alt="" coords="1325,849,1455,876"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="1140,151,1239,177"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="1138,849,1241,876"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="1139,769,1240,796"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1113,563,1265,589"/>
<area shape="rect" href="lapic_8c.html#a44fec9a6b84f831af88ffed6b2325545" title=" " alt="" coords="1107,959,1272,985"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="1101,903,1277,929"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1125,1020,1254,1047"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="874,151,1027,177"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="874,92,1027,119"/>
<area shape="rect" href="x86_8c.html#aca5ab82fb669f6a99e011293efed0d5d" title=" " alt="" coords="627,143,779,185"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="384,136,543,163"/>
<area shape="rect" href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1" title=" " alt="" coords="637,92,768,119"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="624,41,781,68"/>
<area shape="rect" href="lapic_8c.html#ae9bd2989ca4c31caf8aa56b8c7dfd248" title=" " alt="" coords="371,5,555,32"/>
<area shape="rect" href="lapic_8c.html#a179cfc2268db31f40b5bd9b1c247a37b" title=" " alt="" coords="379,56,548,83"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="863,846,1038,887"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="872,744,1029,771"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="621,846,785,887"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="395,919,532,945"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="240,919,321,945"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="5,919,192,945"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="635,744,770,771"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="605,643,800,669"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="622,693,783,720"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="631,795,774,821"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="387,643,539,685"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="374,709,553,736"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="393,592,533,619"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="369,760,557,787"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="377,811,550,837"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="388,861,539,888"/>
<area shape="rect" href="lapic_8c.html#aee34622e495b500817e0b0905bfd0d4c" title=" " alt="" coords="880,537,1021,564"/>
<area shape="rect" href="x86_8c.html#a120377d5a571d3fb86660cd5f6cd982d" title=" " alt="" coords="650,389,755,416"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="382,440,545,467"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="404,491,523,517"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="430,541,497,568"/>
<area shape="rect" href="x86_8c.html#a86812e4228865668099921709e1c2f26" title=" " alt="" coords="400,187,527,213"/>
<area shape="rect" href="vmx_8c.html#aa55ace9429e6e94042e6602716222805" title=" " alt="" coords="421,237,506,264"/>
<area shape="rect" href="svm_8c.html#a640846de1c48f3e408644fcb85a6004b" title=" " alt="" coords="395,288,532,315"/>
<area shape="rect" href="vmx_8c.html#a8d0fa5e317cbd0eb67ebdc9fa5ec70ce" title=" " alt="" coords="399,339,528,365"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="875,314,1026,355"/>
<area shape="rect" href="vmx_8c.html#afb231b1a3b0ccf655edde89034273129" title=" " alt="" coords="848,967,1053,993"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="865,916,1037,943"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="617,911,788,953"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="625,977,780,1004"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="886,1053,1015,1080"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="609,1028,796,1055"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="617,1079,789,1105"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="617,1129,788,1156"/>
</map>
</div>

</div>
</div>
<a id="a8aa5f66b440e07d680f42fdaa211eac2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aa5f66b440e07d680f42fdaa211eac2">&#9670;&nbsp;</a></span>cancel_apic_timer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cancel_apic_timer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01744">1744</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;{</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    hrtimer_cancel(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">timer</a>);</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    preempt_disable();</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="keywordflow">if</span> (apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a033831ad90c69d7ea4e9af3fd0a6727e">hv_timer_in_use</a>)</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;        <a class="code" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae">cancel_hv_timer</a>(apic);</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    preempt_enable();</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    atomic_set(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a581e6b6fe55055ed8a81d5a1aa258ff7">pending</a>, 0);</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_af8cab016891083e066b7e1c086d012ae"><div class="ttname"><a href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae">cancel_hv_timer</a></div><div class="ttdeci">static void cancel_hv_timer(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02091">lapic.c:2091</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a8aa5f66b440e07d680f42fdaa211eac2_cgraph.png" border="0" usemap="#alapic_8c_a8aa5f66b440e07d680f42fdaa211eac2_cgraph" alt=""/></div>
<map name="alapic_8c_a8aa5f66b440e07d680f42fdaa211eac2_cgraph" id="alapic_8c_a8aa5f66b440e07d680f42fdaa211eac2_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,145,32"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="193,5,323,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a8aa5f66b440e07d680f42fdaa211eac2_icgraph.png" border="0" usemap="#alapic_8c_a8aa5f66b440e07d680f42fdaa211eac2_icgraph" alt=""/></div>
<map name="alapic_8c_a8aa5f66b440e07d680f42fdaa211eac2_icgraph" id="alapic_8c_a8aa5f66b440e07d680f42fdaa211eac2_icgraph">
<area shape="rect" title=" " alt="" coords="1768,189,1908,216"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="1589,189,1720,216"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1387,139,1539,165"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1384,277,1541,304"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1398,189,1527,216"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1163,45,1314,86"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="431,5,590,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,64,129,91"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1171,284,1306,311"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1141,343,1336,369"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1158,452,1319,479"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1167,233,1310,260"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="923,285,1075,326"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="910,351,1089,377"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="929,401,1069,428"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="678,343,837,385"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="905,452,1093,479"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="424,503,597,529"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="691,452,824,479"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="412,452,609,479"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="183,477,358,504"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="27,477,108,504"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="13,528,122,555"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="12,427,123,453"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="924,233,1075,260"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1174,157,1303,184"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="906,132,1093,159"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="913,183,1085,209"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="914,81,1085,108"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,57,350,98"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,140,364,167"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="710,157,805,184"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="689,107,826,133"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="470,140,551,167"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="657,259,857,285"/>
</map>
</div>

</div>
</div>
<a id="af8cab016891083e066b7e1c086d012ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8cab016891083e066b7e1c086d012ae">&#9670;&nbsp;</a></span>cancel_hv_timer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cancel_hv_timer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02091">2091</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;{</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    WARN_ON(preemptible());</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    WARN_ON(!apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a033831ad90c69d7ea4e9af3fd0a6727e">hv_timer_in_use</a>);</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    static_call(kvm_x86_cancel_hv_timer)(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a033831ad90c69d7ea4e9af3fd0a6727e">hv_timer_in_use</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_af8cab016891083e066b7e1c086d012ae_icgraph.png" border="0" usemap="#alapic_8c_af8cab016891083e066b7e1c086d012ae_icgraph" alt=""/></div>
<map name="alapic_8c_af8cab016891083e066b7e1c086d012ae_icgraph" id="alapic_8c_af8cab016891083e066b7e1c086d012ae_icgraph">
<area shape="rect" title=" " alt="" coords="2056,539,2185,566"/>
<area shape="rect" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2" title=" " alt="" coords="1868,373,2008,399"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1445,668,1613,709"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="1879,514,1997,541"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="1879,565,1997,591"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="1675,289,1806,315"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1217,145,1369,171"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="958,483,1115,510"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1465,230,1594,257"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="961,5,1112,47"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="709,13,867,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,173,129,199"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="721,434,855,461"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="691,485,885,511"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="707,551,869,578"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="717,383,859,410"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="451,435,603,476"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="438,501,617,527"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="457,383,597,410"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="191,489,350,531"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="433,551,621,578"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="441,602,614,629"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="204,555,337,582"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="183,627,358,654"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="452,333,603,359"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1228,221,1357,247"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="943,225,1130,251"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="702,63,874,90"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="951,71,1122,98"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="709,165,867,207"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,227,364,254"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="741,333,835,359"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="719,282,857,309"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="487,282,568,309"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="1188,687,1397,728"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="941,694,1132,721"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="933,745,1140,771"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="714,694,862,721"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="460,703,595,730"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="729,745,847,771"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1670,514,1811,541"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1458,449,1601,475"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1448,281,1611,323"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1450,500,1609,541"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1229,617,1357,643"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="412,653,643,679"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1213,275,1372,302"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="979,275,1094,302"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="993,173,1081,199"/>
<area shape="rect" href="lapic_8c.html#aee4a3e5ae4ed211edf4e463ebacadaa5" title=" " alt="" coords="1661,577,1820,619"/>
</map>
</div>

</div>
</div>
<a id="a40e5c52e8a79166cfc433f413bbe9e36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40e5c52e8a79166cfc433f413bbe9e36">&#9670;&nbsp;</a></span>count_vectors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u8 count_vectors </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>bitmap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00640">640</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;{</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordtype">int</span> vec;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    u32 *reg;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    u8 count = 0;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">for</span> (vec = 0; vec &lt; <a class="code" href="lapic_8c.html#a05cf2e217d081f8aab707b910c25de43">MAX_APIC_VECTOR</a>; vec += <a class="code" href="lapic_8c.html#ac232a08bd2049565028a1c93bb961a43">APIC_VECTORS_PER_REG</a>) {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        reg = bitmap + <a class="code" href="lapic_8h.html#aba88c7489787a27e53b077679ce7b534">REG_POS</a>(vec);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        count += hweight32(*reg);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordflow">return</span> count;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_ac232a08bd2049565028a1c93bb961a43"><div class="ttname"><a href="lapic_8c.html#ac232a08bd2049565028a1c93bb961a43">APIC_VECTORS_PER_REG</a></div><div class="ttdeci">#define APIC_VECTORS_PER_REG</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00060">lapic.c:60</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a40e5c52e8a79166cfc433f413bbe9e36_icgraph.png" border="0" usemap="#alapic_8c_a40e5c52e8a79166cfc433f413bbe9e36_icgraph" alt=""/></div>
<map name="alapic_8c_a40e5c52e8a79166cfc433f413bbe9e36_icgraph" id="alapic_8c_a40e5c52e8a79166cfc433f413bbe9e36_icgraph">
<area shape="rect" title=" " alt="" coords="2445,646,2559,673"/>
<area shape="rect" href="lapic_8c.html#a5468339c2df08ca538b77d4d48915c35" title=" " alt="" coords="2219,646,2397,673"/>
<area shape="rect" href="x86_8c.html#a87cedb0953e919148694dd8b06c9cb73" title=" " alt="" coords="1973,494,2171,521"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1996,701,2148,727"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="2007,646,2137,673"/>
<area shape="rect" href="x86_8c.html#a384702aafa8cdbab3cf92b3d576bb6fb" title=" " alt="" coords="1743,494,1925,521"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="1757,298,1911,325"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="1263,494,1401,521"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="1052,545,1133,571"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="767,595,953,622"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="581,654,705,681"/>
<area shape="rect" href="svm_2nested_8c.html#a777240cb9ab00451d21a1b204e19c5a6" title=" " alt="" coords="1491,151,1683,178"/>
<area shape="rect" href="svm_2nested_8c.html#a03b4be7ca82710ecd17bc66f2a20cad8" title=" " alt="" coords="1480,356,1695,397"/>
<area shape="rect" href="svm_2nested_8c.html#a574acca11f4be4ea5df18f36307f9bf6" title=" " alt="" coords="1485,42,1689,69"/>
<area shape="rect" href="svm_2nested_8c.html#a4ec7e878f6af209e74dd84285ee0198f" title=" " alt="" coords="568,239,719,266"/>
<area shape="rect" href="svm_8h.html#a7b2d87885eea1b11b1bf1045c21c5a8b" title=" " alt="" coords="1485,422,1690,449"/>
<area shape="rect" href="svm_2hyperv_8c.html#a33efa5fe6a664e9b2a70232b93485645" title=" " alt="" coords="1496,291,1679,332"/>
<area shape="rect" href="svm_8c.html#a08788d6a633657aa9e7e2f3b09db9b40" title=" " alt="" coords="1255,173,1409,215"/>
<area shape="rect" href="svm_8c.html#ae135f7d753cde05e6f726fb75e971ddd" title=" " alt="" coords="1252,71,1412,98"/>
<area shape="rect" href="svm_8c.html#a3f8983432f4aae138a6f4d167c561132" title=" " alt="" coords="1265,122,1399,149"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="1033,181,1152,207"/>
<area shape="rect" href="svm_8c.html#af2ee2a03530f5b7a02a127d8b779d2ae" title=" " alt="" coords="777,181,943,207"/>
<area shape="rect" href="svm_2nested_8c.html#a3286f29b650004d599595557d310136e" title=" " alt="" coords="1233,342,1431,369"/>
<area shape="rect" href="svm_2nested_8c.html#a962af1ea814d32a42ada9f601918cee5" title=" " alt="" coords="1247,5,1417,47"/>
<area shape="rect" href="svm_2nested_8c.html#ab7904bb74631114e0bd5102a52aab4c8" title=" " alt="" coords="1001,39,1184,80"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="771,46,949,73"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="776,97,944,123"/>
<area shape="rect" href="svm_8c.html#a5d52c93beeb85ba5a99283d4eba589e1" title=" " alt="" coords="371,302,520,329"/>
<area shape="rect" href="svm_8c.html#a1eacc7b79f62ed332056217c35fe3be4" title=" " alt="" coords="176,367,323,394"/>
<area shape="rect" href="svm_8c.html#a7c2323b13a5022aa9f6a9ae5ebe4d830" title=" " alt="" coords="5,367,128,394"/>
<area shape="rect" href="svm_2nested_8c.html#a387a91a64bb25a25590ee3b019f0e0a2" title=" " alt="" coords="1243,443,1421,470"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1759,719,1909,760"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="1013,730,1172,757"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1769,646,1899,673"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="1494,595,1681,622"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="1501,697,1673,723"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="1502,646,1673,673"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="1013,647,1172,688"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1285,545,1379,571"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="1232,697,1432,723"/>
</map>
</div>

</div>
</div>
<a id="a480318ed03f59c2ddf1a0dfa67cfe26d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a480318ed03f59c2ddf1a0dfa67cfe26d">&#9670;&nbsp;</a></span>DEFINE_STATIC_KEY_DEFERRED_FALSE() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> DEFINE_STATIC_KEY_DEFERRED_FALSE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lapic_8h.html#a65788ee3d09ea041368cd93b3391f3c4">apic_hw_disabled</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HZ&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aec669eb05d23c40ad3cfc7bedc3243d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec669eb05d23c40ad3cfc7bedc3243d3">&#9670;&nbsp;</a></span>DEFINE_STATIC_KEY_DEFERRED_FALSE() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="x86_8c.html#a721f8d5b210e9625587f13b92870ba38">__read_mostly</a> DEFINE_STATIC_KEY_DEFERRED_FALSE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lapic_8h.html#a3c2a1bc1bb244452f5338719ef4e73c8">apic_sw_disabled</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HZ&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3883ed1ed465ae4e12ac751db4686c0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3883ed1ed465ae4e12ac751db4686c0a">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[1/15]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lapic_8h.html#aed305556b8d09cfaa135cca071bd8c22">__kvm_apic_update_irr</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a65e03a39ffe5b3115b10745c1fa95e24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65e03a39ffe5b3115b10745c1fa95e24">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[2/15]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lapic_8h.html#a8c6616d2cbae35632aa5debb15b552ec">kvm_alloc_apic_access_page</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5c37038653d65dc5a9c18846465cc47a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c37038653d65dc5a9c18846465cc47a">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[3/15]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lapic_8h.html#ad608730f208932f64d2c98c762fce85c">kvm_apic_clear_irr</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8f0609f0d503f7003e0b8a62cd269cd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f0609f0d503f7003e0b8a62cd269cd4">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[4/15]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lapic_8h.html#aa421165466ac455ff3fff91fb9afe7bf">kvm_apic_has_interrupt</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5db667aae6833602ec6eea1045627bb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5db667aae6833602ec6eea1045627bb1">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[5/15]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lapic_8h.html#adb63e5a650d4571316b450d153a3105d">kvm_apic_match_dest</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac81b3025384731b2a675d3c25e9490da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac81b3025384731b2a675d3c25e9490da">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[6/15]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lapic_8h.html#a4b7f12cb3ba68245df79bc30d938b728">kvm_apic_send_ipi</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a06f049217674a8b55d6ec8675dff715a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06f049217674a8b55d6ec8675dff715a">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[7/15]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lapic_8h.html#a501cf23b440691f979fad04c87067f93">kvm_apic_set_eoi_accelerated</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab5026788c1ee5b3dcfe119b3befd8ab2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5026788c1ee5b3dcfe119b3befd8ab2">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[8/15]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lapic_8h.html#a922ce0b7b20cf9b9ef4930d3d81e8360">kvm_apic_update_irr</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aba8107bfccff264ce94816294fb49383"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba8107bfccff264ce94816294fb49383">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[9/15]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lapic_8h.html#a44fec9a6b84f831af88ffed6b2325545">kvm_apic_update_ppr</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0bced2bbe3fc57564b6158524c717164"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bced2bbe3fc57564b6158524c717164">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[10/15]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lapic_8h.html#a1b33bb5758d3dd75c7b87e537a5e729e">kvm_apic_write_nodecode</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a127aaf60367f59d1bdb22755ed32d22e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a127aaf60367f59d1bdb22755ed32d22e">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[11/15]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lapic_8h.html#a55b40b66655c45769650efd20bf3c26d">kvm_lapic_expired_hv_timer</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acd4415a11be7cdbe724f5f7aee123d7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd4415a11be7cdbe724f5f7aee123d7b">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[12/15]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lapic_8h.html#a1e5b22760af617cabb18355a0a373156">kvm_lapic_find_highest_irr</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6504ad14e0309eed0c69052812125b2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6504ad14e0309eed0c69052812125b2b">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[13/15]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lapic_8h.html#a4b4d880305f2ddba0ac9fdb398a7611a">kvm_lapic_readable_reg_mask</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afe4b28ce6b18fd43a47cb53230635d64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe4b28ce6b18fd43a47cb53230635d64">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[14/15]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lapic_8h.html#ab6d8f3638f580c8d6dcd091512c49768">kvm_lapic_set_eoi</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a43a780d4bd905ccc71788b27bfde973b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43a780d4bd905ccc71788b27bfde973b">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[15/15]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lapic_8h.html#a94273a31a16c3d074d5722f22474bcbb">kvm_wait_lapic_expire</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a656567b4197d9a5af833ffd04dff7a52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a656567b4197d9a5af833ffd04dff7a52">&#9670;&nbsp;</a></span>find_highest_vector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int find_highest_vector </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>bitmap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00625">625</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;{</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordtype">int</span> vec;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    u32 *reg;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordflow">for</span> (vec = <a class="code" href="lapic_8c.html#a05cf2e217d081f8aab707b910c25de43">MAX_APIC_VECTOR</a> - <a class="code" href="lapic_8c.html#ac232a08bd2049565028a1c93bb961a43">APIC_VECTORS_PER_REG</a>;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;         vec &gt;= 0; vec -= <a class="code" href="lapic_8c.html#ac232a08bd2049565028a1c93bb961a43">APIC_VECTORS_PER_REG</a>) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        reg = bitmap + <a class="code" href="lapic_8h.html#aba88c7489787a27e53b077679ce7b534">REG_POS</a>(vec);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="keywordflow">if</span> (*reg)</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            <span class="keywordflow">return</span> __fls(*reg) + vec;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a656567b4197d9a5af833ffd04dff7a52_icgraph.png" border="0" usemap="#alapic_8c_a656567b4197d9a5af833ffd04dff7a52_icgraph" alt=""/></div>
<map name="alapic_8c_a656567b4197d9a5af833ffd04dff7a52_icgraph" id="alapic_8c_a656567b4197d9a5af833ffd04dff7a52_icgraph">
<area shape="rect" title=" " alt="" coords="1991,811,2140,837"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="1616,637,1775,664"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="1823,836,1943,863"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="1403,561,1545,588"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="931,212,1034,239"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="907,757,1059,784"/>
<area shape="rect" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843" title=" " alt="" coords="1179,339,1289,365"/>
<area shape="rect" href="lapic_8c.html#a332060485ef249fcfd9edbf9cf80dd2b" title=" " alt="" coords="1380,785,1568,812"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="1169,452,1299,479"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="895,540,1071,567"/>
<area shape="rect" href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf" title=" " alt="" coords="1145,641,1323,668"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="933,313,1032,340"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="932,389,1033,416"/>
<area shape="rect" href="lapic_8c.html#a44fec9a6b84f831af88ffed6b2325545" title=" " alt="" coords="900,452,1065,479"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="918,263,1047,289"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="650,300,803,327"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="650,249,803,276"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="639,133,814,174"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="648,81,805,108"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="397,394,561,435"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="165,815,303,841"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="5,815,87,841"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="411,5,546,32"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="381,56,576,83"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="398,107,559,133"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="407,157,550,184"/>
<area shape="rect" href="lapic_8c.html#aee34622e495b500817e0b0905bfd0d4c" title=" " alt="" coords="656,351,797,377"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="651,807,802,849"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="399,815,558,841"/>
<area shape="rect" href="vmx_8c.html#afb231b1a3b0ccf655edde89034273129" title=" " alt="" coords="624,452,829,479"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="641,503,813,529"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="393,749,564,790"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="401,503,556,529"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="135,528,333,555"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="662,199,791,225"/>
<area shape="rect" href="irq_8c.html#a82ee83566d2724a298b67f23f481976b" title=" " alt="" coords="877,705,1088,732"/>
<area shape="rect" href="irq_8c.html#ae3151f072a1bb4a732ee3854ab6cf619" title=" " alt="" coords="895,616,1070,643"/>
<area shape="rect" href="vmx_2nested_8c.html#add1e82c32385142c0fca04a1db8cbc3a" title=" " alt="" coords="917,973,1048,1000"/>
<area shape="rect" href="svm_8c.html#a5c26f1ceaa6cc778d986bd33629dc539" title=" " alt="" coords="676,705,777,732"/>
<area shape="rect" href="x86_8c.html#a54ec69b24c80207e4e6122994db0a466" title=" " alt="" coords="641,604,812,631"/>
<area shape="rect" href="svm_2nested_8c.html#a3286f29b650004d599595557d310136e" title=" " alt="" coords="628,655,825,681"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fecee9010894e3a1513a0924e24dd6" title=" " alt="" coords="658,1025,795,1052"/>
<area shape="rect" href="vmx_2nested_8c.html#a23e3de8c964e87404eea818be6f70154" title=" " alt="" coords="655,975,798,1001"/>
<area shape="rect" href="lapic_8c.html#ad2b5e2187414c65e1a5876e641fee3fc" title=" " alt="" coords="1419,937,1529,964"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="1617,836,1773,863"/>
<area shape="rect" href="lapic_8c.html#ad608730f208932f64d2c98c762fce85c" title=" " alt="" coords="1161,955,1307,981"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="1403,634,1545,675"/>
<area shape="rect" href="lapic_8c.html#a1e5b22760af617cabb18355a0a373156" title=" " alt="" coords="1136,887,1332,913"/>
<area shape="rect" href="x86_8c.html#af2257f2e81aff845f58e2112c4f46ce7" title=" " alt="" coords="903,864,1062,891"/>
<area shape="rect" href="vmx_8c.html#ac2197e1b1fbae590edacaecfd1d0974c" title=" " alt="" coords="906,915,1059,941"/>
</map>
</div>

</div>
</div>
<a id="aec07f4595f82e14e1075beb4730b6976"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec07f4595f82e14e1075beb4730b6976">&#9670;&nbsp;</a></span>get_lvt_index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_lvt_index </td>
          <td>(</td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>reg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02245">2245</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;{</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <span class="keywordflow">if</span> (reg == APIC_LVTCMCI)</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda6501a8a1c49c80b439b25520514bbfce">LVT_CMCI</a>;</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    <span class="keywordflow">if</span> (reg &lt; APIC_LVTT || reg &gt; APIC_LVTERR)</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    <span class="keywordflow">return</span> array_index_nospec(</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;            (reg - APIC_LVTT) &gt;&gt; 4, <a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdaa2e7ce18b246d7ad6fe039d93d40dd06">KVM_APIC_MAX_NR_LVT_ENTRIES</a>);</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;}</div>
<div class="ttc" id="alapic_8h_html_abcd26ec2b2cce7b13778d6fcea27c1fda6501a8a1c49c80b439b25520514bbfce"><div class="ttname"><a href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda6501a8a1c49c80b439b25520514bbfce">LVT_CMCI</a></div><div class="ttdeci">@ LVT_CMCI</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00039">lapic.h:39</a></div></div>
<div class="ttc" id="alapic_8h_html_abcd26ec2b2cce7b13778d6fcea27c1fdaa2e7ce18b246d7ad6fe039d93d40dd06"><div class="ttname"><a href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdaa2e7ce18b246d7ad6fe039d93d40dd06">KVM_APIC_MAX_NR_LVT_ENTRIES</a></div><div class="ttdeci">@ KVM_APIC_MAX_NR_LVT_ENTRIES</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00041">lapic.h:41</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aec07f4595f82e14e1075beb4730b6976_icgraph.png" border="0" usemap="#alapic_8c_aec07f4595f82e14e1075beb4730b6976_icgraph" alt=""/></div>
<map name="alapic_8c_aec07f4595f82e14e1075beb4730b6976_icgraph" id="alapic_8c_aec07f4595f82e14e1075beb4730b6976_icgraph">
<area shape="rect" title=" " alt="" coords="1523,147,1633,174"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1317,147,1475,174"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1105,71,1239,98"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1075,122,1269,149"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1091,173,1253,199"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1101,249,1243,275"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="857,5,1009,47"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="843,71,1022,98"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="863,122,1003,149"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="632,64,791,105"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="839,173,1027,199"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="399,223,572,250"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="645,173,778,199"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,173,584,199"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,198,339,225"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,147,101,174"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,198,115,225"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,249,116,275"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="857,274,1008,301"/>
</map>
</div>

</div>
</div>
<a id="a8c6616d2cbae35632aa5debb15b552ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c6616d2cbae35632aa5debb15b552ec">&#9670;&nbsp;</a></span>kvm_alloc_apic_access_page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_alloc_apic_access_page </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02598">2598</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;{</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    <span class="keyword">struct </span>page *page;</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    <span class="keywordtype">void</span> __user *hva;</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160; </div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    mutex_lock(&amp;kvm-&gt;slots_lock);</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    <span class="keywordflow">if</span> (kvm-&gt;arch.apic_access_memslot_enabled ||</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;        kvm-&gt;arch.apic_access_memslot_inhibited)</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160; </div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    hva = <a class="code" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9">__x86_set_memory_region</a>(kvm, APIC_ACCESS_PAGE_PRIVATE_MEMSLOT,</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;                      APIC_DEFAULT_PHYS_BASE, PAGE_SIZE);</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;    <span class="keywordflow">if</span> (IS_ERR(hva)) {</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;        ret = PTR_ERR(hva);</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;    }</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160; </div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;    page = <a class="code" href="kvm__main_8c.html#a5132836c5be1763ca353ca2489a7fe23">gfn_to_page</a>(kvm, APIC_DEFAULT_PHYS_BASE &gt;&gt; PAGE_SHIFT);</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;    <span class="keywordflow">if</span> (is_error_page(page)) {</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;        ret = -EFAULT;</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;    }</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160; </div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;<span class="comment">     * Do not pin the page in memory, so that memory hot-unplug</span></div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;<span class="comment">     * is able to migrate it.</span></div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;    put_page(page);</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;    kvm-&gt;arch.apic_access_memslot_enabled = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;out:</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;    mutex_unlock(&amp;kvm-&gt;slots_lock);</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_a5132836c5be1763ca353ca2489a7fe23"><div class="ttname"><a href="kvm__main_8c.html#a5132836c5be1763ca353ca2489a7fe23">gfn_to_page</a></div><div class="ttdeci">struct page * gfn_to_page(struct kvm *kvm, gfn_t gfn)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l03126">kvm_main.c:3126</a></div></div>
<div class="ttc" id="ax86_8c_html_a0c0c5e35bc626e4140927bf15b4881f9"><div class="ttname"><a href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9">__x86_set_memory_region</a></div><div class="ttdeci">void __user * __x86_set_memory_region(struct kvm *kvm, int id, gpa_t gpa, u32 size)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l12637">x86.c:12637</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a8c6616d2cbae35632aa5debb15b552ec_cgraph.png" border="0" usemap="#alapic_8c_a8c6616d2cbae35632aa5debb15b552ec_cgraph" alt=""/></div>
<map name="alapic_8c_a8c6616d2cbae35632aa5debb15b552ec_cgraph" id="alapic_8c_a8c6616d2cbae35632aa5debb15b552ec_cgraph">
<area shape="rect" title=" " alt="" coords="5,847,219,874"/>
<area shape="rect" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9" title=" " alt="" coords="267,789,464,815"/>
<area shape="rect" href="kvm__main_8c.html#a5132836c5be1763ca353ca2489a7fe23" title=" " alt="" coords="314,873,417,899"/>
<area shape="rect" href="kvm__main_8c.html#ac76f506181e49aa4800bb202e11cb2b3" title=" " alt="" coords="518,569,721,595"/>
<area shape="rect" href="kvm__main_8c.html#ab790fe1e5bd86339acfc80a95efddf4c" title=" " alt="" coords="798,805,969,847"/>
<area shape="rect" href="kvm__main_8c.html#a8f5a06af032a1edb199b4ae393b2de8e" title=" " alt="" coords="775,282,992,309"/>
<area shape="rect" href="guest__memfd_8c.html#abaf64b8cb9e32ccb368d1d9c49d0bb02" title=" " alt="" coords="816,333,951,359"/>
<area shape="rect" href="guest__memfd_8c.html#a905ecfa162a290dceb1c7d5678e2a70f" title=" " alt="" coords="1597,703,1747,730"/>
<area shape="rect" href="kvm__main_8c.html#ac81a7d714d0668ccea6d0c2ddfd0fed5" title=" " alt="" coords="812,383,955,410"/>
<area shape="rect" href="guest__memfd_8c.html#a2eab57d9fb8529d3751b5c8179d881c9" title=" " alt="" coords="1864,703,2019,730"/>
<area shape="rect" href="kvm__main_8c.html#a52d56a5dc447602839375289b5bbffb2" title=" " alt="" coords="1321,282,1497,309"/>
<area shape="rect" href="kvm__main_8c.html#a05eed662dd45e4e4f7485e3158d95a3b" title=" " alt="" coords="1040,678,1259,705"/>
<area shape="rect" href="kvm__main_8c.html#a8c9bd99a64bbedb0930e29ed4dcc7897" title=" " alt="" coords="1067,231,1231,258"/>
<area shape="rect" href="kvm__main_8c.html#ac4ce014a99262ed5672a102c6d2ffdbd" title=" " alt="" coords="1067,383,1231,410"/>
<area shape="rect" href="kvm__main_8c.html#aae203bcd73cff0002aeddd37bea71323" title=" " alt="" coords="1315,130,1503,157"/>
<area shape="rect" href="kvm__main_8c.html#afdb5cea8958921b2ea9bd3a29cf9d7a6" title=" " alt="" coords="1069,181,1229,207"/>
<area shape="rect" href="kvm__main_8c.html#a6dd13a049fee9663450eebbf2ac16faa" title=" " alt="" coords="1064,477,1235,519"/>
<area shape="rect" href="kvm__main_8c.html#a192569033b972982f6b53e13666ef82b" title=" " alt="" coords="1046,333,1253,359"/>
<area shape="rect" href="kvm__main_8c.html#aa89329e461345f4a586065895ca072c6" title=" " alt="" coords="1845,391,2037,418"/>
<area shape="rect" href="kvm__main_8c.html#a115855e32d0da82706ba0bf22d90d8f1" title=" " alt="" coords="1587,282,1757,309"/>
<area shape="rect" href="kvm__main_8c.html#a6178ec8efee3ce8e53d84403b2a25401" title=" " alt="" coords="1567,189,1777,215"/>
<area shape="rect" href="kvm__main_8c.html#ada893d7e7d49d1023d23653b23944572" title=" " alt="" coords="1861,239,2022,266"/>
<area shape="rect" href="kvm__main_8c.html#a1a0266e85b304bdbde46a83f921d9606" title=" " alt="" coords="1836,189,2047,215"/>
<area shape="rect" href="kvm__main_8c.html#a578857fc65c8fabf9b425ff0b55a5fd3" title=" " alt="" coords="1860,290,2023,317"/>
<area shape="rect" href="kvm__main_8c.html#aa3b1664c58e5dab933e8659d884d56f3" title=" " alt="" coords="1855,341,2028,367"/>
<area shape="rect" href="x86_8c.html#ae7e25dec8e0af366fb3db41dc9881970" title=" " alt="" coords="1832,138,2051,165"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="1307,805,1512,847"/>
<area shape="rect" href="kvm__main_8c.html#aab592fb3a4d6204c86d8f99caa0986ba" title=" " alt="" coords="1573,653,1771,679"/>
<area shape="rect" href="kvm__main_8c.html#ae2d9291adcda0ba0f7a20350dabdd418" title=" " alt="" coords="1335,703,1484,730"/>
<area shape="rect" href="x86_8c.html#a5a34304a4f0ec19e4bce34e0513fc3a4" title=" " alt="" coords="1580,754,1764,781"/>
<area shape="rect" href="mmu_8c.html#a51621e034894e480342d3a5b48735d41" title=" " alt="" coords="1579,923,1765,964"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="1589,805,1755,847"/>
<area shape="rect" href="page__track_8h.html#ad39459f95333b39d77e1b95c99e492d8" title=" " alt="" coords="1567,871,1777,898"/>
<area shape="rect" href="mmu_8c.html#a58fe7b43995ae8c20c597e1bb9c4c007" title=" " alt="" coords="1581,123,1763,164"/>
<area shape="rect" href="kvm__main_8c.html#a31dbd36d8363fc2e5979b3976ebc0dbb" title=" " alt="" coords="1577,5,1767,47"/>
<area shape="rect" href="kvm__main_8c.html#aa87d0b55e37a312b7291fa9b5c83634c" title=" " alt="" coords="1595,71,1749,98"/>
<area shape="rect" href="mmu_8c.html#abd59fd9785b9b5676841e9706c1c6797" title=" " alt="" coords="1853,87,2030,114"/>
<area shape="rect" href="kvm__main_8c.html#a40ed7705420af10446677d1c99a0978e" title=" " alt="" coords="1320,434,1499,461"/>
<area shape="rect" href="x86_8c.html#a14568e065745512e03b3088070848289" title=" " alt="" coords="1307,536,1512,577"/>
<area shape="rect" href="dirty__ring_8c.html#a38d9bd671fa9181708075184e77eca3a" title=" " alt="" coords="1324,485,1495,511"/>
<area shape="rect" href="x86_8c.html#a1be4ac58e0429946d83b58f98bfe2301" title=" " alt="" coords="1560,543,1784,570"/>
<area shape="rect" href="kvm__main_8c.html#a055190afb6bce32ba87e7fea907ec1ec" title=" " alt="" coords="574,927,665,954"/>
<area shape="rect" href="kvm__main_8c.html#a99f99281cc81d5cd69f5825ccb8793b4" title=" " alt="" coords="512,873,727,899"/>
<area shape="rect" href="kvm__main_8c.html#a7c20e0f654f0b4472c3833f0a563e11e" title=" " alt="" coords="819,927,947,954"/>
<area shape="rect" href="kvm__main_8c.html#aa77d8fc2ee9fe5965c45f1d0989eb266" title=" " alt="" coords="805,986,961,1013"/>
<area shape="rect" href="kvm__main_8c.html#a63ec3e18db03a212e6e84391b5025689" title=" " alt="" coords="1064,987,1235,1014"/>
<area shape="rect" href="kvm__main_8c.html#ab58025ccc253a102c64561fa61c2a514" title=" " alt="" coords="1333,989,1485,1015"/>
<area shape="rect" href="kvm__main_8c.html#a77ec4b9140d69a05f3b4e7836cc03a96" title=" " alt="" coords="1591,989,1753,1015"/>
<area shape="rect" href="kvm__main_8c.html#adfbe9f59cac426f2ff01ab4fcfd631a7" title=" " alt="" coords="1362,1039,1457,1066"/>
<area shape="rect" href="kvm__main_8c.html#a6c7165822622ebbd29159771905bd317" title=" " alt="" coords="785,873,981,899"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a8c6616d2cbae35632aa5debb15b552ec_icgraph.png" border="0" usemap="#alapic_8c_a8c6616d2cbae35632aa5debb15b552ec_icgraph" alt=""/></div>
<map name="alapic_8c_a8c6616d2cbae35632aa5debb15b552ec_icgraph" id="alapic_8c_a8c6616d2cbae35632aa5debb15b552ec_icgraph">
<area shape="rect" title=" " alt="" coords="575,31,788,57"/>
<area shape="rect" href="avic_8c.html#aefc63eafb35c1efd94f6d53e7d0b20d5" title=" " alt="" coords="352,5,527,32"/>
<area shape="rect" href="vmx_8c.html#a426fe0cb3c7fd73b276f6815b6ab9ddc" title=" " alt="" coords="371,56,508,83"/>
<area shape="rect" href="avic_8c.html#a8e0a22138080054f4ac064064402f74a" title=" " alt="" coords="189,5,304,32"/>
<area shape="rect" href="svm_8c.html#a2af2f754ca7838a0253d54c33aae7d1e" title=" " alt="" coords="5,5,141,32"/>
</map>
</div>

</div>
</div>
<a id="a27836a2bcd51ebcfe2ca478e9ad7aa04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27836a2bcd51ebcfe2ca478e9ad7aa04">&#9670;&nbsp;</a></span>kvm_apic_accept_events()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_apic_accept_events </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03263">3263</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;{</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;    u8 <a class="code" href="structkvm__lapic.html#a9122fb8adbd131d159cb064fe6a3f01e">sipi_vector</a>;</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;    <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160; </div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a106127db5f69d94e5ea9d6d2982c23fd">kvm_apic_has_pending_init_or_sipi</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>))</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160; </div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="kvm__cache__regs_8h.html#afbcfc413ceedb460734eb5fd7c5c4fbc">is_guest_mode</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>)) {</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;        r = <a class="code" href="x86_8c.html#a52623517d65c58a92d84f08015198d20">kvm_check_nested_events</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;        <span class="keywordflow">if</span> (r &lt; 0)</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;            <span class="keywordflow">return</span> r == -EBUSY ? 0 : r;</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;<span class="comment">         * Continue processing INIT/SIPI even if a nested VM-Exit</span></div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;<span class="comment">         * occurred, e.g. pending SIPIs should be dropped if INIT+SIPI</span></div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;<span class="comment">         * are blocked as a result of transitioning to VMX root mode.</span></div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;    }</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160; </div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;<span class="comment">     * INITs are blocked while CPU is in specific states (SMM, VMX root</span></div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;<span class="comment">     * mode, SVM with GIF=0), while SIPIs are dropped if the CPU isn&#39;t in</span></div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;<span class="comment">     * wait-for-SIPI (WFS).</span></div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a58bae1ee856b1b5c5c44903c9f83a4f7">kvm_apic_init_sipi_allowed</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>)) {</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;        WARN_ON_ONCE(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.mp_state == KVM_MP_STATE_INIT_RECEIVED);</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;        clear_bit(<a class="code" href="lapic_8h.html#af7a4bf414bb99391b6c9e674d87cdc41">KVM_APIC_SIPI</a>, &amp;apic-&gt;<a class="code" href="structkvm__lapic.html#ade63c790c3a1363b7af1853b98bacf1a">pending_events</a>);</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;    }</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160; </div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;    <span class="keywordflow">if</span> (test_and_clear_bit(<a class="code" href="lapic_8h.html#a3b7d7d35c001fcefc23520569c5d81d7">KVM_APIC_INIT</a>, &amp;apic-&gt;<a class="code" href="structkvm__lapic.html#ade63c790c3a1363b7af1853b98bacf1a">pending_events</a>)) {</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;        <a class="code" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91">kvm_vcpu_reset</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="x86_8c.html#af6eb1db390415efc982dfd7701f0e619">kvm_vcpu_is_bsp</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>))</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;            <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.mp_state = KVM_MP_STATE_RUNNABLE;</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;            <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.mp_state = KVM_MP_STATE_INIT_RECEIVED;</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;    }</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;    <span class="keywordflow">if</span> (test_and_clear_bit(<a class="code" href="lapic_8h.html#af7a4bf414bb99391b6c9e674d87cdc41">KVM_APIC_SIPI</a>, &amp;apic-&gt;<a class="code" href="structkvm__lapic.html#ade63c790c3a1363b7af1853b98bacf1a">pending_events</a>)) {</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.mp_state == KVM_MP_STATE_INIT_RECEIVED) {</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;            <span class="comment">/* evaluate pending_events before reading the vector */</span></div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;            smp_rmb();</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;            <a class="code" href="structkvm__lapic.html#a9122fb8adbd131d159cb064fe6a3f01e">sipi_vector</a> = apic-&gt;<a class="code" href="structkvm__lapic.html#a9122fb8adbd131d159cb064fe6a3f01e">sipi_vector</a>;</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;            static_call(kvm_x86_vcpu_deliver_sipi_vector)(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, <a class="code" href="structkvm__lapic.html#a9122fb8adbd131d159cb064fe6a3f01e">sipi_vector</a>);</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;            <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.mp_state = KVM_MP_STATE_RUNNABLE;</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;        }</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;    }</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;}</div>
<div class="ttc" id="akvm__cache__regs_8h_html_afbcfc413ceedb460734eb5fd7c5c4fbc"><div class="ttname"><a href="kvm__cache__regs_8h.html#afbcfc413ceedb460734eb5fd7c5c4fbc">is_guest_mode</a></div><div class="ttdeci">static bool is_guest_mode(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__cache__regs_8h_source.html#l00226">kvm_cache_regs.h:226</a></div></div>
<div class="ttc" id="alapic_8h_html_a106127db5f69d94e5ea9d6d2982c23fd"><div class="ttname"><a href="lapic_8h.html#a106127db5f69d94e5ea9d6d2982c23fd">kvm_apic_has_pending_init_or_sipi</a></div><div class="ttdeci">static bool kvm_apic_has_pending_init_or_sipi(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00231">lapic.h:231</a></div></div>
<div class="ttc" id="alapic_8h_html_a58bae1ee856b1b5c5c44903c9f83a4f7"><div class="ttname"><a href="lapic_8h.html#a58bae1ee856b1b5c5c44903c9f83a4f7">kvm_apic_init_sipi_allowed</a></div><div class="ttdeci">static bool kvm_apic_init_sipi_allowed(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00236">lapic.h:236</a></div></div>
<div class="ttc" id="ax86_8c_html_a2694456104c02a7204796d89d13a1e91"><div class="ttname"><a href="x86_8c.html#a2694456104c02a7204796d89d13a1e91">kvm_vcpu_reset</a></div><div class="ttdeci">void kvm_vcpu_reset(struct kvm_vcpu *vcpu, bool init_event)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l12224">x86.c:12224</a></div></div>
<div class="ttc" id="ax86_8c_html_a52623517d65c58a92d84f08015198d20"><div class="ttname"><a href="x86_8c.html#a52623517d65c58a92d84f08015198d20">kvm_check_nested_events</a></div><div class="ttdeci">int kvm_check_nested_events(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l10197">x86.c:10197</a></div></div>
<div class="ttc" id="ax86_8c_html_af6eb1db390415efc982dfd7701f0e619"><div class="ttname"><a href="x86_8c.html#af6eb1db390415efc982dfd7701f0e619">kvm_vcpu_is_bsp</a></div><div class="ttdeci">bool kvm_vcpu_is_bsp(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l12493">x86.c:12493</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a27836a2bcd51ebcfe2ca478e9ad7aa04_cgraph.png" border="0" usemap="#alapic_8c_a27836a2bcd51ebcfe2ca478e9ad7aa04_cgraph" alt=""/></div>
<map name="alapic_8c_a27836a2bcd51ebcfe2ca478e9ad7aa04_cgraph" id="alapic_8c_a27836a2bcd51ebcfe2ca478e9ad7aa04_cgraph">
<area shape="rect" title=" " alt="" coords="5,653,192,679"/>
<area shape="rect" href="kvm__cache__regs_8h.html#afbcfc413ceedb460734eb5fd7c5c4fbc" title=" " alt="" coords="524,175,644,202"/>
<area shape="rect" href="lapic_8h.html#a106127db5f69d94e5ea9d6d2982c23fd" title=" " alt="" coords="252,99,427,140"/>
<area shape="rect" href="lapic_8h.html#a58bae1ee856b1b5c5c44903c9f83a4f7" title=" " alt="" coords="268,421,411,463"/>
<area shape="rect" href="x86_8c.html#a52623517d65c58a92d84f08015198d20" title=" " alt="" coords="240,733,439,759"/>
<area shape="rect" href="x86_8c.html#af6eb1db390415efc982dfd7701f0e619" title=" " alt="" coords="271,783,408,810"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="275,682,404,709"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1003,87,1122,114"/>
<area shape="rect" href="smm_8h.html#aa0d6bb14bef67edc441fccd36d205a67" title=" " alt="" coords="547,226,621,253"/>
<area shape="rect" href="x86_8c.html#ad0df6b04ae08eb6eec89da2d81e465cd" title=" " alt="" coords="522,783,646,810"/>
<area shape="rect" href="x86_8c.html#a8543429a9ca5c6d3d88560ccd84bbccd" title=" " alt="" coords="525,834,643,861"/>
<area shape="rect" href="x86_8c.html#ad850a917f349195334a4ef07b53ca379" title=" " alt="" coords="487,885,681,911"/>
<area shape="rect" href="async__pf_8c.html#ad351bddfe80f107dfc95c6ab2768fe4f" title=" " alt="" coords="507,936,661,977"/>
<area shape="rect" href="x86_8h.html#acdc826b0cd2ce8b958a826c8faa306b4" title=" " alt="" coords="503,1001,665,1043"/>
<area shape="rect" href="x86_8h.html#a9dbf3d5bc7a0735443e0e21e00802160" title=" " alt="" coords="507,1067,661,1108"/>
<area shape="rect" href="cpuid_8c.html#aae0475609eefc48bb151ef5a631670c0" title=" " alt="" coords="501,1133,667,1159"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="519,277,649,303"/>
<area shape="rect" href="x86_8c.html#ab8771c02486ef5edb9fe0008df56ce1a" title=" " alt="" coords="511,1183,657,1210"/>
<area shape="rect" href="x86_8c.html#a5a8141aa63a4bf45916d2adeab6504a1" title=" " alt="" coords="505,1234,663,1261"/>
<area shape="rect" href="mmu_8c.html#a56f1568115a55fdacc188e9b41159b8f" title=" " alt="" coords="490,1285,678,1311"/>
<area shape="rect" href="x86_8h.html#a5523aac5838b664e939f6560ae882d9e" title=" " alt="" coords="505,1335,663,1362"/>
<area shape="rect" href="x86_8c.html#aca7d72d338b3f1e73445d7b2ed0b1673" title=" " alt="" coords="509,1386,659,1413"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a66188c5384cbd688acd880f8de16fbff" title=" " alt="" coords="527,327,641,354"/>
<area shape="rect" href="kvm__cache__regs_8h.html#aa80de2ba11d877ef825788b0c9768378" title=" " alt="" coords="527,378,641,405"/>
<area shape="rect" href="kvm__cache__regs_8h.html#ad479d598f0b5de90bd6062237ccb9eba" title=" " alt="" coords="527,429,641,455"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a0f6830d8a03ec49d8ac457e2a9c1d687" title=" " alt="" coords="491,479,677,506"/>
<area shape="rect" href="kvm__cache__regs_8h.html#aa70071fd3a98f236b0b57a30cbec124f" title=" " alt="" coords="527,530,641,557"/>
<area shape="rect" href="x86_8c.html#a12826c3f941e4dbf381d4d085ce42110" title=" " alt="" coords="523,581,645,607"/>
<area shape="rect" href="x86_8c.html#a7f55b680840b47f6503d94801f44f2d0" title=" " alt="" coords="507,631,661,658"/>
<area shape="rect" href="x86_8c.html#afed36c545d27cca59caddf31fdfd054a" title=" " alt="" coords="519,682,649,709"/>
<area shape="rect" href="x86_8c.html#a2ed72da9144cd3c6d136a2ce6e1a76cb" title=" " alt="" coords="521,733,647,759"/>
<area shape="rect" href="cpuid_8h.html#ad8c2a90f2f099af1d7ca23750d9d2eb9" title=" " alt="" coords="997,315,1128,342"/>
<area shape="rect" href="cpuid_8h.html#aa35dee13971a1366be933e974552a02d" title=" " alt="" coords="757,721,912,747"/>
<area shape="rect" href="x86_8h.html#af9a5d53e18d888ed043578916e51cc55" title=" " alt="" coords="743,822,927,849"/>
<area shape="rect" href="x86_8h.html#af360aa7bd1f33ab25089b12431f11773" title=" " alt="" coords="988,797,1137,823"/>
<area shape="rect" href="cpuid_8c.html#a537512099e11c7ab0553aeae5e38d9ea" title=" " alt="" coords="733,873,936,899"/>
<area shape="rect" href="async__pf_8c.html#a5b03475159778ff1b6a78dbbfc913a01" title=" " alt="" coords="758,936,911,977"/>
<area shape="rect" href="cpuid_8c.html#a7220f0f9a6d0047aef7619e272fa9518" title=" " alt="" coords="766,1133,903,1159"/>
<area shape="rect" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1" title=" " alt="" coords="729,87,940,114"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="779,138,890,165"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="769,645,900,671"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="990,594,1135,621"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="770,239,899,266"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="763,290,906,317"/>
<area shape="rect" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4" title=" " alt="" coords="766,341,903,367"/>
<area shape="rect" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554" title=" " alt="" coords="767,391,903,418"/>
<area shape="rect" href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf" title=" " alt="" coords="751,189,918,215"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="748,442,921,469"/>
<area shape="rect" href="lapic_8c.html#a5468339c2df08ca538b77d4d48915c35" title=" " alt="" coords="745,493,924,519"/>
<area shape="rect" href="x86_8h.html#adf8330176a8805826ed4711a51ce93cf" title=" " alt="" coords="751,37,918,63"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a27836a2bcd51ebcfe2ca478e9ad7aa04_icgraph.png" border="0" usemap="#alapic_8c_a27836a2bcd51ebcfe2ca478e9ad7aa04_icgraph" alt=""/></div>
<map name="alapic_8c_a27836a2bcd51ebcfe2ca478e9ad7aa04_icgraph" id="alapic_8c_a27836a2bcd51ebcfe2ca478e9ad7aa04_icgraph">
<area shape="rect" title=" " alt="" coords="804,97,991,123"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="412,5,571,47"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,71,364,98"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="640,122,735,149"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="619,173,756,199"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,46,129,73"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="451,122,532,149"/>
</map>
</div>

</div>
</div>
<a id="a1f4df169625f9c4c2cb06f7443698af4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f4df169625f9c4c2cb06f7443698af4">&#9670;&nbsp;</a></span>kvm_apic_accept_pic_intr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_apic_accept_pic_intr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02872">2872</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;{</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;    u32 lvt0 = <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(vcpu-&gt;arch.apic, APIC_LVT0);</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160; </div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4">kvm_apic_hw_enabled</a>(vcpu-&gt;arch.apic))</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;    <span class="keywordflow">if</span> ((lvt0 &amp; APIC_LVT_MASKED) == 0 &amp;&amp;</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;        GET_APIC_DELIVERY_MODE(lvt0) == APIC_MODE_EXTINT)</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a1f4df169625f9c4c2cb06f7443698af4_cgraph.png" border="0" usemap="#alapic_8c_a1f4df169625f9c4c2cb06f7443698af4_cgraph" alt=""/></div>
<map name="alapic_8c_a1f4df169625f9c4c2cb06f7443698af4_cgraph" id="alapic_8c_a1f4df169625f9c4c2cb06f7443698af4_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,196,57"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="244,5,415,32"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="257,56,402,83"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="463,56,621,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a1f4df169625f9c4c2cb06f7443698af4_icgraph.png" border="0" usemap="#alapic_8c_a1f4df169625f9c4c2cb06f7443698af4_icgraph" alt=""/></div>
<map name="alapic_8c_a1f4df169625f9c4c2cb06f7443698af4_icgraph" id="alapic_8c_a1f4df169625f9c4c2cb06f7443698af4_icgraph">
<area shape="rect" title=" " alt="" coords="2232,354,2423,381"/>
<area shape="rect" href="x86_8c.html#aebdfa8be7e8542163f8396cf93a82398" title=" " alt="" coords="1179,151,1367,178"/>
<area shape="rect" href="irq_8c.html#a0ba50d6865653a9d307102d8f0b36630" title=" " alt="" coords="1445,335,1601,362"/>
<area shape="rect" href="i8259_8c.html#a20f0eb17c76875b81e91fd32b0badc04" title=" " alt="" coords="1697,481,1814,507"/>
<area shape="rect" href="i8259_8c.html#a1f534b69587aeb30f8853f3eb4a35071" title=" " alt="" coords="2093,810,2184,837"/>
<area shape="rect" href="x86_8c.html#a05909279b3ddd330600a9c5d506c85da" title=" " alt="" coords="460,5,619,47"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="471,71,608,98"/>
<area shape="rect" href="x86_8c.html#aced999ac2c84f5838ddf0279cbf4c8e7" title=" " alt="" coords="240,13,392,39"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="275,63,357,90"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="5,38,192,65"/>
<area shape="rect" href="irq_8c.html#a0fe12d1697f3fa0b54c4a62c7be020e9" title=" " alt="" coords="1196,506,1351,533"/>
<area shape="rect" href="irq_8c.html#a82ee83566d2724a298b67f23f481976b" title=" " alt="" coords="1168,335,1379,362"/>
<area shape="rect" href="irq_8c.html#ae3151f072a1bb4a732ee3854ab6cf619" title=" " alt="" coords="1186,443,1361,470"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="935,586,1107,613"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="695,469,866,511"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="703,586,858,613"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="440,561,639,587"/>
<area shape="rect" href="svm_8c.html#a5c26f1ceaa6cc778d986bd33629dc539" title=" " alt="" coords="971,266,1072,293"/>
<area shape="rect" href="svm_8c.html#a4a2beb03d1ef1d9e803c22570b5806d1" title=" " alt="" coords="715,114,846,141"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="691,165,870,191"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="462,342,617,369"/>
<area shape="rect" href="svm_8c.html#a0a2c47b46c5f4c14c1ae6a64119bcb60" title=" " alt="" coords="715,215,846,242"/>
<area shape="rect" href="svm_8c.html#a5df90c8772700a60441f2ba19472f726" title=" " alt="" coords="725,317,836,343"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="697,266,865,293"/>
<area shape="rect" href="x86_8c.html#a54ec69b24c80207e4e6122994db0a466" title=" " alt="" coords="936,418,1107,445"/>
<area shape="rect" href="svm_2nested_8c.html#a3286f29b650004d599595557d310136e" title=" " alt="" coords="923,469,1120,495"/>
<area shape="rect" href="x86_8c.html#a951bd40e58d87204d565c6cb5fc664e6" title=" " alt="" coords="687,418,875,445"/>
<area shape="rect" href="i8259_8c.html#a23bf40906f1f0a0a84ce4af0956a8b2a" title=" " alt="" coords="1459,633,1586,659"/>
<area shape="rect" href="i8259_8c.html#ad3cc418e9d82e9cca43e01425f76b366" title=" " alt="" coords="1221,781,1326,807"/>
<area shape="rect" href="i8259_8c.html#a1dc9bd64afa719e7b8253ee3db6fa85b" title=" " alt="" coords="953,730,1089,757"/>
<area shape="rect" href="i8259_8c.html#af278e56bd6082ee3f6573cf2e4f23543" title=" " alt="" coords="942,781,1101,807"/>
<area shape="rect" href="i8259_8c.html#a64b171826283830f6a0b3ed866b7931c" title=" " alt="" coords="948,831,1095,858"/>
<area shape="rect" href="i8259_8c.html#a4fef735273cc243ab0c60985526cf753" title=" " alt="" coords="1899,937,2038,963"/>
<area shape="rect" href="i8259_8c.html#a6f84274a6b9f1ae6381e9e5f413dd481" title=" " alt="" coords="1454,506,1591,533"/>
<area shape="rect" href="i8259_8c.html#a1488ed2670af0e636f7384f69e1894a9" title=" " alt="" coords="1905,1013,2033,1039"/>
<area shape="rect" href="i8259_8c.html#a6620b725f8a47ecc7341e68ca3660df5" title=" " alt="" coords="1892,886,2045,913"/>
<area shape="rect" href="i8259_8c.html#a72eab34ac8b4a80698a92f06b8afe71e" title=" " alt="" coords="1917,582,2020,609"/>
<area shape="rect" href="i8259_8c.html#a1484dfc37fa586b115d6645c7dcc88b2" title=" " alt="" coords="1918,759,2019,786"/>
<area shape="rect" href="irq__comm_8c.html#affd624d06afb4fc277fb7a08e06bd942" title=" " alt="" coords="1667,937,1844,963"/>
<area shape="rect" href="i8254_8c.html#a13a38debbd4e494ffd488ef8abb5406c" title=" " alt="" coords="1461,937,1584,963"/>
<area shape="rect" href="i8254_8c.html#a2a7ca7f5194b378ba7f0ae7a38cc26ba" title=" " alt="" coords="1469,987,1577,1014"/>
<area shape="rect" href="x86_8c.html#a10224987f77e7370dd9f2b80352544ab" title=" " alt="" coords="1199,911,1348,938"/>
<area shape="rect" href="irq__comm_8c.html#a1a4786be0e9713da805fb63743a7f340" title=" " alt="" coords="1691,1013,1819,1039"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="1437,1038,1609,1065"/>
<area shape="rect" href="x86_8c.html#a9c81b1b4617fffe8115b748bf5f13860" title=" " alt="" coords="1427,886,1619,913"/>
<area shape="rect" href="i8259_8c.html#a1ba411d40431f30cb5876e8a911e65a0" title=" " alt="" coords="1711,531,1799,558"/>
<area shape="rect" href="i8259_8c.html#adf97ac474f6610c461ba9cfad24f315a" title=" " alt="" coords="1701,582,1809,609"/>
<area shape="rect" href="i8259_8c.html#a90b8b13ef894f381c91ad0a92ef4b2c9" title=" " alt="" coords="1689,683,1821,710"/>
<area shape="rect" href="i8259_8c.html#ac8a7faf6a5b5c72ce0ecf20f7beda6ba" title=" " alt="" coords="1678,734,1833,761"/>
<area shape="rect" href="i8259_8c.html#a6dcc0815ffa7a5cc6aa28327488d8f82" title=" " alt="" coords="1684,785,1827,811"/>
</map>
</div>

</div>
</div>
<a id="a200be826b3634c1b5a377464f35d540f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a200be826b3634c1b5a377464f35d540f">&#9670;&nbsp;</a></span>kvm_apic_after_set_mcg_cap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_apic_after_set_mcg_cap </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00596">596</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;{</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordtype">int</span> nr_lvt_entries = <a class="code" href="lapic_8c.html#a6426046939a33f96b6df7b185cafb171">kvm_apic_calc_nr_lvt_entries</a>(vcpu);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>) || <a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a> == apic-&gt;<a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a>)</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="comment">/* Initialize/mask any &quot;new&quot; LVT entries. */</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keywordflow">for</span> (i = apic-&gt;<a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a>; i &lt; <a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a>; i++)</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, <a class="code" href="lapic_8h.html#ae54f52b3c96453d38d44e36bc8d3c00c">APIC_LVTx</a>(i), APIC_LVT_MASKED);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a> = <a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160; </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="comment">/* The number of LVT entries is reflected in the version register. */</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <a class="code" href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf">kvm_apic_set_version</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a6426046939a33f96b6df7b185cafb171"><div class="ttname"><a href="lapic_8c.html#a6426046939a33f96b6df7b185cafb171">kvm_apic_calc_nr_lvt_entries</a></div><div class="ttdeci">static int kvm_apic_calc_nr_lvt_entries(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00568">lapic.c:568</a></div></div>
<div class="ttc" id="alapic_8c_html_aaa6716cc0b30bec513d223fbfdecfdcf"><div class="ttname"><a href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf">kvm_apic_set_version</a></div><div class="ttdeci">void kvm_apic_set_version(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00573">lapic.c:573</a></div></div>
<div class="ttc" id="alapic_8h_html_ae54f52b3c96453d38d44e36bc8d3c00c"><div class="ttname"><a href="lapic_8h.html#ae54f52b3c96453d38d44e36bc8d3c00c">APIC_LVTx</a></div><div class="ttdeci">#define APIC_LVTx(x)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00044">lapic.h:44</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_ae2b24a1af6e2a89bda594f08d3382267"><div class="ttname"><a href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">kvm_lapic::nr_lvt_entries</a></div><div class="ttdeci">int nr_lvt_entries</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00083">lapic.h:83</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a200be826b3634c1b5a377464f35d540f_cgraph.png" border="0" usemap="#alapic_8c_a200be826b3634c1b5a377464f35d540f_cgraph" alt=""/></div>
<map name="alapic_8c_a200be826b3634c1b5a377464f35d540f_cgraph" id="alapic_8c_a200be826b3634c1b5a377464f35d540f_cgraph">
<area shape="rect" title=" " alt="" coords="5,162,155,203"/>
<area shape="rect" href="lapic_8c.html#a6426046939a33f96b6df7b185cafb171" title=" " alt="" coords="205,78,367,119"/>
<area shape="rect" href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf" title=" " alt="" coords="203,144,369,171"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="417,195,561,221"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="430,245,549,272"/>
<area shape="rect" href="cpuid_8h.html#ad8c2a90f2f099af1d7ca23750d9d2eb9" title=" " alt="" coords="424,93,555,120"/>
<area shape="rect" href="ioapic_8h.html#a5efb8a822bd7119cfc8db075f12bf452" title=" " alt="" coords="426,144,553,171"/>
<area shape="rect" href="reverse__cpuid_8h.html#aeac4cdaa1c8b53f46ea791f355b1d08c" title=" " alt="" coords="873,5,980,32"/>
<area shape="rect" href="cpuid_8h.html#af2af2645f203b5d9bad2088af0da5c1e" title=" " alt="" coords="609,93,795,120"/>
<area shape="rect" href="reverse__cpuid_8h.html#a76ac51b62ef170b755204cb8b958e585" title=" " alt="" coords="1265,56,1413,83"/>
<area shape="rect" href="reverse__cpuid_8h.html#ae10c1644e90cb8443e5a32554acfd700" title=" " alt="" coords="1059,56,1217,83"/>
<area shape="rect" href="reverse__cpuid_8h.html#adf3299d46978c685ba9b46ebb1536680" title=" " alt="" coords="843,56,1011,83"/>
<area shape="rect" href="cpuid_8h.html#a638557b30255883157acafa55a351d0d" title=" " alt="" coords="844,158,1009,199"/>
<area shape="rect" href="reverse__cpuid_8h.html#a3f7e53c68e5610be44d760fd4854f892" title=" " alt="" coords="855,107,998,133"/>
<area shape="rect" href="cpuid_8c.html#a7220f0f9a6d0047aef7619e272fa9518" title=" " alt="" coords="1069,165,1207,192"/>
<area shape="rect" href="reverse__cpuid_8h.html#a8f6dc89865c6af98e621e1ddcf401cae" title=" " alt="" coords="1081,107,1195,133"/>
<area shape="rect" href="irq_8h.html#aeedc8b3b9e709414b2db2436224b75e8" title=" " alt="" coords="645,144,759,171"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="623,195,781,221"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a200be826b3634c1b5a377464f35d540f_icgraph.png" border="0" usemap="#alapic_8c_a200be826b3634c1b5a377464f35d540f_icgraph" alt=""/></div>
<map name="alapic_8c_a200be826b3634c1b5a377464f35d540f_icgraph" id="alapic_8c_a200be826b3634c1b5a377464f35d540f_icgraph">
<area shape="rect" title=" " alt="" coords="587,5,736,47"/>
<area shape="rect" href="x86_8c.html#a10dfde66dc94e352514570cc4a2beaa2" title=" " alt="" coords="384,5,539,47"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,13,336,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="a98bde25094c754b30e796357ba643ab0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98bde25094c754b30e796357ba643ab0">&#9670;&nbsp;</a></span>kvm_apic_broadcast()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_apic_broadcast </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>mda</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00987">987</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;{</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="keywordflow">return</span> mda == (<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic) ?</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;            <a class="code" href="lapic_8h.html#a481da2cdd19d996fb0378476375133c6">X2APIC_BROADCAST</a> : <a class="code" href="lapic_8h.html#a8e368c4d317e2f3289d8287fc28c4d19">APIC_BROADCAST</a>);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;}</div>
<div class="ttc" id="alapic_8h_html_a481da2cdd19d996fb0378476375133c6"><div class="ttname"><a href="lapic_8h.html#a481da2cdd19d996fb0378476375133c6">X2APIC_BROADCAST</a></div><div class="ttdeci">#define X2APIC_BROADCAST</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00023">lapic.h:23</a></div></div>
<div class="ttc" id="alapic_8h_html_a8e368c4d317e2f3289d8287fc28c4d19"><div class="ttname"><a href="lapic_8h.html#a8e368c4d317e2f3289d8287fc28c4d19">APIC_BROADCAST</a></div><div class="ttdeci">#define APIC_BROADCAST</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00022">lapic.h:22</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a98bde25094c754b30e796357ba643ab0_cgraph.png" border="0" usemap="#alapic_8c_a98bde25094c754b30e796357ba643ab0_cgraph" alt=""/></div>
<map name="alapic_8c_a98bde25094c754b30e796357ba643ab0_cgraph" id="alapic_8c_a98bde25094c754b30e796357ba643ab0_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,161,32"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="209,5,352,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a98bde25094c754b30e796357ba643ab0_icgraph.png" border="0" usemap="#alapic_8c_a98bde25094c754b30e796357ba643ab0_icgraph" alt=""/></div>
<map name="alapic_8c_a98bde25094c754b30e796357ba643ab0_icgraph" id="alapic_8c_a98bde25094c754b30e796357ba643ab0_icgraph">
<area shape="rect" title=" " alt="" coords="2468,187,2624,213"/>
<area shape="rect" href="lapic_8c.html#a870119cb74033f360164df90029af75a" title=" " alt="" coords="2195,161,2414,188"/>
<area shape="rect" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6" title=" " alt="" coords="2189,212,2420,239"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="1973,187,2141,213"/>
<area shape="rect" href="ioapic_8c.html#aca4e6c938829fb401b5c01cba3bd19b2" title=" " alt="" coords="1749,234,1913,275"/>
<area shape="rect" href="ioapic_8c.html#a3ec3324d9c7d9168d100c79fc7c19b33" title=" " alt="" coords="793,219,967,245"/>
<area shape="rect" href="avic_8c.html#ad9345a779111a59de8fa4110106c3adf" title=" " alt="" coords="1743,872,1918,899"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="1751,342,1910,383"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="1739,107,1922,133"/>
<area shape="rect" href="ioapic_8c.html#acaaa84ad163291aa716c59fa3bec3715" title=" " alt="" coords="1743,5,1918,32"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1736,669,1925,696"/>
<area shape="rect" href="ioapic_8h.html#a049de3e03383dab21c2cb6c3033e66ae" title=" " alt="" coords="1739,56,1922,83"/>
<area shape="rect" href="ioapic_8c.html#a6a7d0d8b3a3717172c57ed1916318952" title=" " alt="" coords="1525,259,1688,301"/>
<area shape="rect" href="ioapic_8c.html#a6c0258d75d3c40d5674a574997bdd453" title=" " alt="" coords="1525,325,1688,366"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="421,273,584,300"/>
<area shape="rect" href="ioapic_8c.html#a1d24315dec2401b4c45b224469c7379d" title=" " alt="" coords="1301,209,1447,250"/>
<area shape="rect" href="ioapic_8c.html#a477f1b98bf8d9dfcd1e51c743d79ac47" title=" " alt="" coords="237,273,361,300"/>
<area shape="rect" href="ioapic_8c.html#aa590f4d1416bf84560a4e9693c638f55" title=" " alt="" coords="1074,219,1165,245"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="792,383,968,409"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="632,223,744,249"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="429,223,577,249"/>
<area shape="rect" href="irq__comm_8c.html#ae12bd4085acdb92be18af95ac983d5a5" title=" " alt="" coords="225,223,373,249"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="5,433,177,460"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1298,332,1450,359"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1044,325,1195,366"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="804,839,956,881"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="1295,391,1453,417"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="1046,391,1193,417"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="1541,56,1673,83"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="1531,107,1682,133"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="1299,56,1449,83"/>
<area shape="rect" href="x86_8c.html#a8aac590d2b896fcad86c5a2971164c1c" title=" " alt="" coords="1539,5,1675,32"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="1305,5,1443,32"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="1079,5,1160,32"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="1549,492,1664,519"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="1533,771,1680,797"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="1526,695,1687,721"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1552,644,1661,671"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="1553,897,1660,924"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="1271,543,1477,569"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="1016,441,1223,468"/>
<area shape="rect" href="ioapic_8c.html#a21c528e901ef596bba3f882ed5ac9597" title=" " alt="" coords="1057,543,1182,569"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1295,796,1453,823"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="1292,847,1456,873"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1052,796,1187,823"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1022,847,1217,873"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="1285,695,1463,721"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="1277,593,1471,620"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="1291,897,1457,924"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="1303,948,1445,975"/>
</map>
</div>

</div>
</div>
<a id="a6426046939a33f96b6df7b185cafb171"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6426046939a33f96b6df7b185cafb171">&#9670;&nbsp;</a></span>kvm_apic_calc_nr_lvt_entries()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kvm_apic_calc_nr_lvt_entries </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00568">568</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;{</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdaa2e7ce18b246d7ad6fe039d93d40dd06">KVM_APIC_MAX_NR_LVT_ENTRIES</a> - !(vcpu-&gt;arch.mcg_cap &amp; MCG_CMCI_P);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a6426046939a33f96b6df7b185cafb171_icgraph.png" border="0" usemap="#alapic_8c_a6426046939a33f96b6df7b185cafb171_icgraph" alt=""/></div>
<map name="alapic_8c_a6426046939a33f96b6df7b185cafb171_icgraph" id="alapic_8c_a6426046939a33f96b6df7b185cafb171_icgraph">
<area shape="rect" title=" " alt="" coords="843,35,1005,76"/>
<area shape="rect" href="lapic_8c.html#a200be826b3634c1b5a377464f35d540f" title=" " alt="" coords="645,5,795,47"/>
<area shape="rect" href="lapic_8c.html#a1d54fd094860a96cad1af17c18f6904c" title=" " alt="" coords="651,71,789,98"/>
<area shape="rect" href="x86_8c.html#a10dfde66dc94e352514570cc4a2beaa2" title=" " alt="" coords="434,5,589,47"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="198,13,357,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="425,71,597,98"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="177,71,377,98"/>
</map>
</div>

</div>
</div>
<a id="a8447cf7bc387797722507fa915cf735f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8447cf7bc387797722507fa915cf735f">&#9670;&nbsp;</a></span>kvm_apic_calc_x2apic_ldr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u32 kvm_apic_calc_x2apic_ldr </td>
          <td>(</td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00166">166</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;{</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">return</span> ((<span class="keywordtype">id</span> &gt;&gt; 4) &lt;&lt; 16) | (1 &lt;&lt; (<span class="keywordtype">id</span> &amp; 0xf));</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a8447cf7bc387797722507fa915cf735f_icgraph.png" border="0" usemap="#alapic_8c_a8447cf7bc387797722507fa915cf735f_icgraph" alt=""/></div>
<map name="alapic_8c_a8447cf7bc387797722507fa915cf735f_icgraph" id="alapic_8c_a8447cf7bc387797722507fa915cf735f_icgraph">
<area shape="rect" title=" " alt="" coords="2101,193,2293,220"/>
<area shape="rect" href="lapic_8c.html#a22d25ec6370d0efd4c569b7317d28098" title=" " alt="" coords="1855,193,2036,220"/>
<area shape="rect" href="lapic_8c.html#a5862d5df95ddd956a652f1dd3f319706" title=" " alt="" coords="1607,142,1771,169"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="1837,244,2053,270"/>
<area shape="rect" href="lapic_8c.html#a8d747385873e52f47e85179c21521e73" title=" " alt="" coords="1612,193,1767,220"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1387,142,1539,169"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1398,244,1527,270"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="1387,193,1538,220"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1163,98,1314,139"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="678,25,837,52"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,72,129,98"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1174,266,1303,293"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="906,228,1093,254"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="913,329,1085,356"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="914,278,1085,305"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,224,350,266"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,118,364,145"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="710,228,805,254"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="689,177,826,204"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="470,177,551,204"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="657,329,857,356"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="1157,177,1320,204"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="183,598,358,625"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="708,76,807,102"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="946,126,1053,153"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,43,350,84"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="467,76,554,102"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="27,548,108,574"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="13,598,122,625"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="12,649,123,676"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="1386,45,1539,72"/>
<area shape="rect" href="x86_8c.html#aca5ab82fb669f6a99e011293efed0d5d" title=" " alt="" coords="1163,26,1315,67"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="1589,244,1789,270"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1384,598,1541,625"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1171,700,1306,726"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1141,522,1336,549"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1158,598,1319,625"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1167,649,1310,676"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="923,431,1075,472"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="910,497,1089,524"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="929,548,1069,574"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="678,490,837,531"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="905,598,1093,625"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="424,649,597,676"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="691,598,824,625"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="412,598,609,625"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="924,700,1075,726"/>
</map>
</div>

</div>
</div>
<a id="ad608730f208932f64d2c98c762fce85c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad608730f208932f64d2c98c762fce85c">&#9670;&nbsp;</a></span>kvm_apic_clear_irr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_apic_clear_irr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00738">738</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;{</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <a class="code" href="lapic_8c.html#ad2b5e2187414c65e1a5876e641fee3fc">apic_clear_irr</a>(vec, vcpu-&gt;arch.apic);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_ad2b5e2187414c65e1a5876e641fee3fc"><div class="ttname"><a href="lapic_8c.html#ad2b5e2187414c65e1a5876e641fee3fc">apic_clear_irr</a></div><div class="ttdeci">static void apic_clear_irr(int vec, struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00723">lapic.c:723</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ad608730f208932f64d2c98c762fce85c_cgraph.png" border="0" usemap="#alapic_8c_ad608730f208932f64d2c98c762fce85c_cgraph" alt=""/></div>
<map name="alapic_8c_ad608730f208932f64d2c98c762fce85c_cgraph" id="alapic_8c_ad608730f208932f64d2c98c762fce85c_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,151,83"/>
<area shape="rect" href="lapic_8c.html#ad2b5e2187414c65e1a5876e641fee3fc" title=" " alt="" coords="199,56,308,83"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="366,5,522,32"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="580,31,700,57"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="356,107,532,133"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="748,31,897,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ad608730f208932f64d2c98c762fce85c_icgraph.png" border="0" usemap="#alapic_8c_ad608730f208932f64d2c98c762fce85c_icgraph" alt=""/></div>
<map name="alapic_8c_ad608730f208932f64d2c98c762fce85c_icgraph" id="alapic_8c_ad608730f208932f64d2c98c762fce85c_icgraph">
<area shape="rect" title=" " alt="" coords="768,31,913,57"/>
<area shape="rect" href="vmx_2nested_8c.html#add1e82c32385142c0fca04a1db8cbc3a" title=" " alt="" coords="589,31,720,57"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fecee9010894e3a1513a0924e24dd6" title=" " alt="" coords="401,5,539,32"/>
<area shape="rect" href="vmx_2nested_8c.html#a23e3de8c964e87404eea818be6f70154" title=" " alt="" coords="399,56,541,83"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="180,23,351,65"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="5,31,132,57"/>
</map>
</div>

</div>
</div>
<a id="a47d52843df792ef8e7bffdfb66a3b40b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47d52843df792ef8e7bffdfb66a3b40b">&#9670;&nbsp;</a></span>kvm_apic_compare_prio()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_apic_compare_prio </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01432">1432</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;{</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="keywordflow">return</span> vcpu1-&gt;arch.apic_arb_prio - vcpu2-&gt;arch.apic_arb_prio;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a47d52843df792ef8e7bffdfb66a3b40b_icgraph.png" border="0" usemap="#alapic_8c_a47d52843df792ef8e7bffdfb66a3b40b_icgraph" alt=""/></div>
<map name="alapic_8c_a47d52843df792ef8e7bffdfb66a3b40b_icgraph" id="alapic_8c_a47d52843df792ef8e7bffdfb66a3b40b_icgraph">
<area shape="rect" title=" " alt="" coords="2064,516,2245,543"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="1832,538,2016,579"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1388,455,1577,481"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="1625,506,1784,547"/>
<area shape="rect" href="lapic_8c.html#a8620b1c89f8cf017f7827024fc95ac92" title=" " alt="" coords="1633,571,1777,613"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="1627,658,1782,699"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="919,107,1077,133"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="676,81,823,108"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="1391,579,1574,605"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="1179,627,1311,653"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="1169,576,1320,603"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="923,639,1073,665"/>
<area shape="rect" href="irq__comm_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="897,795,1099,821"/>
<area shape="rect" href="xen_8c.html#a7ba53f4f869b74569192380f1adfd40c" title=" " alt="" coords="1401,678,1564,719"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="1187,208,1302,235"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="1171,460,1318,487"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="1164,521,1325,548"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1190,385,1299,412"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="1191,56,1298,83"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="942,259,1054,285"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="895,157,1101,184"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="895,208,1101,235"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="668,233,831,260"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="675,284,823,311"/>
<area shape="rect" href="ioapic_8c.html#a477f1b98bf8d9dfcd1e51c743d79ac47" title=" " alt="" coords="453,233,577,260"/>
<area shape="rect" href="irq__comm_8c.html#ae12bd4085acdb92be18af95ac983d5a5" title=" " alt="" coords="441,284,589,311"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="205,309,377,336"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="5,309,157,336"/>
<area shape="rect" href="ioapic_8c.html#a21c528e901ef596bba3f882ed5ac9597" title=" " alt="" coords="687,132,812,159"/>
<area shape="rect" href="x86_8c.html#a10224987f77e7370dd9f2b80352544ab" title=" " alt="" coords="440,132,589,159"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="661,183,837,209"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="433,183,596,209"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="439,429,591,470"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="919,487,1077,513"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="916,537,1080,564"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="682,436,817,463"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="652,537,847,564"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="669,588,830,615"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="678,487,821,513"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="425,537,604,564"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="672,639,827,681"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="909,588,1087,615"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="901,385,1095,412"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="915,56,1081,83"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="927,5,1069,32"/>
<area shape="rect" href="hyperv_8c.html#a3bfbf343eefc11963b210ba8322f6826" title=" " alt="" coords="681,5,818,32"/>
<area shape="rect" href="xen_8c.html#a0fb0356e88890003922daf35627420a8" title=" " alt="" coords="1153,678,1336,719"/>
<area shape="rect" href="xen_8c.html#a48738df3c98025631e2412d90758136c" title=" " alt="" coords="1149,744,1340,771"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="957,689,1039,716"/>
<area shape="rect" href="xen_8c.html#a59091fb436633f85ba3e28187f5794d0" title=" " alt="" coords="919,744,1077,771"/>
</map>
</div>

</div>
</div>
<a id="a079d589509607a9d9baa6bed3eae7fa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a079d589509607a9d9baa6bed3eae7fa6">&#9670;&nbsp;</a></span>kvm_apic_disabled_lapic_found()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_apic_disabled_lapic_found </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01108">1108</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;{</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordflow">if</span> (!kvm-&gt;arch.disabled_lapic_found) {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        kvm-&gt;arch.disabled_lapic_found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        pr_info(<span class="stringliteral">&quot;Disabled LAPIC found during irq injection\n&quot;</span>);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    }</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a079d589509607a9d9baa6bed3eae7fa6_icgraph.png" border="0" usemap="#alapic_8c_a079d589509607a9d9baa6bed3eae7fa6_icgraph" alt=""/></div>
<map name="alapic_8c_a079d589509607a9d9baa6bed3eae7fa6_icgraph" id="alapic_8c_a079d589509607a9d9baa6bed3eae7fa6_icgraph">
<area shape="rect" title=" " alt="" coords="1631,865,1816,906"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="1399,865,1583,906"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="1192,865,1351,906"/>
<area shape="rect" href="lapic_8c.html#a8620b1c89f8cf017f7827024fc95ac92" title=" " alt="" coords="1199,930,1343,971"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="1194,411,1349,453"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="486,883,643,909"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="236,883,383,909"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="958,937,1141,964"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="745,933,877,960"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="736,984,887,1011"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="490,933,639,960"/>
<area shape="rect" href="irq__comm_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="464,208,665,235"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="955,495,1144,521"/>
<area shape="rect" href="xen_8c.html#a7ba53f4f869b74569192380f1adfd40c" title=" " alt="" coords="968,178,1131,219"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="754,781,869,808"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="738,393,885,420"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="731,469,892,496"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="757,520,866,547"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="758,621,865,648"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="509,731,621,757"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="461,781,668,808"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="461,832,668,859"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="228,731,391,757"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="235,680,383,707"/>
<area shape="rect" href="ioapic_8c.html#a21c528e901ef596bba3f882ed5ac9597" title=" " alt="" coords="247,781,372,808"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="221,832,397,859"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="5,353,157,394"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="486,368,643,395"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="483,419,647,445"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="242,309,377,336"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="212,461,407,488"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="229,411,390,437"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="238,360,381,387"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="232,513,387,554"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="475,469,654,496"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="468,571,661,597"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="479,520,651,547"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="233,579,385,605"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="481,621,648,648"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="493,672,636,699"/>
<area shape="rect" href="hyperv_8c.html#a3bfbf343eefc11963b210ba8322f6826" title=" " alt="" coords="241,629,378,656"/>
<area shape="rect" href="xen_8c.html#a0fb0356e88890003922daf35627420a8" title=" " alt="" coords="720,73,903,114"/>
<area shape="rect" href="xen_8c.html#a48738df3c98025631e2412d90758136c" title=" " alt="" coords="716,185,907,212"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="524,56,605,83"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="216,5,403,32"/>
<area shape="rect" href="xen_8c.html#a59091fb436633f85ba3e28187f5794d0" title=" " alt="" coords="485,157,644,184"/>
<area shape="rect" href="xen_8c.html#a7432a92fb771aeb9f60ca4d89c10f15b" title=" " alt="" coords="253,157,366,184"/>
<area shape="rect" href="xen_8c.html#a42cb09290dc39689baca95686be1ff69" title=" " alt="" coords="205,208,413,235"/>
<area shape="rect" href="xen_8c.html#a952a322aa5cce4d0bd3fe372d820de13" title=" " alt="" coords="206,56,413,83"/>
<area shape="rect" href="xen_8c.html#ab30962c07569543c2879269c4ec40d70" title=" " alt="" coords="211,107,408,133"/>
</map>
</div>

</div>
</div>
<a id="a623f02f0875b0883fd65e82c565c9a18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a623f02f0875b0883fd65e82c565c9a18">&#9670;&nbsp;</a></span>kvm_apic_get_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_apic_get_state </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_lapic_state *&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02970">2970</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;{</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;    memcpy(s-&gt;regs, vcpu-&gt;arch.apic-&gt;regs, <span class="keyword">sizeof</span>(*s));</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160; </div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;<span class="comment">     * Get calculated timer current count for remaining timer period (if</span></div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;<span class="comment">     * any) and store it in the returned register set.</span></div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;    <a class="code" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e">__kvm_lapic_set_reg</a>(s-&gt;regs, APIC_TMCCT,</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;                <a class="code" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3">__apic_read</a>(vcpu-&gt;arch.apic, APIC_TMCCT));</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160; </div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#a5862d5df95ddd956a652f1dd3f319706">kvm_apic_state_fixup</a>(vcpu, s, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a5862d5df95ddd956a652f1dd3f319706"><div class="ttname"><a href="lapic_8c.html#a5862d5df95ddd956a652f1dd3f319706">kvm_apic_state_fixup</a></div><div class="ttdeci">static int kvm_apic_state_fixup(struct kvm_vcpu *vcpu, struct kvm_lapic_state *s, bool set)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02932">lapic.c:2932</a></div></div>
<div class="ttc" id="alapic_8c_html_a5de365e734b929b65e2d75f62cea6f7e"><div class="ttname"><a href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e">__kvm_lapic_set_reg</a></div><div class="ttdeci">static void __kvm_lapic_set_reg(char *regs, int reg_off, u32 val)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00072">lapic.c:72</a></div></div>
<div class="ttc" id="alapic_8c_html_a834f2a3187924d07d18afb6b8d6645f3"><div class="ttname"><a href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3">__apic_read</a></div><div class="ttdeci">static u32 __apic_read(struct kvm_lapic *apic, unsigned int offset)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01566">lapic.c:1566</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a623f02f0875b0883fd65e82c565c9a18_cgraph.png" border="0" usemap="#alapic_8c_a623f02f0875b0883fd65e82c565c9a18_cgraph" alt=""/></div>
<map name="alapic_8c_a623f02f0875b0883fd65e82c565c9a18_cgraph" id="alapic_8c_a623f02f0875b0883fd65e82c565c9a18_cgraph">
<area shape="rect" title=" " alt="" coords="5,176,159,202"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="207,176,305,202"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="989,160,1147,186"/>
<area shape="rect" href="lapic_8c.html#a5862d5df95ddd956a652f1dd3f319706" title=" " alt="" coords="760,328,924,354"/>
<area shape="rect" href="lapic_8c.html#a5bf640da1dfc1be09d89fb23c7f2e954" title=" " alt="" coords="576,226,697,253"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="769,261,915,288"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="353,226,513,253"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="369,125,498,152"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="365,66,502,93"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="989,261,1147,288"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="565,176,708,202"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="565,110,708,151"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="763,210,921,237"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="770,160,914,186"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1234,160,1383,186"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="764,109,920,136"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="1008,109,1128,136"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="561,58,712,85"/>
<area shape="rect" href="kvm__cache__regs_8h.html#ad97ff6b975b461b815e6749d29c65446" title=" " alt="" coords="787,58,897,85"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a5d9eb0563cffb1e3ed1cccebabcf2df6" title=" " alt="" coords="981,58,1155,85"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="1212,58,1405,85"/>
<area shape="rect" href="lapic_8c.html#aa06cb4ebbfa40dbfa494b3b4cd9f8833" title=" " alt="" coords="981,464,1155,490"/>
<area shape="rect" href="lapic_8c.html#a39839decdbbb9e8a6718f3ac7c0b3707" title=" " alt="" coords="981,312,1155,338"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="997,362,1139,389"/>
<area shape="rect" href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f" title=" " alt="" coords="972,413,1164,440"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a623f02f0875b0883fd65e82c565c9a18_icgraph.png" border="0" usemap="#alapic_8c_a623f02f0875b0883fd65e82c565c9a18_icgraph" alt=""/></div>
<map name="alapic_8c_a623f02f0875b0883fd65e82c565c9a18_icgraph" id="alapic_8c_a623f02f0875b0883fd65e82c565c9a18_icgraph">
<area shape="rect" title=" " alt="" coords="584,13,737,39"/>
<area shape="rect" href="x86_8c.html#aca5ab82fb669f6a99e011293efed0d5d" title=" " alt="" coords="384,5,536,47"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,13,336,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="aa421165466ac455ff3fff91fb9afe7bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa421165466ac455ff3fff91fb9afe7bf">&#9670;&nbsp;</a></span>kvm_apic_has_interrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_apic_has_interrupt </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02859">2859</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;{</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    u32 ppr;</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160; </div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4">kvm_apic_present</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>))</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160; </div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    <a class="code" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986">__apic_update_ppr</a>(apic, &amp;ppr);</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0">apic_has_interrupt_for_ppr</a>(apic, ppr);</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;}</div>
<div class="ttc" id="alapic_8h_html_ae7e74fde3e4fb01f561634e789b5eab4"><div class="ttname"><a href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4">kvm_apic_present</a></div><div class="ttdeci">static bool kvm_apic_present(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00211">lapic.h:211</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aa421165466ac455ff3fff91fb9afe7bf_cgraph.png" border="0" usemap="#alapic_8c_aa421165466ac455ff3fff91fb9afe7bf_cgraph" alt=""/></div>
<map name="alapic_8c_aa421165466ac455ff3fff91fb9afe7bf_cgraph" id="alapic_8c_aa421165466ac455ff3fff91fb9afe7bf_cgraph">
<area shape="rect" title=" " alt="" coords="5,156,184,183"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="232,76,375,103"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="232,149,375,190"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="233,215,374,241"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="641,5,800,32"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="435,56,581,83"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="436,107,580,133"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="848,81,997,108"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="641,56,800,83"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="641,107,800,133"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="430,157,586,184"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="661,157,781,184"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="423,212,593,239"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="449,263,567,289"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aa421165466ac455ff3fff91fb9afe7bf_icgraph.png" border="0" usemap="#alapic_8c_aa421165466ac455ff3fff91fb9afe7bf_icgraph" alt=""/></div>
<map name="alapic_8c_aa421165466ac455ff3fff91fb9afe7bf_icgraph" id="alapic_8c_aa421165466ac455ff3fff91fb9afe7bf_icgraph">
<area shape="rect" title=" " alt="" coords="1888,753,2067,779"/>
<area shape="rect" href="irq_8c.html#a82ee83566d2724a298b67f23f481976b" title=" " alt="" coords="1629,605,1840,631"/>
<area shape="rect" href="irq_8c.html#ae3151f072a1bb4a732ee3854ab6cf619" title=" " alt="" coords="1647,737,1822,763"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="1647,803,1823,830"/>
<area shape="rect" href="vmx_2nested_8c.html#add1e82c32385142c0fca04a1db8cbc3a" title=" " alt="" coords="1202,1337,1333,1363"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="1182,597,1353,639"/>
<area shape="rect" href="svm_8c.html#a5c26f1ceaa6cc778d986bd33629dc539" title=" " alt="" coords="1445,363,1546,390"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="947,566,1084,593"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="709,591,791,618"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="403,591,589,618"/>
<area shape="rect" href="svm_8c.html#a4a2beb03d1ef1d9e803c22570b5806d1" title=" " alt="" coords="1202,211,1333,238"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="661,465,839,491"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="938,275,1093,302"/>
<area shape="rect" href="svm_8c.html#a0a2c47b46c5f4c14c1ae6a64119bcb60" title=" " alt="" coords="1202,313,1333,339"/>
<area shape="rect" href="svm_8c.html#a5df90c8772700a60441f2ba19472f726" title=" " alt="" coords="1212,414,1323,441"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="1183,363,1351,390"/>
<area shape="rect" href="svm_2nested_8c.html#a4ec7e878f6af209e74dd84285ee0198f" title=" " alt="" coords="421,414,571,441"/>
<area shape="rect" href="svm_8c.html#a5d52c93beeb85ba5a99283d4eba589e1" title=" " alt="" coords="200,351,349,378"/>
<area shape="rect" href="svm_8c.html#a1eacc7b79f62ed332056217c35fe3be4" title=" " alt="" coords="5,326,152,353"/>
<area shape="rect" href="svm_2nested_8c.html#a777240cb9ab00451d21a1b204e19c5a6" title=" " alt="" coords="654,97,846,123"/>
<area shape="rect" href="svm_2nested_8c.html#a03b4be7ca82710ecd17bc66f2a20cad8" title=" " alt="" coords="643,283,857,324"/>
<area shape="rect" href="svm_2nested_8c.html#a574acca11f4be4ea5df18f36307f9bf6" title=" " alt="" coords="648,181,852,207"/>
<area shape="rect" href="svm_8h.html#a7b2d87885eea1b11b1bf1045c21c5a8b" title=" " alt="" coords="647,231,853,258"/>
<area shape="rect" href="svm_2hyperv_8c.html#a33efa5fe6a664e9b2a70232b93485645" title=" " alt="" coords="659,348,841,389"/>
<area shape="rect" href="svm_8c.html#a08788d6a633657aa9e7e2f3b09db9b40" title=" " alt="" coords="419,5,573,47"/>
<area shape="rect" href="svm_8c.html#ae135f7d753cde05e6f726fb75e971ddd" title=" " alt="" coords="416,71,576,98"/>
<area shape="rect" href="svm_8c.html#a3f8983432f4aae138a6f4d167c561132" title=" " alt="" coords="429,122,563,149"/>
<area shape="rect" href="svm_2nested_8c.html#a3286f29b650004d599595557d310136e" title=" " alt="" coords="397,290,595,317"/>
<area shape="rect" href="svm_2nested_8c.html#a962af1ea814d32a42ada9f601918cee5" title=" " alt="" coords="411,173,581,215"/>
<area shape="rect" href="svm_2nested_8c.html#ae734b89c5cf3a889380d8136e2ed749e" title=" " alt="" coords="905,414,1125,441"/>
<area shape="rect" href="x86_8c.html#a54ec69b24c80207e4e6122994db0a466" title=" " alt="" coords="1410,705,1581,731"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="651,827,849,854"/>
<area shape="rect" href="x86_8c.html#a951bd40e58d87204d565c6cb5fc664e6" title=" " alt="" coords="1173,693,1361,719"/>
<area shape="rect" href="kvm__main_8c.html#aac20f0d987f71a47c6701c7e93a0e261" title=" " alt="" coords="929,667,1102,694"/>
<area shape="rect" href="kvm__main_8c.html#a3de4d6991bdd1a714e8afa6a55136cdd" title=" " alt="" coords="927,718,1103,745"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="968,617,1063,643"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="1409,819,1581,846"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="1190,1031,1345,1058"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="676,1149,824,1175"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="954,1286,1077,1313"/>
<area shape="rect" href="vmx_2nested_8c.html#a4e307e2bcf664c83265b1442e3fc8da2" title=" " alt="" coords="927,885,1103,927"/>
<area shape="rect" href="vmx_2nested_8c.html#ad3cab9cf8633364513bd6a24caecf41a" title=" " alt="" coords="907,820,1123,861"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fcc88ceee4f57a3dbf23fedb46a5cb" title=" " alt="" coords="940,1053,1091,1095"/>
<area shape="rect" href="vmx_2nested_8c.html#aedc5821e9af5c7bd4aac6c06f4ca046f" title=" " alt="" coords="925,1002,1105,1029"/>
<area shape="rect" href="vmx_2hyperv_8c.html#a937e30dece4579b71b17efcd54c1d910" title=" " alt="" coords="923,1119,1107,1160"/>
<area shape="rect" href="vmx_2nested_8c.html#a64e6550fab681b40c832fe4e2d5e3b95" title=" " alt="" coords="943,1185,1088,1211"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="665,1329,835,1371"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="433,1337,559,1363"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fecee9010894e3a1513a0924e24dd6" title=" " alt="" coords="947,1337,1084,1363"/>
<area shape="rect" href="vmx_2nested_8c.html#a23e3de8c964e87404eea818be6f70154" title=" " alt="" coords="944,1387,1087,1414"/>
</map>
</div>

</div>
</div>
<a id="a290cedfa4bc99681ad10d45d0d960a17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a290cedfa4bc99681ad10d45d0d960a17">&#9670;&nbsp;</a></span>kvm_apic_inject_pending_timer_irqs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_apic_inject_pending_timer_irqs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01879">1879</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;{</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__timer.html">kvm_timer</a> *ktimer = &amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>;</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160; </div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    <a class="code" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50">kvm_apic_local_deliver</a>(apic, APIC_LVTT);</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0">apic_lvtt_tscdeadline</a>(apic)) {</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;        ktimer-&gt;<a class="code" href="structkvm__timer.html#acb4ad6bfe6c14982d0a87f4678e92d09">tscdeadline</a> = 0;</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a">apic_lvtt_oneshot</a>(apic)) {</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;        ktimer-&gt;<a class="code" href="structkvm__timer.html#acb4ad6bfe6c14982d0a87f4678e92d09">tscdeadline</a> = 0;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;        ktimer-&gt;<a class="code" href="structkvm__timer.html#a0de90943a0ace07fbb0e0219fe64e2f8">target_expiration</a> = 0;</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    }</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_ab1ce737e754e319ee93f3d06e197cc50"><div class="ttname"><a href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50">kvm_apic_local_deliver</a></div><div class="ttdeci">int kvm_apic_local_deliver(struct kvm_lapic *apic, int lvt_type)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02762">lapic.c:2762</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a290cedfa4bc99681ad10d45d0d960a17_cgraph.png" border="0" usemap="#alapic_8c_a290cedfa4bc99681ad10d45d0d960a17_cgraph" alt=""/></div>
<map name="alapic_8c_a290cedfa4bc99681ad10d45d0d960a17_cgraph" id="alapic_8c_a290cedfa4bc99681ad10d45d0d960a17_cgraph">
<area shape="rect" title=" " alt="" coords="5,361,192,402"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="259,317,396,344"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="247,368,407,395"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="240,419,415,445"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="471,183,609,209"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="908,309,1079,336"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="463,411,617,453"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="467,477,613,504"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="468,528,612,555"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="699,208,807,235"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="689,259,818,285"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="690,309,817,336"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="691,5,816,32"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="665,56,841,83"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="671,107,835,133"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="692,157,815,184"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="909,208,1078,235"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="889,107,1097,133"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="917,157,1070,184"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="676,411,831,453"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="674,477,833,504"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="674,528,833,555"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a290cedfa4bc99681ad10d45d0d960a17_icgraph.png" border="0" usemap="#alapic_8c_a290cedfa4bc99681ad10d45d0d960a17_icgraph" alt=""/></div>
<map name="alapic_8c_a290cedfa4bc99681ad10d45d0d960a17_icgraph" id="alapic_8c_a290cedfa4bc99681ad10d45d0d960a17_icgraph">
<area shape="rect" title=" " alt="" coords="2323,173,2509,214"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="2101,205,2247,232"/>
<area shape="rect" href="irq_8h.html#ac79f0e40ed0e1cde83a09aef506fb373" title=" " alt="" coords="2073,125,2275,152"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1243,147,1411,189"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="1683,307,1801,333"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="1883,205,2009,232"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="1867,256,2025,283"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="985,30,1195,71"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="727,56,917,83"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="719,5,925,32"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="487,56,635,83"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="255,56,389,83"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="503,5,620,32"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1467,307,1609,333"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1255,396,1398,423"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="743,544,901,571"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1245,330,1408,371"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1247,265,1406,306"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1014,264,1166,291"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1026,445,1154,472"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="747,158,897,199"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="482,157,641,184"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="260,157,384,184"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="707,445,937,472"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="494,544,629,571"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="464,443,659,469"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="481,595,642,621"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="490,645,633,672"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="246,427,398,469"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="233,325,411,352"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="252,376,392,403"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="13,318,172,359"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="228,595,416,621"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="235,544,409,571"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="26,595,159,621"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="5,519,180,545"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="247,645,397,672"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="484,377,639,418"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1011,325,1169,352"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="765,325,879,352"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="778,224,866,251"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="522,325,601,352"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="475,275,647,301"/>
<area shape="rect" href="x86_8c.html#a8103751d0c861cfc0c6d0fed892e2454" title=" " alt="" coords="482,209,641,250"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="468,107,655,133"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1043,213,1137,240"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="781,107,863,133"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="1683,243,1801,269"/>
<area shape="rect" href="lapic_8c.html#aee4a3e5ae4ed211edf4e463ebacadaa5" title=" " alt="" coords="1459,223,1617,265"/>
<area shape="rect" href="irq_8c.html#a2d54275d9e142ae8e337298689483728" title=" " alt="" coords="1665,89,1819,130"/>
</map>
</div>

</div>
</div>
<a id="abbce6da431ef5f15d85b5fc741d3ef72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbce6da431ef5f15d85b5fc741d3ef72">&#9670;&nbsp;</a></span>kvm_apic_is_broadcast_dest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_apic_is_broadcast_dest </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> **&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_lapic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_apic_map *&#160;</td>
          <td class="paramname"><em>map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01116">1116</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;{</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keywordflow">if</span> (kvm-&gt;arch.x2apic_broadcast_quirk_disabled) {</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        <span class="keywordflow">if</span> ((irq-&gt;dest_id == <a class="code" href="lapic_8h.html#a8e368c4d317e2f3289d8287fc28c4d19">APIC_BROADCAST</a> &amp;&amp;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;             map-&gt;logical_mode != KVM_APIC_MODE_X2APIC))</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        <span class="keywordflow">if</span> (irq-&gt;dest_id == <a class="code" href="lapic_8h.html#a481da2cdd19d996fb0378476375133c6">X2APIC_BROADCAST</a>)</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        <span class="keywordtype">bool</span> x2apic_ipi = src &amp;&amp; *src &amp;&amp; <a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(*src);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        <span class="keywordflow">if</span> (irq-&gt;dest_id == (x2apic_ipi ?</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                             <a class="code" href="lapic_8h.html#a481da2cdd19d996fb0378476375133c6">X2APIC_BROADCAST</a> : <a class="code" href="lapic_8h.html#a8e368c4d317e2f3289d8287fc28c4d19">APIC_BROADCAST</a>))</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    }</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160; </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_abbce6da431ef5f15d85b5fc741d3ef72_cgraph.png" border="0" usemap="#alapic_8c_abbce6da431ef5f15d85b5fc741d3ef72_cgraph" alt=""/></div>
<map name="alapic_8c_abbce6da431ef5f15d85b5fc741d3ef72_cgraph" id="alapic_8c_abbce6da431ef5f15d85b5fc741d3ef72_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,215,32"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="263,5,405,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_abbce6da431ef5f15d85b5fc741d3ef72_icgraph.png" border="0" usemap="#alapic_8c_abbce6da431ef5f15d85b5fc741d3ef72_icgraph" alt=""/></div>
<map name="alapic_8c_abbce6da431ef5f15d85b5fc741d3ef72_icgraph" id="alapic_8c_abbce6da431ef5f15d85b5fc741d3ef72_icgraph">
<area shape="rect" title=" " alt="" coords="1631,872,1840,899"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="1399,865,1583,906"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="1192,865,1351,906"/>
<area shape="rect" href="lapic_8c.html#a8620b1c89f8cf017f7827024fc95ac92" title=" " alt="" coords="1199,930,1343,971"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="1194,411,1349,453"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="486,883,643,909"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="236,883,383,909"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="958,937,1141,964"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="745,933,877,960"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="736,984,887,1011"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="490,933,639,960"/>
<area shape="rect" href="irq__comm_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="464,208,665,235"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="955,495,1144,521"/>
<area shape="rect" href="xen_8c.html#a7ba53f4f869b74569192380f1adfd40c" title=" " alt="" coords="968,178,1131,219"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="754,781,869,808"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="738,393,885,420"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="731,469,892,496"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="757,520,866,547"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="758,621,865,648"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="509,731,621,757"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="461,781,668,808"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="461,832,668,859"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="228,731,391,757"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="235,680,383,707"/>
<area shape="rect" href="ioapic_8c.html#a21c528e901ef596bba3f882ed5ac9597" title=" " alt="" coords="247,781,372,808"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="221,832,397,859"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="5,353,157,394"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="486,368,643,395"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="483,419,647,445"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="242,309,377,336"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="212,461,407,488"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="229,411,390,437"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="238,360,381,387"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="232,513,387,554"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="475,469,654,496"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="468,571,661,597"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="479,520,651,547"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="233,579,385,605"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="481,621,648,648"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="493,672,636,699"/>
<area shape="rect" href="hyperv_8c.html#a3bfbf343eefc11963b210ba8322f6826" title=" " alt="" coords="241,629,378,656"/>
<area shape="rect" href="xen_8c.html#a0fb0356e88890003922daf35627420a8" title=" " alt="" coords="720,73,903,114"/>
<area shape="rect" href="xen_8c.html#a48738df3c98025631e2412d90758136c" title=" " alt="" coords="716,185,907,212"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="524,56,605,83"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="216,5,403,32"/>
<area shape="rect" href="xen_8c.html#a59091fb436633f85ba3e28187f5794d0" title=" " alt="" coords="485,157,644,184"/>
<area shape="rect" href="xen_8c.html#a7432a92fb771aeb9f60ca4d89c10f15b" title=" " alt="" coords="253,157,366,184"/>
<area shape="rect" href="xen_8c.html#a42cb09290dc39689baca95686be1ff69" title=" " alt="" coords="205,208,413,235"/>
<area shape="rect" href="xen_8c.html#a952a322aa5cce4d0bd3fe372d820de13" title=" " alt="" coords="206,56,413,83"/>
<area shape="rect" href="xen_8c.html#ab30962c07569543c2879269c4ec40d70" title=" " alt="" coords="211,107,408,133"/>
</map>
</div>

</div>
</div>
<a id="ab1ce737e754e319ee93f3d06e197cc50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1ce737e754e319ee93f3d06e197cc50">&#9670;&nbsp;</a></span>kvm_apic_local_deliver()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_apic_local_deliver </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lvt_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02762">2762</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;{</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;    u32 reg = <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, lvt_type);</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;    <span class="keywordtype">int</span> vector, mode, trig_mode;</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;    <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160; </div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4">kvm_apic_hw_enabled</a>(apic) &amp;&amp; !(reg &amp; APIC_LVT_MASKED)) {</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;        vector = reg &amp; APIC_VECTOR_MASK;</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;        mode = reg &amp; APIC_MODE_MASK;</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;        trig_mode = reg &amp; APIC_LVT_LEVEL_TRIGGER;</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160; </div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;        r = <a class="code" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10">__apic_accept_irq</a>(apic, mode, vector, 1, trig_mode, NULL);</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;        <span class="keywordflow">if</span> (r &amp;&amp; lvt_type == APIC_LVTPC &amp;&amp;</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;            <a class="code" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf">guest_cpuid_is_intel_compatible</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>))</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;            <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_LVTPC, reg | APIC_LVT_MASKED);</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    }</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;}</div>
<div class="ttc" id="acpuid_8h_html_a0de02c3fbec1aa3cfd7890fb68d3fabf"><div class="ttname"><a href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf">guest_cpuid_is_intel_compatible</a></div><div class="ttdeci">static bool guest_cpuid_is_intel_compatible(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="cpuid_8h_source.html#l00128">cpuid.h:128</a></div></div>
<div class="ttc" id="alapic_8c_html_a10d887046aaccb6cf4178421594dee10"><div class="ttname"><a href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10">__apic_accept_irq</a></div><div class="ttdeci">static int __apic_accept_irq(struct kvm_lapic *apic, int delivery_mode, int vector, int level, int trig_mode, struct dest_map *dest_map)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01291">lapic.c:1291</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ab1ce737e754e319ee93f3d06e197cc50_cgraph.png" border="0" usemap="#alapic_8c_ab1ce737e754e319ee93f3d06e197cc50_cgraph" alt=""/></div>
<map name="alapic_8c_ab1ce737e754e319ee93f3d06e197cc50_cgraph" id="alapic_8c_ab1ce737e754e319ee93f3d06e197cc50_cgraph">
<area shape="rect" title=" " alt="" coords="5,419,180,445"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="237,183,374,209"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="673,309,844,336"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="228,411,383,453"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="233,477,378,504"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="233,528,377,555"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="465,208,573,235"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="454,259,583,285"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="455,309,582,336"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="456,5,581,32"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="431,56,607,83"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="437,107,601,133"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="457,157,580,184"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="674,208,843,235"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="655,107,863,133"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="682,157,835,184"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="441,411,596,453"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="439,477,598,504"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="439,528,598,555"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ab1ce737e754e319ee93f3d06e197cc50_icgraph.png" border="0" usemap="#alapic_8c_ab1ce737e754e319ee93f3d06e197cc50_icgraph" alt=""/></div>
<map name="alapic_8c_ab1ce737e754e319ee93f3d06e197cc50_icgraph" id="alapic_8c_ab1ce737e754e319ee93f3d06e197cc50_icgraph">
<area shape="rect" title=" " alt="" coords="2559,232,2733,259"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="2324,225,2511,266"/>
<area shape="rect" href="pmu_8c.html#a03a16f548326b68245a4bf0555bea777" title=" " alt="" coords="2332,127,2503,153"/>
<area shape="rect" href="x86_8c.html#a130b6ed14cf18384646cb31251dd104e" title=" " alt="" coords="2325,337,2510,364"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="2102,257,2249,284"/>
<area shape="rect" href="irq_8h.html#ac79f0e40ed0e1cde83a09aef506fb373" title=" " alt="" coords="2075,179,2276,205"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1243,191,1411,233"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="1889,359,2006,385"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="1885,257,2010,284"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="1868,308,2027,335"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="985,23,1195,65"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="727,56,917,83"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="719,5,925,32"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="487,56,635,83"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="255,56,389,83"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="503,5,620,32"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1467,359,1609,385"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1255,440,1398,467"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="743,580,901,607"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1245,374,1408,415"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1247,309,1406,350"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1014,405,1166,432"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1026,511,1154,537"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="747,394,897,435"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="482,355,641,381"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="260,323,384,349"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="707,511,937,537"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="494,548,629,575"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="464,599,659,625"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="481,653,642,680"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="490,729,633,756"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="246,587,398,629"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="233,485,411,512"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="252,536,392,563"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="228,653,416,680"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="235,704,409,731"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="5,568,180,595"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="247,755,397,781"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="484,482,639,523"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1011,343,1169,369"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="765,343,879,369"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="778,292,866,319"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="468,292,655,319"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1043,257,1137,284"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="781,191,863,217"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="1683,295,1802,321"/>
<area shape="rect" href="lapic_8c.html#aee4a3e5ae4ed211edf4e463ebacadaa5" title=" " alt="" coords="1459,275,1617,317"/>
<area shape="rect" href="irq_8c.html#a2d54275d9e142ae8e337298689483728" title=" " alt="" coords="1461,141,1615,182"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="1674,96,1811,123"/>
<area shape="rect" href="x86_8c.html#a2de10bf19fee1e2a9cb47b6f491a18b4" title=" " alt="" coords="1665,473,1820,514"/>
</map>
</div>

</div>
</div>
<a id="adb9d56c06c989c570d48eaad39212e44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb9d56c06c989c570d48eaad39212e44">&#9670;&nbsp;</a></span>kvm_apic_map_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_apic_map_free </td>
          <td>(</td>
          <td class="paramtype">struct rcu_head *&#160;</td>
          <td class="paramname"><em>rcu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00211">211</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;{</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keyword">struct </span>kvm_apic_map *map = container_of(rcu, <span class="keyword">struct</span> kvm_apic_map, rcu);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    kvfree(map);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_adb9d56c06c989c570d48eaad39212e44_icgraph.png" border="0" usemap="#alapic_8c_adb9d56c06c989c570d48eaad39212e44_icgraph" alt=""/></div>
<map name="alapic_8c_adb9d56c06c989c570d48eaad39212e44_icgraph" id="alapic_8c_adb9d56c06c989c570d48eaad39212e44_icgraph">
<area shape="rect" title=" " alt="" coords="1837,384,1992,411"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="1589,384,1789,411"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1387,409,1539,436"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1384,563,1541,589"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1398,256,1527,283"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="1163,352,1314,379"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1163,403,1314,445"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="431,309,590,336"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,205,129,232"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1171,613,1306,640"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1141,668,1336,695"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1158,512,1319,539"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1167,563,1310,589"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="923,665,1075,706"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="910,731,1089,757"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="929,613,1069,640"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="678,723,837,765"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="905,512,1093,539"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="424,461,597,488"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="691,512,824,539"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="412,512,609,539"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="183,461,358,488"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="27,411,108,437"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="13,461,122,488"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="12,512,123,539"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="924,563,1075,589"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1174,183,1303,209"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="906,107,1093,133"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="913,208,1085,235"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="914,157,1085,184"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,162,350,203"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,108,364,135"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="710,5,805,32"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="689,56,826,83"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="470,56,551,83"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="657,208,857,235"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="918,309,1081,336"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="708,259,807,285"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="704,309,811,336"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,233,350,274"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="467,208,554,235"/>
</map>
</div>

</div>
</div>
<a id="aee815bad0e899bbf195750d2d9b5470f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee815bad0e899bbf195750d2d9b5470f">&#9670;&nbsp;</a></span>kvm_apic_map_get_dest_lapic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_apic_map_get_dest_lapic </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> **&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_lapic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_apic_map *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> ***&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long *&#160;</td>
          <td class="paramname"><em>bitmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01142">1142</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;{</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="keywordtype">int</span> i, lowest;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160; </div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordflow">if</span> (irq-&gt;shorthand == APIC_DEST_SELF &amp;&amp; src) {</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        *dst = src;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        *bitmap = 1;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (irq-&gt;shorthand)</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160; </div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">if</span> (!map || <a class="code" href="lapic_8c.html#abbce6da431ef5f15d85b5fc741d3ef72">kvm_apic_is_broadcast_dest</a>(kvm, src, irq, map))</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160; </div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="keywordflow">if</span> (irq-&gt;dest_mode == APIC_DEST_PHYSICAL) {</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <span class="keywordflow">if</span> (irq-&gt;dest_id &gt; map-&gt;max_apic_id) {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            *bitmap = 0;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            u32 dest_id = array_index_nospec(irq-&gt;dest_id, map-&gt;max_apic_id + 1);</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            *dst = &amp;map-&gt;phys_map[dest_id];</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            *bitmap = 1;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        }</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    }</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160; </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    *bitmap = 0;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3">kvm_apic_map_get_logical_dest</a>(map, irq-&gt;dest_id, dst,</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                (u16 *)bitmap))</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160; </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#adfbea71ac96b210fb91bef47c77194f1">kvm_lowest_prio_delivery</a>(irq))</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="x86_8c.html#a47d88660a2a5f8ee22df1253604d1ed7">kvm_vector_hashing_enabled</a>()) {</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        lowest = -1;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        for_each_set_bit(i, bitmap, 16) {</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;            <span class="keywordflow">if</span> (!(*dst)[i])</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;            <span class="keywordflow">if</span> (lowest &lt; 0)</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                lowest = i;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#a47d52843df792ef8e7bffdfb66a3b40b">kvm_apic_compare_prio</a>((*dst)[i]-&gt;vcpu,</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                        (*dst)[lowest]-&gt;vcpu) &lt; 0)</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                lowest = i;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        }</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        <span class="keywordflow">if</span> (!*bitmap)</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160; </div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        lowest = <a class="code" href="lapic_8c.html#ac9fecb7d9f4574931650af9abb4b9f4c">kvm_vector_to_index</a>(irq-&gt;vector, hweight16(*bitmap),</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                bitmap, 16);</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        <span class="keywordflow">if</span> (!(*dst)[lowest]) {</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            <a class="code" href="lapic_8c.html#a079d589509607a9d9baa6bed3eae7fa6">kvm_apic_disabled_lapic_found</a>(kvm);</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;            *bitmap = 0;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        }</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    }</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160; </div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    *bitmap = (lowest &gt;= 0) ? 1 &lt;&lt; lowest : 0;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a079d589509607a9d9baa6bed3eae7fa6"><div class="ttname"><a href="lapic_8c.html#a079d589509607a9d9baa6bed3eae7fa6">kvm_apic_disabled_lapic_found</a></div><div class="ttdeci">static void kvm_apic_disabled_lapic_found(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01108">lapic.c:1108</a></div></div>
<div class="ttc" id="alapic_8c_html_a2381239fbfde7c282aabdd2c01f50ad3"><div class="ttname"><a href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3">kvm_apic_map_get_logical_dest</a></div><div class="ttdeci">static bool kvm_apic_map_get_logical_dest(struct kvm_apic_map *map, u32 dest_id, struct kvm_lapic ***cluster, u16 *mask)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00171">lapic.c:171</a></div></div>
<div class="ttc" id="alapic_8c_html_a47d52843df792ef8e7bffdfb66a3b40b"><div class="ttname"><a href="lapic_8c.html#a47d52843df792ef8e7bffdfb66a3b40b">kvm_apic_compare_prio</a></div><div class="ttdeci">int kvm_apic_compare_prio(struct kvm_vcpu *vcpu1, struct kvm_vcpu *vcpu2)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01432">lapic.c:1432</a></div></div>
<div class="ttc" id="alapic_8c_html_abbce6da431ef5f15d85b5fc741d3ef72"><div class="ttname"><a href="lapic_8c.html#abbce6da431ef5f15d85b5fc741d3ef72">kvm_apic_is_broadcast_dest</a></div><div class="ttdeci">static bool kvm_apic_is_broadcast_dest(struct kvm *kvm, struct kvm_lapic **src, struct kvm_lapic_irq *irq, struct kvm_apic_map *map)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01116">lapic.c:1116</a></div></div>
<div class="ttc" id="alapic_8c_html_ac9fecb7d9f4574931650af9abb4b9f4c"><div class="ttname"><a href="lapic_8c.html#ac9fecb7d9f4574931650af9abb4b9f4c">kvm_vector_to_index</a></div><div class="ttdeci">int kvm_vector_to_index(u32 vector, u32 dest_vcpus, const unsigned long *bitmap, u32 bitmap_size)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01092">lapic.c:1092</a></div></div>
<div class="ttc" id="alapic_8h_html_adfbea71ac96b210fb91bef47c77194f1"><div class="ttname"><a href="lapic_8h.html#adfbea71ac96b210fb91bef47c77194f1">kvm_lowest_prio_delivery</a></div><div class="ttdeci">static bool kvm_lowest_prio_delivery(struct kvm_lapic_irq *irq)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00242">lapic.h:242</a></div></div>
<div class="ttc" id="ax86_8c_html_a47d88660a2a5f8ee22df1253604d1ed7"><div class="ttname"><a href="x86_8c.html#a47d88660a2a5f8ee22df1253604d1ed7">kvm_vector_hashing_enabled</a></div><div class="ttdeci">bool kvm_vector_hashing_enabled(void)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l13520">x86.c:13520</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aee815bad0e899bbf195750d2d9b5470f_cgraph.png" border="0" usemap="#alapic_8c_aee815bad0e899bbf195750d2d9b5470f_cgraph" alt=""/></div>
<map name="alapic_8c_aee815bad0e899bbf195750d2d9b5470f_cgraph" id="alapic_8c_aee815bad0e899bbf195750d2d9b5470f_cgraph">
<area shape="rect" title=" " alt="" coords="5,166,189,207"/>
<area shape="rect" href="lapic_8c.html#a47d52843df792ef8e7bffdfb66a3b40b" title=" " alt="" coords="264,5,445,32"/>
<area shape="rect" href="lapic_8c.html#a079d589509607a9d9baa6bed3eae7fa6" title=" " alt="" coords="262,57,447,98"/>
<area shape="rect" href="lapic_8c.html#abbce6da431ef5f15d85b5fc741d3ef72" title=" " alt="" coords="250,123,459,149"/>
<area shape="rect" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3" title=" " alt="" coords="237,173,472,200"/>
<area shape="rect" href="lapic_8h.html#adfbea71ac96b210fb91bef47c77194f1" title=" " alt="" coords="258,224,451,251"/>
<area shape="rect" href="x86_8c.html#a47d88660a2a5f8ee22df1253604d1ed7" title=" " alt="" coords="276,275,433,317"/>
<area shape="rect" href="lapic_8c.html#ac9fecb7d9f4574931650af9abb4b9f4c" title=" " alt="" coords="273,341,436,368"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="520,123,663,149"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aee815bad0e899bbf195750d2d9b5470f_icgraph.png" border="0" usemap="#alapic_8c_aee815bad0e899bbf195750d2d9b5470f_icgraph" alt=""/></div>
<map name="alapic_8c_aee815bad0e899bbf195750d2d9b5470f_icgraph" id="alapic_8c_aee815bad0e899bbf195750d2d9b5470f_icgraph">
<area shape="rect" title=" " alt="" coords="1399,865,1583,906"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="1192,865,1351,906"/>
<area shape="rect" href="lapic_8c.html#a8620b1c89f8cf017f7827024fc95ac92" title=" " alt="" coords="1199,930,1343,971"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="1194,411,1349,453"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="486,883,643,909"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="236,883,383,909"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="958,937,1141,964"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="745,933,877,960"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="736,984,887,1011"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="490,933,639,960"/>
<area shape="rect" href="irq__comm_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="464,208,665,235"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="955,495,1144,521"/>
<area shape="rect" href="xen_8c.html#a7ba53f4f869b74569192380f1adfd40c" title=" " alt="" coords="968,178,1131,219"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="754,781,869,808"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="738,393,885,420"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="731,469,892,496"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="757,520,866,547"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="758,621,865,648"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="509,731,621,757"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="461,781,668,808"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="461,832,668,859"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="228,731,391,757"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="235,680,383,707"/>
<area shape="rect" href="ioapic_8c.html#a477f1b98bf8d9dfcd1e51c743d79ac47" title=" " alt="" coords="19,731,143,757"/>
<area shape="rect" href="ioapic_8c.html#a21c528e901ef596bba3f882ed5ac9597" title=" " alt="" coords="247,781,372,808"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="221,832,397,859"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="5,353,157,394"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="486,368,643,395"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="483,419,647,445"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="242,309,377,336"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="212,461,407,488"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="229,411,390,437"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="238,360,381,387"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="232,513,387,554"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="475,469,654,496"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="468,571,661,597"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="479,520,651,547"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="233,579,385,605"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="481,621,648,648"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="493,672,636,699"/>
<area shape="rect" href="hyperv_8c.html#a3bfbf343eefc11963b210ba8322f6826" title=" " alt="" coords="241,629,378,656"/>
<area shape="rect" href="xen_8c.html#a0fb0356e88890003922daf35627420a8" title=" " alt="" coords="720,73,903,114"/>
<area shape="rect" href="xen_8c.html#a48738df3c98025631e2412d90758136c" title=" " alt="" coords="716,185,907,212"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="524,56,605,83"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="216,5,403,32"/>
<area shape="rect" href="xen_8c.html#a59091fb436633f85ba3e28187f5794d0" title=" " alt="" coords="485,157,644,184"/>
<area shape="rect" href="xen_8c.html#a7432a92fb771aeb9f60ca4d89c10f15b" title=" " alt="" coords="253,157,366,184"/>
<area shape="rect" href="xen_8c.html#a42cb09290dc39689baca95686be1ff69" title=" " alt="" coords="205,208,413,235"/>
<area shape="rect" href="xen_8c.html#a952a322aa5cce4d0bd3fe372d820de13" title=" " alt="" coords="206,56,413,83"/>
<area shape="rect" href="xen_8c.html#ab30962c07569543c2879269c4ec40d70" title=" " alt="" coords="211,107,408,133"/>
</map>
</div>

</div>
</div>
<a id="a2381239fbfde7c282aabdd2c01f50ad3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2381239fbfde7c282aabdd2c01f50ad3">&#9670;&nbsp;</a></span>kvm_apic_map_get_logical_dest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_apic_map_get_logical_dest </td>
          <td>(</td>
          <td class="paramtype">struct kvm_apic_map *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>dest_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> ***&#160;</td>
          <td class="paramname"><em>cluster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16 *&#160;</td>
          <td class="paramname"><em>mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00171">171</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                                                             {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">switch</span> (map-&gt;logical_mode) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">case</span> KVM_APIC_MODE_SW_DISABLED:</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="comment">/* Arbitrarily use the flat map so that @cluster isn&#39;t NULL. */</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        *cluster = map-&gt;xapic_flat_map;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        *mask = 0;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">case</span> KVM_APIC_MODE_X2APIC: {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        u32 offset = (dest_id &gt;&gt; 16) * 16;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        u32 max_apic_id = map-&gt;max_apic_id;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">if</span> (offset &lt;= max_apic_id) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            u8 cluster_size = min(max_apic_id - offset + 1, 16U);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            offset = array_index_nospec(offset, map-&gt;max_apic_id + 1);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            *cluster = &amp;map-&gt;phys_map[offset];</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            *mask = dest_id &amp; (0xffff &gt;&gt; (16 - cluster_size));</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            *mask = 0;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">case</span> KVM_APIC_MODE_XAPIC_FLAT:</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        *cluster = map-&gt;xapic_flat_map;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        *mask = dest_id &amp; 0xff;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">case</span> KVM_APIC_MODE_XAPIC_CLUSTER:</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        *cluster = map-&gt;xapic_cluster_map[(dest_id &gt;&gt; 4) &amp; 0xf];</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        *mask = dest_id &amp; 0xf;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">case</span> KVM_APIC_MODE_MAP_DISABLED:</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        WARN_ON_ONCE(1);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a2381239fbfde7c282aabdd2c01f50ad3_icgraph.png" border="0" usemap="#alapic_8c_a2381239fbfde7c282aabdd2c01f50ad3_icgraph" alt=""/></div>
<map name="alapic_8c_a2381239fbfde7c282aabdd2c01f50ad3_icgraph" id="alapic_8c_a2381239fbfde7c282aabdd2c01f50ad3_icgraph">
<area shape="rect" title=" " alt="" coords="1717,423,1952,449"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="1469,445,1653,486"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="1453,271,1669,297"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="1226,597,1385,638"/>
<area shape="rect" href="lapic_8c.html#a8620b1c89f8cf017f7827024fc95ac92" title=" " alt="" coords="1233,394,1377,435"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="1228,679,1383,721"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="499,655,657,681"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="256,655,403,681"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="971,325,1154,352"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="759,275,891,301"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="749,325,900,352"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="503,199,653,225"/>
<area shape="rect" href="irq__comm_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="477,857,679,884"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="968,579,1157,605"/>
<area shape="rect" href="xen_8c.html#a7ba53f4f869b74569192380f1adfd40c" title=" " alt="" coords="981,861,1144,902"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="767,705,882,732"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="751,376,898,403"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="744,604,905,631"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="770,452,879,479"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="771,553,878,580"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="522,756,634,783"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="475,807,681,833"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="475,705,681,732"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="19,322,171,363"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="499,249,657,276"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="496,300,660,327"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="262,148,397,175"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="232,249,427,276"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="249,300,410,327"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="258,199,401,225"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="5,260,184,287"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="25,209,165,236"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="489,604,667,631"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="481,401,675,428"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="492,452,664,479"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="495,503,661,529"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="507,553,649,580"/>
<area shape="rect" href="xen_8c.html#a0fb0356e88890003922daf35627420a8" title=" " alt="" coords="733,941,916,982"/>
<area shape="rect" href="xen_8c.html#a48738df3c98025631e2412d90758136c" title=" " alt="" coords="729,868,920,895"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="537,959,619,985"/>
<area shape="rect" href="xen_8c.html#a59091fb436633f85ba3e28187f5794d0" title=" " alt="" coords="499,908,657,935"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="1205,173,1405,200"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="987,119,1139,145"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="998,224,1127,251"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="987,56,1138,83"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="749,107,900,149"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="499,115,657,141"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="760,224,889,251"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="743,5,906,32"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="737,56,912,83"/>
</map>
</div>

</div>
</div>
<a id="adb63e5a650d4571316b450d153a3105d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb63e5a650d4571316b450d153a3105d">&#9670;&nbsp;</a></span>kvm_apic_match_dest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_apic_match_dest </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>shorthand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dest_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01067">1067</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;{</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *target = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    u32 mda = <a class="code" href="lapic_8c.html#a8fb87d02d911e49b5793e391702afe7e">kvm_apic_mda</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, dest, source, target);</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160; </div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <a class="code" href="ioapic_8h.html#aca68c0d4ac8df0838e209fb5300f7be3">ASSERT</a>(target);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordflow">switch</span> (shorthand) {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="lapic_8h.html#acc73bace457403e7d23ff22afac7df0f">APIC_DEST_NOSHORT</a>:</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="keywordflow">if</span> (dest_mode == APIC_DEST_PHYSICAL)</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6">kvm_apic_match_physical_addr</a>(target, mda);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#a870119cb74033f360164df90029af75a">kvm_apic_match_logical_addr</a>(target, mda);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">case</span> APIC_DEST_SELF:</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="keywordflow">return</span> target == source;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordflow">case</span> APIC_DEST_ALLINC:</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordflow">case</span> APIC_DEST_ALLBUT:</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <span class="keywordflow">return</span> target != source;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a870119cb74033f360164df90029af75a"><div class="ttname"><a href="lapic_8c.html#a870119cb74033f360164df90029af75a">kvm_apic_match_logical_addr</a></div><div class="ttdeci">static bool kvm_apic_match_logical_addr(struct kvm_lapic *apic, u32 mda)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01013">lapic.c:1013</a></div></div>
<div class="ttc" id="alapic_8c_html_a8fb87d02d911e49b5793e391702afe7e"><div class="ttname"><a href="lapic_8c.html#a8fb87d02d911e49b5793e391702afe7e">kvm_apic_mda</a></div><div class="ttdeci">static u32 kvm_apic_mda(struct kvm_vcpu *vcpu, unsigned int dest_id, struct kvm_lapic *source, struct kvm_lapic *target)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01055">lapic.c:1055</a></div></div>
<div class="ttc" id="alapic_8c_html_ae8c127c0d736bacbfa2cdc6b3fd5c2f6"><div class="ttname"><a href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6">kvm_apic_match_physical_addr</a></div><div class="ttdeci">static bool kvm_apic_match_physical_addr(struct kvm_lapic *apic, u32 mda)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00993">lapic.c:993</a></div></div>
<div class="ttc" id="alapic_8h_html_acc73bace457403e7d23ff22afac7df0f"><div class="ttname"><a href="lapic_8h.html#acc73bace457403e7d23ff22afac7df0f">APIC_DEST_NOSHORT</a></div><div class="ttdeci">#define APIC_DEST_NOSHORT</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00016">lapic.h:16</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_adb63e5a650d4571316b450d153a3105d_cgraph.png" border="0" usemap="#alapic_8c_adb63e5a650d4571316b450d153a3105d_cgraph" alt=""/></div>
<map name="alapic_8c_adb63e5a650d4571316b450d153a3105d_cgraph" id="alapic_8c_adb63e5a650d4571316b450d153a3105d_cgraph">
<area shape="rect" title=" " alt="" coords="5,171,173,197"/>
<area shape="rect" href="lapic_8c.html#a870119cb74033f360164df90029af75a" title=" " alt="" coords="227,95,446,121"/>
<area shape="rect" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6" title=" " alt="" coords="221,171,452,197"/>
<area shape="rect" href="lapic_8c.html#a8fb87d02d911e49b5793e391702afe7e" title=" " alt="" coords="276,272,397,299"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="712,157,855,184"/>
<area shape="rect" href="lapic_8c.html#a98bde25094c754b30e796357ba643ab0" title=" " alt="" coords="500,107,656,133"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="505,5,651,32"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="704,5,863,32"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="518,259,638,285"/>
<area shape="rect" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096" title=" " alt="" coords="522,157,634,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_adb63e5a650d4571316b450d153a3105d_icgraph.png" border="0" usemap="#alapic_8c_adb63e5a650d4571316b450d153a3105d_icgraph" alt=""/></div>
<map name="alapic_8c_adb63e5a650d4571316b450d153a3105d_icgraph" id="alapic_8c_adb63e5a650d4571316b450d153a3105d_icgraph">
<area shape="rect" title=" " alt="" coords="1973,327,2141,354"/>
<area shape="rect" href="ioapic_8c.html#aca4e6c938829fb401b5c01cba3bd19b2" title=" " alt="" coords="1749,93,1913,135"/>
<area shape="rect" href="ioapic_8c.html#a3ec3324d9c7d9168d100c79fc7c19b33" title=" " alt="" coords="793,189,967,215"/>
<area shape="rect" href="avic_8c.html#ad9345a779111a59de8fa4110106c3adf" title=" " alt="" coords="1743,239,1918,266"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="1751,291,1910,332"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="1739,357,1922,383"/>
<area shape="rect" href="ioapic_8c.html#acaaa84ad163291aa716c59fa3bec3715" title=" " alt="" coords="1743,407,1918,434"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1736,759,1925,786"/>
<area shape="rect" href="ioapic_8h.html#a049de3e03383dab21c2cb6c3033e66ae" title=" " alt="" coords="1739,458,1922,485"/>
<area shape="rect" href="ioapic_8c.html#a6a7d0d8b3a3717172c57ed1916318952" title=" " alt="" coords="1525,5,1688,47"/>
<area shape="rect" href="ioapic_8c.html#a6c0258d75d3c40d5674a574997bdd453" title=" " alt="" coords="1525,123,1688,164"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="421,202,584,229"/>
<area shape="rect" href="ioapic_8c.html#a1d24315dec2401b4c45b224469c7379d" title=" " alt="" coords="1301,64,1447,105"/>
<area shape="rect" href="ioapic_8c.html#a477f1b98bf8d9dfcd1e51c743d79ac47" title=" " alt="" coords="237,202,361,229"/>
<area shape="rect" href="ioapic_8c.html#aa590f4d1416bf84560a4e9693c638f55" title=" " alt="" coords="1074,71,1165,98"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="792,315,968,342"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="632,322,744,349"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="429,439,577,466"/>
<area shape="rect" href="irq__comm_8c.html#ae12bd4085acdb92be18af95ac983d5a5" title=" " alt="" coords="225,498,373,525"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="5,678,177,705"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1298,130,1450,157"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1044,123,1195,164"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="804,587,956,628"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="1295,290,1453,317"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="1046,290,1193,317"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="1541,341,1673,367"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="1531,391,1682,418"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="1299,341,1449,367"/>
<area shape="rect" href="x86_8c.html#a8aac590d2b896fcad86c5a2971164c1c" title=" " alt="" coords="1539,442,1675,469"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="1305,391,1443,418"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="1079,391,1160,418"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="1549,493,1664,519"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="1533,734,1680,761"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="1526,810,1687,837"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1552,914,1661,941"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="1553,1015,1660,1042"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="1271,493,1477,519"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="1016,543,1223,570"/>
<area shape="rect" href="ioapic_8c.html#a21c528e901ef596bba3f882ed5ac9597" title=" " alt="" coords="1057,493,1182,519"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1295,721,1453,747"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="1292,771,1456,798"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1052,645,1187,671"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1022,746,1217,773"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1039,797,1200,823"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1048,695,1191,722"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="1042,848,1197,889"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="1285,822,1463,849"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="1277,965,1471,991"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="1291,1015,1457,1042"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="1303,1066,1445,1093"/>
</map>
</div>

</div>
</div>
<a id="a870119cb74033f360164df90029af75a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a870119cb74033f360164df90029af75a">&#9670;&nbsp;</a></span>kvm_apic_match_logical_addr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_apic_match_logical_addr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>mda</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01013">1013</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;{</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    u32 logical_id;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160; </div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#a98bde25094c754b30e796357ba643ab0">kvm_apic_broadcast</a>(apic, mda))</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160; </div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    logical_id = <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_LDR);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160; </div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic))</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="keywordflow">return</span> ((logical_id &gt;&gt; 16) == (mda &gt;&gt; 16))</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;               &amp;&amp; (logical_id &amp; mda &amp; 0xffff) != 0;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    logical_id = GET_APIC_LOGICAL_ID(logical_id);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_DFR)) {</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="keywordflow">case</span> APIC_DFR_FLAT:</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="keywordflow">return</span> (logical_id &amp; mda) != 0;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordflow">case</span> APIC_DFR_CLUSTER:</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <span class="keywordflow">return</span> ((logical_id &gt;&gt; 4) == (mda &gt;&gt; 4))</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;               &amp;&amp; (logical_id &amp; mda &amp; 0xf) != 0;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    }</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a98bde25094c754b30e796357ba643ab0"><div class="ttname"><a href="lapic_8c.html#a98bde25094c754b30e796357ba643ab0">kvm_apic_broadcast</a></div><div class="ttdeci">static bool kvm_apic_broadcast(struct kvm_lapic *apic, u32 mda)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00987">lapic.c:987</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a870119cb74033f360164df90029af75a_cgraph.png" border="0" usemap="#alapic_8c_a870119cb74033f360164df90029af75a_cgraph" alt=""/></div>
<map name="alapic_8c_a870119cb74033f360164df90029af75a_cgraph" id="alapic_8c_a870119cb74033f360164df90029af75a_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,224,57"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="484,5,627,32"/>
<area shape="rect" href="lapic_8c.html#a98bde25094c754b30e796357ba643ab0" title=" " alt="" coords="272,31,428,57"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="277,81,423,108"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="476,81,635,108"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a870119cb74033f360164df90029af75a_icgraph.png" border="0" usemap="#alapic_8c_a870119cb74033f360164df90029af75a_icgraph" alt=""/></div>
<map name="alapic_8c_a870119cb74033f360164df90029af75a_icgraph" id="alapic_8c_a870119cb74033f360164df90029af75a_icgraph">
<area shape="rect" title=" " alt="" coords="2189,327,2408,354"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="1973,327,2141,354"/>
<area shape="rect" href="ioapic_8c.html#aca4e6c938829fb401b5c01cba3bd19b2" title=" " alt="" coords="1749,93,1913,135"/>
<area shape="rect" href="ioapic_8c.html#a3ec3324d9c7d9168d100c79fc7c19b33" title=" " alt="" coords="793,189,967,215"/>
<area shape="rect" href="avic_8c.html#ad9345a779111a59de8fa4110106c3adf" title=" " alt="" coords="1743,239,1918,266"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="1751,291,1910,332"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="1739,357,1922,383"/>
<area shape="rect" href="ioapic_8c.html#acaaa84ad163291aa716c59fa3bec3715" title=" " alt="" coords="1743,407,1918,434"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1736,734,1925,761"/>
<area shape="rect" href="ioapic_8h.html#a049de3e03383dab21c2cb6c3033e66ae" title=" " alt="" coords="1739,458,1922,485"/>
<area shape="rect" href="ioapic_8c.html#a6a7d0d8b3a3717172c57ed1916318952" title=" " alt="" coords="1525,5,1688,47"/>
<area shape="rect" href="ioapic_8c.html#a6c0258d75d3c40d5674a574997bdd453" title=" " alt="" coords="1525,123,1688,164"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="421,202,584,229"/>
<area shape="rect" href="ioapic_8c.html#a1d24315dec2401b4c45b224469c7379d" title=" " alt="" coords="1301,64,1447,105"/>
<area shape="rect" href="ioapic_8c.html#a477f1b98bf8d9dfcd1e51c743d79ac47" title=" " alt="" coords="237,202,361,229"/>
<area shape="rect" href="ioapic_8c.html#aa590f4d1416bf84560a4e9693c638f55" title=" " alt="" coords="1074,71,1165,98"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="792,315,968,342"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="632,322,744,349"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="429,423,577,450"/>
<area shape="rect" href="irq__comm_8c.html#ae12bd4085acdb92be18af95ac983d5a5" title=" " alt="" coords="225,474,373,501"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="5,645,177,671"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1298,130,1450,157"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1044,123,1195,164"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="804,587,956,628"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="1295,290,1453,317"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="1046,290,1193,317"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="1541,341,1673,367"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="1531,391,1682,418"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="1299,341,1449,367"/>
<area shape="rect" href="x86_8c.html#a8aac590d2b896fcad86c5a2971164c1c" title=" " alt="" coords="1539,442,1675,469"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="1305,391,1443,418"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="1079,391,1160,418"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="1549,493,1664,519"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="1533,709,1680,735"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="1526,771,1687,798"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1552,847,1661,874"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="1553,949,1660,975"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="1271,493,1477,519"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="1016,543,1223,570"/>
<area shape="rect" href="ioapic_8c.html#a21c528e901ef596bba3f882ed5ac9597" title=" " alt="" coords="1057,493,1182,519"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1295,695,1453,722"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="1292,746,1456,773"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1052,645,1187,671"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1022,746,1217,773"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1039,797,1200,823"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1048,695,1191,722"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="1285,797,1463,823"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="1277,898,1471,925"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="1291,949,1457,975"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="1303,999,1445,1026"/>
</map>
</div>

</div>
</div>
<a id="ae8c127c0d736bacbfa2cdc6b3fd5c2f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8c127c0d736bacbfa2cdc6b3fd5c2f6">&#9670;&nbsp;</a></span>kvm_apic_match_physical_addr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_apic_match_physical_addr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>mda</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00993">993</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;{</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#a98bde25094c754b30e796357ba643ab0">kvm_apic_broadcast</a>(apic, mda))</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment">     * Hotplug hack: Accept interrupts for vCPUs in xAPIC mode as if they</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment">     * were in x2APIC mode if the target APIC ID can&#39;t be encoded as an</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment">     * xAPIC ID.  This allows unique addressing of hotplugged vCPUs (which</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">     * start in xAPIC mode) with an APIC ID that is unaddressable in xAPIC</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment">     * mode.  Match the x2APIC ID if and only if the target APIC ID can&#39;t</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment">     * be encoded in xAPIC to avoid spurious matches against a vCPU that</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment">     * changed its (addressable) xAPIC ID (which is writable).</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic) || mda &gt; 0xff)</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        <span class="keywordflow">return</span> mda == <a class="code" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718">kvm_x2apic_id</a>(apic);</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="keywordflow">return</span> mda == <a class="code" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096">kvm_xapic_id</a>(apic);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a8bdd67ff70db633e45cce412fb4c7718"><div class="ttname"><a href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718">kvm_x2apic_id</a></div><div class="ttdeci">static u32 kvm_x2apic_id(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00143">lapic.c:143</a></div></div>
<div class="ttc" id="alapic_8h_html_a4f07303d20a06eeb408d4985c5e15096"><div class="ttname"><a href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096">kvm_xapic_id</a></div><div class="ttdeci">static u8 kvm_xapic_id(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00276">lapic.h:276</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ae8c127c0d736bacbfa2cdc6b3fd5c2f6_cgraph.png" border="0" usemap="#alapic_8c_ae8c127c0d736bacbfa2cdc6b3fd5c2f6_cgraph" alt=""/></div>
<map name="alapic_8c_ae8c127c0d736bacbfa2cdc6b3fd5c2f6_cgraph" id="alapic_8c_ae8c127c0d736bacbfa2cdc6b3fd5c2f6_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,236,83"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="488,5,631,32"/>
<area shape="rect" href="lapic_8c.html#a98bde25094c754b30e796357ba643ab0" title=" " alt="" coords="284,31,440,57"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="302,81,422,108"/>
<area shape="rect" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096" title=" " alt="" coords="306,132,418,159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ae8c127c0d736bacbfa2cdc6b3fd5c2f6_icgraph.png" border="0" usemap="#alapic_8c_ae8c127c0d736bacbfa2cdc6b3fd5c2f6_icgraph" alt=""/></div>
<map name="alapic_8c_ae8c127c0d736bacbfa2cdc6b3fd5c2f6_icgraph" id="alapic_8c_ae8c127c0d736bacbfa2cdc6b3fd5c2f6_icgraph">
<area shape="rect" title=" " alt="" coords="2189,327,2420,354"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="1973,327,2141,354"/>
<area shape="rect" href="ioapic_8c.html#aca4e6c938829fb401b5c01cba3bd19b2" title=" " alt="" coords="1749,93,1913,135"/>
<area shape="rect" href="ioapic_8c.html#a3ec3324d9c7d9168d100c79fc7c19b33" title=" " alt="" coords="793,189,967,215"/>
<area shape="rect" href="avic_8c.html#ad9345a779111a59de8fa4110106c3adf" title=" " alt="" coords="1743,239,1918,266"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="1751,291,1910,332"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="1739,357,1922,383"/>
<area shape="rect" href="ioapic_8c.html#acaaa84ad163291aa716c59fa3bec3715" title=" " alt="" coords="1743,407,1918,434"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1736,734,1925,761"/>
<area shape="rect" href="ioapic_8h.html#a049de3e03383dab21c2cb6c3033e66ae" title=" " alt="" coords="1739,458,1922,485"/>
<area shape="rect" href="ioapic_8c.html#a6a7d0d8b3a3717172c57ed1916318952" title=" " alt="" coords="1525,5,1688,47"/>
<area shape="rect" href="ioapic_8c.html#a6c0258d75d3c40d5674a574997bdd453" title=" " alt="" coords="1525,123,1688,164"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="421,202,584,229"/>
<area shape="rect" href="ioapic_8c.html#a1d24315dec2401b4c45b224469c7379d" title=" " alt="" coords="1301,64,1447,105"/>
<area shape="rect" href="ioapic_8c.html#a477f1b98bf8d9dfcd1e51c743d79ac47" title=" " alt="" coords="237,202,361,229"/>
<area shape="rect" href="ioapic_8c.html#aa590f4d1416bf84560a4e9693c638f55" title=" " alt="" coords="1074,71,1165,98"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="792,315,968,342"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="632,322,744,349"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="429,423,577,450"/>
<area shape="rect" href="irq__comm_8c.html#ae12bd4085acdb92be18af95ac983d5a5" title=" " alt="" coords="225,474,373,501"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="5,645,177,671"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1298,130,1450,157"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1044,123,1195,164"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="804,587,956,628"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="1295,290,1453,317"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="1046,290,1193,317"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="1541,341,1673,367"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="1531,391,1682,418"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="1299,341,1449,367"/>
<area shape="rect" href="x86_8c.html#a8aac590d2b896fcad86c5a2971164c1c" title=" " alt="" coords="1539,442,1675,469"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="1305,391,1443,418"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="1079,391,1160,418"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="1549,493,1664,519"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="1533,709,1680,735"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="1526,771,1687,798"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1552,847,1661,874"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="1553,949,1660,975"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="1271,493,1477,519"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="1016,543,1223,570"/>
<area shape="rect" href="ioapic_8c.html#a21c528e901ef596bba3f882ed5ac9597" title=" " alt="" coords="1057,493,1182,519"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1295,695,1453,722"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="1292,746,1456,773"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1052,645,1187,671"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1022,746,1217,773"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1039,797,1200,823"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1048,695,1191,722"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="1285,797,1463,823"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="1277,898,1471,925"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="1291,949,1457,975"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="1303,999,1445,1026"/>
</map>
</div>

</div>
</div>
<a id="a8fb87d02d911e49b5793e391702afe7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fb87d02d911e49b5793e391702afe7e">&#9670;&nbsp;</a></span>kvm_apic_mda()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u32 kvm_apic_mda </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>dest_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01055">1055</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;{</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordtype">bool</span> ipi = source != NULL;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keywordflow">if</span> (!vcpu-&gt;kvm-&gt;arch.x2apic_broadcast_quirk_disabled &amp;&amp;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        !ipi &amp;&amp; dest_id == <a class="code" href="lapic_8h.html#a8e368c4d317e2f3289d8287fc28c4d19">APIC_BROADCAST</a> &amp;&amp; <a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(target))</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="lapic_8h.html#a481da2cdd19d996fb0378476375133c6">X2APIC_BROADCAST</a>;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160; </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">return</span> dest_id;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a8fb87d02d911e49b5793e391702afe7e_cgraph.png" border="0" usemap="#alapic_8c_a8fb87d02d911e49b5793e391702afe7e_cgraph" alt=""/></div>
<map name="alapic_8c_a8fb87d02d911e49b5793e391702afe7e_cgraph" id="alapic_8c_a8fb87d02d911e49b5793e391702afe7e_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,127,32"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="175,5,317,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a8fb87d02d911e49b5793e391702afe7e_icgraph.png" border="0" usemap="#alapic_8c_a8fb87d02d911e49b5793e391702afe7e_icgraph" alt=""/></div>
<map name="alapic_8c_a8fb87d02d911e49b5793e391702afe7e_icgraph" id="alapic_8c_a8fb87d02d911e49b5793e391702afe7e_icgraph">
<area shape="rect" title=" " alt="" coords="2189,327,2311,354"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="1973,327,2141,354"/>
<area shape="rect" href="ioapic_8c.html#aca4e6c938829fb401b5c01cba3bd19b2" title=" " alt="" coords="1749,93,1913,135"/>
<area shape="rect" href="ioapic_8c.html#a3ec3324d9c7d9168d100c79fc7c19b33" title=" " alt="" coords="793,189,967,215"/>
<area shape="rect" href="avic_8c.html#ad9345a779111a59de8fa4110106c3adf" title=" " alt="" coords="1743,239,1918,266"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="1751,291,1910,332"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="1739,357,1922,383"/>
<area shape="rect" href="ioapic_8c.html#acaaa84ad163291aa716c59fa3bec3715" title=" " alt="" coords="1743,407,1918,434"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1736,734,1925,761"/>
<area shape="rect" href="ioapic_8h.html#a049de3e03383dab21c2cb6c3033e66ae" title=" " alt="" coords="1739,458,1922,485"/>
<area shape="rect" href="ioapic_8c.html#a6a7d0d8b3a3717172c57ed1916318952" title=" " alt="" coords="1525,5,1688,47"/>
<area shape="rect" href="ioapic_8c.html#a6c0258d75d3c40d5674a574997bdd453" title=" " alt="" coords="1525,123,1688,164"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="421,202,584,229"/>
<area shape="rect" href="ioapic_8c.html#a1d24315dec2401b4c45b224469c7379d" title=" " alt="" coords="1301,64,1447,105"/>
<area shape="rect" href="ioapic_8c.html#a477f1b98bf8d9dfcd1e51c743d79ac47" title=" " alt="" coords="237,202,361,229"/>
<area shape="rect" href="ioapic_8c.html#aa590f4d1416bf84560a4e9693c638f55" title=" " alt="" coords="1074,71,1165,98"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="792,315,968,342"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="632,322,744,349"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="429,423,577,450"/>
<area shape="rect" href="irq__comm_8c.html#ae12bd4085acdb92be18af95ac983d5a5" title=" " alt="" coords="225,474,373,501"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="5,645,177,671"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1298,130,1450,157"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1044,123,1195,164"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="804,587,956,628"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="1295,290,1453,317"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="1046,290,1193,317"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="1541,341,1673,367"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="1531,391,1682,418"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="1299,341,1449,367"/>
<area shape="rect" href="x86_8c.html#a8aac590d2b896fcad86c5a2971164c1c" title=" " alt="" coords="1539,442,1675,469"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="1305,391,1443,418"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="1079,391,1160,418"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="1549,493,1664,519"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="1533,709,1680,735"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="1526,771,1687,798"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1552,847,1661,874"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="1553,949,1660,975"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="1271,493,1477,519"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="1016,543,1223,570"/>
<area shape="rect" href="ioapic_8c.html#a21c528e901ef596bba3f882ed5ac9597" title=" " alt="" coords="1057,493,1182,519"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1295,695,1453,722"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="1292,746,1456,773"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1052,645,1187,671"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1022,746,1217,773"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1039,797,1200,823"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1048,695,1191,722"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="1285,797,1463,823"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="1277,898,1471,925"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="1291,949,1457,975"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="1303,999,1445,1026"/>
</map>
</div>

</div>
</div>
<a id="a504357f1b937154f9789bbff3e8c4db2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a504357f1b937154f9789bbff3e8c4db2">&#9670;&nbsp;</a></span>kvm_apic_nmi_wd_deliver()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_apic_nmi_wd_deliver </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02782">2782</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;{</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160; </div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;    <span class="keywordflow">if</span> (apic)</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;        <a class="code" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50">kvm_apic_local_deliver</a>(apic, APIC_LVT0);</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a504357f1b937154f9789bbff3e8c4db2_icgraph.png" border="0" usemap="#alapic_8c_a504357f1b937154f9789bbff3e8c4db2_icgraph" alt=""/></div>
<map name="alapic_8c_a504357f1b937154f9789bbff3e8c4db2_icgraph" id="alapic_8c_a504357f1b937154f9789bbff3e8c4db2_icgraph">
<area shape="rect" title=" " alt="" coords="523,5,717,32"/>
<area shape="rect" href="i8254_8c.html#acbae41d4a0d42e597f4bf44b3c1e9f99" title=" " alt="" coords="373,5,475,32"/>
<area shape="rect" href="i8254_8c.html#a13a38debbd4e494ffd488ef8abb5406c" title=" " alt="" coords="203,5,325,32"/>
<area shape="rect" href="x86_8c.html#a10224987f77e7370dd9f2b80352544ab" title=" " alt="" coords="5,5,155,32"/>
</map>
</div>

</div>
</div>
<a id="a637f6f499709ab30e61db1b69177ea00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a637f6f499709ab30e61db1b69177ea00">&#9670;&nbsp;</a></span>kvm_apic_pending_eoi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_apic_pending_eoi </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00110">110</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8">apic_test_vector</a>(vector, apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_ISR) ||</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <a class="code" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8">apic_test_vector</a>(vector, apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_IRR);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a637f6f499709ab30e61db1b69177ea00_cgraph.png" border="0" usemap="#alapic_8c_a637f6f499709ab30e61db1b69177ea00_cgraph" alt=""/></div>
<map name="alapic_8c_a637f6f499709ab30e61db1b69177ea00_cgraph" id="alapic_8c_a637f6f499709ab30e61db1b69177ea00_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,176,32"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="224,5,353,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a637f6f499709ab30e61db1b69177ea00_icgraph.png" border="0" usemap="#alapic_8c_a637f6f499709ab30e61db1b69177ea00_icgraph" alt=""/></div>
<map name="alapic_8c_a637f6f499709ab30e61db1b69177ea00_icgraph" id="alapic_8c_a637f6f499709ab30e61db1b69177ea00_icgraph">
<area shape="rect" title=" " alt="" coords="3160,348,3331,375"/>
<area shape="rect" href="ioapic_8c.html#aca4e6c938829fb401b5c01cba3bd19b2" title=" " alt="" coords="2939,310,3103,351"/>
<area shape="rect" href="ioapic_8c.html#a3ec3324d9c7d9168d100c79fc7c19b33" title=" " alt="" coords="2097,280,2271,307"/>
<area shape="rect" href="ioapic_8c.html#acaaa84ad163291aa716c59fa3bec3715" title=" " alt="" coords="2933,377,3108,404"/>
<area shape="rect" href="ioapic_8h.html#a049de3e03383dab21c2cb6c3033e66ae" title=" " alt="" coords="2929,429,3112,456"/>
<area shape="rect" href="ioapic_8c.html#a6a7d0d8b3a3717172c57ed1916318952" title=" " alt="" coords="2719,247,2881,289"/>
<area shape="rect" href="ioapic_8c.html#a6c0258d75d3c40d5674a574997bdd453" title=" " alt="" coords="2719,365,2881,406"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="1645,229,1807,256"/>
<area shape="rect" href="ioapic_8c.html#a1d24315dec2401b4c45b224469c7379d" title=" " alt="" coords="2522,294,2667,335"/>
<area shape="rect" href="ioapic_8c.html#a477f1b98bf8d9dfcd1e51c743d79ac47" title=" " alt="" coords="1412,63,1536,89"/>
<area shape="rect" href="x86_8c.html#a9c81b1b4617fffe8115b748bf5f13860" title=" " alt="" coords="1140,21,1332,48"/>
<area shape="rect" href="x86_8c.html#a10224987f77e7370dd9f2b80352544ab" title=" " alt="" coords="922,5,1071,32"/>
<area shape="rect" href="ioapic_8c.html#aa590f4d1416bf84560a4e9693c638f55" title=" " alt="" coords="2350,301,2441,328"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="2096,331,2272,357"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="1911,280,2023,307"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="1652,280,1800,307"/>
<area shape="rect" href="irq__comm_8c.html#ae12bd4085acdb92be18af95ac983d5a5" title=" " alt="" coords="1400,155,1548,181"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="1150,87,1322,113"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="921,56,1073,83"/>
<area shape="rect" href="irqchip_8c.html#a2c54cf3c324c7d2b9190fffcf4a1f20a" title=" " alt="" coords="698,56,853,83"/>
<area shape="rect" href="irq_8h.html#aaf23e09ccf4b445556e56ea8598e1311" title=" " alt="" coords="471,49,638,90"/>
<area shape="rect" href="x86_8c.html#aaf3dbbe842e06195f2e46694ea837380" title=" " alt="" coords="219,56,413,83"/>
<area shape="rect" href="kvm__main_8c.html#aaeec02d207c8ce5ca12b1ef2ac36fae0" title=" " alt="" coords="5,49,171,90"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="1885,331,2048,357"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="1675,331,1777,357"/>
<area shape="rect" href="lapic_8c.html#a501cf23b440691f979fad04c87067f93" title=" " alt="" coords="1615,385,1837,412"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="1387,323,1561,365"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1395,272,1553,299"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="1154,374,1318,415"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="928,491,1065,517"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="735,491,816,517"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="461,491,648,517"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="254,465,378,492"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1169,221,1303,248"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1139,167,1333,193"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1155,272,1317,299"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1165,323,1307,349"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="921,158,1073,199"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="907,224,1086,251"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="927,107,1067,133"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="696,213,855,254"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="903,275,1091,301"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="910,325,1083,352"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="709,279,842,305"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="921,376,1072,403"/>
<area shape="rect" href="vmx_8c.html#aa6d0d83d48d1737ca7aa8b2b5a6f066a" title=" " alt="" coords="1381,389,1567,416"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="2519,411,2671,437"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="2320,407,2471,449"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="1887,425,2046,452"/>
<area shape="rect" href="x86_8c.html#a8aac590d2b896fcad86c5a2971164c1c" title=" " alt="" coords="2732,431,2868,457"/>
</map>
</div>

</div>
</div>
<a id="a4b7f12cb3ba68245df79bc30d938b728"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b7f12cb3ba68245df79bc30d938b728">&#9670;&nbsp;</a></span>kvm_apic_send_ipi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_apic_send_ipi </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>icr_low</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>icr_high</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01504">1504</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;{</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="keyword">struct </span>kvm_lapic_irq irq;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160; </div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="comment">/* KVM has no delay and should always clear the BUSY/PENDING flag. */</span></div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    WARN_ON_ONCE(icr_low &amp; APIC_ICR_BUSY);</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160; </div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    irq.vector = icr_low &amp; APIC_VECTOR_MASK;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    irq.delivery_mode = icr_low &amp; APIC_MODE_MASK;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    irq.dest_mode = icr_low &amp; <a class="code" href="lapic_8h.html#a5e58cf75a31cd26e03db7f201861a8e4">APIC_DEST_MASK</a>;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    irq.level = (icr_low &amp; APIC_INT_ASSERT) != 0;</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    irq.trig_mode = icr_low &amp; APIC_INT_LEVELTRIG;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    irq.shorthand = icr_low &amp; <a class="code" href="lapic_8h.html#ad3b78bd2ddd9b9b15390755b6df98d3d">APIC_SHORT_MASK</a>;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    irq.msi_redir_hint = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic))</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        irq.dest_id = icr_high;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        irq.dest_id = GET_XAPIC_DEST_FIELD(icr_high);</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160; </div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    trace_kvm_apic_ipi(icr_low, irq.dest_id);</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160; </div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <a class="code" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210">kvm_irq_delivery_to_apic</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm, apic, &amp;irq, NULL);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;}</div>
<div class="ttc" id="airq_8h_html_a50293a78b5c0b6715243dc7854bcb210"><div class="ttname"><a href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210">kvm_irq_delivery_to_apic</a></div><div class="ttdeci">int kvm_irq_delivery_to_apic(struct kvm *kvm, struct kvm_lapic *src, struct kvm_lapic_irq *irq, struct dest_map *dest_map)</div><div class="ttdef"><b>Definition:</b> <a href="irq__comm_8c_source.html#l00047">irq_comm.c:47</a></div></div>
<div class="ttc" id="alapic_8h_html_a5e58cf75a31cd26e03db7f201861a8e4"><div class="ttname"><a href="lapic_8h.html#a5e58cf75a31cd26e03db7f201861a8e4">APIC_DEST_MASK</a></div><div class="ttdeci">#define APIC_DEST_MASK</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00017">lapic.h:17</a></div></div>
<div class="ttc" id="alapic_8h_html_ad3b78bd2ddd9b9b15390755b6df98d3d"><div class="ttname"><a href="lapic_8h.html#ad3b78bd2ddd9b9b15390755b6df98d3d">APIC_SHORT_MASK</a></div><div class="ttdeci">#define APIC_SHORT_MASK</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00015">lapic.h:15</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a4b7f12cb3ba68245df79bc30d938b728_cgraph.png" border="0" usemap="#alapic_8c_a4b7f12cb3ba68245df79bc30d938b728_cgraph" alt=""/></div>
<map name="alapic_8c_a4b7f12cb3ba68245df79bc30d938b728_cgraph" id="alapic_8c_a4b7f12cb3ba68245df79bc30d938b728_cgraph">
<area shape="rect" title=" " alt="" coords="5,259,152,285"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="1231,232,1374,259"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="200,487,389,513"/>
<area shape="rect" href="lapic_8c.html#a47d52843df792ef8e7bffdfb66a3b40b" title=" " alt="" coords="959,409,1140,436"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="437,257,605,284"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="451,105,592,132"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="701,752,837,779"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1458,676,1627,703"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="444,686,599,727"/>
<area shape="rect" href="lapic_8h.html#adfbea71ac96b210fb91bef47c77194f1" title=" " alt="" coords="953,460,1146,487"/>
<area shape="rect" href="x86_8c.html#a47d88660a2a5f8ee22df1253604d1ed7" title=" " alt="" coords="971,511,1128,553"/>
<area shape="rect" href="lapic_8c.html#ac9fecb7d9f4574931650af9abb4b9f4c" title=" " alt="" coords="968,745,1131,772"/>
<area shape="rect" href="lapic_8c.html#a870119cb74033f360164df90029af75a" title=" " alt="" coords="659,295,878,321"/>
<area shape="rect" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6" title=" " alt="" coords="653,156,884,183"/>
<area shape="rect" href="lapic_8c.html#a8fb87d02d911e49b5793e391702afe7e" title=" " alt="" coords="708,219,829,245"/>
<area shape="rect" href="lapic_8c.html#a98bde25094c754b30e796357ba643ab0" title=" " alt="" coords="971,257,1127,284"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="977,359,1122,385"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1223,359,1382,385"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="989,105,1109,132"/>
<area shape="rect" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096" title=" " alt="" coords="993,156,1105,183"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1457,512,1628,539"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="709,105,828,132"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="981,796,1118,823"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1249,593,1357,620"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1238,644,1367,671"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1239,695,1366,721"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1240,745,1365,772"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1215,796,1391,823"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1221,847,1385,873"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1241,948,1364,975"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1439,923,1647,949"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1466,973,1619,1000"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="677,569,861,610"/>
<area shape="rect" href="lapic_8c.html#a079d589509607a9d9baa6bed3eae7fa6" title=" " alt="" coords="957,629,1142,670"/>
<area shape="rect" href="lapic_8c.html#abbce6da431ef5f15d85b5fc741d3ef72" title=" " alt="" coords="945,577,1154,604"/>
<area shape="rect" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3" title=" " alt="" coords="932,695,1167,721"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a4b7f12cb3ba68245df79bc30d938b728_icgraph.png" border="0" usemap="#alapic_8c_a4b7f12cb3ba68245df79bc30d938b728_icgraph" alt=""/></div>
<map name="alapic_8c_a4b7f12cb3ba68245df79bc30d938b728_icgraph" id="alapic_8c_a4b7f12cb3ba68245df79bc30d938b728_icgraph">
<area shape="rect" title=" " alt="" coords="1577,164,1724,191"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="905,158,1057,199"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1369,109,1526,136"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="1365,215,1529,241"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1153,59,1287,85"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1123,215,1317,241"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1139,109,1301,136"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1149,7,1291,33"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="891,224,1070,251"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="911,275,1051,301"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="656,217,815,258"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="887,56,1075,83"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="399,107,572,133"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="669,56,802,83"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,56,584,83"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,81,339,108"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,31,101,57"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,81,115,108"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,132,116,159"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="905,5,1056,32"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="1143,295,1297,337"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="903,326,1058,367"/>
<area shape="rect" href="svm_8c.html#a82c8447e70f06dd52623c696446104b5" title=" " alt="" coords="632,359,839,385"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="632,308,839,335"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="427,359,543,385"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="427,308,544,335"/>
</map>
</div>

</div>
</div>
<a id="a54214770509be207a1c1271e8b48acf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54214770509be207a1c1271e8b48acf4">&#9670;&nbsp;</a></span>kvm_apic_set_dfr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_apic_set_dfr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00521">521</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;{</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_DFR, val);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    atomic_set_release(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm-&gt;arch.apic_map_dirty, <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a6a4e132eb192a22c351397837d4c082c">DIRTY</a>);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a54214770509be207a1c1271e8b48acf4_cgraph.png" border="0" usemap="#alapic_8c_a54214770509be207a1c1271e8b48acf4_cgraph" alt=""/></div>
<map name="alapic_8c_a54214770509be207a1c1271e8b48acf4_cgraph" id="alapic_8c_a54214770509be207a1c1271e8b48acf4_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,143,32"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="191,5,335,32"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="383,5,541,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a54214770509be207a1c1271e8b48acf4_icgraph.png" border="0" usemap="#alapic_8c_a54214770509be207a1c1271e8b48acf4_icgraph" alt=""/></div>
<map name="alapic_8c_a54214770509be207a1c1271e8b48acf4_icgraph" id="alapic_8c_a54214770509be207a1c1271e8b48acf4_icgraph">
<area shape="rect" title=" " alt="" coords="1589,262,1727,289"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1384,186,1541,213"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1398,287,1527,314"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1171,71,1306,98"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1141,122,1336,149"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1158,186,1319,213"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1167,262,1310,289"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="923,5,1075,47"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="910,71,1089,98"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="929,122,1069,149"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="678,64,837,105"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="905,173,1093,199"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="424,223,597,250"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="691,173,824,199"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="412,173,609,199"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="183,194,358,221"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="27,143,108,170"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="13,194,122,221"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="12,245,123,271"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="924,274,1075,301"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1174,375,1303,402"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="906,350,1093,377"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="913,401,1085,427"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="914,451,1085,478"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,267,350,308"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,333,364,359"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="710,375,805,402"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="689,426,826,453"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,303,129,330"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="470,375,551,402"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="657,477,857,503"/>
</map>
</div>

</div>
</div>
<a id="a501cf23b440691f979fad04c87067f93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a501cf23b440691f979fad04c87067f93">&#9670;&nbsp;</a></span>kvm_apic_set_eoi_accelerated()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_apic_set_eoi_accelerated </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01493">1493</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;{</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160; </div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    trace_kvm_eoi(apic, vector);</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160; </div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <a class="code" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4">kvm_ioapic_send_eoi</a>(apic, vector);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    kvm_make_request(KVM_REQ_EVENT, apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a501cf23b440691f979fad04c87067f93_cgraph.png" border="0" usemap="#alapic_8c_a501cf23b440691f979fad04c87067f93_cgraph" alt=""/></div>
<map name="alapic_8c_a501cf23b440691f979fad04c87067f93_cgraph" id="alapic_8c_a501cf23b440691f979fad04c87067f93_cgraph">
<area shape="rect" title=" " alt="" coords="5,823,228,849"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="276,823,439,849"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="2146,645,2275,672"/>
<area shape="rect" href="irq_8h.html#a68413268c1f1f354270e9a0de9c2fe44" title=" " alt="" coords="524,848,625,875"/>
<area shape="rect" href="lapic_8c.html#a900c0170b3a9f3c6869d072aa14055d1" title=" " alt="" coords="497,899,652,941"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="487,411,663,437"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="711,411,917,437"/>
<area shape="rect" href="ioapic_8c.html#aa590f4d1416bf84560a4e9693c638f55" title=" " alt="" coords="769,220,859,247"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="981,480,1095,507"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="2138,309,2283,336"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1159,500,1348,527"/>
<area shape="rect" href="lapic_8c.html#a47d52843df792ef8e7bffdfb66a3b40b" title=" " alt="" coords="1867,747,2048,773"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="1616,157,1784,184"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="1407,745,1549,772"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="1632,639,1768,665"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="2366,797,2535,824"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="1401,522,1555,563"/>
<area shape="rect" href="lapic_8h.html#adfbea71ac96b210fb91bef47c77194f1" title=" " alt="" coords="1861,411,2054,437"/>
<area shape="rect" href="x86_8c.html#a47d88660a2a5f8ee22df1253604d1ed7" title=" " alt="" coords="1879,462,2036,503"/>
<area shape="rect" href="lapic_8c.html#ac9fecb7d9f4574931650af9abb4b9f4c" title=" " alt="" coords="1876,696,2039,723"/>
<area shape="rect" href="lapic_8c.html#a870119cb74033f360164df90029af75a" title=" " alt="" coords="1848,208,2067,235"/>
<area shape="rect" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6" title=" " alt="" coords="1842,107,2073,133"/>
<area shape="rect" href="lapic_8c.html#a8fb87d02d911e49b5793e391702afe7e" title=" " alt="" coords="1897,157,2018,184"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="2379,208,2522,235"/>
<area shape="rect" href="lapic_8c.html#a98bde25094c754b30e796357ba643ab0" title=" " alt="" coords="2133,208,2289,235"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="2371,309,2530,336"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="2151,5,2271,32"/>
<area shape="rect" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096" title=" " alt="" coords="2155,56,2267,83"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="2365,975,2536,1001"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1641,745,1759,772"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1889,848,2026,875"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="2157,949,2265,976"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="2147,848,2274,875"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="2148,899,2273,925"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="2123,696,2299,723"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="2129,747,2293,773"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="2149,797,2272,824"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="2347,848,2555,875"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="2374,747,2527,773"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="1608,522,1792,563"/>
<area shape="rect" href="lapic_8c.html#a079d589509607a9d9baa6bed3eae7fa6" title=" " alt="" coords="1865,579,2050,621"/>
<area shape="rect" href="lapic_8c.html#abbce6da431ef5f15d85b5fc741d3ef72" title=" " alt="" coords="1853,528,2062,555"/>
<area shape="rect" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3" title=" " alt="" coords="1840,645,2075,672"/>
<area shape="rect" href="ioapic_8c.html#a1d24315dec2401b4c45b224469c7379d" title=" " alt="" coords="965,193,1111,234"/>
<area shape="rect" href="ioapic_8c.html#a6a7d0d8b3a3717172c57ed1916318952" title=" " alt="" coords="1172,134,1335,175"/>
<area shape="rect" href="ioapic_8c.html#aca4e6c938829fb401b5c01cba3bd19b2" title=" " alt="" coords="1396,193,1560,234"/>
<area shape="rect" href="ioapic_8c.html#a4d9be607caa84875994b688c86711dcc" title=" " alt="" coords="1403,127,1553,169"/>
<area shape="rect" href="lapic_8c.html#a637f6f499709ab30e61db1b69177ea00" title=" " alt="" coords="1615,208,1785,235"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a501cf23b440691f979fad04c87067f93_icgraph.png" border="0" usemap="#alapic_8c_a501cf23b440691f979fad04c87067f93_icgraph" alt=""/></div>
<map name="alapic_8c_a501cf23b440691f979fad04c87067f93_icgraph" id="alapic_8c_a501cf23b440691f979fad04c87067f93_icgraph">
<area shape="rect" title=" " alt="" coords="239,5,461,32"/>
<area shape="rect" href="vmx_8c.html#aa6d0d83d48d1737ca7aa8b2b5a6f066a" title=" " alt="" coords="5,5,191,32"/>
</map>
</div>

</div>
</div>
<a id="a3d272e1b73f22f797955e7ddea84b741"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d272e1b73f22f797955e7ddea84b741">&#9670;&nbsp;</a></span>kvm_apic_set_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_apic_set_irq </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_lapic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdest__map.html">dest_map</a> *&#160;</td>
          <td class="paramname"><em>dest_map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00823">823</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;{</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10">__apic_accept_irq</a>(apic, irq-&gt;delivery_mode, irq-&gt;vector,</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            irq-&gt;level, irq-&gt;trig_mode, <a class="code" href="structdest__map.html">dest_map</a>);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a3d272e1b73f22f797955e7ddea84b741_cgraph.png" border="0" usemap="#alapic_8c_a3d272e1b73f22f797955e7ddea84b741_cgraph" alt=""/></div>
<map name="alapic_8c_a3d272e1b73f22f797955e7ddea84b741_cgraph" id="alapic_8c_a3d272e1b73f22f797955e7ddea84b741_cgraph">
<area shape="rect" title=" " alt="" coords="5,183,141,209"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="189,183,327,209"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="409,31,517,57"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="398,81,527,108"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="399,132,526,159"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="400,183,525,209"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="375,233,551,260"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="381,284,545,311"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="401,335,524,361"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="617,5,788,32"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="618,56,787,83"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="599,309,807,336"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="626,360,779,387"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a3d272e1b73f22f797955e7ddea84b741_icgraph.png" border="0" usemap="#alapic_8c_a3d272e1b73f22f797955e7ddea84b741_icgraph" alt=""/></div>
<map name="alapic_8c_a3d272e1b73f22f797955e7ddea84b741_icgraph" id="alapic_8c_a3d272e1b73f22f797955e7ddea84b741_icgraph">
<area shape="rect" title=" " alt="" coords="1209,642,1345,668"/>
<area shape="rect" href="lapic_8c.html#a33f4e295e9710d133e3e38e0aed35edb" title=" " alt="" coords="1005,530,1119,556"/>
<area shape="rect" href="x86_8c.html#a62f68db08e13f0a4f3d158afda4631b1" title=" " alt="" coords="977,853,1147,894"/>
<area shape="rect" href="hyperv_8c.html#a31df0137f9f8af335cbac3d4179b12a2" title=" " alt="" coords="963,474,1161,500"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="725,568,915,595"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="985,664,1139,705"/>
<area shape="rect" href="hyperv_8c.html#abc5b43adce506bcd416c9e84aa6cf54b" title=" " alt="" coords="986,966,1138,992"/>
<area shape="rect" href="lapic_8c.html#a7195db5c58bcea2e080ee79cdaeae617" title=" " alt="" coords="753,510,887,536"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="5,51,184,78"/>
<area shape="rect" href="async__pf_8c.html#ad9b3dc2e31779a009859785fae9a8ec5" title=" " alt="" coords="751,860,889,887"/>
<area shape="rect" href="async__pf_8c.html#aac6395172fbf7947412604d7e2f33417" title=" " alt="" coords="739,946,901,988"/>
<area shape="rect" href="async__pf_8c.html#a55ca283598f3d739a56b50a0f7b908e2" title=" " alt="" coords="503,860,661,887"/>
<area shape="rect" href="mmu_8c.html#a1dfa699dd0b96d4724b718c504e376c9" title=" " alt="" coords="238,852,433,879"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="495,954,669,980"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="267,1055,404,1082"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="295,1004,376,1031"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="281,903,390,930"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="280,954,391,980"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="54,928,135,955"/>
<area shape="rect" href="hyperv_8c.html#a4ca4f7e6e021870753e15fa1072e828d" title=" " alt="" coords="753,456,887,483"/>
<area shape="rect" href="hyperv_8c.html#ac96f1fa9ec6ac0ac26c24ca65cc1547e" title=" " alt="" coords="511,26,653,52"/>
<area shape="rect" href="xen_8c.html#aaf398a8803a79984b06fbf9e2a64193c" title=" " alt="" coords="261,26,409,52"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="525,279,639,306"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="509,468,655,495"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="501,178,663,204"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="527,568,637,595"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="529,638,635,664"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="279,279,391,306"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="257,330,414,356"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="232,178,439,204"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="232,228,439,255"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="13,279,176,306"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="21,330,169,356"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="21,380,168,407"/>
<area shape="rect" href="ioapic_8c.html#a21c528e901ef596bba3f882ed5ac9597" title=" " alt="" coords="32,178,157,204"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="7,228,183,255"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="259,432,411,473"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="257,498,414,524"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="253,380,417,407"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="27,498,162,524"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="239,548,432,575"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="249,599,421,626"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="252,650,419,676"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="264,700,407,727"/>
<area shape="rect" href="irq__comm_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="235,751,436,778"/>
<area shape="rect" href="xen_8c.html#a7ba53f4f869b74569192380f1adfd40c" title=" " alt="" coords="739,740,901,781"/>
<area shape="rect" href="xen_8c.html#a0fb0356e88890003922daf35627420a8" title=" " alt="" coords="491,794,673,836"/>
<area shape="rect" href="xen_8c.html#a48738df3c98025631e2412d90758136c" title=" " alt="" coords="487,743,677,770"/>
<area shape="rect" href="hyperv_8c.html#acbc8238b9eb8f24485d6bc9eefc06474" title=" " alt="" coords="751,1034,889,1060"/>
<area shape="rect" href="hyperv_8c.html#a899d9e3beba5f4a4bdc0f2a9f94d2943" title=" " alt="" coords="489,1055,675,1082"/>
</map>
</div>

</div>
</div>
<a id="a2a5ccc92c8b75ad6118bdc1b84a43554"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a5ccc92c8b75ad6118bdc1b84a43554">&#9670;&nbsp;</a></span>kvm_apic_set_ldr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_apic_set_ldr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00515">515</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;{</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_LDR, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    atomic_set_release(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm-&gt;arch.apic_map_dirty, <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a6a4e132eb192a22c351397837d4c082c">DIRTY</a>);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a2a5ccc92c8b75ad6118bdc1b84a43554_cgraph.png" border="0" usemap="#alapic_8c_a2a5ccc92c8b75ad6118bdc1b84a43554_cgraph" alt=""/></div>
<map name="alapic_8c_a2a5ccc92c8b75ad6118bdc1b84a43554_cgraph" id="alapic_8c_a2a5ccc92c8b75ad6118bdc1b84a43554_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,141,32"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="189,5,333,32"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="381,5,540,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a2a5ccc92c8b75ad6118bdc1b84a43554_icgraph.png" border="0" usemap="#alapic_8c_a2a5ccc92c8b75ad6118bdc1b84a43554_icgraph" alt=""/></div>
<map name="alapic_8c_a2a5ccc92c8b75ad6118bdc1b84a43554_icgraph" id="alapic_8c_a2a5ccc92c8b75ad6118bdc1b84a43554_icgraph">
<area shape="rect" title=" " alt="" coords="1589,262,1725,289"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1384,186,1541,213"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1398,287,1527,314"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1171,71,1306,98"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1141,122,1336,149"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1158,186,1319,213"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1167,262,1310,289"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="923,5,1075,47"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="910,71,1089,98"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="929,122,1069,149"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="678,64,837,105"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="905,173,1093,199"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="424,223,597,250"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="691,173,824,199"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="412,173,609,199"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="183,194,358,221"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="27,143,108,170"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="13,194,122,221"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="12,245,123,271"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="924,274,1075,301"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1174,375,1303,402"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="906,350,1093,377"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="913,401,1085,427"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="914,451,1085,478"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,267,350,308"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,333,364,359"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="710,375,805,402"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="689,426,826,453"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,303,129,330"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="470,375,551,402"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="657,477,857,503"/>
</map>
</div>

</div>
</div>
<a id="a4768d4990380510ec220c3e510d32598"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4768d4990380510ec220c3e510d32598">&#9670;&nbsp;</a></span>kvm_apic_set_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_apic_set_state </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_lapic_state *&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02984">2984</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;{</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;    <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160; </div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;    static_call_cond(kvm_x86_apicv_pre_state_restore)(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160; </div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;    <a class="code" href="lapic_8c.html#a8d747385873e52f47e85179c21521e73">kvm_lapic_set_base</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_base);</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;    <span class="comment">/* set SPIV separately to get count of SW disabled APICs right */</span></div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;    <a class="code" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe">apic_set_spiv</a>(apic, *((u32 *)(s-&gt;regs + APIC_SPIV)));</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160; </div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    r = <a class="code" href="lapic_8c.html#a5862d5df95ddd956a652f1dd3f319706">kvm_apic_state_fixup</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, s, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    <span class="keywordflow">if</span> (r) {</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;        <a class="code" href="lapic_8c.html#a756b707dd502680db2eed7759defde40">kvm_recalculate_apic_map</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm);</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    }</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    memcpy(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic-&gt;regs, s-&gt;regs, <span class="keyword">sizeof</span>(*s));</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160; </div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;    atomic_set_release(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm-&gt;arch.apic_map_dirty, <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a6a4e132eb192a22c351397837d4c082c">DIRTY</a>);</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;    <a class="code" href="lapic_8c.html#a756b707dd502680db2eed7759defde40">kvm_recalculate_apic_map</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm);</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;    <a class="code" href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf">kvm_apic_set_version</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160; </div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;    <a class="code" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab">apic_update_ppr</a>(apic);</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;    <a class="code" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2">cancel_apic_timer</a>(apic);</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a23c6ec12b6c61cf7b3c02ff13099dbcf">expired_tscdeadline</a> = 0;</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;    <a class="code" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d">apic_update_lvtt</a>(apic);</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;    <a class="code" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1">apic_manage_nmi_watchdog</a>(apic, <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_LVT0));</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;    <a class="code" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3">update_divide_count</a>(apic);</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;    <a class="code" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005">__start_apic_timer</a>(apic, APIC_TMCCT);</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_TMCCT, 0);</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;    <a class="code" href="lapic_8c.html#a5468339c2df08ca538b77d4d48915c35">kvm_apic_update_apicv</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;    <span class="keywordflow">if</span> (apic-&gt;<a class="code" href="structkvm__lapic.html#a4642d7f446bbd9ede893aa1ebbcc9c1a">apicv_active</a>) {</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;        static_call_cond(kvm_x86_apicv_post_state_restore)(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;        static_call_cond(kvm_x86_hwapic_irr_update)(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, <a class="code" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79">apic_find_highest_irr</a>(apic));</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;        static_call_cond(kvm_x86_hwapic_isr_update)(<a class="code" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0">apic_find_highest_isr</a>(apic));</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;    }</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;    kvm_make_request(KVM_REQ_EVENT, <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ioapic_8h.html#a5efb8a822bd7119cfc8db075f12bf452">ioapic_in_kernel</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm))</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;        <a class="code" href="ioapic_8c.html#a6c0258d75d3c40d5674a574997bdd453">kvm_rtc_eoi_tracking_restore_one</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160; </div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;    <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_arb_prio = 0;</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160; </div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;}</div>
<div class="ttc" id="aioapic_8c_html_a6c0258d75d3c40d5674a574997bdd453"><div class="ttname"><a href="ioapic_8c.html#a6c0258d75d3c40d5674a574997bdd453">kvm_rtc_eoi_tracking_restore_one</a></div><div class="ttdeci">void kvm_rtc_eoi_tracking_restore_one(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="ioapic_8c_source.html#l00139">ioapic.c:139</a></div></div>
<div class="ttc" id="aioapic_8h_html_a5efb8a822bd7119cfc8db075f12bf452"><div class="ttname"><a href="ioapic_8h.html#a5efb8a822bd7119cfc8db075f12bf452">ioapic_in_kernel</a></div><div class="ttdeci">static int ioapic_in_kernel(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="ioapic_8h_source.html#l00104">ioapic.h:104</a></div></div>
<div class="ttc" id="alapic_8c_html_a108aca5a9980d721f30b333be204d005"><div class="ttname"><a href="lapic_8c.html#a108aca5a9980d721f30b333be204d005">__start_apic_timer</a></div><div class="ttdeci">static void __start_apic_timer(struct kvm_lapic *apic, u32 count_reg)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02216">lapic.c:2216</a></div></div>
<div class="ttc" id="alapic_8c_html_a5468339c2df08ca538b77d4d48915c35"><div class="ttname"><a href="lapic_8c.html#a5468339c2df08ca538b77d4d48915c35">kvm_apic_update_apicv</a></div><div class="ttdeci">void kvm_apic_update_apicv(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02578">lapic.c:2578</a></div></div>
<div class="ttc" id="alapic_8c_html_a756b707dd502680db2eed7759defde40"><div class="ttname"><a href="lapic_8c.html#a756b707dd502680db2eed7759defde40">kvm_recalculate_apic_map</a></div><div class="ttdeci">void kvm_recalculate_apic_map(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00374">lapic.c:374</a></div></div>
<div class="ttc" id="alapic_8c_html_a8d747385873e52f47e85179c21521e73"><div class="ttname"><a href="lapic_8c.html#a8d747385873e52f47e85179c21521e73">kvm_lapic_set_base</a></div><div class="ttdeci">void kvm_lapic_set_base(struct kvm_vcpu *vcpu, u64 value)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02530">lapic.c:2530</a></div></div>
<div class="ttc" id="alapic_8c_html_a946cf21407471f7a6ba449b2435055c3"><div class="ttname"><a href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3">update_divide_count</a></div><div class="ttdeci">static void update_divide_count(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01711">lapic.c:1711</a></div></div>
<div class="ttc" id="alapic_8c_html_ac7a03b55710bfcc78be7af0609f6f93d"><div class="ttname"><a href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d">apic_update_lvtt</a></div><div class="ttdeci">static void apic_update_lvtt(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01754">lapic.c:1754</a></div></div>
<div class="ttc" id="alapic_8c_html_aeb32a868e76d57da9fab57fce43efdbe"><div class="ttname"><a href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe">apic_set_spiv</a></div><div class="ttdeci">static void apic_set_spiv(struct kvm_lapic *apic, u32 val)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00486">lapic.c:486</a></div></div>
<div class="ttc" id="alapic_8c_html_afefd171448cafa66f80ecb9b9659ebb1"><div class="ttname"><a href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1">apic_manage_nmi_watchdog</a></div><div class="ttdeci">static void apic_manage_nmi_watchdog(struct kvm_lapic *apic, u32 lvt0_val)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02232">lapic.c:2232</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a4768d4990380510ec220c3e510d32598_cgraph.png" border="0" usemap="#alapic_8c_a4768d4990380510ec220c3e510d32598_cgraph" alt=""/></div>
<map name="alapic_8c_a4768d4990380510ec220c3e510d32598_cgraph" id="alapic_8c_a4768d4990380510ec220c3e510d32598_cgraph">
<area shape="rect" title=" " alt="" coords="5,712,157,739"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="239,88,382,115"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="751,1067,897,1094"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="752,662,896,688"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="746,307,902,334"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="745,459,903,486"/>
<area shape="rect" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1" title=" " alt="" coords="205,324,416,351"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="255,662,366,688"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="507,408,637,435"/>
<area shape="rect" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2" title=" " alt="" coords="754,358,894,384"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="246,510,375,536"/>
<area shape="rect" href="ioapic_8h.html#a5efb8a822bd7119cfc8db075f12bf452" title=" " alt="" coords="509,814,635,840"/>
<area shape="rect" href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf" title=" " alt="" coords="227,763,394,790"/>
<area shape="rect" href="lapic_8c.html#a5862d5df95ddd956a652f1dd3f319706" title=" " alt="" coords="490,1488,654,1515"/>
<area shape="rect" href="lapic_8c.html#a5468339c2df08ca538b77d4d48915c35" title=" " alt="" coords="221,1098,400,1124"/>
<area shape="rect" href="lapic_8c.html#a8d747385873e52f47e85179c21521e73" title=" " alt="" coords="233,883,388,910"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="211,1270,411,1296"/>
<area shape="rect" href="ioapic_8c.html#a6c0258d75d3c40d5674a574997bdd453" title=" " alt="" coords="229,1321,392,1362"/>
<area shape="rect" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3" title=" " alt="" coords="232,971,389,998"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="755,88,893,115"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="984,88,1111,115"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="753,38,895,64"/>
<area shape="rect" href="lapic_8c.html#a0efcb9037756de47e9d28f0a5ea1009f" title=" " alt="" coords="491,139,653,166"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="747,190,901,232"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="968,1290,1127,1316"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="968,839,1127,866"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="987,307,1107,334"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1175,371,1324,398"/>
<area shape="rect" href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c" title=" " alt="" coords="497,291,647,318"/>
<area shape="rect" href="xen_8h.html#ae436f94d060f3cb8029695c5a9fddc42" title=" " alt="" coords="475,611,669,638"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="744,408,904,435"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="983,358,1112,384"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="501,510,643,536"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="501,342,643,384"/>
<area shape="rect" href="irq_8h.html#aeedc8b3b9e709414b2db2436224b75e8" title=" " alt="" coords="767,814,881,840"/>
<area shape="rect" href="cpuid_8h.html#ad8c2a90f2f099af1d7ca23750d9d2eb9" title=" " alt="" coords="507,763,637,790"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="765,1143,883,1170"/>
<area shape="rect" href="lapic_8c.html#aa06cb4ebbfa40dbfa494b3b4cd9f8833" title=" " alt="" coords="737,1412,911,1439"/>
<area shape="rect" href="lapic_8c.html#a39839decdbbb9e8a6718f3ac7c0b3707" title=" " alt="" coords="737,1463,911,1490"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="753,1280,895,1307"/>
<area shape="rect" href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f" title=" " alt="" coords="728,1219,920,1246"/>
<area shape="rect" href="lapic_8c.html#a40e5c52e8a79166cfc433f413bbe9e36" title=" " alt="" coords="515,1118,629,1144"/>
<area shape="rect" href="lapic_8c.html#a22d25ec6370d0efd4c569b7317d28098" title=" " alt="" coords="481,966,663,992"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="485,864,659,891"/>
<area shape="rect" href="cpuid_8c.html#a537512099e11c7ab0553aeae5e38d9ea" title=" " alt="" coords="471,1016,673,1043"/>
<area shape="rect" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39" title=" " alt="" coords="506,1270,638,1296"/>
<area shape="rect" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44" title=" " alt="" coords="495,1320,649,1347"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="501,1371,643,1398"/>
<area shape="rect" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d" title=" " alt="" coords="483,1422,661,1464"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="464,1219,680,1246"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a4768d4990380510ec220c3e510d32598_icgraph.png" border="0" usemap="#alapic_8c_a4768d4990380510ec220c3e510d32598_icgraph" alt=""/></div>
<map name="alapic_8c_a4768d4990380510ec220c3e510d32598_icgraph" id="alapic_8c_a4768d4990380510ec220c3e510d32598_icgraph">
<area shape="rect" title=" " alt="" coords="583,13,735,39"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="384,5,535,47"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,13,336,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="aaa6716cc0b30bec513d223fbfdecfdcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa6716cc0b30bec513d223fbfdecfdcf">&#9670;&nbsp;</a></span>kvm_apic_set_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_apic_set_version </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00573">573</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;{</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    u32 v = 0;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>))</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    v = <a class="code" href="lapic_8c.html#ab1a256486b56b5660f30be7a7c352672">APIC_VERSION</a> | ((apic-&gt;<a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a> - 1) &lt;&lt; 16);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160; </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">     * KVM emulates 82093AA datasheet (with in-kernel IOAPIC implementation)</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">     * which doesn&#39;t have EOI register; Some buggy OSes (e.g. Windows with</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">     * Hyper-V role) disable EOI broadcast in lapic not checking for IOAPIC</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">     * version first and level-triggered interrupts never get EOIed in</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">     * IOAPIC.</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cpuid_8h.html#ad8c2a90f2f099af1d7ca23750d9d2eb9">guest_cpuid_has</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, X86_FEATURE_X2APIC) &amp;&amp;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        !<a class="code" href="ioapic_8h.html#a5efb8a822bd7119cfc8db075f12bf452">ioapic_in_kernel</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm))</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        v |= APIC_LVR_DIRECTED_EOI;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_LVR, v);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;}</div>
<div class="ttc" id="acpuid_8h_html_ad8c2a90f2f099af1d7ca23750d9d2eb9"><div class="ttname"><a href="cpuid_8h.html#ad8c2a90f2f099af1d7ca23750d9d2eb9">guest_cpuid_has</a></div><div class="ttdeci">static __always_inline bool guest_cpuid_has(struct kvm_vcpu *vcpu, unsigned int x86_feature)</div><div class="ttdef"><b>Definition:</b> <a href="cpuid_8h_source.html#l00083">cpuid.h:83</a></div></div>
<div class="ttc" id="alapic_8c_html_ab1a256486b56b5660f30be7a7c352672"><div class="ttname"><a href="lapic_8c.html#ab1a256486b56b5660f30be7a7c352672">APIC_VERSION</a></div><div class="ttdeci">#define APIC_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00056">lapic.c:56</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aaa6716cc0b30bec513d223fbfdecfdcf_cgraph.png" border="0" usemap="#alapic_8c_aaa6716cc0b30bec513d223fbfdecfdcf_cgraph" alt=""/></div>
<map name="alapic_8c_aaa6716cc0b30bec513d223fbfdecfdcf_cgraph" id="alapic_8c_aaa6716cc0b30bec513d223fbfdecfdcf_cgraph">
<area shape="rect" title=" " alt="" coords="5,171,172,197"/>
<area shape="rect" href="cpuid_8h.html#ad8c2a90f2f099af1d7ca23750d9d2eb9" title=" " alt="" coords="227,95,357,121"/>
<area shape="rect" href="ioapic_8h.html#a5efb8a822bd7119cfc8db075f12bf452" title=" " alt="" coords="229,145,355,172"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="220,196,364,223"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="233,247,351,273"/>
<area shape="rect" href="reverse__cpuid_8h.html#aeac4cdaa1c8b53f46ea791f355b1d08c" title=" " alt="" coords="676,5,783,32"/>
<area shape="rect" href="cpuid_8h.html#af2af2645f203b5d9bad2088af0da5c1e" title=" " alt="" coords="412,95,597,121"/>
<area shape="rect" href="reverse__cpuid_8h.html#a76ac51b62ef170b755204cb8b958e585" title=" " alt="" coords="1068,31,1216,57"/>
<area shape="rect" href="reverse__cpuid_8h.html#ae10c1644e90cb8443e5a32554acfd700" title=" " alt="" coords="861,31,1020,57"/>
<area shape="rect" href="reverse__cpuid_8h.html#adf3299d46978c685ba9b46ebb1536680" title=" " alt="" coords="645,107,813,133"/>
<area shape="rect" href="cpuid_8h.html#a638557b30255883157acafa55a351d0d" title=" " alt="" coords="647,158,812,199"/>
<area shape="rect" href="reverse__cpuid_8h.html#a3f7e53c68e5610be44d760fd4854f892" title=" " alt="" coords="658,56,801,83"/>
<area shape="rect" href="cpuid_8c.html#a7220f0f9a6d0047aef7619e272fa9518" title=" " alt="" coords="872,165,1009,192"/>
<area shape="rect" href="reverse__cpuid_8h.html#a8f6dc89865c6af98e621e1ddcf401cae" title=" " alt="" coords="883,81,998,108"/>
<area shape="rect" href="irq_8h.html#aeedc8b3b9e709414b2db2436224b75e8" title=" " alt="" coords="448,145,561,172"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="425,196,584,223"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aaa6716cc0b30bec513d223fbfdecfdcf_icgraph.png" border="0" usemap="#alapic_8c_aaa6716cc0b30bec513d223fbfdecfdcf_icgraph" alt=""/></div>
<map name="alapic_8c_aaa6716cc0b30bec513d223fbfdecfdcf_icgraph" id="alapic_8c_aaa6716cc0b30bec513d223fbfdecfdcf_icgraph">
<area shape="rect" title=" " alt="" coords="1505,149,1672,175"/>
<area shape="rect" href="lapic_8c.html#a200be826b3634c1b5a377464f35d540f" title=" " alt="" coords="1306,173,1455,215"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1305,27,1457,54"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1316,261,1445,287"/>
<area shape="rect" href="cpuid_8c.html#ae8f7489a3e05a9bcd5dfdae82c33d618" title=" " alt="" coords="1304,108,1457,149"/>
<area shape="rect" href="x86_8c.html#a10dfde66dc94e352514570cc4a2beaa2" title=" " alt="" coords="1101,173,1256,215"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="639,122,798,149"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,181,129,207"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1103,5,1254,47"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1114,271,1243,298"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="867,282,1053,309"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="874,358,1046,385"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="875,231,1045,258"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="412,173,571,215"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,261,364,287"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="671,282,766,309"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="650,231,787,258"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="451,261,532,287"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="619,383,819,410"/>
<area shape="rect" href="cpuid_8c.html#a0ff60eac33c1bf95a3889674e34251ad" title=" " alt="" coords="1119,115,1239,142"/>
<area shape="rect" href="cpuid_8c.html#a5066ac0b188677d15925709568a91c9d" title=" " alt="" coords="885,115,1035,156"/>
<area shape="rect" href="cpuid_8c.html#ad4dde50a2939106abd2baf99683ac139" title=" " alt="" coords="885,49,1035,91"/>
</map>
</div>

</div>
</div>
<a id="a22d25ec6370d0efd4c569b7317d28098"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22d25ec6370d0efd4c569b7317d28098">&#9670;&nbsp;</a></span>kvm_apic_set_x2apic_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_apic_set_x2apic_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00527">527</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;{</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    u32 ldr = <a class="code" href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f">kvm_apic_calc_x2apic_ldr</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    WARN_ON_ONCE(<span class="keywordtype">id</span> != apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_id);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_ID, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_LDR, ldr);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    atomic_set_release(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm-&gt;arch.apic_map_dirty, <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a6a4e132eb192a22c351397837d4c082c">DIRTY</a>);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a8447cf7bc387797722507fa915cf735f"><div class="ttname"><a href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f">kvm_apic_calc_x2apic_ldr</a></div><div class="ttdeci">static u32 kvm_apic_calc_x2apic_ldr(u32 id)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00166">lapic.c:166</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a22d25ec6370d0efd4c569b7317d28098_cgraph.png" border="0" usemap="#alapic_8c_a22d25ec6370d0efd4c569b7317d28098_cgraph" alt=""/></div>
<map name="alapic_8c_a22d25ec6370d0efd4c569b7317d28098_cgraph" id="alapic_8c_a22d25ec6370d0efd4c569b7317d28098_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,187,57"/>
<area shape="rect" href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f" title=" " alt="" coords="235,5,427,32"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="259,56,403,83"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="475,56,633,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a22d25ec6370d0efd4c569b7317d28098_icgraph.png" border="0" usemap="#alapic_8c_a22d25ec6370d0efd4c569b7317d28098_icgraph" alt=""/></div>
<map name="alapic_8c_a22d25ec6370d0efd4c569b7317d28098_icgraph" id="alapic_8c_a22d25ec6370d0efd4c569b7317d28098_icgraph">
<area shape="rect" title=" " alt="" coords="1703,143,1884,170"/>
<area shape="rect" href="lapic_8c.html#a8d747385873e52f47e85179c21521e73" title=" " alt="" coords="1500,143,1655,170"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1300,89,1452,115"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1311,194,1441,221"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="1101,143,1252,170"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1101,5,1252,47"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="412,45,571,71"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,297,129,323"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1112,273,1241,299"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="867,399,1053,426"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="874,298,1046,325"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="875,247,1045,274"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,424,350,465"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,326,364,353"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="671,399,766,426"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="650,349,787,375"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="451,349,532,375"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="619,298,819,325"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="879,95,1041,122"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="873,179,1047,206"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="669,95,768,122"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="665,45,772,71"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,167,350,208"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="448,259,535,286"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="678,247,759,274"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="664,146,773,173"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="663,197,774,223"/>
</map>
</div>

</div>
</div>
<a id="ab24997de83c3fd44d1cd7520a615883e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab24997de83c3fd44d1cd7520a615883e">&#9670;&nbsp;</a></span>kvm_apic_set_xapic_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_apic_set_xapic_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00509">509</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;{</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_ID, <span class="keywordtype">id</span> &lt;&lt; 24);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    atomic_set_release(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm-&gt;arch.apic_map_dirty, <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a6a4e132eb192a22c351397837d4c082c">DIRTY</a>);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ab24997de83c3fd44d1cd7520a615883e_cgraph.png" border="0" usemap="#alapic_8c_ab24997de83c3fd44d1cd7520a615883e_cgraph" alt=""/></div>
<map name="alapic_8c_ab24997de83c3fd44d1cd7520a615883e_cgraph" id="alapic_8c_ab24997de83c3fd44d1cd7520a615883e_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,179,32"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="227,5,371,32"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="419,5,577,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ab24997de83c3fd44d1cd7520a615883e_icgraph.png" border="0" usemap="#alapic_8c_ab24997de83c3fd44d1cd7520a615883e_icgraph" alt=""/></div>
<map name="alapic_8c_ab24997de83c3fd44d1cd7520a615883e_icgraph" id="alapic_8c_ab24997de83c3fd44d1cd7520a615883e_icgraph">
<area shape="rect" title=" " alt="" coords="1801,376,1975,403"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1596,221,1753,248"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1386,427,1515,453"/>
<area shape="rect" href="lapic_8c.html#a8d747385873e52f47e85179c21521e73" title=" " alt="" coords="1597,376,1752,403"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1383,272,1518,299"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1353,169,1548,196"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1370,56,1531,83"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1379,221,1522,248"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="1135,158,1287,199"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="1122,107,1301,133"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="1141,224,1281,251"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="897,107,1055,149"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="1117,56,1305,83"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="889,5,1063,32"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="909,56,1043,83"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="636,56,833,83"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="412,56,587,83"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="230,56,311,83"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="216,107,325,133"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="215,5,326,32"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="1136,275,1287,301"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1147,452,1276,479"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="883,489,1069,516"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="890,591,1062,617"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="891,439,1061,465"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,522,350,563"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,424,364,451"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="687,489,782,516"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="666,540,803,567"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,384,129,411"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="459,489,540,516"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="635,641,835,668"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1375,325,1527,352"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="1136,376,1287,403"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="901,221,1051,262"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="420,271,579,297"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="895,376,1057,403"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="685,388,784,415"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="681,337,788,364"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="420,322,579,363"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="456,388,543,415"/>
</map>
</div>

</div>
</div>
<a id="a5862d5df95ddd956a652f1dd3f319706"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5862d5df95ddd956a652f1dd3f319706">&#9670;&nbsp;</a></span>kvm_apic_state_fixup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kvm_apic_state_fixup </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_lapic_state *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>set</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02932">2932</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;{</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(vcpu-&gt;arch.apic)) {</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;        u32 *<span class="keywordtype">id</span> = (u32 *)(s-&gt;regs + APIC_ID);</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;        u32 *ldr = (u32 *)(s-&gt;regs + APIC_LDR);</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;        u64 icr;</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160; </div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;        <span class="keywordflow">if</span> (vcpu-&gt;kvm-&gt;arch.x2apic_format) {</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;            <span class="keywordflow">if</span> (*<span class="keywordtype">id</span> != vcpu-&gt;vcpu_id)</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;                <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;            <span class="keywordflow">if</span> (set)</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;                *<span class="keywordtype">id</span> &gt;&gt;= 24;</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;                *<span class="keywordtype">id</span> &lt;&lt;= 24;</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;        }</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160; </div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;<span class="comment">         * In x2APIC mode, the LDR is fixed and based on the id.  And</span></div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;<span class="comment">         * ICR is internally a single 64-bit register, but needs to be</span></div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;<span class="comment">         * split to ICR+ICR2 in userspace for backwards compatibility.</span></div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;        <span class="keywordflow">if</span> (set) {</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;            *ldr = <a class="code" href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f">kvm_apic_calc_x2apic_ldr</a>(*<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160; </div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;            icr = <a class="code" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178">__kvm_lapic_get_reg</a>(s-&gt;regs, APIC_ICR) |</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;                  (u64)<a class="code" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178">__kvm_lapic_get_reg</a>(s-&gt;regs, APIC_ICR2) &lt;&lt; 32;</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;            <a class="code" href="lapic_8c.html#a39839decdbbb9e8a6718f3ac7c0b3707">__kvm_lapic_set_reg64</a>(s-&gt;regs, APIC_ICR, icr);</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;            icr = <a class="code" href="lapic_8c.html#aa06cb4ebbfa40dbfa494b3b4cd9f8833">__kvm_lapic_get_reg64</a>(s-&gt;regs, APIC_ICR);</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;            <a class="code" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e">__kvm_lapic_set_reg</a>(s-&gt;regs, APIC_ICR2, icr &gt;&gt; 32);</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;        }</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;    }</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160; </div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a39839decdbbb9e8a6718f3ac7c0b3707"><div class="ttname"><a href="lapic_8c.html#a39839decdbbb9e8a6718f3ac7c0b3707">__kvm_lapic_set_reg64</a></div><div class="ttdeci">static __always_inline void __kvm_lapic_set_reg64(char *regs, int reg, u64 val)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00093">lapic.c:93</a></div></div>
<div class="ttc" id="alapic_8c_html_aa06cb4ebbfa40dbfa494b3b4cd9f8833"><div class="ttname"><a href="lapic_8c.html#aa06cb4ebbfa40dbfa494b3b4cd9f8833">__kvm_lapic_get_reg64</a></div><div class="ttdeci">static __always_inline u64 __kvm_lapic_get_reg64(char *regs, int reg)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00082">lapic.c:82</a></div></div>
<div class="ttc" id="alapic_8h_html_aa28a43e0f54449e2ec4d25e1f8ecb178"><div class="ttname"><a href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178">__kvm_lapic_get_reg</a></div><div class="ttdeci">static u32 __kvm_lapic_get_reg(char *regs, int reg_off)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00174">lapic.h:174</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a5862d5df95ddd956a652f1dd3f319706_cgraph.png" border="0" usemap="#alapic_8c_a5862d5df95ddd956a652f1dd3f319706_cgraph" alt=""/></div>
<map name="alapic_8c_a5862d5df95ddd956a652f1dd3f319706_cgraph" id="alapic_8c_a5862d5df95ddd956a652f1dd3f319706_cgraph">
<area shape="rect" title=" " alt="" coords="5,132,169,159"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="234,5,393,32"/>
<area shape="rect" href="lapic_8c.html#aa06cb4ebbfa40dbfa494b3b4cd9f8833" title=" " alt="" coords="226,56,401,83"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="234,107,393,133"/>
<area shape="rect" href="lapic_8c.html#a39839decdbbb9e8a6718f3ac7c0b3707" title=" " alt="" coords="226,157,401,184"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="242,208,385,235"/>
<area shape="rect" href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f" title=" " alt="" coords="217,259,409,285"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a5862d5df95ddd956a652f1dd3f319706_icgraph.png" border="0" usemap="#alapic_8c_a5862d5df95ddd956a652f1dd3f319706_icgraph" alt=""/></div>
<map name="alapic_8c_a5862d5df95ddd956a652f1dd3f319706_icgraph" id="alapic_8c_a5862d5df95ddd956a652f1dd3f319706_icgraph">
<area shape="rect" title=" " alt="" coords="785,46,949,73"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="584,17,737,43"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="585,71,737,98"/>
<area shape="rect" href="x86_8c.html#aca5ab82fb669f6a99e011293efed0d5d" title=" " alt="" coords="384,5,536,47"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,46,336,73"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,46,129,73"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="385,71,535,112"/>
</map>
</div>

</div>
</div>
<a id="a5468339c2df08ca538b77d4d48915c35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5468339c2df08ca538b77d4d48915c35">&#9670;&nbsp;</a></span>kvm_apic_update_apicv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_apic_update_apicv </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02578">2578</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;{</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160; </div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    <span class="keywordflow">if</span> (apic-&gt;<a class="code" href="structkvm__lapic.html#a4642d7f446bbd9ede893aa1ebbcc9c1a">apicv_active</a>) {</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;        <span class="comment">/* irr_pending is always true when apicv is activated. */</span></div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#ada91b44df57789499ad32ad287c21217">irr_pending</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#ad8506269387d80ddd1c6cc8a96c9398a">isr_count</a> = 1;</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;<span class="comment">         * Don&#39;t clear irr_pending, searching the IRR can race with</span></div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;<span class="comment">         * updates from the CPU as APICv is still active from hardware&#39;s</span></div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;<span class="comment">         * perspective.  The flag will be cleared as appropriate when</span></div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;<span class="comment">         * KVM injects the interrupt.</span></div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#ad8506269387d80ddd1c6cc8a96c9398a">isr_count</a> = <a class="code" href="lapic_8c.html#a40e5c52e8a79166cfc433f413bbe9e36">count_vectors</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_ISR);</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    }</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a4b58ed7ed33fe007d319d39271d8d1b9">highest_isr_cache</a> = -1;</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a40e5c52e8a79166cfc433f413bbe9e36"><div class="ttname"><a href="lapic_8c.html#a40e5c52e8a79166cfc433f413bbe9e36">count_vectors</a></div><div class="ttdeci">static u8 count_vectors(void *bitmap)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00640">lapic.c:640</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a5468339c2df08ca538b77d4d48915c35_cgraph.png" border="0" usemap="#alapic_8c_a5468339c2df08ca538b77d4d48915c35_cgraph" alt=""/></div>
<map name="alapic_8c_a5468339c2df08ca538b77d4d48915c35_cgraph" id="alapic_8c_a5468339c2df08ca538b77d4d48915c35_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,184,32"/>
<area shape="rect" href="lapic_8c.html#a40e5c52e8a79166cfc433f413bbe9e36" title=" " alt="" coords="232,5,345,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a5468339c2df08ca538b77d4d48915c35_icgraph.png" border="0" usemap="#alapic_8c_a5468339c2df08ca538b77d4d48915c35_icgraph" alt=""/></div>
<map name="alapic_8c_a5468339c2df08ca538b77d4d48915c35_icgraph" id="alapic_8c_a5468339c2df08ca538b77d4d48915c35_icgraph">
<area shape="rect" title=" " alt="" coords="2219,646,2397,673"/>
<area shape="rect" href="x86_8c.html#a87cedb0953e919148694dd8b06c9cb73" title=" " alt="" coords="1973,494,2171,521"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1996,701,2148,727"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="2007,646,2137,673"/>
<area shape="rect" href="x86_8c.html#a384702aafa8cdbab3cf92b3d576bb6fb" title=" " alt="" coords="1743,494,1925,521"/>
<area shape="rect" href="svm_2nested_8c.html#a73d1cb9b9fcfa112138681d9080a1c05" title=" " alt="" coords="1757,298,1911,325"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="1263,494,1401,521"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="1052,545,1133,571"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="767,595,953,622"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="581,654,705,681"/>
<area shape="rect" href="svm_2nested_8c.html#a777240cb9ab00451d21a1b204e19c5a6" title=" " alt="" coords="1491,151,1683,178"/>
<area shape="rect" href="svm_2nested_8c.html#a03b4be7ca82710ecd17bc66f2a20cad8" title=" " alt="" coords="1480,356,1695,397"/>
<area shape="rect" href="svm_2nested_8c.html#a574acca11f4be4ea5df18f36307f9bf6" title=" " alt="" coords="1485,42,1689,69"/>
<area shape="rect" href="svm_2nested_8c.html#a4ec7e878f6af209e74dd84285ee0198f" title=" " alt="" coords="568,239,719,266"/>
<area shape="rect" href="svm_8h.html#a7b2d87885eea1b11b1bf1045c21c5a8b" title=" " alt="" coords="1485,422,1690,449"/>
<area shape="rect" href="svm_2hyperv_8c.html#a33efa5fe6a664e9b2a70232b93485645" title=" " alt="" coords="1496,291,1679,332"/>
<area shape="rect" href="svm_8c.html#a08788d6a633657aa9e7e2f3b09db9b40" title=" " alt="" coords="1255,173,1409,215"/>
<area shape="rect" href="svm_8c.html#ae135f7d753cde05e6f726fb75e971ddd" title=" " alt="" coords="1252,71,1412,98"/>
<area shape="rect" href="svm_8c.html#a3f8983432f4aae138a6f4d167c561132" title=" " alt="" coords="1265,122,1399,149"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="1033,181,1152,207"/>
<area shape="rect" href="svm_8c.html#af2ee2a03530f5b7a02a127d8b779d2ae" title=" " alt="" coords="777,181,943,207"/>
<area shape="rect" href="svm_2nested_8c.html#a3286f29b650004d599595557d310136e" title=" " alt="" coords="1233,342,1431,369"/>
<area shape="rect" href="svm_2nested_8c.html#a962af1ea814d32a42ada9f601918cee5" title=" " alt="" coords="1247,5,1417,47"/>
<area shape="rect" href="svm_2nested_8c.html#ab7904bb74631114e0bd5102a52aab4c8" title=" " alt="" coords="1001,39,1184,80"/>
<area shape="rect" href="svm_2nested_8c.html#a9b21378a3de8baae9bcb689f00cad48e" title=" " alt="" coords="771,46,949,73"/>
<area shape="rect" href="svm_2nested_8c.html#a8bac395de612ca2b748016c6f5ea0fef" title=" " alt="" coords="776,97,944,123"/>
<area shape="rect" href="svm_8c.html#a5d52c93beeb85ba5a99283d4eba589e1" title=" " alt="" coords="371,302,520,329"/>
<area shape="rect" href="svm_8c.html#a1eacc7b79f62ed332056217c35fe3be4" title=" " alt="" coords="176,367,323,394"/>
<area shape="rect" href="svm_8c.html#a7c2323b13a5022aa9f6a9ae5ebe4d830" title=" " alt="" coords="5,367,128,394"/>
<area shape="rect" href="svm_2nested_8c.html#a387a91a64bb25a25590ee3b019f0e0a2" title=" " alt="" coords="1243,443,1421,470"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1759,719,1909,760"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="1013,730,1172,757"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1769,646,1899,673"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="1494,595,1681,622"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="1501,697,1673,723"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="1502,646,1673,673"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="1013,647,1172,688"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1285,545,1379,571"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="1232,697,1432,723"/>
</map>
</div>

</div>
</div>
<a id="a922ce0b7b20cf9b9ef4930d3d81e8360"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a922ce0b7b20cf9b9ef4930d3d81e8360">&#9670;&nbsp;</a></span>kvm_apic_update_irr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_apic_update_irr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32 *&#160;</td>
          <td class="paramname"><em>pir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>max_irr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00690">690</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;{</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordtype">bool</span> irr_updated = <a class="code" href="lapic_8c.html#aed305556b8d09cfaa135cca071bd8c22">__kvm_apic_update_irr</a>(<a class="code" href="posted__intr_8h.html#a2707c542febe155b1642f9b9a9c0bc79">pir</a>, apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a>, max_irr);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">if</span> (unlikely(!apic-&gt;<a class="code" href="structkvm__lapic.html#a4642d7f446bbd9ede893aa1ebbcc9c1a">apicv_active</a> &amp;&amp; irr_updated))</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#ada91b44df57789499ad32ad287c21217">irr_pending</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">return</span> irr_updated;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_aed305556b8d09cfaa135cca071bd8c22"><div class="ttname"><a href="lapic_8c.html#aed305556b8d09cfaa135cca071bd8c22">__kvm_apic_update_irr</a></div><div class="ttdeci">bool __kvm_apic_update_irr(u32 *pir, void *regs, int *max_irr)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00654">lapic.c:654</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a922ce0b7b20cf9b9ef4930d3d81e8360_cgraph.png" border="0" usemap="#alapic_8c_a922ce0b7b20cf9b9ef4930d3d81e8360_cgraph" alt=""/></div>
<map name="alapic_8c_a922ce0b7b20cf9b9ef4930d3d81e8360_cgraph" id="alapic_8c_a922ce0b7b20cf9b9ef4930d3d81e8360_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,164,32"/>
<area shape="rect" href="lapic_8c.html#aed305556b8d09cfaa135cca071bd8c22" title=" " alt="" coords="212,5,384,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a922ce0b7b20cf9b9ef4930d3d81e8360_icgraph.png" border="0" usemap="#alapic_8c_a922ce0b7b20cf9b9ef4930d3d81e8360_icgraph" alt=""/></div>
<map name="alapic_8c_a922ce0b7b20cf9b9ef4930d3d81e8360_icgraph" id="alapic_8c_a922ce0b7b20cf9b9ef4930d3d81e8360_icgraph">
<area shape="rect" title=" " alt="" coords="207,5,365,32"/>
<area shape="rect" href="vmx_8c.html#ac2197e1b1fbae590edacaecfd1d0974c" title=" " alt="" coords="5,5,159,32"/>
</map>
</div>

</div>
</div>
<a id="a44fec9a6b84f831af88ffed6b2325545"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44fec9a6b84f831af88ffed6b2325545">&#9670;&nbsp;</a></span>kvm_apic_update_ppr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_apic_update_ppr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00975">975</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;{</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <a class="code" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab">apic_update_ppr</a>(vcpu-&gt;arch.apic);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a44fec9a6b84f831af88ffed6b2325545_cgraph.png" border="0" usemap="#alapic_8c_a44fec9a6b84f831af88ffed6b2325545_cgraph" alt=""/></div>
<map name="alapic_8c_a44fec9a6b84f831af88ffed6b2325545_cgraph" id="alapic_8c_a44fec9a6b84f831af88ffed6b2325545_cgraph">
<area shape="rect" title=" " alt="" coords="5,107,171,133"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="219,107,348,133"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="396,67,539,93"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="396,129,539,170"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="791,5,949,32"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="592,56,737,83"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="593,107,737,133"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="997,81,1147,108"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="791,56,949,83"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="791,107,949,133"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="587,157,743,184"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="810,157,930,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a44fec9a6b84f831af88ffed6b2325545_icgraph.png" border="0" usemap="#alapic_8c_a44fec9a6b84f831af88ffed6b2325545_icgraph" alt=""/></div>
<map name="alapic_8c_a44fec9a6b84f831af88ffed6b2325545_icgraph" id="alapic_8c_a44fec9a6b84f831af88ffed6b2325545_icgraph">
<area shape="rect" title=" " alt="" coords="259,5,424,32"/>
<area shape="rect" href="vmx_8c.html#afb231b1a3b0ccf655edde89034273129" title=" " alt="" coords="5,5,211,32"/>
</map>
</div>

</div>
</div>
<a id="a1b33bb5758d3dd75c7b87e537a5e729e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b33bb5758d3dd75c7b87e537a5e729e">&#9670;&nbsp;</a></span>kvm_apic_write_nodecode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_apic_write_nodecode </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02446">2446</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;{</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160; </div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;<span class="comment">     * ICR is a single 64-bit register when x2APIC is enabled, all others</span></div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;<span class="comment">     * registers hold 32-bit values.  For legacy xAPIC, ICR writes need to</span></div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;<span class="comment">     * go down the common path to get the upper half from ICR2.</span></div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;<span class="comment">     * Note, using the write helpers may incur an unnecessary write to the</span></div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;<span class="comment">     * virtual APIC state, but KVM needs to conditionally modify the value</span></div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;<span class="comment">     * in certain cases, e.g. to clear the ICR busy bit.  The cost of extra</span></div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;<span class="comment">     * conditional branches is likely a wash relative to the cost of the</span></div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;<span class="comment">     * maybe-unecessary write, and both are in the noise anyways.</span></div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic) &amp;&amp; offset == APIC_ICR)</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;        <a class="code" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b">kvm_x2apic_icr_write</a>(apic, <a class="code" href="lapic_8c.html#a378a0961283ea67791303e70114fb10d">kvm_lapic_get_reg64</a>(apic, APIC_ICR));</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;        <a class="code" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491">kvm_lapic_reg_write</a>(apic, offset, <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, offset));</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a378a0961283ea67791303e70114fb10d"><div class="ttname"><a href="lapic_8c.html#a378a0961283ea67791303e70114fb10d">kvm_lapic_get_reg64</a></div><div class="ttdeci">static __always_inline u64 kvm_lapic_get_reg64(struct kvm_lapic *apic, int reg)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00088">lapic.c:88</a></div></div>
<div class="ttc" id="alapic_8c_html_adf2487dc76dace6e577b637cc357998b"><div class="ttname"><a href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b">kvm_x2apic_icr_write</a></div><div class="ttdeci">int kvm_x2apic_icr_write(struct kvm_lapic *apic, u64 data)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l03155">lapic.c:3155</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a1b33bb5758d3dd75c7b87e537a5e729e_cgraph.png" border="0" usemap="#alapic_8c_a1b33bb5758d3dd75c7b87e537a5e729e_cgraph" alt=""/></div>
<map name="alapic_8c_a1b33bb5758d3dd75c7b87e537a5e729e_cgraph" id="alapic_8c_a1b33bb5758d3dd75c7b87e537a5e729e_cgraph">
<area shape="rect" title=" " alt="" coords="5,696,200,723"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="996,1320,1139,1347"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="995,240,1140,267"/>
<area shape="rect" href="lapic_8c.html#a378a0961283ea67791303e70114fb10d" title=" " alt="" coords="249,367,411,393"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="251,696,409,723"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="248,1573,412,1600"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1200,240,1359,267"/>
<area shape="rect" href="lapic_8c.html#aa06cb4ebbfa40dbfa494b3b4cd9f8833" title=" " alt="" coords="478,88,653,115"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="747,813,907,840"/>
<area shape="rect" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1" title=" " alt="" coords="460,392,671,419"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="514,493,617,520"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="510,1000,621,1027"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="755,864,899,891"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="515,645,616,672"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="500,595,631,621"/>
<area shape="rect" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2" title=" " alt="" coords="757,712,897,739"/>
<area shape="rect" href="lapic_8c.html#aec07f4595f82e14e1075beb4730b6976" title=" " alt="" coords="510,949,621,976"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="492,1573,639,1600"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="983,1523,1152,1549"/>
<area shape="rect" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4" title=" " alt="" coords="497,747,634,773"/>
<area shape="rect" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554" title=" " alt="" coords="497,797,633,824"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="479,848,652,875"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="473,1101,658,1128"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="465,1291,665,1317"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="497,189,634,216"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="495,240,636,267"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="501,291,629,317"/>
<area shape="rect" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3" title=" " alt="" coords="748,88,905,115"/>
<area shape="rect" href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4" title=" " alt="" coords="472,443,659,469"/>
<area shape="rect" href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c" title=" " alt="" coords="752,240,901,267"/>
<area shape="rect" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843" title=" " alt="" coords="771,443,882,469"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="988,392,1147,419"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="762,763,891,789"/>
<area shape="rect" href="hyperv_8h.html#a7ffceaf3950bd76a9a3a28ff1e836e58" title=" " alt="" coords="730,560,923,587"/>
<area shape="rect" href="hyperv_8c.html#a47f5a157cae898f7a7b370854c3748a4" title=" " alt="" coords="737,611,917,637"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="745,392,908,419"/>
<area shape="rect" href="xen_8h.html#ae436f94d060f3cb8029695c5a9fddc42" title=" " alt="" coords="729,1000,924,1027"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="988,864,1147,891"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="750,494,903,535"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="1003,712,1132,739"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="732,1624,921,1651"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="997,1599,1138,1625"/>
<area shape="rect" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39" title=" " alt="" coords="761,1152,893,1179"/>
<area shape="rect" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44" title=" " alt="" coords="749,1203,904,1229"/>
<area shape="rect" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d" title=" " alt="" coords="738,1254,915,1295"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="719,1421,935,1448"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="1007,1421,1127,1448"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="725,1320,929,1347"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="751,139,902,165"/>
<area shape="rect" href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2" title=" " alt="" coords="485,1624,645,1651"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a1b33bb5758d3dd75c7b87e537a5e729e_icgraph.png" border="0" usemap="#alapic_8c_a1b33bb5758d3dd75c7b87e537a5e729e_icgraph" alt=""/></div>
<map name="alapic_8c_a1b33bb5758d3dd75c7b87e537a5e729e_icgraph" id="alapic_8c_a1b33bb5758d3dd75c7b87e537a5e729e_icgraph">
<area shape="rect" title=" " alt="" coords="439,71,633,98"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="225,5,377,47"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="212,71,391,98"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="231,122,371,149"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="5,64,164,105"/>
</map>
</div>

</div>
</div>
<a id="a42846edfc8630e622bcde943f49559c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42846edfc8630e622bcde943f49559c4">&#9670;&nbsp;</a></span>kvm_bitmap_or_dest_vcpus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_bitmap_or_dest_vcpus </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_lapic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long *&#160;</td>
          <td class="paramname"><em>vcpu_bitmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01394">1394</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;{</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> **dest_vcpu = NULL;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *src = NULL;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="keyword">struct </span>kvm_apic_map *map;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> bitmap, i;</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordtype">int</span> vcpu_idx;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keywordtype">bool</span> ret;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160; </div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    rcu_read_lock();</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    map = rcu_dereference(kvm-&gt;arch.apic_map);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160; </div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    ret = <a class="code" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f">kvm_apic_map_get_dest_lapic</a>(kvm, &amp;src, irq, map, &amp;dest_vcpu,</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;                      &amp;bitmap);</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    <span class="keywordflow">if</span> (ret) {</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        for_each_set_bit(i, &amp;bitmap, 16) {</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;            <span class="keywordflow">if</span> (!dest_vcpu[i])</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;            vcpu_idx = dest_vcpu[i]-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_idx;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;            __set_bit(vcpu_idx, vcpu_bitmap);</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        }</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        kvm_for_each_vcpu(i, vcpu, kvm) {</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4">kvm_apic_present</a>(vcpu))</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d">kvm_apic_match_dest</a>(vcpu, NULL,</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                         irq-&gt;shorthand,</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                         irq-&gt;dest_id,</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                         irq-&gt;dest_mode))</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;            __set_bit(i, vcpu_bitmap);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        }</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    }</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    rcu_read_unlock();</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_adb63e5a650d4571316b450d153a3105d"><div class="ttname"><a href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d">kvm_apic_match_dest</a></div><div class="ttdeci">bool kvm_apic_match_dest(struct kvm_vcpu *vcpu, struct kvm_lapic *source, int shorthand, unsigned int dest, int dest_mode)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01067">lapic.c:1067</a></div></div>
<div class="ttc" id="alapic_8c_html_aee815bad0e899bbf195750d2d9b5470f"><div class="ttname"><a href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f">kvm_apic_map_get_dest_lapic</a></div><div class="ttdeci">static bool kvm_apic_map_get_dest_lapic(struct kvm *kvm, struct kvm_lapic **src, struct kvm_lapic_irq *irq, struct kvm_apic_map *map, struct kvm_lapic ***dst, unsigned long *bitmap)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01142">lapic.c:1142</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a42846edfc8630e622bcde943f49559c4_cgraph.png" border="0" usemap="#alapic_8c_a42846edfc8630e622bcde943f49559c4_cgraph" alt=""/></div>
<map name="alapic_8c_a42846edfc8630e622bcde943f49559c4_cgraph" id="alapic_8c_a42846edfc8630e622bcde943f49559c4_cgraph">
<area shape="rect" title=" " alt="" coords="5,411,164,453"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="212,411,396,453"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="220,183,388,209"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="233,645,375,672"/>
<area shape="rect" href="lapic_8c.html#a47d52843df792ef8e7bffdfb66a3b40b" title=" " alt="" coords="471,360,652,387"/>
<area shape="rect" href="lapic_8c.html#a079d589509607a9d9baa6bed3eae7fa6" title=" " alt="" coords="469,411,654,453"/>
<area shape="rect" href="lapic_8c.html#abbce6da431ef5f15d85b5fc741d3ef72" title=" " alt="" coords="727,419,936,445"/>
<area shape="rect" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3" title=" " alt="" coords="444,309,679,336"/>
<area shape="rect" href="lapic_8h.html#adfbea71ac96b210fb91bef47c77194f1" title=" " alt="" coords="465,528,658,555"/>
<area shape="rect" href="x86_8c.html#a47d88660a2a5f8ee22df1253604d1ed7" title=" " alt="" coords="483,579,640,621"/>
<area shape="rect" href="lapic_8c.html#ac9fecb7d9f4574931650af9abb4b9f4c" title=" " alt="" coords="480,259,643,285"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="992,208,1135,235"/>
<area shape="rect" href="lapic_8c.html#a870119cb74033f360164df90029af75a" title=" " alt="" coords="452,81,671,108"/>
<area shape="rect" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6" title=" " alt="" coords="446,157,677,184"/>
<area shape="rect" href="lapic_8c.html#a8fb87d02d911e49b5793e391702afe7e" title=" " alt="" coords="771,309,892,336"/>
<area shape="rect" href="lapic_8c.html#a98bde25094c754b30e796357ba643ab0" title=" " alt="" coords="753,107,909,133"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="759,5,904,32"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="984,5,1143,32"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="771,157,891,184"/>
<area shape="rect" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096" title=" " alt="" coords="775,259,887,285"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="476,645,647,672"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="502,696,621,723"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a42846edfc8630e622bcde943f49559c4_icgraph.png" border="0" usemap="#alapic_8c_a42846edfc8630e622bcde943f49559c4_icgraph" alt=""/></div>
<map name="alapic_8c_a42846edfc8630e622bcde943f49559c4_icgraph" id="alapic_8c_a42846edfc8630e622bcde943f49559c4_icgraph">
<area shape="rect" title=" " alt="" coords="405,5,564,47"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="200,13,357,39"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="5,13,152,39"/>
</map>
</div>

</div>
</div>
<a id="ad7790e6f84a1592b5298b2da79a633a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7790e6f84a1592b5298b2da79a633a9">&#9670;&nbsp;</a></span>kvm_can_post_timer_interrupt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_can_post_timer_interrupt </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00148">148</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;{</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="x86_8c.html#af557a7a4a33c9a4739506907d8e0bd71">pi_inject_timer</a> &amp;&amp; <a class="code" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358">kvm_vcpu_apicv_active</a>(vcpu) &amp;&amp;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        (<a class="code" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376">kvm_mwait_in_guest</a>(vcpu-&gt;kvm) || <a class="code" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231">kvm_hlt_in_guest</a>(vcpu-&gt;kvm));</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div>
<div class="ttc" id="alapic_8h_html_a3af346d02eebff16886d49d3810b5358"><div class="ttname"><a href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358">kvm_vcpu_apicv_active</a></div><div class="ttdeci">static bool kvm_vcpu_apicv_active(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00226">lapic.h:226</a></div></div>
<div class="ttc" id="ax86_8c_html_af557a7a4a33c9a4739506907d8e0bd71"><div class="ttname"><a href="x86_8c.html#af557a7a4a33c9a4739506907d8e0bd71">pi_inject_timer</a></div><div class="ttdeci">int __read_mostly pi_inject_timer</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l00188">x86.c:188</a></div></div>
<div class="ttc" id="ax86_8h_html_a8a31c0c01a5fe5dc33f7c5675ba4d376"><div class="ttname"><a href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376">kvm_mwait_in_guest</a></div><div class="ttdeci">static bool kvm_mwait_in_guest(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8h_source.html#l00409">x86.h:409</a></div></div>
<div class="ttc" id="ax86_8h_html_ace4ed625ac4852e54db110fde28d3231"><div class="ttname"><a href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231">kvm_hlt_in_guest</a></div><div class="ttdeci">static bool kvm_hlt_in_guest(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8h_source.html#l00414">x86.h:414</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ad7790e6f84a1592b5298b2da79a633a9_cgraph.png" border="0" usemap="#alapic_8c_ad7790e6f84a1592b5298b2da79a633a9_cgraph" alt=""/></div>
<map name="alapic_8c_ad7790e6f84a1592b5298b2da79a633a9_cgraph" id="alapic_8c_ad7790e6f84a1592b5298b2da79a633a9_cgraph">
<area shape="rect" title=" " alt="" coords="5,49,164,90"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="233,5,370,32"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="221,56,382,83"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="212,107,391,133"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="439,107,557,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ad7790e6f84a1592b5298b2da79a633a9_icgraph.png" border="0" usemap="#alapic_8c_ad7790e6f84a1592b5298b2da79a633a9_icgraph" alt=""/></div>
<map name="alapic_8c_ad7790e6f84a1592b5298b2da79a633a9_icgraph" id="alapic_8c_ad7790e6f84a1592b5298b2da79a633a9_icgraph">
<area shape="rect" title=" " alt="" coords="2701,184,2860,225"/>
<area shape="rect" href="irq_8h.html#accb9eec870235e61feeef31a7c0a6084" title=" " alt="" coords="2487,96,2645,137"/>
<area shape="rect" href="lapic_8c.html#a2400290b895608d302ecce4ee352ee25" title=" " alt="" coords="2255,282,2431,309"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="2479,184,2653,225"/>
<area shape="rect" href="irq_8c.html#aa78a0c6512b9fd6015a43326c651fbfb" title=" " alt="" coords="2257,90,2429,117"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="1863,75,2000,102"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="979,195,1060,222"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="665,247,852,274"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="457,261,581,287"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="681,349,836,391"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="2069,282,2186,309"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="442,324,597,365"/>
<area shape="rect" href="svm_8c.html#a82c8447e70f06dd52623c696446104b5" title=" " alt="" coords="171,331,377,358"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="171,150,377,177"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="6,331,122,358"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="5,150,123,177"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1665,282,1806,309"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1453,371,1595,398"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="941,535,1098,562"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1440,123,1608,164"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1443,305,1605,347"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1445,240,1603,281"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1211,367,1363,394"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1223,473,1351,499"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="944,356,1095,397"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="679,298,838,325"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="904,473,1135,499"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="691,611,826,638"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="661,662,856,689"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="678,510,839,537"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="687,561,830,587"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="443,720,595,761"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="430,618,609,645"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="449,669,589,695"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="425,517,613,543"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="433,466,606,493"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="187,441,361,467"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="444,567,595,594"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="1183,5,1392,47"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="924,63,1115,90"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="685,63,833,90"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1208,305,1367,331"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="962,305,1077,331"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="975,254,1063,281"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1240,195,1335,222"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="2269,191,2416,218"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="2065,231,2190,258"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="2048,181,2207,207"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="1872,210,1991,237"/>
<area shape="rect" href="lapic_8c.html#aee4a3e5ae4ed211edf4e463ebacadaa5" title=" " alt="" coords="1656,192,1815,233"/>
</map>
</div>

</div>
</div>
<a id="a2400290b895608d302ecce4ee352ee25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2400290b895608d302ecce4ee352ee25">&#9670;&nbsp;</a></span>kvm_can_use_hv_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_can_use_hv_timer </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00154">154</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;{</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">return</span> kvm_x86_ops.set_hv_timer</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;           &amp;&amp; !(<a class="code" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376">kvm_mwait_in_guest</a>(vcpu-&gt;kvm) ||</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <a class="code" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9">kvm_can_post_timer_interrupt</a>(vcpu));</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a2400290b895608d302ecce4ee352ee25_cgraph.png" border="0" usemap="#alapic_8c_a2400290b895608d302ecce4ee352ee25_cgraph" alt=""/></div>
<map name="alapic_8c_a2400290b895608d302ecce4ee352ee25_cgraph" id="alapic_8c_a2400290b895608d302ecce4ee352ee25_cgraph">
<area shape="rect" title=" " alt="" coords="5,83,181,109"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="229,46,388,87"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="445,108,606,135"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="457,5,594,32"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="436,56,615,83"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="663,56,781,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a2400290b895608d302ecce4ee352ee25_icgraph.png" border="0" usemap="#alapic_8c_a2400290b895608d302ecce4ee352ee25_icgraph" alt=""/></div>
<map name="alapic_8c_a2400290b895608d302ecce4ee352ee25_icgraph" id="alapic_8c_a2400290b895608d302ecce4ee352ee25_icgraph">
<area shape="rect" title=" " alt="" coords="2011,438,2187,465"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="681,376,836,417"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="1845,463,1963,490"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="442,391,597,432"/>
<area shape="rect" href="svm_8c.html#a82c8447e70f06dd52623c696446104b5" title=" " alt="" coords="171,398,377,425"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="171,478,377,505"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="6,398,122,425"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="5,478,123,505"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1656,522,1797,549"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1453,551,1595,578"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="941,249,1098,275"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1440,485,1608,527"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1443,725,1605,767"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1445,603,1603,644"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1211,551,1363,578"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1223,333,1351,359"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="944,544,1095,585"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="679,551,838,578"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="904,333,1135,359"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="691,71,826,98"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="661,122,856,149"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="678,223,839,250"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="687,274,830,301"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="443,5,595,47"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="430,71,609,98"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="449,122,589,149"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="195,64,353,105"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="425,173,613,199"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="433,223,606,250"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="207,173,341,199"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="187,274,361,301"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="444,274,595,301"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="1183,485,1392,527"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="924,442,1115,469"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="685,442,833,469"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1208,823,1367,850"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="962,1034,1077,1061"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="975,823,1063,850"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="719,1163,798,1190"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="673,1046,845,1073"/>
<area shape="rect" href="x86_8c.html#a8103751d0c861cfc0c6d0fed892e2454" title=" " alt="" coords="679,1097,838,1139"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="679,653,838,695"/>
<area shape="rect" href="x86_8c.html#a3de7a07b3d9ed3ee68dbdfb0c53dc5d0" title=" " alt="" coords="679,719,838,760"/>
<area shape="rect" href="x86_8c.html#ac6ebab4c3448cdbc79dbcac73e94503b" title=" " alt="" coords="679,784,838,825"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="665,602,852,629"/>
<area shape="rect" href="x86_8c.html#a02f0a60bd0147952e87f6ad38128f748" title=" " alt="" coords="679,849,838,891"/>
<area shape="rect" href="x86_8c.html#ae3d9929c9a77fa2c710befa0a784d4c6" title=" " alt="" coords="679,915,838,956"/>
<area shape="rect" href="x86_8c.html#a93a45fe328a7ab7be2e5426ffc845c32" title=" " alt="" coords="679,980,838,1021"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1240,610,1335,637"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="979,610,1060,637"/>
</map>
</div>

</div>
</div>
<a id="a1d54fd094860a96cad1af17c18f6904c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d54fd094860a96cad1af17c18f6904c">&#9670;&nbsp;</a></span>kvm_create_lapic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_create_lapic </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timer_advance_ns</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02810">2810</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;{</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic;</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160; </div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;    <a class="code" href="ioapic_8h.html#aca68c0d4ac8df0838e209fb5300f7be3">ASSERT</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a> != NULL);</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160; </div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    apic = kzalloc(<span class="keyword">sizeof</span>(*apic), GFP_KERNEL_ACCOUNT);</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    <span class="keywordflow">if</span> (!apic)</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;        <span class="keywordflow">goto</span> nomem;</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160; </div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic = apic;</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160; </div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> = (<span class="keywordtype">void</span> *)get_zeroed_page(GFP_KERNEL_ACCOUNT);</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;    <span class="keywordflow">if</span> (!apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a>) {</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;        printk(KERN_ERR <span class="stringliteral">&quot;malloc apic regs error for vcpu %x\n&quot;</span>,</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;               <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_id);</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;        <span class="keywordflow">goto</span> nomem_free_apic;</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    }</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a> = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>;</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160; </div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a> = <a class="code" href="lapic_8c.html#a6426046939a33f96b6df7b185cafb171">kvm_apic_calc_nr_lvt_entries</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160; </div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    hrtimer_init(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">timer</a>, CLOCK_MONOTONIC,</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;             HRTIMER_MODE_ABS_HARD);</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">timer</a>.function = <a class="code" href="lapic_8c.html#aed93ccaa481ab4fd48af66ccf79499c5">apic_timer_fn</a>;</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;    <span class="keywordflow">if</span> (timer_advance_ns == -1) {</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a02a69390fafe1e1281847530af564ef0">timer_advance_ns</a> = <a class="code" href="lapic_8c.html#aae6931286b2ce84fe7732ae3c6996634">LAPIC_TIMER_ADVANCE_NS_INIT</a>;</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;        lapic_timer_advance_dynamic = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a02a69390fafe1e1281847530af564ef0">timer_advance_ns</a> = timer_advance_ns;</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;        lapic_timer_advance_dynamic = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;    }</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160; </div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;<span class="comment">     * Stuff the APIC ENABLE bit in lieu of temporarily incrementing</span></div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;<span class="comment">     * apic_hw_disabled; the full RESET value is set by kvm_lapic_reset().</span></div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;    <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_base = MSR_IA32_APICBASE_ENABLE;</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;    static_branch_inc(&amp;<a class="code" href="lapic_8h.html#a3c2a1bc1bb244452f5338719ef4e73c8">apic_sw_disabled</a>.key); <span class="comment">/* sw disabled at reset */</span></div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;    kvm_iodevice_init(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a64110f6330456e8272b6e96539d168e1">dev</a>, &amp;<a class="code" href="lapic_8c.html#a61013c760fedb5cc2ce71f0243787f7e">apic_mmio_ops</a>);</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160; </div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;nomem_free_apic:</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;    kfree(apic);</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;    <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic = NULL;</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;nomem:</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;    <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a61013c760fedb5cc2ce71f0243787f7e"><div class="ttname"><a href="lapic_8c.html#a61013c760fedb5cc2ce71f0243787f7e">apic_mmio_ops</a></div><div class="ttdeci">static const struct kvm_io_device_ops apic_mmio_ops</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02782">lapic.c:2790</a></div></div>
<div class="ttc" id="alapic_8c_html_aed93ccaa481ab4fd48af66ccf79499c5"><div class="ttname"><a href="lapic_8c.html#aed93ccaa481ab4fd48af66ccf79499c5">apic_timer_fn</a></div><div class="ttdeci">static enum hrtimer_restart apic_timer_fn(struct hrtimer *data)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02782">lapic.c:2795</a></div></div>
<div class="ttc" id="astructkvm__lapic_html_a64110f6330456e8272b6e96539d168e1"><div class="ttname"><a href="structkvm__lapic.html#a64110f6330456e8272b6e96539d168e1">kvm_lapic::dev</a></div><div class="ttdeci">struct kvm_io_device dev</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00060">lapic.h:61</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a1d54fd094860a96cad1af17c18f6904c_cgraph.png" border="0" usemap="#alapic_8c_a1d54fd094860a96cad1af17c18f6904c_cgraph" alt=""/></div>
<map name="alapic_8c_a1d54fd094860a96cad1af17c18f6904c_cgraph" id="alapic_8c_a1d54fd094860a96cad1af17c18f6904c_cgraph">
<area shape="rect" title=" " alt="" coords="5,35,143,61"/>
<area shape="rect" href="lapic_8c.html#aed93ccaa481ab4fd48af66ccf79499c5" title=" " alt="" coords="217,5,327,32"/>
<area shape="rect" href="lapic_8c.html#a6426046939a33f96b6df7b185cafb171" title=" " alt="" coords="191,57,353,98"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a1d54fd094860a96cad1af17c18f6904c_icgraph.png" border="0" usemap="#alapic_8c_a1d54fd094860a96cad1af17c18f6904c_icgraph" alt=""/></div>
<map name="alapic_8c_a1d54fd094860a96cad1af17c18f6904c_icgraph" id="alapic_8c_a1d54fd094860a96cad1af17c18f6904c_icgraph">
<area shape="rect" title=" " alt="" coords="473,5,611,32"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="253,5,425,32"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="5,5,205,32"/>
</map>
</div>

</div>
</div>
<a id="a4b935c2c698d932ceff03cb20f512919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b935c2c698d932ceff03cb20f512919">&#9670;&nbsp;</a></span>kvm_free_lapic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_free_lapic </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02468">2468</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;{</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160; </div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic)</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160; </div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;    hrtimer_cancel(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">timer</a>);</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160; </div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_base &amp; MSR_IA32_APICBASE_ENABLE))</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;        static_branch_slow_dec_deferred(&amp;<a class="code" href="lapic_8h.html#a65788ee3d09ea041368cd93b3391f3c4">apic_hw_disabled</a>);</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160; </div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;    <span class="keywordflow">if</span> (!apic-&gt;<a class="code" href="structkvm__lapic.html#afc6c88da7e5d98be1e6e833ca181dab2">sw_enabled</a>)</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;        static_branch_slow_dec_deferred(&amp;<a class="code" href="lapic_8h.html#a3c2a1bc1bb244452f5338719ef4e73c8">apic_sw_disabled</a>);</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160; </div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    <span class="keywordflow">if</span> (apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a>)</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;        free_page((<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a>);</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160; </div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    kfree(apic);</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;}</div>
<div class="ttc" id="alapic_8h_html_a65788ee3d09ea041368cd93b3391f3c4"><div class="ttname"><a href="lapic_8h.html#a65788ee3d09ea041368cd93b3391f3c4">apic_hw_disabled</a></div><div class="ttdeci">struct static_key_false_deferred apic_hw_disabled</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a4b935c2c698d932ceff03cb20f512919_icgraph.png" border="0" usemap="#alapic_8c_a4b935c2c698d932ceff03cb20f512919_icgraph" alt=""/></div>
<map name="alapic_8c_a4b935c2c698d932ceff03cb20f512919_icgraph" id="alapic_8c_a4b935c2c698d932ceff03cb20f512919_icgraph">
<area shape="rect" title=" " alt="" coords="1805,132,1928,159"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="1581,107,1753,133"/>
<area shape="rect" href="x86_8c.html#a25d188e4f0871968b9f428c79720a502" title=" " alt="" coords="1577,157,1757,184"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="1329,107,1529,133"/>
<area shape="rect" href="kvm__main_8c.html#a7218df747387e4034ab8442f187306b1" title=" " alt="" coords="1357,157,1502,184"/>
<area shape="rect" href="kvm__main_8c.html#a0fcd9f7671bee7debec1bc05dcd9557b" title=" " alt="" coords="1129,157,1281,184"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="911,157,1081,184"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="553,69,680,96"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="728,183,863,209"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="303,5,497,32"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="559,183,674,209"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="325,56,475,83"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="317,107,483,133"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="323,157,477,184"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="295,208,505,235"/>
<area shape="rect" href="debugfs_8c.html#af0427db3ec1a8c38ea51591abbefde57" title=" " alt="" coords="314,259,486,301"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="333,325,467,352"/>
<area shape="rect" href="sev_8c.html#ad28fd793149997c912b52490f6ca139a" title=" " alt="" coords="329,376,471,403"/>
<area shape="rect" href="sev_8c.html#af1eb77eac84f085b0a943b87f783e30d" title=" " alt="" coords="335,427,465,453"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="47,56,205,83"/>
<area shape="rect" href="sev_8c.html#abe3c569b297da3b78824074b8c08f9a7" title=" " alt="" coords="5,376,247,403"/>
<area shape="rect" href="svm_8c.html#a0e69cefce46e7b11e1e8e056ea5b6561" title=" " alt="" coords="59,427,193,453"/>
</map>
</div>

</div>
</div>
<a id="ac6d5ae412d8199fc4aceeae42cb80024"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6d5ae412d8199fc4aceeae42cb80024">&#9670;&nbsp;</a></span>kvm_get_apic_interrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_get_apic_interrupt </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02894">2894</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;{</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;    <span class="keywordtype">int</span> vector = <a class="code" href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf">kvm_apic_has_interrupt</a>(vcpu);</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;    u32 ppr;</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160; </div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;    <span class="keywordflow">if</span> (vector == -1)</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160; </div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;<span class="comment">     * We get here even with APIC virtualization enabled, if doing</span></div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;<span class="comment">     * nested virtualization and L1 runs with the &quot;acknowledge interrupt</span></div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;<span class="comment">     * on exit&quot; mode.  Then we cannot inject the interrupt via RVI,</span></div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;<span class="comment">     * because the process would deliver it through the IDT.</span></div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160; </div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;    <a class="code" href="lapic_8c.html#ad2b5e2187414c65e1a5876e641fee3fc">apic_clear_irr</a>(vector, apic);</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="hyperv_8h.html#a8b356fa1a20dafdfd0b2f54c7c345caf">kvm_hv_synic_auto_eoi_set</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, vector)) {</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;<span class="comment">         * For auto-EOI interrupts, there might be another pending</span></div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;<span class="comment">         * interrupt above PPR, so check whether to raise another</span></div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;<span class="comment">         * KVM_REQ_EVENT.</span></div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;        <a class="code" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab">apic_update_ppr</a>(apic);</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;<span class="comment">         * For normal interrupts, PPR has been raised and there cannot</span></div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;<span class="comment">         * be a higher-priority pending interrupt---except if there was</span></div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;<span class="comment">         * a concurrent interrupt injection, but that would have</span></div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;<span class="comment">         * triggered KVM_REQ_EVENT already.</span></div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;        <a class="code" href="lapic_8c.html#acba5fed3ebeb7a85d9cb154d13b7f983">apic_set_isr</a>(vector, apic);</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;        <a class="code" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986">__apic_update_ppr</a>(apic, &amp;ppr);</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;    }</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160; </div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    <span class="keywordflow">return</span> vector;</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;}</div>
<div class="ttc" id="ahyperv_8h_html_a8b356fa1a20dafdfd0b2f54c7c345caf"><div class="ttname"><a href="hyperv_8h.html#a8b356fa1a20dafdfd0b2f54c7c345caf">kvm_hv_synic_auto_eoi_set</a></div><div class="ttdeci">static bool kvm_hv_synic_auto_eoi_set(struct kvm_vcpu *vcpu, int vector)</div><div class="ttdef"><b>Definition:</b> <a href="hyperv_8h_source.html#l00294">hyperv.h:294</a></div></div>
<div class="ttc" id="alapic_8c_html_aa421165466ac455ff3fff91fb9afe7bf"><div class="ttname"><a href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf">kvm_apic_has_interrupt</a></div><div class="ttdeci">int kvm_apic_has_interrupt(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02859">lapic.c:2859</a></div></div>
<div class="ttc" id="alapic_8c_html_acba5fed3ebeb7a85d9cb154d13b7f983"><div class="ttname"><a href="lapic_8c.html#acba5fed3ebeb7a85d9cb154d13b7f983">apic_set_isr</a></div><div class="ttdeci">static void apic_set_isr(int vec, struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00744">lapic.c:744</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ac6d5ae412d8199fc4aceeae42cb80024_cgraph.png" border="0" usemap="#alapic_8c_ac6d5ae412d8199fc4aceeae42cb80024_cgraph" alt=""/></div>
<map name="alapic_8c_ac6d5ae412d8199fc4aceeae42cb80024_cgraph" id="alapic_8c_ac6d5ae412d8199fc4aceeae42cb80024_cgraph">
<area shape="rect" title=" " alt="" coords="5,208,181,235"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="488,183,631,209"/>
<area shape="rect" href="lapic_8c.html#ad2b5e2187414c65e1a5876e641fee3fc" title=" " alt="" coords="505,48,614,75"/>
<area shape="rect" href="lapic_8c.html#acba5fed3ebeb7a85d9cb154d13b7f983" title=" " alt="" coords="283,284,381,311"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="267,132,397,159"/>
<area shape="rect" href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf" title=" " alt="" coords="243,233,421,260"/>
<area shape="rect" href="hyperv_8h.html#a8b356fa1a20dafdfd0b2f54c7c345caf" title=" " alt="" coords="229,335,435,361"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="908,183,1067,209"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="699,233,845,260"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="700,132,844,159"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1115,132,1264,159"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="908,233,1067,260"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="908,132,1067,159"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="694,81,850,108"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="927,81,1047,108"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="684,31,860,57"/>
<area shape="rect" href="lapic_8c.html#a3fc79a6339260d167eb85050cc787149" title=" " alt="" coords="483,310,636,351"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="488,117,631,158"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="489,259,630,285"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="687,284,857,311"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="713,335,831,361"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ac6d5ae412d8199fc4aceeae42cb80024_icgraph.png" border="0" usemap="#alapic_8c_ac6d5ae412d8199fc4aceeae42cb80024_icgraph" alt=""/></div>
<map name="alapic_8c_ac6d5ae412d8199fc4aceeae42cb80024_icgraph" id="alapic_8c_ac6d5ae412d8199fc4aceeae42cb80024_icgraph">
<area shape="rect" title=" " alt="" coords="1361,236,1537,263"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="1141,236,1313,263"/>
<area shape="rect" href="x86_8c.html#a2b372d06c72b7d8c25e9004bb3a3fd3b" title=" " alt="" coords="923,99,1093,141"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="931,265,1085,292"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="698,5,835,32"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="471,5,552,32"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="437,83,585,109"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="705,173,828,200"/>
<area shape="rect" href="vmx_2nested_8c.html#a4e307e2bcf664c83265b1442e3fc8da2" title=" " alt="" coords="679,225,855,266"/>
<area shape="rect" href="vmx_2nested_8c.html#ad3cab9cf8633364513bd6a24caecf41a" title=" " alt="" coords="659,290,875,331"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="412,327,611,353"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fcc88ceee4f57a3dbf23fedb46a5cb" title=" " alt="" coords="691,107,842,149"/>
<area shape="rect" href="vmx_2nested_8c.html#aedc5821e9af5c7bd4aac6c06f4ca046f" title=" " alt="" coords="677,407,857,433"/>
<area shape="rect" href="vmx_2hyperv_8c.html#a937e30dece4579b71b17efcd54c1d910" title=" " alt="" coords="675,458,859,499"/>
<area shape="rect" href="vmx_2nested_8c.html#a64e6550fab681b40c832fe4e2d5e3b95" title=" " alt="" coords="694,524,839,551"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="203,83,338,109"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="426,163,597,205"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="207,171,334,197"/>
<area shape="rect" href="vmx_2nested_8c.html#a6a1c45a52fde9844f4431a9db00dbf9f" title=" " alt="" coords="430,229,593,270"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="205,236,336,263"/>
<area shape="rect" href="vmx_2nested_8c.html#a2c53f6d5cd8133df2c8e67ab90b9aa5f" title=" " alt="" coords="425,473,598,500"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="456,524,567,551"/>
<area shape="rect" href="vmx_2nested_8c.html#acee8cb651216e97a9c12b807243ae59a" title=" " alt="" coords="427,575,596,601"/>
<area shape="rect" href="vmx_8c.html#ac1cd58b9f223df9d6b5fe9695c0cbe2b" title=" " alt="" coords="209,473,332,500"/>
</map>
</div>

</div>
</div>
<a id="af2fa5313476adb8240d3595805d784fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2fa5313476adb8240d3595805d784fc">&#9670;&nbsp;</a></span>kvm_get_lapic_tscdeadline_msr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 kvm_get_lapic_tscdeadline_msr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02494">2494</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;{</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160; </div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4">kvm_apic_present</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>) || !<a class="code" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0">apic_lvtt_tscdeadline</a>(apic))</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160; </div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    <span class="keywordflow">return</span> apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#acb4ad6bfe6c14982d0a87f4678e92d09">tscdeadline</a>;</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_af2fa5313476adb8240d3595805d784fc_cgraph.png" border="0" usemap="#alapic_8c_af2fa5313476adb8240d3595805d784fc_cgraph" alt=""/></div>
<map name="alapic_8c_af2fa5313476adb8240d3595805d784fc_cgraph" id="alapic_8c_af2fa5313476adb8240d3595805d784fc_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,236,57"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="284,5,444,32"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="293,56,435,83"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="492,31,663,57"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="518,81,637,108"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_af2fa5313476adb8240d3595805d784fc_icgraph.png" border="0" usemap="#alapic_8c_af2fa5313476adb8240d3595805d784fc_icgraph" alt=""/></div>
<map name="alapic_8c_af2fa5313476adb8240d3595805d784fc_icgraph" id="alapic_8c_af2fa5313476adb8240d3595805d784fc_icgraph">
<area shape="rect" title=" " alt="" coords="387,31,617,57"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="164,31,339,57"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="5,5,116,32"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="5,56,116,83"/>
</map>
</div>

</div>
</div>
<a id="ae9bd2989ca4c31caf8aa56b8c7dfd248"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9bd2989ca4c31caf8aa56b8c7dfd248">&#9670;&nbsp;</a></span>kvm_hv_vapic_msr_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_hv_vapic_msr_read </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64 *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03229">3229</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;{</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(vcpu))</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160; </div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da">kvm_lapic_msr_read</a>(vcpu-&gt;arch.apic, reg, data);</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a2913418710d9efa46bbdbb0070b766da"><div class="ttname"><a href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da">kvm_lapic_msr_read</a></div><div class="ttdeci">static int kvm_lapic_msr_read(struct kvm_lapic *apic, u32 reg, u64 *data)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l03165">lapic.c:3165</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ae9bd2989ca4c31caf8aa56b8c7dfd248_cgraph.png" border="0" usemap="#alapic_8c_ae9bd2989ca4c31caf8aa56b8c7dfd248_cgraph" alt=""/></div>
<map name="alapic_8c_ae9bd2989ca4c31caf8aa56b8c7dfd248_cgraph" id="alapic_8c_ae9bd2989ca4c31caf8aa56b8c7dfd248_cgraph">
<area shape="rect" title=" " alt="" coords="5,172,189,199"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="237,147,395,173"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="257,197,375,224"/>
<area shape="rect" href="lapic_8c.html#a378a0961283ea67791303e70114fb10d" title=" " alt="" coords="443,116,604,143"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="447,179,600,205"/>
<area shape="rect" href="lapic_8c.html#aa06cb4ebbfa40dbfa494b3b4cd9f8833" title=" " alt="" coords="652,103,827,129"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="690,153,789,180"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="896,259,1039,285"/>
<area shape="rect" href="lapic_8c.html#a4b4d880305f2ddba0ac9fdb398a7611a" title=" " alt="" coords="663,255,816,297"/>
<area shape="rect" href="lapic_8c.html#a5bf640da1dfc1be09d89fb23c7f2e954" title=" " alt="" coords="1123,5,1244,32"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1312,21,1457,48"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="887,107,1047,133"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="903,157,1032,184"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="899,208,1036,235"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1519,21,1677,48"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="1112,107,1255,133"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="1112,158,1255,199"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="1519,72,1677,99"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1313,123,1457,149"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1755,123,1905,149"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1519,123,1677,149"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="1307,173,1463,200"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="1538,173,1658,200"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="1108,224,1259,251"/>
<area shape="rect" href="kvm__cache__regs_8h.html#ad97ff6b975b461b815e6749d29c65446" title=" " alt="" coords="1329,224,1440,251"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a5d9eb0563cffb1e3ed1cccebabcf2df6" title=" " alt="" coords="1511,224,1685,251"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="1733,224,1927,251"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="875,309,1060,336"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ae9bd2989ca4c31caf8aa56b8c7dfd248_icgraph.png" border="0" usemap="#alapic_8c_ae9bd2989ca4c31caf8aa56b8c7dfd248_icgraph" alt=""/></div>
<map name="alapic_8c_ae9bd2989ca4c31caf8aa56b8c7dfd248_icgraph" id="alapic_8c_ae9bd2989ca4c31caf8aa56b8c7dfd248_icgraph">
<area shape="rect" title=" " alt="" coords="816,31,1000,57"/>
<area shape="rect" href="hyperv_8c.html#acd3e0dad98bde91068115067f6ec3ae6" title=" " alt="" coords="633,31,768,57"/>
<area shape="rect" href="hyperv_8c.html#a23d197f9ae27f820fa7e977aec518698" title=" " alt="" coords="387,31,585,57"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="164,31,339,57"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="5,5,116,32"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="5,56,116,83"/>
</map>
</div>

</div>
</div>
<a id="acd2b4e5a0448d3280ab31687c2199265"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd2b4e5a0448d3280ab31687c2199265">&#9670;&nbsp;</a></span>kvm_hv_vapic_msr_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_hv_vapic_msr_write </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03221">3221</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;{</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(vcpu))</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160; </div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079">kvm_lapic_msr_write</a>(vcpu-&gt;arch.apic, reg, data);</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a1b64be7f231109aa3e0382cc34a64079"><div class="ttname"><a href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079">kvm_lapic_msr_write</a></div><div class="ttdeci">static int kvm_lapic_msr_write(struct kvm_lapic *apic, u32 reg, u64 data)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l03182">lapic.c:3182</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_acd2b4e5a0448d3280ab31687c2199265_cgraph.png" border="0" usemap="#alapic_8c_acd2b4e5a0448d3280ab31687c2199265_cgraph" alt=""/></div>
<map name="alapic_8c_acd2b4e5a0448d3280ab31687c2199265_cgraph" id="alapic_8c_acd2b4e5a0448d3280ab31687c2199265_cgraph">
<area shape="rect" title=" " alt="" coords="5,1583,193,1609"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="241,1532,403,1559"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1423,1557,1541,1584"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="454,639,611,665"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="451,1532,615,1559"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="949,832,1109,859"/>
<area shape="rect" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1" title=" " alt="" coords="663,411,873,437"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="717,512,819,539"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="713,360,823,387"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="957,157,1101,184"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="717,461,819,488"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="703,739,833,765"/>
<area shape="rect" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2" title=" " alt="" coords="959,933,1099,960"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1197,781,1343,808"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="1199,1220,1341,1247"/>
<area shape="rect" href="lapic_8c.html#aec07f4595f82e14e1075beb4730b6976" title=" " alt="" coords="713,908,823,935"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="695,1507,841,1533"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1185,1456,1355,1483"/>
<area shape="rect" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4" title=" " alt="" coords="699,309,837,336"/>
<area shape="rect" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554" title=" " alt="" coords="700,157,836,184"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="681,208,855,235"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="675,1405,861,1432"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="668,1111,868,1137"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="699,5,837,32"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="697,56,839,83"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="704,107,832,133"/>
<area shape="rect" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3" title=" " alt="" coords="689,613,847,640"/>
<area shape="rect" href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4" title=" " alt="" coords="675,664,861,691"/>
<area shape="rect" href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c" title=" " alt="" coords="955,259,1104,285"/>
<area shape="rect" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843" title=" " alt="" coords="974,360,1085,387"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="1191,385,1349,412"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="965,309,1094,336"/>
<area shape="rect" href="hyperv_8h.html#a7ffceaf3950bd76a9a3a28ff1e836e58" title=" " alt="" coords="933,563,1126,589"/>
<area shape="rect" href="hyperv_8c.html#a47f5a157cae898f7a7b370854c3748a4" title=" " alt="" coords="939,461,1119,488"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="948,512,1111,539"/>
<area shape="rect" href="xen_8h.html#ae436f94d060f3cb8029695c5a9fddc42" title=" " alt="" coords="932,208,1127,235"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1191,157,1349,184"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="953,715,1106,757"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="1205,933,1335,960"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1403,781,1561,808"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="935,1507,1124,1533"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="1199,1507,1341,1533"/>
<area shape="rect" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39" title=" " alt="" coords="963,1136,1095,1163"/>
<area shape="rect" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44" title=" " alt="" coords="952,1187,1107,1213"/>
<area shape="rect" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d" title=" " alt="" coords="941,1238,1118,1279"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="921,1035,1137,1061"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="1210,1035,1330,1061"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="927,1085,1131,1112"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="954,5,1105,32"/>
<area shape="rect" href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2" title=" " alt="" coords="688,1557,848,1584"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_acd2b4e5a0448d3280ab31687c2199265_icgraph.png" border="0" usemap="#alapic_8c_acd2b4e5a0448d3280ab31687c2199265_icgraph" alt=""/></div>
<map name="alapic_8c_acd2b4e5a0448d3280ab31687c2199265_icgraph" id="alapic_8c_acd2b4e5a0448d3280ab31687c2199265_icgraph">
<area shape="rect" title=" " alt="" coords="813,56,1001,83"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="632,56,765,83"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,56,584,83"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,56,339,83"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,5,101,32"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,56,115,83"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,107,116,133"/>
</map>
</div>

</div>
</div>
<a id="a017e57adbc721d98d26099f1a431a22c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a017e57adbc721d98d26099f1a431a22c">&#9670;&nbsp;</a></span>kvm_inhibit_apic_access_page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_inhibit_apic_access_page </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02634">2634</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;{</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;    <span class="keyword">struct </span>kvm *kvm = vcpu-&gt;kvm;</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160; </div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;    <span class="keywordflow">if</span> (!kvm-&gt;arch.apic_access_memslot_enabled)</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160; </div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;    kvm_vcpu_srcu_read_unlock(vcpu);</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160; </div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;    mutex_lock(&amp;kvm-&gt;slots_lock);</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160; </div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;    <span class="keywordflow">if</span> (kvm-&gt;arch.apic_access_memslot_enabled) {</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;        <a class="code" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9">__x86_set_memory_region</a>(kvm, APIC_ACCESS_PAGE_PRIVATE_MEMSLOT, 0, 0);</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;<span class="comment">         * Clear &quot;enabled&quot; after the memslot is deleted so that a</span></div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;<span class="comment">         * different vCPU doesn&#39;t get a false negative when checking</span></div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;<span class="comment">         * the flag out of slots_lock.  No additional memory barrier is</span></div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;<span class="comment">         * needed as modifying memslots requires waiting other vCPUs to</span></div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;<span class="comment">         * drop SRCU (see above), and false positives are ok as the</span></div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;<span class="comment">         * flag is rechecked after acquiring slots_lock.</span></div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;        kvm-&gt;arch.apic_access_memslot_enabled = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160; </div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;<span class="comment">         * Mark the memslot as inhibited to prevent reallocating the</span></div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;<span class="comment">         * memslot during vCPU creation, e.g. if a vCPU is hotplugged.</span></div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;        kvm-&gt;arch.apic_access_memslot_inhibited = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;    }</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160; </div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;    mutex_unlock(&amp;kvm-&gt;slots_lock);</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160; </div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    kvm_vcpu_srcu_read_lock(vcpu);</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a017e57adbc721d98d26099f1a431a22c_cgraph.png" border="0" usemap="#alapic_8c_a017e57adbc721d98d26099f1a431a22c_cgraph" alt=""/></div>
<map name="alapic_8c_a017e57adbc721d98d26099f1a431a22c_cgraph" id="alapic_8c_a017e57adbc721d98d26099f1a431a22c_cgraph">
<area shape="rect" title=" " alt="" coords="5,217,228,243"/>
<area shape="rect" href="x86_8c.html#a0c0c5e35bc626e4140927bf15b4881f9" title=" " alt="" coords="276,217,473,243"/>
<area shape="rect" href="kvm__main_8c.html#ac76f506181e49aa4800bb202e11cb2b3" title=" " alt="" coords="521,217,724,243"/>
<area shape="rect" href="kvm__main_8c.html#ab790fe1e5bd86339acfc80a95efddf4c" title=" " alt="" coords="795,100,966,141"/>
<area shape="rect" href="kvm__main_8c.html#a8f5a06af032a1edb199b4ae393b2de8e" title=" " alt="" coords="772,166,989,193"/>
<area shape="rect" href="guest__memfd_8c.html#abaf64b8cb9e32ccb368d1d9c49d0bb02" title=" " alt="" coords="813,217,948,243"/>
<area shape="rect" href="guest__memfd_8c.html#a905ecfa162a290dceb1c7d5678e2a70f" title=" " alt="" coords="1594,267,1745,294"/>
<area shape="rect" href="kvm__main_8c.html#ac81a7d714d0668ccea6d0c2ddfd0fed5" title=" " alt="" coords="809,705,952,731"/>
<area shape="rect" href="guest__memfd_8c.html#a2eab57d9fb8529d3751b5c8179d881c9" title=" " alt="" coords="1861,267,2016,294"/>
<area shape="rect" href="kvm__main_8c.html#a52d56a5dc447602839375289b5bbffb2" title=" " alt="" coords="1319,806,1495,833"/>
<area shape="rect" href="kvm__main_8c.html#a05eed662dd45e4e4f7485e3158d95a3b" title=" " alt="" coords="1037,343,1256,370"/>
<area shape="rect" href="kvm__main_8c.html#a8c9bd99a64bbedb0930e29ed4dcc7897" title=" " alt="" coords="1065,705,1229,731"/>
<area shape="rect" href="kvm__main_8c.html#ac4ce014a99262ed5672a102c6d2ffdbd" title=" " alt="" coords="1065,755,1229,782"/>
<area shape="rect" href="kvm__main_8c.html#aae203bcd73cff0002aeddd37bea71323" title=" " alt="" coords="1313,654,1501,681"/>
<area shape="rect" href="kvm__main_8c.html#afdb5cea8958921b2ea9bd3a29cf9d7a6" title=" " alt="" coords="1067,857,1227,883"/>
<area shape="rect" href="kvm__main_8c.html#a6dd13a049fee9663450eebbf2ac16faa" title=" " alt="" coords="1061,537,1232,579"/>
<area shape="rect" href="kvm__main_8c.html#a192569033b972982f6b53e13666ef82b" title=" " alt="" coords="1043,907,1250,934"/>
<area shape="rect" href="kvm__main_8c.html#aa89329e461345f4a586065895ca072c6" title=" " alt="" coords="1843,1009,2035,1035"/>
<area shape="rect" href="kvm__main_8c.html#a115855e32d0da82706ba0bf22d90d8f1" title=" " alt="" coords="1584,857,1755,883"/>
<area shape="rect" href="kvm__main_8c.html#a6178ec8efee3ce8e53d84403b2a25401" title=" " alt="" coords="1564,781,1775,807"/>
<area shape="rect" href="kvm__main_8c.html#ada893d7e7d49d1023d23653b23944572" title=" " alt="" coords="1858,907,2019,934"/>
<area shape="rect" href="kvm__main_8c.html#a1a0266e85b304bdbde46a83f921d9606" title=" " alt="" coords="1833,806,2044,833"/>
<area shape="rect" href="kvm__main_8c.html#a578857fc65c8fabf9b425ff0b55a5fd3" title=" " alt="" coords="1857,958,2020,985"/>
<area shape="rect" href="kvm__main_8c.html#aa3b1664c58e5dab933e8659d884d56f3" title=" " alt="" coords="1852,857,2025,883"/>
<area shape="rect" href="x86_8c.html#ae7e25dec8e0af366fb3db41dc9881970" title=" " alt="" coords="1829,755,2048,782"/>
<area shape="rect" href="mmu_8c.html#ad4293ab926b1ab16fb8b380a76b9f533" title=" " alt="" coords="2105,748,2269,789"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="2125,814,2248,841"/>
<area shape="rect" href="mmu_8c.html#abd59fd9785b9b5676841e9706c1c6797" title=" " alt="" coords="2325,723,2503,750"/>
<area shape="rect" href="x86_8c.html#af7325960c06aa482e6f168f881d83069" title=" " alt="" coords="1304,201,1509,243"/>
<area shape="rect" href="kvm__main_8c.html#aab592fb3a4d6204c86d8f99caa0986ba" title=" " alt="" coords="1571,369,1768,395"/>
<area shape="rect" href="kvm__main_8c.html#ae2d9291adcda0ba0f7a20350dabdd418" title=" " alt="" coords="1332,318,1481,345"/>
<area shape="rect" href="x86_8c.html#a5a34304a4f0ec19e4bce34e0513fc3a4" title=" " alt="" coords="1577,318,1761,345"/>
<area shape="rect" href="mmu_8c.html#a51621e034894e480342d3a5b48735d41" title=" " alt="" coords="1576,201,1763,243"/>
<area shape="rect" href="x86_8c.html#a9ca94438429f3e85a9b7b6db1ef55252" title=" " alt="" coords="1586,77,1753,119"/>
<area shape="rect" href="page__track_8h.html#ad39459f95333b39d77e1b95c99e492d8" title=" " alt="" coords="1565,150,1774,177"/>
<area shape="rect" href="page__track_8c.html#a876b27e07f1856c775d5e2241ac73236" title=" " alt="" coords="1857,319,2020,360"/>
<area shape="rect" href="x86_8c.html#a25b71677a5ab6ea572b8ecc3fd4e5a7c" title=" " alt="" coords="1861,435,2016,462"/>
<area shape="rect" href="mmu_8c.html#aeca903955eae791df4e1e22dcff2671f" title=" " alt="" coords="1854,201,2023,243"/>
<area shape="rect" href="kvm__main_8c.html#a9fbc5527db7bcb223ecfe95c59cf4c70" title=" " alt="" coords="1851,71,2026,112"/>
<area shape="rect" href="mmu_8c.html#acb92068f6e948846797ac6814b3618f1" title=" " alt="" coords="1841,136,2036,177"/>
<area shape="rect" href="mmu_8c.html#a168b7814e68a545abd8bf00fc4466610" title=" " alt="" coords="1849,5,2029,47"/>
<area shape="rect" href="mmu_8c.html#a58fe7b43995ae8c20c597e1bb9c4c007" title=" " alt="" coords="2096,683,2277,724"/>
<area shape="rect" href="kvm__main_8c.html#a31dbd36d8363fc2e5979b3976ebc0dbb" title=" " alt="" coords="1574,588,1765,629"/>
<area shape="rect" href="kvm__main_8c.html#aa87d0b55e37a312b7291fa9b5c83634c" title=" " alt="" coords="1592,654,1747,681"/>
<area shape="rect" href="kvm__main_8c.html#a40ed7705420af10446677d1c99a0978e" title=" " alt="" coords="1317,545,1496,571"/>
<area shape="rect" href="x86_8c.html#a14568e065745512e03b3088070848289" title=" " alt="" coords="1304,479,1509,520"/>
<area shape="rect" href="dirty__ring_8c.html#a38d9bd671fa9181708075184e77eca3a" title=" " alt="" coords="1321,595,1492,622"/>
<area shape="rect" href="x86_8c.html#a1be4ac58e0429946d83b58f98bfe2301" title=" " alt="" coords="1557,486,1781,513"/>
<area shape="rect" href="mmu_8h.html#a6555cf2d510d04ae19bee154d166f778" title=" " alt="" coords="1591,537,1747,563"/>
<area shape="rect" href="page__track_8h.html#a1453d524dfa18fda6888847bab37b66b" title=" " alt="" coords="1589,420,1749,461"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a017e57adbc721d98d26099f1a431a22c_icgraph.png" border="0" usemap="#alapic_8c_a017e57adbc721d98d26099f1a431a22c_icgraph" alt=""/></div>
<map name="alapic_8c_a017e57adbc721d98d26099f1a431a22c_icgraph" id="alapic_8c_a017e57adbc721d98d26099f1a431a22c_icgraph">
<area shape="rect" title=" " alt="" coords="957,5,1180,32"/>
<area shape="rect" href="x86_8c.html#a384702aafa8cdbab3cf92b3d576bb6fb" title=" " alt="" coords="727,5,909,32"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="541,5,679,32"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,5,493,32"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="ac79f0e40ed0e1cde83a09aef506fb373"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac79f0e40ed0e1cde83a09aef506fb373">&#9670;&nbsp;</a></span>kvm_inject_apic_timer_irqs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_inject_apic_timer_irqs </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02884">2884</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;{</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160; </div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;    <span class="keywordflow">if</span> (atomic_read(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a581e6b6fe55055ed8a81d5a1aa258ff7">pending</a>) &gt; 0) {</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;        <a class="code" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17">kvm_apic_inject_pending_timer_irqs</a>(apic);</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;        atomic_set(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a581e6b6fe55055ed8a81d5a1aa258ff7">pending</a>, 0);</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;    }</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ac79f0e40ed0e1cde83a09aef506fb373_cgraph.png" border="0" usemap="#alapic_8c_ac79f0e40ed0e1cde83a09aef506fb373_cgraph" alt=""/></div>
<map name="alapic_8c_ac79f0e40ed0e1cde83a09aef506fb373_cgraph" id="alapic_8c_ac79f0e40ed0e1cde83a09aef506fb373_cgraph">
<area shape="rect" title=" " alt="" coords="5,368,207,395"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="255,361,441,402"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="508,317,645,344"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="497,368,657,395"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="489,419,664,445"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="721,183,858,209"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1157,309,1328,336"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="712,411,867,453"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="717,477,862,504"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="717,528,861,555"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="949,208,1057,235"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="938,259,1067,285"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="939,309,1066,336"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="940,5,1065,32"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="915,56,1091,83"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="921,107,1085,133"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="941,157,1064,184"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1158,208,1327,235"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1139,107,1347,133"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1166,157,1319,184"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="925,411,1080,453"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="923,477,1082,504"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="923,528,1082,555"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ac79f0e40ed0e1cde83a09aef506fb373_icgraph.png" border="0" usemap="#alapic_8c_ac79f0e40ed0e1cde83a09aef506fb373_icgraph" alt=""/></div>
<map name="alapic_8c_ac79f0e40ed0e1cde83a09aef506fb373_icgraph" id="alapic_8c_ac79f0e40ed0e1cde83a09aef506fb373_icgraph">
<area shape="rect" title=" " alt="" coords="743,13,944,39"/>
<area shape="rect" href="irq_8c.html#a2d54275d9e142ae8e337298689483728" title=" " alt="" coords="541,5,695,47"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,13,493,39"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,13,364,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="a8620b1c89f8cf017f7827024fc95ac92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8620b1c89f8cf017f7827024fc95ac92">&#9670;&nbsp;</a></span>kvm_intr_is_single_vcpu_fast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_intr_is_single_vcpu_fast </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_lapic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_vcpu **&#160;</td>
          <td class="paramname"><em>dest_vcpu</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01259">1259</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;{</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="keyword">struct </span>kvm_apic_map *map;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> bitmap;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> **dst = NULL;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160; </div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="keywordflow">if</span> (irq-&gt;shorthand)</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160; </div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    rcu_read_lock();</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    map = rcu_dereference(kvm-&gt;arch.apic_map);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160; </div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f">kvm_apic_map_get_dest_lapic</a>(kvm, NULL, irq, map, &amp;dst, &amp;bitmap) &amp;&amp;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            hweight16(bitmap) == 1) {</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i = find_first_bit(&amp;bitmap, 16);</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160; </div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        <span class="keywordflow">if</span> (dst[i]) {</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            *dest_vcpu = dst[i]-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        }</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    }</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160; </div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    rcu_read_unlock();</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a8620b1c89f8cf017f7827024fc95ac92_cgraph.png" border="0" usemap="#alapic_8c_a8620b1c89f8cf017f7827024fc95ac92_cgraph" alt=""/></div>
<map name="alapic_8c_a8620b1c89f8cf017f7827024fc95ac92_cgraph" id="alapic_8c_a8620b1c89f8cf017f7827024fc95ac92_cgraph">
<area shape="rect" title=" " alt="" coords="5,166,149,207"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="197,166,381,207"/>
<area shape="rect" href="lapic_8c.html#a47d52843df792ef8e7bffdfb66a3b40b" title=" " alt="" coords="456,5,637,32"/>
<area shape="rect" href="lapic_8c.html#a079d589509607a9d9baa6bed3eae7fa6" title=" " alt="" coords="454,57,639,98"/>
<area shape="rect" href="lapic_8c.html#abbce6da431ef5f15d85b5fc741d3ef72" title=" " alt="" coords="442,123,651,149"/>
<area shape="rect" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3" title=" " alt="" coords="429,173,664,200"/>
<area shape="rect" href="lapic_8h.html#adfbea71ac96b210fb91bef47c77194f1" title=" " alt="" coords="450,224,643,251"/>
<area shape="rect" href="x86_8c.html#a47d88660a2a5f8ee22df1253604d1ed7" title=" " alt="" coords="468,275,625,317"/>
<area shape="rect" href="lapic_8c.html#ac9fecb7d9f4574931650af9abb4b9f4c" title=" " alt="" coords="465,341,628,368"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="712,123,855,149"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a8620b1c89f8cf017f7827024fc95ac92_icgraph.png" border="0" usemap="#alapic_8c_a8620b1c89f8cf017f7827024fc95ac92_icgraph" alt=""/></div>
<map name="alapic_8c_a8620b1c89f8cf017f7827024fc95ac92_icgraph" id="alapic_8c_a8620b1c89f8cf017f7827024fc95ac92_icgraph">
<area shape="rect" title=" " alt="" coords="632,23,776,65"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="401,31,584,57"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="212,5,344,32"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="203,56,353,83"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="5,5,155,32"/>
</map>
</div>

</div>
</div>
<a id="a900c0170b3a9f3c6869d072aa14055d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a900c0170b3a9f3c6869d072aa14055d1">&#9670;&nbsp;</a></span>kvm_ioapic_handles_vector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_ioapic_handles_vector </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01437">1437</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;{</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <span class="keywordflow">return</span> test_bit(vector, apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.ioapic_handled_vectors);</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a900c0170b3a9f3c6869d072aa14055d1_icgraph.png" border="0" usemap="#alapic_8c_a900c0170b3a9f3c6869d072aa14055d1_icgraph" alt=""/></div>
<map name="alapic_8c_a900c0170b3a9f3c6869d072aa14055d1_icgraph" id="alapic_8c_a900c0170b3a9f3c6869d072aa14055d1_icgraph">
<area shape="rect" title=" " alt="" coords="2032,71,2187,113"/>
<area shape="rect" href="lapic_8c.html#ac56f15a70a1339e966c89b349b3f7850" title=" " alt="" coords="1825,29,1981,70"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="1821,108,1984,135"/>
<area shape="rect" href="lapic_8c.html#a332060485ef249fcfd9edbf9cf80dd2b" title=" " alt="" coords="1568,9,1756,36"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="864,5,1001,32"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="671,5,752,32"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="392,5,579,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="189,5,313,32"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="1611,108,1713,135"/>
<area shape="rect" href="lapic_8c.html#a501cf23b440691f979fad04c87067f93" title=" " alt="" coords="1551,165,1773,192"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="1323,81,1497,122"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1331,169,1489,196"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="1090,57,1254,98"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1105,123,1239,149"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1075,173,1269,200"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1091,224,1253,251"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1101,300,1243,327"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="857,57,1009,98"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="843,123,1022,149"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="863,173,1003,200"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="632,115,791,157"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="839,224,1027,251"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="399,275,572,301"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="645,224,778,251"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,224,584,251"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,249,339,276"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,199,101,225"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,249,115,276"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,300,116,327"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="857,325,1008,352"/>
<area shape="rect" href="vmx_8c.html#aa6d0d83d48d1737ca7aa8b2b5a6f066a" title=" " alt="" coords="1317,220,1503,247"/>
</map>
</div>

</div>
</div>
<a id="a5001020f0ca8d6d692c54dd23b40ade4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5001020f0ca8d6d692c54dd23b40ade4">&#9670;&nbsp;</a></span>kvm_ioapic_send_eoi()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_ioapic_send_eoi </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01442">1442</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;{</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="keywordtype">int</span> trigger_mode;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160; </div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    <span class="comment">/* Eoi the ioapic only if the ioapic doesn&#39;t own the vector. */</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8c.html#a900c0170b3a9f3c6869d072aa14055d1">kvm_ioapic_handles_vector</a>(apic, vector))</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160; </div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <span class="comment">/* Request a KVM exit to inform the userspace IOAPIC. */</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="irq_8h.html#a68413268c1f1f354270e9a0de9c2fe44">irqchip_split</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm)) {</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.pending_ioapic_eoi = vector;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        kvm_make_request(KVM_REQ_IOAPIC_EOI_EXIT, apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    }</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160; </div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8">apic_test_vector</a>(vector, apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_TMR))</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        trigger_mode = <a class="code" href="ioapic_8h.html#a3238bb66574f934027d4a939d20ff7bd">IOAPIC_LEVEL_TRIG</a>;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;        trigger_mode = <a class="code" href="ioapic_8h.html#a934411ab023c83fffe50d32dee463d79">IOAPIC_EDGE_TRIG</a>;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160; </div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <a class="code" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209">kvm_ioapic_update_eoi</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, vector, trigger_mode);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;}</div>
<div class="ttc" id="aioapic_8c_html_a902413d17a9a7262f3e9979bdb7b7209"><div class="ttname"><a href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209">kvm_ioapic_update_eoi</a></div><div class="ttdeci">void kvm_ioapic_update_eoi(struct kvm_vcpu *vcpu, int vector, int trigger_mode)</div><div class="ttdef"><b>Definition:</b> <a href="ioapic_8c_source.html#l00579">ioapic.c:579</a></div></div>
<div class="ttc" id="aioapic_8h_html_a3238bb66574f934027d4a939d20ff7bd"><div class="ttname"><a href="ioapic_8h.html#a3238bb66574f934027d4a939d20ff7bd">IOAPIC_LEVEL_TRIG</a></div><div class="ttdeci">#define IOAPIC_LEVEL_TRIG</div><div class="ttdef"><b>Definition:</b> <a href="ioapic_8h_source.html#l00016">ioapic.h:16</a></div></div>
<div class="ttc" id="aioapic_8h_html_a934411ab023c83fffe50d32dee463d79"><div class="ttname"><a href="ioapic_8h.html#a934411ab023c83fffe50d32dee463d79">IOAPIC_EDGE_TRIG</a></div><div class="ttdeci">#define IOAPIC_EDGE_TRIG</div><div class="ttdef"><b>Definition:</b> <a href="ioapic_8h_source.html#l00015">ioapic.h:15</a></div></div>
<div class="ttc" id="airq_8h_html_a68413268c1f1f354270e9a0de9c2fe44"><div class="ttname"><a href="irq_8h.html#a68413268c1f1f354270e9a0de9c2fe44">irqchip_split</a></div><div class="ttdeci">static int irqchip_split(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="irq_8h_source.html#l00067">irq.h:67</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a5001020f0ca8d6d692c54dd23b40ade4_cgraph.png" border="0" usemap="#alapic_8c_a5001020f0ca8d6d692c54dd23b40ade4_cgraph" alt=""/></div>
<map name="alapic_8c_a5001020f0ca8d6d692c54dd23b40ade4_cgraph" id="alapic_8c_a5001020f0ca8d6d692c54dd23b40ade4_cgraph">
<area shape="rect" title=" " alt="" coords="5,823,168,849"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1875,645,2005,672"/>
<area shape="rect" href="irq_8h.html#a68413268c1f1f354270e9a0de9c2fe44" title=" " alt="" coords="253,848,355,875"/>
<area shape="rect" href="lapic_8c.html#a900c0170b3a9f3c6869d072aa14055d1" title=" " alt="" coords="227,899,381,941"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="216,411,392,437"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="440,411,647,437"/>
<area shape="rect" href="ioapic_8c.html#aa590f4d1416bf84560a4e9693c638f55" title=" " alt="" coords="498,220,589,247"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="710,480,825,507"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1867,309,2013,336"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="888,500,1077,527"/>
<area shape="rect" href="lapic_8c.html#a47d52843df792ef8e7bffdfb66a3b40b" title=" " alt="" coords="1596,747,1777,773"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="1345,157,1513,184"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="1137,745,1278,772"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="1361,639,1497,665"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="2095,797,2265,824"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="1130,522,1285,563"/>
<area shape="rect" href="lapic_8h.html#adfbea71ac96b210fb91bef47c77194f1" title=" " alt="" coords="1590,411,1783,437"/>
<area shape="rect" href="x86_8c.html#a47d88660a2a5f8ee22df1253604d1ed7" title=" " alt="" coords="1608,462,1765,503"/>
<area shape="rect" href="lapic_8c.html#ac9fecb7d9f4574931650af9abb4b9f4c" title=" " alt="" coords="1605,696,1768,723"/>
<area shape="rect" href="lapic_8c.html#a870119cb74033f360164df90029af75a" title=" " alt="" coords="1577,208,1796,235"/>
<area shape="rect" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6" title=" " alt="" coords="1571,107,1802,133"/>
<area shape="rect" href="lapic_8c.html#a8fb87d02d911e49b5793e391702afe7e" title=" " alt="" coords="1626,157,1747,184"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="2109,208,2251,235"/>
<area shape="rect" href="lapic_8c.html#a98bde25094c754b30e796357ba643ab0" title=" " alt="" coords="1862,208,2018,235"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="2101,309,2259,336"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="1880,5,2000,32"/>
<area shape="rect" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096" title=" " alt="" coords="1884,56,1996,83"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="2095,975,2265,1001"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1370,745,1489,772"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1618,848,1755,875"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1886,949,1994,976"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1877,848,2003,875"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1877,899,2003,925"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1852,696,2028,723"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1858,747,2022,773"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1879,797,2001,824"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="2076,848,2284,875"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="2103,747,2257,773"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="1337,522,1521,563"/>
<area shape="rect" href="lapic_8c.html#a079d589509607a9d9baa6bed3eae7fa6" title=" " alt="" coords="1594,579,1779,621"/>
<area shape="rect" href="lapic_8c.html#abbce6da431ef5f15d85b5fc741d3ef72" title=" " alt="" coords="1582,528,1791,555"/>
<area shape="rect" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3" title=" " alt="" coords="1569,645,1804,672"/>
<area shape="rect" href="ioapic_8c.html#a1d24315dec2401b4c45b224469c7379d" title=" " alt="" coords="695,193,840,234"/>
<area shape="rect" href="ioapic_8c.html#a6a7d0d8b3a3717172c57ed1916318952" title=" " alt="" coords="901,134,1064,175"/>
<area shape="rect" href="ioapic_8c.html#aca4e6c938829fb401b5c01cba3bd19b2" title=" " alt="" coords="1125,193,1289,234"/>
<area shape="rect" href="ioapic_8c.html#a4d9be607caa84875994b688c86711dcc" title=" " alt="" coords="1132,127,1283,169"/>
<area shape="rect" href="lapic_8c.html#a637f6f499709ab30e61db1b69177ea00" title=" " alt="" coords="1344,208,1515,235"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a5001020f0ca8d6d692c54dd23b40ade4_icgraph.png" border="0" usemap="#alapic_8c_a5001020f0ca8d6d692c54dd23b40ade4_icgraph" alt=""/></div>
<map name="alapic_8c_a5001020f0ca8d6d692c54dd23b40ade4_icgraph" id="alapic_8c_a5001020f0ca8d6d692c54dd23b40ade4_icgraph">
<area shape="rect" title=" " alt="" coords="1821,184,1984,211"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="1611,159,1713,185"/>
<area shape="rect" href="lapic_8c.html#a501cf23b440691f979fad04c87067f93" title=" " alt="" coords="1551,209,1773,236"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="1323,67,1497,109"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1331,159,1489,185"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="1090,13,1254,54"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="864,5,1001,32"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="671,5,752,32"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="392,5,579,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="189,5,313,32"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1105,108,1239,135"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1075,159,1269,185"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1091,224,1253,251"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1101,300,1243,327"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="857,57,1009,98"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="843,123,1022,149"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="863,173,1003,200"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="632,115,791,157"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="839,224,1027,251"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="399,275,572,301"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="645,224,778,251"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,224,584,251"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,249,339,276"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,199,101,225"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,249,115,276"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,300,116,327"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="857,325,1008,352"/>
<area shape="rect" href="vmx_8c.html#aa6d0d83d48d1737ca7aa8b2b5a6f066a" title=" " alt="" coords="1317,209,1503,236"/>
</map>
</div>

</div>
</div>
<a id="a17eee4051fa1d41b805b09a195f64045"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17eee4051fa1d41b805b09a195f64045">&#9670;&nbsp;</a></span>kvm_irq_delivery_to_apic_fast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_irq_delivery_to_apic_fast </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_lapic_irq *&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdest__map.html">dest_map</a> *&#160;</td>
          <td class="paramname"><em>dest_map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01208">1208</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;{</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keyword">struct </span>kvm_apic_map *map;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> bitmap;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> **dst = NULL;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="keywordtype">bool</span> ret;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160; </div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    *r = -1;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160; </div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordflow">if</span> (irq-&gt;shorthand == APIC_DEST_SELF) {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        <span class="keywordflow">if</span> (KVM_BUG_ON(!src, kvm)) {</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;            *r = 0;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        }</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        *r = <a class="code" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741">kvm_apic_set_irq</a>(src-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, irq, <a class="code" href="structdest__map.html">dest_map</a>);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    rcu_read_lock();</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    map = rcu_dereference(kvm-&gt;arch.apic_map);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160; </div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    ret = <a class="code" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f">kvm_apic_map_get_dest_lapic</a>(kvm, &amp;src, irq, map, &amp;dst, &amp;bitmap);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keywordflow">if</span> (ret) {</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        *r = 0;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        for_each_set_bit(i, &amp;bitmap, 16) {</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            <span class="keywordflow">if</span> (!dst[i])</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            *r += <a class="code" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741">kvm_apic_set_irq</a>(dst[i]-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, irq, <a class="code" href="structdest__map.html">dest_map</a>);</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        }</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    }</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    rcu_read_unlock();</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a17eee4051fa1d41b805b09a195f64045_cgraph.png" border="0" usemap="#alapic_8c_a17eee4051fa1d41b805b09a195f64045_cgraph" alt=""/></div>
<map name="alapic_8c_a17eee4051fa1d41b805b09a195f64045_cgraph" id="alapic_8c_a17eee4051fa1d41b805b09a195f64045_cgraph">
<area shape="rect" title=" " alt="" coords="5,275,160,317"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="208,191,392,233"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="232,312,368,339"/>
<area shape="rect" href="lapic_8c.html#a47d52843df792ef8e7bffdfb66a3b40b" title=" " alt="" coords="467,5,648,32"/>
<area shape="rect" href="lapic_8c.html#a079d589509607a9d9baa6bed3eae7fa6" title=" " alt="" coords="465,57,650,98"/>
<area shape="rect" href="lapic_8c.html#abbce6da431ef5f15d85b5fc741d3ef72" title=" " alt="" coords="453,123,662,149"/>
<area shape="rect" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3" title=" " alt="" coords="440,173,675,200"/>
<area shape="rect" href="lapic_8h.html#adfbea71ac96b210fb91bef47c77194f1" title=" " alt="" coords="461,224,654,251"/>
<area shape="rect" href="x86_8c.html#a47d88660a2a5f8ee22df1253604d1ed7" title=" " alt="" coords="479,275,636,317"/>
<area shape="rect" href="lapic_8c.html#ac9fecb7d9f4574931650af9abb4b9f4c" title=" " alt="" coords="476,341,639,368"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="739,123,882,149"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="489,392,626,419"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="757,240,865,267"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="746,291,875,317"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="747,341,874,368"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="748,392,873,419"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="723,443,899,469"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="729,493,893,520"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="749,544,872,571"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="965,215,1136,241"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="966,265,1135,292"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="947,519,1155,545"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="974,569,1127,596"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a17eee4051fa1d41b805b09a195f64045_icgraph.png" border="0" usemap="#alapic_8c_a17eee4051fa1d41b805b09a195f64045_icgraph" alt=""/></div>
<map name="alapic_8c_a17eee4051fa1d41b805b09a195f64045_icgraph" id="alapic_8c_a17eee4051fa1d41b805b09a195f64045_icgraph">
<area shape="rect" title=" " alt="" coords="1648,149,1803,190"/>
<area shape="rect" href="irq__comm_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="920,61,1121,88"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1411,588,1600,615"/>
<area shape="rect" href="xen_8c.html#a7ba53f4f869b74569192380f1adfd40c" title=" " alt="" coords="1424,149,1587,190"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="1210,411,1325,437"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="1194,639,1341,665"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="1187,740,1348,767"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1213,563,1322,589"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="1214,824,1321,851"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="965,360,1077,387"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="942,411,1099,437"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="917,284,1124,311"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="917,461,1124,488"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="684,309,847,336"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="691,360,839,387"/>
<area shape="rect" href="ioapic_8c.html#a477f1b98bf8d9dfcd1e51c743d79ac47" title=" " alt="" coords="457,309,581,336"/>
<area shape="rect" href="irq__comm_8c.html#ae12bd4085acdb92be18af95ac983d5a5" title=" " alt="" coords="445,385,593,412"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="205,436,377,463"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="5,436,157,463"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="692,411,839,437"/>
<area shape="rect" href="ioapic_8c.html#a21c528e901ef596bba3f882ed5ac9597" title=" " alt="" coords="703,259,828,285"/>
<area shape="rect" href="x86_8c.html#a10224987f77e7370dd9f2b80352544ab" title=" " alt="" coords="445,208,594,235"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="677,461,853,488"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="438,461,601,488"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="443,582,595,623"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="942,668,1099,695"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="939,719,1103,745"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="698,617,833,644"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="668,719,863,745"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="685,769,846,796"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="694,668,837,695"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="430,719,609,745"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="449,668,589,695"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="425,820,613,847"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="433,769,606,796"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="688,821,843,862"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="931,769,1110,796"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="924,563,1117,589"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="937,824,1104,851"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="949,883,1092,909"/>
<area shape="rect" href="hyperv_8c.html#a3bfbf343eefc11963b210ba8322f6826" title=" " alt="" coords="697,887,834,913"/>
<area shape="rect" href="xen_8c.html#a0fb0356e88890003922daf35627420a8" title=" " alt="" coords="1176,185,1359,226"/>
<area shape="rect" href="xen_8c.html#a48738df3c98025631e2412d90758136c" title=" " alt="" coords="1172,112,1363,139"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="980,197,1061,224"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="672,208,859,235"/>
<area shape="rect" href="xen_8c.html#a59091fb436633f85ba3e28187f5794d0" title=" " alt="" coords="941,112,1100,139"/>
<area shape="rect" href="xen_8c.html#a7432a92fb771aeb9f60ca4d89c10f15b" title=" " alt="" coords="709,5,822,32"/>
<area shape="rect" href="xen_8c.html#a42cb09290dc39689baca95686be1ff69" title=" " alt="" coords="661,56,869,83"/>
<area shape="rect" href="xen_8c.html#a952a322aa5cce4d0bd3fe372d820de13" title=" " alt="" coords="662,157,869,184"/>
<area shape="rect" href="xen_8c.html#ab30962c07569543c2879269c4ec40d70" title=" " alt="" coords="667,107,864,133"/>
</map>
</div>

</div>
</div>
<a id="af2d9c133a24e68f345a3fe133bf8bfaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2d9c133a24e68f345a3fe133bf8bfaf">&#9670;&nbsp;</a></span>kvm_lapic_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_exit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03313">3313</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;{</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;    static_key_deferred_flush(&amp;<a class="code" href="lapic_8h.html#a65788ee3d09ea041368cd93b3391f3c4">apic_hw_disabled</a>);</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;    WARN_ON(static_branch_unlikely(&amp;<a class="code" href="lapic_8h.html#a65788ee3d09ea041368cd93b3391f3c4">apic_hw_disabled</a>.key));</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;    static_key_deferred_flush(&amp;<a class="code" href="lapic_8h.html#a3c2a1bc1bb244452f5338719ef4e73c8">apic_sw_disabled</a>);</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;    WARN_ON(static_branch_unlikely(&amp;<a class="code" href="lapic_8h.html#a3c2a1bc1bb244452f5338719ef4e73c8">apic_sw_disabled</a>.key));</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_af2d9c133a24e68f345a3fe133bf8bfaf_icgraph.png" border="0" usemap="#alapic_8c_af2d9c133a24e68f345a3fe133bf8bfaf_icgraph" alt=""/></div>
<map name="alapic_8c_af2d9c133a24e68f345a3fe133bf8bfaf_icgraph" id="alapic_8c_af2d9c133a24e68f345a3fe133bf8bfaf_icgraph">
<area shape="rect" title=" " alt="" coords="495,81,616,108"/>
<area shape="rect" href="x86_8c.html#a6b0e9d5b7fc8842b6316f94643af7023" title=" " alt="" coords="280,81,447,108"/>
<area shape="rect" href="svm_8c.html#a5b14d1e0632116bdfd341cd3c892a5eb" title=" " alt="" coords="136,31,232,57"/>
<area shape="rect" href="vmx_8c.html#acac20580f6f7fdad4ef0e94f2465c889" title=" " alt="" coords="143,81,225,108"/>
<area shape="rect" href="vmx_8c.html#aa8f62a8c3a5a5da29c69565d2645a371" title=" " alt="" coords="145,132,223,159"/>
<area shape="rect" href="svm_8c.html#ae292292ef2cf8cb0d48cfa27ce94ef88" title=" " alt="" coords="5,5,88,32"/>
<area shape="rect" href="svm_8c.html#aa667b0a0f202f83aa1533825aeecb402" title=" " alt="" coords="7,56,86,83"/>
</map>
</div>

</div>
</div>
<a id="a55b40b66655c45769650efd20bf3c26d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55b40b66655c45769650efd20bf3c26d">&#9670;&nbsp;</a></span>kvm_lapic_expired_hv_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_expired_hv_timer </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02171">2171</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;{</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160; </div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;    preempt_disable();</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    <span class="comment">/* If the preempt notifier has already run, it also called apic_timer_expired */</span></div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    <span class="keywordflow">if</span> (!apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a033831ad90c69d7ea4e9af3fd0a6727e">hv_timer_in_use</a>)</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    WARN_ON(kvm_vcpu_is_blocking(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>));</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    <a class="code" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837">apic_timer_expired</a>(apic, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    <a class="code" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae">cancel_hv_timer</a>(apic);</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160; </div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667">apic_lvtt_period</a>(apic) &amp;&amp; apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a>) {</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;        <a class="code" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede">advance_periodic_target_expiration</a>(apic);</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;        <a class="code" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db">restart_apic_timer</a>(apic);</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    }</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;out:</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    preempt_enable();</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a55b40b66655c45769650efd20bf3c26d_cgraph.png" border="0" usemap="#alapic_8c_a55b40b66655c45769650efd20bf3c26d_cgraph" alt=""/></div>
<map name="alapic_8c_a55b40b66655c45769650efd20bf3c26d_cgraph" id="alapic_8c_a55b40b66655c45769650efd20bf3c26d_cgraph">
<area shape="rect" title=" " alt="" coords="5,279,173,321"/>
<area shape="rect" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede" title=" " alt="" coords="784,614,967,655"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="593,287,720,313"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="802,244,949,271"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="592,236,721,263"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="221,287,363,313"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="1271,528,1403,555"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="1501,604,1621,631"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="1502,541,1621,568"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="1739,705,1835,732"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="1015,427,1201,453"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="1257,309,1417,336"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="1015,361,1201,402"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1725,183,1848,209"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="1021,208,1195,235"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="1021,91,1195,133"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="1261,477,1412,504"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="1265,411,1408,453"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="1268,579,1405,605"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="1249,360,1424,387"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1493,361,1630,388"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1941,259,2112,285"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="1484,473,1639,514"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1489,208,1634,235"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1489,415,1633,441"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1733,335,1841,361"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1722,385,1851,412"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1723,436,1850,463"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1724,487,1849,513"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1699,537,1875,564"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1705,284,1869,311"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1942,335,2111,361"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1923,145,2131,172"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1950,196,2103,223"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1709,639,1864,681"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1707,132,1866,159"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1707,588,1866,615"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="1257,57,1416,98"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="1493,107,1630,133"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="1481,5,1642,32"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="1472,56,1651,83"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1727,56,1846,83"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="411,236,529,263"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="411,388,529,415"/>
<area shape="rect" href="lapic_8c.html#a2400290b895608d302ecce4ee352ee25" title=" " alt="" coords="1020,40,1196,67"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="594,501,719,528"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="577,337,736,364"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a55b40b66655c45769650efd20bf3c26d_icgraph.png" border="0" usemap="#alapic_8c_a55b40b66655c45769650efd20bf3c26d_icgraph" alt=""/></div>
<map name="alapic_8c_a55b40b66655c45769650efd20bf3c26d_icgraph" id="alapic_8c_a55b40b66655c45769650efd20bf3c26d_icgraph">
<area shape="rect" title=" " alt="" coords="896,23,1064,65"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="639,23,848,65"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="392,5,583,32"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="384,56,591,83"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="188,5,336,32"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="5,5,140,32"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="203,56,321,83"/>
</map>
</div>

</div>
</div>
<a id="a1e5b22760af617cabb18355a0a373156"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e5b22760af617cabb18355a0a373156">&#9670;&nbsp;</a></span>kvm_lapic_find_highest_irr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_lapic_find_highest_irr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00808">808</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;{</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="comment">/* This may race with setting of irr in __apic_accept_irq() and</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">     * value returned may be wrong, but kvm_vcpu_kick() in __apic_accept_irq</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment">     * will cause vmexit immediately and the value will be recalculated</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">     * on the next vmentry.</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79">apic_find_highest_irr</a>(vcpu-&gt;arch.apic);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a1e5b22760af617cabb18355a0a373156_cgraph.png" border="0" usemap="#alapic_8c_a1e5b22760af617cabb18355a0a373156_cgraph" alt=""/></div>
<map name="alapic_8c_a1e5b22760af617cabb18355a0a373156_cgraph" id="alapic_8c_a1e5b22760af617cabb18355a0a373156_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,201,32"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="249,5,405,32"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="453,5,573,32"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="621,5,771,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a1e5b22760af617cabb18355a0a373156_icgraph.png" border="0" usemap="#alapic_8c_a1e5b22760af617cabb18355a0a373156_icgraph" alt=""/></div>
<map name="alapic_8c_a1e5b22760af617cabb18355a0a373156_icgraph" id="alapic_8c_a1e5b22760af617cabb18355a0a373156_icgraph">
<area shape="rect" title=" " alt="" coords="1191,121,1387,148"/>
<area shape="rect" href="x86_8c.html#af2257f2e81aff845f58e2112c4f46ce7" title=" " alt="" coords="984,96,1143,123"/>
<area shape="rect" href="vmx_8c.html#ac2197e1b1fbae590edacaecfd1d0974c" title=" " alt="" coords="987,147,1140,173"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="773,96,936,123"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="779,9,930,50"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="786,147,923,173"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="623,107,721,133"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="619,56,725,83"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,55,350,97"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="448,111,535,137"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,63,129,89"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,121,364,148"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="412,5,571,32"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="631,157,713,184"/>
</map>
</div>

</div>
</div>
<a id="a3aead5d19fd0505da0197dfc140d6824"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3aead5d19fd0505da0197dfc140d6824">&#9670;&nbsp;</a></span>kvm_lapic_get_cr8()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 kvm_lapic_get_cr8 </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02521">2521</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;{</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;    u64 tpr;</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160; </div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    tpr = (u64) <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(vcpu-&gt;arch.apic, APIC_TASKPRI);</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160; </div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    <span class="keywordflow">return</span> (tpr &amp; 0xf0) &gt;&gt; 4;</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a3aead5d19fd0505da0197dfc140d6824_cgraph.png" border="0" usemap="#alapic_8c_a3aead5d19fd0505da0197dfc140d6824_cgraph" alt=""/></div>
<map name="alapic_8c_a3aead5d19fd0505da0197dfc140d6824_cgraph" id="alapic_8c_a3aead5d19fd0505da0197dfc140d6824_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,149,32"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="197,5,343,32"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="391,5,549,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a3aead5d19fd0505da0197dfc140d6824_icgraph.png" border="0" usemap="#alapic_8c_a3aead5d19fd0505da0197dfc140d6824_icgraph" alt=""/></div>
<map name="alapic_8c_a3aead5d19fd0505da0197dfc140d6824_icgraph" id="alapic_8c_a3aead5d19fd0505da0197dfc140d6824_icgraph">
<area shape="rect" title=" " alt="" coords="1251,223,1395,250"/>
<area shape="rect" href="x86_8c.html#a314ef23ae9439bea8ebd5983055cfad8" title=" " alt="" coords="1070,299,1177,326"/>
<area shape="rect" href="x86_8c.html#af2257f2e81aff845f58e2112c4f46ce7" title=" " alt="" coords="1044,97,1203,123"/>
<area shape="rect" href="x86_8c.html#ad00e08e30ec34c0fd7bd1da9acf21519" title=" " alt="" coords="833,173,996,199"/>
<area shape="rect" href="svm_8c.html#af2ee2a03530f5b7a02a127d8b779d2ae" title=" " alt="" coords="619,451,785,478"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="855,426,974,453"/>
<area shape="rect" href="x86_8c.html#ac807523477f9c6ca1c02dccb6e6eb327" title=" " alt="" coords="851,223,979,250"/>
<area shape="rect" href="vmx_8c.html#aa55ace9429e6e94042e6602716222805" title=" " alt="" coords="872,274,957,301"/>
<area shape="rect" href="x86_8c.html#aced999ac2c84f5838ddf0279cbf4c8e7" title=" " alt="" coords="415,325,567,351"/>
<area shape="rect" href="svm_8c.html#ac7f791888ec3548c8fa076367bbc84d9" title=" " alt="" coords="846,375,983,402"/>
<area shape="rect" href="x86_8c.html#aa8b2c6f3e5e8e56fe84a90d66f2d6982" title=" " alt="" coords="653,274,751,301"/>
<area shape="rect" href="x86_8c.html#a0c8605c4aae33c7235b26f4df7cc8f54" title=" " alt="" coords="649,122,755,149"/>
<area shape="rect" href="x86_8c.html#ac6ebab4c3448cdbc79dbcac73e94503b" title=" " alt="" coords="191,321,350,363"/>
<area shape="rect" href="x86_8c.html#aedf3017b9048be5cee8ed8cba72809f0" title=" " alt="" coords="446,274,537,301"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,186,129,213"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,223,364,250"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="412,71,571,98"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="644,375,760,402"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="833,71,996,98"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="627,5,777,47"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="846,122,983,149"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="653,173,751,199"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="649,71,755,98"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,140,350,181"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="448,173,535,199"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="451,223,532,250"/>
</map>
</div>

</div>
</div>
<a id="a378a0961283ea67791303e70114fb10d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a378a0961283ea67791303e70114fb10d">&#9670;&nbsp;</a></span>kvm_lapic_get_reg64()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static __always_inline u64 kvm_lapic_get_reg64 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00088">88</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;{</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#aa06cb4ebbfa40dbfa494b3b4cd9f8833">__kvm_lapic_get_reg64</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a>, reg);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a378a0961283ea67791303e70114fb10d_cgraph.png" border="0" usemap="#alapic_8c_a378a0961283ea67791303e70114fb10d_cgraph" alt=""/></div>
<map name="alapic_8c_a378a0961283ea67791303e70114fb10d_cgraph" id="alapic_8c_a378a0961283ea67791303e70114fb10d_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,167,32"/>
<area shape="rect" href="lapic_8c.html#aa06cb4ebbfa40dbfa494b3b4cd9f8833" title=" " alt="" coords="215,5,389,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a378a0961283ea67791303e70114fb10d_icgraph.png" border="0" usemap="#alapic_8c_a378a0961283ea67791303e70114fb10d_icgraph" alt=""/></div>
<map name="alapic_8c_a378a0961283ea67791303e70114fb10d_icgraph" id="alapic_8c_a378a0961283ea67791303e70114fb10d_icgraph">
<area shape="rect" title=" " alt="" coords="1315,147,1476,174"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1072,97,1267,123"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="1091,173,1248,199"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="856,5,1008,47"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="843,71,1021,98"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="862,122,1002,149"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="633,64,792,105"/>
<area shape="rect" href="lapic_8c.html#ae9bd2989ca4c31caf8aa56b8c7dfd248" title=" " alt="" coords="840,173,1024,199"/>
<area shape="rect" href="lapic_8c.html#a179cfc2268db31f40b5bd9b1c247a37b" title=" " alt="" coords="401,223,571,250"/>
<area shape="rect" href="hyperv_8c.html#acd3e0dad98bde91068115067f6ec3ae6" title=" " alt="" coords="645,173,780,199"/>
<area shape="rect" href="hyperv_8c.html#a23d197f9ae27f820fa7e977aec518698" title=" " alt="" coords="387,173,585,199"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="164,198,339,225"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="5,173,116,199"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="5,223,116,250"/>
</map>
</div>

</div>
</div>
<a id="a054dd145c5435c8bfe1dea1adf2ed1e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a054dd145c5435c8bfe1dea1adf2ed1e1">&#9670;&nbsp;</a></span>kvm_lapic_hv_timer_in_use()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool kvm_lapic_hv_timer_in_use </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02083">2083</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;{</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(vcpu))</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160; </div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    <span class="keywordflow">return</span> vcpu-&gt;arch.apic-&gt;lapic_timer.hv_timer_in_use;</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a054dd145c5435c8bfe1dea1adf2ed1e1_cgraph.png" border="0" usemap="#alapic_8c_a054dd145c5435c8bfe1dea1adf2ed1e1_cgraph" alt=""/></div>
<map name="alapic_8c_a054dd145c5435c8bfe1dea1adf2ed1e1_cgraph" id="alapic_8c_a054dd145c5435c8bfe1dea1adf2ed1e1_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,160,47"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="208,13,327,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a054dd145c5435c8bfe1dea1adf2ed1e1_icgraph.png" border="0" usemap="#alapic_8c_a054dd145c5435c8bfe1dea1adf2ed1e1_icgraph" alt=""/></div>
<map name="alapic_8c_a054dd145c5435c8bfe1dea1adf2ed1e1_icgraph" id="alapic_8c_a054dd145c5435c8bfe1dea1adf2ed1e1_icgraph">
<area shape="rect" title=" " alt="" coords="1995,1085,2149,1126"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1788,1117,1947,1144"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1820,1067,1915,1093"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="1625,1117,1740,1144"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="1639,623,1727,649"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="1438,1117,1517,1144"/>
<area shape="rect" href="svm_8c.html#aa667b0a0f202f83aa1533825aeecb402" title=" " alt="" coords="1190,1092,1269,1119"/>
<area shape="rect" href="vmx_8c.html#aa8f62a8c3a5a5da29c69565d2645a371" title=" " alt="" coords="1190,1143,1269,1169"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="1391,309,1563,336"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="1398,623,1557,649"/>
<area shape="rect" href="x86_8c.html#a8103751d0c861cfc0c6d0fed892e2454" title=" " alt="" coords="1398,674,1557,715"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="1398,739,1557,781"/>
<area shape="rect" href="x86_8c.html#a3de7a07b3d9ed3ee68dbdfb0c53dc5d0" title=" " alt="" coords="1398,805,1557,846"/>
<area shape="rect" href="x86_8c.html#ac6ebab4c3448cdbc79dbcac73e94503b" title=" " alt="" coords="1398,870,1557,911"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="1384,1067,1571,1093"/>
<area shape="rect" href="x86_8c.html#a02f0a60bd0147952e87f6ad38128f748" title=" " alt="" coords="1398,935,1557,977"/>
<area shape="rect" href="x86_8c.html#ae3d9929c9a77fa2c710befa0a784d4c6" title=" " alt="" coords="1398,1001,1557,1042"/>
<area shape="rect" href="x86_8c.html#a93a45fe328a7ab7be2e5426ffc845c32" title=" " alt="" coords="1398,361,1557,402"/>
<area shape="rect" href="x86_8c.html#af51ba1557e985ebd63f465527cc511b3" title=" " alt="" coords="1398,426,1557,467"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="1398,491,1557,533"/>
<area shape="rect" href="x86_8c.html#aa4fc098aab8bc9588c83cfcb89eceee2" title=" " alt="" coords="1398,557,1557,598"/>
<area shape="rect" href="x86_8c.html#a7491f962c44e4926933a5bd58c521731" title=" " alt="" coords="1377,259,1577,285"/>
<area shape="rect" href="x86_8c.html#aa7dd06e7d0835e6cbf23134ad9fb19d8" title=" " alt="" coords="1387,157,1568,184"/>
<area shape="rect" href="vmx_2nested_8c.html#a2c53f6d5cd8133df2c8e67ab90b9aa5f" title=" " alt="" coords="1391,208,1564,235"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="1129,284,1329,311"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="1167,715,1291,741"/>
<area shape="rect" href="x86_8c.html#a6710e6b26ce720cb1d40113afe17efa7" title=" " alt="" coords="1135,157,1323,184"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="911,157,1081,184"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="553,69,680,96"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="728,183,863,209"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="303,5,497,32"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="559,183,674,209"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="325,107,475,133"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="317,157,483,184"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="323,208,477,235"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="295,259,505,285"/>
<area shape="rect" href="debugfs_8c.html#af0427db3ec1a8c38ea51591abbefde57" title=" " alt="" coords="314,310,486,351"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="333,376,467,403"/>
<area shape="rect" href="sev_8c.html#ad28fd793149997c912b52490f6ca139a" title=" " alt="" coords="329,427,471,453"/>
<area shape="rect" href="sev_8c.html#af1eb77eac84f085b0a943b87f783e30d" title=" " alt="" coords="335,56,465,83"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="47,107,205,133"/>
<area shape="rect" href="sev_8c.html#abe3c569b297da3b78824074b8c08f9a7" title=" " alt="" coords="5,427,247,453"/>
<area shape="rect" href="svm_8c.html#a0e69cefce46e7b11e1e8e056ea5b6561" title=" " alt="" coords="59,56,193,83"/>
<area shape="rect" href="vmx_8c.html#ac1cd58b9f223df9d6b5fe9695c0cbe2b" title=" " alt="" coords="1168,208,1291,235"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="1642,1067,1723,1093"/>
</map>
</div>

</div>
</div>
<a id="a36de6235abe5d5bd2fd57bf5739c1b5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36de6235abe5d5bd2fd57bf5739c1b5f">&#9670;&nbsp;</a></span>kvm_lapic_lvt_supported()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_lapic_lvt_supported </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lvt_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00563">563</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;{</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">return</span> apic-&gt;<a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a> &gt; lvt_index;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a36de6235abe5d5bd2fd57bf5739c1b5f_icgraph.png" border="0" usemap="#alapic_8c_a36de6235abe5d5bd2fd57bf5739c1b5f_icgraph" alt=""/></div>
<map name="alapic_8c_a36de6235abe5d5bd2fd57bf5739c1b5f_icgraph" id="alapic_8c_a36de6235abe5d5bd2fd57bf5739c1b5f_icgraph">
<area shape="rect" title=" " alt="" coords="1836,411,2021,437"/>
<area shape="rect" href="lapic_8c.html#a4b4d880305f2ddba0ac9fdb398a7611a" title=" " alt="" coords="1633,315,1786,357"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1631,549,1788,576"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="1409,56,1562,83"/>
<area shape="rect" href="vmx_8c.html#a60eaab2d29aa87878b8dd9b43dadb779" title=" " alt="" coords="1391,315,1579,357"/>
<area shape="rect" href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1" title=" " alt="" coords="1169,5,1300,32"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="1156,56,1313,83"/>
<area shape="rect" href="lapic_8c.html#ae9bd2989ca4c31caf8aa56b8c7dfd248" title=" " alt="" coords="897,5,1081,32"/>
<area shape="rect" href="lapic_8c.html#a179cfc2268db31f40b5bd9b1c247a37b" title=" " alt="" coords="905,56,1074,83"/>
<area shape="rect" href="hyperv_8c.html#acd3e0dad98bde91068115067f6ec3ae6" title=" " alt="" coords="674,5,809,32"/>
<area shape="rect" href="hyperv_8c.html#a23d197f9ae27f820fa7e977aec518698" title=" " alt="" coords="387,5,585,32"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="164,31,339,57"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="5,5,116,32"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="5,56,116,83"/>
<area shape="rect" href="vmx_8c.html#a19fa2c2eb871655a497c1c0c73bd0553" title=" " alt="" coords="1129,297,1340,324"/>
<area shape="rect" href="vmx_8c.html#a3f6e91eedb4d7eefd8f4007389aaac7b" title=" " alt="" coords="1132,348,1337,375"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="912,348,1067,375"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="412,132,560,159"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="680,224,803,251"/>
<area shape="rect" href="vmx_2nested_8c.html#a4e307e2bcf664c83265b1442e3fc8da2" title=" " alt="" coords="653,275,829,317"/>
<area shape="rect" href="vmx_2nested_8c.html#ad3cab9cf8633364513bd6a24caecf41a" title=" " alt="" coords="633,341,849,382"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="387,377,585,404"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fcc88ceee4f57a3dbf23fedb46a5cb" title=" " alt="" coords="666,158,817,199"/>
<area shape="rect" href="vmx_2nested_8c.html#aedc5821e9af5c7bd4aac6c06f4ca046f" title=" " alt="" coords="651,457,831,484"/>
<area shape="rect" href="vmx_2hyperv_8c.html#a937e30dece4579b71b17efcd54c1d910" title=" " alt="" coords="649,509,833,550"/>
<area shape="rect" href="vmx_2nested_8c.html#a64e6550fab681b40c832fe4e2d5e3b95" title=" " alt="" coords="669,575,814,601"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="184,132,319,159"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="401,213,571,254"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="188,220,315,247"/>
<area shape="rect" href="vmx_2nested_8c.html#a6a1c45a52fde9844f4431a9db00dbf9f" title=" " alt="" coords="405,278,567,319"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="186,285,317,312"/>
<area shape="rect" href="vmx_2nested_8c.html#a2c53f6d5cd8133df2c8e67ab90b9aa5f" title=" " alt="" coords="399,524,573,551"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="196,587,307,613"/>
<area shape="rect" href="vmx_2nested_8c.html#acee8cb651216e97a9c12b807243ae59a" title=" " alt="" coords="401,625,571,652"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1418,499,1553,525"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1388,549,1583,576"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1405,625,1566,652"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1414,701,1557,728"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="1159,458,1311,499"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="1145,524,1324,551"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="1165,575,1305,601"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="910,517,1069,558"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="1141,625,1329,652"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="903,676,1076,703"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="923,625,1056,652"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="643,625,840,652"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="399,676,573,703"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="211,663,292,689"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="197,713,306,740"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="1159,727,1310,753"/>
</map>
</div>

</div>
</div>
<a id="a2913418710d9efa46bbdbb0070b766da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2913418710d9efa46bbdbb0070b766da">&#9670;&nbsp;</a></span>kvm_lapic_msr_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kvm_lapic_msr_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64 *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03165">3165</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;{</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;    u32 low;</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160; </div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;    <span class="keywordflow">if</span> (reg == APIC_ICR) {</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;        *data = <a class="code" href="lapic_8c.html#a378a0961283ea67791303e70114fb10d">kvm_lapic_get_reg64</a>(apic, APIC_ICR);</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;    }</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160; </div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c">kvm_lapic_reg_read</a>(apic, reg, 4, &amp;low))</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160; </div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;    *data = low;</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160; </div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a2913418710d9efa46bbdbb0070b766da_cgraph.png" border="0" usemap="#alapic_8c_a2913418710d9efa46bbdbb0070b766da_cgraph" alt=""/></div>
<map name="alapic_8c_a2913418710d9efa46bbdbb0070b766da_cgraph" id="alapic_8c_a2913418710d9efa46bbdbb0070b766da_cgraph">
<area shape="rect" title=" " alt="" coords="5,153,163,180"/>
<area shape="rect" href="lapic_8c.html#a378a0961283ea67791303e70114fb10d" title=" " alt="" coords="211,116,372,143"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="215,179,368,205"/>
<area shape="rect" href="lapic_8c.html#aa06cb4ebbfa40dbfa494b3b4cd9f8833" title=" " alt="" coords="420,103,595,129"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="458,153,557,180"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="664,259,807,285"/>
<area shape="rect" href="lapic_8c.html#a4b4d880305f2ddba0ac9fdb398a7611a" title=" " alt="" coords="431,255,584,297"/>
<area shape="rect" href="lapic_8c.html#a5bf640da1dfc1be09d89fb23c7f2e954" title=" " alt="" coords="891,5,1012,32"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1080,21,1225,48"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="655,107,815,133"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="671,157,800,184"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="667,208,804,235"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1287,21,1445,48"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="880,107,1023,133"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="880,158,1023,199"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="1287,72,1445,99"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1081,123,1225,149"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1523,123,1673,149"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1287,123,1445,149"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="1075,173,1231,200"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="1306,173,1426,200"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="876,224,1027,251"/>
<area shape="rect" href="kvm__cache__regs_8h.html#ad97ff6b975b461b815e6749d29c65446" title=" " alt="" coords="1097,224,1208,251"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a5d9eb0563cffb1e3ed1cccebabcf2df6" title=" " alt="" coords="1279,224,1453,251"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="1501,224,1695,251"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="643,309,828,336"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a2913418710d9efa46bbdbb0070b766da_icgraph.png" border="0" usemap="#alapic_8c_a2913418710d9efa46bbdbb0070b766da_icgraph" alt=""/></div>
<map name="alapic_8c_a2913418710d9efa46bbdbb0070b766da_icgraph" id="alapic_8c_a2913418710d9efa46bbdbb0070b766da_icgraph">
<area shape="rect" title=" " alt="" coords="1083,31,1240,57"/>
<area shape="rect" href="lapic_8c.html#ae9bd2989ca4c31caf8aa56b8c7dfd248" title=" " alt="" coords="851,5,1035,32"/>
<area shape="rect" href="lapic_8c.html#a179cfc2268db31f40b5bd9b1c247a37b" title=" " alt="" coords="633,56,803,83"/>
<area shape="rect" href="hyperv_8c.html#acd3e0dad98bde91068115067f6ec3ae6" title=" " alt="" coords="651,5,785,32"/>
<area shape="rect" href="hyperv_8c.html#a23d197f9ae27f820fa7e977aec518698" title=" " alt="" coords="387,5,585,32"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="164,31,339,57"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="5,5,116,32"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="5,56,116,83"/>
</map>
</div>

</div>
</div>
<a id="a1b64be7f231109aa3e0382cc34a64079"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b64be7f231109aa3e0382cc34a64079">&#9670;&nbsp;</a></span>kvm_lapic_msr_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kvm_lapic_msr_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03182">3182</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;{</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;<span class="comment">     * ICR is a 64-bit register in x2APIC mode (and Hyper-V PV vAPIC) and</span></div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;<span class="comment">     * can be written as such, all other registers remain accessible only</span></div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;<span class="comment">     * through 32-bit reads/writes.</span></div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;    <span class="keywordflow">if</span> (reg == APIC_ICR)</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b">kvm_x2apic_icr_write</a>(apic, data);</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160; </div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;    <span class="comment">/* Bits 63:32 are reserved in all other registers. */</span></div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;    <span class="keywordflow">if</span> (data &gt;&gt; 32)</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160; </div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491">kvm_lapic_reg_write</a>(apic, reg, (u32)data);</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a1b64be7f231109aa3e0382cc34a64079_cgraph.png" border="0" usemap="#alapic_8c_a1b64be7f231109aa3e0382cc34a64079_cgraph" alt=""/></div>
<map name="alapic_8c_a1b64be7f231109aa3e0382cc34a64079_cgraph" id="alapic_8c_a1b64be7f231109aa3e0382cc34a64079_cgraph">
<area shape="rect" title=" " alt="" coords="5,1111,167,1137"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="218,588,375,615"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="215,1608,379,1635"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="713,613,873,640"/>
<area shape="rect" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1" title=" " alt="" coords="427,56,637,83"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="481,512,583,539"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="477,411,587,437"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="721,208,865,235"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="481,461,583,488"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="467,664,597,691"/>
<area shape="rect" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2" title=" " alt="" coords="723,664,863,691"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="961,984,1107,1011"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="963,1237,1105,1264"/>
<area shape="rect" href="lapic_8c.html#aec07f4595f82e14e1075beb4730b6976" title=" " alt="" coords="477,1288,587,1315"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="459,1608,605,1635"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="949,1557,1119,1584"/>
<area shape="rect" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4" title=" " alt="" coords="463,259,601,285"/>
<area shape="rect" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554" title=" " alt="" coords="464,309,600,336"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="445,360,619,387"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="439,5,625,32"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="432,1237,632,1264"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="463,107,601,133"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="461,715,603,741"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="468,157,596,184"/>
<area shape="rect" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3" title=" " alt="" coords="453,1035,611,1061"/>
<area shape="rect" href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4" title=" " alt="" coords="439,824,625,851"/>
<area shape="rect" href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c" title=" " alt="" coords="719,56,868,83"/>
<area shape="rect" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843" title=" " alt="" coords="738,563,849,589"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="955,537,1113,564"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="729,309,858,336"/>
<area shape="rect" href="hyperv_8h.html#a7ffceaf3950bd76a9a3a28ff1e836e58" title=" " alt="" coords="697,360,890,387"/>
<area shape="rect" href="hyperv_8c.html#a47f5a157cae898f7a7b370854c3748a4" title=" " alt="" coords="703,411,883,437"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="712,461,875,488"/>
<area shape="rect" href="xen_8h.html#ae436f94d060f3cb8029695c5a9fddc42" title=" " alt="" coords="696,259,891,285"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="955,208,1113,235"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="717,817,870,858"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="969,689,1099,716"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1167,984,1325,1011"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="971,824,1097,851"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="699,1608,888,1635"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="963,1608,1105,1635"/>
<area shape="rect" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39" title=" " alt="" coords="727,1288,859,1315"/>
<area shape="rect" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44" title=" " alt="" coords="716,1339,871,1365"/>
<area shape="rect" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d" title=" " alt="" coords="705,1390,882,1431"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="685,1237,901,1264"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="974,1187,1094,1213"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="691,1187,895,1213"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="718,107,869,133"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="735,715,852,741"/>
<area shape="rect" href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2" title=" " alt="" coords="452,1659,612,1685"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a1b64be7f231109aa3e0382cc34a64079_icgraph.png" border="0" usemap="#alapic_8c_a1b64be7f231109aa3e0382cc34a64079_icgraph" alt=""/></div>
<map name="alapic_8c_a1b64be7f231109aa3e0382cc34a64079_icgraph" id="alapic_8c_a1b64be7f231109aa3e0382cc34a64079_icgraph">
<area shape="rect" title=" " alt="" coords="1089,56,1251,83"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="853,31,1041,57"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="632,81,805,108"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="652,31,785,57"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,31,584,57"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,56,339,83"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,5,101,32"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,56,115,83"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,107,116,133"/>
</map>
</div>

</div>
</div>
<a id="a4b4d880305f2ddba0ac9fdb398a7611a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b4d880305f2ddba0ac9fdb398a7611a">&#9670;&nbsp;</a></span>kvm_lapic_readable_reg_mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 kvm_lapic_readable_reg_mask </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01607">1607</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;{</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <span class="comment">/* Leave bits &#39;0&#39; for reserved and write-only registers. */</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    u64 valid_reg_mask =</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_ID) |</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_LVR) |</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_TASKPRI) |</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_PROCPRI) |</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_LDR) |</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_SPIV) |</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        <a class="code" href="lapic_8c.html#ae7aa698ace6e78ae7890c10e7f8a3388">APIC_REGS_MASK</a>(APIC_ISR, APIC_ISR_NR) |</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;        <a class="code" href="lapic_8c.html#ae7aa698ace6e78ae7890c10e7f8a3388">APIC_REGS_MASK</a>(APIC_TMR, APIC_ISR_NR) |</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        <a class="code" href="lapic_8c.html#ae7aa698ace6e78ae7890c10e7f8a3388">APIC_REGS_MASK</a>(APIC_IRR, APIC_ISR_NR) |</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_ESR) |</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_ICR) |</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_LVTT) |</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_LVTTHMR) |</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_LVTPC) |</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_LVT0) |</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_LVT1) |</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_LVTERR) |</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_TMICT) |</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_TMCCT) |</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_TDCR);</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160; </div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f">kvm_lapic_lvt_supported</a>(apic, <a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda6501a8a1c49c80b439b25520514bbfce">LVT_CMCI</a>))</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        valid_reg_mask |= <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_LVTCMCI);</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160; </div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="comment">/* ARBPRI, DFR, and ICR2 are not valid in x2APIC mode. */</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic))</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        valid_reg_mask |= <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_ARBPRI) |</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;                  <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_DFR) |</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;                  <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(APIC_ICR2);</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160; </div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="keywordflow">return</span> valid_reg_mask;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a33962d1576b2caa1a5d1baa88b2a01cf"><div class="ttname"><a href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a></div><div class="ttdeci">#define APIC_REG_MASK(reg)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01603">lapic.c:1603</a></div></div>
<div class="ttc" id="alapic_8c_html_a36de6235abe5d5bd2fd57bf5739c1b5f"><div class="ttname"><a href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f">kvm_lapic_lvt_supported</a></div><div class="ttdeci">static bool kvm_lapic_lvt_supported(struct kvm_lapic *apic, int lvt_index)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00563">lapic.c:563</a></div></div>
<div class="ttc" id="alapic_8c_html_ae7aa698ace6e78ae7890c10e7f8a3388"><div class="ttname"><a href="lapic_8c.html#ae7aa698ace6e78ae7890c10e7f8a3388">APIC_REGS_MASK</a></div><div class="ttdeci">#define APIC_REGS_MASK(first, count)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01604">lapic.c:1604</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a4b4d880305f2ddba0ac9fdb398a7611a_cgraph.png" border="0" usemap="#alapic_8c_a4b4d880305f2ddba0ac9fdb398a7611a_cgraph" alt=""/></div>
<map name="alapic_8c_a4b4d880305f2ddba0ac9fdb398a7611a_cgraph" id="alapic_8c_a4b4d880305f2ddba0ac9fdb398a7611a_cgraph">
<area shape="rect" title=" " alt="" coords="5,23,159,65"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="228,5,371,32"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="207,56,392,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a4b4d880305f2ddba0ac9fdb398a7611a_icgraph.png" border="0" usemap="#alapic_8c_a4b4d880305f2ddba0ac9fdb398a7611a_icgraph" alt=""/></div>
<map name="alapic_8c_a4b4d880305f2ddba0ac9fdb398a7611a_icgraph" id="alapic_8c_a4b4d880305f2ddba0ac9fdb398a7611a_icgraph">
<area shape="rect" title=" " alt="" coords="1624,169,1777,210"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="1405,56,1559,83"/>
<area shape="rect" href="vmx_8c.html#a60eaab2d29aa87878b8dd9b43dadb779" title=" " alt="" coords="1388,198,1576,239"/>
<area shape="rect" href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1" title=" " alt="" coords="1169,5,1300,32"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="1156,56,1313,83"/>
<area shape="rect" href="lapic_8c.html#ae9bd2989ca4c31caf8aa56b8c7dfd248" title=" " alt="" coords="897,5,1081,32"/>
<area shape="rect" href="lapic_8c.html#a179cfc2268db31f40b5bd9b1c247a37b" title=" " alt="" coords="905,56,1074,83"/>
<area shape="rect" href="hyperv_8c.html#acd3e0dad98bde91068115067f6ec3ae6" title=" " alt="" coords="674,5,809,32"/>
<area shape="rect" href="hyperv_8c.html#a23d197f9ae27f820fa7e977aec518698" title=" " alt="" coords="387,5,585,32"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="164,31,339,57"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="5,5,116,32"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="5,56,116,83"/>
<area shape="rect" href="vmx_8c.html#a19fa2c2eb871655a497c1c0c73bd0553" title=" " alt="" coords="1129,205,1340,232"/>
<area shape="rect" href="vmx_8c.html#a3f6e91eedb4d7eefd8f4007389aaac7b" title=" " alt="" coords="1132,301,1337,328"/>
<area shape="rect" href="vmx_2nested_8c.html#ad680a323fa0378a55e97821505ba74b1" title=" " alt="" coords="912,325,1067,352"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="412,136,560,163"/>
<area shape="rect" href="vmx_2nested_8c.html#af5978d4465f6d84a878163540b6f9ae6" title=" " alt="" coords="680,224,803,251"/>
<area shape="rect" href="vmx_2nested_8c.html#a4e307e2bcf664c83265b1442e3fc8da2" title=" " alt="" coords="653,275,829,317"/>
<area shape="rect" href="vmx_2nested_8c.html#ad3cab9cf8633364513bd6a24caecf41a" title=" " alt="" coords="633,341,849,382"/>
<area shape="rect" href="vmx_2nested_8c.html#ae8bd3aaa6d3ea61d98732dc54ced8578" title=" " alt="" coords="387,377,585,404"/>
<area shape="rect" href="vmx_2nested_8c.html#a48fcc88ceee4f57a3dbf23fedb46a5cb" title=" " alt="" coords="666,158,817,199"/>
<area shape="rect" href="vmx_2nested_8c.html#aedc5821e9af5c7bd4aac6c06f4ca046f" title=" " alt="" coords="651,457,831,484"/>
<area shape="rect" href="vmx_2hyperv_8c.html#a937e30dece4579b71b17efcd54c1d910" title=" " alt="" coords="649,509,833,550"/>
<area shape="rect" href="vmx_2nested_8c.html#a64e6550fab681b40c832fe4e2d5e3b95" title=" " alt="" coords="669,575,814,601"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="184,136,319,163"/>
<area shape="rect" href="vmx_2nested_8c.html#a77ca924cd23ac875ea48b1f181f33000" title=" " alt="" coords="401,214,571,255"/>
<area shape="rect" href="vmx_8c.html#a7cacd86bbd7f4ae2b8c9e5e8568fa5e4" title=" " alt="" coords="188,221,315,248"/>
<area shape="rect" href="vmx_2nested_8c.html#a6a1c45a52fde9844f4431a9db00dbf9f" title=" " alt="" coords="405,279,567,321"/>
<area shape="rect" href="vmx_2nested_8c.html#a27bdf4f6bbd476189cb0198a634394f5" title=" " alt="" coords="186,287,317,313"/>
<area shape="rect" href="vmx_2nested_8c.html#a2c53f6d5cd8133df2c8e67ab90b9aa5f" title=" " alt="" coords="399,524,573,551"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="431,575,541,601"/>
<area shape="rect" href="vmx_2nested_8c.html#acee8cb651216e97a9c12b807243ae59a" title=" " alt="" coords="401,625,571,652"/>
<area shape="rect" href="vmx_8c.html#ac1cd58b9f223df9d6b5fe9695c0cbe2b" title=" " alt="" coords="190,524,313,551"/>
</map>
</div>

</div>
</div>
<a id="afdddb3803bbe495a6eb54937906caf2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdddb3803bbe495a6eb54937906caf2c">&#9670;&nbsp;</a></span>kvm_lapic_reg_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kvm_lapic_reg_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01645">1645</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;{</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> alignment = offset &amp; 0xf;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    u32 result;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160; </div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;<span class="comment">     * WARN if KVM reads ICR in x2APIC mode, as it&#39;s an 8-byte register in</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;<span class="comment">     * x2APIC and needs to be manually handled by the caller.</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    WARN_ON_ONCE(<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic) &amp;&amp; offset == APIC_ICR);</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160; </div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <span class="keywordflow">if</span> (alignment + len &gt; 4)</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160; </div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="keywordflow">if</span> (offset &gt; 0x3f0 ||</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;        !(<a class="code" href="lapic_8c.html#a4b4d880305f2ddba0ac9fdb398a7611a">kvm_lapic_readable_reg_mask</a>(apic) &amp; <a class="code" href="lapic_8c.html#a33962d1576b2caa1a5d1baa88b2a01cf">APIC_REG_MASK</a>(offset)))</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160; </div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    result = <a class="code" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3">__apic_read</a>(apic, offset &amp; ~0xf);</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160; </div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <a class="code" href="trace_8h.html#a7dd12c07ec16cb189e23271545560798">trace_kvm_apic_read</a>(offset, result);</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160; </div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <span class="keywordflow">switch</span> (len) {</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    <span class="keywordflow">case</span> 4:</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        memcpy(data, (<span class="keywordtype">char</span> *)&amp;result + alignment, len);</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;        printk(KERN_ERR <span class="stringliteral">&quot;Local APIC read with len = %x, &quot;</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;               <span class="stringliteral">&quot;should be 1,2, or 4 instead\n&quot;</span>, len);</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    }</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a4b4d880305f2ddba0ac9fdb398a7611a"><div class="ttname"><a href="lapic_8c.html#a4b4d880305f2ddba0ac9fdb398a7611a">kvm_lapic_readable_reg_mask</a></div><div class="ttdeci">u64 kvm_lapic_readable_reg_mask(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01607">lapic.c:1607</a></div></div>
<div class="ttc" id="atrace_8h_html_a7dd12c07ec16cb189e23271545560798"><div class="ttname"><a href="trace_8h.html#a7dd12c07ec16cb189e23271545560798">trace_kvm_apic_read</a></div><div class="ttdeci">#define trace_kvm_apic_read(reg, val)</div><div class="ttdef"><b>Definition:</b> <a href="trace_8h_source.html#l00280">trace.h:280</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_afdddb3803bbe495a6eb54937906caf2c_cgraph.png" border="0" usemap="#alapic_8c_afdddb3803bbe495a6eb54937906caf2c_cgraph" alt=""/></div>
<map name="alapic_8c_afdddb3803bbe495a6eb54937906caf2c_cgraph" id="alapic_8c_afdddb3803bbe495a6eb54937906caf2c_cgraph">
<area shape="rect" title=" " alt="" coords="5,215,159,241"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="234,143,333,169"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="429,259,572,285"/>
<area shape="rect" href="lapic_8c.html#a4b4d880305f2ddba0ac9fdb398a7611a" title=" " alt="" coords="207,266,360,307"/>
<area shape="rect" href="lapic_8c.html#a5bf640da1dfc1be09d89fb23c7f2e954" title=" " alt="" coords="656,5,777,32"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="845,21,991,48"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="421,107,581,133"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="436,157,565,184"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="432,208,569,235"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1052,21,1211,48"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="645,107,788,133"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="645,158,788,199"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="1052,72,1211,99"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="846,123,990,149"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1289,123,1438,149"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1052,123,1211,149"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="840,173,996,200"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="1071,173,1191,200"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="641,224,792,251"/>
<area shape="rect" href="kvm__cache__regs_8h.html#ad97ff6b975b461b815e6749d29c65446" title=" " alt="" coords="863,224,973,251"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a5d9eb0563cffb1e3ed1cccebabcf2df6" title=" " alt="" coords="1044,224,1219,251"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="1267,224,1460,251"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="408,309,593,336"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_afdddb3803bbe495a6eb54937906caf2c_icgraph.png" border="0" usemap="#alapic_8c_afdddb3803bbe495a6eb54937906caf2c_icgraph" alt=""/></div>
<map name="alapic_8c_afdddb3803bbe495a6eb54937906caf2c_icgraph" id="alapic_8c_afdddb3803bbe495a6eb54937906caf2c_icgraph">
<area shape="rect" title=" " alt="" coords="1288,31,1441,57"/>
<area shape="rect" href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1" title=" " alt="" coords="1096,5,1227,32"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="1083,56,1240,83"/>
<area shape="rect" href="lapic_8c.html#ae9bd2989ca4c31caf8aa56b8c7dfd248" title=" " alt="" coords="851,31,1035,57"/>
<area shape="rect" href="lapic_8c.html#a179cfc2268db31f40b5bd9b1c247a37b" title=" " alt="" coords="633,81,803,108"/>
<area shape="rect" href="hyperv_8c.html#acd3e0dad98bde91068115067f6ec3ae6" title=" " alt="" coords="651,31,785,57"/>
<area shape="rect" href="hyperv_8c.html#a23d197f9ae27f820fa7e977aec518698" title=" " alt="" coords="387,31,585,57"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="164,56,339,83"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="5,31,116,57"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="5,81,116,108"/>
</map>
</div>

</div>
</div>
<a id="acebc0ffd4530dfd1beb1254d1e4d9491"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acebc0ffd4530dfd1beb1254d1e4d9491">&#9670;&nbsp;</a></span>kvm_lapic_reg_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kvm_lapic_reg_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02255">2255</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;{</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160; </div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    <a class="code" href="trace_8h.html#a4be08c4209b1f0ad26b6f2180d143090">trace_kvm_apic_write</a>(reg, val);</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160; </div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <span class="keywordflow">switch</span> (reg) {</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <span class="keywordflow">case</span> APIC_ID:       <span class="comment">/* Local APIC ID */</span></div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic)) {</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;            <a class="code" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e">kvm_apic_set_xapic_id</a>(apic, val &gt;&gt; 24);</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;            ret = 1;</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;        }</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160; </div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;    <span class="keywordflow">case</span> APIC_TASKPRI:</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;        <a class="code" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea">report_tpr_access</a>(apic, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;        <a class="code" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1">apic_set_tpr</a>(apic, val &amp; 0xff);</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160; </div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    <span class="keywordflow">case</span> APIC_EOI:</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;        <a class="code" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726">apic_set_eoi</a>(apic);</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160; </div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="keywordflow">case</span> APIC_LDR:</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic))</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;            <a class="code" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554">kvm_apic_set_ldr</a>(apic, val &amp; APIC_LDR_MASK);</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;            ret = 1;</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160; </div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    <span class="keywordflow">case</span> APIC_DFR:</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic))</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;            <a class="code" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4">kvm_apic_set_dfr</a>(apic, val | 0x0FFFFFFF);</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;            ret = 1;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160; </div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    <span class="keywordflow">case</span> APIC_SPIV: {</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;        u32 mask = 0x3ff;</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_LVR) &amp; APIC_LVR_DIRECTED_EOI)</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;            mask |= APIC_SPIV_DIRECTED_EOI;</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;        <a class="code" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe">apic_set_spiv</a>(apic, val &amp; mask);</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;        <span class="keywordflow">if</span> (!(val &amp; APIC_SPIV_APIC_ENABLED)) {</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;            <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160; </div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;            <span class="keywordflow">for</span> (i = 0; i &lt; apic-&gt;<a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a>; i++) {</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;                <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, <a class="code" href="lapic_8h.html#ae54f52b3c96453d38d44e36bc8d3c00c">APIC_LVTx</a>(i),</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;                    <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, <a class="code" href="lapic_8h.html#ae54f52b3c96453d38d44e36bc8d3c00c">APIC_LVTx</a>(i)) | APIC_LVT_MASKED);</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;            }</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;            <a class="code" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d">apic_update_lvtt</a>(apic);</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;            atomic_set(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a581e6b6fe55055ed8a81d5a1aa258ff7">pending</a>, 0);</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160; </div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;        }</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    }</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    <span class="keywordflow">case</span> APIC_ICR:</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;        WARN_ON_ONCE(<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic));</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160; </div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;        <span class="comment">/* No delay here, so we always clear the pending bit */</span></div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;        val &amp;= ~APIC_ICR_BUSY;</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;        <a class="code" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728">kvm_apic_send_ipi</a>(apic, val, <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_ICR2));</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_ICR, val);</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    <span class="keywordflow">case</span> APIC_ICR2:</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic))</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;            ret = 1;</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;            <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_ICR2, val &amp; 0xff000000);</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160; </div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <span class="keywordflow">case</span> APIC_LVT0:</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;        <a class="code" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1">apic_manage_nmi_watchdog</a>(apic, val);</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;        fallthrough;</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    <span class="keywordflow">case</span> APIC_LVTTHMR:</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    <span class="keywordflow">case</span> APIC_LVTPC:</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    <span class="keywordflow">case</span> APIC_LVT1:</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    <span class="keywordflow">case</span> APIC_LVTERR:</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    <span class="keywordflow">case</span> APIC_LVTCMCI: {</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;        u32 index = <a class="code" href="lapic_8c.html#aec07f4595f82e14e1075beb4730b6976">get_lvt_index</a>(reg);</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f">kvm_lapic_lvt_supported</a>(apic, index)) {</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;            ret = 1;</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;        }</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f">kvm_apic_sw_enabled</a>(apic))</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;            val |= APIC_LVT_MASKED;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;        val &amp;= <a class="code" href="lapic_8c.html#a54ccc473e4178fea8e25602ac8000683">apic_lvt_mask</a>[index];</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, reg, val);</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    }</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160; </div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <span class="keywordflow">case</span> APIC_LVTT:</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f">kvm_apic_sw_enabled</a>(apic))</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;            val |= APIC_LVT_MASKED;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;        val &amp;= (<a class="code" href="lapic_8c.html#a54ccc473e4178fea8e25602ac8000683">apic_lvt_mask</a>[0] | apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a37e444e2ea7fd2b7cd3975909208ddcb">timer_mode_mask</a>);</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_LVTT, val);</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;        <a class="code" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d">apic_update_lvtt</a>(apic);</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160; </div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <span class="keywordflow">case</span> APIC_TMICT:</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0">apic_lvtt_tscdeadline</a>(apic))</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160; </div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;        <a class="code" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2">cancel_apic_timer</a>(apic);</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_TMICT, val);</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;        <a class="code" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3">start_apic_timer</a>(apic);</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160; </div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    <span class="keywordflow">case</span> APIC_TDCR: {</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;        uint32_t old_divisor = apic-&gt;<a class="code" href="structkvm__lapic.html#a31c3efc5b365f96580ea975272c3f277">divide_count</a>;</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160; </div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_TDCR, val &amp; 0xb);</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;        <a class="code" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3">update_divide_count</a>(apic);</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;        <span class="keywordflow">if</span> (apic-&gt;<a class="code" href="structkvm__lapic.html#a31c3efc5b365f96580ea975272c3f277">divide_count</a> != old_divisor &amp;&amp;</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;                apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a>) {</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;            hrtimer_cancel(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">timer</a>);</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;            <a class="code" href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4">update_target_expiration</a>(apic, old_divisor);</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;            <a class="code" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db">restart_apic_timer</a>(apic);</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;        }</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    }</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    <span class="keywordflow">case</span> APIC_ESR:</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic) &amp;&amp; val != 0)</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;            ret = 1;</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160; </div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    <span class="keywordflow">case</span> APIC_SELF_IPI:</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;<span class="comment">         * Self-IPI exists only when x2APIC is enabled.  Bits 7:0 hold</span></div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;<span class="comment">         * the vector, everything else is reserved.</span></div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic) || (val &amp; ~APIC_VECTOR_MASK))</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;            ret = 1;</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;            <a class="code" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728">kvm_apic_send_ipi</a>(apic, APIC_DEST_SELF | val, 0);</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;        ret = 1;</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    }</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160; </div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;<span class="comment">     * Recalculate APIC maps if necessary, e.g. if the software enable bit</span></div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;<span class="comment">     * was toggled, the APIC ID changed, etc...   The maps are marked dirty</span></div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;<span class="comment">     * on relevant changes, i.e. this is a nop for most writes.</span></div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;    <a class="code" href="lapic_8c.html#a756b707dd502680db2eed7759defde40">kvm_recalculate_apic_map</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm);</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160; </div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a02bd03bf711be3200ea2316ced434ff1"><div class="ttname"><a href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1">apic_set_tpr</a></div><div class="ttdeci">static void apic_set_tpr(struct kvm_lapic *apic, u32 tpr)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00981">lapic.c:981</a></div></div>
<div class="ttc" id="alapic_8c_html_a2a5ccc92c8b75ad6118bdc1b84a43554"><div class="ttname"><a href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554">kvm_apic_set_ldr</a></div><div class="ttdeci">static void kvm_apic_set_ldr(struct kvm_lapic *apic, u32 id)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00515">lapic.c:515</a></div></div>
<div class="ttc" id="alapic_8c_html_a4b7f12cb3ba68245df79bc30d938b728"><div class="ttname"><a href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728">kvm_apic_send_ipi</a></div><div class="ttdeci">void kvm_apic_send_ipi(struct kvm_lapic *apic, u32 icr_low, u32 icr_high)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01504">lapic.c:1504</a></div></div>
<div class="ttc" id="alapic_8c_html_a54214770509be207a1c1271e8b48acf4"><div class="ttname"><a href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4">kvm_apic_set_dfr</a></div><div class="ttdeci">static void kvm_apic_set_dfr(struct kvm_lapic *apic, u32 val)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00521">lapic.c:521</a></div></div>
<div class="ttc" id="alapic_8c_html_a54ccc473e4178fea8e25602ac8000683"><div class="ttname"><a href="lapic_8c.html#a54ccc473e4178fea8e25602ac8000683">apic_lvt_mask</a></div><div class="ttdeci">static const unsigned int apic_lvt_mask[KVM_APIC_MAX_NR_LVT_ENTRIES]</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00615">lapic.c:615</a></div></div>
<div class="ttc" id="alapic_8c_html_a5f5c49ce8a579b59663644f0f1a6cbe3"><div class="ttname"><a href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3">start_apic_timer</a></div><div class="ttdeci">static void start_apic_timer(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02227">lapic.c:2227</a></div></div>
<div class="ttc" id="alapic_8c_html_a694be782d2a5e9a6ece8dd51f3da91f4"><div class="ttname"><a href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4">update_target_expiration</a></div><div class="ttdeci">static void update_target_expiration(struct kvm_lapic *apic, uint32_t old_divisor)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01968">lapic.c:1968</a></div></div>
<div class="ttc" id="alapic_8c_html_ab24997de83c3fd44d1cd7520a615883e"><div class="ttname"><a href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e">kvm_apic_set_xapic_id</a></div><div class="ttdeci">static void kvm_apic_set_xapic_id(struct kvm_lapic *apic, u8 id)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00509">lapic.c:509</a></div></div>
<div class="ttc" id="alapic_8c_html_aec07f4595f82e14e1075beb4730b6976"><div class="ttname"><a href="lapic_8c.html#aec07f4595f82e14e1075beb4730b6976">get_lvt_index</a></div><div class="ttdeci">static int get_lvt_index(u32 reg)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02245">lapic.c:2245</a></div></div>
<div class="ttc" id="atrace_8h_html_a4be08c4209b1f0ad26b6f2180d143090"><div class="ttname"><a href="trace_8h.html#a4be08c4209b1f0ad26b6f2180d143090">trace_kvm_apic_write</a></div><div class="ttdeci">#define trace_kvm_apic_write(reg, val)</div><div class="ttdef"><b>Definition:</b> <a href="trace_8h_source.html#l00281">trace.h:281</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_acebc0ffd4530dfd1beb1254d1e4d9491_cgraph.png" border="0" usemap="#alapic_8c_acebc0ffd4530dfd1beb1254d1e4d9491_cgraph" alt=""/></div>
<map name="alapic_8c_acebc0ffd4530dfd1beb1254d1e4d9491_cgraph" id="alapic_8c_acebc0ffd4530dfd1beb1254d1e4d9491_cgraph">
<area shape="rect" title=" " alt="" coords="5,672,163,698"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="1157,64,1317,90"/>
<area shape="rect" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1" title=" " alt="" coords="211,1514,421,1541"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="265,469,367,496"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="261,368,371,394"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="505,165,649,192"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="265,418,367,445"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="251,621,381,648"/>
<area shape="rect" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2" title=" " alt="" coords="507,672,647,698"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="745,840,891,866"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="747,1054,889,1081"/>
<area shape="rect" href="lapic_8c.html#aec07f4595f82e14e1075beb4730b6976" title=" " alt="" coords="261,1565,371,1592"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="243,1042,389,1069"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="733,1130,903,1157"/>
<area shape="rect" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4" title=" " alt="" coords="247,216,385,242"/>
<area shape="rect" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554" title=" " alt="" coords="248,266,384,293"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="229,317,403,344"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="223,1616,409,1642"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="216,1270,416,1297"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="247,1666,385,1693"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="747,114,889,141"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="252,114,380,141"/>
<area shape="rect" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3" title=" " alt="" coords="237,916,395,942"/>
<area shape="rect" href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4" title=" " alt="" coords="223,840,409,866"/>
<area shape="rect" href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c" title=" " alt="" coords="503,1565,652,1592"/>
<area shape="rect" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843" title=" " alt="" coords="522,317,633,344"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="739,418,897,445"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="513,266,642,293"/>
<area shape="rect" href="hyperv_8h.html#a7ffceaf3950bd76a9a3a28ff1e836e58" title=" " alt="" coords="481,368,674,394"/>
<area shape="rect" href="hyperv_8c.html#a47f5a157cae898f7a7b370854c3748a4" title=" " alt="" coords="487,418,667,445"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="496,469,659,496"/>
<area shape="rect" href="xen_8h.html#ae436f94d060f3cb8029695c5a9fddc42" title=" " alt="" coords="480,216,675,242"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="739,266,897,293"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="501,723,654,764"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="1173,114,1302,141"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="951,840,1109,866"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="1174,165,1301,192"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="483,1144,672,1170"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="747,1181,889,1208"/>
<area shape="rect" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39" title=" " alt="" coords="511,1346,643,1373"/>
<area shape="rect" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44" title=" " alt="" coords="500,1397,655,1424"/>
<area shape="rect" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d" title=" " alt="" coords="489,1448,666,1490"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="469,1093,685,1120"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="758,1232,878,1258"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="475,1194,679,1221"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="502,1666,653,1693"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="971,114,1089,141"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="971,64,1089,90"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="506,114,649,141"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="517,890,637,917"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_acebc0ffd4530dfd1beb1254d1e4d9491_icgraph.png" border="0" usemap="#alapic_8c_acebc0ffd4530dfd1beb1254d1e4d9491_icgraph" alt=""/></div>
<map name="alapic_8c_acebc0ffd4530dfd1beb1254d1e4d9491_icgraph" id="alapic_8c_acebc0ffd4530dfd1beb1254d1e4d9491_icgraph">
<area shape="rect" title=" " alt="" coords="1317,147,1475,174"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1105,71,1239,98"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1075,122,1269,149"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1091,173,1253,199"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1101,249,1243,275"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="857,5,1009,47"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="843,71,1022,98"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="863,122,1003,149"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="632,64,791,105"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="839,173,1027,199"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="399,223,572,250"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="645,173,778,199"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,173,584,199"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,198,339,225"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,147,101,174"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,198,115,225"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,249,116,275"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="857,274,1008,301"/>
</map>
</div>

</div>
</div>
<a id="a8b8a5d87df5283a20e9aa9b828320552"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b8a5d87df5283a20e9aa9b828320552">&#9670;&nbsp;</a></span>kvm_lapic_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_reset </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>init_event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02669">2669</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;{</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    u64 msr_val;</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160; </div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    static_call_cond(kvm_x86_apicv_pre_state_restore)(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160; </div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    <span class="keywordflow">if</span> (!init_event) {</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;        msr_val = APIC_DEFAULT_PHYS_BASE | MSR_IA32_APICBASE_ENABLE;</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="x86_8c.html#aa47b2c4f1b9b1a9c9cbee8f8476262a2">kvm_vcpu_is_reset_bsp</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>))</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;            msr_val |= MSR_IA32_APICBASE_BSP;</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;        <a class="code" href="lapic_8c.html#a8d747385873e52f47e85179c21521e73">kvm_lapic_set_base</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, msr_val);</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    }</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160; </div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;    <span class="keywordflow">if</span> (!apic)</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160; </div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    <span class="comment">/* Stop the timer in case it&#39;s a reset to an active apic */</span></div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;    hrtimer_cancel(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">timer</a>);</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160; </div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;    <span class="comment">/* The xAPIC ID is set at RESET even if the APIC was already enabled. */</span></div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;    <span class="keywordflow">if</span> (!init_event)</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;        <a class="code" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e">kvm_apic_set_xapic_id</a>(apic, <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_id);</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    <a class="code" href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf">kvm_apic_set_version</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160; </div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; apic-&gt;<a class="code" href="structkvm__lapic.html#ae2b24a1af6e2a89bda594f08d3382267">nr_lvt_entries</a>; i++)</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, <a class="code" href="lapic_8h.html#ae54f52b3c96453d38d44e36bc8d3c00c">APIC_LVTx</a>(i), APIC_LVT_MASKED);</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;    <a class="code" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d">apic_update_lvtt</a>(apic);</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="x86_8c.html#aa47b2c4f1b9b1a9c9cbee8f8476262a2">kvm_vcpu_is_reset_bsp</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>) &amp;&amp;</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;        <a class="code" href="x86_8h.html#adf8330176a8805826ed4711a51ce93cf">kvm_check_has_quirk</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm, KVM_X86_QUIRK_LINT0_REENABLED))</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_LVT0,</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;                 SET_APIC_DELIVERY_MODE(0, APIC_MODE_EXTINT));</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;    <a class="code" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1">apic_manage_nmi_watchdog</a>(apic, <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_LVT0));</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160; </div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;    <a class="code" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4">kvm_apic_set_dfr</a>(apic, 0xffffffffU);</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;    <a class="code" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe">apic_set_spiv</a>(apic, 0xff);</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_TASKPRI, 0);</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic))</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;        <a class="code" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554">kvm_apic_set_ldr</a>(apic, 0);</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_ESR, 0);</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic)) {</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_ICR, 0);</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_ICR2, 0);</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;        <a class="code" href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2">kvm_lapic_set_reg64</a>(apic, APIC_ICR, 0);</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;    }</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_TDCR, 0);</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_TMICT, 0);</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 8; i++) {</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_IRR + 0x10 * i, 0);</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_ISR + 0x10 * i, 0);</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;        <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, APIC_TMR + 0x10 * i, 0);</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    }</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    <a class="code" href="lapic_8c.html#a5468339c2df08ca538b77d4d48915c35">kvm_apic_update_apicv</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    <a class="code" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3">update_divide_count</a>(apic);</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    atomic_set(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a581e6b6fe55055ed8a81d5a1aa258ff7">pending</a>, 0);</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160; </div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.pv_eoi.msr_val = 0;</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;    <a class="code" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab">apic_update_ppr</a>(apic);</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;    <span class="keywordflow">if</span> (apic-&gt;<a class="code" href="structkvm__lapic.html#a4642d7f446bbd9ede893aa1ebbcc9c1a">apicv_active</a>) {</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;        static_call_cond(kvm_x86_apicv_post_state_restore)(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;        static_call_cond(kvm_x86_hwapic_irr_update)(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, -1);</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;        static_call_cond(kvm_x86_hwapic_isr_update)(-1);</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    }</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160; </div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;    <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_arb_prio = 0;</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;    <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_attention = 0;</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160; </div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;    <a class="code" href="lapic_8c.html#a756b707dd502680db2eed7759defde40">kvm_recalculate_apic_map</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm);</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a8c69ed3d074907a7adcee84e8570ebb2"><div class="ttname"><a href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2">kvm_lapic_set_reg64</a></div><div class="ttdeci">static __always_inline void kvm_lapic_set_reg64(struct kvm_lapic *apic, int reg, u64 val)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00099">lapic.c:99</a></div></div>
<div class="ttc" id="ax86_8c_html_aa47b2c4f1b9b1a9c9cbee8f8476262a2"><div class="ttname"><a href="x86_8c.html#aa47b2c4f1b9b1a9c9cbee8f8476262a2">kvm_vcpu_is_reset_bsp</a></div><div class="ttdeci">bool kvm_vcpu_is_reset_bsp(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l12488">x86.c:12488</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a8b8a5d87df5283a20e9aa9b828320552_cgraph.png" border="0" usemap="#alapic_8c_a8b8a5d87df5283a20e9aa9b828320552_cgraph" alt=""/></div>
<map name="alapic_8c_a8b8a5d87df5283a20e9aa9b828320552_cgraph" id="alapic_8c_a8b8a5d87df5283a20e9aa9b828320552_cgraph">
<area shape="rect" title=" " alt="" coords="5,565,135,592"/>
<area shape="rect" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1" title=" " alt="" coords="183,17,393,44"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="233,388,343,415"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="729,489,873,516"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="484,68,615,95"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="729,173,874,200"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="223,287,353,313"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="730,1164,873,1191"/>
<area shape="rect" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4" title=" " alt="" coords="219,489,357,516"/>
<area shape="rect" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554" title=" " alt="" coords="220,540,356,567"/>
<area shape="rect" href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf" title=" " alt="" coords="466,692,633,719"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="463,641,636,668"/>
<area shape="rect" href="lapic_8c.html#a5468339c2df08ca538b77d4d48915c35" title=" " alt="" coords="199,591,377,617"/>
<area shape="rect" href="x86_8h.html#adf8330176a8805826ed4711a51ce93cf" title=" " alt="" coords="205,743,371,769"/>
<area shape="rect" href="lapic_8c.html#a8d747385873e52f47e85179c21521e73" title=" " alt="" coords="211,793,365,820"/>
<area shape="rect" href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2" title=" " alt="" coords="208,844,368,871"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="188,996,388,1023"/>
<area shape="rect" href="x86_8c.html#aa47b2c4f1b9b1a9c9cbee8f8476262a2" title=" " alt="" coords="199,1047,377,1073"/>
<area shape="rect" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3" title=" " alt="" coords="209,203,367,229"/>
<area shape="rect" href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c" title=" " alt="" coords="475,17,624,44"/>
<area shape="rect" href="xen_8h.html#ae436f94d060f3cb8029695c5a9fddc42" title=" " alt="" coords="452,337,647,364"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="959,489,1117,516"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="721,123,881,149"/>
<area shape="rect" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2" title=" " alt="" coords="731,5,871,32"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="725,57,878,98"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="973,5,1103,32"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="959,173,1117,200"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="975,64,1101,91"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="478,287,621,313"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="478,221,621,262"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="722,287,881,313"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="723,228,879,255"/>
<area shape="rect" href="cpuid_8h.html#ad8c2a90f2f099af1d7ca23750d9d2eb9" title=" " alt="" coords="736,717,867,744"/>
<area shape="rect" href="ioapic_8h.html#a5efb8a822bd7119cfc8db075f12bf452" title=" " alt="" coords="738,667,865,693"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="742,844,861,871"/>
<area shape="rect" href="reverse__cpuid_8h.html#aeac4cdaa1c8b53f46ea791f355b1d08c" title=" " alt="" coords="985,717,1091,744"/>
<area shape="rect" href="cpuid_8h.html#af2af2645f203b5d9bad2088af0da5c1e" title=" " alt="" coords="945,768,1131,795"/>
<area shape="rect" href="irq_8h.html#aeedc8b3b9e709414b2db2436224b75e8" title=" " alt="" coords="981,667,1095,693"/>
<area shape="rect" href="lapic_8c.html#a40e5c52e8a79166cfc433f413bbe9e36" title=" " alt="" coords="493,591,606,617"/>
<area shape="rect" href="lapic_8c.html#a22d25ec6370d0efd4c569b7317d28098" title=" " alt="" coords="459,793,640,820"/>
<area shape="rect" href="cpuid_8c.html#a537512099e11c7ab0553aeae5e38d9ea" title=" " alt="" coords="448,743,651,769"/>
<area shape="rect" href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f" title=" " alt="" coords="705,996,897,1023"/>
<area shape="rect" href="lapic_8c.html#a39839decdbbb9e8a6718f3ac7c0b3707" title=" " alt="" coords="462,844,637,871"/>
<area shape="rect" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39" title=" " alt="" coords="483,1215,615,1241"/>
<area shape="rect" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44" title=" " alt="" coords="472,895,627,921"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="479,945,620,972"/>
<area shape="rect" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d" title=" " alt="" coords="461,1047,638,1089"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="441,996,657,1023"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="741,1113,861,1140"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="447,1164,651,1191"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a8b8a5d87df5283a20e9aa9b828320552_icgraph.png" border="0" usemap="#alapic_8c_a8b8a5d87df5283a20e9aa9b828320552_icgraph" alt=""/></div>
<map name="alapic_8c_a8b8a5d87df5283a20e9aa9b828320552_icgraph" id="alapic_8c_a8b8a5d87df5283a20e9aa9b828320552_icgraph">
<area shape="rect" title=" " alt="" coords="1279,198,1408,225"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1101,198,1231,225"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="867,122,1053,149"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="874,198,1046,225"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="875,249,1045,275"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="412,5,571,47"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,71,364,98"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="671,122,766,149"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="650,173,787,199"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,46,129,73"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="451,122,532,149"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="619,223,819,250"/>
</map>
</div>

</div>
</div>
<a id="ab785e74943a17874760f3d4b6b5359d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab785e74943a17874760f3d4b6b5359d0">&#9670;&nbsp;</a></span>kvm_lapic_restart_hv_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_restart_hv_timer </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02208">2208</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;{</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160; </div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    WARN_ON(!apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a033831ad90c69d7ea4e9af3fd0a6727e">hv_timer_in_use</a>);</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    <a class="code" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db">restart_apic_timer</a>(apic);</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ab785e74943a17874760f3d4b6b5359d0_cgraph.png" border="0" usemap="#alapic_8c_ab785e74943a17874760f3d4b6b5359d0_cgraph" alt=""/></div>
<map name="alapic_8c_ab785e74943a17874760f3d4b6b5359d0_cgraph" id="alapic_8c_ab785e74943a17874760f3d4b6b5359d0_cgraph">
<area shape="rect" title=" " alt="" coords="5,567,168,609"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="216,575,357,601"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="588,600,715,627"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="406,625,523,652"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="405,499,524,525"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="779,499,925,525"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="587,549,716,576"/>
<area shape="rect" href="lapic_8c.html#a2400290b895608d302ecce4ee352ee25" title=" " alt="" coords="979,755,1155,781"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="973,587,1160,613"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="1215,317,1375,344"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="973,251,1160,293"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1684,411,1807,437"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="980,536,1153,563"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="979,638,1154,679"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="1220,587,1371,613"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="1224,521,1367,562"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="1229,637,1361,664"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="1460,519,1580,545"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="1461,620,1579,647"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="1697,620,1793,647"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="1227,200,1364,227"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="1208,255,1383,281"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1451,251,1589,277"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1900,81,2071,108"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="1443,302,1597,343"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1447,368,1593,395"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1448,5,1592,32"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1691,157,1799,184"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1681,208,1810,235"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1682,259,1809,285"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1683,309,1808,336"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1657,360,1833,387"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1663,107,1827,133"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1901,157,2070,184"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1881,385,2089,412"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1909,436,2062,463"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1668,462,1823,503"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1666,528,1825,555"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1666,5,1825,32"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="1216,706,1375,747"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="1451,721,1589,748"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="1439,772,1601,799"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="1431,671,1609,697"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1686,671,1805,697"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="589,448,714,475"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="572,499,731,525"/>
<area shape="rect" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede" title=" " alt="" coords="975,470,1158,511"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ab785e74943a17874760f3d4b6b5359d0_icgraph.png" border="0" usemap="#alapic_8c_ab785e74943a17874760f3d4b6b5359d0_icgraph" alt=""/></div>
<map name="alapic_8c_ab785e74943a17874760f3d4b6b5359d0_icgraph" id="alapic_8c_ab785e74943a17874760f3d4b6b5359d0_icgraph">
<area shape="rect" title=" " alt="" coords="1995,475,2157,517"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1788,483,1947,509"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="1625,251,1740,277"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="1639,508,1727,535"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="1438,43,1517,69"/>
<area shape="rect" href="svm_8c.html#aa667b0a0f202f83aa1533825aeecb402" title=" " alt="" coords="1190,5,1269,32"/>
<area shape="rect" href="vmx_8c.html#aa8f62a8c3a5a5da29c69565d2645a371" title=" " alt="" coords="1190,56,1269,83"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="1391,93,1563,120"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="1398,195,1557,221"/>
<area shape="rect" href="x86_8c.html#a8103751d0c861cfc0c6d0fed892e2454" title=" " alt="" coords="1398,246,1557,287"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="1398,311,1557,353"/>
<area shape="rect" href="x86_8c.html#a3de7a07b3d9ed3ee68dbdfb0c53dc5d0" title=" " alt="" coords="1398,377,1557,418"/>
<area shape="rect" href="x86_8c.html#ac6ebab4c3448cdbc79dbcac73e94503b" title=" " alt="" coords="1398,442,1557,483"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="1384,508,1571,535"/>
<area shape="rect" href="x86_8c.html#a02f0a60bd0147952e87f6ad38128f748" title=" " alt="" coords="1398,559,1557,601"/>
<area shape="rect" href="x86_8c.html#ae3d9929c9a77fa2c710befa0a784d4c6" title=" " alt="" coords="1398,625,1557,666"/>
<area shape="rect" href="x86_8c.html#a93a45fe328a7ab7be2e5426ffc845c32" title=" " alt="" coords="1398,690,1557,731"/>
<area shape="rect" href="x86_8c.html#af51ba1557e985ebd63f465527cc511b3" title=" " alt="" coords="1398,755,1557,797"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="1398,821,1557,862"/>
<area shape="rect" href="x86_8c.html#aa4fc098aab8bc9588c83cfcb89eceee2" title=" " alt="" coords="1398,886,1557,927"/>
<area shape="rect" href="x86_8c.html#a7491f962c44e4926933a5bd58c521731" title=" " alt="" coords="1377,144,1577,171"/>
<area shape="rect" href="x86_8c.html#aa7dd06e7d0835e6cbf23134ad9fb19d8" title=" " alt="" coords="1387,952,1568,979"/>
<area shape="rect" href="vmx_2nested_8c.html#a2c53f6d5cd8133df2c8e67ab90b9aa5f" title=" " alt="" coords="1391,1003,1564,1029"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="1129,132,1329,159"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="1167,537,1291,564"/>
<area shape="rect" href="x86_8c.html#a6710e6b26ce720cb1d40113afe17efa7" title=" " alt="" coords="1135,952,1323,979"/>
<area shape="rect" href="x86_8c.html#ad84dda268db5d48c48f3ef2f438c62a7" title=" " alt="" coords="911,952,1081,979"/>
<area shape="rect" href="kvm__main_8c.html#a54b22e6be98d31db1a83e7993fbcf4bc" title=" " alt="" coords="553,864,680,891"/>
<area shape="rect" href="kvm__main_8c.html#afd922c538c448ab1248cdb9dccae9410" title=" " alt="" coords="728,977,863,1004"/>
<area shape="rect" href="kvm__main_8c.html#a955de4f2a1b3371438636eccab732b27" title=" " alt="" coords="303,800,497,827"/>
<area shape="rect" href="kvm__main_8c.html#a013962010b954d8597e5987fd27c8241" title=" " alt="" coords="559,977,674,1004"/>
<area shape="rect" href="kvm__main_8c.html#a37fa7805021941c56fe174eae4c8c377" title=" " alt="" coords="325,851,475,877"/>
<area shape="rect" href="kvm__main_8c.html#af19040bdcea372f13eab66499d99201c" title=" " alt="" coords="317,901,483,928"/>
<area shape="rect" href="guest__memfd_8c.html#ad8912fbda61cdcb6d9e5a3c0f839e001" title=" " alt="" coords="323,952,477,979"/>
<area shape="rect" href="debugfs_8c.html#ae48a8d31368e51cbe5f950df129f5285" title=" " alt="" coords="295,1003,505,1029"/>
<area shape="rect" href="debugfs_8c.html#af0427db3ec1a8c38ea51591abbefde57" title=" " alt="" coords="314,1054,486,1095"/>
<area shape="rect" href="kvm__main_8c.html#af67afbdcee89641f21573ac643d8e693" title=" " alt="" coords="333,1120,467,1147"/>
<area shape="rect" href="sev_8c.html#ad28fd793149997c912b52490f6ca139a" title=" " alt="" coords="329,1171,471,1197"/>
<area shape="rect" href="sev_8c.html#af1eb77eac84f085b0a943b87f783e30d" title=" " alt="" coords="335,1221,465,1248"/>
<area shape="rect" href="kvm__main_8c.html#a87bcafdc42ee32aedb84df5e564f9872" title=" " alt="" coords="47,851,205,877"/>
<area shape="rect" href="sev_8c.html#abe3c569b297da3b78824074b8c08f9a7" title=" " alt="" coords="5,1171,247,1197"/>
<area shape="rect" href="svm_8c.html#a0e69cefce46e7b11e1e8e056ea5b6561" title=" " alt="" coords="59,1221,193,1248"/>
<area shape="rect" href="vmx_8c.html#ac1cd58b9f223df9d6b5fe9695c0cbe2b" title=" " alt="" coords="1168,1003,1291,1029"/>
</map>
</div>

</div>
</div>
<a id="a8d747385873e52f47e85179c21521e73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d747385873e52f47e85179c21521e73">&#9670;&nbsp;</a></span>kvm_lapic_set_base()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_set_base </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02530">2530</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;{</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    u64 old_value = vcpu-&gt;arch.apic_base;</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160; </div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_base = value;</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160; </div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    <span class="keywordflow">if</span> ((old_value ^ value) &amp; MSR_IA32_APICBASE_ENABLE)</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;        <a class="code" href="cpuid_8c.html#a537512099e11c7ab0553aeae5e38d9ea">kvm_update_cpuid_runtime</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160; </div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    <span class="keywordflow">if</span> (!apic)</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160; </div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    <span class="comment">/* update jump label if enable bit changes */</span></div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    <span class="keywordflow">if</span> ((old_value ^ value) &amp; MSR_IA32_APICBASE_ENABLE) {</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;        <span class="keywordflow">if</span> (value &amp; MSR_IA32_APICBASE_ENABLE) {</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;            <a class="code" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e">kvm_apic_set_xapic_id</a>(apic, <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_id);</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;            static_branch_slow_dec_deferred(&amp;<a class="code" href="lapic_8h.html#a65788ee3d09ea041368cd93b3391f3c4">apic_hw_disabled</a>);</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;            <span class="comment">/* Check if there are APF page ready requests pending */</span></div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;            kvm_make_request(KVM_REQ_APF_READY, <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;            static_branch_inc(&amp;<a class="code" href="lapic_8h.html#a65788ee3d09ea041368cd93b3391f3c4">apic_hw_disabled</a>.key);</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;            atomic_set_release(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm-&gt;arch.apic_map_dirty, <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a6a4e132eb192a22c351397837d4c082c">DIRTY</a>);</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;        }</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    }</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160; </div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    <span class="keywordflow">if</span> ((old_value ^ value) &amp; X2APIC_ENABLE) {</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;        <span class="keywordflow">if</span> (value &amp; X2APIC_ENABLE)</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;            <a class="code" href="lapic_8c.html#a22d25ec6370d0efd4c569b7317d28098">kvm_apic_set_x2apic_id</a>(apic, <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_id);</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value &amp; MSR_IA32_APICBASE_ENABLE)</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;            <a class="code" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e">kvm_apic_set_xapic_id</a>(apic, <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_id);</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    }</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160; </div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    <span class="keywordflow">if</span> ((old_value ^ value) &amp; (MSR_IA32_APICBASE_ENABLE | X2APIC_ENABLE)) {</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;        kvm_make_request(KVM_REQ_APICV_UPDATE, <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;        static_call_cond(kvm_x86_set_virtual_apic_mode)(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>);</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;    }</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160; </div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a830e2e9bd5c55c17f48b72a0157a6fa2">base_address</a> = apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_base &amp;</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;                 MSR_IA32_APICBASE_BASE;</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160; </div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    <span class="keywordflow">if</span> ((value &amp; MSR_IA32_APICBASE_ENABLE) &amp;&amp;</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;         apic-&gt;<a class="code" href="structkvm__lapic.html#a830e2e9bd5c55c17f48b72a0157a6fa2">base_address</a> != APIC_DEFAULT_PHYS_BASE) {</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;        kvm_set_apicv_inhibit(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm,</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;                      APICV_INHIBIT_REASON_APIC_BASE_MODIFIED);</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;    }</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;}</div>
<div class="ttc" id="acpuid_8c_html_a537512099e11c7ab0553aeae5e38d9ea"><div class="ttname"><a href="cpuid_8c.html#a537512099e11c7ab0553aeae5e38d9ea">kvm_update_cpuid_runtime</a></div><div class="ttdeci">void kvm_update_cpuid_runtime(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="cpuid_8c_source.html#l00309">cpuid.c:309</a></div></div>
<div class="ttc" id="alapic_8c_html_a22d25ec6370d0efd4c569b7317d28098"><div class="ttname"><a href="lapic_8c.html#a22d25ec6370d0efd4c569b7317d28098">kvm_apic_set_x2apic_id</a></div><div class="ttdeci">static void kvm_apic_set_x2apic_id(struct kvm_lapic *apic, u32 id)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00527">lapic.c:527</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a8d747385873e52f47e85179c21521e73_cgraph.png" border="0" usemap="#alapic_8c_a8d747385873e52f47e85179c21521e73_cgraph" alt=""/></div>
<map name="alapic_8c_a8d747385873e52f47e85179c21521e73_cgraph" id="alapic_8c_a8d747385873e52f47e85179c21521e73_cgraph">
<area shape="rect" title=" " alt="" coords="5,160,160,187"/>
<area shape="rect" href="lapic_8c.html#a22d25ec6370d0efd4c569b7317d28098" title=" " alt="" coords="219,109,400,136"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="223,160,396,187"/>
<area shape="rect" href="cpuid_8c.html#a537512099e11c7ab0553aeae5e38d9ea" title=" " alt="" coords="208,212,411,239"/>
<area shape="rect" href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f" title=" " alt="" coords="459,83,651,109"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="483,133,627,160"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="707,5,865,32"/>
<area shape="rect" href="cpuid_8c.html#aba2a2f99dbe3b8848b6ffc19effa6294" title=" " alt="" coords="475,209,634,250"/>
<area shape="rect" href="cpuid_8c.html#a57e37154fafc08d4400cac72d0a0b91d" title=" " alt="" coords="699,209,873,250"/>
<area shape="rect" href="cpuid_8c.html#a7220f0f9a6d0047aef7619e272fa9518" title=" " alt="" coords="929,245,1066,272"/>
<area shape="rect" href="reverse__cpuid_8h.html#a9ca8b41f0d18f3dac63b62e545077db4" title=" " alt="" coords="921,376,1073,403"/>
<area shape="rect" href="reverse__cpuid_8h.html#a748960fccca789bf432536205fdf9826" title=" " alt="" coords="722,325,850,352"/>
<area shape="rect" href="x86_8h.html#adf8330176a8805826ed4711a51ce93cf" title=" " alt="" coords="703,427,869,453"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="717,56,855,83"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a2b779657b20f7afa44c0172b1478ac65" title=" " alt="" coords="713,107,859,133"/>
<area shape="rect" href="cpuid_8c.html#aad06d21707fd0abb109028612ea7514c" title=" " alt="" coords="707,157,865,184"/>
<area shape="rect" href="reverse__cpuid_8h.html#aeac4cdaa1c8b53f46ea791f355b1d08c" title=" " alt="" coords="1393,376,1500,403"/>
<area shape="rect" href="reverse__cpuid_8h.html#a08df87ae84991c96655f367379fad9b1" title=" " alt="" coords="1141,300,1295,327"/>
<area shape="rect" href="reverse__cpuid_8h.html#a76ac51b62ef170b755204cb8b958e585" title=" " alt="" coords="1785,325,1933,352"/>
<area shape="rect" href="reverse__cpuid_8h.html#ae10c1644e90cb8443e5a32554acfd700" title=" " alt="" coords="1579,325,1737,352"/>
<area shape="rect" href="reverse__cpuid_8h.html#adf3299d46978c685ba9b46ebb1536680" title=" " alt="" coords="1363,325,1531,352"/>
<area shape="rect" href="reverse__cpuid_8h.html#a3f7e53c68e5610be44d760fd4854f892" title=" " alt="" coords="1375,275,1518,301"/>
<area shape="rect" href="reverse__cpuid_8h.html#a8f6dc89865c6af98e621e1ddcf401cae" title=" " alt="" coords="1601,275,1715,301"/>
<area shape="rect" href="reverse__cpuid_8h.html#a5c0c9322094b13d5fff76b5ab593339a" title=" " alt="" coords="934,325,1061,352"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a24ffc81fe5ed7998e29134351275b4dd" title=" " alt="" coords="925,107,1070,133"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="1121,107,1315,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a8d747385873e52f47e85179c21521e73_icgraph.png" border="0" usemap="#alapic_8c_a8d747385873e52f47e85179c21521e73_icgraph" alt=""/></div>
<map name="alapic_8c_a8d747385873e52f47e85179c21521e73_icgraph" id="alapic_8c_a8d747385873e52f47e85179c21521e73_icgraph">
<area shape="rect" title=" " alt="" coords="1500,143,1655,170"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1300,89,1452,115"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1311,194,1441,221"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="1101,143,1252,170"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1101,5,1252,47"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="412,45,571,71"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,297,129,323"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1112,273,1241,299"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="867,399,1053,426"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="874,298,1046,325"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="875,247,1045,274"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,424,350,465"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,326,364,353"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="671,399,766,426"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="650,349,787,375"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="451,349,532,375"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="619,298,819,325"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="879,95,1041,122"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="873,179,1047,206"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="669,95,768,122"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="665,45,772,71"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,167,350,208"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="448,259,535,286"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="678,247,759,274"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="664,146,773,173"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="663,197,774,223"/>
</map>
</div>

</div>
</div>
<a id="ab6d8f3638f580c8d6dcd091512c49768"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6d8f3638f580c8d6dcd091512c49768">&#9670;&nbsp;</a></span>kvm_lapic_set_eoi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_set_eoi </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02439">2439</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;{</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;    <a class="code" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491">kvm_lapic_reg_write</a>(vcpu-&gt;arch.apic, APIC_EOI, 0);</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ab6d8f3638f580c8d6dcd091512c49768_cgraph.png" border="0" usemap="#alapic_8c_ab6d8f3638f580c8d6dcd091512c49768_cgraph" alt=""/></div>
<map name="alapic_8c_ab6d8f3638f580c8d6dcd091512c49768_cgraph" id="alapic_8c_ab6d8f3638f580c8d6dcd091512c49768_cgraph">
<area shape="rect" title=" " alt="" coords="5,740,148,767"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="196,740,353,767"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="1348,572,1508,599"/>
<area shape="rect" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1" title=" " alt="" coords="401,81,612,108"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="455,208,558,235"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="451,335,562,361"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="696,436,840,463"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="456,284,557,311"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="441,639,572,665"/>
<area shape="rect" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2" title=" " alt="" coords="698,623,838,649"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="936,816,1081,843"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="937,1297,1080,1324"/>
<area shape="rect" href="lapic_8c.html#aec07f4595f82e14e1075beb4730b6976" title=" " alt="" coords="451,689,562,716"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="433,1145,580,1172"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="924,1120,1093,1147"/>
<area shape="rect" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4" title=" " alt="" coords="438,487,575,513"/>
<area shape="rect" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554" title=" " alt="" coords="439,537,575,564"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="420,385,593,412"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="414,993,599,1020"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="407,1399,607,1425"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="438,1559,575,1585"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="938,943,1079,969"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="443,1044,571,1071"/>
<area shape="rect" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3" title=" " alt="" coords="428,892,585,919"/>
<area shape="rect" href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4" title=" " alt="" coords="413,791,600,817"/>
<area shape="rect" href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c" title=" " alt="" coords="693,5,843,32"/>
<area shape="rect" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843" title=" " alt="" coords="713,157,823,184"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="929,183,1088,209"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="703,309,833,336"/>
<area shape="rect" href="hyperv_8h.html#a7ffceaf3950bd76a9a3a28ff1e836e58" title=" " alt="" coords="671,259,865,285"/>
<area shape="rect" href="hyperv_8c.html#a47f5a157cae898f7a7b370854c3748a4" title=" " alt="" coords="678,56,858,83"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="687,107,849,133"/>
<area shape="rect" href="xen_8h.html#ae436f94d060f3cb8029695c5a9fddc42" title=" " alt="" coords="671,360,865,387"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="929,436,1088,463"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="691,674,845,715"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="1363,841,1493,868"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1141,791,1300,817"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="1365,892,1491,919"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="673,1120,863,1147"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="938,1171,1079,1197"/>
<area shape="rect" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39" title=" " alt="" coords="702,1373,834,1400"/>
<area shape="rect" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44" title=" " alt="" coords="691,1475,845,1501"/>
<area shape="rect" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d" title=" " alt="" coords="679,1526,857,1567"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="660,1221,876,1248"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="949,1424,1069,1451"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="666,1424,870,1451"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="693,1643,843,1669"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="1162,892,1279,919"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="1161,841,1280,868"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="697,993,839,1020"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ab6d8f3638f580c8d6dcd091512c49768_icgraph.png" border="0" usemap="#alapic_8c_ab6d8f3638f580c8d6dcd091512c49768_icgraph" alt=""/></div>
<map name="alapic_8c_ab6d8f3638f580c8d6dcd091512c49768_icgraph" id="alapic_8c_ab6d8f3638f580c8d6dcd091512c49768_icgraph">
<area shape="rect" title=" " alt="" coords="204,5,347,32"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="5,5,156,32"/>
</map>
</div>

</div>
</div>
<a id="a9c3f4680631c7f6cb33a6a5c4c001750"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c3f4680631c7f6cb33a6a5c4c001750">&#9670;&nbsp;</a></span>kvm_lapic_set_pv_eoi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_lapic_set_pv_eoi </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03237">3237</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;{</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;    u64 addr = data &amp; ~KVM_MSR_ENABLED;</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    <span class="keyword">struct </span>gfn_to_hva_cache *ghc = &amp;vcpu-&gt;arch.pv_eoi.data;</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> new_len;</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160; </div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;    <span class="keywordflow">if</span> (!IS_ALIGNED(addr, 4))</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160; </div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;    <span class="keywordflow">if</span> (data &amp; KVM_MSR_ENABLED) {</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;        <span class="keywordflow">if</span> (addr == ghc-&gt;gpa &amp;&amp; len &lt;= ghc-&gt;len)</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;            new_len = ghc-&gt;len;</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;            new_len = len;</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160; </div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;        ret = <a class="code" href="kvm__main_8c.html#ac6c49245c7b6995e95ebe7128b7d1c80">kvm_gfn_to_hva_cache_init</a>(vcpu-&gt;kvm, ghc, addr, new_len);</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;        <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;    }</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160; </div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;    vcpu-&gt;arch.pv_eoi.msr_val = data;</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160; </div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_ac6c49245c7b6995e95ebe7128b7d1c80"><div class="ttname"><a href="kvm__main_8c.html#ac6c49245c7b6995e95ebe7128b7d1c80">kvm_gfn_to_hva_cache_init</a></div><div class="ttdeci">int kvm_gfn_to_hva_cache_init(struct kvm *kvm, struct gfn_to_hva_cache *ghc, gpa_t gpa, unsigned long len)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l03532">kvm_main.c:3532</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a9c3f4680631c7f6cb33a6a5c4c001750_cgraph.png" border="0" usemap="#alapic_8c_a9c3f4680631c7f6cb33a6a5c4c001750_cgraph" alt=""/></div>
<map name="alapic_8c_a9c3f4680631c7f6cb33a6a5c4c001750_cgraph" id="alapic_8c_a9c3f4680631c7f6cb33a6a5c4c001750_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,172,32"/>
<area shape="rect" href="kvm__main_8c.html#ac6c49245c7b6995e95ebe7128b7d1c80" title=" " alt="" coords="220,5,423,32"/>
<area shape="rect" href="kvm__main_8c.html#afb33e9a5cfe88ab45367ba7f6043666d" title=" " alt="" coords="471,5,688,32"/>
<area shape="rect" href="kvm__main_8c.html#ae374ebe48072080788db56075dd9a762" title=" " alt="" coords="736,5,875,32"/>
<area shape="rect" href="kvm__main_8c.html#ab58025ccc253a102c64561fa61c2a514" title=" " alt="" coords="923,5,1075,32"/>
<area shape="rect" href="kvm__main_8c.html#a77ec4b9140d69a05f3b4e7836cc03a96" title=" " alt="" coords="1123,5,1285,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a9c3f4680631c7f6cb33a6a5c4c001750_icgraph.png" border="0" usemap="#alapic_8c_a9c3f4680631c7f6cb33a6a5c4c001750_icgraph" alt=""/></div>
<map name="alapic_8c_a9c3f4680631c7f6cb33a6a5c4c001750_icgraph" id="alapic_8c_a9c3f4680631c7f6cb33a6a5c4c001750_icgraph">
<area shape="rect" title=" " alt="" coords="813,56,980,83"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="632,31,765,57"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,56,339,83"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,31,584,57"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,5,101,32"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,56,115,83"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,107,116,133"/>
</map>
</div>

</div>
</div>
<a id="ab2ee275fa1bc17aa0bfde435723b8f48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2ee275fa1bc17aa0bfde435723b8f48">&#9670;&nbsp;</a></span>kvm_lapic_set_reg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_lapic_set_reg </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reg_off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00077">77</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;{</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e">__kvm_lapic_set_reg</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a>, reg_off, val);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ab2ee275fa1bc17aa0bfde435723b8f48_cgraph.png" border="0" usemap="#alapic_8c_ab2ee275fa1bc17aa0bfde435723b8f48_cgraph" alt=""/></div>
<map name="alapic_8c_ab2ee275fa1bc17aa0bfde435723b8f48_cgraph" id="alapic_8c_ab2ee275fa1bc17aa0bfde435723b8f48_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,149,32"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="197,5,356,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ab2ee275fa1bc17aa0bfde435723b8f48_icgraph.png" border="0" usemap="#alapic_8c_ab2ee275fa1bc17aa0bfde435723b8f48_icgraph" alt=""/></div>
<map name="alapic_8c_ab2ee275fa1bc17aa0bfde435723b8f48_icgraph" id="alapic_8c_ab2ee275fa1bc17aa0bfde435723b8f48_icgraph">
<area shape="rect" title=" " alt="" coords="1412,756,1556,783"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="1202,283,1345,309"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="470,647,627,673"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="752,309,853,336"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="727,959,879,985"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="738,781,867,808"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="990,908,1101,935"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="980,705,1111,732"/>
<area shape="rect" href="lapic_8c.html#a200be826b3634c1b5a377464f35d540f" title=" " alt="" coords="728,1139,877,1181"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="958,445,1133,472"/>
<area shape="rect" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4" title=" " alt="" coords="977,604,1114,631"/>
<area shape="rect" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554" title=" " alt="" coords="977,655,1113,681"/>
<area shape="rect" href="lapic_8c.html#aaa6716cc0b30bec513d223fbfdecfdcf" title=" " alt="" coords="962,1111,1129,1137"/>
<area shape="rect" href="lapic_8c.html#a22d25ec6370d0efd4c569b7317d28098" title=" " alt="" coords="1183,929,1364,956"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="1187,809,1360,836"/>
<area shape="rect" href="lapic_8c.html#a0efcb9037756de47e9d28f0a5ea1009f" title=" " alt="" coords="1193,1005,1354,1032"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="981,284,1110,311"/>
<area shape="rect" href="lapic_8c.html#ac6d5ae412d8199fc4aceeae42cb80024" title=" " alt="" coords="715,157,891,184"/>
<area shape="rect" href="lapic_8c.html#aa421165466ac455ff3fff91fb9afe7bf" title=" " alt="" coords="956,107,1135,133"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="753,259,852,285"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="751,477,854,504"/>
<area shape="rect" href="lapic_8c.html#a44fec9a6b84f831af88ffed6b2325545" title=" " alt="" coords="720,208,885,235"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="235,672,370,699"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="205,723,400,749"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="222,571,383,597"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="231,621,374,648"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="5,715,157,757"/>
<area shape="rect" href="lapic_8c.html#aee34622e495b500817e0b0905bfd0d4c" title=" " alt="" coords="478,251,619,277"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="467,302,631,343"/>
<area shape="rect" href="x86_8c.html#a120377d5a571d3fb86660cd5f6cd982d" title=" " alt="" coords="250,251,355,277"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="234,339,371,365"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="473,951,624,993"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="223,959,382,985"/>
<area shape="rect" href="irq_8c.html#ac65804fee79f17331667abfe171088f2" title=" " alt="" coords="463,157,635,184"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="484,781,613,808"/>
<area shape="rect" href="irq_8c.html#a82ee83566d2724a298b67f23f481976b" title=" " alt="" coords="697,5,908,32"/>
<area shape="rect" href="irq_8c.html#ae3151f072a1bb4a732ee3854ab6cf619" title=" " alt="" coords="715,56,890,83"/>
<area shape="rect" href="vmx_2nested_8c.html#add1e82c32385142c0fca04a1db8cbc3a" title=" " alt="" coords="737,107,868,133"/>
<area shape="rect" href="x86_8c.html#a10dfde66dc94e352514570cc4a2beaa2" title=" " alt="" coords="471,1135,626,1177"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="709,411,896,453"/>
<area shape="rect" href="pmu_8c.html#a03a16f548326b68245a4bf0555bea777" title=" " alt="" coords="463,368,634,395"/>
<area shape="rect" href="x86_8c.html#a130b6ed14cf18384646cb31251dd104e" title=" " alt="" coords="710,528,895,555"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="475,469,622,496"/>
<area shape="rect" href="irq_8h.html#ac79f0e40ed0e1cde83a09aef506fb373" title=" " alt="" coords="448,419,649,445"/>
<area shape="rect" href="x86_8c.html#a2de10bf19fee1e2a9cb47b6f491a18b4" title=" " alt="" coords="471,706,626,747"/>
<area shape="rect" href="cpuid_8c.html#ae8f7489a3e05a9bcd5dfdae82c33d618" title=" " alt="" coords="726,1074,879,1115"/>
<area shape="rect" href="cpuid_8c.html#a0ff60eac33c1bf95a3889674e34251ad" title=" " alt="" coords="489,1081,609,1108"/>
<area shape="rect" href="lapic_8c.html#a8d747385873e52f47e85179c21521e73" title=" " alt="" coords="968,959,1123,985"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="727,1009,878,1036"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="974,1009,1117,1036"/>
</map>
</div>

</div>
</div>
<a id="a8c69ed3d074907a7adcee84e8570ebb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c69ed3d074907a7adcee84e8570ebb2">&#9670;&nbsp;</a></span>kvm_lapic_set_reg64()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static __always_inline void kvm_lapic_set_reg64 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00099">99</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;{</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="lapic_8c.html#a39839decdbbb9e8a6718f3ac7c0b3707">__kvm_lapic_set_reg64</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a>, reg, val);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a8c69ed3d074907a7adcee84e8570ebb2_cgraph.png" border="0" usemap="#alapic_8c_a8c69ed3d074907a7adcee84e8570ebb2_cgraph" alt=""/></div>
<map name="alapic_8c_a8c69ed3d074907a7adcee84e8570ebb2_cgraph" id="alapic_8c_a8c69ed3d074907a7adcee84e8570ebb2_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,165,32"/>
<area shape="rect" href="lapic_8c.html#a39839decdbbb9e8a6718f3ac7c0b3707" title=" " alt="" coords="213,5,388,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a8c69ed3d074907a7adcee84e8570ebb2_icgraph.png" border="0" usemap="#alapic_8c_a8c69ed3d074907a7adcee84e8570ebb2_icgraph" alt=""/></div>
<map name="alapic_8c_a8c69ed3d074907a7adcee84e8570ebb2_icgraph" id="alapic_8c_a8c69ed3d074907a7adcee84e8570ebb2_icgraph">
<area shape="rect" title=" " alt="" coords="1603,314,1763,341"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1408,254,1537,281"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="1391,339,1555,366"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1181,226,1310,253"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="913,114,1099,141"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="920,190,1092,217"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="921,241,1091,267"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,5,350,47"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,71,364,98"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="713,114,808,141"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="692,165,829,191"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,42,129,69"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="470,114,551,141"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="661,215,861,242"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="1168,308,1323,349"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1148,401,1343,427"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1165,525,1326,551"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="929,292,1083,333"/>
<area shape="rect" href="svm_8c.html#a82c8447e70f06dd52623c696446104b5" title=" " alt="" coords="657,283,864,310"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="657,334,864,361"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="453,283,569,310"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="452,334,569,361"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="930,357,1082,399"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="917,423,1095,450"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="936,474,1076,501"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="681,416,840,457"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="912,525,1100,551"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="424,575,597,602"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="694,525,827,551"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="412,525,609,551"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="183,550,358,577"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="27,499,108,526"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="13,550,122,577"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="12,601,123,627"/>
</map>
</div>

</div>
</div>
<a id="aee34622e495b500817e0b0905bfd0d4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee34622e495b500817e0b0905bfd0d4c">&#9670;&nbsp;</a></span>kvm_lapic_set_tpr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_set_tpr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>cr8</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02516">2516</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;{</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;    <a class="code" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1">apic_set_tpr</a>(vcpu-&gt;arch.apic, (cr8 &amp; 0x0f) &lt;&lt; 4);</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aee34622e495b500817e0b0905bfd0d4c_cgraph.png" border="0" usemap="#alapic_8c_aee34622e495b500817e0b0905bfd0d4c_cgraph" alt=""/></div>
<map name="alapic_8c_aee34622e495b500817e0b0905bfd0d4c_cgraph" id="alapic_8c_aee34622e495b500817e0b0905bfd0d4c_cgraph">
<area shape="rect" title=" " alt="" coords="5,132,147,159"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="195,132,296,159"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="344,107,473,133"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="718,157,862,184"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="521,107,664,133"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="521,19,664,61"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="916,107,1075,133"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="717,56,863,83"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1123,56,1272,83"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="916,56,1075,83"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="916,157,1075,184"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="712,5,868,32"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="935,5,1055,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aee34622e495b500817e0b0905bfd0d4c_icgraph.png" border="0" usemap="#alapic_8c_aee34622e495b500817e0b0905bfd0d4c_icgraph" alt=""/></div>
<map name="alapic_8c_aee34622e495b500817e0b0905bfd0d4c_icgraph" id="alapic_8c_aee34622e495b500817e0b0905bfd0d4c_icgraph">
<area shape="rect" title=" " alt="" coords="1197,288,1339,315"/>
<area shape="rect" href="x86_8c.html#a120377d5a571d3fb86660cd5f6cd982d" title=" " alt="" coords="1044,288,1149,315"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="833,85,996,112"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,121,364,148"/>
<area shape="rect" href="svm_8c.html#ad1887c4bb9c78c577fb20a129d73ea41" title=" " alt="" coords="855,212,974,239"/>
<area shape="rect" href="svm_8c.html#af4590239d3e0b5fbad189a245207dfaa" title=" " alt="" coords="881,263,948,289"/>
<area shape="rect" href="x86_8c.html#a86812e4228865668099921709e1c2f26" title=" " alt="" coords="851,313,978,340"/>
<area shape="rect" href="vmx_8c.html#aa55ace9429e6e94042e6602716222805" title=" " alt="" coords="872,364,957,391"/>
<area shape="rect" href="svm_8c.html#a640846de1c48f3e408644fcb85a6004b" title=" " alt="" coords="846,415,983,441"/>
<area shape="rect" href="vmx_8c.html#a8d0fa5e317cbd0eb67ebdc9fa5ec70ce" title=" " alt="" coords="850,465,979,492"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="653,85,751,112"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="649,20,755,47"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,55,350,97"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="448,111,535,137"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,63,129,89"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="412,5,571,32"/>
<area shape="rect" href="svm_8c.html#af2ee2a03530f5b7a02a127d8b779d2ae" title=" " alt="" coords="619,212,785,239"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="644,415,760,441"/>
</map>
</div>

</div>
</div>
<a id="ad0f76b010d3d80125e88dc3d819f115b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0f76b010d3d80125e88dc3d819f115b">&#9670;&nbsp;</a></span>kvm_lapic_set_vapic_addr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_lapic_set_vapic_addr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpa_t&#160;</td>
          <td class="paramname"><em>vapic_addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03139">3139</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;{</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;    <span class="keywordflow">if</span> (vapic_addr) {</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="kvm__main_8c.html#ac6c49245c7b6995e95ebe7128b7d1c80">kvm_gfn_to_hva_cache_init</a>(vcpu-&gt;kvm,</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;                    &amp;vcpu-&gt;arch.apic-&gt;vapic_cache,</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;                    vapic_addr, <span class="keyword">sizeof</span>(u32)))</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;            <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;        __set_bit(KVM_APIC_CHECK_VAPIC, &amp;vcpu-&gt;arch.apic_attention);</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;        __clear_bit(KVM_APIC_CHECK_VAPIC, &amp;vcpu-&gt;arch.apic_attention);</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;    }</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160; </div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;    vcpu-&gt;arch.apic-&gt;vapic_addr = vapic_addr;</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ad0f76b010d3d80125e88dc3d819f115b_cgraph.png" border="0" usemap="#alapic_8c_ad0f76b010d3d80125e88dc3d819f115b_cgraph" alt=""/></div>
<map name="alapic_8c_ad0f76b010d3d80125e88dc3d819f115b_cgraph" id="alapic_8c_ad0f76b010d3d80125e88dc3d819f115b_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,200,32"/>
<area shape="rect" href="kvm__main_8c.html#ac6c49245c7b6995e95ebe7128b7d1c80" title=" " alt="" coords="248,5,451,32"/>
<area shape="rect" href="kvm__main_8c.html#afb33e9a5cfe88ab45367ba7f6043666d" title=" " alt="" coords="499,5,716,32"/>
<area shape="rect" href="kvm__main_8c.html#ae374ebe48072080788db56075dd9a762" title=" " alt="" coords="764,5,903,32"/>
<area shape="rect" href="kvm__main_8c.html#ab58025ccc253a102c64561fa61c2a514" title=" " alt="" coords="951,5,1103,32"/>
<area shape="rect" href="kvm__main_8c.html#a77ec4b9140d69a05f3b4e7836cc03a96" title=" " alt="" coords="1151,5,1313,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ad0f76b010d3d80125e88dc3d819f115b_icgraph.png" border="0" usemap="#alapic_8c_ad0f76b010d3d80125e88dc3d819f115b_icgraph" alt=""/></div>
<map name="alapic_8c_ad0f76b010d3d80125e88dc3d819f115b_icgraph" id="alapic_8c_ad0f76b010d3d80125e88dc3d819f115b_icgraph">
<area shape="rect" title=" " alt="" coords="384,5,579,32"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="177,5,336,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a973c3bd2856958a514e5ae2f49b14821"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a973c3bd2856958a514e5ae2f49b14821">&#9670;&nbsp;</a></span>kvm_lapic_switch_to_hv_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_switch_to_hv_timer </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02192">2192</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;{</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    <a class="code" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db">restart_apic_timer</a>(vcpu-&gt;arch.apic);</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a973c3bd2856958a514e5ae2f49b14821_cgraph.png" border="0" usemap="#alapic_8c_a973c3bd2856958a514e5ae2f49b14821_cgraph" alt=""/></div>
<map name="alapic_8c_a973c3bd2856958a514e5ae2f49b14821_cgraph" id="alapic_8c_a973c3bd2856958a514e5ae2f49b14821_cgraph">
<area shape="rect" title=" " alt="" coords="5,567,164,609"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="212,575,353,601"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="584,600,711,627"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="402,625,519,652"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="401,499,520,525"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="775,499,921,525"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="583,549,712,576"/>
<area shape="rect" href="lapic_8c.html#a2400290b895608d302ecce4ee352ee25" title=" " alt="" coords="975,755,1151,781"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="969,587,1156,613"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="1211,317,1371,344"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="969,251,1156,293"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1680,411,1803,437"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="976,536,1149,563"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="975,638,1150,679"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="1216,587,1367,613"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="1220,521,1363,562"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="1225,637,1357,664"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="1456,519,1576,545"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="1457,620,1575,647"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="1693,620,1789,647"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="1223,200,1360,227"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="1204,255,1379,281"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1447,251,1585,277"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1896,81,2067,108"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="1439,302,1593,343"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1443,368,1589,395"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1444,5,1588,32"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1687,157,1795,184"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1677,208,1806,235"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1678,259,1805,285"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1679,309,1804,336"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1653,360,1829,387"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1659,107,1823,133"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1897,157,2066,184"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1877,385,2085,412"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1905,436,2058,463"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1664,462,1819,503"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1662,528,1821,555"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1662,5,1821,32"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="1212,706,1371,747"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="1447,721,1585,748"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="1435,772,1597,799"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="1427,671,1605,697"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1682,671,1801,697"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="585,448,710,475"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="568,499,727,525"/>
<area shape="rect" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede" title=" " alt="" coords="971,470,1154,511"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a973c3bd2856958a514e5ae2f49b14821_icgraph.png" border="0" usemap="#alapic_8c_a973c3bd2856958a514e5ae2f49b14821_icgraph" alt=""/></div>
<map name="alapic_8c_a973c3bd2856958a514e5ae2f49b14821_icgraph" id="alapic_8c_a973c3bd2856958a514e5ae2f49b14821_icgraph">
<area shape="rect" title=" " alt="" coords="684,5,843,47"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="541,13,636,39"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,13,493,39"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,13,364,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="aee4a3e5ae4ed211edf4e463ebacadaa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee4a3e5ae4ed211edf4e463ebacadaa5">&#9670;&nbsp;</a></span>kvm_lapic_switch_to_sw_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_switch_to_sw_timer </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02197">2197</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;{</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160; </div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    preempt_disable();</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    <span class="comment">/* Possibly the TSC deadline timer is not enabled yet */</span></div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    <span class="keywordflow">if</span> (apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a033831ad90c69d7ea4e9af3fd0a6727e">hv_timer_in_use</a>)</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;        <a class="code" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8">start_sw_timer</a>(apic);</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    preempt_enable();</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_af723244d8a4013a14d7eaa2bca2765e8"><div class="ttname"><a href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8">start_sw_timer</a></div><div class="ttdeci">static void start_sw_timer(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02141">lapic.c:2141</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aee4a3e5ae4ed211edf4e463ebacadaa5_cgraph.png" border="0" usemap="#alapic_8c_aee4a3e5ae4ed211edf4e463ebacadaa5_cgraph" alt=""/></div>
<map name="alapic_8c_aee4a3e5ae4ed211edf4e463ebacadaa5_cgraph" id="alapic_8c_aee4a3e5ae4ed211edf4e463ebacadaa5_cgraph">
<area shape="rect" title=" " alt="" coords="5,380,164,421"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="212,387,331,414"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="1033,122,1171,149"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="395,463,521,490"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="1022,253,1182,279"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="393,514,523,541"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="395,362,521,389"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="379,413,537,439"/>
<area shape="rect" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede" title=" " alt="" coords="782,355,965,396"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="585,417,732,443"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="1036,426,1168,453"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="1267,375,1387,402"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="1267,459,1386,486"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="1504,578,1600,605"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="780,471,967,498"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="780,187,967,228"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1491,527,1613,554"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="787,421,960,447"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="786,652,961,693"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="1027,375,1177,402"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="1031,477,1173,519"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="1015,173,1189,199"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1258,325,1395,351"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1707,274,1877,301"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="1249,5,1404,47"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1254,71,1399,98"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1255,122,1399,149"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1498,426,1606,453"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1487,477,1617,503"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1489,223,1615,250"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1489,274,1615,301"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1464,325,1640,351"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1470,375,1634,402"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1707,426,1877,453"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1688,502,1896,529"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1715,553,1869,579"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1475,5,1629,47"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1473,71,1631,98"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1473,122,1631,149"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="1023,665,1181,707"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="1258,726,1395,753"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="1246,675,1407,702"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="1237,625,1416,651"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1493,629,1611,655"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aee4a3e5ae4ed211edf4e463ebacadaa5_icgraph.png" border="0" usemap="#alapic_8c_aee4a3e5ae4ed211edf4e463ebacadaa5_icgraph" alt=""/></div>
<map name="alapic_8c_aee4a3e5ae4ed211edf4e463ebacadaa5_icgraph" id="alapic_8c_aee4a3e5ae4ed211edf4e463ebacadaa5_icgraph">
<area shape="rect" title=" " alt="" coords="684,5,843,47"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="541,13,636,39"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,13,493,39"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,13,364,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="aa63139efcde3eb7b7548e5792d7cf63d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa63139efcde3eb7b7548e5792d7cf63d">&#9670;&nbsp;</a></span>kvm_lapic_sync_from_vapic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_sync_from_vapic </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03072">3072</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;{</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;    u32 data;</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160; </div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;    <span class="keywordflow">if</span> (test_bit(KVM_APIC_PV_EOI_PENDING, &amp;vcpu-&gt;arch.apic_attention))</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;        <a class="code" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9">apic_sync_pv_eoi_from_guest</a>(vcpu, vcpu-&gt;arch.apic);</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160; </div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;    <span class="keywordflow">if</span> (!test_bit(KVM_APIC_CHECK_VAPIC, &amp;vcpu-&gt;arch.apic_attention))</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160; </div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="kvm__main_8c.html#aa1c62238734b7293ce70a2710a8f2b05">kvm_read_guest_cached</a>(vcpu-&gt;kvm, &amp;vcpu-&gt;arch.apic-&gt;vapic_cache, &amp;data,</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;                  <span class="keyword">sizeof</span>(u32)))</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160; </div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;    <a class="code" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1">apic_set_tpr</a>(vcpu-&gt;arch.apic, data &amp; 0xff);</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_aa1c62238734b7293ce70a2710a8f2b05"><div class="ttname"><a href="kvm__main_8c.html#aa1c62238734b7293ce70a2710a8f2b05">kvm_read_guest_cached</a></div><div class="ttdeci">int kvm_read_guest_cached(struct kvm *kvm, struct gfn_to_hva_cache *ghc, void *data, unsigned long len)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l03608">kvm_main.c:3608</a></div></div>
<div class="ttc" id="alapic_8c_html_a651f3e8a2def4f70e3750464ea4904a9"><div class="ttname"><a href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9">apic_sync_pv_eoi_from_guest</a></div><div class="ttdeci">static void apic_sync_pv_eoi_from_guest(struct kvm_vcpu *vcpu, struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l03049">lapic.c:3049</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aa63139efcde3eb7b7548e5792d7cf63d_cgraph.png" border="0" usemap="#alapic_8c_aa63139efcde3eb7b7548e5792d7cf63d_cgraph" alt=""/></div>
<map name="alapic_8c_aa63139efcde3eb7b7548e5792d7cf63d_cgraph" id="alapic_8c_aa63139efcde3eb7b7548e5792d7cf63d_cgraph">
<area shape="rect" title=" " alt="" coords="5,639,169,681"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="465,116,566,143"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="217,639,392,681"/>
<area shape="rect" href="kvm__main_8c.html#aa1c62238734b7293ce70a2710a8f2b05" title=" " alt="" coords="886,756,1069,783"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="671,116,800,143"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1154,5,1298,32"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="906,116,1049,143"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="906,50,1049,91"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="1147,167,1305,193"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1413,261,1559,288"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1653,115,1802,141"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1648,261,1807,288"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1407,5,1565,32"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="1148,61,1304,88"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="1426,76,1546,103"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="464,276,567,303"/>
<area shape="rect" href="lapic_8c.html#a9f87e777fe7602fff9557bbfbd630791" title=" " alt="" coords="453,705,577,732"/>
<area shape="rect" href="lapic_8c.html#aa9449652b89a95fb90ca1b00dffac32d" title=" " alt="" coords="440,639,591,681"/>
<area shape="rect" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843" title=" " alt="" coords="680,276,791,303"/>
<area shape="rect" href="hyperv_8h.html#a7ffceaf3950bd76a9a3a28ff1e836e58" title=" " alt="" coords="639,225,832,252"/>
<area shape="rect" href="hyperv_8c.html#a47f5a157cae898f7a7b370854c3748a4" title=" " alt="" coords="645,576,825,603"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="654,385,817,412"/>
<area shape="rect" href="lapic_8c.html#a33d332d149d0b1dd33e02b2ab98009a9" title=" " alt="" coords="895,269,1060,310"/>
<area shape="rect" href="hyperv_8c.html#a7432d42dbbd06907d83cbe1cf9479295" title=" " alt="" coords="880,655,1075,681"/>
<area shape="rect" href="hyperv_8c.html#af4c599ff6e5b1b327daf618845547c0d" title=" " alt="" coords="896,604,1059,631"/>
<area shape="rect" href="hyperv_8c.html#a5ea15c685a7e3e1abca91772c3cc3a52" title=" " alt="" coords="916,553,1039,580"/>
<area shape="rect" href="hyperv_8c.html#a88a2493dc6ffeea51c4325f080d797d4" title=" " alt="" coords="1144,647,1308,673"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1425,647,1547,673"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="913,335,1042,361"/>
<area shape="rect" href="irq_8h.html#a68413268c1f1f354270e9a0de9c2fe44" title=" " alt="" coords="927,385,1028,412"/>
<area shape="rect" href="lapic_8c.html#a900c0170b3a9f3c6869d072aa14055d1" title=" " alt="" coords="900,437,1055,478"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="889,503,1065,529"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="1123,356,1329,383"/>
<area shape="rect" href="ioapic_8c.html#aa590f4d1416bf84560a4e9693c638f55" title=" " alt="" coords="1181,503,1271,529"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="1429,356,1543,383"/>
<area shape="rect" href="ioapic_8c.html#a1d24315dec2401b4c45b224469c7379d" title=" " alt="" coords="1413,495,1559,537"/>
<area shape="rect" href="lapic_8c.html#a664d20f44962ff67555d95cdf987eb9b" title=" " alt="" coords="671,701,799,728"/>
<area shape="rect" href="lapic_8c.html#a46a725e66a6b75af27a208acd463153a" title=" " alt="" coords="671,649,799,676"/>
<area shape="rect" href="kvm__main_8c.html#ae902cad56e0551f3e6bf26df088f1b84" title=" " alt="" coords="1139,763,1313,805"/>
<area shape="rect" href="kvm__main_8c.html#afb33e9a5cfe88ab45367ba7f6043666d" title=" " alt="" coords="1377,752,1595,779"/>
<area shape="rect" href="kvm__main_8c.html#a3cc887a9ecfdd6e9f5ab90dc2ce8de4a" title=" " alt="" coords="1421,803,1551,829"/>
<area shape="rect" href="kvm__main_8c.html#ae374ebe48072080788db56075dd9a762" title=" " alt="" coords="1658,727,1797,753"/>
<area shape="rect" href="kvm__main_8c.html#ab58025ccc253a102c64561fa61c2a514" title=" " alt="" coords="1875,727,2027,753"/>
<area shape="rect" href="kvm__main_8c.html#a2a95905782c4136bdf6d9861f937b0ef" title=" " alt="" coords="1643,828,1812,855"/>
<area shape="rect" href="kvm__main_8c.html#a03aae88de564edba8a3a2d10bc5e7b20" title=" " alt="" coords="1670,777,1785,804"/>
<area shape="rect" href="kvm__main_8c.html#acc4698e3f076cdbbd5d8ca788a94decf" title=" " alt="" coords="1860,803,2043,829"/>
<area shape="rect" href="kvm__main_8c.html#a7c20e0f654f0b4472c3833f0a563e11e" title=" " alt="" coords="1887,853,2015,880"/>
<area shape="rect" href="kvm__main_8c.html#abc966ec55b5101c293dabe1eb29e2b82" title=" " alt="" coords="884,705,1071,732"/>
<area shape="rect" href="kvm__main_8c.html#ace1d8e8c746cb64f9ce515fe8807db98" title=" " alt="" coords="1137,698,1315,739"/>
<area shape="rect" href="kvm__main_8c.html#a1cf9d9c864cd7f9b5b32fc880c0872ab" title=" " alt="" coords="1419,701,1553,728"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aa63139efcde3eb7b7548e5792d7cf63d_icgraph.png" border="0" usemap="#alapic_8c_aa63139efcde3eb7b7548e5792d7cf63d_icgraph" alt=""/></div>
<map name="alapic_8c_aa63139efcde3eb7b7548e5792d7cf63d_icgraph" id="alapic_8c_aa63139efcde3eb7b7548e5792d7cf63d_icgraph">
<area shape="rect" title=" " alt="" coords="727,5,891,47"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="541,13,679,39"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,13,493,39"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,13,364,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="a332060485ef249fcfd9edbf9cf80dd2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a332060485ef249fcfd9edbf9cf80dd2b">&#9670;&nbsp;</a></span>kvm_lapic_sync_to_vapic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_lapic_sync_to_vapic </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03115">3115</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;{</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;    u32 data, tpr;</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    <span class="keywordtype">int</span> max_irr, max_isr;</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160; </div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;    <a class="code" href="lapic_8c.html#ac56f15a70a1339e966c89b349b3f7850">apic_sync_pv_eoi_to_guest</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, apic);</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160; </div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;    <span class="keywordflow">if</span> (!test_bit(KVM_APIC_CHECK_VAPIC, &amp;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic_attention))</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160; </div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;    tpr = <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_TASKPRI) &amp; 0xff;</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;    max_irr = <a class="code" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79">apic_find_highest_irr</a>(apic);</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;    <span class="keywordflow">if</span> (max_irr &lt; 0)</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;        max_irr = 0;</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;    max_isr = <a class="code" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0">apic_find_highest_isr</a>(apic);</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;    <span class="keywordflow">if</span> (max_isr &lt; 0)</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;        max_isr = 0;</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;    data = (tpr &amp; 0xff) | ((max_isr &amp; 0xf0) &lt;&lt; 8) | (max_irr &lt;&lt; 24);</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160; </div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;    <a class="code" href="kvm__main_8c.html#abc966ec55b5101c293dabe1eb29e2b82">kvm_write_guest_cached</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm, &amp;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic-&gt;vapic_cache, &amp;data,</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;                <span class="keyword">sizeof</span>(u32));</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;}</div>
<div class="ttc" id="akvm__main_8c_html_abc966ec55b5101c293dabe1eb29e2b82"><div class="ttname"><a href="kvm__main_8c.html#abc966ec55b5101c293dabe1eb29e2b82">kvm_write_guest_cached</a></div><div class="ttdeci">int kvm_write_guest_cached(struct kvm *kvm, struct gfn_to_hva_cache *ghc, void *data, unsigned long len)</div><div class="ttdef"><b>Definition:</b> <a href="kvm__main_8c_source.html#l03571">kvm_main.c:3571</a></div></div>
<div class="ttc" id="alapic_8c_html_ac56f15a70a1339e966c89b349b3f7850"><div class="ttname"><a href="lapic_8c.html#ac56f15a70a1339e966c89b349b3f7850">apic_sync_pv_eoi_to_guest</a></div><div class="ttdeci">static void apic_sync_pv_eoi_to_guest(struct kvm_vcpu *vcpu, struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l03095">lapic.c:3095</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a332060485ef249fcfd9edbf9cf80dd2b_cgraph.png" border="0" usemap="#alapic_8c_a332060485ef249fcfd9edbf9cf80dd2b_cgraph" alt=""/></div>
<map name="alapic_8c_a332060485ef249fcfd9edbf9cf80dd2b_cgraph" id="alapic_8c_a332060485ef249fcfd9edbf9cf80dd2b_cgraph">
<area shape="rect" title=" " alt="" coords="5,173,193,200"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="243,20,399,47"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="241,85,400,112"/>
<area shape="rect" href="lapic_8c.html#ac56f15a70a1339e966c89b349b3f7850" title=" " alt="" coords="243,166,399,207"/>
<area shape="rect" href="kvm__main_8c.html#abc966ec55b5101c293dabe1eb29e2b82" title=" " alt="" coords="852,249,1039,276"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="248,325,393,352"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="467,5,587,32"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="655,31,804,57"/>
<area shape="rect" href="lapic_8c.html#a900c0170b3a9f3c6869d072aa14055d1" title=" " alt="" coords="450,107,605,149"/>
<area shape="rect" href="lapic_8c.html#a9f87e777fe7602fff9557bbfbd630791" title=" " alt="" coords="465,173,589,200"/>
<area shape="rect" href="lapic_8c.html#a1ea4e066578d706e217136c8baf247b3" title=" " alt="" coords="452,224,603,251"/>
<area shape="rect" href="lapic_8c.html#a46a725e66a6b75af27a208acd463153a" title=" " alt="" coords="665,224,793,251"/>
<area shape="rect" href="kvm__main_8c.html#ace1d8e8c746cb64f9ce515fe8807db98" title=" " alt="" coords="1087,242,1265,283"/>
<area shape="rect" href="kvm__main_8c.html#afb33e9a5cfe88ab45367ba7f6043666d" title=" " alt="" coords="1313,173,1531,200"/>
<area shape="rect" href="kvm__main_8c.html#a1cf9d9c864cd7f9b5b32fc880c0872ab" title=" " alt="" coords="1355,249,1489,276"/>
<area shape="rect" href="kvm__main_8c.html#ae4806d9a69b751639c175cb98e468f15" title=" " alt="" coords="2035,303,2217,329"/>
<area shape="rect" href="kvm__main_8c.html#ae374ebe48072080788db56075dd9a762" title=" " alt="" coords="2283,168,2421,195"/>
<area shape="rect" href="kvm__main_8c.html#ab58025ccc253a102c64561fa61c2a514" title=" " alt="" coords="2507,168,2659,195"/>
<area shape="rect" href="kvm__main_8c.html#a77ec4b9140d69a05f3b4e7836cc03a96" title=" " alt="" coords="2727,168,2889,195"/>
<area shape="rect" href="kvm__main_8c.html#a49ed988e062d259a8706411f619bf1f7" title=" " alt="" coords="1579,211,1752,237"/>
<area shape="rect" href="kvm__main_8c.html#a03aae88de564edba8a3a2d10bc5e7b20" title=" " alt="" coords="1608,261,1723,288"/>
<area shape="rect" href="kvm__main_8c.html#a7079b0256c7572c701a6e1526f58fdac" title=" " alt="" coords="1800,211,1987,237"/>
<area shape="rect" href="kvm__main_8c.html#a7c20e0f654f0b4472c3833f0a563e11e" title=" " alt="" coords="1829,261,1957,288"/>
<area shape="rect" href="kvm__main_8c.html#a04c9651c5f9a0485fd1e7152bdb01353" title=" " alt="" coords="2047,211,2205,237"/>
<area shape="rect" href="dirty__ring_8c.html#ac1878b63f1f337e93cf186ebd4fffcc4" title=" " alt="" coords="2266,237,2438,278"/>
<area shape="rect" href="dirty__ring_8c.html#a81ebbf462440ed5392d6d3412a859ae7" title=" " alt="" coords="2273,303,2431,329"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="2265,353,2439,380"/>
<area shape="rect" href="dirty__ring_8c.html#ad6e626257c739b2ac3d397119a7cf798" title=" " alt="" coords="2487,252,2679,279"/>
<area shape="rect" href="dirty__ring_8c.html#a6fe5cd75b9bac6497e1ae7340f2a5f7b" title=" " alt="" coords="2509,303,2657,329"/>
<area shape="rect" href="dirty__ring_8c.html#a22c9a239acf3463a8599a21c0a756538" title=" " alt="" coords="2493,353,2672,380"/>
<area shape="rect" href="dirty__ring_8c.html#acd0a1e586324b4c49b429c7a392db73f" title=" " alt="" coords="2729,328,2887,355"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="448,325,607,352"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a332060485ef249fcfd9edbf9cf80dd2b_icgraph.png" border="0" usemap="#alapic_8c_a332060485ef249fcfd9edbf9cf80dd2b_icgraph" alt=""/></div>
<map name="alapic_8c_a332060485ef249fcfd9edbf9cf80dd2b_icgraph" id="alapic_8c_a332060485ef249fcfd9edbf9cf80dd2b_icgraph">
<area shape="rect" title=" " alt="" coords="727,5,915,32"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="541,5,679,32"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,5,493,32"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,5,364,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a7195db5c58bcea2e080ee79cdaeae617"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7195db5c58bcea2e080ee79cdaeae617">&#9670;&nbsp;</a></span>kvm_pv_send_ipi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_pv_send_ipi </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>ipi_bitmap_low</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>ipi_bitmap_high</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>icr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>op_64_bit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00852">852</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;{</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="keyword">struct </span>kvm_apic_map *map;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keyword">struct </span>kvm_lapic_irq irq = {0};</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordtype">int</span> cluster_size = op_64_bit ? 64 : 32;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keywordtype">int</span> count;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="keywordflow">if</span> (icr &amp; (<a class="code" href="lapic_8h.html#a5e58cf75a31cd26e03db7f201861a8e4">APIC_DEST_MASK</a> | <a class="code" href="lapic_8h.html#ad3b78bd2ddd9b9b15390755b6df98d3d">APIC_SHORT_MASK</a>))</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        <span class="keywordflow">return</span> -KVM_EINVAL;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160; </div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    irq.vector = icr &amp; APIC_VECTOR_MASK;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    irq.delivery_mode = icr &amp; APIC_MODE_MASK;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    irq.level = (icr &amp; APIC_INT_ASSERT) != 0;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    irq.trig_mode = icr &amp; APIC_INT_LEVELTRIG;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160; </div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    rcu_read_lock();</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    map = rcu_dereference(kvm-&gt;arch.apic_map);</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160; </div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    count = -EOPNOTSUPP;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">if</span> (likely(map)) {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        count = <a class="code" href="lapic_8c.html#a33f4e295e9710d133e3e38e0aed35edb">__pv_send_ipi</a>(&amp;ipi_bitmap_low, map, &amp;irq, min);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        min += cluster_size;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        count += <a class="code" href="lapic_8c.html#a33f4e295e9710d133e3e38e0aed35edb">__pv_send_ipi</a>(&amp;ipi_bitmap_high, map, &amp;irq, min);</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    }</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160; </div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    rcu_read_unlock();</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keywordflow">return</span> count;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a33f4e295e9710d133e3e38e0aed35edb"><div class="ttname"><a href="lapic_8c.html#a33f4e295e9710d133e3e38e0aed35edb">__pv_send_ipi</a></div><div class="ttdeci">static int __pv_send_ipi(unsigned long *ipi_bitmap, struct kvm_apic_map *map, struct kvm_lapic_irq *irq, u32 min)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00832">lapic.c:832</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a7195db5c58bcea2e080ee79cdaeae617_cgraph.png" border="0" usemap="#alapic_8c_a7195db5c58bcea2e080ee79cdaeae617_cgraph" alt=""/></div>
<map name="alapic_8c_a7195db5c58bcea2e080ee79cdaeae617_cgraph" id="alapic_8c_a7195db5c58bcea2e080ee79cdaeae617_cgraph">
<area shape="rect" title=" " alt="" coords="5,183,140,209"/>
<area shape="rect" href="lapic_8c.html#a33f4e295e9710d133e3e38e0aed35edb" title=" " alt="" coords="188,183,301,209"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="349,183,485,209"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="533,183,671,209"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="753,31,861,57"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="742,81,871,108"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="743,132,870,159"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="744,183,869,209"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="719,233,895,260"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="725,284,889,311"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="745,335,868,361"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="961,5,1132,32"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="962,56,1131,83"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="943,309,1151,336"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="970,360,1123,387"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a7195db5c58bcea2e080ee79cdaeae617_icgraph.png" border="0" usemap="#alapic_8c_a7195db5c58bcea2e080ee79cdaeae617_icgraph" alt=""/></div>
<map name="alapic_8c_a7195db5c58bcea2e080ee79cdaeae617_icgraph" id="alapic_8c_a7195db5c58bcea2e080ee79cdaeae617_icgraph">
<area shape="rect" title=" " alt="" coords="232,5,367,32"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="5,5,184,32"/>
</map>
</div>

</div>
</div>
<a id="a756b707dd502680db2eed7759defde40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a756b707dd502680db2eed7759defde40">&#9670;&nbsp;</a></span>kvm_recalculate_apic_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_recalculate_apic_map </td>
          <td>(</td>
          <td class="paramtype">struct kvm *&#160;</td>
          <td class="paramname"><em>kvm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00374">374</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;{</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keyword">struct </span>kvm_apic_map *<span class="keyword">new</span>, *old = NULL;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    u32 max_id = 255; <span class="comment">/* enough space for any xAPIC ID */</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordtype">bool</span> xapic_id_mismatch;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">/* Read kvm-&gt;arch.apic_map_dirty before kvm-&gt;arch.apic_map.  */</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">if</span> (atomic_read_acquire(&amp;kvm-&gt;arch.apic_map_dirty) == <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a66c5c37af65c297c098d96df666bf6da">CLEAN</a>)</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    WARN_ONCE(!<a class="code" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39">irqchip_in_kernel</a>(kvm),</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;          <span class="stringliteral">&quot;Dirty APIC map without an in-kernel local APIC&quot;</span>);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    mutex_lock(&amp;kvm-&gt;arch.apic_map_lock);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;retry:</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">     * Read kvm-&gt;arch.apic_map_dirty before kvm-&gt;arch.apic_map (if clean)</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">     * or the APIC registers (if dirty).  Note, on retry the map may have</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">     * not yet been marked dirty by whatever task changed a vCPU&#39;s x2APIC</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">     * ID, i.e. the map may still show up as in-progress.  In that case</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">     * this task still needs to retry and complete its calculation.</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">if</span> (atomic_cmpxchg_acquire(&amp;kvm-&gt;arch.apic_map_dirty,</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                   <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a6a4e132eb192a22c351397837d4c082c">DIRTY</a>, <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4ac2b52587c19144a2fdd6253248a08414">UPDATE_IN_PROGRESS</a>) == <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a66c5c37af65c297c098d96df666bf6da">CLEAN</a>) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="comment">/* Someone else has updated the map. */</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        mutex_unlock(&amp;kvm-&gt;arch.apic_map_lock);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">     * Reset the mismatch flag between attempts so that KVM does the right</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">     * thing if a vCPU changes its xAPIC ID, but do NOT reset max_id, i.e.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">     * keep max_id strictly increasing.  Disallowing max_id from shrinking</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">     * ensures KVM won&#39;t get stuck in an infinite loop, e.g. if the vCPU</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">     * with the highest x2APIC ID is toggling its APIC on and off.</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    xapic_id_mismatch = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    kvm_for_each_vcpu(i, vcpu, kvm)</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4">kvm_apic_present</a>(vcpu))</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            max_id = max(max_id, <a class="code" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718">kvm_x2apic_id</a>(vcpu-&gt;arch.apic));</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keyword">new</span> = kvzalloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> kvm_apic_map) +</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                       <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structkvm__lapic.html">kvm_lapic</a> *) * ((u64)max_id + 1),</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;               GFP_KERNEL_ACCOUNT);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">if</span> (!<span class="keyword">new</span>)</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keyword">new</span>-&gt;max_apic_id = max_id;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keyword">new</span>-&gt;logical_mode = KVM_APIC_MODE_SW_DISABLED;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    kvm_for_each_vcpu(i, vcpu, kvm) {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4">kvm_apic_present</a>(vcpu))</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        r = <a class="code" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44">kvm_recalculate_phys_map</a>(<span class="keyword">new</span>, vcpu, &amp;xapic_id_mismatch);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">if</span> (r) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            kvfree(<span class="keyword">new</span>);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="keyword">new</span> = NULL;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <span class="keywordflow">if</span> (r == -E2BIG) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                cond_resched();</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                <span class="keywordflow">goto</span> retry;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <a class="code" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49">kvm_recalculate_logical_map</a>(<span class="keyword">new</span>, vcpu);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;out:</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">     * The optimized map is effectively KVM&#39;s internal version of APICv,</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">     * and all unwanted aliasing that results in disabling the optimized</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">     * map also applies to APICv.</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">if</span> (!<span class="keyword">new</span>)</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        kvm_set_apicv_inhibit(kvm, APICV_INHIBIT_REASON_PHYSICAL_ID_ALIASED);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        kvm_clear_apicv_inhibit(kvm, APICV_INHIBIT_REASON_PHYSICAL_ID_ALIASED);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">if</span> (!<span class="keyword">new</span> || new-&gt;logical_mode == KVM_APIC_MODE_MAP_DISABLED)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        kvm_set_apicv_inhibit(kvm, APICV_INHIBIT_REASON_LOGICAL_ID_ALIASED);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        kvm_clear_apicv_inhibit(kvm, APICV_INHIBIT_REASON_LOGICAL_ID_ALIASED);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">if</span> (xapic_id_mismatch)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        kvm_set_apicv_inhibit(kvm, APICV_INHIBIT_REASON_APIC_ID_MODIFIED);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        kvm_clear_apicv_inhibit(kvm, APICV_INHIBIT_REASON_APIC_ID_MODIFIED);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    old = rcu_dereference_protected(kvm-&gt;arch.apic_map,</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            lockdep_is_held(&amp;kvm-&gt;arch.apic_map_lock));</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    rcu_assign_pointer(kvm-&gt;arch.apic_map, <span class="keyword">new</span>);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">     * Write kvm-&gt;arch.apic_map before clearing apic-&gt;apic_map_dirty.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">     * If another update has come in, leave it DIRTY.</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    atomic_cmpxchg_release(&amp;kvm-&gt;arch.apic_map_dirty,</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                   <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4ac2b52587c19144a2fdd6253248a08414">UPDATE_IN_PROGRESS</a>, <a class="code" href="lapic_8c.html#aaf8fd5f0e57d456151c951e0f3715fc4a66c5c37af65c297c098d96df666bf6da">CLEAN</a>);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    mutex_unlock(&amp;kvm-&gt;arch.apic_map_lock);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">if</span> (old)</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        call_rcu(&amp;old-&gt;rcu, <a class="code" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44">kvm_apic_map_free</a>);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <a class="code" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d">kvm_make_scan_ioapic_request</a>(kvm);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;}</div>
<div class="ttc" id="airq_8h_html_a96951e3a1bfa402d8bee67713e267b39"><div class="ttname"><a href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39">irqchip_in_kernel</a></div><div class="ttdeci">static int irqchip_in_kernel(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="irq_8h_source.html#l00090">irq.h:90</a></div></div>
<div class="ttc" id="alapic_8c_html_a43e03cb9e082150ad2bda64ee2761a44"><div class="ttname"><a href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44">kvm_recalculate_phys_map</a></div><div class="ttdeci">static int kvm_recalculate_phys_map(struct kvm_apic_map *new, struct kvm_vcpu *vcpu, bool *xapic_id_mismatch)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00218">lapic.c:218</a></div></div>
<div class="ttc" id="alapic_8c_html_a84c432a3d433d6afbd54bff4e5806d49"><div class="ttname"><a href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49">kvm_recalculate_logical_map</a></div><div class="ttdeci">static void kvm_recalculate_logical_map(struct kvm_apic_map *new, struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00294">lapic.c:294</a></div></div>
<div class="ttc" id="alapic_8c_html_adb9d56c06c989c570d48eaad39212e44"><div class="ttname"><a href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44">kvm_apic_map_free</a></div><div class="ttdeci">static void kvm_apic_map_free(struct rcu_head *rcu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00211">lapic.c:211</a></div></div>
<div class="ttc" id="ax86_8c_html_a3e31b97e32a42bf14848541e9e71688d"><div class="ttname"><a href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d">kvm_make_scan_ioapic_request</a></div><div class="ttdeci">void kvm_make_scan_ioapic_request(struct kvm *kvm)</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l10520">x86.c:10520</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a756b707dd502680db2eed7759defde40_cgraph.png" border="0" usemap="#alapic_8c_a756b707dd502680db2eed7759defde40_cgraph" alt=""/></div>
<map name="alapic_8c_a756b707dd502680db2eed7759defde40_cgraph" id="alapic_8c_a756b707dd502680db2eed7759defde40_cgraph">
<area shape="rect" title=" " alt="" coords="5,165,205,192"/>
<area shape="rect" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39" title=" " alt="" coords="295,5,427,32"/>
<area shape="rect" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44" title=" " alt="" coords="284,56,439,83"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="291,107,432,133"/>
<area shape="rect" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d" title=" " alt="" coords="273,158,450,199"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="253,376,469,403"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="575,224,695,251"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="259,275,463,301"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="549,60,720,87"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="575,111,694,137"/>
<area shape="rect" href="kvm__main_8c.html#abaa3f5ff00150487b52dd21c1617bab6" title=" " alt="" coords="529,165,740,192"/>
<area shape="rect" href="kvm__main_8c.html#ac46e1a0e43c0784194a451a7e7394c02" title=" " alt="" coords="800,158,1011,199"/>
<area shape="rect" href="kvm__main_8c.html#a56fa7dccf37545a9046522ded0354c7e" title=" " alt="" coords="1069,140,1236,167"/>
<area shape="rect" href="kvm__main_8c.html#a90667c5619416298aea980ad51ec8525" title=" " alt="" coords="1059,191,1247,217"/>
<area shape="rect" href="kvm__main_8c.html#a7682302871243c20a5dd16214655db15" title=" " alt="" coords="1343,140,1422,167"/>
<area shape="rect" href="kvm__main_8c.html#a9316cc70360fb39d920d5c76a2e41f35" title=" " alt="" coords="1295,241,1471,268"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1306,191,1459,217"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="563,325,706,352"/>
<area shape="rect" href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f" title=" " alt="" coords="539,477,731,504"/>
<area shape="rect" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3" title=" " alt="" coords="517,528,752,555"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="550,376,719,403"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="562,427,707,453"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="826,427,985,453"/>
<area shape="rect" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096" title=" " alt="" coords="579,275,691,301"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a756b707dd502680db2eed7759defde40_icgraph.png" border="0" usemap="#alapic_8c_a756b707dd502680db2eed7759defde40_icgraph" alt=""/></div>
<map name="alapic_8c_a756b707dd502680db2eed7759defde40_icgraph" id="alapic_8c_a756b707dd502680db2eed7759defde40_icgraph">
<area shape="rect" title=" " alt="" coords="1589,384,1789,411"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1387,409,1539,436"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1384,563,1541,589"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1398,256,1527,283"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="1163,352,1314,379"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1163,403,1314,445"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="431,309,590,336"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,205,129,232"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1171,613,1306,640"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1141,668,1336,695"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1158,512,1319,539"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1167,563,1310,589"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="923,665,1075,706"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="910,731,1089,757"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="929,613,1069,640"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="678,723,837,765"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="905,512,1093,539"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="424,461,597,488"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="691,512,824,539"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="412,512,609,539"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="183,461,358,488"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="27,411,108,437"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="13,461,122,488"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="12,512,123,539"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="924,563,1075,589"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1174,183,1303,209"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="906,107,1093,133"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="913,208,1085,235"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="914,157,1085,184"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,162,350,203"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,108,364,135"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="710,5,805,32"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="689,56,826,83"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="470,56,551,83"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="657,208,857,235"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="918,309,1081,336"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="708,259,807,285"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="704,309,811,336"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,233,350,274"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="467,208,554,235"/>
</map>
</div>

</div>
</div>
<a id="a84c432a3d433d6afbd54bff4e5806d49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84c432a3d433d6afbd54bff4e5806d49">&#9670;&nbsp;</a></span>kvm_recalculate_logical_map()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kvm_recalculate_logical_map </td>
          <td>(</td>
          <td class="paramtype">struct kvm_apic_map *&#160;</td>
          <td class="paramname"><em>new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00294">294</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;{</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keyword">enum</span> kvm_apic_logical_mode logical_mode;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> **cluster;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    u16 mask;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    u32 ldr;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">if</span> (new-&gt;logical_mode == KVM_APIC_MODE_MAP_DISABLED)</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f">kvm_apic_sw_enabled</a>(apic))</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    ldr = <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_LDR);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">if</span> (!ldr)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic)) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        logical_mode = KVM_APIC_MODE_X2APIC;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        ldr = GET_APIC_LOGICAL_ID(ldr);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_DFR) == APIC_DFR_FLAT)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            logical_mode = KVM_APIC_MODE_XAPIC_FLAT;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            logical_mode = KVM_APIC_MODE_XAPIC_CLUSTER;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">     * To optimize logical mode delivery, all software-enabled APICs must</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">     * be configured for the same mode.</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">if</span> (new-&gt;logical_mode == KVM_APIC_MODE_SW_DISABLED) {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keyword">new</span>-&gt;logical_mode = logical_mode;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (new-&gt;logical_mode != logical_mode) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keyword">new</span>-&gt;logical_mode = KVM_APIC_MODE_MAP_DISABLED;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">     * In x2APIC mode, the LDR is read-only and derived directly from the</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">     * x2APIC ID, thus is guaranteed to be addressable.  KVM reuses</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">     * kvm_apic_map.phys_map to optimize logical mode x2APIC interrupts by</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">     * reversing the LDR calculation to get cluster of APICs, i.e. no</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">     * additional work is required.</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic)) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        WARN_ON_ONCE(ldr != <a class="code" href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f">kvm_apic_calc_x2apic_ldr</a>(<a class="code" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718">kvm_x2apic_id</a>(apic)));</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">if</span> (WARN_ON_ONCE(!<a class="code" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3">kvm_apic_map_get_logical_dest</a>(<span class="keyword">new</span>, ldr,</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                            &amp;cluster, &amp;mask))) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keyword">new</span>-&gt;logical_mode = KVM_APIC_MODE_MAP_DISABLED;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span> (!mask)</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    ldr = ffs(mask) - 1;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span> (!is_power_of_2(mask) || cluster[ldr])</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keyword">new</span>-&gt;logical_mode = KVM_APIC_MODE_MAP_DISABLED;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        cluster[ldr] = apic;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a84c432a3d433d6afbd54bff4e5806d49_cgraph.png" border="0" usemap="#alapic_8c_a84c432a3d433d6afbd54bff4e5806d49_cgraph" alt=""/></div>
<map name="alapic_8c_a84c432a3d433d6afbd54bff4e5806d49_cgraph" id="alapic_8c_a84c432a3d433d6afbd54bff4e5806d49_cgraph">
<area shape="rect" title=" " alt="" coords="5,132,221,159"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="315,5,458,32"/>
<area shape="rect" href="lapic_8c.html#a8447cf7bc387797722507fa915cf735f" title=" " alt="" coords="291,56,483,83"/>
<area shape="rect" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3" title=" " alt="" coords="269,107,504,133"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="302,157,471,184"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="314,208,459,235"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="327,259,447,285"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="552,208,711,235"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a84c432a3d433d6afbd54bff4e5806d49_icgraph.png" border="0" usemap="#alapic_8c_a84c432a3d433d6afbd54bff4e5806d49_icgraph" alt=""/></div>
<map name="alapic_8c_a84c432a3d433d6afbd54bff4e5806d49_icgraph" id="alapic_8c_a84c432a3d433d6afbd54bff4e5806d49_icgraph">
<area shape="rect" title=" " alt="" coords="1837,384,2053,411"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="1589,384,1789,411"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1387,409,1539,436"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1384,563,1541,589"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1398,256,1527,283"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="1163,352,1314,379"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1163,403,1314,445"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="431,309,590,336"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,205,129,232"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1171,613,1306,640"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1141,668,1336,695"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1158,512,1319,539"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1167,563,1310,589"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="923,665,1075,706"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="910,731,1089,757"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="929,613,1069,640"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="678,723,837,765"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="905,512,1093,539"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="424,461,597,488"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="691,512,824,539"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="412,512,609,539"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="183,461,358,488"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="27,411,108,437"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="13,461,122,488"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="12,512,123,539"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="924,563,1075,589"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1174,183,1303,209"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="906,107,1093,133"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="913,208,1085,235"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="914,157,1085,184"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,162,350,203"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,108,364,135"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="710,5,805,32"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="689,56,826,83"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="470,56,551,83"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="657,208,857,235"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="918,309,1081,336"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="708,259,807,285"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="704,309,811,336"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,233,350,274"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="467,208,554,235"/>
</map>
</div>

</div>
</div>
<a id="a43e03cb9e082150ad2bda64ee2761a44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43e03cb9e082150ad2bda64ee2761a44">&#9670;&nbsp;</a></span>kvm_recalculate_phys_map()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kvm_recalculate_phys_map </td>
          <td>(</td>
          <td class="paramtype">struct kvm_apic_map *&#160;</td>
          <td class="paramname"><em>new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>xapic_id_mismatch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00218">218</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;{</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    u32 x2apic_id = <a class="code" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718">kvm_x2apic_id</a>(apic);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    u32 xapic_id = <a class="code" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096">kvm_xapic_id</a>(apic);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    u32 physical_id;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">     * For simplicity, KVM always allocates enough space for all possible</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">     * xAPIC IDs.  Yell, but don&#39;t kill the VM, as KVM can continue on</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">     * without the optimized map.</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span> (WARN_ON_ONCE(xapic_id &gt; new-&gt;max_apic_id))</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">     * Bail if a vCPU was added and/or enabled its APIC between allocating</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">     * the map and doing the actual calculations for the map.  Note, KVM</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">     * hardcodes the x2APIC ID to vcpu_id, i.e. there&#39;s no TOCTOU bug if</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">     * the compiler decides to reload x2apic_id after this check.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">if</span> (x2apic_id &gt; new-&gt;max_apic_id)</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keywordflow">return</span> -E2BIG;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">     * Deliberately truncate the vCPU ID when detecting a mismatched APIC</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">     * ID to avoid false positives if the vCPU ID, i.e. x2APIC ID, is a</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">     * 32-bit value.  Any unwanted aliasing due to truncation results will</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">     * be detected below.</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic) &amp;&amp; xapic_id != (u8)<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_id)</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        *xapic_id_mismatch = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">     * Apply KVM&#39;s hotplug hack if userspace has enable 32-bit APIC IDs.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">     * Allow sending events to vCPUs by their x2APIC ID even if the target</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">     * vCPU is in legacy xAPIC mode, and silently ignore aliased xAPIC IDs</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">     * (the x2APIC ID is truncated to 8 bits, causing IDs &gt; 0xff to wrap</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">     * and collide).</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">     * Honor the architectural (and KVM&#39;s non-optimized) behavior if</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">     * userspace has not enabled 32-bit x2APIC IDs.  Each APIC is supposed</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">     * to process messages independently.  If multiple vCPUs have the same</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">     * effective APIC ID, e.g. due to the x2APIC wrap or because the guest</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">     * manually modified its xAPIC IDs, events targeting that ID are</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">     * supposed to be recognized by all vCPUs with said ID.</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;kvm-&gt;arch.x2apic_format) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="comment">/* See also kvm_apic_match_physical_addr(). */</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic) || x2apic_id &gt; 0xff)</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="keyword">new</span>-&gt;phys_map[x2apic_id] = apic;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic) &amp;&amp; !new-&gt;phys_map[xapic_id])</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="keyword">new</span>-&gt;phys_map[xapic_id] = apic;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">         * Disable the optimized map if the physical APIC ID is already</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">         * mapped, i.e. is aliased to multiple vCPUs.  The optimized</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">         * map requires a strict 1:1 mapping between IDs and vCPUs.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic))</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            physical_id = x2apic_id;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            physical_id = xapic_id;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">if</span> (new-&gt;phys_map[physical_id])</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keyword">new</span>-&gt;phys_map[physical_id] = apic;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a43e03cb9e082150ad2bda64ee2761a44_cgraph.png" border="0" usemap="#alapic_8c_a43e03cb9e082150ad2bda64ee2761a44_cgraph" alt=""/></div>
<map name="alapic_8c_a43e03cb9e082150ad2bda64ee2761a44_cgraph" id="alapic_8c_a43e03cb9e082150ad2bda64ee2761a44_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,209,83"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="257,5,400,32"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="269,56,389,83"/>
<area shape="rect" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096" title=" " alt="" coords="273,107,385,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a43e03cb9e082150ad2bda64ee2761a44_icgraph.png" border="0" usemap="#alapic_8c_a43e03cb9e082150ad2bda64ee2761a44_icgraph" alt=""/></div>
<map name="alapic_8c_a43e03cb9e082150ad2bda64ee2761a44_icgraph" id="alapic_8c_a43e03cb9e082150ad2bda64ee2761a44_icgraph">
<area shape="rect" title=" " alt="" coords="1837,384,2041,411"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="1589,384,1789,411"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1387,409,1539,436"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1384,563,1541,589"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1398,256,1527,283"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="1163,352,1314,379"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1163,403,1314,445"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="431,309,590,336"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,205,129,232"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1171,613,1306,640"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1141,668,1336,695"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1158,512,1319,539"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1167,563,1310,589"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="923,665,1075,706"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="910,731,1089,757"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="929,613,1069,640"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="678,723,837,765"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="905,512,1093,539"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="424,461,597,488"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="691,512,824,539"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="412,512,609,539"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="183,461,358,488"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="27,411,108,437"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="13,461,122,488"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="12,512,123,539"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="924,563,1075,589"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1174,183,1303,209"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="906,107,1093,133"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="913,208,1085,235"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="914,157,1085,184"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,162,350,203"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,108,364,135"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="710,5,805,32"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="689,56,826,83"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="470,56,551,83"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="657,208,857,235"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="918,309,1081,336"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="708,259,807,285"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="704,309,811,336"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="191,233,350,274"/>
<area shape="rect" href="x86_8c.html#ade4b46f56f9ee72375fa967f97e62b56" title=" " alt="" coords="467,208,554,235"/>
</map>
</div>

</div>
</div>
<a id="a44881cc17bdbe632a483e8c7c1dd0dfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44881cc17bdbe632a483e8c7c1dd0dfb">&#9670;&nbsp;</a></span>kvm_set_lapic_tscdeadline_msr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_set_lapic_tscdeadline_msr </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02504">2504</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;{</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160; </div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4">kvm_apic_present</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>) || !<a class="code" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0">apic_lvtt_tscdeadline</a>(apic))</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160; </div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    hrtimer_cancel(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">timer</a>);</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#acb4ad6bfe6c14982d0a87f4678e92d09">tscdeadline</a> = data;</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    <a class="code" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3">start_apic_timer</a>(apic);</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a44881cc17bdbe632a483e8c7c1dd0dfb_cgraph.png" border="0" usemap="#alapic_8c_a44881cc17bdbe632a483e8c7c1dd0dfb_cgraph" alt=""/></div>
<map name="alapic_8c_a44881cc17bdbe632a483e8c7c1dd0dfb_cgraph" id="alapic_8c_a44881cc17bdbe632a483e8c7c1dd0dfb_cgraph">
<area shape="rect" title=" " alt="" coords="5,124,236,151"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="1693,267,1853,293"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="1927,5,2068,32"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="284,343,412,369"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="2377,200,2548,227"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="2163,81,2282,108"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="460,499,603,525"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="1704,645,1841,672"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="1266,713,1393,740"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="651,499,792,525"/>
<area shape="rect" href="lapic_8c.html#a0efcb9037756de47e9d28f0a5ea1009f" title=" " alt="" coords="840,932,1001,959"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="1070,409,1187,436"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="861,499,980,525"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="1256,460,1403,487"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="1265,359,1394,385"/>
<area shape="rect" href="lapic_8c.html#a2400290b895608d302ecce4ee352ee25" title=" " alt="" coords="1456,73,1632,100"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="1451,561,1637,588"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="1451,343,1637,385"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="2161,504,2284,531"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="1457,511,1631,537"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="1457,175,1631,217"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="1697,595,1848,621"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="1701,529,1844,570"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="1707,827,1839,853"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="1937,772,2057,799"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="1938,827,2057,853"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="2175,827,2271,853"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="1685,376,1860,403"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1929,343,2066,369"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="1920,394,2075,435"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1925,577,2070,604"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1925,673,2069,700"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="2169,352,2277,379"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="2158,403,2287,429"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="2159,453,2286,480"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="2160,251,2285,277"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="2135,301,2311,328"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="2359,529,2567,556"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="2386,479,2539,505"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="2143,577,2302,604"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="2143,673,2302,700"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="1693,107,1852,149"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="1929,157,2066,184"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="1917,56,2078,83"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="1908,107,2087,133"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="1066,460,1191,487"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="1049,511,1208,537"/>
<area shape="rect" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede" title=" " alt="" coords="1453,765,1635,806"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="1052,765,1205,806"/>
<area shape="rect" href="lapic_8c.html#ab9f4c987f5a9d71b966ec05058380bb4" title=" " alt="" coords="1079,932,1178,959"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a44881cc17bdbe632a483e8c7c1dd0dfb_icgraph.png" border="0" usemap="#alapic_8c_a44881cc17bdbe632a483e8c7c1dd0dfb_icgraph" alt=""/></div>
<map name="alapic_8c_a44881cc17bdbe632a483e8c7c1dd0dfb_icgraph" id="alapic_8c_a44881cc17bdbe632a483e8c7c1dd0dfb_icgraph">
<area shape="rect" title=" " alt="" coords="851,85,1081,112"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="638,37,793,78"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="628,115,803,141"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="425,23,580,65"/>
<area shape="rect" href="svm_8c.html#a82c8447e70f06dd52623c696446104b5" title=" " alt="" coords="171,5,377,32"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="171,56,377,83"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="6,5,122,32"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="5,56,123,83"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="462,89,543,116"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="448,140,557,167"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="447,191,558,217"/>
</map>
</div>

</div>
</div>
<a id="af4c60ea967a94401d14b834ac3e6a679"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4c60ea967a94401d14b834ac3e6a679">&#9670;&nbsp;</a></span>kvm_use_posted_timer_interrupt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool kvm_use_posted_timer_interrupt </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00161">161</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;{</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9">kvm_can_post_timer_interrupt</a>(vcpu) &amp;&amp; vcpu-&gt;mode == IN_GUEST_MODE;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_af4c60ea967a94401d14b834ac3e6a679_cgraph.png" border="0" usemap="#alapic_8c_af4c60ea967a94401d14b834ac3e6a679_cgraph" alt=""/></div>
<map name="alapic_8c_af4c60ea967a94401d14b834ac3e6a679_cgraph" id="alapic_8c_af4c60ea967a94401d14b834ac3e6a679_cgraph">
<area shape="rect" title=" " alt="" coords="5,49,180,90"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="228,49,387,90"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="455,5,593,32"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="443,56,605,83"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="435,107,613,133"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="661,107,780,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_af4c60ea967a94401d14b834ac3e6a679_icgraph.png" border="0" usemap="#alapic_8c_af4c60ea967a94401d14b834ac3e6a679_icgraph" alt=""/></div>
<map name="alapic_8c_af4c60ea967a94401d14b834ac3e6a679_icgraph" id="alapic_8c_af4c60ea967a94401d14b834ac3e6a679_icgraph">
<area shape="rect" title=" " alt="" coords="2233,355,2408,397"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="2039,363,2185,389"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1243,235,1411,277"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="1666,337,1783,364"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="1849,388,1974,415"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="1832,439,1991,465"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="985,51,1195,93"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="727,7,917,33"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="719,59,925,85"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="487,5,635,32"/>
<area shape="rect" href="vmx_8c.html#a6ee5de3518ff2c2c20b1c1a0e17b2f1e" title=" " alt="" coords="255,5,389,32"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="503,59,620,85"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1467,352,1609,379"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1255,352,1398,379"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="743,240,901,267"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1245,403,1408,445"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1247,469,1406,510"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1014,411,1166,437"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1026,352,1154,379"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="747,410,897,451"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="482,433,641,460"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="707,352,937,379"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="494,113,629,140"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="464,164,659,191"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="481,215,642,241"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="490,265,633,292"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="246,158,398,199"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="233,56,411,83"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="252,107,392,133"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="13,49,172,90"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="228,224,416,251"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="235,275,409,301"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="26,224,159,251"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="5,325,180,352"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="247,325,397,352"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="484,317,639,358"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1011,484,1169,511"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="765,484,879,511"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="778,625,866,652"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="522,484,601,511"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="475,783,647,809"/>
<area shape="rect" href="x86_8c.html#a8103751d0c861cfc0c6d0fed892e2454" title=" " alt="" coords="482,834,641,875"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="482,586,641,627"/>
<area shape="rect" href="x86_8c.html#a3de7a07b3d9ed3ee68dbdfb0c53dc5d0" title=" " alt="" coords="482,651,641,693"/>
<area shape="rect" href="x86_8c.html#ac6ebab4c3448cdbc79dbcac73e94503b" title=" " alt="" coords="482,717,641,758"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="468,535,655,561"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1043,535,1137,561"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="781,535,863,561"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="1665,413,1784,440"/>
<area shape="rect" href="lapic_8c.html#aee4a3e5ae4ed211edf4e463ebacadaa5" title=" " alt="" coords="1459,474,1617,515"/>
</map>
</div>

</div>
</div>
<a id="ac9fecb7d9f4574931650af9abb4b9f4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9fecb7d9f4574931650af9abb4b9f4c">&#9670;&nbsp;</a></span>kvm_vector_to_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_vector_to_index </td>
          <td>(</td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>vector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>dest_vcpus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned long *&#160;</td>
          <td class="paramname"><em>bitmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>bitmap_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01092">1092</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;{</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    u32 mod;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="keywordtype">int</span> i, idx = -1;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    mod = vector % dest_vcpus;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160; </div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt;= mod; i++) {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        idx = find_next_bit(bitmap, bitmap_size, idx + 1);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        BUG_ON(idx == bitmap_size);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    }</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160; </div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keywordflow">return</span> idx;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ac9fecb7d9f4574931650af9abb4b9f4c_icgraph.png" border="0" usemap="#alapic_8c_ac9fecb7d9f4574931650af9abb4b9f4c_icgraph" alt=""/></div>
<map name="alapic_8c_ac9fecb7d9f4574931650af9abb4b9f4c_icgraph" id="alapic_8c_ac9fecb7d9f4574931650af9abb4b9f4c_icgraph">
<area shape="rect" title=" " alt="" coords="2064,516,2227,543"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="1832,538,2016,579"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1388,455,1577,481"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="1625,506,1784,547"/>
<area shape="rect" href="lapic_8c.html#a8620b1c89f8cf017f7827024fc95ac92" title=" " alt="" coords="1633,571,1777,613"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="1627,658,1782,699"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="919,107,1077,133"/>
<area shape="rect" href="ioapic_8c.html#a9e41d37256b6c8c3c80df1a752d66fbe" title=" " alt="" coords="676,81,823,108"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="1391,579,1574,605"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="1179,627,1311,653"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="1169,576,1320,603"/>
<area shape="rect" href="avic_8c.html#a3a8b145ddec7a3dc1367a4e4e0df397e" title=" " alt="" coords="923,639,1073,665"/>
<area shape="rect" href="irq__comm_8c.html#ae7b7837b6e17bc60af3f4d81e9a4147e" title=" " alt="" coords="897,795,1099,821"/>
<area shape="rect" href="xen_8c.html#a7ba53f4f869b74569192380f1adfd40c" title=" " alt="" coords="1401,678,1564,719"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="1187,208,1302,235"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="1171,460,1318,487"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="1164,521,1325,548"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="1190,385,1299,412"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="1191,56,1298,83"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="942,259,1054,285"/>
<area shape="rect" href="ioapic_8c.html#a09513db197ec60a06bb3cb9d55113a92" title=" " alt="" coords="895,157,1101,184"/>
<area shape="rect" href="ioapic_8c.html#aa8c2de307d90885a123d3e5c77aa5a13" title=" " alt="" coords="895,208,1101,235"/>
<area shape="rect" href="ioapic_8c.html#ab22660734f544ecfd993267943773a58" title=" " alt="" coords="668,233,831,260"/>
<area shape="rect" href="ioapic_8c.html#a5caccc7254bf08d5ebb620dec0a9ddac" title=" " alt="" coords="675,284,823,311"/>
<area shape="rect" href="ioapic_8c.html#a477f1b98bf8d9dfcd1e51c743d79ac47" title=" " alt="" coords="453,233,577,260"/>
<area shape="rect" href="irq__comm_8c.html#ae12bd4085acdb92be18af95ac983d5a5" title=" " alt="" coords="441,284,589,311"/>
<area shape="rect" href="irq__comm_8c.html#aceb0f3f9718caf022b2ff6f982fee020" title=" " alt="" coords="205,309,377,336"/>
<area shape="rect" href="irqchip_8c.html#ab06caa34c3a7189a433815036dd3ebb3" title=" " alt="" coords="5,309,157,336"/>
<area shape="rect" href="ioapic_8c.html#a21c528e901ef596bba3f882ed5ac9597" title=" " alt="" coords="687,132,812,159"/>
<area shape="rect" href="x86_8c.html#a10224987f77e7370dd9f2b80352544ab" title=" " alt="" coords="440,132,589,159"/>
<area shape="rect" href="ioapic_8c.html#a902413d17a9a7262f3e9979bdb7b7209" title=" " alt="" coords="661,183,837,209"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="433,183,596,209"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="439,429,591,470"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="919,487,1077,513"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="916,537,1080,564"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="682,436,817,463"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="652,537,847,564"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="669,588,830,615"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="678,487,821,513"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="425,537,604,564"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="672,639,827,681"/>
<area shape="rect" href="x86_8c.html#abc413db5ba414fb0a89e7ffc1fb81e60" title=" " alt="" coords="909,588,1087,615"/>
<area shape="rect" href="irqchip_8c.html#a2440f4d2a02137c955ea1d22eeb13c8f" title=" " alt="" coords="901,385,1095,412"/>
<area shape="rect" href="hyperv_8c.html#a58a0b2f0d885a5c26d581cb31ddb44b2" title=" " alt="" coords="915,56,1081,83"/>
<area shape="rect" href="hyperv_8c.html#a65da04a05fd330933db375dd33f6cfee" title=" " alt="" coords="927,5,1069,32"/>
<area shape="rect" href="hyperv_8c.html#a3bfbf343eefc11963b210ba8322f6826" title=" " alt="" coords="681,5,818,32"/>
<area shape="rect" href="xen_8c.html#a0fb0356e88890003922daf35627420a8" title=" " alt="" coords="1153,678,1336,719"/>
<area shape="rect" href="xen_8c.html#a48738df3c98025631e2412d90758136c" title=" " alt="" coords="1149,744,1340,771"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="957,689,1039,716"/>
<area shape="rect" href="xen_8c.html#a59091fb436633f85ba3e28187f5794d0" title=" " alt="" coords="919,744,1077,771"/>
</map>
</div>

</div>
</div>
<a id="a94273a31a16c3d074d5722f22474bcbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94273a31a16c3d074d5722f22474bcbb">&#9670;&nbsp;</a></span>kvm_wait_lapic_expire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvm_wait_lapic_expire </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01869">1869</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;{</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(vcpu) &amp;&amp;</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;        vcpu-&gt;arch.apic-&gt;lapic_timer.expired_tscdeadline &amp;&amp;</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        vcpu-&gt;arch.apic-&gt;lapic_timer.timer_advance_ns &amp;&amp;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        <a class="code" href="lapic_8c.html#a4d28368a44947389f8a7afec1c3288d3">lapic_timer_int_injected</a>(vcpu))</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        <a class="code" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367">__kvm_wait_lapic_expire</a>(vcpu);</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a4d28368a44947389f8a7afec1c3288d3"><div class="ttname"><a href="lapic_8c.html#a4d28368a44947389f8a7afec1c3288d3">lapic_timer_int_injected</a></div><div class="ttdeci">static bool lapic_timer_int_injected(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01777">lapic.c:1777</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a94273a31a16c3d074d5722f22474bcbb_cgraph.png" border="0" usemap="#alapic_8c_a94273a31a16c3d074d5722f22474bcbb_cgraph" alt=""/></div>
<map name="alapic_8c_a94273a31a16c3d074d5722f22474bcbb_cgraph" id="alapic_8c_a94273a31a16c3d074d5722f22474bcbb_cgraph">
<area shape="rect" title=" " alt="" coords="5,132,177,159"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="225,73,412,100"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="259,132,378,159"/>
<area shape="rect" href="lapic_8c.html#a4d28368a44947389f8a7afec1c3288d3" title=" " alt="" coords="229,199,408,225"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="470,5,621,32"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="474,57,617,98"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="479,123,611,149"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="698,5,818,32"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="699,123,817,149"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="885,123,981,149"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="481,173,610,200"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="460,224,631,251"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="473,275,618,301"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="679,275,837,301"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a94273a31a16c3d074d5722f22474bcbb_icgraph.png" border="0" usemap="#alapic_8c_a94273a31a16c3d074d5722f22474bcbb_icgraph" alt=""/></div>
<map name="alapic_8c_a94273a31a16c3d074d5722f22474bcbb_icgraph" id="alapic_8c_a94273a31a16c3d074d5722f22474bcbb_icgraph">
<area shape="rect" title=" " alt="" coords="171,31,343,57"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="6,5,122,32"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="5,56,123,83"/>
</map>
</div>

</div>
</div>
<a id="adf2487dc76dace6e577b637cc357998b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf2487dc76dace6e577b637cc357998b">&#9670;&nbsp;</a></span>kvm_x2apic_icr_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_x2apic_icr_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03155">3155</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;{</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;    data &amp;= ~APIC_ICR_BUSY;</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160; </div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;    <a class="code" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728">kvm_apic_send_ipi</a>(apic, (u32)data, (u32)(data &gt;&gt; 32));</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;    <a class="code" href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2">kvm_lapic_set_reg64</a>(apic, APIC_ICR, data);</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;    <a class="code" href="trace_8h.html#a4be08c4209b1f0ad26b6f2180d143090">trace_kvm_apic_write</a>(APIC_ICR, data);</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_adf2487dc76dace6e577b637cc357998b_cgraph.png" border="0" usemap="#alapic_8c_adf2487dc76dace6e577b637cc357998b_cgraph" alt=""/></div>
<map name="alapic_8c_adf2487dc76dace6e577b637cc357998b_cgraph" id="alapic_8c_adf2487dc76dace6e577b637cc357998b_cgraph">
<area shape="rect" title=" " alt="" coords="5,636,169,663"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="224,611,371,638"/>
<area shape="rect" href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2" title=" " alt="" coords="217,662,377,688"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="1457,187,1599,214"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="425,611,615,638"/>
<area shape="rect" href="lapic_8c.html#a47d52843df792ef8e7bffdfb66a3b40b" title=" " alt="" coords="1184,415,1365,442"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="663,231,831,258"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="676,1038,817,1064"/>
<area shape="rect" href="lapic_8c.html#a3d272e1b73f22f797955e7ddea84b741" title=" " alt="" coords="926,919,1062,946"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1683,940,1853,967"/>
<area shape="rect" href="lapic_8c.html#a17eee4051fa1d41b805b09a195f64045" title=" " alt="" coords="669,853,824,894"/>
<area shape="rect" href="lapic_8h.html#adfbea71ac96b210fb91bef47c77194f1" title=" " alt="" coords="1178,466,1371,492"/>
<area shape="rect" href="x86_8c.html#a47d88660a2a5f8ee22df1253604d1ed7" title=" " alt="" coords="1196,517,1353,558"/>
<area shape="rect" href="lapic_8c.html#ac9fecb7d9f4574931650af9abb4b9f4c" title=" " alt="" coords="1193,751,1356,778"/>
<area shape="rect" href="lapic_8c.html#a870119cb74033f360164df90029af75a" title=" " alt="" coords="885,136,1103,163"/>
<area shape="rect" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6" title=" " alt="" coords="879,263,1109,290"/>
<area shape="rect" href="lapic_8c.html#a8fb87d02d911e49b5793e391702afe7e" title=" " alt="" coords="933,199,1055,226"/>
<area shape="rect" href="lapic_8c.html#a98bde25094c754b30e796357ba643ab0" title=" " alt="" coords="1197,212,1353,239"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1202,60,1347,87"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1449,60,1607,87"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="1215,314,1335,340"/>
<area shape="rect" href="lapic_8h.html#a4f07303d20a06eeb408d4985c5e15096" title=" " alt="" coords="1219,364,1331,391"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1683,1131,1853,1158"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="935,1038,1053,1064"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1206,936,1343,963"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1474,1106,1582,1132"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1463,852,1593,879"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1465,903,1591,930"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1465,954,1591,980"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1440,1004,1616,1031"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1446,1055,1610,1082"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1467,751,1589,778"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1664,726,1872,752"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1691,776,1845,803"/>
<area shape="rect" href="lapic_8c.html#aee815bad0e899bbf195750d2d9b5470f" title=" " alt="" coords="902,602,1086,644"/>
<area shape="rect" href="lapic_8c.html#a079d589509607a9d9baa6bed3eae7fa6" title=" " alt="" coords="1182,634,1367,676"/>
<area shape="rect" href="lapic_8c.html#abbce6da431ef5f15d85b5fc741d3ef72" title=" " alt="" coords="1170,583,1379,610"/>
<area shape="rect" href="lapic_8c.html#a2381239fbfde7c282aabdd2c01f50ad3" title=" " alt="" coords="1157,700,1392,727"/>
<area shape="rect" href="lapic_8c.html#a39839decdbbb9e8a6718f3ac7c0b3707" title=" " alt="" coords="433,662,607,688"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_adf2487dc76dace6e577b637cc357998b_icgraph.png" border="0" usemap="#alapic_8c_adf2487dc76dace6e577b637cc357998b_icgraph" alt=""/></div>
<map name="alapic_8c_adf2487dc76dace6e577b637cc357998b_icgraph" id="alapic_8c_adf2487dc76dace6e577b637cc357998b_icgraph">
<area shape="rect" title=" " alt="" coords="1365,155,1529,181"/>
<area shape="rect" href="x86_8c.html#aa034c812534431b2514d9ab68edddc71" title=" " alt="" coords="1143,57,1297,98"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1123,155,1317,181"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1139,256,1301,283"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="903,23,1058,65"/>
<area shape="rect" href="svm_8c.html#a82c8447e70f06dd52623c696446104b5" title=" " alt="" coords="632,5,839,32"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="632,56,839,83"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="427,5,543,32"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="427,56,544,83"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="905,89,1057,130"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="891,155,1070,181"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="911,205,1051,232"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="656,147,815,189"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="887,256,1075,283"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="399,307,572,333"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="669,256,802,283"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,256,584,283"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,281,339,308"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,231,101,257"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,281,115,308"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,332,116,359"/>
</map>
</div>

</div>
</div>
<a id="a8bdd67ff70db633e45cce412fb4c7718"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bdd67ff70db633e45cce412fb4c7718">&#9670;&nbsp;</a></span>kvm_x2apic_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u32 kvm_x2apic_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00143">143</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;{</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">return</span> apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_id;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a8bdd67ff70db633e45cce412fb4c7718_icgraph.png" border="0" usemap="#alapic_8c_a8bdd67ff70db633e45cce412fb4c7718_icgraph" alt=""/></div>
<map name="alapic_8c_a8bdd67ff70db633e45cce412fb4c7718_icgraph" id="alapic_8c_a8bdd67ff70db633e45cce412fb4c7718_icgraph">
<area shape="rect" title=" " alt="" coords="1883,683,2003,710"/>
<area shape="rect" href="lapic_8c.html#ae8c127c0d736bacbfa2cdc6b3fd5c2f6" title=" " alt="" coords="1604,541,1835,567"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="1140,734,1340,761"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="1611,759,1827,786"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="1617,658,1821,685"/>
<area shape="rect" href="lapic_8c.html#adb63e5a650d4571316b450d153a3105d" title=" " alt="" coords="1388,441,1556,467"/>
<area shape="rect" href="ioapic_8c.html#aca4e6c938829fb401b5c01cba3bd19b2" title=" " alt="" coords="1158,433,1322,475"/>
<area shape="rect" href="avic_8c.html#ad9345a779111a59de8fa4110106c3adf" title=" " alt="" coords="707,19,881,46"/>
<area shape="rect" href="ioapic_8c.html#a3ec3324d9c7d9168d100c79fc7c19b33" title=" " alt="" coords="1153,106,1327,133"/>
<area shape="rect" href="lapic_8c.html#a42846edfc8630e622bcde943f49559c4" title=" " alt="" coords="1161,329,1319,371"/>
<area shape="rect" href="irq__comm_8c.html#a6de5d9a13302fceb034b8d75b4c787e2" title=" " alt="" coords="1149,531,1331,558"/>
<area shape="rect" href="ioapic_8c.html#acaaa84ad163291aa716c59fa3bec3715" title=" " alt="" coords="1153,633,1327,659"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="1145,218,1335,245"/>
<area shape="rect" href="ioapic_8h.html#a049de3e03383dab21c2cb6c3033e66ae" title=" " alt="" coords="1149,582,1331,609"/>
<area shape="rect" href="ioapic_8c.html#a6a7d0d8b3a3717172c57ed1916318952" title=" " alt="" coords="929,400,1092,441"/>
<area shape="rect" href="ioapic_8c.html#a6c0258d75d3c40d5674a574997bdd453" title=" " alt="" coords="929,465,1092,507"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="718,623,870,650"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="486,616,637,657"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="243,673,401,699"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="246,341,398,383"/>
<area shape="rect" href="ioapic_8c.html#a8e44c406a4b3cb566af0df8557f0a55a" title=" " alt="" coords="738,121,850,147"/>
<area shape="rect" href="ioapic_8c.html#ac3a8acd4438c4c2163edbe2d634b7934" title=" " alt="" coords="715,273,873,299"/>
<area shape="rect" href="avic_8c.html#a24f70312b475fe0e0858ee3cc7e3af71" title=" " alt="" coords="945,531,1077,558"/>
<area shape="rect" href="posted__intr_8c.html#ac8a6413833d1c0eecbd77d4e6c7ab484" title=" " alt="" coords="935,582,1086,609"/>
<area shape="rect" href="x86_8c.html#a8aac590d2b896fcad86c5a2971164c1c" title=" " alt="" coords="943,633,1079,659"/>
<area shape="rect" href="ioapic_8c.html#a729aea83e23e9c12f8404c81ce790486" title=" " alt="" coords="953,247,1068,274"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="937,349,1084,375"/>
<area shape="rect" href="x86_8c.html#af5fc51c450176691c1b279340186ca98" title=" " alt="" coords="930,197,1091,223"/>
<area shape="rect" href="irq__comm_8c.html#affb5599a3efafc186b72e78e4b31e904" title=" " alt="" coords="956,95,1065,122"/>
<area shape="rect" href="hyperv_8c.html#a354f4e736dd1bb7561b7915cc96f2a0c" title=" " alt="" coords="957,146,1064,173"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="715,485,873,511"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="494,459,629,486"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="464,510,659,537"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="481,562,642,589"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="490,409,633,435"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="233,511,411,538"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="252,461,392,487"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="228,613,416,639"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="235,562,409,589"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="5,673,180,699"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="247,409,397,435"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="946,849,1075,875"/>
<area shape="rect" href="lapic_8h.html#a9d9f2a266299bc56c932735db94816d5" title=" " alt="" coords="935,785,1086,811"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="729,863,859,890"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="468,885,655,911"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="475,935,647,962"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="476,834,647,861"/>
<area shape="rect" href="x86_8c.html#ad6dd5b8847ecb92fe36f8dabdac40b08" title=" " alt="" coords="713,733,875,759"/>
<area shape="rect" href="x86_8c.html#ac766943d4a9d3c7a489012c02e25be54" title=" " alt="" coords="512,733,611,759"/>
<area shape="rect" href="x86_8c.html#a48bee74c7062ceb8db0b0fa3beebfbbc" title=" " alt="" coords="508,682,615,709"/>
</map>
</div>

</div>
</div>
<a id="a179cfc2268db31f40b5bd9b1c247a37b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a179cfc2268db31f40b5bd9b1c247a37b">&#9670;&nbsp;</a></span>kvm_x2apic_msr_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_x2apic_msr_read </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>msr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64 *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03210">3210</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;{</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;    u32 reg = (msr - APIC_BASE_MSR) &lt;&lt; 4;</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160; </div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>) || !<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic))</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160; </div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da">kvm_lapic_msr_read</a>(apic, reg, data);</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a179cfc2268db31f40b5bd9b1c247a37b_cgraph.png" border="0" usemap="#alapic_8c_a179cfc2268db31f40b5bd9b1c247a37b_cgraph" alt=""/></div>
<map name="alapic_8c_a179cfc2268db31f40b5bd9b1c247a37b_cgraph" id="alapic_8c_a179cfc2268db31f40b5bd9b1c247a37b_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,175,108"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="881,5,1024,32"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="223,81,380,108"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="242,132,361,159"/>
<area shape="rect" href="lapic_8c.html#a378a0961283ea67791303e70114fb10d" title=" " alt="" coords="428,161,589,188"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="432,81,585,108"/>
<area shape="rect" href="lapic_8c.html#aa06cb4ebbfa40dbfa494b3b4cd9f8833" title=" " alt="" coords="637,208,812,235"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="675,157,774,184"/>
<area shape="rect" href="lapic_8c.html#a4b4d880305f2ddba0ac9fdb398a7611a" title=" " alt="" coords="648,74,801,115"/>
<area shape="rect" href="lapic_8c.html#a5bf640da1dfc1be09d89fb23c7f2e954" title=" " alt="" coords="1108,259,1229,285"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1297,259,1443,285"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="873,107,1033,133"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="888,317,1017,344"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="884,157,1021,184"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1504,259,1663,285"/>
<area shape="rect" href="lapic_8c.html#a1bb0a1640f9f291f5c3154c6a2c40986" title=" " alt="" coords="1097,376,1240,403"/>
<area shape="rect" href="lapic_8c.html#ac1c99098894f4751a556057800e906e0" title=" " alt="" coords="1097,310,1240,351"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="1504,419,1663,445"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1298,368,1442,395"/>
<area shape="rect" href="lapic_8c.html#a656567b4197d9a5af833ffd04dff7a52" title=" " alt="" coords="1741,368,1890,395"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1504,368,1663,395"/>
<area shape="rect" href="lapic_8c.html#aebc526fc8720e4db45143f8e05f85c79" title=" " alt="" coords="1292,317,1448,344"/>
<area shape="rect" href="lapic_8c.html#a734e8a2b56a9a0b0d9117f20f2bb0fc1" title=" " alt="" coords="1523,317,1643,344"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="1093,157,1244,184"/>
<area shape="rect" href="kvm__cache__regs_8h.html#ad97ff6b975b461b815e6749d29c65446" title=" " alt="" coords="1315,157,1425,184"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a5d9eb0563cffb1e3ed1cccebabcf2df6" title=" " alt="" coords="1496,157,1671,184"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="1719,157,1912,184"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="860,56,1045,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a179cfc2268db31f40b5bd9b1c247a37b_icgraph.png" border="0" usemap="#alapic_8c_a179cfc2268db31f40b5bd9b1c247a37b_icgraph" alt=""/></div>
<map name="alapic_8c_a179cfc2268db31f40b5bd9b1c247a37b_icgraph" id="alapic_8c_a179cfc2268db31f40b5bd9b1c247a37b_icgraph">
<area shape="rect" title=" " alt="" coords="387,31,556,57"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="164,31,339,57"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="5,5,116,32"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="5,56,116,83"/>
</map>
</div>

</div>
</div>
<a id="a7d2f3f34c12c8c724fe739cbbc44ad43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d2f3f34c12c8c724fe739cbbc44ad43">&#9670;&nbsp;</a></span>kvm_x2apic_msr_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kvm_x2apic_msr_write </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>msr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l03199">3199</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;{</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;    u32 reg = (msr - APIC_BASE_MSR) &lt;&lt; 4;</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160; </div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4">lapic_in_kernel</a>(<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>) || !<a class="code" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea">apic_x2apic_mode</a>(apic))</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160; </div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079">kvm_lapic_msr_write</a>(apic, reg, data);</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a7d2f3f34c12c8c724fe739cbbc44ad43_cgraph.png" border="0" usemap="#alapic_8c_a7d2f3f34c12c8c724fe739cbbc44ad43_cgraph" alt=""/></div>
<map name="alapic_8c_a7d2f3f34c12c8c724fe739cbbc44ad43_cgraph" id="alapic_8c_a7d2f3f34c12c8c724fe739cbbc44ad43_cgraph">
<area shape="rect" title=" " alt="" coords="5,1456,179,1483"/>
<area shape="rect" href="lapic_8h.html#a07d3e1e4090a62753325dfa11d232cea" title=" " alt="" coords="1184,1203,1327,1229"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="227,1456,388,1483"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1408,1481,1527,1508"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="439,756,597,783"/>
<area shape="rect" href="lapic_8c.html#adf2487dc76dace6e577b637cc357998b" title=" " alt="" coords="436,1456,600,1483"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="935,579,1095,605"/>
<area shape="rect" href="lapic_8c.html#afefd171448cafa66f80ecb9b9659ebb1" title=" " alt="" coords="648,56,859,83"/>
<area shape="rect" href="lapic_8c.html#af5602fb092ac09abc6c2bf0ad789d726" title=" " alt="" coords="702,309,805,336"/>
<area shape="rect" href="lapic_8c.html#aeb32a868e76d57da9fab57fce43efdbe" title=" " alt="" coords="698,731,809,757"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="943,781,1087,808"/>
<area shape="rect" href="lapic_8c.html#a02bd03bf711be3200ea2316ced434ff1" title=" " alt="" coords="703,579,804,605"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="688,629,819,656"/>
<area shape="rect" href="lapic_8c.html#a8aa5f66b440e07d680f42fdaa211eac2" title=" " alt="" coords="945,680,1085,707"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1183,411,1328,437"/>
<area shape="rect" href="lapic_8c.html#aec07f4595f82e14e1075beb4730b6976" title=" " alt="" coords="698,933,809,960"/>
<area shape="rect" href="lapic_8c.html#a4b7f12cb3ba68245df79bc30d938b728" title=" " alt="" coords="680,1355,827,1381"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1171,1304,1340,1331"/>
<area shape="rect" href="lapic_8c.html#a54214770509be207a1c1271e8b48acf4" title=" " alt="" coords="685,984,822,1011"/>
<area shape="rect" href="lapic_8c.html#a2a5ccc92c8b75ad6118bdc1b84a43554" title=" " alt="" coords="685,781,821,808"/>
<area shape="rect" href="lapic_8c.html#ab24997de83c3fd44d1cd7520a615883e" title=" " alt="" coords="667,883,840,909"/>
<area shape="rect" href="lapic_8c.html#a36de6235abe5d5bd2fd57bf5739c1b5f" title=" " alt="" coords="661,1085,846,1112"/>
<area shape="rect" href="lapic_8c.html#a756b707dd502680db2eed7759defde40" title=" " alt="" coords="653,1035,853,1061"/>
<area shape="rect" href="lapic_8c.html#ab18679414f6ced1b8597fc3a9b445dea" title=" " alt="" coords="685,1253,822,1280"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="683,157,824,184"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="689,208,817,235"/>
<area shape="rect" href="lapic_8c.html#a946cf21407471f7a6ba449b2435055c3" title=" " alt="" coords="675,259,832,285"/>
<area shape="rect" href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4" title=" " alt="" coords="660,477,847,504"/>
<area shape="rect" href="lapic_8c.html#a063bf62e455f91f22cf2b81452698b0c" title=" " alt="" coords="940,5,1089,32"/>
<area shape="rect" href="lapic_8c.html#a76fc10b30ae9deff038c276c3f5a9843" title=" " alt="" coords="959,107,1070,133"/>
<area shape="rect" href="lapic_8c.html#a80d977ac48cfa76440f2961e38b23fd0" title=" " alt="" coords="1176,132,1335,159"/>
<area shape="rect" href="lapic_8c.html#a7cfae0ee851075e6141d0446f4a133ab" title=" " alt="" coords="950,461,1079,488"/>
<area shape="rect" href="hyperv_8h.html#a7ffceaf3950bd76a9a3a28ff1e836e58" title=" " alt="" coords="918,208,1111,235"/>
<area shape="rect" href="hyperv_8c.html#a47f5a157cae898f7a7b370854c3748a4" title=" " alt="" coords="925,259,1105,285"/>
<area shape="rect" href="lapic_8c.html#a5001020f0ca8d6d692c54dd23b40ade4" title=" " alt="" coords="933,309,1096,336"/>
<area shape="rect" href="xen_8h.html#ae436f94d060f3cb8029695c5a9fddc42" title=" " alt="" coords="917,731,1112,757"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1176,781,1335,808"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="938,513,1091,554"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="1191,680,1320,707"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1388,411,1547,437"/>
<area shape="rect" href="irq_8h.html#a50293a78b5c0b6715243dc7854bcb210" title=" " alt="" coords="920,1456,1109,1483"/>
<area shape="rect" href="lapic_8h.html#ae7e74fde3e4fb01f561634e789b5eab4" title=" " alt="" coords="1185,1456,1326,1483"/>
<area shape="rect" href="irq_8h.html#a96951e3a1bfa402d8bee67713e267b39" title=" " alt="" coords="949,933,1081,960"/>
<area shape="rect" href="lapic_8c.html#adb9d56c06c989c570d48eaad39212e44" title=" " alt="" coords="937,984,1092,1011"/>
<area shape="rect" href="x86_8c.html#a3e31b97e32a42bf14848541e9e71688d" title=" " alt="" coords="926,1035,1103,1077"/>
<area shape="rect" href="lapic_8c.html#a84c432a3d433d6afbd54bff4e5806d49" title=" " alt="" coords="907,1101,1123,1128"/>
<area shape="rect" href="lapic_8c.html#a8bdd67ff70db633e45cce412fb4c7718" title=" " alt="" coords="1195,883,1315,909"/>
<area shape="rect" href="lapic_8c.html#a43e03cb9e082150ad2bda64ee2761a44" title=" " alt="" coords="913,883,1117,909"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="939,1253,1090,1280"/>
<area shape="rect" href="lapic_8c.html#a8c69ed3d074907a7adcee84e8570ebb2" title=" " alt="" coords="673,1456,833,1483"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a7d2f3f34c12c8c724fe739cbbc44ad43_icgraph.png" border="0" usemap="#alapic_8c_a7d2f3f34c12c8c724fe739cbbc44ad43_icgraph" alt=""/></div>
<map name="alapic_8c_a7d2f3f34c12c8c724fe739cbbc44ad43_icgraph" id="alapic_8c_a7d2f3f34c12c8c724fe739cbbc44ad43_icgraph">
<area shape="rect" title=" " alt="" coords="387,56,560,83"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,56,339,83"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,5,101,32"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,56,115,83"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,107,116,133"/>
</map>
</div>

</div>
</div>
<a id="a86e81c4916d223c6f60d958af49c71dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86e81c4916d223c6f60d958af49c71dd">&#9670;&nbsp;</a></span>lapic_is_periodic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool lapic_is_periodic </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02747">2747</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;{</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667">apic_lvtt_period</a>(apic);</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a86e81c4916d223c6f60d958af49c71dd_cgraph.png" border="0" usemap="#alapic_8c_a86e81c4916d223c6f60d958af49c71dd_cgraph" alt=""/></div>
<map name="alapic_8c_a86e81c4916d223c6f60d958af49c71dd_cgraph" id="alapic_8c_a86e81c4916d223c6f60d958af49c71dd_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="184,5,311,32"/>
</map>
</div>

</div>
</div>
<a id="a4d28368a44947389f8a7afec1c3288d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d28368a44947389f8a7afec1c3288d3">&#9670;&nbsp;</a></span>lapic_timer_int_injected()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool lapic_timer_int_injected </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01777">1777</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;{</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__lapic.html">kvm_lapic</a> *apic = <a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.apic;</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    u32 reg = <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_LVTT);</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160; </div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4">kvm_apic_hw_enabled</a>(apic)) {</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        <span class="keywordtype">int</span> vec = reg &amp; APIC_VECTOR_MASK;</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        <span class="keywordtype">void</span> *bitmap = apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_ISR;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160; </div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        <span class="keywordflow">if</span> (apic-&gt;<a class="code" href="structkvm__lapic.html#a4642d7f446bbd9ede893aa1ebbcc9c1a">apicv_active</a>)</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;            bitmap = apic-&gt;<a class="code" href="structkvm__lapic.html#ae3a8009387d4fa77d8bc5ba244f7f6aa">regs</a> + APIC_IRR;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160; </div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8">apic_test_vector</a>(vec, bitmap))</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    }</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a4d28368a44947389f8a7afec1c3288d3_cgraph.png" border="0" usemap="#alapic_8c_a4d28368a44947389f8a7afec1c3288d3_cgraph" alt=""/></div>
<map name="alapic_8c_a4d28368a44947389f8a7afec1c3288d3_cgraph" id="alapic_8c_a4d28368a44947389f8a7afec1c3288d3_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,184,83"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="253,5,382,32"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="232,56,403,83"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="245,107,390,133"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="451,107,609,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a4d28368a44947389f8a7afec1c3288d3_icgraph.png" border="0" usemap="#alapic_8c_a4d28368a44947389f8a7afec1c3288d3_icgraph" alt=""/></div>
<map name="alapic_8c_a4d28368a44947389f8a7afec1c3288d3_icgraph" id="alapic_8c_a4d28368a44947389f8a7afec1c3288d3_icgraph">
<area shape="rect" title=" " alt="" coords="391,31,569,57"/>
<area shape="rect" href="lapic_8c.html#a94273a31a16c3d074d5722f22474bcbb" title=" " alt="" coords="171,31,343,57"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="6,5,122,32"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="5,56,123,83"/>
</map>
</div>

</div>
</div>
<a id="a985df23c29d6d25105aba975adf5582c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a985df23c29d6d25105aba975adf5582c">&#9670;&nbsp;</a></span>limit_periodic_timer_frequency()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void limit_periodic_timer_frequency </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01721">1721</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;{</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;<span class="comment">     * Do not allow the guest to program periodic timers with small</span></div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;<span class="comment">     * interval, since the hrtimers are not throttled by the host</span></div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;<span class="comment">     * scheduler.</span></div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667">apic_lvtt_period</a>(apic) &amp;&amp; apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a>) {</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;        s64 min_period = <a class="code" href="x86_8c.html#a8f21df7266cc84c2fc3559e1707f3bc9">min_timer_period_us</a> * 1000LL;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160; </div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        <span class="keywordflow">if</span> (apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a> &lt; min_period) {</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;            pr_info_ratelimited(</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;                <span class="stringliteral">&quot;vcpu %i: requested %lld ns &quot;</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;                <span class="stringliteral">&quot;lapic timer period limited to %lld ns\n&quot;</span>,</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;                apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_id,</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;                apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a>, min_period);</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;            apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a> = min_period;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;        }</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    }</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;}</div>
<div class="ttc" id="ax86_8c_html_a8f21df7266cc84c2fc3559e1707f3bc9"><div class="ttname"><a href="x86_8c.html#a8f21df7266cc84c2fc3559e1707f3bc9">min_timer_period_us</a></div><div class="ttdeci">unsigned int min_timer_period_us</div><div class="ttdef"><b>Definition:</b> <a href="x86_8c_source.html#l00154">x86.c:154</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a985df23c29d6d25105aba975adf5582c_cgraph.png" border="0" usemap="#alapic_8c_a985df23c29d6d25105aba975adf5582c_cgraph" alt=""/></div>
<map name="alapic_8c_a985df23c29d6d25105aba975adf5582c_cgraph" id="alapic_8c_a985df23c29d6d25105aba975adf5582c_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,159,47"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="207,13,333,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a985df23c29d6d25105aba975adf5582c_icgraph.png" border="0" usemap="#alapic_8c_a985df23c29d6d25105aba975adf5582c_icgraph" alt=""/></div>
<map name="alapic_8c_a985df23c29d6d25105aba975adf5582c_icgraph" id="alapic_8c_a985df23c29d6d25105aba975adf5582c_icgraph">
<area shape="rect" title=" " alt="" coords="2293,357,2447,399"/>
<area shape="rect" href="lapic_8c.html#ac7a03b55710bfcc78be7af0609f6f93d" title=" " alt="" coords="2099,314,2230,341"/>
<area shape="rect" href="lapic_8c.html#a0efcb9037756de47e9d28f0a5ea1009f" title=" " alt="" coords="2084,365,2245,391"/>
<area shape="rect" href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4" title=" " alt="" coords="1849,466,2036,493"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1649,314,1801,341"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1407,466,1565,493"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1878,243,2007,270"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1411,299,1561,340"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="656,194,815,221"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="423,93,547,119"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1155,474,1290,501"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1125,533,1320,559"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1142,642,1303,669"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1151,423,1294,450"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="905,475,1057,516"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="891,541,1070,567"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="911,591,1051,618"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="656,533,815,575"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="887,642,1075,669"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="399,693,572,719"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="669,642,802,669"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,642,584,669"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,642,339,669"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,591,101,618"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,642,115,669"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,693,116,719"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="905,423,1056,450"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1661,222,1790,249"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="1393,103,1579,130"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="1400,197,1572,223"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="1401,247,1571,274"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="656,5,815,47"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="642,93,829,119"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1175,103,1270,130"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="1154,154,1291,181"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="940,103,1021,130"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="1123,205,1323,231"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1871,365,2014,391"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1661,365,1789,391"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="1371,365,1601,391"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="1145,357,1300,399"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="903,357,1058,399"/>
<area shape="rect" href="svm_8c.html#a82c8447e70f06dd52623c696446104b5" title=" " alt="" coords="632,411,839,438"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="632,361,839,387"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="427,411,543,438"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="427,361,544,387"/>
</map>
</div>

</div>
</div>
<a id="a9f87e777fe7602fff9557bbfbd630791"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f87e777fe7602fff9557bbfbd630791">&#9670;&nbsp;</a></span>pv_eoi_enabled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool pv_eoi_enabled </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00897">897</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;{</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="keywordflow">return</span> vcpu-&gt;arch.pv_eoi.msr_val &amp; KVM_MSR_ENABLED;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a9f87e777fe7602fff9557bbfbd630791_icgraph.png" border="0" usemap="#alapic_8c_a9f87e777fe7602fff9557bbfbd630791_icgraph" alt=""/></div>
<map name="alapic_8c_a9f87e777fe7602fff9557bbfbd630791_icgraph" id="alapic_8c_a9f87e777fe7602fff9557bbfbd630791_icgraph">
<area shape="rect" title=" " alt="" coords="1185,46,1309,73"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="963,5,1137,47"/>
<area shape="rect" href="lapic_8c.html#ac56f15a70a1339e966c89b349b3f7850" title=" " alt="" coords="972,71,1128,112"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="739,8,903,49"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="541,46,679,73"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,46,493,73"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,46,364,73"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,46,129,73"/>
<area shape="rect" href="lapic_8c.html#a332060485ef249fcfd9edbf9cf80dd2b" title=" " alt="" coords="727,75,915,102"/>
</map>
</div>

</div>
</div>
<a id="a664d20f44962ff67555d95cdf987eb9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a664d20f44962ff67555d95cdf987eb9b">&#9670;&nbsp;</a></span>pv_eoi_get_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int pv_eoi_get_user </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00890">890</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;{</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="kvm__main_8c.html#aa1c62238734b7293ce70a2710a8f2b05">kvm_read_guest_cached</a>(vcpu-&gt;kvm, &amp;vcpu-&gt;arch.pv_eoi.data, val,</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                      <span class="keyword">sizeof</span>(*val));</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a664d20f44962ff67555d95cdf987eb9b_cgraph.png" border="0" usemap="#alapic_8c_a664d20f44962ff67555d95cdf987eb9b_cgraph" alt=""/></div>
<map name="alapic_8c_a664d20f44962ff67555d95cdf987eb9b_cgraph" id="alapic_8c_a664d20f44962ff67555d95cdf987eb9b_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,133,57"/>
<area shape="rect" href="kvm__main_8c.html#aa1c62238734b7293ce70a2710a8f2b05" title=" " alt="" coords="181,31,364,57"/>
<area shape="rect" href="kvm__main_8c.html#ae902cad56e0551f3e6bf26df088f1b84" title=" " alt="" coords="412,23,587,65"/>
<area shape="rect" href="kvm__main_8c.html#afb33e9a5cfe88ab45367ba7f6043666d" title=" " alt="" coords="635,5,852,32"/>
<area shape="rect" href="kvm__main_8c.html#a3cc887a9ecfdd6e9f5ab90dc2ce8de4a" title=" " alt="" coords="678,56,809,83"/>
<area shape="rect" href="kvm__main_8c.html#ae374ebe48072080788db56075dd9a762" title=" " alt="" coords="1375,5,1513,32"/>
<area shape="rect" href="kvm__main_8c.html#ab58025ccc253a102c64561fa61c2a514" title=" " alt="" coords="1588,5,1740,32"/>
<area shape="rect" href="kvm__main_8c.html#a77ec4b9140d69a05f3b4e7836cc03a96" title=" " alt="" coords="1788,31,1951,57"/>
<area shape="rect" href="kvm__main_8c.html#a2a95905782c4136bdf6d9861f937b0ef" title=" " alt="" coords="900,56,1069,83"/>
<area shape="rect" href="kvm__main_8c.html#a03aae88de564edba8a3a2d10bc5e7b20" title=" " alt="" coords="927,107,1042,133"/>
<area shape="rect" href="kvm__main_8c.html#acc4698e3f076cdbbd5d8ca788a94decf" title=" " alt="" coords="1117,56,1300,83"/>
<area shape="rect" href="kvm__main_8c.html#a7c20e0f654f0b4472c3833f0a563e11e" title=" " alt="" coords="1145,107,1273,133"/>
<area shape="rect" href="kvm__main_8c.html#adb8a0a4f675ca16ea81acd3b88089f13" title=" " alt="" coords="1348,56,1540,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a664d20f44962ff67555d95cdf987eb9b_icgraph.png" border="0" usemap="#alapic_8c_a664d20f44962ff67555d95cdf987eb9b_icgraph" alt=""/></div>
<map name="alapic_8c_a664d20f44962ff67555d95cdf987eb9b_icgraph" id="alapic_8c_a664d20f44962ff67555d95cdf987eb9b_icgraph">
<area shape="rect" title=" " alt="" coords="1360,13,1488,39"/>
<area shape="rect" href="lapic_8c.html#aa9449652b89a95fb90ca1b00dffac32d" title=" " alt="" coords="1161,5,1312,47"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="939,5,1113,47"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="727,5,891,47"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="541,13,679,39"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,13,493,39"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,13,364,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="a46a725e66a6b75af27a208acd463153a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46a725e66a6b75af27a208acd463153a">&#9670;&nbsp;</a></span>pv_eoi_put_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int pv_eoi_put_user </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00883">883</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;{</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="kvm__main_8c.html#abc966ec55b5101c293dabe1eb29e2b82">kvm_write_guest_cached</a>(vcpu-&gt;kvm, &amp;vcpu-&gt;arch.pv_eoi.data, &amp;val,</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                      <span class="keyword">sizeof</span>(val));</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a46a725e66a6b75af27a208acd463153a_cgraph.png" border="0" usemap="#alapic_8c_a46a725e66a6b75af27a208acd463153a_cgraph" alt=""/></div>
<map name="alapic_8c_a46a725e66a6b75af27a208acd463153a_cgraph" id="alapic_8c_a46a725e66a6b75af27a208acd463153a_cgraph">
<area shape="rect" title=" " alt="" coords="5,87,133,113"/>
<area shape="rect" href="kvm__main_8c.html#abc966ec55b5101c293dabe1eb29e2b82" title=" " alt="" coords="181,87,368,113"/>
<area shape="rect" href="kvm__main_8c.html#ace1d8e8c746cb64f9ce515fe8807db98" title=" " alt="" coords="416,79,595,121"/>
<area shape="rect" href="kvm__main_8c.html#afb33e9a5cfe88ab45367ba7f6043666d" title=" " alt="" coords="643,11,860,37"/>
<area shape="rect" href="kvm__main_8c.html#a1cf9d9c864cd7f9b5b32fc880c0872ab" title=" " alt="" coords="684,87,819,113"/>
<area shape="rect" href="kvm__main_8c.html#ae4806d9a69b751639c175cb98e468f15" title=" " alt="" coords="1364,140,1547,167"/>
<area shape="rect" href="kvm__main_8c.html#ae374ebe48072080788db56075dd9a762" title=" " alt="" coords="1612,5,1751,32"/>
<area shape="rect" href="kvm__main_8c.html#ab58025ccc253a102c64561fa61c2a514" title=" " alt="" coords="1836,5,1988,32"/>
<area shape="rect" href="kvm__main_8c.html#a77ec4b9140d69a05f3b4e7836cc03a96" title=" " alt="" coords="2056,5,2219,32"/>
<area shape="rect" href="kvm__main_8c.html#a49ed988e062d259a8706411f619bf1f7" title=" " alt="" coords="908,48,1081,75"/>
<area shape="rect" href="kvm__main_8c.html#a03aae88de564edba8a3a2d10bc5e7b20" title=" " alt="" coords="937,99,1052,125"/>
<area shape="rect" href="kvm__main_8c.html#a7079b0256c7572c701a6e1526f58fdac" title=" " alt="" coords="1129,48,1316,75"/>
<area shape="rect" href="kvm__main_8c.html#a7c20e0f654f0b4472c3833f0a563e11e" title=" " alt="" coords="1159,99,1287,125"/>
<area shape="rect" href="kvm__main_8c.html#a04c9651c5f9a0485fd1e7152bdb01353" title=" " alt="" coords="1376,48,1535,75"/>
<area shape="rect" href="dirty__ring_8c.html#ac1878b63f1f337e93cf186ebd4fffcc4" title=" " alt="" coords="1595,74,1767,115"/>
<area shape="rect" href="dirty__ring_8c.html#a81ebbf462440ed5392d6d3412a859ae7" title=" " alt="" coords="1602,140,1761,167"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="1595,191,1768,217"/>
<area shape="rect" href="dirty__ring_8c.html#ad6e626257c739b2ac3d397119a7cf798" title=" " alt="" coords="1816,89,2008,116"/>
<area shape="rect" href="dirty__ring_8c.html#a6fe5cd75b9bac6497e1ae7340f2a5f7b" title=" " alt="" coords="1838,140,1986,167"/>
<area shape="rect" href="dirty__ring_8c.html#a22c9a239acf3463a8599a21c0a756538" title=" " alt="" coords="1823,191,2001,217"/>
<area shape="rect" href="dirty__ring_8c.html#acd0a1e586324b4c49b429c7a392db73f" title=" " alt="" coords="2058,165,2217,192"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a46a725e66a6b75af27a208acd463153a_icgraph.png" border="0" usemap="#alapic_8c_a46a725e66a6b75af27a208acd463153a_icgraph" alt=""/></div>
<map name="alapic_8c_a46a725e66a6b75af27a208acd463153a_icgraph" id="alapic_8c_a46a725e66a6b75af27a208acd463153a_icgraph">
<area shape="rect" title=" " alt="" coords="1384,46,1512,73"/>
<area shape="rect" href="lapic_8c.html#a1ea4e066578d706e217136c8baf247b3" title=" " alt="" coords="1185,15,1336,42"/>
<area shape="rect" href="lapic_8c.html#aa9449652b89a95fb90ca1b00dffac32d" title=" " alt="" coords="1185,68,1336,109"/>
<area shape="rect" href="lapic_8c.html#ac56f15a70a1339e966c89b349b3f7850" title=" " alt="" coords="972,5,1128,47"/>
<area shape="rect" href="lapic_8c.html#a332060485ef249fcfd9edbf9cf80dd2b" title=" " alt="" coords="727,15,915,42"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="541,46,679,73"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,46,493,73"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,46,364,73"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,46,129,73"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="963,71,1137,112"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="739,68,903,109"/>
</map>
</div>

</div>
</div>
<a id="a1ea4e066578d706e217136c8baf247b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ea4e066578d706e217136c8baf247b3">&#9670;&nbsp;</a></span>pv_eoi_set_pending()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pv_eoi_set_pending </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00902">902</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;{</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#a46a725e66a6b75af27a208acd463153a">pv_eoi_put_user</a>(vcpu, KVM_PV_EOI_ENABLED) &lt; 0)</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160; </div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    __set_bit(KVM_APIC_PV_EOI_PENDING, &amp;vcpu-&gt;arch.apic_attention);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a46a725e66a6b75af27a208acd463153a"><div class="ttname"><a href="lapic_8c.html#a46a725e66a6b75af27a208acd463153a">pv_eoi_put_user</a></div><div class="ttdeci">static int pv_eoi_put_user(struct kvm_vcpu *vcpu, u8 val)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00883">lapic.c:883</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a1ea4e066578d706e217136c8baf247b3_cgraph.png" border="0" usemap="#alapic_8c_a1ea4e066578d706e217136c8baf247b3_cgraph" alt=""/></div>
<map name="alapic_8c_a1ea4e066578d706e217136c8baf247b3_cgraph" id="alapic_8c_a1ea4e066578d706e217136c8baf247b3_cgraph">
<area shape="rect" title=" " alt="" coords="5,87,156,113"/>
<area shape="rect" href="lapic_8c.html#a46a725e66a6b75af27a208acd463153a" title=" " alt="" coords="204,87,332,113"/>
<area shape="rect" href="kvm__main_8c.html#abc966ec55b5101c293dabe1eb29e2b82" title=" " alt="" coords="380,87,567,113"/>
<area shape="rect" href="kvm__main_8c.html#ace1d8e8c746cb64f9ce515fe8807db98" title=" " alt="" coords="615,79,793,121"/>
<area shape="rect" href="kvm__main_8c.html#afb33e9a5cfe88ab45367ba7f6043666d" title=" " alt="" coords="841,11,1059,37"/>
<area shape="rect" href="kvm__main_8c.html#a1cf9d9c864cd7f9b5b32fc880c0872ab" title=" " alt="" coords="883,87,1017,113"/>
<area shape="rect" href="kvm__main_8c.html#ae4806d9a69b751639c175cb98e468f15" title=" " alt="" coords="1563,140,1745,167"/>
<area shape="rect" href="kvm__main_8c.html#ae374ebe48072080788db56075dd9a762" title=" " alt="" coords="1811,5,1949,32"/>
<area shape="rect" href="kvm__main_8c.html#ab58025ccc253a102c64561fa61c2a514" title=" " alt="" coords="2035,5,2187,32"/>
<area shape="rect" href="kvm__main_8c.html#a77ec4b9140d69a05f3b4e7836cc03a96" title=" " alt="" coords="2255,5,2417,32"/>
<area shape="rect" href="kvm__main_8c.html#a49ed988e062d259a8706411f619bf1f7" title=" " alt="" coords="1107,48,1280,75"/>
<area shape="rect" href="kvm__main_8c.html#a03aae88de564edba8a3a2d10bc5e7b20" title=" " alt="" coords="1136,99,1251,125"/>
<area shape="rect" href="kvm__main_8c.html#a7079b0256c7572c701a6e1526f58fdac" title=" " alt="" coords="1328,48,1515,75"/>
<area shape="rect" href="kvm__main_8c.html#a7c20e0f654f0b4472c3833f0a563e11e" title=" " alt="" coords="1357,99,1485,125"/>
<area shape="rect" href="kvm__main_8c.html#a04c9651c5f9a0485fd1e7152bdb01353" title=" " alt="" coords="1575,48,1733,75"/>
<area shape="rect" href="dirty__ring_8c.html#ac1878b63f1f337e93cf186ebd4fffcc4" title=" " alt="" coords="1794,74,1966,115"/>
<area shape="rect" href="dirty__ring_8c.html#a81ebbf462440ed5392d6d3412a859ae7" title=" " alt="" coords="1801,140,1959,167"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="1793,191,1967,217"/>
<area shape="rect" href="dirty__ring_8c.html#ad6e626257c739b2ac3d397119a7cf798" title=" " alt="" coords="2015,89,2207,116"/>
<area shape="rect" href="dirty__ring_8c.html#a6fe5cd75b9bac6497e1ae7340f2a5f7b" title=" " alt="" coords="2037,140,2185,167"/>
<area shape="rect" href="dirty__ring_8c.html#a22c9a239acf3463a8599a21c0a756538" title=" " alt="" coords="2021,191,2200,217"/>
<area shape="rect" href="dirty__ring_8c.html#acd0a1e586324b4c49b429c7a392db73f" title=" " alt="" coords="2257,165,2415,192"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a1ea4e066578d706e217136c8baf247b3_icgraph.png" border="0" usemap="#alapic_8c_a1ea4e066578d706e217136c8baf247b3_icgraph" alt=""/></div>
<map name="alapic_8c_a1ea4e066578d706e217136c8baf247b3_icgraph" id="alapic_8c_a1ea4e066578d706e217136c8baf247b3_icgraph">
<area shape="rect" title=" " alt="" coords="1167,13,1317,39"/>
<area shape="rect" href="lapic_8c.html#ac56f15a70a1339e966c89b349b3f7850" title=" " alt="" coords="963,5,1119,47"/>
<area shape="rect" href="lapic_8c.html#a332060485ef249fcfd9edbf9cf80dd2b" title=" " alt="" coords="727,13,915,39"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="541,13,679,39"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,13,493,39"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,13,364,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="aa9449652b89a95fb90ca1b00dffac32d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9449652b89a95fb90ca1b00dffac32d">&#9670;&nbsp;</a></span>pv_eoi_test_and_clr_pending()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool pv_eoi_test_and_clr_pending </td>
          <td>(</td>
          <td class="paramtype">struct kvm_vcpu *&#160;</td>
          <td class="paramname"><em>vcpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00910">910</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;{</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    u8 val;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#a664d20f44962ff67555d95cdf987eb9b">pv_eoi_get_user</a>(vcpu, &amp;val) &lt; 0)</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160; </div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    val &amp;= KVM_PV_EOI_ENABLED;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordflow">if</span> (val &amp;&amp; <a class="code" href="lapic_8c.html#a46a725e66a6b75af27a208acd463153a">pv_eoi_put_user</a>(vcpu, KVM_PV_EOI_DISABLED) &lt; 0)</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160; </div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment">     * Clear pending bit in any case: it will be set again on vmentry.</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment">     * While this might not be ideal from performance point of view,</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="comment">     * this makes sure pv eoi is only enabled when we know it&#39;s safe.</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    __clear_bit(KVM_APIC_PV_EOI_PENDING, &amp;vcpu-&gt;arch.apic_attention);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160; </div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordflow">return</span> val;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a664d20f44962ff67555d95cdf987eb9b"><div class="ttname"><a href="lapic_8c.html#a664d20f44962ff67555d95cdf987eb9b">pv_eoi_get_user</a></div><div class="ttdeci">static int pv_eoi_get_user(struct kvm_vcpu *vcpu, u8 *val)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00890">lapic.c:890</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aa9449652b89a95fb90ca1b00dffac32d_cgraph.png" border="0" usemap="#alapic_8c_aa9449652b89a95fb90ca1b00dffac32d_cgraph" alt=""/></div>
<map name="alapic_8c_aa9449652b89a95fb90ca1b00dffac32d_cgraph" id="alapic_8c_aa9449652b89a95fb90ca1b00dffac32d_cgraph">
<area shape="rect" title=" " alt="" coords="5,101,156,142"/>
<area shape="rect" href="lapic_8c.html#a664d20f44962ff67555d95cdf987eb9b" title=" " alt="" coords="204,83,332,109"/>
<area shape="rect" href="lapic_8c.html#a46a725e66a6b75af27a208acd463153a" title=" " alt="" coords="204,133,332,160"/>
<area shape="rect" href="kvm__main_8c.html#aa1c62238734b7293ce70a2710a8f2b05" title=" " alt="" coords="382,79,565,105"/>
<area shape="rect" href="kvm__main_8c.html#ae902cad56e0551f3e6bf26df088f1b84" title=" " alt="" coords="617,67,791,109"/>
<area shape="rect" href="kvm__main_8c.html#afb33e9a5cfe88ab45367ba7f6043666d" title=" " alt="" coords="841,81,1059,108"/>
<area shape="rect" href="kvm__main_8c.html#a3cc887a9ecfdd6e9f5ab90dc2ce8de4a" title=" " alt="" coords="885,31,1015,57"/>
<area shape="rect" href="kvm__main_8c.html#ae374ebe48072080788db56075dd9a762" title=" " alt="" coords="1820,56,1959,83"/>
<area shape="rect" href="kvm__main_8c.html#ab58025ccc253a102c64561fa61c2a514" title=" " alt="" coords="2053,56,2205,83"/>
<area shape="rect" href="kvm__main_8c.html#a77ec4b9140d69a05f3b4e7836cc03a96" title=" " alt="" coords="2273,31,2436,57"/>
<area shape="rect" href="kvm__main_8c.html#a2a95905782c4136bdf6d9861f937b0ef" title=" " alt="" coords="1109,5,1278,32"/>
<area shape="rect" href="kvm__main_8c.html#a03aae88de564edba8a3a2d10bc5e7b20" title=" " alt="" coords="1136,107,1251,133"/>
<area shape="rect" href="kvm__main_8c.html#acc4698e3f076cdbbd5d8ca788a94decf" title=" " alt="" coords="1330,5,1513,32"/>
<area shape="rect" href="kvm__main_8c.html#a7c20e0f654f0b4472c3833f0a563e11e" title=" " alt="" coords="1357,107,1485,133"/>
<area shape="rect" href="kvm__main_8c.html#adb8a0a4f675ca16ea81acd3b88089f13" title=" " alt="" coords="1793,5,1985,32"/>
<area shape="rect" href="kvm__main_8c.html#abc966ec55b5101c293dabe1eb29e2b82" title=" " alt="" coords="380,133,567,160"/>
<area shape="rect" href="kvm__main_8c.html#ace1d8e8c746cb64f9ce515fe8807db98" title=" " alt="" coords="615,133,793,174"/>
<area shape="rect" href="kvm__main_8c.html#a1cf9d9c864cd7f9b5b32fc880c0872ab" title=" " alt="" coords="883,140,1017,167"/>
<area shape="rect" href="kvm__main_8c.html#ae4806d9a69b751639c175cb98e468f15" title=" " alt="" coords="1563,208,1745,235"/>
<area shape="rect" href="kvm__main_8c.html#a49ed988e062d259a8706411f619bf1f7" title=" " alt="" coords="1107,157,1280,184"/>
<area shape="rect" href="kvm__main_8c.html#a7079b0256c7572c701a6e1526f58fdac" title=" " alt="" coords="1328,157,1515,184"/>
<area shape="rect" href="kvm__main_8c.html#a04c9651c5f9a0485fd1e7152bdb01353" title=" " alt="" coords="1575,132,1733,159"/>
<area shape="rect" href="dirty__ring_8c.html#ac1878b63f1f337e93cf186ebd4fffcc4" title=" " alt="" coords="1803,259,1975,301"/>
<area shape="rect" href="dirty__ring_8c.html#a81ebbf462440ed5392d6d3412a859ae7" title=" " alt="" coords="1810,157,1969,184"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="1803,208,1976,235"/>
<area shape="rect" href="dirty__ring_8c.html#ad6e626257c739b2ac3d397119a7cf798" title=" " alt="" coords="2033,107,2225,133"/>
<area shape="rect" href="dirty__ring_8c.html#a6fe5cd75b9bac6497e1ae7340f2a5f7b" title=" " alt="" coords="2055,208,2203,235"/>
<area shape="rect" href="dirty__ring_8c.html#a22c9a239acf3463a8599a21c0a756538" title=" " alt="" coords="2040,157,2219,184"/>
<area shape="rect" href="dirty__ring_8c.html#acd0a1e586324b4c49b429c7a392db73f" title=" " alt="" coords="2275,183,2434,209"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_aa9449652b89a95fb90ca1b00dffac32d_icgraph.png" border="0" usemap="#alapic_8c_aa9449652b89a95fb90ca1b00dffac32d_icgraph" alt=""/></div>
<map name="alapic_8c_aa9449652b89a95fb90ca1b00dffac32d_icgraph" id="alapic_8c_aa9449652b89a95fb90ca1b00dffac32d_icgraph">
<area shape="rect" title=" " alt="" coords="1161,5,1312,47"/>
<area shape="rect" href="lapic_8c.html#a651f3e8a2def4f70e3750464ea4904a9" title=" " alt="" coords="939,5,1113,47"/>
<area shape="rect" href="lapic_8c.html#aa63139efcde3eb7b7548e5792d7cf63d" title=" " alt="" coords="727,5,891,47"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="541,13,679,39"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="412,13,493,39"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,13,364,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,13,129,39"/>
</map>
</div>

</div>
</div>
<a id="ab18679414f6ced1b8597fc3a9b445dea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab18679414f6ced1b8597fc3a9b445dea">&#9670;&nbsp;</a></span>report_tpr_access()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void report_tpr_access </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>write</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01560">1560</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;{</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <span class="keywordflow">if</span> (apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;arch.tpr_access_reporting)</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;        <a class="code" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8">__report_tpr_access</a>(apic, write);</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a416dfbc264f7365a79bb5d3e531512b8"><div class="ttname"><a href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8">__report_tpr_access</a></div><div class="ttdeci">static void __report_tpr_access(struct kvm_lapic *apic, bool write)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01550">lapic.c:1550</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ab18679414f6ced1b8597fc3a9b445dea_cgraph.png" border="0" usemap="#alapic_8c_ab18679414f6ced1b8597fc3a9b445dea_cgraph" alt=""/></div>
<map name="alapic_8c_ab18679414f6ced1b8597fc3a9b445dea_cgraph" id="alapic_8c_ab18679414f6ced1b8597fc3a9b445dea_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,143,32"/>
<area shape="rect" href="lapic_8c.html#a416dfbc264f7365a79bb5d3e531512b8" title=" " alt="" coords="191,5,341,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#ad97ff6b975b461b815e6749d29c65446" title=" " alt="" coords="389,5,500,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a5d9eb0563cffb1e3ed1cccebabcf2df6" title=" " alt="" coords="548,5,723,32"/>
<area shape="rect" href="kvm__cache__regs_8h.html#a6b9ea8c019490183db2a81569aad2bf9" title=" " alt="" coords="771,5,964,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ab18679414f6ced1b8597fc3a9b445dea_icgraph.png" border="0" usemap="#alapic_8c_ab18679414f6ced1b8597fc3a9b445dea_icgraph" alt=""/></div>
<map name="alapic_8c_ab18679414f6ced1b8597fc3a9b445dea_icgraph" id="alapic_8c_ab18679414f6ced1b8597fc3a9b445dea_icgraph">
<area shape="rect" title=" " alt="" coords="1795,206,1932,233"/>
<area shape="rect" href="lapic_8c.html#a834f2a3187924d07d18afb6b8d6645f3" title=" " alt="" coords="1619,107,1717,134"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1589,265,1747,291"/>
<area shape="rect" href="lapic_8c.html#a623f02f0875b0883fd65e82c565c9a18" title=" " alt="" coords="1367,27,1521,54"/>
<area shape="rect" href="lapic_8c.html#afdddb3803bbe495a6eb54937906caf2c" title=" " alt="" coords="1367,107,1521,134"/>
<area shape="rect" href="x86_8c.html#aca5ab82fb669f6a99e011293efed0d5d" title=" " alt="" coords="1129,5,1281,47"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="891,13,1050,39"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="670,13,794,39"/>
<area shape="rect" href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1" title=" " alt="" coords="1139,71,1270,98"/>
<area shape="rect" href="lapic_8c.html#a2913418710d9efa46bbdbb0070b766da" title=" " alt="" coords="1126,122,1283,149"/>
<area shape="rect" href="lapic_8c.html#ae9bd2989ca4c31caf8aa56b8c7dfd248" title=" " alt="" coords="879,97,1063,123"/>
<area shape="rect" href="lapic_8c.html#a179cfc2268db31f40b5bd9b1c247a37b" title=" " alt="" coords="401,147,571,174"/>
<area shape="rect" href="hyperv_8c.html#acd3e0dad98bde91068115067f6ec3ae6" title=" " alt="" coords="665,97,799,123"/>
<area shape="rect" href="hyperv_8c.html#a23d197f9ae27f820fa7e977aec518698" title=" " alt="" coords="387,97,585,123"/>
<area shape="rect" href="x86_8c.html#a0e93cb5e88dc8c07d9357181a3a7b2e9" title=" " alt="" coords="164,122,339,149"/>
<area shape="rect" href="svm_8c.html#a091db4f6d8d0fc811fdd6d9b2a775889" title=" " alt="" coords="5,97,116,123"/>
<area shape="rect" href="vmx_8c.html#ab6b2c94ee2868acf5be3ac9b3e02e441" title=" " alt="" coords="5,147,116,174"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1377,214,1511,241"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1347,265,1541,291"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1363,341,1525,367"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1373,417,1515,443"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="1129,173,1281,215"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="1115,239,1294,266"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="1135,290,1275,317"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="891,232,1050,273"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="1111,341,1299,367"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="645,391,819,418"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="904,341,1037,367"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="633,341,831,367"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="399,366,573,393"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="211,315,292,342"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="197,366,306,393"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="196,417,307,443"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="1129,442,1280,469"/>
</map>
</div>

</div>
</div>
<a id="ade21404bee3e5dbbe596ff391e0a23db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade21404bee3e5dbbe596ff391e0a23db">&#9670;&nbsp;</a></span>restart_apic_timer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void restart_apic_timer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02158">2158</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;{</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    preempt_disable();</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160; </div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667">apic_lvtt_period</a>(apic) &amp;&amp; atomic_read(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a581e6b6fe55055ed8a81d5a1aa258ff7">pending</a>))</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160; </div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879">start_hv_timer</a>(apic))</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;        <a class="code" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8">start_sw_timer</a>(apic);</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;out:</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    preempt_enable();</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_ae72327516a899bdd0fe3f245f2695879"><div class="ttname"><a href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879">start_hv_timer</a></div><div class="ttdeci">static bool start_hv_timer(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02099">lapic.c:2099</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ade21404bee3e5dbbe596ff391e0a23db_cgraph.png" border="0" usemap="#alapic_8c_ade21404bee3e5dbbe596ff391e0a23db_cgraph" alt=""/></div>
<map name="alapic_8c_ade21404bee3e5dbbe596ff391e0a23db_cgraph" id="alapic_8c_ade21404bee3e5dbbe596ff391e0a23db_cgraph">
<area shape="rect" title=" " alt="" coords="5,575,147,601"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="377,600,504,627"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="195,625,313,652"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="195,499,313,525"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="568,499,715,525"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="376,549,505,576"/>
<area shape="rect" href="lapic_8c.html#a2400290b895608d302ecce4ee352ee25" title=" " alt="" coords="768,755,944,781"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="763,587,949,613"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="1005,317,1165,344"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="763,251,949,293"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1473,411,1596,437"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="769,536,943,563"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="769,638,943,679"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="1009,587,1160,613"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="1013,521,1156,562"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="1019,637,1151,664"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="1249,519,1369,545"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="1250,620,1369,647"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="1487,620,1583,647"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="1016,200,1153,227"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="997,255,1172,281"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1241,251,1378,277"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1689,81,1860,108"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="1232,302,1387,343"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1237,368,1382,395"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1237,5,1381,32"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1481,157,1589,184"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1470,208,1599,235"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1471,259,1598,285"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1472,309,1597,336"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1447,360,1623,387"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1453,107,1617,133"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1690,157,1859,184"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1671,385,1879,412"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1698,436,1851,463"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1457,462,1612,503"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1455,528,1614,555"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1455,5,1614,32"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="1005,706,1164,747"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="1241,721,1378,748"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="1229,772,1390,799"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="1220,671,1399,697"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1475,671,1594,697"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="378,448,503,475"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="361,499,520,525"/>
<area shape="rect" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede" title=" " alt="" coords="765,470,947,511"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ade21404bee3e5dbbe596ff391e0a23db_icgraph.png" border="0" usemap="#alapic_8c_ade21404bee3e5dbbe596ff391e0a23db_icgraph" alt=""/></div>
<map name="alapic_8c_ade21404bee3e5dbbe596ff391e0a23db_icgraph" id="alapic_8c_ade21404bee3e5dbbe596ff391e0a23db_icgraph">
<area shape="rect" title=" " alt="" coords="1464,497,1605,524"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1261,439,1403,465"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="749,157,906,184"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1248,1146,1416,1187"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1251,697,1413,738"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1253,490,1411,531"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1019,439,1171,465"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1031,351,1159,377"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="752,431,903,473"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="485,443,643,469"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="712,351,943,377"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="497,68,631,95"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="467,195,661,221"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="483,119,645,145"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="493,11,635,37"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="246,259,398,301"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="233,157,411,184"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="252,208,392,235"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="13,158,172,199"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="228,56,416,83"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="235,107,409,133"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="26,56,159,83"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="5,107,180,133"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="247,5,397,32"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="487,377,641,418"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="991,1394,1200,1435"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="732,1401,923,1428"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="724,1452,931,1479"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="490,1401,638,1428"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="505,1452,623,1479"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1016,849,1175,876"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="770,1125,885,1152"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="783,849,871,876"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="525,1351,603,1377"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="478,595,650,621"/>
<area shape="rect" href="x86_8c.html#a8103751d0c861cfc0c6d0fed892e2454" title=" " alt="" coords="485,646,643,687"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="485,711,643,753"/>
<area shape="rect" href="x86_8c.html#a3de7a07b3d9ed3ee68dbdfb0c53dc5d0" title=" " alt="" coords="485,777,643,818"/>
<area shape="rect" href="x86_8c.html#ac6ebab4c3448cdbc79dbcac73e94503b" title=" " alt="" coords="485,842,643,883"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="471,493,657,520"/>
<area shape="rect" href="x86_8c.html#a02f0a60bd0147952e87f6ad38128f748" title=" " alt="" coords="485,907,643,949"/>
<area shape="rect" href="x86_8c.html#ae3d9929c9a77fa2c710befa0a784d4c6" title=" " alt="" coords="485,973,643,1014"/>
<area shape="rect" href="x86_8c.html#a93a45fe328a7ab7be2e5426ffc845c32" title=" " alt="" coords="485,1038,643,1079"/>
<area shape="rect" href="x86_8c.html#af51ba1557e985ebd63f465527cc511b3" title=" " alt="" coords="485,1103,643,1145"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="485,1169,643,1210"/>
<area shape="rect" href="x86_8c.html#aa4fc098aab8bc9588c83cfcb89eceee2" title=" " alt="" coords="485,1234,643,1275"/>
<area shape="rect" href="x86_8c.html#a7491f962c44e4926933a5bd58c521731" title=" " alt="" coords="464,1300,664,1327"/>
<area shape="rect" href="x86_8c.html#aa7dd06e7d0835e6cbf23134ad9fb19d8" title=" " alt="" coords="473,544,655,571"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1048,497,1143,524"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="787,497,868,524"/>
</map>
</div>

</div>
</div>
<a id="a0efcb9037756de47e9d28f0a5ea1009f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0efcb9037756de47e9d28f0a5ea1009f">&#9670;&nbsp;</a></span>set_target_expiration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool set_target_expiration </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>count_reg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01992">1992</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;{</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    ktime_t now;</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;    u64 tscl = rdtsc();</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    s64 deadline;</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160; </div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    now = ktime_get();</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a> =</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;            <a class="code" href="lapic_8c.html#ab9f4c987f5a9d71b966ec05058380bb4">tmict_to_ns</a>(apic, <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_TMICT));</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160; </div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    <span class="keywordflow">if</span> (!apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a>) {</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#acb4ad6bfe6c14982d0a87f4678e92d09">tscdeadline</a> = 0;</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    }</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160; </div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    <a class="code" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c">limit_periodic_timer_frequency</a>(apic);</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    deadline = apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a>;</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160; </div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667">apic_lvtt_period</a>(apic) || <a class="code" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a">apic_lvtt_oneshot</a>(apic)) {</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;        <span class="keywordflow">if</span> (unlikely(count_reg != APIC_TMICT)) {</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;            deadline = <a class="code" href="lapic_8c.html#ab9f4c987f5a9d71b966ec05058380bb4">tmict_to_ns</a>(apic,</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;                     <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, count_reg));</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;            <span class="keywordflow">if</span> (unlikely(deadline &lt;= 0)) {</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667">apic_lvtt_period</a>(apic))</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;                    deadline = apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a>;</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;                    deadline = 0;</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;            }</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unlikely(deadline &gt; apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a>)) {</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;                pr_info_ratelimited(</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;                    <span class="stringliteral">&quot;vcpu %i: requested lapic timer restore with &quot;</span></div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;                    <span class="stringliteral">&quot;starting count register %#x=%u (%lld ns) &gt; initial count (%lld ns). &quot;</span></div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;                    <span class="stringliteral">&quot;Using initial count to start timer.\n&quot;</span>,</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                    apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_id,</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                    count_reg,</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                    <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, count_reg),</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;                    deadline, apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a>);</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                <a class="code" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48">kvm_lapic_set_reg</a>(apic, count_reg, 0);</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;                deadline = apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a>;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;            }</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;        }</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    }</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160; </div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#acb4ad6bfe6c14982d0a87f4678e92d09">tscdeadline</a> = <a class="code" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c">kvm_read_l1_tsc</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, tscl) +</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;        <a class="code" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df">nsec_to_cycles</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, deadline);</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a0de90943a0ace07fbb0e0219fe64e2f8">target_expiration</a> = ktime_add_ns(now, deadline);</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160; </div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_ab9f4c987f5a9d71b966ec05058380bb4"><div class="ttname"><a href="lapic_8c.html#ab9f4c987f5a9d71b966ec05058380bb4">tmict_to_ns</a></div><div class="ttdeci">static u64 tmict_to_ns(struct kvm_lapic *apic, u32 tmict)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01963">lapic.c:1963</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a0efcb9037756de47e9d28f0a5ea1009f_cgraph.png" border="0" usemap="#alapic_8c_a0efcb9037756de47e9d28f0a5ea1009f_cgraph" alt=""/></div>
<map name="alapic_8c_a0efcb9037756de47e9d28f0a5ea1009f_cgraph" id="alapic_8c_a0efcb9037756de47e9d28f0a5ea1009f_cgraph">
<area shape="rect" title=" " alt="" coords="5,199,167,225"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="223,5,360,32"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="432,85,559,112"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="219,173,364,200"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="219,224,363,251"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="225,275,357,301"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="215,107,368,149"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="231,325,351,352"/>
<area shape="rect" href="lapic_8c.html#ab9f4c987f5a9d71b966ec05058380bb4" title=" " alt="" coords="242,376,341,403"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="416,173,575,200"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="416,224,575,251"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="436,275,555,301"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="623,275,719,301"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a0efcb9037756de47e9d28f0a5ea1009f_icgraph.png" border="0" usemap="#alapic_8c_a0efcb9037756de47e9d28f0a5ea1009f_icgraph" alt=""/></div>
<map name="alapic_8c_a0efcb9037756de47e9d28f0a5ea1009f_icgraph" id="alapic_8c_a0efcb9037756de47e9d28f0a5ea1009f_icgraph">
<area shape="rect" title=" " alt="" coords="2035,173,2196,200"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1844,173,1987,200"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1644,144,1796,171"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1656,199,1784,225"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1405,86,1556,127"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="1141,39,1299,65"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="919,5,1043,32"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1402,199,1559,225"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="1365,376,1596,403"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1153,123,1287,149"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1123,173,1317,200"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1139,224,1301,251"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1149,300,1291,327"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="905,57,1057,98"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="891,123,1070,149"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="911,173,1051,200"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="656,115,815,157"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="887,224,1075,251"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="399,275,572,301"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="669,224,802,251"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,224,584,251"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,275,339,301"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,224,101,251"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,275,115,301"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,325,116,352"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="905,325,1056,352"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="1143,427,1297,469"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="903,427,1058,469"/>
<area shape="rect" href="svm_8c.html#a82c8447e70f06dd52623c696446104b5" title=" " alt="" coords="632,431,839,457"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="632,481,839,508"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="427,431,543,457"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="427,481,544,508"/>
</map>
</div>

</div>
</div>
<a id="a5f5c49ce8a579b59663644f0f1a6cbe3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f5c49ce8a579b59663644f0f1a6cbe3">&#9670;&nbsp;</a></span>start_apic_timer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void start_apic_timer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02227">2227</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;{</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    <a class="code" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005">__start_apic_timer</a>(apic, APIC_TMICT);</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a5f5c49ce8a579b59663644f0f1a6cbe3_cgraph.png" border="0" usemap="#alapic_8c_a5f5c49ce8a579b59663644f0f1a6cbe3_cgraph" alt=""/></div>
<map name="alapic_8c_a5f5c49ce8a579b59663644f0f1a6cbe3_cgraph" id="alapic_8c_a5f5c49ce8a579b59663644f0f1a6cbe3_cgraph">
<area shape="rect" title=" " alt="" coords="5,472,133,499"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="181,472,324,499"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="1425,661,1563,688"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="987,127,1114,153"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="372,332,513,359"/>
<area shape="rect" href="lapic_8c.html#a0efcb9037756de47e9d28f0a5ea1009f" title=" " alt="" coords="561,712,723,739"/>
<area shape="rect" href="lapic_8c.html#ae72327516a899bdd0fe3f245f2695879" title=" " alt="" coords="791,268,909,295"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="583,369,701,396"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="977,341,1124,368"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="986,240,1115,267"/>
<area shape="rect" href="lapic_8c.html#a2400290b895608d302ecce4ee352ee25" title=" " alt="" coords="1177,5,1353,32"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="1172,392,1359,419"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="1414,224,1574,251"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="1172,275,1359,317"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1883,173,2005,200"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="1179,341,1352,368"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="1178,107,1353,149"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="1419,451,1569,477"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="1423,385,1565,426"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="1428,501,1560,528"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="1659,797,1779,824"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="1659,696,1778,723"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="1896,696,1992,723"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="1407,333,1581,360"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1650,355,1787,381"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="2099,376,2269,403"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="1641,482,1796,523"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1646,645,1791,672"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1647,747,1791,773"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1890,528,1998,555"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1879,325,2009,352"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1881,376,2007,403"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1881,427,2007,453"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1856,477,2032,504"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1862,275,2026,301"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="2080,148,2288,175"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="2107,199,2261,225"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1867,579,2021,621"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1865,645,2023,672"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1865,747,2023,773"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="1415,57,1573,98"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="1650,63,1787,89"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="1638,8,1799,35"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="1629,113,1808,140"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1885,113,2003,140"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="787,472,913,499"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="771,420,929,447"/>
<area shape="rect" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede" title=" " alt="" coords="1174,545,1357,586"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="773,202,927,243"/>
<area shape="rect" href="lapic_8c.html#ab9f4c987f5a9d71b966ec05058380bb4" title=" " alt="" coords="801,965,899,992"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a5f5c49ce8a579b59663644f0f1a6cbe3_icgraph.png" border="0" usemap="#alapic_8c_a5f5c49ce8a579b59663644f0f1a6cbe3_icgraph" alt=""/></div>
<map name="alapic_8c_a5f5c49ce8a579b59663644f0f1a6cbe3_icgraph" id="alapic_8c_a5f5c49ce8a579b59663644f0f1a6cbe3_icgraph">
<area shape="rect" title=" " alt="" coords="1644,274,1772,301"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1402,198,1559,225"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="1365,325,1596,351"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1153,71,1287,98"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1123,122,1317,149"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1139,198,1301,225"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1149,249,1291,275"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="905,5,1057,47"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="891,71,1070,98"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="911,122,1051,149"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="656,64,815,105"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="887,173,1075,199"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="399,223,572,250"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="669,173,802,199"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,173,584,199"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,223,339,250"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,173,101,199"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,223,115,250"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,274,116,301"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="905,274,1056,301"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="1143,376,1297,417"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="903,376,1058,417"/>
<area shape="rect" href="svm_8c.html#a82c8447e70f06dd52623c696446104b5" title=" " alt="" coords="632,379,839,406"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="632,430,839,457"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="427,379,543,406"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="427,430,544,457"/>
</map>
</div>

</div>
</div>
<a id="ae72327516a899bdd0fe3f245f2695879"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae72327516a899bdd0fe3f245f2695879">&#9670;&nbsp;</a></span>start_hv_timer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool start_hv_timer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02099">2099</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;{</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__timer.html">kvm_timer</a> *ktimer = &amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>;</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu = apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>;</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    <span class="keywordtype">bool</span> expired;</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160; </div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    WARN_ON(preemptible());</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8c.html#a2400290b895608d302ecce4ee352ee25">kvm_can_use_hv_timer</a>(vcpu))</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160; </div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    <span class="keywordflow">if</span> (!ktimer-&gt;<a class="code" href="structkvm__timer.html#acb4ad6bfe6c14982d0a87f4678e92d09">tscdeadline</a>)</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160; </div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    <span class="keywordflow">if</span> (static_call(kvm_x86_set_hv_timer)(vcpu, ktimer-&gt;<a class="code" href="structkvm__timer.html#acb4ad6bfe6c14982d0a87f4678e92d09">tscdeadline</a>, &amp;expired))</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160; </div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    ktimer-&gt;<a class="code" href="structkvm__timer.html#a033831ad90c69d7ea4e9af3fd0a6727e">hv_timer_in_use</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    hrtimer_cancel(&amp;ktimer-&gt;<a class="code" href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">timer</a>);</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160; </div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;<span class="comment">     * To simplify handling the periodic timer, leave the hv timer running</span></div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;<span class="comment">     * even if the deadline timer has expired, i.e. rely on the resulting</span></div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;<span class="comment">     * VM-Exit to recompute the periodic timer&#39;s target expiration.</span></div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667">apic_lvtt_period</a>(apic)) {</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;<span class="comment">         * Cancel the hv timer if the sw timer fired while the hv timer</span></div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;<span class="comment">         * was being programmed, or if the hv timer itself expired.</span></div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;        <span class="keywordflow">if</span> (atomic_read(&amp;ktimer-&gt;<a class="code" href="structkvm__timer.html#a581e6b6fe55055ed8a81d5a1aa258ff7">pending</a>)) {</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;            <a class="code" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae">cancel_hv_timer</a>(apic);</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (expired) {</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;            <a class="code" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837">apic_timer_expired</a>(apic, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;            <a class="code" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae">cancel_hv_timer</a>(apic);</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;        }</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    }</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160; </div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;    trace_kvm_hv_timer_state(vcpu-&gt;vcpu_id, ktimer-&gt;<a class="code" href="structkvm__timer.html#a033831ad90c69d7ea4e9af3fd0a6727e">hv_timer_in_use</a>);</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160; </div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a2400290b895608d302ecce4ee352ee25"><div class="ttname"><a href="lapic_8c.html#a2400290b895608d302ecce4ee352ee25">kvm_can_use_hv_timer</a></div><div class="ttdeci">bool kvm_can_use_hv_timer(struct kvm_vcpu *vcpu)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00154">lapic.c:154</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ae72327516a899bdd0fe3f245f2695879_cgraph.png" border="0" usemap="#alapic_8c_ae72327516a899bdd0fe3f245f2695879_cgraph" alt=""/></div>
<map name="alapic_8c_ae72327516a899bdd0fe3f245f2695879_cgraph" id="alapic_8c_ae72327516a899bdd0fe3f245f2695879_cgraph">
<area shape="rect" title=" " alt="" coords="5,376,123,403"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="181,300,307,327"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="171,351,317,377"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="179,452,309,479"/>
<area shape="rect" href="lapic_8c.html#a2400290b895608d302ecce4ee352ee25" title=" " alt="" coords="371,595,547,621"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="365,208,552,235"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="607,292,767,319"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="365,343,552,385"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1076,629,1199,656"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="372,157,545,184"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="371,529,546,570"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="612,23,763,49"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="616,142,759,183"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="621,208,753,235"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="852,5,972,32"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="853,56,971,83"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="1089,56,1185,83"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="619,393,756,420"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="600,343,775,369"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="843,360,981,387"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1292,208,1463,235"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="835,411,989,453"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="839,107,985,133"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="840,157,984,184"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1083,259,1191,285"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1073,309,1202,336"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1074,360,1201,387"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1075,411,1200,437"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1049,461,1225,488"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1055,512,1219,539"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1293,259,1462,285"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1273,604,1481,631"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1301,655,1454,681"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1060,563,1215,605"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1058,107,1217,133"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1058,157,1217,184"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="608,575,767,617"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="843,591,981,617"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="831,641,993,668"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="823,540,1001,567"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1078,680,1197,707"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ae72327516a899bdd0fe3f245f2695879_icgraph.png" border="0" usemap="#alapic_8c_ae72327516a899bdd0fe3f245f2695879_icgraph" alt=""/></div>
<map name="alapic_8c_ae72327516a899bdd0fe3f245f2695879_icgraph" id="alapic_8c_ae72327516a899bdd0fe3f245f2695879_icgraph">
<area shape="rect" title=" " alt="" coords="1653,967,1771,993"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1464,967,1605,993"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1261,967,1403,993"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="749,1057,906,1084"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1248,1181,1416,1222"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1251,626,1413,667"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1253,846,1411,887"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1019,923,1171,949"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1031,977,1159,1004"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="752,886,903,927"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="485,864,643,891"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="712,977,943,1004"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="497,1083,631,1109"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="467,1184,661,1211"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="483,1032,645,1059"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="493,1133,635,1160"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="246,1286,398,1327"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="233,1235,411,1261"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="252,1184,392,1211"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="13,1227,172,1269"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="228,1083,416,1109"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="235,1032,409,1059"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="26,1083,159,1109"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="5,1007,180,1033"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="247,1133,397,1160"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="487,915,641,957"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="991,1227,1200,1269"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="732,1235,923,1261"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="724,1285,931,1312"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="490,1235,638,1261"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="505,1285,623,1312"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1016,464,1175,491"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="770,195,885,221"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="783,464,871,491"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="525,5,603,32"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="478,435,650,461"/>
<area shape="rect" href="x86_8c.html#a8103751d0c861cfc0c6d0fed892e2454" title=" " alt="" coords="485,486,643,527"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="485,551,643,593"/>
<area shape="rect" href="x86_8c.html#a3de7a07b3d9ed3ee68dbdfb0c53dc5d0" title=" " alt="" coords="485,617,643,658"/>
<area shape="rect" href="x86_8c.html#ac6ebab4c3448cdbc79dbcac73e94503b" title=" " alt="" coords="485,682,643,723"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="471,813,657,840"/>
<area shape="rect" href="x86_8c.html#a02f0a60bd0147952e87f6ad38128f748" title=" " alt="" coords="485,747,643,789"/>
<area shape="rect" href="x86_8c.html#ae3d9929c9a77fa2c710befa0a784d4c6" title=" " alt="" coords="485,57,643,98"/>
<area shape="rect" href="x86_8c.html#a93a45fe328a7ab7be2e5426ffc845c32" title=" " alt="" coords="485,122,643,163"/>
<area shape="rect" href="x86_8c.html#af51ba1557e985ebd63f465527cc511b3" title=" " alt="" coords="485,187,643,229"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="485,253,643,294"/>
<area shape="rect" href="x86_8c.html#aa4fc098aab8bc9588c83cfcb89eceee2" title=" " alt="" coords="485,318,643,359"/>
<area shape="rect" href="x86_8c.html#a7491f962c44e4926933a5bd58c521731" title=" " alt="" coords="464,384,664,411"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1048,847,1143,873"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="787,828,868,855"/>
</map>
</div>

</div>
</div>
<a id="a546006e7f967018d391494cfdbd3d3a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a546006e7f967018d391494cfdbd3d3a4">&#9670;&nbsp;</a></span>start_sw_period()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void start_sw_period </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02063">2063</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;{</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    <span class="keywordflow">if</span> (!apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a>)</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160; </div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    <span class="keywordflow">if</span> (ktime_after(ktime_get(),</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;            apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a0de90943a0ace07fbb0e0219fe64e2f8">target_expiration</a>)) {</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        <a class="code" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837">apic_timer_expired</a>(apic, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160; </div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a">apic_lvtt_oneshot</a>(apic))</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160; </div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        <a class="code" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede">advance_periodic_target_expiration</a>(apic);</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    }</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160; </div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    hrtimer_start(&amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">timer</a>,</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;        apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a0de90943a0ace07fbb0e0219fe64e2f8">target_expiration</a>,</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;        HRTIMER_MODE_ABS_HARD);</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a546006e7f967018d391494cfdbd3d3a4_cgraph.png" border="0" usemap="#alapic_8c_a546006e7f967018d391494cfdbd3d3a4_cgraph" alt=""/></div>
<map name="alapic_8c_a546006e7f967018d391494cfdbd3d3a4_cgraph" id="alapic_8c_a546006e7f967018d391494cfdbd3d3a4_cgraph">
<area shape="rect" title=" " alt="" coords="5,257,131,284"/>
<area shape="rect" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede" title=" " alt="" coords="375,49,558,90"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="627,655,764,681"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="179,257,325,284"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="629,56,761,83"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="860,5,980,32"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="861,56,979,83"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="1097,56,1193,83"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="373,165,560,192"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="615,304,775,331"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="373,358,560,399"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1084,781,1207,808"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="380,115,553,141"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="379,225,554,266"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="620,107,771,133"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="624,158,767,199"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="608,372,783,399"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="851,553,989,580"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1300,503,1471,529"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="843,259,997,301"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="847,325,993,352"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="848,376,992,403"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1091,629,1199,656"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1081,680,1210,707"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1082,731,1209,757"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1083,477,1208,504"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1057,528,1233,555"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1063,579,1227,605"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1301,629,1470,656"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1281,756,1489,783"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1309,807,1462,833"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1068,259,1223,301"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1066,325,1225,352"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1066,376,1225,403"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="616,223,775,265"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="851,208,989,235"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="839,107,1001,133"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="831,157,1009,184"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1086,157,1205,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a546006e7f967018d391494cfdbd3d3a4_icgraph.png" border="0" usemap="#alapic_8c_a546006e7f967018d391494cfdbd3d3a4_icgraph" alt=""/></div>
<map name="alapic_8c_a546006e7f967018d391494cfdbd3d3a4_icgraph" id="alapic_8c_a546006e7f967018d391494cfdbd3d3a4_icgraph">
<area shape="rect" title=" " alt="" coords="1832,325,1957,352"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="1665,325,1784,352"/>
<area shape="rect" href="lapic_8c.html#aee4a3e5ae4ed211edf4e463ebacadaa5" title=" " alt="" coords="1459,239,1617,281"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1467,355,1609,381"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1043,197,1137,224"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="781,171,863,197"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="468,107,655,133"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="260,497,384,524"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1255,784,1398,811"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="743,1028,901,1055"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1243,249,1411,290"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1245,379,1408,421"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1247,314,1406,355"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1014,784,1166,811"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1026,872,1154,899"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="747,777,897,818"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="482,784,641,811"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="707,872,937,899"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="494,1163,629,1189"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="464,1112,659,1139"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="481,1003,642,1029"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="490,1053,633,1080"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="246,1105,398,1146"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="233,1221,411,1248"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="252,1171,392,1197"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="13,1214,172,1255"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="228,1003,416,1029"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="235,952,409,979"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="26,1003,159,1029"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="5,927,180,953"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="247,1053,397,1080"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="484,835,639,877"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="985,49,1195,90"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="727,5,917,32"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="719,56,925,83"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="487,5,635,32"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="503,56,620,83"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1011,387,1169,413"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="765,349,879,376"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="778,439,866,465"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="522,157,601,184"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="475,340,647,367"/>
<area shape="rect" href="x86_8c.html#a8103751d0c861cfc0c6d0fed892e2454" title=" " alt="" coords="482,391,641,433"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="482,457,641,498"/>
<area shape="rect" href="x86_8c.html#a3de7a07b3d9ed3ee68dbdfb0c53dc5d0" title=" " alt="" coords="482,522,641,563"/>
<area shape="rect" href="x86_8c.html#ac6ebab4c3448cdbc79dbcac73e94503b" title=" " alt="" coords="482,587,641,629"/>
<area shape="rect" href="x86_8c.html#a02f0a60bd0147952e87f6ad38128f748" title=" " alt="" coords="482,653,641,694"/>
<area shape="rect" href="x86_8c.html#ae3d9929c9a77fa2c710befa0a784d4c6" title=" " alt="" coords="482,718,641,759"/>
<area shape="rect" href="x86_8c.html#a93a45fe328a7ab7be2e5426ffc845c32" title=" " alt="" coords="482,209,641,250"/>
<area shape="rect" href="x86_8c.html#af51ba1557e985ebd63f465527cc511b3" title=" " alt="" coords="482,274,641,315"/>
</map>
</div>

</div>
</div>
<a id="af723244d8a4013a14d7eaa2bca2765e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af723244d8a4013a14d7eaa2bca2765e8">&#9670;&nbsp;</a></span>start_sw_timer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void start_sw_timer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02141">2141</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;{</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__timer.html">kvm_timer</a> *ktimer = &amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>;</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160; </div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    WARN_ON(preemptible());</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;    <span class="keywordflow">if</span> (apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a033831ad90c69d7ea4e9af3fd0a6727e">hv_timer_in_use</a>)</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        <a class="code" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae">cancel_hv_timer</a>(apic);</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667">apic_lvtt_period</a>(apic) &amp;&amp; atomic_read(&amp;ktimer-&gt;<a class="code" href="structkvm__timer.html#a581e6b6fe55055ed8a81d5a1aa258ff7">pending</a>))</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160; </div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667">apic_lvtt_period</a>(apic) || <a class="code" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a">apic_lvtt_oneshot</a>(apic))</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;        <a class="code" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4">start_sw_period</a>(apic);</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0">apic_lvtt_tscdeadline</a>(apic))</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        <a class="code" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be">start_sw_tscdeadline</a>(apic);</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    trace_kvm_hv_timer_state(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>-&gt;vcpu_id, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;}</div>
<div class="ttc" id="alapic_8c_html_a546006e7f967018d391494cfdbd3d3a4"><div class="ttname"><a href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4">start_sw_period</a></div><div class="ttdeci">static void start_sw_period(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02063">lapic.c:2063</a></div></div>
<div class="ttc" id="alapic_8c_html_ac04fc2bcb3434803c9f3c10594f309be"><div class="ttname"><a href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be">start_sw_tscdeadline</a></div><div class="ttdeci">static void start_sw_tscdeadline(struct kvm_lapic *apic)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01930">lapic.c:1930</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_af723244d8a4013a14d7eaa2bca2765e8_cgraph.png" border="0" usemap="#alapic_8c_af723244d8a4013a14d7eaa2bca2765e8_cgraph" alt=""/></div>
<map name="alapic_8c_af723244d8a4013a14d7eaa2bca2765e8_cgraph" id="alapic_8c_af723244d8a4013a14d7eaa2bca2765e8_cgraph">
<area shape="rect" title=" " alt="" coords="5,387,124,414"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="827,122,964,149"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="188,463,315,490"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="815,253,975,279"/>
<area shape="rect" href="lapic_8c.html#af8cab016891083e066b7e1c086d012ae" title=" " alt="" coords="187,514,316,541"/>
<area shape="rect" href="lapic_8c.html#a546006e7f967018d391494cfdbd3d3a4" title=" " alt="" coords="189,362,314,389"/>
<area shape="rect" href="lapic_8c.html#ac04fc2bcb3434803c9f3c10594f309be" title=" " alt="" coords="172,413,331,439"/>
<area shape="rect" href="lapic_8c.html#a5cff2e426d700ad5b4cc78b9a3ea1ede" title=" " alt="" coords="575,355,758,396"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="379,417,525,443"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="829,426,961,453"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="1060,375,1180,402"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="1061,459,1179,486"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="1297,578,1393,605"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="573,471,760,498"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="573,187,760,228"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1284,527,1407,554"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="580,421,753,447"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="579,652,754,693"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="820,375,971,402"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="824,477,967,519"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="808,173,983,199"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="1051,325,1189,351"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1500,274,1671,301"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="1043,5,1197,47"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="1047,71,1193,98"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="1048,122,1192,149"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1291,426,1399,453"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1281,477,1410,503"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1282,223,1409,250"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1283,274,1408,301"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1257,325,1433,351"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1263,375,1427,402"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1501,426,1670,453"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1481,502,1689,529"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1509,553,1662,579"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1268,5,1423,47"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1266,71,1425,98"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1266,122,1425,149"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="816,665,975,707"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="1051,726,1189,753"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="1039,675,1201,702"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="1031,625,1209,651"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1286,629,1405,655"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_af723244d8a4013a14d7eaa2bca2765e8_icgraph.png" border="0" usemap="#alapic_8c_af723244d8a4013a14d7eaa2bca2765e8_icgraph" alt=""/></div>
<map name="alapic_8c_af723244d8a4013a14d7eaa2bca2765e8_icgraph" id="alapic_8c_af723244d8a4013a14d7eaa2bca2765e8_icgraph">
<area shape="rect" title=" " alt="" coords="1665,505,1784,532"/>
<area shape="rect" href="lapic_8c.html#aee4a3e5ae4ed211edf4e463ebacadaa5" title=" " alt="" coords="1459,419,1617,461"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1467,535,1609,561"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1043,377,1137,404"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="781,273,863,300"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="468,107,655,133"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="260,427,384,453"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1255,799,1398,825"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="743,1043,901,1069"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1243,429,1411,470"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1245,559,1408,601"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1247,494,1406,535"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1014,799,1166,825"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1026,929,1154,956"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="747,791,897,833"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="482,799,641,825"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="707,929,937,956"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="494,1068,629,1095"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="464,1199,659,1225"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="481,1119,642,1145"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="490,1017,633,1044"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="246,1275,398,1317"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="233,1173,411,1200"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="252,1224,392,1251"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="13,1170,172,1211"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="228,1119,416,1145"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="235,1068,409,1095"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="26,1119,159,1145"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="5,984,180,1011"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="247,1017,397,1044"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="484,951,639,993"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="985,49,1195,90"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="727,5,917,32"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="719,56,925,83"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="487,5,635,32"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="503,56,620,83"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1011,567,1169,593"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="765,641,879,668"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="778,492,866,519"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="522,849,601,876"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="475,551,647,577"/>
<area shape="rect" href="x86_8c.html#a8103751d0c861cfc0c6d0fed892e2454" title=" " alt="" coords="482,419,641,461"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="482,485,641,526"/>
<area shape="rect" href="x86_8c.html#a3de7a07b3d9ed3ee68dbdfb0c53dc5d0" title=" " alt="" coords="482,602,641,643"/>
<area shape="rect" href="x86_8c.html#ac6ebab4c3448cdbc79dbcac73e94503b" title=" " alt="" coords="482,667,641,709"/>
<area shape="rect" href="x86_8c.html#a02f0a60bd0147952e87f6ad38128f748" title=" " alt="" coords="482,733,641,774"/>
<area shape="rect" href="x86_8c.html#ae3d9929c9a77fa2c710befa0a784d4c6" title=" " alt="" coords="482,158,641,199"/>
<area shape="rect" href="x86_8c.html#a93a45fe328a7ab7be2e5426ffc845c32" title=" " alt="" coords="482,223,641,265"/>
<area shape="rect" href="x86_8c.html#af51ba1557e985ebd63f465527cc511b3" title=" " alt="" coords="482,289,641,330"/>
<area shape="rect" href="x86_8c.html#adfaccb9ae903e8b5aee77f8591d51dc9" title=" " alt="" coords="482,354,641,395"/>
</map>
</div>

</div>
</div>
<a id="ac04fc2bcb3434803c9f3c10594f309be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac04fc2bcb3434803c9f3c10594f309be">&#9670;&nbsp;</a></span>start_sw_tscdeadline()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void start_sw_tscdeadline </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01930">1930</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;{</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <span class="keyword">struct </span><a class="code" href="structkvm__timer.html">kvm_timer</a> *ktimer = &amp;apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>;</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    u64 guest_tsc, <a class="code" href="structkvm__timer.html#acb4ad6bfe6c14982d0a87f4678e92d09">tscdeadline</a> = ktimer-&gt;<a class="code" href="structkvm__timer.html#acb4ad6bfe6c14982d0a87f4678e92d09">tscdeadline</a>;</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    u64 ns = 0;</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    ktime_t expire;</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    <span class="keyword">struct </span>kvm_vcpu *vcpu = apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>;</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> this_tsc_khz = vcpu-&gt;arch.virtual_tsc_khz;</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="xen_8c.html#a773b39d480759f67926cb18ae2219281">flags</a>;</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    ktime_t now;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160; </div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    <span class="keywordflow">if</span> (unlikely(!tscdeadline || !this_tsc_khz))</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160; </div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    local_irq_save(<a class="code" href="xen_8c.html#a773b39d480759f67926cb18ae2219281">flags</a>);</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160; </div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    now = ktime_get();</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;    guest_tsc = <a class="code" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c">kvm_read_l1_tsc</a>(vcpu, rdtsc());</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160; </div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    ns = (tscdeadline - guest_tsc) * 1000000ULL;</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    do_div(ns, this_tsc_khz);</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160; </div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    <span class="keywordflow">if</span> (likely(tscdeadline &gt; guest_tsc) &amp;&amp;</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;        likely(ns &gt; apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a02a69390fafe1e1281847530af564ef0">timer_advance_ns</a>)) {</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;        expire = ktime_add_ns(now, ns);</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;        expire = ktime_sub_ns(expire, ktimer-&gt;<a class="code" href="structkvm__timer.html#a02a69390fafe1e1281847530af564ef0">timer_advance_ns</a>);</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;        hrtimer_start(&amp;ktimer-&gt;<a class="code" href="structkvm__timer.html#a31da14cdecf55074bd9ff5af10c3ffa0">timer</a>, expire, HRTIMER_MODE_ABS_HARD);</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;        <a class="code" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837">apic_timer_expired</a>(apic, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160; </div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    local_irq_restore(<a class="code" href="xen_8c.html#a773b39d480759f67926cb18ae2219281">flags</a>);</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;}</div>
<div class="ttc" id="axen_8c_html_a773b39d480759f67926cb18ae2219281"><div class="ttname"><a href="xen_8c.html#a773b39d480759f67926cb18ae2219281">flags</a></div><div class="ttdeci">uint32_t flags</div><div class="ttdef"><b>Definition:</b> <a href="xen_8c_source.html#l00001">xen.c:1</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ac04fc2bcb3434803c9f3c10594f309be_cgraph.png" border="0" usemap="#alapic_8c_ac04fc2bcb3434803c9f3c10594f309be_cgraph" alt=""/></div>
<map name="alapic_8c_ac04fc2bcb3434803c9f3c10594f309be_cgraph" id="alapic_8c_ac04fc2bcb3434803c9f3c10594f309be_cgraph">
<area shape="rect" title=" " alt="" coords="5,189,164,216"/>
<area shape="rect" href="lapic_8c.html#adc5f49f6a4cafac330b1fc370038f837" title=" " alt="" coords="212,299,359,325"/>
<area shape="rect" href="x86_8c.html#a39aa151ace542072ef1fa0998ad8179c" title=" " alt="" coords="663,19,795,45"/>
<area shape="rect" href="lapic_8c.html#aad64663521c2c2f523dce26a339df367" title=" " alt="" coords="407,124,593,151"/>
<area shape="rect" href="lapic_8c.html#adaceffbfc91320b193a66d974fb12ce0" title=" " alt="" coords="649,303,809,329"/>
<area shape="rect" href="lapic_8c.html#a290cedfa4bc99681ad10d45d0d960a17" title=" " alt="" coords="407,350,593,391"/>
<area shape="rect" href="kvm__main_8c.html#ac82f28c95da4a0cc137c5a37f08d1f44" title=" " alt="" coords="1117,781,1240,808"/>
<area shape="rect" href="kvm__main_8c.html#ac5a3afd8e2d8d1139dc7711c4b9e07e3" title=" " alt="" coords="413,680,587,707"/>
<area shape="rect" href="lapic_8c.html#af4c60ea967a94401d14b834ac3e6a679" title=" " alt="" coords="413,201,587,242"/>
<area shape="rect" href="lapic_8c.html#a0a1a2c50e4624d010e1a145b3d0228a9" title=" " alt="" coords="653,136,804,163"/>
<area shape="rect" href="lapic_8c.html#afabb27fc3cb4bd601a2fe90515cf402d" title=" " alt="" coords="657,70,800,111"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="893,56,1013,83"/>
<area shape="rect" href="x86_8c.html#a82290aaeb3d7ee560af215724efad4c2" title=" " alt="" coords="894,5,1013,32"/>
<area shape="rect" href="x86_8c.html#a6137b318fa926306eb86e2b06f78ef90" title=" " alt="" coords="1131,5,1227,32"/>
<area shape="rect" href="lapic_8c.html#adf8f8ff420925292fe7ce7e1ea72924a" title=" " alt="" coords="660,408,797,435"/>
<area shape="rect" href="lapic_8c.html#ab1ce737e754e319ee93f3d06e197cc50" title=" " alt="" coords="641,357,816,384"/>
<area shape="rect" href="lapic_8c.html#a10d887046aaccb6cf4178421594dee10" title=" " alt="" coords="885,579,1022,605"/>
<area shape="rect" href="lapic_8h.html#a1d8660ecbda996b11b10b179013e52d4" title=" " alt="" coords="1333,503,1504,529"/>
<area shape="rect" href="cpuid_8h.html#a0de02c3fbec1aa3cfd7890fb68d3fabf" title=" " alt="" coords="876,259,1031,301"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="881,325,1026,352"/>
<area shape="rect" href="lapic_8c.html#ab2ee275fa1bc17aa0bfde435723b8f48" title=" " alt="" coords="881,376,1025,403"/>
<area shape="rect" href="lapic_8c.html#ab0bd88f2e9609cef51f64e40f0635c9d" title=" " alt="" coords="1125,629,1233,656"/>
<area shape="rect" href="lapic_8c.html#ad063ed2f42a913efa82bad52d1b58aa8" title=" " alt="" coords="1114,680,1243,707"/>
<area shape="rect" href="x86_8c.html#a09da0747db3b012bff918f94816f0bd0" title=" " alt="" coords="1115,731,1242,757"/>
<area shape="rect" href="smm_8h.html#adbee86ed847633616e1e3afcc7e98e6e" title=" " alt="" coords="1116,477,1241,504"/>
<area shape="rect" href="lapic_8h.html#ada4d7479e3c0f2e45cb1565dab78c198" title=" " alt="" coords="1091,528,1267,555"/>
<area shape="rect" href="lapic_8h.html#aecd6ca5347dbb81047584149b2291019" title=" " alt="" coords="1097,579,1261,605"/>
<area shape="rect" href="lapic_8h.html#a447b1b971acaf871dd62669b4aa3116f" title=" " alt="" coords="1334,629,1503,656"/>
<area shape="rect" href="x86_8c.html#a42500cdc8706ebf4fa3ec21645530097" title=" " alt="" coords="1315,756,1523,783"/>
<area shape="rect" href="kvm__main_8c.html#ad9f0140eebcdef9a9ebae54431d2fba5" title=" " alt="" coords="1342,807,1495,833"/>
<area shape="rect" href="cpuid_8h.html#afe67350cf6a86de17676b9dbb85e0207" title=" " alt="" coords="1101,259,1256,301"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="1099,325,1258,352"/>
<area shape="rect" href="lapic_8c.html#a5de365e734b929b65e2d75f62cea6f7e" title=" " alt="" coords="1099,376,1258,403"/>
<area shape="rect" href="lapic_8c.html#ad7790e6f84a1592b5298b2da79a633a9" title=" " alt="" coords="649,187,808,229"/>
<area shape="rect" href="x86_8h.html#ace4ed625ac4852e54db110fde28d3231" title=" " alt="" coords="885,208,1022,235"/>
<area shape="rect" href="x86_8h.html#a8a31c0c01a5fe5dc33f7c5675ba4d376" title=" " alt="" coords="873,107,1034,133"/>
<area shape="rect" href="lapic_8h.html#a3af346d02eebff16886d49d3810b5358" title=" " alt="" coords="864,157,1043,184"/>
<area shape="rect" href="lapic_8h.html#a1d8c9378fcbf62390a89dc3b7f0bdbd4" title=" " alt="" coords="1119,157,1238,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ac04fc2bcb3434803c9f3c10594f309be_icgraph.png" border="0" usemap="#alapic_8c_ac04fc2bcb3434803c9f3c10594f309be_icgraph" alt=""/></div>
<map name="alapic_8c_ac04fc2bcb3434803c9f3c10594f309be_icgraph" id="alapic_8c_ac04fc2bcb3434803c9f3c10594f309be_icgraph">
<area shape="rect" title=" " alt="" coords="1832,325,1991,352"/>
<area shape="rect" href="lapic_8c.html#af723244d8a4013a14d7eaa2bca2765e8" title=" " alt="" coords="1665,325,1784,352"/>
<area shape="rect" href="lapic_8c.html#aee4a3e5ae4ed211edf4e463ebacadaa5" title=" " alt="" coords="1459,239,1617,281"/>
<area shape="rect" href="lapic_8c.html#ade21404bee3e5dbbe596ff391e0a23db" title=" " alt="" coords="1467,355,1609,381"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="1043,197,1137,224"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="781,171,863,197"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="468,107,655,133"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="260,497,384,524"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1255,784,1398,811"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="743,1028,901,1055"/>
<area shape="rect" href="lapic_8c.html#a55b40b66655c45769650efd20bf3c26d" title=" " alt="" coords="1243,249,1411,290"/>
<area shape="rect" href="lapic_8c.html#ab785e74943a17874760f3d4b6b5359d0" title=" " alt="" coords="1245,379,1408,421"/>
<area shape="rect" href="lapic_8c.html#a973c3bd2856958a514e5ae2f49b14821" title=" " alt="" coords="1247,314,1406,355"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1014,784,1166,811"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1026,872,1154,899"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="747,777,897,818"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="482,784,641,811"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="707,872,937,899"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="494,1163,629,1189"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="464,1112,659,1139"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="481,1003,642,1029"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="490,1053,633,1080"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="246,1105,398,1146"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="233,1221,411,1248"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="252,1171,392,1197"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="13,1214,172,1255"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="228,1003,416,1029"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="235,952,409,979"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="26,1003,159,1029"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="5,927,180,953"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="247,1053,397,1080"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="484,835,639,877"/>
<area shape="rect" href="vmx_8c.html#a4048dc7fd33eb8ff41549eb346da0ecc" title=" " alt="" coords="985,49,1195,90"/>
<area shape="rect" href="vmx_8c.html#a5d004ab7739fb08f4f27f4f82b32aaa5" title=" " alt="" coords="727,5,917,32"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="719,56,925,83"/>
<area shape="rect" href="vmx_8c.html#a23ea2316b60c27a2c00f924b983a46e9" title=" " alt="" coords="487,5,635,32"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="503,56,620,83"/>
<area shape="rect" href="x86_8c.html#aaa51abf3d06fdaa95794b27f273278fb" title=" " alt="" coords="1011,387,1169,413"/>
<area shape="rect" href="kvm__main_8c.html#a31b6c41ce8eacbbdc56a276018989253" title=" " alt="" coords="765,349,879,376"/>
<area shape="rect" href="kvm__main_8c.html#a5dde35c5b74ce68a7dbb2f2006ce3e9e" title=" " alt="" coords="778,439,866,465"/>
<area shape="rect" href="kvm__main_8c.html#a2372c616bc55bc4cd3446660cb7322fc" title=" " alt="" coords="522,157,601,184"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="475,340,647,367"/>
<area shape="rect" href="x86_8c.html#a8103751d0c861cfc0c6d0fed892e2454" title=" " alt="" coords="482,391,641,433"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="482,457,641,498"/>
<area shape="rect" href="x86_8c.html#a3de7a07b3d9ed3ee68dbdfb0c53dc5d0" title=" " alt="" coords="482,522,641,563"/>
<area shape="rect" href="x86_8c.html#ac6ebab4c3448cdbc79dbcac73e94503b" title=" " alt="" coords="482,587,641,629"/>
<area shape="rect" href="x86_8c.html#a02f0a60bd0147952e87f6ad38128f748" title=" " alt="" coords="482,653,641,694"/>
<area shape="rect" href="x86_8c.html#ae3d9929c9a77fa2c710befa0a784d4c6" title=" " alt="" coords="482,718,641,759"/>
<area shape="rect" href="x86_8c.html#a93a45fe328a7ab7be2e5426ffc845c32" title=" " alt="" coords="482,209,641,250"/>
<area shape="rect" href="x86_8c.html#af51ba1557e985ebd63f465527cc511b3" title=" " alt="" coords="482,274,641,315"/>
</map>
</div>

</div>
</div>
<a id="ab9f4c987f5a9d71b966ec05058380bb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9f4c987f5a9d71b966ec05058380bb4">&#9670;&nbsp;</a></span>tmict_to_ns()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u64 tmict_to_ns </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>tmict</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01963">1963</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;{</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    <span class="keywordflow">return</span> (u64)tmict * <a class="code" href="lapic_8h.html#a0e44db9c8a1731b40f6ad0267b42f3f9">APIC_BUS_CYCLE_NS</a> * (u64)apic-&gt;<a class="code" href="structkvm__lapic.html#a31c3efc5b365f96580ea975272c3f277">divide_count</a>;</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_ab9f4c987f5a9d71b966ec05058380bb4_icgraph.png" border="0" usemap="#alapic_8c_ab9f4c987f5a9d71b966ec05058380bb4_icgraph" alt=""/></div>
<map name="alapic_8c_ab9f4c987f5a9d71b966ec05058380bb4_icgraph" id="alapic_8c_ab9f4c987f5a9d71b966ec05058380bb4_icgraph">
<area shape="rect" title=" " alt="" coords="2288,157,2387,184"/>
<area shape="rect" href="lapic_8c.html#a0efcb9037756de47e9d28f0a5ea1009f" title=" " alt="" coords="2079,132,2240,159"/>
<area shape="rect" href="lapic_8c.html#a694be782d2a5e9a6ece8dd51f3da91f4" title=" " alt="" coords="1844,183,2031,209"/>
<area shape="rect" href="lapic_8c.html#a108aca5a9980d721f30b333be204d005" title=" " alt="" coords="1866,125,2009,152"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1644,56,1796,83"/>
<area shape="rect" href="lapic_8c.html#a5f5c49ce8a579b59663644f0f1a6cbe3" title=" " alt="" coords="1656,125,1784,152"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1405,27,1556,69"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="1141,5,1299,32"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="919,5,1043,32"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1402,212,1559,239"/>
<area shape="rect" href="lapic_8c.html#a44881cc17bdbe632a483e8c7c1dd0dfb" title=" " alt="" coords="1365,123,1596,149"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1153,275,1287,301"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1123,363,1317,389"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1139,224,1301,251"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1149,173,1291,200"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="905,326,1057,367"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="891,392,1070,419"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="911,443,1051,469"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="656,385,815,426"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="887,224,1075,251"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="399,275,572,301"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="669,224,802,251"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,224,584,251"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,224,339,251"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,173,101,200"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,224,115,251"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,275,116,301"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="905,173,1056,200"/>
<area shape="rect" href="x86_8c.html#a7b5659746726fd8443c25a3faca86d7c" title=" " alt="" coords="1143,57,1297,98"/>
<area shape="rect" href="x86_8c.html#a8a37294ff599bdc5183d75ecdd61412a" title=" " alt="" coords="903,57,1058,98"/>
<area shape="rect" href="svm_8c.html#a82c8447e70f06dd52623c696446104b5" title=" " alt="" coords="632,17,839,44"/>
<area shape="rect" href="vmx_8c.html#a3217468b58ef72d3e7e7d40024c24b67" title=" " alt="" coords="632,68,839,95"/>
<area shape="rect" href="svm_8c.html#a5d2703bd914c4ae4fcb1eb83c208b085" title=" " alt="" coords="427,17,543,44"/>
<area shape="rect" href="vmx_8c.html#a909291866931c22138fd3ba80f0a7651" title=" " alt="" coords="427,68,544,95"/>
</map>
</div>

</div>
</div>
<a id="a59900449cd556b732187d0a91d983b80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59900449cd556b732187d0a91d983b80">&#9670;&nbsp;</a></span>to_lapic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a>* to_lapic </td>
          <td>(</td>
          <td class="paramtype">struct kvm_io_device *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01598">1598</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;{</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keywordflow">return</span> container_of(dev, <span class="keyword">struct</span> <a class="code" href="structkvm__lapic.html">kvm_lapic</a>, dev);</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a59900449cd556b732187d0a91d983b80_icgraph.png" border="0" usemap="#alapic_8c_a59900449cd556b732187d0a91d983b80_icgraph" alt=""/></div>
<map name="alapic_8c_a59900449cd556b732187d0a91d983b80_icgraph" id="alapic_8c_a59900449cd556b732187d0a91d983b80_icgraph">
<area shape="rect" title=" " alt="" coords="188,31,261,57"/>
<area shape="rect" href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1" title=" " alt="" coords="7,5,138,32"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="5,56,140,83"/>
</map>
</div>

</div>
</div>
<a id="a946cf21407471f7a6ba449b2435055c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a946cf21407471f7a6ba449b2435055c3">&#9670;&nbsp;</a></span>update_divide_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void update_divide_count </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01711">1711</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;{</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    u32 tmp1, tmp2, tdcr;</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160; </div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    tdcr = <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_TDCR);</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    tmp1 = tdcr &amp; 0xf;</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    tmp2 = ((tmp1 &amp; 0x3) | ((tmp1 &amp; 0x8) &gt;&gt; 1)) + 1;</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a31c3efc5b365f96580ea975272c3f277">divide_count</a> = 0x1 &lt;&lt; (tmp2 &amp; 0x7);</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a946cf21407471f7a6ba449b2435055c3_cgraph.png" border="0" usemap="#alapic_8c_a946cf21407471f7a6ba449b2435055c3_cgraph" alt=""/></div>
<map name="alapic_8c_a946cf21407471f7a6ba449b2435055c3_cgraph" id="alapic_8c_a946cf21407471f7a6ba449b2435055c3_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,163,32"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="211,5,356,32"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="404,5,563,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a946cf21407471f7a6ba449b2435055c3_icgraph.png" border="0" usemap="#alapic_8c_a946cf21407471f7a6ba449b2435055c3_icgraph" alt=""/></div>
<map name="alapic_8c_a946cf21407471f7a6ba449b2435055c3_icgraph" id="alapic_8c_a946cf21407471f7a6ba449b2435055c3_icgraph">
<area shape="rect" title=" " alt="" coords="1589,401,1747,428"/>
<area shape="rect" href="lapic_8c.html#a4768d4990380510ec220c3e510d32598" title=" " alt="" coords="1387,456,1539,483"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1384,221,1541,248"/>
<area shape="rect" href="lapic_8c.html#a8b8a5d87df5283a20e9aa9b828320552" title=" " alt="" coords="1398,401,1527,428"/>
<area shape="rect" href="x86_8c.html#a4426192bd0d8288db892f9fcbf4577b9" title=" " alt="" coords="1163,474,1314,515"/>
<area shape="rect" href="x86_8c.html#ab4ac4d44dfa1ed8985130249d6a8385e" title=" " alt="" coords="431,496,590,523"/>
<area shape="rect" href="kvm__main_8c.html#a2f2d3734c4cf61a1f4f94e9d47c37d55" title=" " alt="" coords="5,405,129,432"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1171,272,1306,299"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1141,221,1336,248"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1158,81,1319,108"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1167,157,1310,184"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="923,285,1075,326"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="910,183,1089,209"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="929,233,1069,260"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="678,175,837,217"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="905,31,1093,57"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="424,81,597,108"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="691,31,824,57"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="412,31,609,57"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="183,56,358,83"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="27,56,108,83"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="13,107,122,133"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="12,5,123,32"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="924,132,1075,159"/>
<area shape="rect" href="x86_8c.html#a2694456104c02a7204796d89d13a1e91" title=" " alt="" coords="1174,401,1303,428"/>
<area shape="rect" href="lapic_8c.html#a27836a2bcd51ebcfe2ca478e9ad7aa04" title=" " alt="" coords="906,351,1093,377"/>
<area shape="rect" href="x86_8c.html#ae2ebf37d8daf1a8b43a9823bae4ab32b" title=" " alt="" coords="913,452,1085,479"/>
<area shape="rect" href="svm_8c.html#a2ca2b108d5447ed4093cb0b07092b07d" title=" " alt="" coords="914,401,1085,428"/>
<area shape="rect" href="x86_8c.html#a5eac8002ee5a0c08de662d89be4d6a11" title=" " alt="" coords="191,398,350,439"/>
<area shape="rect" href="x86_8c.html#adbabb8b4e50c9c51eec6373fcbc833aa" title=" " alt="" coords="177,347,364,373"/>
<area shape="rect" href="x86_8c.html#a11b79dde650fe425e9b649e1463869be" title=" " alt="" coords="710,249,805,276"/>
<area shape="rect" href="x86_8c.html#a3361a1b517035bb0595ead223a3cb349" title=" " alt="" coords="689,300,826,327"/>
<area shape="rect" href="x86_8c.html#ae90d8433a234fc6ee73cd19322f11ada" title=" " alt="" coords="470,300,551,327"/>
<area shape="rect" href="kvm__main_8c.html#ab8870469dadfadf9a204346c62016293" title=" " alt="" coords="657,452,857,479"/>
</map>
</div>

</div>
</div>
<a id="a694be782d2a5e9a6ece8dd51f3da91f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a694be782d2a5e9a6ece8dd51f3da91f4">&#9670;&nbsp;</a></span>update_target_expiration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void update_target_expiration </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkvm__lapic.html">kvm_lapic</a> *&#160;</td>
          <td class="paramname"><em>apic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>old_divisor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l01968">1968</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;{</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    ktime_t now, remaining;</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;    u64 ns_remaining_old, ns_remaining_new;</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160; </div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a159bd17861468df061b33cdbd9a6b477">period</a> =</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;            <a class="code" href="lapic_8c.html#ab9f4c987f5a9d71b966ec05058380bb4">tmict_to_ns</a>(apic, <a class="code" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee">kvm_lapic_get_reg</a>(apic, APIC_TMICT));</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <a class="code" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c">limit_periodic_timer_frequency</a>(apic);</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160; </div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    now = ktime_get();</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    remaining = ktime_sub(apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a0de90943a0ace07fbb0e0219fe64e2f8">target_expiration</a>, now);</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;    <span class="keywordflow">if</span> (ktime_to_ns(remaining) &lt; 0)</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        remaining = 0;</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160; </div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    ns_remaining_old = ktime_to_ns(remaining);</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    ns_remaining_new = mul_u64_u32_div(ns_remaining_old,</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;                                       apic-&gt;<a class="code" href="structkvm__lapic.html#a31c3efc5b365f96580ea975272c3f277">divide_count</a>, old_divisor);</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160; </div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#acb4ad6bfe6c14982d0a87f4678e92d09">tscdeadline</a> +=</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;        <a class="code" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df">nsec_to_cycles</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, ns_remaining_new) -</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        <a class="code" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df">nsec_to_cycles</a>(apic-&gt;<a class="code" href="structkvm__lapic.html#a54741597d07b2792d2da72ea301ad648">vcpu</a>, ns_remaining_old);</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    apic-&gt;<a class="code" href="structkvm__lapic.html#a2e61dc072b6f41497ade5b4a59b2c52a">lapic_timer</a>.<a class="code" href="structkvm__timer.html#a0de90943a0ace07fbb0e0219fe64e2f8">target_expiration</a> = ktime_add_ns(now, ns_remaining_new);</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a694be782d2a5e9a6ece8dd51f3da91f4_cgraph.png" border="0" usemap="#alapic_8c_a694be782d2a5e9a6ece8dd51f3da91f4_cgraph" alt=""/></div>
<map name="alapic_8c_a694be782d2a5e9a6ece8dd51f3da91f4_cgraph" id="alapic_8c_a694be782d2a5e9a6ece8dd51f3da91f4_cgraph">
<area shape="rect" title=" " alt="" coords="5,93,192,120"/>
<area shape="rect" href="lapic_8h.html#a8cd1df8b4c079c23a522d09c964da0ee" title=" " alt="" coords="244,5,389,32"/>
<area shape="rect" href="lapic_8c.html#a985df23c29d6d25105aba975adf5582c" title=" " alt="" coords="240,57,393,98"/>
<area shape="rect" href="x86_8h.html#abbd5927434d63bff53c0c1f8185d46df" title=" " alt="" coords="257,123,377,149"/>
<area shape="rect" href="lapic_8c.html#ab9f4c987f5a9d71b966ec05058380bb4" title=" " alt="" coords="267,173,366,200"/>
<area shape="rect" href="lapic_8h.html#aa28a43e0f54449e2ec4d25e1f8ecb178" title=" " alt="" coords="441,5,600,32"/>
<area shape="rect" href="lapic_8c.html#a843b5038a6a8d6c20b11bd97b69bf667" title=" " alt="" coords="457,64,584,91"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lapic_8c_a694be782d2a5e9a6ece8dd51f3da91f4_icgraph.png" border="0" usemap="#alapic_8c_a694be782d2a5e9a6ece8dd51f3da91f4_icgraph" alt=""/></div>
<map name="alapic_8c_a694be782d2a5e9a6ece8dd51f3da91f4_icgraph" id="alapic_8c_a694be782d2a5e9a6ece8dd51f3da91f4_icgraph">
<area shape="rect" title=" " alt="" coords="1523,147,1709,174"/>
<area shape="rect" href="lapic_8c.html#acebc0ffd4530dfd1beb1254d1e4d9491" title=" " alt="" coords="1317,147,1475,174"/>
<area shape="rect" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e" title=" " alt="" coords="1105,71,1239,98"/>
<area shape="rect" href="lapic_8c.html#a1b33bb5758d3dd75c7b87e537a5e729e" title=" " alt="" coords="1075,122,1269,149"/>
<area shape="rect" href="lapic_8c.html#a1b64be7f231109aa3e0382cc34a64079" title=" " alt="" coords="1091,173,1253,199"/>
<area shape="rect" href="lapic_8c.html#ab6d8f3638f580c8d6dcd091512c49768" title=" " alt="" coords="1101,249,1243,275"/>
<area shape="rect" href="avic_8c.html#a4a11c0014568405b90307ef68285e4ff" title=" " alt="" coords="857,5,1009,47"/>
<area shape="rect" href="avic_8c.html#abf44c96047cb51680ff358ad52747b93" title=" " alt="" coords="843,71,1022,98"/>
<area shape="rect" href="vmx_8c.html#aa25166160931e80a671ab6f919d64760" title=" " alt="" coords="863,122,1003,149"/>
<area shape="rect" href="avic_8c.html#a299de3990a5ce5ce873df7afe2b3338f" title=" " alt="" coords="632,64,791,105"/>
<area shape="rect" href="lapic_8c.html#acd2b4e5a0448d3280ab31687c2199265" title=" " alt="" coords="839,173,1027,199"/>
<area shape="rect" href="lapic_8c.html#a7d2f3f34c12c8c724fe739cbbc44ad43" title=" " alt="" coords="399,223,572,250"/>
<area shape="rect" href="hyperv_8c.html#adbfbc91bbdd19f529b4489eb1d8e1ec7" title=" " alt="" coords="645,173,778,199"/>
<area shape="rect" href="hyperv_8c.html#ab6a097fa5ccc00cb31061629a4e3e2f7" title=" " alt="" coords="387,173,584,199"/>
<area shape="rect" href="x86_8c.html#aec2b7dd73668f030b4e2f8d8815d7299" title=" " alt="" coords="164,198,339,225"/>
<area shape="rect" href="svm_8c.html#acb46126747f78036462437a7bcdc2e47" title=" " alt="" coords="20,147,101,174"/>
<area shape="rect" href="svm_8c.html#aac18b9094154a2c8b8e27c3b08c9e359" title=" " alt="" coords="6,198,115,225"/>
<area shape="rect" href="vmx_8c.html#a0fb610ce041405729e4296dfc871c30e" title=" " alt="" coords="5,249,116,275"/>
<area shape="rect" href="vmx_8c.html#adc5f600eadc84c85aa0b9982dc6fb210" title=" " alt="" coords="857,274,1008,301"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a2bce74e938478719805f3d3ee4fae532"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bce74e938478719805f3d3ee4fae532">&#9670;&nbsp;</a></span>__read_mostly</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool lapic_timer_advance_dynamic __read_mostly</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00062">62</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
<a id="a54ccc473e4178fea8e25602ac8000683"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54ccc473e4178fea8e25602ac8000683">&#9670;&nbsp;</a></span>apic_lvt_mask</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned int apic_lvt_mask[<a class="el" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdaa2e7ce18b246d7ad6fe039d93d40dd06">KVM_APIC_MAX_NR_LVT_ENTRIES</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    [<a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdaaa41ab22efcb8632e45533e067402ac2">LVT_TIMER</a>] = <a class="code" href="lapic_8c.html#a29cd928e2c4df6a9ec6fd865259d8212">LVT_MASK</a>,      </div>
<div class="line">    [<a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdaf3ef908053e3fd4a9c45a1c5046372c9">LVT_THERMAL_MONITOR</a>] = <a class="code" href="lapic_8c.html#a29cd928e2c4df6a9ec6fd865259d8212">LVT_MASK</a> | APIC_MODE_MASK,</div>
<div class="line">    [<a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda287c02fa2b5efa0b060c321914ad5aff">LVT_PERFORMANCE_COUNTER</a>] = <a class="code" href="lapic_8c.html#a29cd928e2c4df6a9ec6fd865259d8212">LVT_MASK</a> | APIC_MODE_MASK,</div>
<div class="line">    [<a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda1118be31e3566e933d9ce565a02cfdd5">LVT_LINT0</a>] = <a class="code" href="lapic_8c.html#a687c09dc40674b09e4ea620eaac08cd8">LINT_MASK</a>,</div>
<div class="line">    [<a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdad63014a29d09b49e2d4a5ea621624573">LVT_LINT1</a>] = <a class="code" href="lapic_8c.html#a687c09dc40674b09e4ea620eaac08cd8">LINT_MASK</a>,</div>
<div class="line">    [<a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda3f637ebcd14b33d1c30b0b56b09cb29f">LVT_ERROR</a>] = <a class="code" href="lapic_8c.html#a29cd928e2c4df6a9ec6fd865259d8212">LVT_MASK</a>,</div>
<div class="line">    [<a class="code" href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda6501a8a1c49c80b439b25520514bbfce">LVT_CMCI</a>] = <a class="code" href="lapic_8c.html#a29cd928e2c4df6a9ec6fd865259d8212">LVT_MASK</a> | APIC_MODE_MASK</div>
<div class="line">}</div>
<div class="ttc" id="alapic_8c_html_a687c09dc40674b09e4ea620eaac08cd8"><div class="ttname"><a href="lapic_8c.html#a687c09dc40674b09e4ea620eaac08cd8">LINT_MASK</a></div><div class="ttdeci">#define LINT_MASK</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l00139">lapic.c:139</a></div></div>
<div class="ttc" id="alapic_8h_html_abcd26ec2b2cce7b13778d6fcea27c1fda1118be31e3566e933d9ce565a02cfdd5"><div class="ttname"><a href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda1118be31e3566e933d9ce565a02cfdd5">LVT_LINT0</a></div><div class="ttdeci">@ LVT_LINT0</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00036">lapic.h:36</a></div></div>
<div class="ttc" id="alapic_8h_html_abcd26ec2b2cce7b13778d6fcea27c1fda287c02fa2b5efa0b060c321914ad5aff"><div class="ttname"><a href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda287c02fa2b5efa0b060c321914ad5aff">LVT_PERFORMANCE_COUNTER</a></div><div class="ttdeci">@ LVT_PERFORMANCE_COUNTER</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00035">lapic.h:35</a></div></div>
<div class="ttc" id="alapic_8h_html_abcd26ec2b2cce7b13778d6fcea27c1fda3f637ebcd14b33d1c30b0b56b09cb29f"><div class="ttname"><a href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fda3f637ebcd14b33d1c30b0b56b09cb29f">LVT_ERROR</a></div><div class="ttdeci">@ LVT_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00038">lapic.h:38</a></div></div>
<div class="ttc" id="alapic_8h_html_abcd26ec2b2cce7b13778d6fcea27c1fdaaa41ab22efcb8632e45533e067402ac2"><div class="ttname"><a href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdaaa41ab22efcb8632e45533e067402ac2">LVT_TIMER</a></div><div class="ttdeci">@ LVT_TIMER</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00033">lapic.h:33</a></div></div>
<div class="ttc" id="alapic_8h_html_abcd26ec2b2cce7b13778d6fcea27c1fdad63014a29d09b49e2d4a5ea621624573"><div class="ttname"><a href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdad63014a29d09b49e2d4a5ea621624573">LVT_LINT1</a></div><div class="ttdeci">@ LVT_LINT1</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00037">lapic.h:37</a></div></div>
<div class="ttc" id="alapic_8h_html_abcd26ec2b2cce7b13778d6fcea27c1fdaf3ef908053e3fd4a9c45a1c5046372c9"><div class="ttname"><a href="lapic_8h.html#abcd26ec2b2cce7b13778d6fcea27c1fdaf3ef908053e3fd4a9c45a1c5046372c9">LVT_THERMAL_MONITOR</a></div><div class="ttdeci">@ LVT_THERMAL_MONITOR</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8h_source.html#l00034">lapic.h:34</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l00615">615</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
<a id="a61013c760fedb5cc2ce71f0243787f7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61013c760fedb5cc2ce71f0243787f7e">&#9670;&nbsp;</a></span>apic_mmio_ops</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct kvm_io_device_ops apic_mmio_ops</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .read     = <a class="code" href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1">apic_mmio_read</a>,</div>
<div class="line">    .write    = <a class="code" href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e">apic_mmio_write</a>,</div>
<div class="line">}</div>
<div class="ttc" id="alapic_8c_html_a18976a1e591c223c2aec9c52711c6da1"><div class="ttname"><a href="lapic_8c.html#a18976a1e591c223c2aec9c52711c6da1">apic_mmio_read</a></div><div class="ttdeci">static int apic_mmio_read(struct kvm_vcpu *vcpu, struct kvm_io_device *this, gpa_t address, int len, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l01688">lapic.c:1688</a></div></div>
<div class="ttc" id="alapic_8c_html_a58177b5add54a17bfa81e2a1049f324e"><div class="ttname"><a href="lapic_8c.html#a58177b5add54a17bfa81e2a1049f324e">apic_mmio_write</a></div><div class="ttdeci">static int apic_mmio_write(struct kvm_vcpu *vcpu, struct kvm_io_device *this, gpa_t address, int len, const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="lapic_8c_source.html#l02406">lapic.c:2406</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="lapic_8c_source.html#l02782">2782</a> of file <a class="el" href="lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
